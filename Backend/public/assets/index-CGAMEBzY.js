function RC(i,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in i)){const A=Object.getOwnPropertyDescriptor(r,a);A&&Object.defineProperty(i,a,A.get?A:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const A of a)if(A.type==="childList")for(const c of A.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const A={};return a.integrity&&(A.integrity=a.integrity),a.referrerPolicy&&(A.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?A.credentials="include":a.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function r(a){if(a.ep)return;a.ep=!0;const A=t(a);fetch(a.href,A)}})();function MC(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var op={exports:{}},Ha={},ip={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm;function LC(){if(gm)return wt;gm=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(P){return P===null||typeof P!="object"?null:(P=y&&P[y]||P["@@iterator"],typeof P=="function"?P:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,L={};function Q(P,oe,je){this.props=P,this.context=oe,this.refs=L,this.updater=je||H}Q.prototype.isReactComponent={},Q.prototype.setState=function(P,oe){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,oe,"setState")},Q.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function V(){}V.prototype=Q.prototype;function D(P,oe,je){this.props=P,this.context=oe,this.refs=L,this.updater=je||H}var te=D.prototype=new V;te.constructor=D,S(te,Q.prototype),te.isPureReactComponent=!0;var J=Array.isArray,M=Object.prototype.hasOwnProperty,N={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function Be(P,oe,je){var U,B={},j=null,_=null;if(oe!=null)for(U in oe.ref!==void 0&&(_=oe.ref),oe.key!==void 0&&(j=""+oe.key),oe)M.call(oe,U)&&!X.hasOwnProperty(U)&&(B[U]=oe[U]);var ve=arguments.length-2;if(ve===1)B.children=je;else if(1<ve){for(var k=Array(ve),O=0;O<ve;O++)k[O]=arguments[O+2];B.children=k}if(P&&P.defaultProps)for(U in ve=P.defaultProps,ve)B[U]===void 0&&(B[U]=ve[U]);return{$$typeof:i,type:P,key:j,ref:_,props:B,_owner:N.current}}function Ae(P,oe){return{$$typeof:i,type:P.type,key:oe,ref:P.ref,props:P.props,_owner:P._owner}}function le(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function G(P){var oe={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(je){return oe[je]})}var se=/\/+/g;function pe(P,oe){return typeof P=="object"&&P!==null&&P.key!=null?G(""+P.key):oe.toString(36)}function Me(P,oe,je,U,B){var j=typeof P;(j==="undefined"||j==="boolean")&&(P=null);var _=!1;if(P===null)_=!0;else switch(j){case"string":case"number":_=!0;break;case"object":switch(P.$$typeof){case i:case e:_=!0}}if(_)return _=P,B=B(_),P=U===""?"."+pe(_,0):U,J(B)?(je="",P!=null&&(je=P.replace(se,"$&/")+"/"),Me(B,oe,je,"",function(O){return O})):B!=null&&(le(B)&&(B=Ae(B,je+(!B.key||_&&_.key===B.key?"":(""+B.key).replace(se,"$&/")+"/")+P)),oe.push(B)),1;if(_=0,U=U===""?".":U+":",J(P))for(var ve=0;ve<P.length;ve++){j=P[ve];var k=U+pe(j,ve);_+=Me(j,oe,je,k,B)}else if(k=b(P),typeof k=="function")for(P=k.call(P),ve=0;!(j=P.next()).done;)j=j.value,k=U+pe(j,ve++),_+=Me(j,oe,je,k,B);else if(j==="object")throw oe=String(P),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.");return _}function be(P,oe,je){if(P==null)return P;var U=[],B=0;return Me(P,U,"","",function(j){return oe.call(je,j,B++)}),U}function de(P){if(P._status===-1){var oe=P._result;oe=oe(),oe.then(function(je){(P._status===0||P._status===-1)&&(P._status=1,P._result=je)},function(je){(P._status===0||P._status===-1)&&(P._status=2,P._result=je)}),P._status===-1&&(P._status=0,P._result=oe)}if(P._status===1)return P._result.default;throw P._result}var Ue={current:null},me={transition:null},F={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:me,ReactCurrentOwner:N};function re(){throw Error("act(...) is not supported in production builds of React.")}return wt.Children={map:be,forEach:function(P,oe,je){be(P,function(){oe.apply(this,arguments)},je)},count:function(P){var oe=0;return be(P,function(){oe++}),oe},toArray:function(P){return be(P,function(oe){return oe})||[]},only:function(P){if(!le(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},wt.Component=Q,wt.Fragment=t,wt.Profiler=a,wt.PureComponent=D,wt.StrictMode=r,wt.Suspense=u,wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,wt.act=re,wt.cloneElement=function(P,oe,je){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var U=S({},P.props),B=P.key,j=P.ref,_=P._owner;if(oe!=null){if(oe.ref!==void 0&&(j=oe.ref,_=N.current),oe.key!==void 0&&(B=""+oe.key),P.type&&P.type.defaultProps)var ve=P.type.defaultProps;for(k in oe)M.call(oe,k)&&!X.hasOwnProperty(k)&&(U[k]=oe[k]===void 0&&ve!==void 0?ve[k]:oe[k])}var k=arguments.length-2;if(k===1)U.children=je;else if(1<k){ve=Array(k);for(var O=0;O<k;O++)ve[O]=arguments[O+2];U.children=ve}return{$$typeof:i,type:P.type,key:B,ref:j,props:U,_owner:_}},wt.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:A,_context:P},P.Consumer=P},wt.createElement=Be,wt.createFactory=function(P){var oe=Be.bind(null,P);return oe.type=P,oe},wt.createRef=function(){return{current:null}},wt.forwardRef=function(P){return{$$typeof:p,render:P}},wt.isValidElement=le,wt.lazy=function(P){return{$$typeof:g,_payload:{_status:-1,_result:P},_init:de}},wt.memo=function(P,oe){return{$$typeof:f,type:P,compare:oe===void 0?null:oe}},wt.startTransition=function(P){var oe=me.transition;me.transition={};try{P()}finally{me.transition=oe}},wt.unstable_act=re,wt.useCallback=function(P,oe){return Ue.current.useCallback(P,oe)},wt.useContext=function(P){return Ue.current.useContext(P)},wt.useDebugValue=function(){},wt.useDeferredValue=function(P){return Ue.current.useDeferredValue(P)},wt.useEffect=function(P,oe){return Ue.current.useEffect(P,oe)},wt.useId=function(){return Ue.current.useId()},wt.useImperativeHandle=function(P,oe,je){return Ue.current.useImperativeHandle(P,oe,je)},wt.useInsertionEffect=function(P,oe){return Ue.current.useInsertionEffect(P,oe)},wt.useLayoutEffect=function(P,oe){return Ue.current.useLayoutEffect(P,oe)},wt.useMemo=function(P,oe){return Ue.current.useMemo(P,oe)},wt.useReducer=function(P,oe,je){return Ue.current.useReducer(P,oe,je)},wt.useRef=function(P){return Ue.current.useRef(P)},wt.useState=function(P){return Ue.current.useState(P)},wt.useSyncExternalStore=function(P,oe,je){return Ue.current.useSyncExternalStore(P,oe,je)},wt.useTransition=function(){return Ue.current.useTransition()},wt.version="18.3.1",wt}var fm;function Sh(){return fm||(fm=1,ip.exports=LC()),ip.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm;function DC(){if(mm)return Ha;mm=1;var i=Sh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A={key:!0,ref:!0,__self:!0,__source:!0};function c(p,u,f){var g,y={},b=null,H=null;f!==void 0&&(b=""+f),u.key!==void 0&&(b=""+u.key),u.ref!==void 0&&(H=u.ref);for(g in u)r.call(u,g)&&!A.hasOwnProperty(g)&&(y[g]=u[g]);if(p&&p.defaultProps)for(g in u=p.defaultProps,u)y[g]===void 0&&(y[g]=u[g]);return{$$typeof:e,type:p,key:b,ref:H,props:y,_owner:a.current}}return Ha.Fragment=t,Ha.jsx=c,Ha.jsxs=c,Ha}var xm;function PC(){return xm||(xm=1,op.exports=DC()),op.exports}var n=PC(),m=Sh();const Ji=MC(m),HC=RC({__proto__:null,default:Ji},[m]);var Il={},sp={exports:{}},rr={},ap={exports:{}},Ap={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym;function NC(){return ym||(ym=1,function(i){function e(me,F){var re=me.length;me.push(F);e:for(;0<re;){var P=re-1>>>1,oe=me[P];if(0<a(oe,F))me[P]=F,me[re]=oe,re=P;else break e}}function t(me){return me.length===0?null:me[0]}function r(me){if(me.length===0)return null;var F=me[0],re=me.pop();if(re!==F){me[0]=re;e:for(var P=0,oe=me.length,je=oe>>>1;P<je;){var U=2*(P+1)-1,B=me[U],j=U+1,_=me[j];if(0>a(B,re))j<oe&&0>a(_,B)?(me[P]=_,me[j]=re,P=j):(me[P]=B,me[U]=re,P=U);else if(j<oe&&0>a(_,re))me[P]=_,me[j]=re,P=j;else break e}}return F}function a(me,F){var re=me.sortIndex-F.sortIndex;return re!==0?re:me.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;i.unstable_now=function(){return A.now()}}else{var c=Date,p=c.now();i.unstable_now=function(){return c.now()-p}}var u=[],f=[],g=1,y=null,b=3,H=!1,S=!1,L=!1,Q=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(me){for(var F=t(f);F!==null;){if(F.callback===null)r(f);else if(F.startTime<=me)r(f),F.sortIndex=F.expirationTime,e(u,F);else break;F=t(f)}}function J(me){if(L=!1,te(me),!S)if(t(u)!==null)S=!0,de(M);else{var F=t(f);F!==null&&Ue(J,F.startTime-me)}}function M(me,F){S=!1,L&&(L=!1,V(Be),Be=-1),H=!0;var re=b;try{for(te(F),y=t(u);y!==null&&(!(y.expirationTime>F)||me&&!G());){var P=y.callback;if(typeof P=="function"){y.callback=null,b=y.priorityLevel;var oe=P(y.expirationTime<=F);F=i.unstable_now(),typeof oe=="function"?y.callback=oe:y===t(u)&&r(u),te(F)}else r(u);y=t(u)}if(y!==null)var je=!0;else{var U=t(f);U!==null&&Ue(J,U.startTime-F),je=!1}return je}finally{y=null,b=re,H=!1}}var N=!1,X=null,Be=-1,Ae=5,le=-1;function G(){return!(i.unstable_now()-le<Ae)}function se(){if(X!==null){var me=i.unstable_now();le=me;var F=!0;try{F=X(!0,me)}finally{F?pe():(N=!1,X=null)}}else N=!1}var pe;if(typeof D=="function")pe=function(){D(se)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,be=Me.port2;Me.port1.onmessage=se,pe=function(){be.postMessage(null)}}else pe=function(){Q(se,0)};function de(me){X=me,N||(N=!0,pe())}function Ue(me,F){Be=Q(function(){me(i.unstable_now())},F)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(me){me.callback=null},i.unstable_continueExecution=function(){S||H||(S=!0,de(M))},i.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ae=0<me?Math.floor(1e3/me):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_getFirstCallbackNode=function(){return t(u)},i.unstable_next=function(me){switch(b){case 1:case 2:case 3:var F=3;break;default:F=b}var re=b;b=F;try{return me()}finally{b=re}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(me,F){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var re=b;b=me;try{return F()}finally{b=re}},i.unstable_scheduleCallback=function(me,F,re){var P=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?P+re:P):re=P,me){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=re+oe,me={id:g++,callback:F,priorityLevel:me,startTime:re,expirationTime:oe,sortIndex:-1},re>P?(me.sortIndex=re,e(f,me),t(u)===null&&me===t(f)&&(L?(V(Be),Be=-1):L=!0,Ue(J,re-P))):(me.sortIndex=oe,e(u,me),S||H||(S=!0,de(M))),me},i.unstable_shouldYield=G,i.unstable_wrapCallback=function(me){var F=b;return function(){var re=b;b=F;try{return me.apply(this,arguments)}finally{b=re}}}}(Ap)),Ap}var bm;function _C(){return bm||(bm=1,ap.exports=NC()),ap.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function OC(){if(vm)return rr;vm=1;var i=Sh(),e=_C();function t(o){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+o,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function A(o,s){c(o,s),c(o+"Capture",s)}function c(o,s){for(a[o]=s,o=0;o<s.length;o++)r.add(s[o])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function b(o){return u.call(y,o)?!0:u.call(g,o)?!1:f.test(o)?y[o]=!0:(g[o]=!0,!1)}function H(o,s,l,d){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,s,l,d){if(s===null||typeof s>"u"||H(o,s,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function L(o,s,l,d,h,x,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=h,this.mustUseProperty=l,this.propertyName=o,this.type=s,this.sanitizeURL=x,this.removeEmptyString=w}var Q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){Q[o]=new L(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var s=o[0];Q[s]=new L(s,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){Q[o]=new L(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){Q[o]=new L(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){Q[o]=new L(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){Q[o]=new L(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){Q[o]=new L(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){Q[o]=new L(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){Q[o]=new L(o,5,!1,o.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function D(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var s=o.replace(V,D);Q[s]=new L(s,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var s=o.replace(V,D);Q[s]=new L(s,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var s=o.replace(V,D);Q[s]=new L(s,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){Q[o]=new L(o,1,!1,o.toLowerCase(),null,!1,!1)}),Q.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){Q[o]=new L(o,1,!1,o.toLowerCase(),null,!0,!0)});function te(o,s,l,d){var h=Q.hasOwnProperty(s)?Q[s]:null;(h!==null?h.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(S(s,l,h,d)&&(l=null),d||h===null?b(s)&&(l===null?o.removeAttribute(s):o.setAttribute(s,""+l)):h.mustUseProperty?o[h.propertyName]=l===null?h.type===3?!1:"":l:(s=h.attributeName,d=h.attributeNamespace,l===null?o.removeAttribute(s):(h=h.type,l=h===3||h===4&&l===!0?"":""+l,d?o.setAttributeNS(d,s,l):o.setAttribute(s,l))))}var J=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),N=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),Be=Symbol.for("react.strict_mode"),Ae=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),G=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),me=Symbol.iterator;function F(o){return o===null||typeof o!="object"?null:(o=me&&o[me]||o["@@iterator"],typeof o=="function"?o:null)}var re=Object.assign,P;function oe(o){if(P===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);P=s&&s[1]||""}return`
`+P+o}var je=!1;function U(o,s){if(!o||je)return"";je=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(ye){var d=ye}Reflect.construct(o,[],s)}else{try{s.call()}catch(ye){d=ye}o.call(s.prototype)}else{try{throw Error()}catch(ye){d=ye}o()}}catch(ye){if(ye&&d&&typeof ye.stack=="string"){for(var h=ye.stack.split(`
`),x=d.stack.split(`
`),w=h.length-1,K=x.length-1;1<=w&&0<=K&&h[w]!==x[K];)K--;for(;1<=w&&0<=K;w--,K--)if(h[w]!==x[K]){if(w!==1||K!==1)do if(w--,K--,0>K||h[w]!==x[K]){var q=`
`+h[w].replace(" at new "," at ");return o.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",o.displayName)),q}while(1<=w&&0<=K);break}}}finally{je=!1,Error.prepareStackTrace=l}return(o=o?o.displayName||o.name:"")?oe(o):""}function B(o){switch(o.tag){case 5:return oe(o.type);case 16:return oe("Lazy");case 13:return oe("Suspense");case 19:return oe("SuspenseList");case 0:case 2:case 15:return o=U(o.type,!1),o;case 11:return o=U(o.type.render,!1),o;case 1:return o=U(o.type,!0),o;default:return""}}function j(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case X:return"Fragment";case N:return"Portal";case Ae:return"Profiler";case Be:return"StrictMode";case pe:return"Suspense";case Me:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case G:return(o.displayName||"Context")+".Consumer";case le:return(o._context.displayName||"Context")+".Provider";case se:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case be:return s=o.displayName||null,s!==null?s:j(o.type)||"Memo";case de:s=o._payload,o=o._init;try{return j(o(s))}catch{}}return null}function _(o){var s=o.type;switch(o.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=s.render,o=o.displayName||o.name||"",s.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(s);case 8:return s===Be?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ve(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function k(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function O(o){var s=k(o)?"checked":"value",l=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),d=""+o[s];if(!o.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,x=l.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return h.call(this)},set:function(w){d=""+w,x.call(this,w)}}),Object.defineProperty(o,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function Z(o){o._valueTracker||(o._valueTracker=O(o))}function ke(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return o&&(d=k(o)?o.checked?"true":"false":o.value),o=d,o!==l?(s.setValue(o),!0):!1}function at(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function T(o,s){var l=s.checked;return re({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??o._wrapperState.initialChecked})}function ge(o,s){var l=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;l=ve(s.value!=null?s.value:l),o._wrapperState={initialChecked:d,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function He(o,s){s=s.checked,s!=null&&te(o,"checked",s,!1)}function ze(o,s){He(o,s);var l=ve(s.value),d=s.type;if(l!=null)d==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+l):o.value!==""+l&&(o.value=""+l);else if(d==="submit"||d==="reset"){o.removeAttribute("value");return}s.hasOwnProperty("value")?tt(o,s.type,l):s.hasOwnProperty("defaultValue")&&tt(o,s.type,ve(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(o.defaultChecked=!!s.defaultChecked)}function mt(o,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+o._wrapperState.initialValue,l||s===o.value||(o.value=s),o.defaultValue=s}l=o.name,l!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,l!==""&&(o.name=l)}function tt(o,s,l){(s!=="number"||at(o.ownerDocument)!==o)&&(l==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+l&&(o.defaultValue=""+l))}var Se=Array.isArray;function ie(o,s,l,d){if(o=o.options,s){s={};for(var h=0;h<l.length;h++)s["$"+l[h]]=!0;for(l=0;l<o.length;l++)h=s.hasOwnProperty("$"+o[l].value),o[l].selected!==h&&(o[l].selected=h),h&&d&&(o[l].defaultSelected=!0)}else{for(l=""+ve(l),s=null,h=0;h<o.length;h++){if(o[h].value===l){o[h].selected=!0,d&&(o[h].defaultSelected=!0);return}s!==null||o[h].disabled||(s=o[h])}s!==null&&(s.selected=!0)}}function dt(o,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},s,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ht(o,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(Se(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}o._wrapperState={initialValue:ve(l)}}function R(o,s){var l=ve(s.value),d=ve(s.defaultValue);l!=null&&(l=""+l,l!==o.value&&(o.value=l),s.defaultValue==null&&o.defaultValue!==l&&(o.defaultValue=l)),d!=null&&(o.defaultValue=""+d)}function Ut(o){var s=o.textContent;s===o._wrapperState.initialValue&&s!==""&&s!==null&&(o.value=s)}function Tt(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function I(o,s){return o==null||o==="http://www.w3.org/1999/xhtml"?Tt(s):o==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var v,he=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,d,h){MSApp.execUnsafeLocalFunction(function(){return o(s,l,d,h)})}:o}(function(o,s){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=s;else{for(v=v||document.createElement("div"),v.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=v.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;s.firstChild;)o.appendChild(s.firstChild)}});function Ke(o,s){if(s){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=s;return}}o.textContent=s}var nt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E=["Webkit","ms","Moz","O"];Object.keys(nt).forEach(function(o){E.forEach(function(s){s=s+o.charAt(0).toUpperCase()+o.substring(1),nt[s]=nt[o]})});function $(o,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||nt.hasOwnProperty(o)&&nt[o]?(""+s).trim():s+"px"}function Qe(o,s){o=o.style;for(var l in s)if(s.hasOwnProperty(l)){var d=l.indexOf("--")===0,h=$(l,s[l],d);l==="float"&&(l="cssFloat"),d?o.setProperty(l,h):o[l]=h}}var W=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Y(o,s){if(s){if(W[o]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function We(o,s){if(o.indexOf("-")===-1)return typeof s.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ze=null;function St(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var xe=null,C=null,ae=null;function Ce(o){if(o=Ba(o)){if(typeof xe!="function")throw Error(t(280));var s=o.stateNode;s&&(s=_A(s),xe(o.stateNode,o.type,s))}}function At(o){C?ae?ae.push(o):ae=[o]:C=o}function bt(){if(C){var o=C,s=ae;if(ae=C=null,Ce(o),s)for(o=0;o<s.length;o++)Ce(s[o])}}function Pt(o,s){return o(s)}function Ln(){}var $r=!1;function lr(o,s,l){if($r)return o(s,l);$r=!0;try{return Pt(o,s,l)}finally{$r=!1,(C!==null||ae!==null)&&(Ln(),bt())}}function Ur(o,s){var l=o.stateNode;if(l===null)return null;var d=_A(l);if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var Ci=!1;if(p)try{var co={};Object.defineProperty(co,"passive",{get:function(){Ci=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{Ci=!1}function uo(o,s,l,d,h,x,w,K,q){var ye=Array.prototype.slice.call(arguments,3);try{s.apply(l,ye)}catch(De){this.onError(De)}}var we=!1,br=null,Bi=!1,os=null,SA={onError:function(o){we=!0,br=o}};function z(o,s,l,d,h,x,w,K,q){we=!1,br=null,uo.apply(SA,arguments)}function ce(o,s,l,d,h,x,w,K,q){if(z.apply(this,arguments),we){if(we){var ye=br;we=!1,br=null}else throw Error(t(198));Bi||(Bi=!0,os=ye)}}function Ee(o){var s=o,l=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(l=s.return),o=s.return;while(o)}return s.tag===3?l:null}function Pe(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function xt(o){if(Ee(o)!==o)throw Error(t(188))}function Gt(o){var s=o.alternate;if(!s){if(s=Ee(o),s===null)throw Error(t(188));return s!==o?null:o}for(var l=o,d=s;;){var h=l.return;if(h===null)break;var x=h.alternate;if(x===null){if(d=h.return,d!==null){l=d;continue}break}if(h.child===x.child){for(x=h.child;x;){if(x===l)return xt(h),o;if(x===d)return xt(h),s;x=x.sibling}throw Error(t(188))}if(l.return!==d.return)l=h,d=x;else{for(var w=!1,K=h.child;K;){if(K===l){w=!0,l=h,d=x;break}if(K===d){w=!0,d=h,l=x;break}K=K.sibling}if(!w){for(K=x.child;K;){if(K===l){w=!0,l=x,d=h;break}if(K===d){w=!0,d=x,l=h;break}K=K.sibling}if(!w)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?o:s}function lt(o){return o=Gt(o),o!==null?rt(o):null}function rt(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var s=rt(o);if(s!==null)return s;o=o.sibling}return null}var zt=e.unstable_scheduleCallback,Zt=e.unstable_cancelCallback,cr=e.unstable_shouldYield,Yr=e.unstable_requestPaint,Le=e.unstable_now,ft=e.unstable_getCurrentPriorityLevel,Jt=e.unstable_ImmediatePriority,bn=e.unstable_UserBlockingPriority,Jr=e.unstable_NormalPriority,it=e.unstable_LowPriority,vt=e.unstable_IdlePriority,kt=null,Qt=null;function Xr(o){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(kt,o,void 0,(o.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:Si,ia=Math.log,sa=Math.LN2;function Si(o){return o>>>=0,o===0?32:31-(ia(o)/sa|0)|0}var Ro=64,Mo=4194304;function Ii(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function is(o,s){var l=o.pendingLanes;if(l===0)return 0;var d=0,h=o.suspendedLanes,x=o.pingedLanes,w=l&268435455;if(w!==0){var K=w&~h;K!==0?d=Ii(K):(x&=w,x!==0&&(d=Ii(x)))}else w=l&~h,w!==0?d=Ii(w):x!==0&&(d=Ii(x));if(d===0)return 0;if(s!==0&&s!==d&&(s&h)===0&&(h=d&-d,x=s&-s,h>=x||h===16&&(x&4194240)!==0))return s;if((d&4)!==0&&(d|=l&16),s=o.entangledLanes,s!==0)for(o=o.entanglements,s&=d;0<s;)l=31-dn(s),h=1<<l,d|=o[l],s&=~h;return d}function Zw(o,s){switch(o){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function e1(o,s){for(var l=o.suspendedLanes,d=o.pingedLanes,h=o.expirationTimes,x=o.pendingLanes;0<x;){var w=31-dn(x),K=1<<w,q=h[w];q===-1?((K&l)===0||(K&d)!==0)&&(h[w]=Zw(K,s)):q<=s&&(o.expiredLanes|=K),x&=~K}}function Sd(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Wg(){var o=Ro;return Ro<<=1,(Ro&4194240)===0&&(Ro=64),o}function Id(o){for(var s=[],l=0;31>l;l++)s.push(o);return s}function aa(o,s,l){o.pendingLanes|=s,s!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,s=31-dn(s),o[s]=l}function t1(o,s){var l=o.pendingLanes&~s;o.pendingLanes=s,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=s,o.mutableReadLanes&=s,o.entangledLanes&=s,s=o.entanglements;var d=o.eventTimes;for(o=o.expirationTimes;0<l;){var h=31-dn(l),x=1<<h;s[h]=0,d[h]=-1,o[h]=-1,l&=~x}}function Ed(o,s){var l=o.entangledLanes|=s;for(o=o.entanglements;l;){var d=31-dn(l),h=1<<d;h&s|o[d]&s&&(o[d]|=s),l&=~h}}var Rt=0;function Gg(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Vg,kd,$g,Yg,Jg,Td=!1,IA=[],Lo=null,Do=null,Po=null,Aa=new Map,la=new Map,Ho=[],n1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xg(o,s){switch(o){case"focusin":case"focusout":Lo=null;break;case"dragenter":case"dragleave":Do=null;break;case"mouseover":case"mouseout":Po=null;break;case"pointerover":case"pointerout":Aa.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":la.delete(s.pointerId)}}function ca(o,s,l,d,h,x){return o===null||o.nativeEvent!==x?(o={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:x,targetContainers:[h]},s!==null&&(s=Ba(s),s!==null&&kd(s)),o):(o.eventSystemFlags|=d,s=o.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),o)}function r1(o,s,l,d,h){switch(s){case"focusin":return Lo=ca(Lo,o,s,l,d,h),!0;case"dragenter":return Do=ca(Do,o,s,l,d,h),!0;case"mouseover":return Po=ca(Po,o,s,l,d,h),!0;case"pointerover":var x=h.pointerId;return Aa.set(x,ca(Aa.get(x)||null,o,s,l,d,h)),!0;case"gotpointercapture":return x=h.pointerId,la.set(x,ca(la.get(x)||null,o,s,l,d,h)),!0}return!1}function qg(o){var s=Ei(o.target);if(s!==null){var l=Ee(s);if(l!==null){if(s=l.tag,s===13){if(s=Pe(l),s!==null){o.blockedOn=s,Jg(o.priority,function(){$g(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function EA(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var l=Fd(o.domEventName,o.eventSystemFlags,s[0],o.nativeEvent);if(l===null){l=o.nativeEvent;var d=new l.constructor(l.type,l);Ze=d,l.target.dispatchEvent(d),Ze=null}else return s=Ba(l),s!==null&&kd(s),o.blockedOn=l,!1;s.shift()}return!0}function Zg(o,s,l){EA(o)&&l.delete(s)}function o1(){Td=!1,Lo!==null&&EA(Lo)&&(Lo=null),Do!==null&&EA(Do)&&(Do=null),Po!==null&&EA(Po)&&(Po=null),Aa.forEach(Zg),la.forEach(Zg)}function da(o,s){o.blockedOn===s&&(o.blockedOn=null,Td||(Td=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,o1)))}function ua(o){function s(h){return da(h,o)}if(0<IA.length){da(IA[0],o);for(var l=1;l<IA.length;l++){var d=IA[l];d.blockedOn===o&&(d.blockedOn=null)}}for(Lo!==null&&da(Lo,o),Do!==null&&da(Do,o),Po!==null&&da(Po,o),Aa.forEach(s),la.forEach(s),l=0;l<Ho.length;l++)d=Ho[l],d.blockedOn===o&&(d.blockedOn=null);for(;0<Ho.length&&(l=Ho[0],l.blockedOn===null);)qg(l),l.blockedOn===null&&Ho.shift()}var ss=J.ReactCurrentBatchConfig,kA=!0;function i1(o,s,l,d){var h=Rt,x=ss.transition;ss.transition=null;try{Rt=1,jd(o,s,l,d)}finally{Rt=h,ss.transition=x}}function s1(o,s,l,d){var h=Rt,x=ss.transition;ss.transition=null;try{Rt=4,jd(o,s,l,d)}finally{Rt=h,ss.transition=x}}function jd(o,s,l,d){if(kA){var h=Fd(o,s,l,d);if(h===null)$d(o,s,d,TA,l),Xg(o,d);else if(r1(h,o,s,l,d))d.stopPropagation();else if(Xg(o,d),s&4&&-1<n1.indexOf(o)){for(;h!==null;){var x=Ba(h);if(x!==null&&Vg(x),x=Fd(o,s,l,d),x===null&&$d(o,s,d,TA,l),x===h)break;h=x}h!==null&&d.stopPropagation()}else $d(o,s,d,null,l)}}var TA=null;function Fd(o,s,l,d){if(TA=null,o=St(d),o=Ei(o),o!==null)if(s=Ee(o),s===null)o=null;else if(l=s.tag,l===13){if(o=Pe(s),o!==null)return o;o=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null);return TA=o,null}function ef(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ft()){case Jt:return 1;case bn:return 4;case Jr:case it:return 16;case vt:return 536870912;default:return 16}default:return 16}}var No=null,Ud=null,jA=null;function tf(){if(jA)return jA;var o,s=Ud,l=s.length,d,h="value"in No?No.value:No.textContent,x=h.length;for(o=0;o<l&&s[o]===h[o];o++);var w=l-o;for(d=1;d<=w&&s[l-d]===h[x-d];d++);return jA=h.slice(o,1<d?1-d:void 0)}function FA(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function UA(){return!0}function nf(){return!1}function dr(o){function s(l,d,h,x,w){this._reactName=l,this._targetInst=h,this.type=d,this.nativeEvent=x,this.target=w,this.currentTarget=null;for(var K in o)o.hasOwnProperty(K)&&(l=o[K],this[K]=l?l(x):x[K]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?UA:nf,this.isPropagationStopped=nf,this}return re(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=UA)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=UA)},persist:function(){},isPersistent:UA}),s}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qd=dr(as),pa=re({},as,{view:0,detail:0}),a1=dr(pa),Rd,Md,ha,QA=re({},pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ha&&(ha&&o.type==="mousemove"?(Rd=o.screenX-ha.screenX,Md=o.screenY-ha.screenY):Md=Rd=0,ha=o),Rd)},movementY:function(o){return"movementY"in o?o.movementY:Md}}),rf=dr(QA),A1=re({},QA,{dataTransfer:0}),l1=dr(A1),c1=re({},pa,{relatedTarget:0}),Ld=dr(c1),d1=re({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),u1=dr(d1),p1=re({},as,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),h1=dr(p1),g1=re({},as,{data:0}),of=dr(g1),f1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y1(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=x1[o])?!!s[o]:!1}function Dd(){return y1}var b1=re({},pa,{key:function(o){if(o.key){var s=f1[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=FA(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?m1[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dd,charCode:function(o){return o.type==="keypress"?FA(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?FA(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),v1=dr(b1),w1=re({},QA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sf=dr(w1),C1=re({},pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dd}),B1=dr(C1),S1=re({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),I1=dr(S1),E1=re({},QA,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),k1=dr(E1),T1=[9,13,27,32],Pd=p&&"CompositionEvent"in window,ga=null;p&&"documentMode"in document&&(ga=document.documentMode);var j1=p&&"TextEvent"in window&&!ga,af=p&&(!Pd||ga&&8<ga&&11>=ga),Af=" ",lf=!1;function cf(o,s){switch(o){case"keyup":return T1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function df(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var As=!1;function F1(o,s){switch(o){case"compositionend":return df(s);case"keypress":return s.which!==32?null:(lf=!0,Af);case"textInput":return o=s.data,o===Af&&lf?null:o;default:return null}}function U1(o,s){if(As)return o==="compositionend"||!Pd&&cf(o,s)?(o=tf(),jA=Ud=No=null,As=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return af&&s.locale!=="ko"?null:s.data;default:return null}}var Q1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uf(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!Q1[o.type]:s==="textarea"}function pf(o,s,l,d){At(d),s=PA(s,"onChange"),0<s.length&&(l=new Qd("onChange","change",null,l,d),o.push({event:l,listeners:s}))}var fa=null,ma=null;function R1(o){Ff(o,0)}function RA(o){var s=ps(o);if(ke(s))return o}function M1(o,s){if(o==="change")return s}var hf=!1;if(p){var Hd;if(p){var Nd="oninput"in document;if(!Nd){var gf=document.createElement("div");gf.setAttribute("oninput","return;"),Nd=typeof gf.oninput=="function"}Hd=Nd}else Hd=!1;hf=Hd&&(!document.documentMode||9<document.documentMode)}function ff(){fa&&(fa.detachEvent("onpropertychange",mf),ma=fa=null)}function mf(o){if(o.propertyName==="value"&&RA(ma)){var s=[];pf(s,ma,o,St(o)),lr(R1,s)}}function L1(o,s,l){o==="focusin"?(ff(),fa=s,ma=l,fa.attachEvent("onpropertychange",mf)):o==="focusout"&&ff()}function D1(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return RA(ma)}function P1(o,s){if(o==="click")return RA(s)}function H1(o,s){if(o==="input"||o==="change")return RA(s)}function N1(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var Qr=typeof Object.is=="function"?Object.is:N1;function xa(o,s){if(Qr(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var l=Object.keys(o),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var h=l[d];if(!u.call(s,h)||!Qr(o[h],s[h]))return!1}return!0}function xf(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function yf(o,s){var l=xf(o);o=0;for(var d;l;){if(l.nodeType===3){if(d=o+l.textContent.length,o<=s&&d>=s)return{node:l,offset:s-o};o=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=xf(l)}}function bf(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?bf(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function vf(){for(var o=window,s=at();s instanceof o.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)o=s.contentWindow;else break;s=at(o.document)}return s}function _d(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}function _1(o){var s=vf(),l=o.focusedElem,d=o.selectionRange;if(s!==l&&l&&l.ownerDocument&&bf(l.ownerDocument.documentElement,l)){if(d!==null&&_d(l)){if(s=d.start,o=d.end,o===void 0&&(o=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(o,l.value.length);else if(o=(s=l.ownerDocument||document)&&s.defaultView||window,o.getSelection){o=o.getSelection();var h=l.textContent.length,x=Math.min(d.start,h);d=d.end===void 0?x:Math.min(d.end,h),!o.extend&&x>d&&(h=d,d=x,x=h),h=yf(l,x);var w=yf(l,d);h&&w&&(o.rangeCount!==1||o.anchorNode!==h.node||o.anchorOffset!==h.offset||o.focusNode!==w.node||o.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(h.node,h.offset),o.removeAllRanges(),x>d?(o.addRange(s),o.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),o.addRange(s)))}}for(s=[],o=l;o=o.parentNode;)o.nodeType===1&&s.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)o=s[l],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var O1=p&&"documentMode"in document&&11>=document.documentMode,ls=null,Od=null,ya=null,zd=!1;function wf(o,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;zd||ls==null||ls!==at(d)||(d=ls,"selectionStart"in d&&_d(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ya&&xa(ya,d)||(ya=d,d=PA(Od,"onSelect"),0<d.length&&(s=new Qd("onSelect","select",null,s,l),o.push({event:s,listeners:d}),s.target=ls)))}function MA(o,s){var l={};return l[o.toLowerCase()]=s.toLowerCase(),l["Webkit"+o]="webkit"+s,l["Moz"+o]="moz"+s,l}var cs={animationend:MA("Animation","AnimationEnd"),animationiteration:MA("Animation","AnimationIteration"),animationstart:MA("Animation","AnimationStart"),transitionend:MA("Transition","TransitionEnd")},Kd={},Cf={};p&&(Cf=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function LA(o){if(Kd[o])return Kd[o];if(!cs[o])return o;var s=cs[o],l;for(l in s)if(s.hasOwnProperty(l)&&l in Cf)return Kd[o]=s[l];return o}var Bf=LA("animationend"),Sf=LA("animationiteration"),If=LA("animationstart"),Ef=LA("transitionend"),kf=new Map,Tf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _o(o,s){kf.set(o,s),A(s,[o])}for(var Wd=0;Wd<Tf.length;Wd++){var Gd=Tf[Wd],z1=Gd.toLowerCase(),K1=Gd[0].toUpperCase()+Gd.slice(1);_o(z1,"on"+K1)}_o(Bf,"onAnimationEnd"),_o(Sf,"onAnimationIteration"),_o(If,"onAnimationStart"),_o("dblclick","onDoubleClick"),_o("focusin","onFocus"),_o("focusout","onBlur"),_o(Ef,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),A("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),A("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),A("onBeforeInput",["compositionend","keypress","textInput","paste"]),A("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),A("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),A("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function jf(o,s,l){var d=o.type||"unknown-event";o.currentTarget=l,ce(d,s,void 0,o),o.currentTarget=null}function Ff(o,s){s=(s&4)!==0;for(var l=0;l<o.length;l++){var d=o[l],h=d.event;d=d.listeners;e:{var x=void 0;if(s)for(var w=d.length-1;0<=w;w--){var K=d[w],q=K.instance,ye=K.currentTarget;if(K=K.listener,q!==x&&h.isPropagationStopped())break e;jf(h,K,ye),x=q}else for(w=0;w<d.length;w++){if(K=d[w],q=K.instance,ye=K.currentTarget,K=K.listener,q!==x&&h.isPropagationStopped())break e;jf(h,K,ye),x=q}}}if(Bi)throw o=os,Bi=!1,os=null,o}function Kt(o,s){var l=s[eu];l===void 0&&(l=s[eu]=new Set);var d=o+"__bubble";l.has(d)||(Uf(s,o,2,!1),l.add(d))}function Vd(o,s,l){var d=0;s&&(d|=4),Uf(l,o,d,s)}var DA="_reactListening"+Math.random().toString(36).slice(2);function va(o){if(!o[DA]){o[DA]=!0,r.forEach(function(l){l!=="selectionchange"&&(W1.has(l)||Vd(l,!1,o),Vd(l,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[DA]||(s[DA]=!0,Vd("selectionchange",!1,s))}}function Uf(o,s,l,d){switch(ef(s)){case 1:var h=i1;break;case 4:h=s1;break;default:h=jd}l=h.bind(null,s,l,o),h=void 0,!Ci||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),d?h!==void 0?o.addEventListener(s,l,{capture:!0,passive:h}):o.addEventListener(s,l,!0):h!==void 0?o.addEventListener(s,l,{passive:h}):o.addEventListener(s,l,!1)}function $d(o,s,l,d,h){var x=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var K=d.stateNode.containerInfo;if(K===h||K.nodeType===8&&K.parentNode===h)break;if(w===4)for(w=d.return;w!==null;){var q=w.tag;if((q===3||q===4)&&(q=w.stateNode.containerInfo,q===h||q.nodeType===8&&q.parentNode===h))return;w=w.return}for(;K!==null;){if(w=Ei(K),w===null)return;if(q=w.tag,q===5||q===6){d=x=w;continue e}K=K.parentNode}}d=d.return}lr(function(){var ye=x,De=St(l),Ne=[];e:{var Re=kf.get(o);if(Re!==void 0){var $e=Qd,qe=o;switch(o){case"keypress":if(FA(l)===0)break e;case"keydown":case"keyup":$e=v1;break;case"focusin":qe="focus",$e=Ld;break;case"focusout":qe="blur",$e=Ld;break;case"beforeblur":case"afterblur":$e=Ld;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=rf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=l1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=B1;break;case Bf:case Sf:case If:$e=u1;break;case Ef:$e=I1;break;case"scroll":$e=a1;break;case"wheel":$e=k1;break;case"copy":case"cut":case"paste":$e=h1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=sf}var et=(s&4)!==0,nn=!et&&o==="scroll",ue=et?Re!==null?Re+"Capture":null:Re;et=[];for(var ne=ye,fe;ne!==null;){fe=ne;var Oe=fe.stateNode;if(fe.tag===5&&Oe!==null&&(fe=Oe,ue!==null&&(Oe=Ur(ne,ue),Oe!=null&&et.push(wa(ne,Oe,fe)))),nn)break;ne=ne.return}0<et.length&&(Re=new $e(Re,qe,null,l,De),Ne.push({event:Re,listeners:et}))}}if((s&7)===0){e:{if(Re=o==="mouseover"||o==="pointerover",$e=o==="mouseout"||o==="pointerout",Re&&l!==Ze&&(qe=l.relatedTarget||l.fromElement)&&(Ei(qe)||qe[po]))break e;if(($e||Re)&&(Re=De.window===De?De:(Re=De.ownerDocument)?Re.defaultView||Re.parentWindow:window,$e?(qe=l.relatedTarget||l.toElement,$e=ye,qe=qe?Ei(qe):null,qe!==null&&(nn=Ee(qe),qe!==nn||qe.tag!==5&&qe.tag!==6)&&(qe=null)):($e=null,qe=ye),$e!==qe)){if(et=rf,Oe="onMouseLeave",ue="onMouseEnter",ne="mouse",(o==="pointerout"||o==="pointerover")&&(et=sf,Oe="onPointerLeave",ue="onPointerEnter",ne="pointer"),nn=$e==null?Re:ps($e),fe=qe==null?Re:ps(qe),Re=new et(Oe,ne+"leave",$e,l,De),Re.target=nn,Re.relatedTarget=fe,Oe=null,Ei(De)===ye&&(et=new et(ue,ne+"enter",qe,l,De),et.target=fe,et.relatedTarget=nn,Oe=et),nn=Oe,$e&&qe)t:{for(et=$e,ue=qe,ne=0,fe=et;fe;fe=ds(fe))ne++;for(fe=0,Oe=ue;Oe;Oe=ds(Oe))fe++;for(;0<ne-fe;)et=ds(et),ne--;for(;0<fe-ne;)ue=ds(ue),fe--;for(;ne--;){if(et===ue||ue!==null&&et===ue.alternate)break t;et=ds(et),ue=ds(ue)}et=null}else et=null;$e!==null&&Qf(Ne,Re,$e,et,!1),qe!==null&&nn!==null&&Qf(Ne,nn,qe,et,!0)}}e:{if(Re=ye?ps(ye):window,$e=Re.nodeName&&Re.nodeName.toLowerCase(),$e==="select"||$e==="input"&&Re.type==="file")var ot=M1;else if(uf(Re))if(hf)ot=H1;else{ot=D1;var ut=L1}else($e=Re.nodeName)&&$e.toLowerCase()==="input"&&(Re.type==="checkbox"||Re.type==="radio")&&(ot=P1);if(ot&&(ot=ot(o,ye))){pf(Ne,ot,l,De);break e}ut&&ut(o,Re,ye),o==="focusout"&&(ut=Re._wrapperState)&&ut.controlled&&Re.type==="number"&&tt(Re,"number",Re.value)}switch(ut=ye?ps(ye):window,o){case"focusin":(uf(ut)||ut.contentEditable==="true")&&(ls=ut,Od=ye,ya=null);break;case"focusout":ya=Od=ls=null;break;case"mousedown":zd=!0;break;case"contextmenu":case"mouseup":case"dragend":zd=!1,wf(Ne,l,De);break;case"selectionchange":if(O1)break;case"keydown":case"keyup":wf(Ne,l,De)}var pt;if(Pd)e:{switch(o){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e}gt=void 0}else As?cf(o,l)&&(gt="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(gt="onCompositionStart");gt&&(af&&l.locale!=="ko"&&(As||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&As&&(pt=tf()):(No=De,Ud="value"in No?No.value:No.textContent,As=!0)),ut=PA(ye,gt),0<ut.length&&(gt=new of(gt,o,null,l,De),Ne.push({event:gt,listeners:ut}),pt?gt.data=pt:(pt=df(l),pt!==null&&(gt.data=pt)))),(pt=j1?F1(o,l):U1(o,l))&&(ye=PA(ye,"onBeforeInput"),0<ye.length&&(De=new of("onBeforeInput","beforeinput",null,l,De),Ne.push({event:De,listeners:ye}),De.data=pt))}Ff(Ne,s)})}function wa(o,s,l){return{instance:o,listener:s,currentTarget:l}}function PA(o,s){for(var l=s+"Capture",d=[];o!==null;){var h=o,x=h.stateNode;h.tag===5&&x!==null&&(h=x,x=Ur(o,l),x!=null&&d.unshift(wa(o,x,h)),x=Ur(o,s),x!=null&&d.push(wa(o,x,h))),o=o.return}return d}function ds(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Qf(o,s,l,d,h){for(var x=s._reactName,w=[];l!==null&&l!==d;){var K=l,q=K.alternate,ye=K.stateNode;if(q!==null&&q===d)break;K.tag===5&&ye!==null&&(K=ye,h?(q=Ur(l,x),q!=null&&w.unshift(wa(l,q,K))):h||(q=Ur(l,x),q!=null&&w.push(wa(l,q,K)))),l=l.return}w.length!==0&&o.push({event:s,listeners:w})}var G1=/\r\n?/g,V1=/\u0000|\uFFFD/g;function Rf(o){return(typeof o=="string"?o:""+o).replace(G1,`
`).replace(V1,"")}function HA(o,s,l){if(s=Rf(s),Rf(o)!==s&&l)throw Error(t(425))}function NA(){}var Yd=null,Jd=null;function Xd(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var qd=typeof setTimeout=="function"?setTimeout:void 0,$1=typeof clearTimeout=="function"?clearTimeout:void 0,Mf=typeof Promise=="function"?Promise:void 0,Y1=typeof queueMicrotask=="function"?queueMicrotask:typeof Mf<"u"?function(o){return Mf.resolve(null).then(o).catch(J1)}:qd;function J1(o){setTimeout(function(){throw o})}function Zd(o,s){var l=s,d=0;do{var h=l.nextSibling;if(o.removeChild(l),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(d===0){o.removeChild(h),ua(s);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=h}while(l);ua(s)}function Oo(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return o}function Lf(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return o;s--}else l==="/$"&&s++}o=o.previousSibling}return null}var us=Math.random().toString(36).slice(2),qr="__reactFiber$"+us,Ca="__reactProps$"+us,po="__reactContainer$"+us,eu="__reactEvents$"+us,X1="__reactListeners$"+us,q1="__reactHandles$"+us;function Ei(o){var s=o[qr];if(s)return s;for(var l=o.parentNode;l;){if(s=l[po]||l[qr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(o=Lf(o);o!==null;){if(l=o[qr])return l;o=Lf(o)}return s}o=l,l=o.parentNode}return null}function Ba(o){return o=o[qr]||o[po],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ps(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function _A(o){return o[Ca]||null}var tu=[],hs=-1;function zo(o){return{current:o}}function Wt(o){0>hs||(o.current=tu[hs],tu[hs]=null,hs--)}function _t(o,s){hs++,tu[hs]=o.current,o.current=s}var Ko={},Dn=zo(Ko),qn=zo(!1),ki=Ko;function gs(o,s){var l=o.type.contextTypes;if(!l)return Ko;var d=o.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var h={},x;for(x in l)h[x]=s[x];return d&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=s,o.__reactInternalMemoizedMaskedChildContext=h),h}function Zn(o){return o=o.childContextTypes,o!=null}function OA(){Wt(qn),Wt(Dn)}function Df(o,s,l){if(Dn.current!==Ko)throw Error(t(168));_t(Dn,s),_t(qn,l)}function Pf(o,s,l){var d=o.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var h in d)if(!(h in s))throw Error(t(108,_(o)||"Unknown",h));return re({},l,d)}function zA(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Ko,ki=Dn.current,_t(Dn,o),_t(qn,qn.current),!0}function Hf(o,s,l){var d=o.stateNode;if(!d)throw Error(t(169));l?(o=Pf(o,s,ki),d.__reactInternalMemoizedMergedChildContext=o,Wt(qn),Wt(Dn),_t(Dn,o)):Wt(qn),_t(qn,l)}var ho=null,KA=!1,nu=!1;function Nf(o){ho===null?ho=[o]:ho.push(o)}function Z1(o){KA=!0,Nf(o)}function Wo(){if(!nu&&ho!==null){nu=!0;var o=0,s=Rt;try{var l=ho;for(Rt=1;o<l.length;o++){var d=l[o];do d=d(!0);while(d!==null)}ho=null,KA=!1}catch(h){throw ho!==null&&(ho=ho.slice(o+1)),zt(Jt,Wo),h}finally{Rt=s,nu=!1}}return null}var fs=[],ms=0,WA=null,GA=0,vr=[],wr=0,Ti=null,go=1,fo="";function ji(o,s){fs[ms++]=GA,fs[ms++]=WA,WA=o,GA=s}function _f(o,s,l){vr[wr++]=go,vr[wr++]=fo,vr[wr++]=Ti,Ti=o;var d=go;o=fo;var h=32-dn(d)-1;d&=~(1<<h),l+=1;var x=32-dn(s)+h;if(30<x){var w=h-h%5;x=(d&(1<<w)-1).toString(32),d>>=w,h-=w,go=1<<32-dn(s)+h|l<<h|d,fo=x+o}else go=1<<x|l<<h|d,fo=o}function ru(o){o.return!==null&&(ji(o,1),_f(o,1,0))}function ou(o){for(;o===WA;)WA=fs[--ms],fs[ms]=null,GA=fs[--ms],fs[ms]=null;for(;o===Ti;)Ti=vr[--wr],vr[wr]=null,fo=vr[--wr],vr[wr]=null,go=vr[--wr],vr[wr]=null}var ur=null,pr=null,Vt=!1,Rr=null;function Of(o,s){var l=Ir(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=o,s=o.deletions,s===null?(o.deletions=[l],o.flags|=16):s.push(l)}function zf(o,s){switch(o.tag){case 5:var l=o.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(o.stateNode=s,ur=o,pr=Oo(s.firstChild),!0):!1;case 6:return s=o.pendingProps===""||s.nodeType!==3?null:s,s!==null?(o.stateNode=s,ur=o,pr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=Ti!==null?{id:go,overflow:fo}:null,o.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Ir(18,null,null,0),l.stateNode=s,l.return=o,o.child=l,ur=o,pr=null,!0):!1;default:return!1}}function iu(o){return(o.mode&1)!==0&&(o.flags&128)===0}function su(o){if(Vt){var s=pr;if(s){var l=s;if(!zf(o,s)){if(iu(o))throw Error(t(418));s=Oo(l.nextSibling);var d=ur;s&&zf(o,s)?Of(d,l):(o.flags=o.flags&-4097|2,Vt=!1,ur=o)}}else{if(iu(o))throw Error(t(418));o.flags=o.flags&-4097|2,Vt=!1,ur=o}}}function Kf(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ur=o}function VA(o){if(o!==ur)return!1;if(!Vt)return Kf(o),Vt=!0,!1;var s;if((s=o.tag!==3)&&!(s=o.tag!==5)&&(s=o.type,s=s!=="head"&&s!=="body"&&!Xd(o.type,o.memoizedProps)),s&&(s=pr)){if(iu(o))throw Wf(),Error(t(418));for(;s;)Of(o,s),s=Oo(s.nextSibling)}if(Kf(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="/$"){if(s===0){pr=Oo(o.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}o=o.nextSibling}pr=null}}else pr=ur?Oo(o.stateNode.nextSibling):null;return!0}function Wf(){for(var o=pr;o;)o=Oo(o.nextSibling)}function xs(){pr=ur=null,Vt=!1}function au(o){Rr===null?Rr=[o]:Rr.push(o)}var eC=J.ReactCurrentBatchConfig;function Sa(o,s,l){if(o=l.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,o));var h=d,x=""+o;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===x?s.ref:(s=function(w){var K=h.refs;w===null?delete K[x]:K[x]=w},s._stringRef=x,s)}if(typeof o!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,o))}return o}function $A(o,s){throw o=Object.prototype.toString.call(s),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o))}function Gf(o){var s=o._init;return s(o._payload)}function Vf(o){function s(ue,ne){if(o){var fe=ue.deletions;fe===null?(ue.deletions=[ne],ue.flags|=16):fe.push(ne)}}function l(ue,ne){if(!o)return null;for(;ne!==null;)s(ue,ne),ne=ne.sibling;return null}function d(ue,ne){for(ue=new Map;ne!==null;)ne.key!==null?ue.set(ne.key,ne):ue.set(ne.index,ne),ne=ne.sibling;return ue}function h(ue,ne){return ue=Zo(ue,ne),ue.index=0,ue.sibling=null,ue}function x(ue,ne,fe){return ue.index=fe,o?(fe=ue.alternate,fe!==null?(fe=fe.index,fe<ne?(ue.flags|=2,ne):fe):(ue.flags|=2,ne)):(ue.flags|=1048576,ne)}function w(ue){return o&&ue.alternate===null&&(ue.flags|=2),ue}function K(ue,ne,fe,Oe){return ne===null||ne.tag!==6?(ne=qu(fe,ue.mode,Oe),ne.return=ue,ne):(ne=h(ne,fe),ne.return=ue,ne)}function q(ue,ne,fe,Oe){var ot=fe.type;return ot===X?De(ue,ne,fe.props.children,Oe,fe.key):ne!==null&&(ne.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===de&&Gf(ot)===ne.type)?(Oe=h(ne,fe.props),Oe.ref=Sa(ue,ne,fe),Oe.return=ue,Oe):(Oe=xl(fe.type,fe.key,fe.props,null,ue.mode,Oe),Oe.ref=Sa(ue,ne,fe),Oe.return=ue,Oe)}function ye(ue,ne,fe,Oe){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==fe.containerInfo||ne.stateNode.implementation!==fe.implementation?(ne=Zu(fe,ue.mode,Oe),ne.return=ue,ne):(ne=h(ne,fe.children||[]),ne.return=ue,ne)}function De(ue,ne,fe,Oe,ot){return ne===null||ne.tag!==7?(ne=Pi(fe,ue.mode,Oe,ot),ne.return=ue,ne):(ne=h(ne,fe),ne.return=ue,ne)}function Ne(ue,ne,fe){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=qu(""+ne,ue.mode,fe),ne.return=ue,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case M:return fe=xl(ne.type,ne.key,ne.props,null,ue.mode,fe),fe.ref=Sa(ue,null,ne),fe.return=ue,fe;case N:return ne=Zu(ne,ue.mode,fe),ne.return=ue,ne;case de:var Oe=ne._init;return Ne(ue,Oe(ne._payload),fe)}if(Se(ne)||F(ne))return ne=Pi(ne,ue.mode,fe,null),ne.return=ue,ne;$A(ue,ne)}return null}function Re(ue,ne,fe,Oe){var ot=ne!==null?ne.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return ot!==null?null:K(ue,ne,""+fe,Oe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case M:return fe.key===ot?q(ue,ne,fe,Oe):null;case N:return fe.key===ot?ye(ue,ne,fe,Oe):null;case de:return ot=fe._init,Re(ue,ne,ot(fe._payload),Oe)}if(Se(fe)||F(fe))return ot!==null?null:De(ue,ne,fe,Oe,null);$A(ue,fe)}return null}function $e(ue,ne,fe,Oe,ot){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return ue=ue.get(fe)||null,K(ne,ue,""+Oe,ot);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case M:return ue=ue.get(Oe.key===null?fe:Oe.key)||null,q(ne,ue,Oe,ot);case N:return ue=ue.get(Oe.key===null?fe:Oe.key)||null,ye(ne,ue,Oe,ot);case de:var ut=Oe._init;return $e(ue,ne,fe,ut(Oe._payload),ot)}if(Se(Oe)||F(Oe))return ue=ue.get(fe)||null,De(ne,ue,Oe,ot,null);$A(ne,Oe)}return null}function qe(ue,ne,fe,Oe){for(var ot=null,ut=null,pt=ne,gt=ne=0,Cn=null;pt!==null&&gt<fe.length;gt++){pt.index>gt?(Cn=pt,pt=null):Cn=pt.sibling;var It=Re(ue,pt,fe[gt],Oe);if(It===null){pt===null&&(pt=Cn);break}o&&pt&&It.alternate===null&&s(ue,pt),ne=x(It,ne,gt),ut===null?ot=It:ut.sibling=It,ut=It,pt=Cn}if(gt===fe.length)return l(ue,pt),Vt&&ji(ue,gt),ot;if(pt===null){for(;gt<fe.length;gt++)pt=Ne(ue,fe[gt],Oe),pt!==null&&(ne=x(pt,ne,gt),ut===null?ot=pt:ut.sibling=pt,ut=pt);return Vt&&ji(ue,gt),ot}for(pt=d(ue,pt);gt<fe.length;gt++)Cn=$e(pt,ue,gt,fe[gt],Oe),Cn!==null&&(o&&Cn.alternate!==null&&pt.delete(Cn.key===null?gt:Cn.key),ne=x(Cn,ne,gt),ut===null?ot=Cn:ut.sibling=Cn,ut=Cn);return o&&pt.forEach(function(ei){return s(ue,ei)}),Vt&&ji(ue,gt),ot}function et(ue,ne,fe,Oe){var ot=F(fe);if(typeof ot!="function")throw Error(t(150));if(fe=ot.call(fe),fe==null)throw Error(t(151));for(var ut=ot=null,pt=ne,gt=ne=0,Cn=null,It=fe.next();pt!==null&&!It.done;gt++,It=fe.next()){pt.index>gt?(Cn=pt,pt=null):Cn=pt.sibling;var ei=Re(ue,pt,It.value,Oe);if(ei===null){pt===null&&(pt=Cn);break}o&&pt&&ei.alternate===null&&s(ue,pt),ne=x(ei,ne,gt),ut===null?ot=ei:ut.sibling=ei,ut=ei,pt=Cn}if(It.done)return l(ue,pt),Vt&&ji(ue,gt),ot;if(pt===null){for(;!It.done;gt++,It=fe.next())It=Ne(ue,It.value,Oe),It!==null&&(ne=x(It,ne,gt),ut===null?ot=It:ut.sibling=It,ut=It);return Vt&&ji(ue,gt),ot}for(pt=d(ue,pt);!It.done;gt++,It=fe.next())It=$e(pt,ue,gt,It.value,Oe),It!==null&&(o&&It.alternate!==null&&pt.delete(It.key===null?gt:It.key),ne=x(It,ne,gt),ut===null?ot=It:ut.sibling=It,ut=It);return o&&pt.forEach(function(QC){return s(ue,QC)}),Vt&&ji(ue,gt),ot}function nn(ue,ne,fe,Oe){if(typeof fe=="object"&&fe!==null&&fe.type===X&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case M:e:{for(var ot=fe.key,ut=ne;ut!==null;){if(ut.key===ot){if(ot=fe.type,ot===X){if(ut.tag===7){l(ue,ut.sibling),ne=h(ut,fe.props.children),ne.return=ue,ue=ne;break e}}else if(ut.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===de&&Gf(ot)===ut.type){l(ue,ut.sibling),ne=h(ut,fe.props),ne.ref=Sa(ue,ut,fe),ne.return=ue,ue=ne;break e}l(ue,ut);break}else s(ue,ut);ut=ut.sibling}fe.type===X?(ne=Pi(fe.props.children,ue.mode,Oe,fe.key),ne.return=ue,ue=ne):(Oe=xl(fe.type,fe.key,fe.props,null,ue.mode,Oe),Oe.ref=Sa(ue,ne,fe),Oe.return=ue,ue=Oe)}return w(ue);case N:e:{for(ut=fe.key;ne!==null;){if(ne.key===ut)if(ne.tag===4&&ne.stateNode.containerInfo===fe.containerInfo&&ne.stateNode.implementation===fe.implementation){l(ue,ne.sibling),ne=h(ne,fe.children||[]),ne.return=ue,ue=ne;break e}else{l(ue,ne);break}else s(ue,ne);ne=ne.sibling}ne=Zu(fe,ue.mode,Oe),ne.return=ue,ue=ne}return w(ue);case de:return ut=fe._init,nn(ue,ne,ut(fe._payload),Oe)}if(Se(fe))return qe(ue,ne,fe,Oe);if(F(fe))return et(ue,ne,fe,Oe);$A(ue,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,ne!==null&&ne.tag===6?(l(ue,ne.sibling),ne=h(ne,fe),ne.return=ue,ue=ne):(l(ue,ne),ne=qu(fe,ue.mode,Oe),ne.return=ue,ue=ne),w(ue)):l(ue,ne)}return nn}var ys=Vf(!0),$f=Vf(!1),YA=zo(null),JA=null,bs=null,Au=null;function lu(){Au=bs=JA=null}function cu(o){var s=YA.current;Wt(YA),o._currentValue=s}function du(o,s,l){for(;o!==null;){var d=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),o===l)break;o=o.return}}function vs(o,s){JA=o,Au=bs=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&s)!==0&&(er=!0),o.firstContext=null)}function Cr(o){var s=o._currentValue;if(Au!==o)if(o={context:o,memoizedValue:s,next:null},bs===null){if(JA===null)throw Error(t(308));bs=o,JA.dependencies={lanes:0,firstContext:o}}else bs=bs.next=o;return s}var Fi=null;function uu(o){Fi===null?Fi=[o]:Fi.push(o)}function Yf(o,s,l,d){var h=s.interleaved;return h===null?(l.next=l,uu(s)):(l.next=h.next,h.next=l),s.interleaved=l,mo(o,d)}function mo(o,s){o.lanes|=s;var l=o.alternate;for(l!==null&&(l.lanes|=s),l=o,o=o.return;o!==null;)o.childLanes|=s,l=o.alternate,l!==null&&(l.childLanes|=s),l=o,o=o.return;return l.tag===3?l.stateNode:null}var Go=!1;function pu(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jf(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function xo(o,s){return{eventTime:o,lane:s,tag:0,payload:null,callback:null,next:null}}function Vo(o,s,l){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(Bt&2)!==0){var h=d.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),d.pending=s,mo(o,l)}return h=d.interleaved,h===null?(s.next=s,uu(d)):(s.next=h.next,h.next=s),d.interleaved=s,mo(o,l)}function XA(o,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var d=s.lanes;d&=o.pendingLanes,l|=d,s.lanes=l,Ed(o,l)}}function Xf(o,s){var l=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var h=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};x===null?h=x=w:x=x.next=w,l=l.next}while(l!==null);x===null?h=x=s:x=x.next=s}else h=x=s;l={baseState:d.baseState,firstBaseUpdate:h,lastBaseUpdate:x,shared:d.shared,effects:d.effects},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=s:o.next=s,l.lastBaseUpdate=s}function qA(o,s,l,d){var h=o.updateQueue;Go=!1;var x=h.firstBaseUpdate,w=h.lastBaseUpdate,K=h.shared.pending;if(K!==null){h.shared.pending=null;var q=K,ye=q.next;q.next=null,w===null?x=ye:w.next=ye,w=q;var De=o.alternate;De!==null&&(De=De.updateQueue,K=De.lastBaseUpdate,K!==w&&(K===null?De.firstBaseUpdate=ye:K.next=ye,De.lastBaseUpdate=q))}if(x!==null){var Ne=h.baseState;w=0,De=ye=q=null,K=x;do{var Re=K.lane,$e=K.eventTime;if((d&Re)===Re){De!==null&&(De=De.next={eventTime:$e,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var qe=o,et=K;switch(Re=s,$e=l,et.tag){case 1:if(qe=et.payload,typeof qe=="function"){Ne=qe.call($e,Ne,Re);break e}Ne=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=et.payload,Re=typeof qe=="function"?qe.call($e,Ne,Re):qe,Re==null)break e;Ne=re({},Ne,Re);break e;case 2:Go=!0}}K.callback!==null&&K.lane!==0&&(o.flags|=64,Re=h.effects,Re===null?h.effects=[K]:Re.push(K))}else $e={eventTime:$e,lane:Re,tag:K.tag,payload:K.payload,callback:K.callback,next:null},De===null?(ye=De=$e,q=Ne):De=De.next=$e,w|=Re;if(K=K.next,K===null){if(K=h.shared.pending,K===null)break;Re=K,K=Re.next,Re.next=null,h.lastBaseUpdate=Re,h.shared.pending=null}}while(!0);if(De===null&&(q=Ne),h.baseState=q,h.firstBaseUpdate=ye,h.lastBaseUpdate=De,s=h.shared.interleaved,s!==null){h=s;do w|=h.lane,h=h.next;while(h!==s)}else x===null&&(h.shared.lanes=0);Ri|=w,o.lanes=w,o.memoizedState=Ne}}function qf(o,s,l){if(o=s.effects,s.effects=null,o!==null)for(s=0;s<o.length;s++){var d=o[s],h=d.callback;if(h!==null){if(d.callback=null,d=l,typeof h!="function")throw Error(t(191,h));h.call(d)}}}var Ia={},Zr=zo(Ia),Ea=zo(Ia),ka=zo(Ia);function Ui(o){if(o===Ia)throw Error(t(174));return o}function hu(o,s){switch(_t(ka,s),_t(Ea,o),_t(Zr,Ia),o=s.nodeType,o){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:I(null,"");break;default:o=o===8?s.parentNode:s,s=o.namespaceURI||null,o=o.tagName,s=I(s,o)}Wt(Zr),_t(Zr,s)}function ws(){Wt(Zr),Wt(Ea),Wt(ka)}function Zf(o){Ui(ka.current);var s=Ui(Zr.current),l=I(s,o.type);s!==l&&(_t(Ea,o),_t(Zr,l))}function gu(o){Ea.current===o&&(Wt(Zr),Wt(Ea))}var Xt=zo(0);function ZA(o){for(var s=o;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var fu=[];function mu(){for(var o=0;o<fu.length;o++)fu[o]._workInProgressVersionPrimary=null;fu.length=0}var el=J.ReactCurrentDispatcher,xu=J.ReactCurrentBatchConfig,Qi=0,qt=null,un=null,vn=null,tl=!1,Ta=!1,ja=0,tC=0;function Pn(){throw Error(t(321))}function yu(o,s){if(s===null)return!1;for(var l=0;l<s.length&&l<o.length;l++)if(!Qr(o[l],s[l]))return!1;return!0}function bu(o,s,l,d,h,x){if(Qi=x,qt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,el.current=o===null||o.memoizedState===null?iC:sC,o=l(d,h),Ta){x=0;do{if(Ta=!1,ja=0,25<=x)throw Error(t(301));x+=1,vn=un=null,s.updateQueue=null,el.current=aC,o=l(d,h)}while(Ta)}if(el.current=ol,s=un!==null&&un.next!==null,Qi=0,vn=un=qt=null,tl=!1,s)throw Error(t(300));return o}function vu(){var o=ja!==0;return ja=0,o}function eo(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?qt.memoizedState=vn=o:vn=vn.next=o,vn}function Br(){if(un===null){var o=qt.alternate;o=o!==null?o.memoizedState:null}else o=un.next;var s=vn===null?qt.memoizedState:vn.next;if(s!==null)vn=s,un=o;else{if(o===null)throw Error(t(310));un=o,o={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},vn===null?qt.memoizedState=vn=o:vn=vn.next=o}return vn}function Fa(o,s){return typeof s=="function"?s(o):s}function wu(o){var s=Br(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=o;var d=un,h=d.baseQueue,x=l.pending;if(x!==null){if(h!==null){var w=h.next;h.next=x.next,x.next=w}d.baseQueue=h=x,l.pending=null}if(h!==null){x=h.next,d=d.baseState;var K=w=null,q=null,ye=x;do{var De=ye.lane;if((Qi&De)===De)q!==null&&(q=q.next={lane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),d=ye.hasEagerState?ye.eagerState:o(d,ye.action);else{var Ne={lane:De,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null};q===null?(K=q=Ne,w=d):q=q.next=Ne,qt.lanes|=De,Ri|=De}ye=ye.next}while(ye!==null&&ye!==x);q===null?w=d:q.next=K,Qr(d,s.memoizedState)||(er=!0),s.memoizedState=d,s.baseState=w,s.baseQueue=q,l.lastRenderedState=d}if(o=l.interleaved,o!==null){h=o;do x=h.lane,qt.lanes|=x,Ri|=x,h=h.next;while(h!==o)}else h===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Cu(o){var s=Br(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=o;var d=l.dispatch,h=l.pending,x=s.memoizedState;if(h!==null){l.pending=null;var w=h=h.next;do x=o(x,w.action),w=w.next;while(w!==h);Qr(x,s.memoizedState)||(er=!0),s.memoizedState=x,s.baseQueue===null&&(s.baseState=x),l.lastRenderedState=x}return[x,d]}function e0(){}function t0(o,s){var l=qt,d=Br(),h=s(),x=!Qr(d.memoizedState,h);if(x&&(d.memoizedState=h,er=!0),d=d.queue,Bu(o0.bind(null,l,d,o),[o]),d.getSnapshot!==s||x||vn!==null&&vn.memoizedState.tag&1){if(l.flags|=2048,Ua(9,r0.bind(null,l,d,h,s),void 0,null),wn===null)throw Error(t(349));(Qi&30)!==0||n0(l,s,h)}return h}function n0(o,s,l){o.flags|=16384,o={getSnapshot:s,value:l},s=qt.updateQueue,s===null?(s={lastEffect:null,stores:null},qt.updateQueue=s,s.stores=[o]):(l=s.stores,l===null?s.stores=[o]:l.push(o))}function r0(o,s,l,d){s.value=l,s.getSnapshot=d,i0(s)&&s0(o)}function o0(o,s,l){return l(function(){i0(s)&&s0(o)})}function i0(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!Qr(o,l)}catch{return!0}}function s0(o){var s=mo(o,1);s!==null&&Pr(s,o,1,-1)}function a0(o){var s=eo();return typeof o=="function"&&(o=o()),s.memoizedState=s.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:o},s.queue=o,o=o.dispatch=oC.bind(null,qt,o),[s.memoizedState,o]}function Ua(o,s,l,d){return o={tag:o,create:s,destroy:l,deps:d,next:null},s=qt.updateQueue,s===null?(s={lastEffect:null,stores:null},qt.updateQueue=s,s.lastEffect=o.next=o):(l=s.lastEffect,l===null?s.lastEffect=o.next=o:(d=l.next,l.next=o,o.next=d,s.lastEffect=o)),o}function A0(){return Br().memoizedState}function nl(o,s,l,d){var h=eo();qt.flags|=o,h.memoizedState=Ua(1|s,l,void 0,d===void 0?null:d)}function rl(o,s,l,d){var h=Br();d=d===void 0?null:d;var x=void 0;if(un!==null){var w=un.memoizedState;if(x=w.destroy,d!==null&&yu(d,w.deps)){h.memoizedState=Ua(s,l,x,d);return}}qt.flags|=o,h.memoizedState=Ua(1|s,l,x,d)}function l0(o,s){return nl(8390656,8,o,s)}function Bu(o,s){return rl(2048,8,o,s)}function c0(o,s){return rl(4,2,o,s)}function d0(o,s){return rl(4,4,o,s)}function u0(o,s){if(typeof s=="function")return o=o(),s(o),function(){s(null)};if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function p0(o,s,l){return l=l!=null?l.concat([o]):null,rl(4,4,u0.bind(null,s,o),l)}function Su(){}function h0(o,s){var l=Br();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&yu(s,d[1])?d[0]:(l.memoizedState=[o,s],o)}function g0(o,s){var l=Br();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&yu(s,d[1])?d[0]:(o=o(),l.memoizedState=[o,s],o)}function f0(o,s,l){return(Qi&21)===0?(o.baseState&&(o.baseState=!1,er=!0),o.memoizedState=l):(Qr(l,s)||(l=Wg(),qt.lanes|=l,Ri|=l,o.baseState=!0),s)}function nC(o,s){var l=Rt;Rt=l!==0&&4>l?l:4,o(!0);var d=xu.transition;xu.transition={};try{o(!1),s()}finally{Rt=l,xu.transition=d}}function m0(){return Br().memoizedState}function rC(o,s,l){var d=Xo(o);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},x0(o))y0(s,l);else if(l=Yf(o,s,l,d),l!==null){var h=Vn();Pr(l,o,d,h),b0(l,s,d)}}function oC(o,s,l){var d=Xo(o),h={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(x0(o))y0(s,h);else{var x=o.alternate;if(o.lanes===0&&(x===null||x.lanes===0)&&(x=s.lastRenderedReducer,x!==null))try{var w=s.lastRenderedState,K=x(w,l);if(h.hasEagerState=!0,h.eagerState=K,Qr(K,w)){var q=s.interleaved;q===null?(h.next=h,uu(s)):(h.next=q.next,q.next=h),s.interleaved=h;return}}catch{}finally{}l=Yf(o,s,h,d),l!==null&&(h=Vn(),Pr(l,o,d,h),b0(l,s,d))}}function x0(o){var s=o.alternate;return o===qt||s!==null&&s===qt}function y0(o,s){Ta=tl=!0;var l=o.pending;l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s}function b0(o,s,l){if((l&4194240)!==0){var d=s.lanes;d&=o.pendingLanes,l|=d,s.lanes=l,Ed(o,l)}}var ol={readContext:Cr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},iC={readContext:Cr,useCallback:function(o,s){return eo().memoizedState=[o,s===void 0?null:s],o},useContext:Cr,useEffect:l0,useImperativeHandle:function(o,s,l){return l=l!=null?l.concat([o]):null,nl(4194308,4,u0.bind(null,s,o),l)},useLayoutEffect:function(o,s){return nl(4194308,4,o,s)},useInsertionEffect:function(o,s){return nl(4,2,o,s)},useMemo:function(o,s){var l=eo();return s=s===void 0?null:s,o=o(),l.memoizedState=[o,s],o},useReducer:function(o,s,l){var d=eo();return s=l!==void 0?l(s):s,d.memoizedState=d.baseState=s,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:s},d.queue=o,o=o.dispatch=rC.bind(null,qt,o),[d.memoizedState,o]},useRef:function(o){var s=eo();return o={current:o},s.memoizedState=o},useState:a0,useDebugValue:Su,useDeferredValue:function(o){return eo().memoizedState=o},useTransition:function(){var o=a0(!1),s=o[0];return o=nC.bind(null,o[1]),eo().memoizedState=o,[s,o]},useMutableSource:function(){},useSyncExternalStore:function(o,s,l){var d=qt,h=eo();if(Vt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),wn===null)throw Error(t(349));(Qi&30)!==0||n0(d,s,l)}h.memoizedState=l;var x={value:l,getSnapshot:s};return h.queue=x,l0(o0.bind(null,d,x,o),[o]),d.flags|=2048,Ua(9,r0.bind(null,d,x,l,s),void 0,null),l},useId:function(){var o=eo(),s=wn.identifierPrefix;if(Vt){var l=fo,d=go;l=(d&~(1<<32-dn(d)-1)).toString(32)+l,s=":"+s+"R"+l,l=ja++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=tC++,s=":"+s+"r"+l.toString(32)+":";return o.memoizedState=s},unstable_isNewReconciler:!1},sC={readContext:Cr,useCallback:h0,useContext:Cr,useEffect:Bu,useImperativeHandle:p0,useInsertionEffect:c0,useLayoutEffect:d0,useMemo:g0,useReducer:wu,useRef:A0,useState:function(){return wu(Fa)},useDebugValue:Su,useDeferredValue:function(o){var s=Br();return f0(s,un.memoizedState,o)},useTransition:function(){var o=wu(Fa)[0],s=Br().memoizedState;return[o,s]},useMutableSource:e0,useSyncExternalStore:t0,useId:m0,unstable_isNewReconciler:!1},aC={readContext:Cr,useCallback:h0,useContext:Cr,useEffect:Bu,useImperativeHandle:p0,useInsertionEffect:c0,useLayoutEffect:d0,useMemo:g0,useReducer:Cu,useRef:A0,useState:function(){return Cu(Fa)},useDebugValue:Su,useDeferredValue:function(o){var s=Br();return un===null?s.memoizedState=o:f0(s,un.memoizedState,o)},useTransition:function(){var o=Cu(Fa)[0],s=Br().memoizedState;return[o,s]},useMutableSource:e0,useSyncExternalStore:t0,useId:m0,unstable_isNewReconciler:!1};function Mr(o,s){if(o&&o.defaultProps){s=re({},s),o=o.defaultProps;for(var l in o)s[l]===void 0&&(s[l]=o[l]);return s}return s}function Iu(o,s,l,d){s=o.memoizedState,l=l(d,s),l=l==null?s:re({},s,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var il={isMounted:function(o){return(o=o._reactInternals)?Ee(o)===o:!1},enqueueSetState:function(o,s,l){o=o._reactInternals;var d=Vn(),h=Xo(o),x=xo(d,h);x.payload=s,l!=null&&(x.callback=l),s=Vo(o,x,h),s!==null&&(Pr(s,o,h,d),XA(s,o,h))},enqueueReplaceState:function(o,s,l){o=o._reactInternals;var d=Vn(),h=Xo(o),x=xo(d,h);x.tag=1,x.payload=s,l!=null&&(x.callback=l),s=Vo(o,x,h),s!==null&&(Pr(s,o,h,d),XA(s,o,h))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var l=Vn(),d=Xo(o),h=xo(l,d);h.tag=2,s!=null&&(h.callback=s),s=Vo(o,h,d),s!==null&&(Pr(s,o,d,l),XA(s,o,d))}};function v0(o,s,l,d,h,x,w){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,x,w):s.prototype&&s.prototype.isPureReactComponent?!xa(l,d)||!xa(h,x):!0}function w0(o,s,l){var d=!1,h=Ko,x=s.contextType;return typeof x=="object"&&x!==null?x=Cr(x):(h=Zn(s)?ki:Dn.current,d=s.contextTypes,x=(d=d!=null)?gs(o,h):Ko),s=new s(l,x),o.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=il,o.stateNode=s,s._reactInternals=o,d&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=h,o.__reactInternalMemoizedMaskedChildContext=x),s}function C0(o,s,l,d){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==o&&il.enqueueReplaceState(s,s.state,null)}function Eu(o,s,l,d){var h=o.stateNode;h.props=l,h.state=o.memoizedState,h.refs={},pu(o);var x=s.contextType;typeof x=="object"&&x!==null?h.context=Cr(x):(x=Zn(s)?ki:Dn.current,h.context=gs(o,x)),h.state=o.memoizedState,x=s.getDerivedStateFromProps,typeof x=="function"&&(Iu(o,s,x,l),h.state=o.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(s=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),s!==h.state&&il.enqueueReplaceState(h,h.state,null),qA(o,l,h,d),h.state=o.memoizedState),typeof h.componentDidMount=="function"&&(o.flags|=4194308)}function Cs(o,s){try{var l="",d=s;do l+=B(d),d=d.return;while(d);var h=l}catch(x){h=`
Error generating stack: `+x.message+`
`+x.stack}return{value:o,source:s,stack:h,digest:null}}function ku(o,s,l){return{value:o,source:null,stack:l??null,digest:s??null}}function Tu(o,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var AC=typeof WeakMap=="function"?WeakMap:Map;function B0(o,s,l){l=xo(-1,l),l.tag=3,l.payload={element:null};var d=s.value;return l.callback=function(){ul||(ul=!0,Ku=d),Tu(o,s)},l}function S0(o,s,l){l=xo(-1,l),l.tag=3;var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var h=s.value;l.payload=function(){return d(h)},l.callback=function(){Tu(o,s)}}var x=o.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){Tu(o,s),typeof d!="function"&&(Yo===null?Yo=new Set([this]):Yo.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),l}function I0(o,s,l){var d=o.pingCache;if(d===null){d=o.pingCache=new AC;var h=new Set;d.set(s,h)}else h=d.get(s),h===void 0&&(h=new Set,d.set(s,h));h.has(l)||(h.add(l),o=wC.bind(null,o,s,l),s.then(o,o))}function E0(o){do{var s;if((s=o.tag===13)&&(s=o.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return o;o=o.return}while(o!==null);return null}function k0(o,s,l,d,h){return(o.mode&1)===0?(o===s?o.flags|=65536:(o.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=xo(-1,1),s.tag=2,Vo(l,s,1))),l.lanes|=1),o):(o.flags|=65536,o.lanes=h,o)}var lC=J.ReactCurrentOwner,er=!1;function Gn(o,s,l,d){s.child=o===null?$f(s,null,l,d):ys(s,o.child,l,d)}function T0(o,s,l,d,h){l=l.render;var x=s.ref;return vs(s,h),d=bu(o,s,l,d,x,h),l=vu(),o!==null&&!er?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~h,yo(o,s,h)):(Vt&&l&&ru(s),s.flags|=1,Gn(o,s,d,h),s.child)}function j0(o,s,l,d,h){if(o===null){var x=l.type;return typeof x=="function"&&!Xu(x)&&x.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=x,F0(o,s,x,d,h)):(o=xl(l.type,null,d,s,s.mode,h),o.ref=s.ref,o.return=s,s.child=o)}if(x=o.child,(o.lanes&h)===0){var w=x.memoizedProps;if(l=l.compare,l=l!==null?l:xa,l(w,d)&&o.ref===s.ref)return yo(o,s,h)}return s.flags|=1,o=Zo(x,d),o.ref=s.ref,o.return=s,s.child=o}function F0(o,s,l,d,h){if(o!==null){var x=o.memoizedProps;if(xa(x,d)&&o.ref===s.ref)if(er=!1,s.pendingProps=d=x,(o.lanes&h)!==0)(o.flags&131072)!==0&&(er=!0);else return s.lanes=o.lanes,yo(o,s,h)}return ju(o,s,l,d,h)}function U0(o,s,l){var d=s.pendingProps,h=d.children,x=o!==null?o.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Ss,hr),hr|=l;else{if((l&1073741824)===0)return o=x!==null?x.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:o,cachePool:null,transitions:null},s.updateQueue=null,_t(Ss,hr),hr|=o,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=x!==null?x.baseLanes:l,_t(Ss,hr),hr|=d}else x!==null?(d=x.baseLanes|l,s.memoizedState=null):d=l,_t(Ss,hr),hr|=d;return Gn(o,s,h,l),s.child}function Q0(o,s){var l=s.ref;(o===null&&l!==null||o!==null&&o.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function ju(o,s,l,d,h){var x=Zn(l)?ki:Dn.current;return x=gs(s,x),vs(s,h),l=bu(o,s,l,d,x,h),d=vu(),o!==null&&!er?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~h,yo(o,s,h)):(Vt&&d&&ru(s),s.flags|=1,Gn(o,s,l,h),s.child)}function R0(o,s,l,d,h){if(Zn(l)){var x=!0;zA(s)}else x=!1;if(vs(s,h),s.stateNode===null)al(o,s),w0(s,l,d),Eu(s,l,d,h),d=!0;else if(o===null){var w=s.stateNode,K=s.memoizedProps;w.props=K;var q=w.context,ye=l.contextType;typeof ye=="object"&&ye!==null?ye=Cr(ye):(ye=Zn(l)?ki:Dn.current,ye=gs(s,ye));var De=l.getDerivedStateFromProps,Ne=typeof De=="function"||typeof w.getSnapshotBeforeUpdate=="function";Ne||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(K!==d||q!==ye)&&C0(s,w,d,ye),Go=!1;var Re=s.memoizedState;w.state=Re,qA(s,d,w,h),q=s.memoizedState,K!==d||Re!==q||qn.current||Go?(typeof De=="function"&&(Iu(s,l,De,d),q=s.memoizedState),(K=Go||v0(s,l,K,d,Re,q,ye))?(Ne||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=q),w.props=d,w.state=q,w.context=ye,d=K):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{w=s.stateNode,Jf(o,s),K=s.memoizedProps,ye=s.type===s.elementType?K:Mr(s.type,K),w.props=ye,Ne=s.pendingProps,Re=w.context,q=l.contextType,typeof q=="object"&&q!==null?q=Cr(q):(q=Zn(l)?ki:Dn.current,q=gs(s,q));var $e=l.getDerivedStateFromProps;(De=typeof $e=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(K!==Ne||Re!==q)&&C0(s,w,d,q),Go=!1,Re=s.memoizedState,w.state=Re,qA(s,d,w,h);var qe=s.memoizedState;K!==Ne||Re!==qe||qn.current||Go?(typeof $e=="function"&&(Iu(s,l,$e,d),qe=s.memoizedState),(ye=Go||v0(s,l,ye,d,Re,qe,q)||!1)?(De||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,qe,q),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,qe,q)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||K===o.memoizedProps&&Re===o.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&Re===o.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=qe),w.props=d,w.state=qe,w.context=q,d=ye):(typeof w.componentDidUpdate!="function"||K===o.memoizedProps&&Re===o.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&Re===o.memoizedState||(s.flags|=1024),d=!1)}return Fu(o,s,l,d,x,h)}function Fu(o,s,l,d,h,x){Q0(o,s);var w=(s.flags&128)!==0;if(!d&&!w)return h&&Hf(s,l,!1),yo(o,s,x);d=s.stateNode,lC.current=s;var K=w&&typeof l.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,o!==null&&w?(s.child=ys(s,o.child,null,x),s.child=ys(s,null,K,x)):Gn(o,s,K,x),s.memoizedState=d.state,h&&Hf(s,l,!0),s.child}function M0(o){var s=o.stateNode;s.pendingContext?Df(o,s.pendingContext,s.pendingContext!==s.context):s.context&&Df(o,s.context,!1),hu(o,s.containerInfo)}function L0(o,s,l,d,h){return xs(),au(h),s.flags|=256,Gn(o,s,l,d),s.child}var Uu={dehydrated:null,treeContext:null,retryLane:0};function Qu(o){return{baseLanes:o,cachePool:null,transitions:null}}function D0(o,s,l){var d=s.pendingProps,h=Xt.current,x=!1,w=(s.flags&128)!==0,K;if((K=w)||(K=o!==null&&o.memoizedState===null?!1:(h&2)!==0),K?(x=!0,s.flags&=-129):(o===null||o.memoizedState!==null)&&(h|=1),_t(Xt,h&1),o===null)return su(s),o=s.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((s.mode&1)===0?s.lanes=1:o.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=d.children,o=d.fallback,x?(d=s.mode,x=s.child,w={mode:"hidden",children:w},(d&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=w):x=yl(w,d,0,null),o=Pi(o,d,l,null),x.return=s,o.return=s,x.sibling=o,s.child=x,s.child.memoizedState=Qu(l),s.memoizedState=Uu,o):Ru(s,w));if(h=o.memoizedState,h!==null&&(K=h.dehydrated,K!==null))return cC(o,s,w,d,K,h,l);if(x){x=d.fallback,w=s.mode,h=o.child,K=h.sibling;var q={mode:"hidden",children:d.children};return(w&1)===0&&s.child!==h?(d=s.child,d.childLanes=0,d.pendingProps=q,s.deletions=null):(d=Zo(h,q),d.subtreeFlags=h.subtreeFlags&14680064),K!==null?x=Zo(K,x):(x=Pi(x,w,l,null),x.flags|=2),x.return=s,d.return=s,d.sibling=x,s.child=d,d=x,x=s.child,w=o.child.memoizedState,w=w===null?Qu(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},x.memoizedState=w,x.childLanes=o.childLanes&~l,s.memoizedState=Uu,d}return x=o.child,o=x.sibling,d=Zo(x,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=l),d.return=s,d.sibling=null,o!==null&&(l=s.deletions,l===null?(s.deletions=[o],s.flags|=16):l.push(o)),s.child=d,s.memoizedState=null,d}function Ru(o,s){return s=yl({mode:"visible",children:s},o.mode,0,null),s.return=o,o.child=s}function sl(o,s,l,d){return d!==null&&au(d),ys(s,o.child,null,l),o=Ru(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function cC(o,s,l,d,h,x,w){if(l)return s.flags&256?(s.flags&=-257,d=ku(Error(t(422))),sl(o,s,w,d)):s.memoizedState!==null?(s.child=o.child,s.flags|=128,null):(x=d.fallback,h=s.mode,d=yl({mode:"visible",children:d.children},h,0,null),x=Pi(x,h,w,null),x.flags|=2,d.return=s,x.return=s,d.sibling=x,s.child=d,(s.mode&1)!==0&&ys(s,o.child,null,w),s.child.memoizedState=Qu(w),s.memoizedState=Uu,x);if((s.mode&1)===0)return sl(o,s,w,null);if(h.data==="$!"){if(d=h.nextSibling&&h.nextSibling.dataset,d)var K=d.dgst;return d=K,x=Error(t(419)),d=ku(x,d,void 0),sl(o,s,w,d)}if(K=(w&o.childLanes)!==0,er||K){if(d=wn,d!==null){switch(w&-w){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(d.suspendedLanes|w))!==0?0:h,h!==0&&h!==x.retryLane&&(x.retryLane=h,mo(o,h),Pr(d,o,h,-1))}return Ju(),d=ku(Error(t(421))),sl(o,s,w,d)}return h.data==="$?"?(s.flags|=128,s.child=o.child,s=CC.bind(null,o),h._reactRetry=s,null):(o=x.treeContext,pr=Oo(h.nextSibling),ur=s,Vt=!0,Rr=null,o!==null&&(vr[wr++]=go,vr[wr++]=fo,vr[wr++]=Ti,go=o.id,fo=o.overflow,Ti=s),s=Ru(s,d.children),s.flags|=4096,s)}function P0(o,s,l){o.lanes|=s;var d=o.alternate;d!==null&&(d.lanes|=s),du(o.return,s,l)}function Mu(o,s,l,d,h){var x=o.memoizedState;x===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:h}:(x.isBackwards=s,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=l,x.tailMode=h)}function H0(o,s,l){var d=s.pendingProps,h=d.revealOrder,x=d.tail;if(Gn(o,s,d.children,l),d=Xt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&P0(o,l,s);else if(o.tag===19)P0(o,l,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}if(_t(Xt,d),(s.mode&1)===0)s.memoizedState=null;else switch(h){case"forwards":for(l=s.child,h=null;l!==null;)o=l.alternate,o!==null&&ZA(o)===null&&(h=l),l=l.sibling;l=h,l===null?(h=s.child,s.child=null):(h=l.sibling,l.sibling=null),Mu(s,!1,h,l,x);break;case"backwards":for(l=null,h=s.child,s.child=null;h!==null;){if(o=h.alternate,o!==null&&ZA(o)===null){s.child=h;break}o=h.sibling,h.sibling=l,l=h,h=o}Mu(s,!0,l,null,x);break;case"together":Mu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function al(o,s){(s.mode&1)===0&&o!==null&&(o.alternate=null,s.alternate=null,s.flags|=2)}function yo(o,s,l){if(o!==null&&(s.dependencies=o.dependencies),Ri|=s.lanes,(l&s.childLanes)===0)return null;if(o!==null&&s.child!==o.child)throw Error(t(153));if(s.child!==null){for(o=s.child,l=Zo(o,o.pendingProps),s.child=l,l.return=s;o.sibling!==null;)o=o.sibling,l=l.sibling=Zo(o,o.pendingProps),l.return=s;l.sibling=null}return s.child}function dC(o,s,l){switch(s.tag){case 3:M0(s),xs();break;case 5:Zf(s);break;case 1:Zn(s.type)&&zA(s);break;case 4:hu(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,h=s.memoizedProps.value;_t(YA,d._currentValue),d._currentValue=h;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(_t(Xt,Xt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?D0(o,s,l):(_t(Xt,Xt.current&1),o=yo(o,s,l),o!==null?o.sibling:null);_t(Xt,Xt.current&1);break;case 19:if(d=(l&s.childLanes)!==0,(o.flags&128)!==0){if(d)return H0(o,s,l);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),_t(Xt,Xt.current),d)break;return null;case 22:case 23:return s.lanes=0,U0(o,s,l)}return yo(o,s,l)}var N0,Lu,_0,O0;N0=function(o,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)o.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Lu=function(){},_0=function(o,s,l,d){var h=o.memoizedProps;if(h!==d){o=s.stateNode,Ui(Zr.current);var x=null;switch(l){case"input":h=T(o,h),d=T(o,d),x=[];break;case"select":h=re({},h,{value:void 0}),d=re({},d,{value:void 0}),x=[];break;case"textarea":h=dt(o,h),d=dt(o,d),x=[];break;default:typeof h.onClick!="function"&&typeof d.onClick=="function"&&(o.onclick=NA)}Y(l,d);var w;l=null;for(ye in h)if(!d.hasOwnProperty(ye)&&h.hasOwnProperty(ye)&&h[ye]!=null)if(ye==="style"){var K=h[ye];for(w in K)K.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else ye!=="dangerouslySetInnerHTML"&&ye!=="children"&&ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&ye!=="autoFocus"&&(a.hasOwnProperty(ye)?x||(x=[]):(x=x||[]).push(ye,null));for(ye in d){var q=d[ye];if(K=h!=null?h[ye]:void 0,d.hasOwnProperty(ye)&&q!==K&&(q!=null||K!=null))if(ye==="style")if(K){for(w in K)!K.hasOwnProperty(w)||q&&q.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in q)q.hasOwnProperty(w)&&K[w]!==q[w]&&(l||(l={}),l[w]=q[w])}else l||(x||(x=[]),x.push(ye,l)),l=q;else ye==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,K=K?K.__html:void 0,q!=null&&K!==q&&(x=x||[]).push(ye,q)):ye==="children"?typeof q!="string"&&typeof q!="number"||(x=x||[]).push(ye,""+q):ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&(a.hasOwnProperty(ye)?(q!=null&&ye==="onScroll"&&Kt("scroll",o),x||K===q||(x=[])):(x=x||[]).push(ye,q))}l&&(x=x||[]).push("style",l);var ye=x;(s.updateQueue=ye)&&(s.flags|=4)}},O0=function(o,s,l,d){l!==d&&(s.flags|=4)};function Qa(o,s){if(!Vt)switch(o.tailMode){case"hidden":s=o.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function Hn(o){var s=o.alternate!==null&&o.alternate.child===o.child,l=0,d=0;if(s)for(var h=o.child;h!==null;)l|=h.lanes|h.childLanes,d|=h.subtreeFlags&14680064,d|=h.flags&14680064,h.return=o,h=h.sibling;else for(h=o.child;h!==null;)l|=h.lanes|h.childLanes,d|=h.subtreeFlags,d|=h.flags,h.return=o,h=h.sibling;return o.subtreeFlags|=d,o.childLanes=l,s}function uC(o,s,l){var d=s.pendingProps;switch(ou(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(s),null;case 1:return Zn(s.type)&&OA(),Hn(s),null;case 3:return d=s.stateNode,ws(),Wt(qn),Wt(Dn),mu(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(VA(s)?s.flags|=4:o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Rr!==null&&(Vu(Rr),Rr=null))),Lu(o,s),Hn(s),null;case 5:gu(s);var h=Ui(ka.current);if(l=s.type,o!==null&&s.stateNode!=null)_0(o,s,l,d,h),o.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return Hn(s),null}if(o=Ui(Zr.current),VA(s)){d=s.stateNode,l=s.type;var x=s.memoizedProps;switch(d[qr]=s,d[Ca]=x,o=(s.mode&1)!==0,l){case"dialog":Kt("cancel",d),Kt("close",d);break;case"iframe":case"object":case"embed":Kt("load",d);break;case"video":case"audio":for(h=0;h<ba.length;h++)Kt(ba[h],d);break;case"source":Kt("error",d);break;case"img":case"image":case"link":Kt("error",d),Kt("load",d);break;case"details":Kt("toggle",d);break;case"input":ge(d,x),Kt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!x.multiple},Kt("invalid",d);break;case"textarea":ht(d,x),Kt("invalid",d)}Y(l,x),h=null;for(var w in x)if(x.hasOwnProperty(w)){var K=x[w];w==="children"?typeof K=="string"?d.textContent!==K&&(x.suppressHydrationWarning!==!0&&HA(d.textContent,K,o),h=["children",K]):typeof K=="number"&&d.textContent!==""+K&&(x.suppressHydrationWarning!==!0&&HA(d.textContent,K,o),h=["children",""+K]):a.hasOwnProperty(w)&&K!=null&&w==="onScroll"&&Kt("scroll",d)}switch(l){case"input":Z(d),mt(d,x,!0);break;case"textarea":Z(d),Ut(d);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(d.onclick=NA)}d=h,s.updateQueue=d,d!==null&&(s.flags|=4)}else{w=h.nodeType===9?h:h.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Tt(l)),o==="http://www.w3.org/1999/xhtml"?l==="script"?(o=w.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof d.is=="string"?o=w.createElement(l,{is:d.is}):(o=w.createElement(l),l==="select"&&(w=o,d.multiple?w.multiple=!0:d.size&&(w.size=d.size))):o=w.createElementNS(o,l),o[qr]=s,o[Ca]=d,N0(o,s,!1,!1),s.stateNode=o;e:{switch(w=We(l,d),l){case"dialog":Kt("cancel",o),Kt("close",o),h=d;break;case"iframe":case"object":case"embed":Kt("load",o),h=d;break;case"video":case"audio":for(h=0;h<ba.length;h++)Kt(ba[h],o);h=d;break;case"source":Kt("error",o),h=d;break;case"img":case"image":case"link":Kt("error",o),Kt("load",o),h=d;break;case"details":Kt("toggle",o),h=d;break;case"input":ge(o,d),h=T(o,d),Kt("invalid",o);break;case"option":h=d;break;case"select":o._wrapperState={wasMultiple:!!d.multiple},h=re({},d,{value:void 0}),Kt("invalid",o);break;case"textarea":ht(o,d),h=dt(o,d),Kt("invalid",o);break;default:h=d}Y(l,h),K=h;for(x in K)if(K.hasOwnProperty(x)){var q=K[x];x==="style"?Qe(o,q):x==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&he(o,q)):x==="children"?typeof q=="string"?(l!=="textarea"||q!=="")&&Ke(o,q):typeof q=="number"&&Ke(o,""+q):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(a.hasOwnProperty(x)?q!=null&&x==="onScroll"&&Kt("scroll",o):q!=null&&te(o,x,q,w))}switch(l){case"input":Z(o),mt(o,d,!1);break;case"textarea":Z(o),Ut(o);break;case"option":d.value!=null&&o.setAttribute("value",""+ve(d.value));break;case"select":o.multiple=!!d.multiple,x=d.value,x!=null?ie(o,!!d.multiple,x,!1):d.defaultValue!=null&&ie(o,!!d.multiple,d.defaultValue,!0);break;default:typeof h.onClick=="function"&&(o.onclick=NA)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Hn(s),null;case 6:if(o&&s.stateNode!=null)O0(o,s,o.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(l=Ui(ka.current),Ui(Zr.current),VA(s)){if(d=s.stateNode,l=s.memoizedProps,d[qr]=s,(x=d.nodeValue!==l)&&(o=ur,o!==null))switch(o.tag){case 3:HA(d.nodeValue,l,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&HA(d.nodeValue,l,(o.mode&1)!==0)}x&&(s.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[qr]=s,s.stateNode=d}return Hn(s),null;case 13:if(Wt(Xt),d=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Vt&&pr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Wf(),xs(),s.flags|=98560,x=!1;else if(x=VA(s),d!==null&&d.dehydrated!==null){if(o===null){if(!x)throw Error(t(318));if(x=s.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[qr]=s}else xs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Hn(s),x=!1}else Rr!==null&&(Vu(Rr),Rr=null),x=!0;if(!x)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(d=d!==null,d!==(o!==null&&o.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(o===null||(Xt.current&1)!==0?pn===0&&(pn=3):Ju())),s.updateQueue!==null&&(s.flags|=4),Hn(s),null);case 4:return ws(),Lu(o,s),o===null&&va(s.stateNode.containerInfo),Hn(s),null;case 10:return cu(s.type._context),Hn(s),null;case 17:return Zn(s.type)&&OA(),Hn(s),null;case 19:if(Wt(Xt),x=s.memoizedState,x===null)return Hn(s),null;if(d=(s.flags&128)!==0,w=x.rendering,w===null)if(d)Qa(x,!1);else{if(pn!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(w=ZA(o),w!==null){for(s.flags|=128,Qa(x,!1),d=w.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=l,l=s.child;l!==null;)x=l,o=d,x.flags&=14680066,w=x.alternate,w===null?(x.childLanes=0,x.lanes=o,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=w.childLanes,x.lanes=w.lanes,x.child=w.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=w.memoizedProps,x.memoizedState=w.memoizedState,x.updateQueue=w.updateQueue,x.type=w.type,o=w.dependencies,x.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),l=l.sibling;return _t(Xt,Xt.current&1|2),s.child}o=o.sibling}x.tail!==null&&Le()>Is&&(s.flags|=128,d=!0,Qa(x,!1),s.lanes=4194304)}else{if(!d)if(o=ZA(w),o!==null){if(s.flags|=128,d=!0,l=o.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Qa(x,!0),x.tail===null&&x.tailMode==="hidden"&&!w.alternate&&!Vt)return Hn(s),null}else 2*Le()-x.renderingStartTime>Is&&l!==1073741824&&(s.flags|=128,d=!0,Qa(x,!1),s.lanes=4194304);x.isBackwards?(w.sibling=s.child,s.child=w):(l=x.last,l!==null?l.sibling=w:s.child=w,x.last=w)}return x.tail!==null?(s=x.tail,x.rendering=s,x.tail=s.sibling,x.renderingStartTime=Le(),s.sibling=null,l=Xt.current,_t(Xt,d?l&1|2:l&1),s):(Hn(s),null);case 22:case 23:return Yu(),d=s.memoizedState!==null,o!==null&&o.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(hr&1073741824)!==0&&(Hn(s),s.subtreeFlags&6&&(s.flags|=8192)):Hn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function pC(o,s){switch(ou(s),s.tag){case 1:return Zn(s.type)&&OA(),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return ws(),Wt(qn),Wt(Dn),mu(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 5:return gu(s),null;case 13:if(Wt(Xt),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(t(340));xs()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return Wt(Xt),null;case 4:return ws(),null;case 10:return cu(s.type._context),null;case 22:case 23:return Yu(),null;case 24:return null;default:return null}}var Al=!1,Nn=!1,hC=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Bs(o,s){var l=o.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){en(o,s,d)}else l.current=null}function Du(o,s,l){try{l()}catch(d){en(o,s,d)}}var z0=!1;function gC(o,s){if(Yd=kA,o=vf(),_d(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var h=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break e}var w=0,K=-1,q=-1,ye=0,De=0,Ne=o,Re=null;t:for(;;){for(var $e;Ne!==l||h!==0&&Ne.nodeType!==3||(K=w+h),Ne!==x||d!==0&&Ne.nodeType!==3||(q=w+d),Ne.nodeType===3&&(w+=Ne.nodeValue.length),($e=Ne.firstChild)!==null;)Re=Ne,Ne=$e;for(;;){if(Ne===o)break t;if(Re===l&&++ye===h&&(K=w),Re===x&&++De===d&&(q=w),($e=Ne.nextSibling)!==null)break;Ne=Re,Re=Ne.parentNode}Ne=$e}l=K===-1||q===-1?null:{start:K,end:q}}else l=null}l=l||{start:0,end:0}}else l=null;for(Jd={focusedElem:o,selectionRange:l},kA=!1,Je=s;Je!==null;)if(s=Je,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,Je=o;else for(;Je!==null;){s=Je;try{var qe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(qe!==null){var et=qe.memoizedProps,nn=qe.memoizedState,ue=s.stateNode,ne=ue.getSnapshotBeforeUpdate(s.elementType===s.type?et:Mr(s.type,et),nn);ue.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var fe=s.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Oe){en(s,s.return,Oe)}if(o=s.sibling,o!==null){o.return=s.return,Je=o;break}Je=s.return}return qe=z0,z0=!1,qe}function Ra(o,s,l){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var h=d=d.next;do{if((h.tag&o)===o){var x=h.destroy;h.destroy=void 0,x!==void 0&&Du(s,l,x)}h=h.next}while(h!==d)}}function ll(o,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&o)===o){var d=l.create;l.destroy=d()}l=l.next}while(l!==s)}}function Pu(o){var s=o.ref;if(s!==null){var l=o.stateNode;switch(o.tag){case 5:o=l;break;default:o=l}typeof s=="function"?s(o):s.current=o}}function K0(o){var s=o.alternate;s!==null&&(o.alternate=null,K0(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&(delete s[qr],delete s[Ca],delete s[eu],delete s[X1],delete s[q1])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function W0(o){return o.tag===5||o.tag===3||o.tag===4}function G0(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||W0(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Hu(o,s,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(o,s):l.insertBefore(o,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(o,l)):(s=l,s.appendChild(o)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=NA));else if(d!==4&&(o=o.child,o!==null))for(Hu(o,s,l),o=o.sibling;o!==null;)Hu(o,s,l),o=o.sibling}function Nu(o,s,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?l.insertBefore(o,s):l.appendChild(o);else if(d!==4&&(o=o.child,o!==null))for(Nu(o,s,l),o=o.sibling;o!==null;)Nu(o,s,l),o=o.sibling}var kn=null,Lr=!1;function $o(o,s,l){for(l=l.child;l!==null;)V0(o,s,l),l=l.sibling}function V0(o,s,l){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(kt,l)}catch{}switch(l.tag){case 5:Nn||Bs(l,s);case 6:var d=kn,h=Lr;kn=null,$o(o,s,l),kn=d,Lr=h,kn!==null&&(Lr?(o=kn,l=l.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):kn.removeChild(l.stateNode));break;case 18:kn!==null&&(Lr?(o=kn,l=l.stateNode,o.nodeType===8?Zd(o.parentNode,l):o.nodeType===1&&Zd(o,l),ua(o)):Zd(kn,l.stateNode));break;case 4:d=kn,h=Lr,kn=l.stateNode.containerInfo,Lr=!0,$o(o,s,l),kn=d,Lr=h;break;case 0:case 11:case 14:case 15:if(!Nn&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){h=d=d.next;do{var x=h,w=x.destroy;x=x.tag,w!==void 0&&((x&2)!==0||(x&4)!==0)&&Du(l,s,w),h=h.next}while(h!==d)}$o(o,s,l);break;case 1:if(!Nn&&(Bs(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(K){en(l,s,K)}$o(o,s,l);break;case 21:$o(o,s,l);break;case 22:l.mode&1?(Nn=(d=Nn)||l.memoizedState!==null,$o(o,s,l),Nn=d):$o(o,s,l);break;default:$o(o,s,l)}}function $0(o){var s=o.updateQueue;if(s!==null){o.updateQueue=null;var l=o.stateNode;l===null&&(l=o.stateNode=new hC),s.forEach(function(d){var h=BC.bind(null,o,d);l.has(d)||(l.add(d),d.then(h,h))})}}function Dr(o,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var h=l[d];try{var x=o,w=s,K=w;e:for(;K!==null;){switch(K.tag){case 5:kn=K.stateNode,Lr=!1;break e;case 3:kn=K.stateNode.containerInfo,Lr=!0;break e;case 4:kn=K.stateNode.containerInfo,Lr=!0;break e}K=K.return}if(kn===null)throw Error(t(160));V0(x,w,h),kn=null,Lr=!1;var q=h.alternate;q!==null&&(q.return=null),h.return=null}catch(ye){en(h,s,ye)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Y0(s,o),s=s.sibling}function Y0(o,s){var l=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Dr(s,o),to(o),d&4){try{Ra(3,o,o.return),ll(3,o)}catch(et){en(o,o.return,et)}try{Ra(5,o,o.return)}catch(et){en(o,o.return,et)}}break;case 1:Dr(s,o),to(o),d&512&&l!==null&&Bs(l,l.return);break;case 5:if(Dr(s,o),to(o),d&512&&l!==null&&Bs(l,l.return),o.flags&32){var h=o.stateNode;try{Ke(h,"")}catch(et){en(o,o.return,et)}}if(d&4&&(h=o.stateNode,h!=null)){var x=o.memoizedProps,w=l!==null?l.memoizedProps:x,K=o.type,q=o.updateQueue;if(o.updateQueue=null,q!==null)try{K==="input"&&x.type==="radio"&&x.name!=null&&He(h,x),We(K,w);var ye=We(K,x);for(w=0;w<q.length;w+=2){var De=q[w],Ne=q[w+1];De==="style"?Qe(h,Ne):De==="dangerouslySetInnerHTML"?he(h,Ne):De==="children"?Ke(h,Ne):te(h,De,Ne,ye)}switch(K){case"input":ze(h,x);break;case"textarea":R(h,x);break;case"select":var Re=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!x.multiple;var $e=x.value;$e!=null?ie(h,!!x.multiple,$e,!1):Re!==!!x.multiple&&(x.defaultValue!=null?ie(h,!!x.multiple,x.defaultValue,!0):ie(h,!!x.multiple,x.multiple?[]:"",!1))}h[Ca]=x}catch(et){en(o,o.return,et)}}break;case 6:if(Dr(s,o),to(o),d&4){if(o.stateNode===null)throw Error(t(162));h=o.stateNode,x=o.memoizedProps;try{h.nodeValue=x}catch(et){en(o,o.return,et)}}break;case 3:if(Dr(s,o),to(o),d&4&&l!==null&&l.memoizedState.isDehydrated)try{ua(s.containerInfo)}catch(et){en(o,o.return,et)}break;case 4:Dr(s,o),to(o);break;case 13:Dr(s,o),to(o),h=o.child,h.flags&8192&&(x=h.memoizedState!==null,h.stateNode.isHidden=x,!x||h.alternate!==null&&h.alternate.memoizedState!==null||(zu=Le())),d&4&&$0(o);break;case 22:if(De=l!==null&&l.memoizedState!==null,o.mode&1?(Nn=(ye=Nn)||De,Dr(s,o),Nn=ye):Dr(s,o),to(o),d&8192){if(ye=o.memoizedState!==null,(o.stateNode.isHidden=ye)&&!De&&(o.mode&1)!==0)for(Je=o,De=o.child;De!==null;){for(Ne=Je=De;Je!==null;){switch(Re=Je,$e=Re.child,Re.tag){case 0:case 11:case 14:case 15:Ra(4,Re,Re.return);break;case 1:Bs(Re,Re.return);var qe=Re.stateNode;if(typeof qe.componentWillUnmount=="function"){d=Re,l=Re.return;try{s=d,qe.props=s.memoizedProps,qe.state=s.memoizedState,qe.componentWillUnmount()}catch(et){en(d,l,et)}}break;case 5:Bs(Re,Re.return);break;case 22:if(Re.memoizedState!==null){q0(Ne);continue}}$e!==null?($e.return=Re,Je=$e):q0(Ne)}De=De.sibling}e:for(De=null,Ne=o;;){if(Ne.tag===5){if(De===null){De=Ne;try{h=Ne.stateNode,ye?(x=h.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(K=Ne.stateNode,q=Ne.memoizedProps.style,w=q!=null&&q.hasOwnProperty("display")?q.display:null,K.style.display=$("display",w))}catch(et){en(o,o.return,et)}}}else if(Ne.tag===6){if(De===null)try{Ne.stateNode.nodeValue=ye?"":Ne.memoizedProps}catch(et){en(o,o.return,et)}}else if((Ne.tag!==22&&Ne.tag!==23||Ne.memoizedState===null||Ne===o)&&Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}if(Ne===o)break e;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===o)break e;De===Ne&&(De=null),Ne=Ne.return}De===Ne&&(De=null),Ne.sibling.return=Ne.return,Ne=Ne.sibling}}break;case 19:Dr(s,o),to(o),d&4&&$0(o);break;case 21:break;default:Dr(s,o),to(o)}}function to(o){var s=o.flags;if(s&2){try{e:{for(var l=o.return;l!==null;){if(W0(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var h=d.stateNode;d.flags&32&&(Ke(h,""),d.flags&=-33);var x=G0(o);Nu(o,x,h);break;case 3:case 4:var w=d.stateNode.containerInfo,K=G0(o);Hu(o,K,w);break;default:throw Error(t(161))}}catch(q){en(o,o.return,q)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function fC(o,s,l){Je=o,J0(o)}function J0(o,s,l){for(var d=(o.mode&1)!==0;Je!==null;){var h=Je,x=h.child;if(h.tag===22&&d){var w=h.memoizedState!==null||Al;if(!w){var K=h.alternate,q=K!==null&&K.memoizedState!==null||Nn;K=Al;var ye=Nn;if(Al=w,(Nn=q)&&!ye)for(Je=h;Je!==null;)w=Je,q=w.child,w.tag===22&&w.memoizedState!==null?Z0(h):q!==null?(q.return=w,Je=q):Z0(h);for(;x!==null;)Je=x,J0(x),x=x.sibling;Je=h,Al=K,Nn=ye}X0(o)}else(h.subtreeFlags&8772)!==0&&x!==null?(x.return=h,Je=x):X0(o)}}function X0(o){for(;Je!==null;){var s=Je;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Nn||ll(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Nn)if(l===null)d.componentDidMount();else{var h=s.elementType===s.type?l.memoizedProps:Mr(s.type,l.memoizedProps);d.componentDidUpdate(h,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var x=s.updateQueue;x!==null&&qf(s,x,d);break;case 3:var w=s.updateQueue;if(w!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}qf(s,w,l)}break;case 5:var K=s.stateNode;if(l===null&&s.flags&4){l=K;var q=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":q.autoFocus&&l.focus();break;case"img":q.src&&(l.src=q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var ye=s.alternate;if(ye!==null){var De=ye.memoizedState;if(De!==null){var Ne=De.dehydrated;Ne!==null&&ua(Ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Nn||s.flags&512&&Pu(s)}catch(Re){en(s,s.return,Re)}}if(s===o){Je=null;break}if(l=s.sibling,l!==null){l.return=s.return,Je=l;break}Je=s.return}}function q0(o){for(;Je!==null;){var s=Je;if(s===o){Je=null;break}var l=s.sibling;if(l!==null){l.return=s.return,Je=l;break}Je=s.return}}function Z0(o){for(;Je!==null;){var s=Je;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{ll(4,s)}catch(q){en(s,l,q)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var h=s.return;try{d.componentDidMount()}catch(q){en(s,h,q)}}var x=s.return;try{Pu(s)}catch(q){en(s,x,q)}break;case 5:var w=s.return;try{Pu(s)}catch(q){en(s,w,q)}}}catch(q){en(s,s.return,q)}if(s===o){Je=null;break}var K=s.sibling;if(K!==null){K.return=s.return,Je=K;break}Je=s.return}}var mC=Math.ceil,cl=J.ReactCurrentDispatcher,_u=J.ReactCurrentOwner,Sr=J.ReactCurrentBatchConfig,Bt=0,wn=null,an=null,Tn=0,hr=0,Ss=zo(0),pn=0,Ma=null,Ri=0,dl=0,Ou=0,La=null,tr=null,zu=0,Is=1/0,bo=null,ul=!1,Ku=null,Yo=null,pl=!1,Jo=null,hl=0,Da=0,Wu=null,gl=-1,fl=0;function Vn(){return(Bt&6)!==0?Le():gl!==-1?gl:gl=Le()}function Xo(o){return(o.mode&1)===0?1:(Bt&2)!==0&&Tn!==0?Tn&-Tn:eC.transition!==null?(fl===0&&(fl=Wg()),fl):(o=Rt,o!==0||(o=window.event,o=o===void 0?16:ef(o.type)),o)}function Pr(o,s,l,d){if(50<Da)throw Da=0,Wu=null,Error(t(185));aa(o,l,d),((Bt&2)===0||o!==wn)&&(o===wn&&((Bt&2)===0&&(dl|=l),pn===4&&qo(o,Tn)),nr(o,d),l===1&&Bt===0&&(s.mode&1)===0&&(Is=Le()+500,KA&&Wo()))}function nr(o,s){var l=o.callbackNode;e1(o,s);var d=is(o,o===wn?Tn:0);if(d===0)l!==null&&Zt(l),o.callbackNode=null,o.callbackPriority=0;else if(s=d&-d,o.callbackPriority!==s){if(l!=null&&Zt(l),s===1)o.tag===0?Z1(tm.bind(null,o)):Nf(tm.bind(null,o)),Y1(function(){(Bt&6)===0&&Wo()}),l=null;else{switch(Gg(d)){case 1:l=Jt;break;case 4:l=bn;break;case 16:l=Jr;break;case 536870912:l=vt;break;default:l=Jr}l=lm(l,em.bind(null,o))}o.callbackPriority=s,o.callbackNode=l}}function em(o,s){if(gl=-1,fl=0,(Bt&6)!==0)throw Error(t(327));var l=o.callbackNode;if(Es()&&o.callbackNode!==l)return null;var d=is(o,o===wn?Tn:0);if(d===0)return null;if((d&30)!==0||(d&o.expiredLanes)!==0||s)s=ml(o,d);else{s=d;var h=Bt;Bt|=2;var x=rm();(wn!==o||Tn!==s)&&(bo=null,Is=Le()+500,Li(o,s));do try{bC();break}catch(K){nm(o,K)}while(!0);lu(),cl.current=x,Bt=h,an!==null?s=0:(wn=null,Tn=0,s=pn)}if(s!==0){if(s===2&&(h=Sd(o),h!==0&&(d=h,s=Gu(o,h))),s===1)throw l=Ma,Li(o,0),qo(o,d),nr(o,Le()),l;if(s===6)qo(o,d);else{if(h=o.current.alternate,(d&30)===0&&!xC(h)&&(s=ml(o,d),s===2&&(x=Sd(o),x!==0&&(d=x,s=Gu(o,x))),s===1))throw l=Ma,Li(o,0),qo(o,d),nr(o,Le()),l;switch(o.finishedWork=h,o.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:Di(o,tr,bo);break;case 3:if(qo(o,d),(d&130023424)===d&&(s=zu+500-Le(),10<s)){if(is(o,0)!==0)break;if(h=o.suspendedLanes,(h&d)!==d){Vn(),o.pingedLanes|=o.suspendedLanes&h;break}o.timeoutHandle=qd(Di.bind(null,o,tr,bo),s);break}Di(o,tr,bo);break;case 4:if(qo(o,d),(d&4194240)===d)break;for(s=o.eventTimes,h=-1;0<d;){var w=31-dn(d);x=1<<w,w=s[w],w>h&&(h=w),d&=~x}if(d=h,d=Le()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*mC(d/1960))-d,10<d){o.timeoutHandle=qd(Di.bind(null,o,tr,bo),d);break}Di(o,tr,bo);break;case 5:Di(o,tr,bo);break;default:throw Error(t(329))}}}return nr(o,Le()),o.callbackNode===l?em.bind(null,o):null}function Gu(o,s){var l=La;return o.current.memoizedState.isDehydrated&&(Li(o,s).flags|=256),o=ml(o,s),o!==2&&(s=tr,tr=l,s!==null&&Vu(s)),o}function Vu(o){tr===null?tr=o:tr.push.apply(tr,o)}function xC(o){for(var s=o;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var h=l[d],x=h.getSnapshot;h=h.value;try{if(!Qr(x(),h))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function qo(o,s){for(s&=~Ou,s&=~dl,o.suspendedLanes|=s,o.pingedLanes&=~s,o=o.expirationTimes;0<s;){var l=31-dn(s),d=1<<l;o[l]=-1,s&=~d}}function tm(o){if((Bt&6)!==0)throw Error(t(327));Es();var s=is(o,0);if((s&1)===0)return nr(o,Le()),null;var l=ml(o,s);if(o.tag!==0&&l===2){var d=Sd(o);d!==0&&(s=d,l=Gu(o,d))}if(l===1)throw l=Ma,Li(o,0),qo(o,s),nr(o,Le()),l;if(l===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=s,Di(o,tr,bo),nr(o,Le()),null}function $u(o,s){var l=Bt;Bt|=1;try{return o(s)}finally{Bt=l,Bt===0&&(Is=Le()+500,KA&&Wo())}}function Mi(o){Jo!==null&&Jo.tag===0&&(Bt&6)===0&&Es();var s=Bt;Bt|=1;var l=Sr.transition,d=Rt;try{if(Sr.transition=null,Rt=1,o)return o()}finally{Rt=d,Sr.transition=l,Bt=s,(Bt&6)===0&&Wo()}}function Yu(){hr=Ss.current,Wt(Ss)}function Li(o,s){o.finishedWork=null,o.finishedLanes=0;var l=o.timeoutHandle;if(l!==-1&&(o.timeoutHandle=-1,$1(l)),an!==null)for(l=an.return;l!==null;){var d=l;switch(ou(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&OA();break;case 3:ws(),Wt(qn),Wt(Dn),mu();break;case 5:gu(d);break;case 4:ws();break;case 13:Wt(Xt);break;case 19:Wt(Xt);break;case 10:cu(d.type._context);break;case 22:case 23:Yu()}l=l.return}if(wn=o,an=o=Zo(o.current,null),Tn=hr=s,pn=0,Ma=null,Ou=dl=Ri=0,tr=La=null,Fi!==null){for(s=0;s<Fi.length;s++)if(l=Fi[s],d=l.interleaved,d!==null){l.interleaved=null;var h=d.next,x=l.pending;if(x!==null){var w=x.next;x.next=h,d.next=w}l.pending=d}Fi=null}return o}function nm(o,s){do{var l=an;try{if(lu(),el.current=ol,tl){for(var d=qt.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}tl=!1}if(Qi=0,vn=un=qt=null,Ta=!1,ja=0,_u.current=null,l===null||l.return===null){pn=1,Ma=s,an=null;break}e:{var x=o,w=l.return,K=l,q=s;if(s=Tn,K.flags|=32768,q!==null&&typeof q=="object"&&typeof q.then=="function"){var ye=q,De=K,Ne=De.tag;if((De.mode&1)===0&&(Ne===0||Ne===11||Ne===15)){var Re=De.alternate;Re?(De.updateQueue=Re.updateQueue,De.memoizedState=Re.memoizedState,De.lanes=Re.lanes):(De.updateQueue=null,De.memoizedState=null)}var $e=E0(w);if($e!==null){$e.flags&=-257,k0($e,w,K,x,s),$e.mode&1&&I0(x,ye,s),s=$e,q=ye;var qe=s.updateQueue;if(qe===null){var et=new Set;et.add(q),s.updateQueue=et}else qe.add(q);break e}else{if((s&1)===0){I0(x,ye,s),Ju();break e}q=Error(t(426))}}else if(Vt&&K.mode&1){var nn=E0(w);if(nn!==null){(nn.flags&65536)===0&&(nn.flags|=256),k0(nn,w,K,x,s),au(Cs(q,K));break e}}x=q=Cs(q,K),pn!==4&&(pn=2),La===null?La=[x]:La.push(x),x=w;do{switch(x.tag){case 3:x.flags|=65536,s&=-s,x.lanes|=s;var ue=B0(x,q,s);Xf(x,ue);break e;case 1:K=q;var ne=x.type,fe=x.stateNode;if((x.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(Yo===null||!Yo.has(fe)))){x.flags|=65536,s&=-s,x.lanes|=s;var Oe=S0(x,K,s);Xf(x,Oe);break e}}x=x.return}while(x!==null)}im(l)}catch(ot){s=ot,an===l&&l!==null&&(an=l=l.return);continue}break}while(!0)}function rm(){var o=cl.current;return cl.current=ol,o===null?ol:o}function Ju(){(pn===0||pn===3||pn===2)&&(pn=4),wn===null||(Ri&268435455)===0&&(dl&268435455)===0||qo(wn,Tn)}function ml(o,s){var l=Bt;Bt|=2;var d=rm();(wn!==o||Tn!==s)&&(bo=null,Li(o,s));do try{yC();break}catch(h){nm(o,h)}while(!0);if(lu(),Bt=l,cl.current=d,an!==null)throw Error(t(261));return wn=null,Tn=0,pn}function yC(){for(;an!==null;)om(an)}function bC(){for(;an!==null&&!cr();)om(an)}function om(o){var s=Am(o.alternate,o,hr);o.memoizedProps=o.pendingProps,s===null?im(o):an=s,_u.current=null}function im(o){var s=o;do{var l=s.alternate;if(o=s.return,(s.flags&32768)===0){if(l=uC(l,s,hr),l!==null){an=l;return}}else{if(l=pC(l,s),l!==null){l.flags&=32767,an=l;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{pn=6,an=null;return}}if(s=s.sibling,s!==null){an=s;return}an=s=o}while(s!==null);pn===0&&(pn=5)}function Di(o,s,l){var d=Rt,h=Sr.transition;try{Sr.transition=null,Rt=1,vC(o,s,l,d)}finally{Sr.transition=h,Rt=d}return null}function vC(o,s,l,d){do Es();while(Jo!==null);if((Bt&6)!==0)throw Error(t(327));l=o.finishedWork;var h=o.finishedLanes;if(l===null)return null;if(o.finishedWork=null,o.finishedLanes=0,l===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var x=l.lanes|l.childLanes;if(t1(o,x),o===wn&&(an=wn=null,Tn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||pl||(pl=!0,lm(Jr,function(){return Es(),null})),x=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||x){x=Sr.transition,Sr.transition=null;var w=Rt;Rt=1;var K=Bt;Bt|=4,_u.current=null,gC(o,l),Y0(l,o),_1(Jd),kA=!!Yd,Jd=Yd=null,o.current=l,fC(l),Yr(),Bt=K,Rt=w,Sr.transition=x}else o.current=l;if(pl&&(pl=!1,Jo=o,hl=h),x=o.pendingLanes,x===0&&(Yo=null),Xr(l.stateNode),nr(o,Le()),s!==null)for(d=o.onRecoverableError,l=0;l<s.length;l++)h=s[l],d(h.value,{componentStack:h.stack,digest:h.digest});if(ul)throw ul=!1,o=Ku,Ku=null,o;return(hl&1)!==0&&o.tag!==0&&Es(),x=o.pendingLanes,(x&1)!==0?o===Wu?Da++:(Da=0,Wu=o):Da=0,Wo(),null}function Es(){if(Jo!==null){var o=Gg(hl),s=Sr.transition,l=Rt;try{if(Sr.transition=null,Rt=16>o?16:o,Jo===null)var d=!1;else{if(o=Jo,Jo=null,hl=0,(Bt&6)!==0)throw Error(t(331));var h=Bt;for(Bt|=4,Je=o.current;Je!==null;){var x=Je,w=x.child;if((Je.flags&16)!==0){var K=x.deletions;if(K!==null){for(var q=0;q<K.length;q++){var ye=K[q];for(Je=ye;Je!==null;){var De=Je;switch(De.tag){case 0:case 11:case 15:Ra(8,De,x)}var Ne=De.child;if(Ne!==null)Ne.return=De,Je=Ne;else for(;Je!==null;){De=Je;var Re=De.sibling,$e=De.return;if(K0(De),De===ye){Je=null;break}if(Re!==null){Re.return=$e,Je=Re;break}Je=$e}}}var qe=x.alternate;if(qe!==null){var et=qe.child;if(et!==null){qe.child=null;do{var nn=et.sibling;et.sibling=null,et=nn}while(et!==null)}}Je=x}}if((x.subtreeFlags&2064)!==0&&w!==null)w.return=x,Je=w;else e:for(;Je!==null;){if(x=Je,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:Ra(9,x,x.return)}var ue=x.sibling;if(ue!==null){ue.return=x.return,Je=ue;break e}Je=x.return}}var ne=o.current;for(Je=ne;Je!==null;){w=Je;var fe=w.child;if((w.subtreeFlags&2064)!==0&&fe!==null)fe.return=w,Je=fe;else e:for(w=ne;Je!==null;){if(K=Je,(K.flags&2048)!==0)try{switch(K.tag){case 0:case 11:case 15:ll(9,K)}}catch(ot){en(K,K.return,ot)}if(K===w){Je=null;break e}var Oe=K.sibling;if(Oe!==null){Oe.return=K.return,Je=Oe;break e}Je=K.return}}if(Bt=h,Wo(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(kt,o)}catch{}d=!0}return d}finally{Rt=l,Sr.transition=s}}return!1}function sm(o,s,l){s=Cs(l,s),s=B0(o,s,1),o=Vo(o,s,1),s=Vn(),o!==null&&(aa(o,1,s),nr(o,s))}function en(o,s,l){if(o.tag===3)sm(o,o,l);else for(;s!==null;){if(s.tag===3){sm(s,o,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Yo===null||!Yo.has(d))){o=Cs(l,o),o=S0(s,o,1),s=Vo(s,o,1),o=Vn(),s!==null&&(aa(s,1,o),nr(s,o));break}}s=s.return}}function wC(o,s,l){var d=o.pingCache;d!==null&&d.delete(s),s=Vn(),o.pingedLanes|=o.suspendedLanes&l,wn===o&&(Tn&l)===l&&(pn===4||pn===3&&(Tn&130023424)===Tn&&500>Le()-zu?Li(o,0):Ou|=l),nr(o,s)}function am(o,s){s===0&&((o.mode&1)===0?s=1:(s=Mo,Mo<<=1,(Mo&130023424)===0&&(Mo=4194304)));var l=Vn();o=mo(o,s),o!==null&&(aa(o,s,l),nr(o,l))}function CC(o){var s=o.memoizedState,l=0;s!==null&&(l=s.retryLane),am(o,l)}function BC(o,s){var l=0;switch(o.tag){case 13:var d=o.stateNode,h=o.memoizedState;h!==null&&(l=h.retryLane);break;case 19:d=o.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),am(o,l)}var Am;Am=function(o,s,l){if(o!==null)if(o.memoizedProps!==s.pendingProps||qn.current)er=!0;else{if((o.lanes&l)===0&&(s.flags&128)===0)return er=!1,dC(o,s,l);er=(o.flags&131072)!==0}else er=!1,Vt&&(s.flags&1048576)!==0&&_f(s,GA,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;al(o,s),o=s.pendingProps;var h=gs(s,Dn.current);vs(s,l),h=bu(null,s,d,o,h,l);var x=vu();return s.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zn(d)?(x=!0,zA(s)):x=!1,s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,pu(s),h.updater=il,s.stateNode=h,h._reactInternals=s,Eu(s,d,o,l),s=Fu(null,s,d,!0,x,l)):(s.tag=0,Vt&&x&&ru(s),Gn(null,s,h,l),s=s.child),s;case 16:d=s.elementType;e:{switch(al(o,s),o=s.pendingProps,h=d._init,d=h(d._payload),s.type=d,h=s.tag=IC(d),o=Mr(d,o),h){case 0:s=ju(null,s,d,o,l);break e;case 1:s=R0(null,s,d,o,l);break e;case 11:s=T0(null,s,d,o,l);break e;case 14:s=j0(null,s,d,Mr(d.type,o),l);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,h=s.pendingProps,h=s.elementType===d?h:Mr(d,h),ju(o,s,d,h,l);case 1:return d=s.type,h=s.pendingProps,h=s.elementType===d?h:Mr(d,h),R0(o,s,d,h,l);case 3:e:{if(M0(s),o===null)throw Error(t(387));d=s.pendingProps,x=s.memoizedState,h=x.element,Jf(o,s),qA(s,d,null,l);var w=s.memoizedState;if(d=w.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=x,s.memoizedState=x,s.flags&256){h=Cs(Error(t(423)),s),s=L0(o,s,d,l,h);break e}else if(d!==h){h=Cs(Error(t(424)),s),s=L0(o,s,d,l,h);break e}else for(pr=Oo(s.stateNode.containerInfo.firstChild),ur=s,Vt=!0,Rr=null,l=$f(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(xs(),d===h){s=yo(o,s,l);break e}Gn(o,s,d,l)}s=s.child}return s;case 5:return Zf(s),o===null&&su(s),d=s.type,h=s.pendingProps,x=o!==null?o.memoizedProps:null,w=h.children,Xd(d,h)?w=null:x!==null&&Xd(d,x)&&(s.flags|=32),Q0(o,s),Gn(o,s,w,l),s.child;case 6:return o===null&&su(s),null;case 13:return D0(o,s,l);case 4:return hu(s,s.stateNode.containerInfo),d=s.pendingProps,o===null?s.child=ys(s,null,d,l):Gn(o,s,d,l),s.child;case 11:return d=s.type,h=s.pendingProps,h=s.elementType===d?h:Mr(d,h),T0(o,s,d,h,l);case 7:return Gn(o,s,s.pendingProps,l),s.child;case 8:return Gn(o,s,s.pendingProps.children,l),s.child;case 12:return Gn(o,s,s.pendingProps.children,l),s.child;case 10:e:{if(d=s.type._context,h=s.pendingProps,x=s.memoizedProps,w=h.value,_t(YA,d._currentValue),d._currentValue=w,x!==null)if(Qr(x.value,w)){if(x.children===h.children&&!qn.current){s=yo(o,s,l);break e}}else for(x=s.child,x!==null&&(x.return=s);x!==null;){var K=x.dependencies;if(K!==null){w=x.child;for(var q=K.firstContext;q!==null;){if(q.context===d){if(x.tag===1){q=xo(-1,l&-l),q.tag=2;var ye=x.updateQueue;if(ye!==null){ye=ye.shared;var De=ye.pending;De===null?q.next=q:(q.next=De.next,De.next=q),ye.pending=q}}x.lanes|=l,q=x.alternate,q!==null&&(q.lanes|=l),du(x.return,l,s),K.lanes|=l;break}q=q.next}}else if(x.tag===10)w=x.type===s.type?null:x.child;else if(x.tag===18){if(w=x.return,w===null)throw Error(t(341));w.lanes|=l,K=w.alternate,K!==null&&(K.lanes|=l),du(w,l,s),w=x.sibling}else w=x.child;if(w!==null)w.return=x;else for(w=x;w!==null;){if(w===s){w=null;break}if(x=w.sibling,x!==null){x.return=w.return,w=x;break}w=w.return}x=w}Gn(o,s,h.children,l),s=s.child}return s;case 9:return h=s.type,d=s.pendingProps.children,vs(s,l),h=Cr(h),d=d(h),s.flags|=1,Gn(o,s,d,l),s.child;case 14:return d=s.type,h=Mr(d,s.pendingProps),h=Mr(d.type,h),j0(o,s,d,h,l);case 15:return F0(o,s,s.type,s.pendingProps,l);case 17:return d=s.type,h=s.pendingProps,h=s.elementType===d?h:Mr(d,h),al(o,s),s.tag=1,Zn(d)?(o=!0,zA(s)):o=!1,vs(s,l),w0(s,d,h),Eu(s,d,h,l),Fu(null,s,d,!0,o,l);case 19:return H0(o,s,l);case 22:return U0(o,s,l)}throw Error(t(156,s.tag))};function lm(o,s){return zt(o,s)}function SC(o,s,l,d){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(o,s,l,d){return new SC(o,s,l,d)}function Xu(o){return o=o.prototype,!(!o||!o.isReactComponent)}function IC(o){if(typeof o=="function")return Xu(o)?1:0;if(o!=null){if(o=o.$$typeof,o===se)return 11;if(o===be)return 14}return 2}function Zo(o,s){var l=o.alternate;return l===null?(l=Ir(o.tag,s,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=s,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&14680064,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l}function xl(o,s,l,d,h,x){var w=2;if(d=o,typeof o=="function")Xu(o)&&(w=1);else if(typeof o=="string")w=5;else e:switch(o){case X:return Pi(l.children,h,x,s);case Be:w=8,h|=8;break;case Ae:return o=Ir(12,l,s,h|2),o.elementType=Ae,o.lanes=x,o;case pe:return o=Ir(13,l,s,h),o.elementType=pe,o.lanes=x,o;case Me:return o=Ir(19,l,s,h),o.elementType=Me,o.lanes=x,o;case Ue:return yl(l,h,x,s);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case le:w=10;break e;case G:w=9;break e;case se:w=11;break e;case be:w=14;break e;case de:w=16,d=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return s=Ir(w,l,s,h),s.elementType=o,s.type=d,s.lanes=x,s}function Pi(o,s,l,d){return o=Ir(7,o,d,s),o.lanes=l,o}function yl(o,s,l,d){return o=Ir(22,o,d,s),o.elementType=Ue,o.lanes=l,o.stateNode={isHidden:!1},o}function qu(o,s,l){return o=Ir(6,o,null,s),o.lanes=l,o}function Zu(o,s,l){return s=Ir(4,o.children!==null?o.children:[],o.key,s),s.lanes=l,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}function EC(o,s,l,d,h){this.tag=s,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Id(0),this.expirationTimes=Id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Id(0),this.identifierPrefix=d,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function ep(o,s,l,d,h,x,w,K,q){return o=new EC(o,s,l,K,q),s===1?(s=1,x===!0&&(s|=8)):s=0,x=Ir(3,null,null,s),o.current=x,x.stateNode=o,x.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},pu(x),o}function kC(o,s,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:d==null?null:""+d,children:o,containerInfo:s,implementation:l}}function cm(o){if(!o)return Ko;o=o._reactInternals;e:{if(Ee(o)!==o||o.tag!==1)throw Error(t(170));var s=o;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(o.tag===1){var l=o.type;if(Zn(l))return Pf(o,l,s)}return s}function dm(o,s,l,d,h,x,w,K,q){return o=ep(l,d,!0,o,h,x,w,K,q),o.context=cm(null),l=o.current,d=Vn(),h=Xo(l),x=xo(d,h),x.callback=s??null,Vo(l,x,h),o.current.lanes=h,aa(o,h,d),nr(o,d),o}function bl(o,s,l,d){var h=s.current,x=Vn(),w=Xo(h);return l=cm(l),s.context===null?s.context=l:s.pendingContext=l,s=xo(x,w),s.payload={element:o},d=d===void 0?null:d,d!==null&&(s.callback=d),o=Vo(h,s,w),o!==null&&(Pr(o,h,w,x),XA(o,h,w)),w}function vl(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function um(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<s?l:s}}function tp(o,s){um(o,s),(o=o.alternate)&&um(o,s)}function TC(){return null}var pm=typeof reportError=="function"?reportError:function(o){console.error(o)};function np(o){this._internalRoot=o}wl.prototype.render=np.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(t(409));bl(o,s,null,null)},wl.prototype.unmount=np.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;Mi(function(){bl(null,o,null,null)}),s[po]=null}};function wl(o){this._internalRoot=o}wl.prototype.unstable_scheduleHydration=function(o){if(o){var s=Yg();o={blockedOn:null,target:o,priority:s};for(var l=0;l<Ho.length&&s!==0&&s<Ho[l].priority;l++);Ho.splice(l,0,o),l===0&&qg(o)}};function rp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Cl(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function hm(){}function jC(o,s,l,d,h){if(h){if(typeof d=="function"){var x=d;d=function(){var ye=vl(w);x.call(ye)}}var w=dm(s,d,o,0,null,!1,!1,"",hm);return o._reactRootContainer=w,o[po]=w.current,va(o.nodeType===8?o.parentNode:o),Mi(),w}for(;h=o.lastChild;)o.removeChild(h);if(typeof d=="function"){var K=d;d=function(){var ye=vl(q);K.call(ye)}}var q=ep(o,0,!1,null,null,!1,!1,"",hm);return o._reactRootContainer=q,o[po]=q.current,va(o.nodeType===8?o.parentNode:o),Mi(function(){bl(s,q,l,d)}),q}function Bl(o,s,l,d,h){var x=l._reactRootContainer;if(x){var w=x;if(typeof h=="function"){var K=h;h=function(){var q=vl(w);K.call(q)}}bl(s,w,o,h)}else w=jC(l,s,o,h,d);return vl(w)}Vg=function(o){switch(o.tag){case 3:var s=o.stateNode;if(s.current.memoizedState.isDehydrated){var l=Ii(s.pendingLanes);l!==0&&(Ed(s,l|1),nr(s,Le()),(Bt&6)===0&&(Is=Le()+500,Wo()))}break;case 13:Mi(function(){var d=mo(o,1);if(d!==null){var h=Vn();Pr(d,o,1,h)}}),tp(o,1)}},kd=function(o){if(o.tag===13){var s=mo(o,134217728);if(s!==null){var l=Vn();Pr(s,o,134217728,l)}tp(o,134217728)}},$g=function(o){if(o.tag===13){var s=Xo(o),l=mo(o,s);if(l!==null){var d=Vn();Pr(l,o,s,d)}tp(o,s)}},Yg=function(){return Rt},Jg=function(o,s){var l=Rt;try{return Rt=o,s()}finally{Rt=l}},xe=function(o,s,l){switch(s){case"input":if(ze(o,l),s=l.name,l.type==="radio"&&s!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==o&&d.form===o.form){var h=_A(d);if(!h)throw Error(t(90));ke(d),ze(d,h)}}}break;case"textarea":R(o,l);break;case"select":s=l.value,s!=null&&ie(o,!!l.multiple,s,!1)}},Pt=$u,Ln=Mi;var FC={usingClientEntryPoint:!1,Events:[Ba,ps,_A,At,bt,$u]},Pa={findFiberByHostInstance:Ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UC={bundleType:Pa.bundleType,version:Pa.version,rendererPackageName:Pa.rendererPackageName,rendererConfig:Pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=lt(o),o===null?null:o.stateNode},findFiberByHostInstance:Pa.findFiberByHostInstance||TC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sl.isDisabled&&Sl.supportsFiber)try{kt=Sl.inject(UC),Qt=Sl}catch{}}return rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FC,rr.createPortal=function(o,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rp(s))throw Error(t(200));return kC(o,s,null,l)},rr.createRoot=function(o,s){if(!rp(o))throw Error(t(299));var l=!1,d="",h=pm;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),s=ep(o,1,!1,null,null,l,!1,d,h),o[po]=s.current,va(o.nodeType===8?o.parentNode:o),new np(s)},rr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=lt(s),o=o===null?null:o.stateNode,o},rr.flushSync=function(o){return Mi(o)},rr.hydrate=function(o,s,l){if(!Cl(s))throw Error(t(200));return Bl(null,o,s,!0,l)},rr.hydrateRoot=function(o,s,l){if(!rp(o))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,h=!1,x="",w=pm;if(l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),s=dm(s,null,o,1,l??null,h,!1,x,w),o[po]=s.current,va(o),d)for(o=0;o<d.length;o++)l=d[o],h=l._getVersion,h=h(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,h]:s.mutableSourceEagerHydrationData.push(l,h);return new wl(s)},rr.render=function(o,s,l){if(!Cl(s))throw Error(t(200));return Bl(null,o,s,!1,l)},rr.unmountComponentAtNode=function(o){if(!Cl(o))throw Error(t(40));return o._reactRootContainer?(Mi(function(){Bl(null,null,o,!1,function(){o._reactRootContainer=null,o[po]=null})}),!0):!1},rr.unstable_batchedUpdates=$u,rr.unstable_renderSubtreeIntoContainer=function(o,s,l,d){if(!Cl(l))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Bl(o,s,l,!1,d)},rr.version="18.3.1-next-f1338f8080-20240426",rr}var wm;function Cy(){if(wm)return sp.exports;wm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),sp.exports=OC(),sp.exports}var Cm;function zC(){if(Cm)return Il;Cm=1;var i=Cy();return Il.createRoot=i.createRoot,Il.hydrateRoot=i.hydrateRoot,Il}var KC=zC();Cy();/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cA(){return cA=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},cA.apply(this,arguments)}var ai;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(ai||(ai={}));const Bm="popstate";function WC(i){i===void 0&&(i={});function e(r,a){let{pathname:A,search:c,hash:p}=r.location;return Dp("",{pathname:A,search:c,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Sy(a)}return VC(e,t,null,i)}function yn(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function By(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GC(){return Math.random().toString(36).substr(2,8)}function Sm(i,e){return{usr:i.state,key:i.key,idx:e}}function Dp(i,e,t,r){return t===void 0&&(t=null),cA({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?Xs(e):e,{state:t,key:e&&e.key||r||GC()})}function Sy(i){let{pathname:e="/",search:t="",hash:r=""}=i;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xs(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substr(t),i=i.substr(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substr(r),i=i.substr(0,r)),i&&(e.pathname=i)}return e}function VC(i,e,t,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:A=!1}=r,c=a.history,p=ai.Pop,u=null,f=g();f==null&&(f=0,c.replaceState(cA({},c.state,{idx:f}),""));function g(){return(c.state||{idx:null}).idx}function y(){p=ai.Pop;let Q=g(),V=Q==null?null:Q-f;f=Q,u&&u({action:p,location:L.location,delta:V})}function b(Q,V){p=ai.Push;let D=Dp(L.location,Q,V);f=g()+1;let te=Sm(D,f),J=L.createHref(D);try{c.pushState(te,"",J)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;a.location.assign(J)}A&&u&&u({action:p,location:L.location,delta:1})}function H(Q,V){p=ai.Replace;let D=Dp(L.location,Q,V);f=g();let te=Sm(D,f),J=L.createHref(D);c.replaceState(te,"",J),A&&u&&u({action:p,location:L.location,delta:0})}function S(Q){let V=a.location.origin!=="null"?a.location.origin:a.location.href,D=typeof Q=="string"?Q:Sy(Q);return D=D.replace(/ $/,"%20"),yn(V,"No window.location.(origin|href) available to create URL for href: "+D),new URL(D,V)}let L={get action(){return p},get location(){return i(a,c)},listen(Q){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(Bm,y),u=Q,()=>{a.removeEventListener(Bm,y),u=null}},createHref(Q){return e(a,Q)},createURL:S,encodeLocation(Q){let V=S(Q);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:b,replace:H,go(Q){return c.go(Q)}};return L}var Im;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Im||(Im={}));function $C(i,e,t){return t===void 0&&(t="/"),YC(i,e,t)}function YC(i,e,t,r){let a=typeof e=="string"?Xs(e):e,A=ky(a.pathname||"/",t);if(A==null)return null;let c=Iy(i);JC(c);let p=null;for(let u=0;p==null&&u<c.length;++u){let f=AB(A);p=iB(c[u],f)}return p}function Iy(i,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let a=(A,c,p)=>{let u={relativePath:p===void 0?A.path||"":p,caseSensitive:A.caseSensitive===!0,childrenIndex:c,route:A};u.relativePath.startsWith("/")&&(yn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let f=Wi([r,u.relativePath]),g=t.concat(u);A.children&&A.children.length>0&&(yn(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Iy(A.children,e,g,f)),!(A.path==null&&!A.index)&&e.push({path:f,score:rB(f,A.index),routesMeta:g})};return i.forEach((A,c)=>{var p;if(A.path===""||!((p=A.path)!=null&&p.includes("?")))a(A,c);else for(let u of Ey(A.path))a(A,c,u)}),e}function Ey(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),A=t.replace(/\?$/,"");if(r.length===0)return a?[A,""]:[A];let c=Ey(r.join("/")),p=[];return p.push(...c.map(u=>u===""?A:[A,u].join("/"))),a&&p.push(...c),p.map(u=>i.startsWith("/")&&u===""?"/":u)}function JC(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:oB(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const XC=/^:[\w-]+$/,qC=3,ZC=2,eB=1,tB=10,nB=-2,Em=i=>i==="*";function rB(i,e){let t=i.split("/"),r=t.length;return t.some(Em)&&(r+=nB),e&&(r+=ZC),t.filter(a=>!Em(a)).reduce((a,A)=>a+(XC.test(A)?qC:A===""?eB:tB),r)}function oB(i,e){return i.length===e.length&&i.slice(0,-1).every((r,a)=>r===e[a])?i[i.length-1]-e[e.length-1]:0}function iB(i,e,t){let{routesMeta:r}=i,a={},A="/",c=[];for(let p=0;p<r.length;++p){let u=r[p],f=p===r.length-1,g=A==="/"?e:e.slice(A.length)||"/",y=sB({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},g),b=u.route;if(!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:Wi([A,y.pathname]),pathnameBase:hB(Wi([A,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(A=Wi([A,y.pathnameBase]))}return c}function sB(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=aB(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let A=a[0],c=A.replace(/(.)\/+$/,"$1"),p=a.slice(1);return{params:r.reduce((f,g,y)=>{let{paramName:b,isOptional:H}=g;if(b==="*"){let L=p[y]||"";c=A.slice(0,A.length-L.length).replace(/(.)\/+$/,"$1")}const S=p[y];return H&&!S?f[b]=void 0:f[b]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:A,pathnameBase:c,pattern:i}}function aB(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),By(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let r=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,p,u)=>(r.push({paramName:p,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function AB(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return By(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function ky(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function lB(i,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:a=""}=typeof i=="string"?Xs(i):i;return{pathname:t?t.startsWith("/")?t:cB(t,e):e,search:gB(r),hash:fB(a)}}function cB(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function lp(i,e,t,r){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dB(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function uB(i,e){let t=dB(i);return e?t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function pB(i,e,t,r){r===void 0&&(r=!1);let a;typeof i=="string"?a=Xs(i):(a=cA({},i),yn(!a.pathname||!a.pathname.includes("?"),lp("?","pathname","search",a)),yn(!a.pathname||!a.pathname.includes("#"),lp("#","pathname","hash",a)),yn(!a.search||!a.search.includes("#"),lp("#","search","hash",a)));let A=i===""||a.pathname==="",c=A?"/":a.pathname,p;if(c==null)p=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}p=y>=0?e[y]:"/"}let u=lB(a,p),f=c&&c!=="/"&&c.endsWith("/"),g=(A||c===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(f||g)&&(u.pathname+="/"),u}const Wi=i=>i.join("/").replace(/\/\/+/g,"/"),hB=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),gB=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,fB=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function mB(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const Ty=["post","put","patch","delete"];new Set(Ty);const xB=["get",...Ty];new Set(xB);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dA(){return dA=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},dA.apply(this,arguments)}const Ih=m.createContext(null),yB=m.createContext(null),Wc=m.createContext(null),Gc=m.createContext(null),qs=m.createContext({outlet:null,matches:[],isDataRoute:!1}),jy=m.createContext(null);function Vc(){return m.useContext(Gc)!=null}function Fy(){return Vc()||yn(!1),m.useContext(Gc).location}function Uy(i){m.useContext(Wc).static||m.useLayoutEffect(i)}function bB(){let{isDataRoute:i}=m.useContext(qs);return i?QB():vB()}function vB(){Vc()||yn(!1);let i=m.useContext(Ih),{basename:e,future:t,navigator:r}=m.useContext(Wc),{matches:a}=m.useContext(qs),{pathname:A}=Fy(),c=JSON.stringify(uB(a,t.v7_relativeSplatPath)),p=m.useRef(!1);return Uy(()=>{p.current=!0}),m.useCallback(function(f,g){if(g===void 0&&(g={}),!p.current)return;if(typeof f=="number"){r.go(f);return}let y=pB(f,JSON.parse(c),A,g.relative==="path");i==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Wi([e,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[e,r,c,A,i])}function wB(i,e){return CB(i,e)}function CB(i,e,t,r){Vc()||yn(!1);let{navigator:a}=m.useContext(Wc),{matches:A}=m.useContext(qs),c=A[A.length-1],p=c?c.params:{};c&&c.pathname;let u=c?c.pathnameBase:"/";c&&c.route;let f=Fy(),g;if(e){var y;let Q=typeof e=="string"?Xs(e):e;u==="/"||(y=Q.pathname)!=null&&y.startsWith(u)||yn(!1),g=Q}else g=f;let b=g.pathname||"/",H=b;if(u!=="/"){let Q=u.replace(/^\//,"").split("/");H="/"+b.replace(/^\//,"").split("/").slice(Q.length).join("/")}let S=$C(i,{pathname:H}),L=kB(S&&S.map(Q=>Object.assign({},Q,{params:Object.assign({},p,Q.params),pathname:Wi([u,a.encodeLocation?a.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?u:Wi([u,a.encodeLocation?a.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),A,t,r);return e&&L?m.createElement(Gc.Provider,{value:{location:dA({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:ai.Pop}},L):L}function BB(){let i=UB(),e=mB(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),t?m.createElement("pre",{style:a},t):null,null)}const SB=m.createElement(BB,null);class IB extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?m.createElement(qs.Provider,{value:this.props.routeContext},m.createElement(jy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function EB(i){let{routeContext:e,match:t,children:r}=i,a=m.useContext(Ih);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),m.createElement(qs.Provider,{value:e},r)}function kB(i,e,t,r){var a;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),i==null){var A;if(!t)return null;if(t.errors)i=t.matches;else if((A=r)!=null&&A.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let c=i,p=(a=t)==null?void 0:a.errors;if(p!=null){let g=c.findIndex(y=>y.route.id&&(p==null?void 0:p[y.route.id])!==void 0);g>=0||yn(!1),c=c.slice(0,Math.min(c.length,g+1))}let u=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let y=c[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=g),y.route.id){let{loaderData:b,errors:H}=t,S=y.route.loader&&b[y.route.id]===void 0&&(!H||H[y.route.id]===void 0);if(y.route.lazy||S){u=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((g,y,b)=>{let H,S=!1,L=null,Q=null;t&&(H=p&&y.route.id?p[y.route.id]:void 0,L=y.route.errorElement||SB,u&&(f<0&&b===0?(RB("route-fallback"),S=!0,Q=null):f===b&&(S=!0,Q=y.route.hydrateFallbackElement||null)));let V=e.concat(c.slice(0,b+1)),D=()=>{let te;return H?te=L:S?te=Q:y.route.Component?te=m.createElement(y.route.Component,null):y.route.element?te=y.route.element:te=g,m.createElement(EB,{match:y,routeContext:{outlet:g,matches:V,isDataRoute:t!=null},children:te})};return t&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?m.createElement(IB,{location:t.location,revalidation:t.revalidation,component:L,error:H,children:D(),routeContext:{outlet:null,matches:V,isDataRoute:!0}}):D()},null)}var Qy=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(Qy||{}),Ry=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(Ry||{});function TB(i){let e=m.useContext(Ih);return e||yn(!1),e}function jB(i){let e=m.useContext(yB);return e||yn(!1),e}function FB(i){let e=m.useContext(qs);return e||yn(!1),e}function My(i){let e=FB(),t=e.matches[e.matches.length-1];return t.route.id||yn(!1),t.route.id}function UB(){var i;let e=m.useContext(jy),t=jB(),r=My();return e!==void 0?e:(i=t.errors)==null?void 0:i[r]}function QB(){let{router:i}=TB(Qy.UseNavigateStable),e=My(Ry.UseNavigateStable),t=m.useRef(!1);return Uy(()=>{t.current=!0}),m.useCallback(function(a,A){A===void 0&&(A={}),t.current&&(typeof a=="number"?i.navigate(a):i.navigate(a,dA({fromRouteId:e},A)))},[i,e])}const km={};function RB(i,e,t){km[i]||(km[i]=!0)}function tn(i){yn(!1)}function MB(i){let{basename:e="/",children:t=null,location:r,navigationType:a=ai.Pop,navigator:A,static:c=!1,future:p}=i;Vc()&&yn(!1);let u=e.replace(/^\/*/,"/"),f=m.useMemo(()=>({basename:u,navigator:A,static:c,future:dA({v7_relativeSplatPath:!1},p)}),[u,p,A,c]);typeof r=="string"&&(r=Xs(r));let{pathname:g="/",search:y="",hash:b="",state:H=null,key:S="default"}=r,L=m.useMemo(()=>{let Q=ky(g,u);return Q==null?null:{location:{pathname:Q,search:y,hash:b,state:H,key:S},navigationType:a}},[u,g,y,b,H,S,a]);return L==null?null:m.createElement(Wc.Provider,{value:f},m.createElement(Gc.Provider,{children:t,value:L}))}function LB(i){let{children:e,location:t}=i;return wB(Pp(e),t)}new Promise(()=>{});function Pp(i,e){e===void 0&&(e=[]);let t=[];return m.Children.forEach(i,(r,a)=>{if(!m.isValidElement(r))return;let A=[...e,a];if(r.type===m.Fragment){t.push.apply(t,Pp(r.props.children,A));return}r.type!==tn&&yn(!1),!r.props.index||!r.props.children||yn(!1);let c={id:r.props.id||A.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Pp(r.props.children,A)),t.push(c)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const DB="6";try{window.__reactRouterVersion=DB}catch{}const PB="startTransition",Tm=HC[PB];function HB(i){let{basename:e,children:t,future:r,window:a}=i,A=m.useRef();A.current==null&&(A.current=WC({window:a,v5Compat:!0}));let c=A.current,[p,u]=m.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},g=m.useCallback(y=>{f&&Tm?Tm(()=>u(y)):u(y)},[u,f]);return m.useLayoutEffect(()=>c.listen(g),[c,g]),m.createElement(MB,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:c,future:r})}var jm;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(jm||(jm={}));var Fm;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Fm||(Fm={}));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_B=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Um=i=>{const e=_B(i);return e.charAt(0).toUpperCase()+e.slice(1)},Ly=(...i)=>i.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),OB=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=m.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:A,iconNode:c,...p},u)=>m.createElement("svg",{ref:u,...zB,width:e,height:e,stroke:i,strokeWidth:r?Number(t)*24/Number(e):t,className:Ly("lucide",a),...!A&&!OB(p)&&{"aria-hidden":"true"},...p},[...c.map(([f,g])=>m.createElement(f,g)),...Array.isArray(A)?A:[A]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(i,e)=>{const t=m.forwardRef(({className:r,...a},A)=>m.createElement(KB,{ref:A,iconNode:e,className:Ly(`lucide-${NB(Um(i))}`,`lucide-${i}`,r),...a}));return t.displayName=Um(i),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],vA=st("activity",WB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],wi=st("arrow-left",GB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Wn=st("bell",VB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Vs=st("briefcase",$B);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Gi=st("building",YB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],To=st("calendar",JB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],qB=st("chart-column",XB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],e2=st("check",ZB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jo=st("chevron-down",t2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],r2=st("chevron-left",n2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Hp=st("chevron-right",o2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],so=st("circle-alert",i2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Kr=st("circle-check-big",s2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],A2=st("circle-plus",a2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],c2=st("circle-x",l2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Xi=st("clock",d2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],Qm=st("cog",u2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],h2=st("download",p2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Np=st("eye-off",g2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Fo=st("eye",f2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],x2=st("file-text",m2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],b2=st("fingerprint",y2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],w2=st("folder-open",v2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Eh=st("funnel",C2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],cp=st("globe",B2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],El=st("history",S2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Dy=st("info",I2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Rm=st("layers",E2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],T2=st("layout-dashboard",k2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],F2=st("loader",j2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ui=st("lock",U2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],R2=st("log-out",Q2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],hc=st("mail",M2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Py=st("map-pin",L2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],P2=st("menu",D2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],Mm=st("pen-line",H2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Hy=st("phone",N2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],In=st("plus",_2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Vi=st("refresh-cw",O2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Oi=st("save",z2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],kh=st("search",K2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],yi=st("shield",W2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],zr=st("sparkles",G2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],eA=st("square-pen",V2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ny=st("target",$2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ar=st("trash-2",Y2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],X2=st("trending-down",J2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],$c=st("trending-up",q2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fn=st("triangle-alert",Z2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],oc=st("user-check",eS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Nt=st("user",tS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Eo=st("users",nS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"M18 11c-1.5 0-2.5.5-3 2",key:"1fod00"}],["path",{d:"M4 6a2 2 0 0 0-2 2v4a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V8a2 2 0 0 0-2-2h-3a8 8 0 0 0-5 2 8 8 0 0 0-5-2z",key:"d70hit"}],["path",{d:"M6 11c1.5 0 2.5.5 3 2",key:"136fht"}]],oS=st("venetian-mask",rS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],sS=st("video",iS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mr=st("x",aS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Bo=st("zap",AS);/*! @azure/msal-common v15.13.2 2025-11-19 */const Te={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ai={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},zi={GET:"GET",POST:"POST"},Zs=[Te.OPENID_SCOPE,Te.PROFILE_SCOPE,Te.OFFLINE_ACCESS_SCOPE],Lm=[...Zs,Te.EMAIL_SCOPE],Jn={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Dm={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},pi={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},kl={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Rn={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},Th={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},Yc={QUERY:"query",FRAGMENT:"fragment"},lS={QUERY:"query"},_y={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},Tl={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},uA={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Un={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},jh="appmetadata",cS="client_info",gc="1",fc={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},fr={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},jn={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Mt={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},tA={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Pm={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},ks={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},dp={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Ni={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},dS={Pop:"pop"},Oy=300;/*! @azure/msal-common v15.13.2 2025-11-19 */const mc="unexpected_error",uS="post_request_failed";/*! @azure/msal-common v15.13.2 2025-11-19 */const Hm={[mc]:"Unexpected error in authentication.",[uS]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Lt extends Error{constructor(e,t,r){const a=t?`${e}: ${t}`:e;super(a),Object.setPrototypeOf(this,Lt.prototype),this.errorCode=e||Te.EMPTY_STRING,this.errorMessage=t||Te.EMPTY_STRING,this.subError=r||Te.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function _p(i,e){return new Lt(i,e?`${Hm[i]} ${e}`:Hm[i])}/*! @azure/msal-common v15.13.2 2025-11-19 */const Fh="client_info_decoding_error",zy="client_info_empty_error",Uh="token_parsing_error",Ky="null_or_empty_token",So="endpoints_resolution_error",Wy="network_error",Gy="openid_config_error",Vy="hash_not_deserialized",$s="invalid_state",$y="state_mismatch",Op="state_not_found",Yy="nonce_mismatch",Qh="auth_time_not_found",Jy="max_age_transpired",pS="multiple_matching_tokens",hS="multiple_matching_accounts",Xy="multiple_matching_appMetadata",qy="request_cannot_be_made",Zy="cannot_remove_empty_scope",eb="cannot_append_scopeset",zp="empty_input_scopeset",gS="device_code_polling_cancelled",fS="device_code_expired",mS="device_code_unknown_error",Rh="no_account_in_silent_request",tb="invalid_cache_record",Mh="invalid_cache_environment",Kp="no_account_found",Wp="no_crypto_object",xS="unexpected_credential_type",yS="invalid_assertion",bS="invalid_client_credential",hi="token_refresh_required",vS="user_timeout_reached",nb="token_claims_cnf_required_for_signedjwt",rb="authorization_code_missing_from_server_response",ob="binding_key_not_removed",ib="end_session_endpoint_not_supported",Lh="key_id_missing",wS="no_network_connectivity",CS="user_canceled",BS="missing_tenant_id_error",yt="method_not_implemented",SS="nested_app_auth_bridge_disabled",IS="platform_broker_error";/*! @azure/msal-common v15.13.2 2025-11-19 */const Nm={[Fh]:"The client info could not be parsed/decoded correctly",[zy]:"The client info was empty",[Uh]:"Token cannot be parsed",[Ky]:"The token is null or empty",[So]:"Endpoints cannot be resolved",[Wy]:"Network request failed",[Gy]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Vy]:"The hash parameters could not be deserialized",[$s]:"State was not the expected format",[$y]:"State mismatch error",[Op]:"State not found",[Yy]:"Nonce mismatch error",[Qh]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Jy]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[pS]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[hS]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Xy]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[qy]:"Token request cannot be made without authorization code or refresh token.",[Zy]:"Cannot remove null or empty scope from ScopeSet",[eb]:"Cannot append ScopeSet",[zp]:"Empty input ScopeSet cannot be processed",[gS]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[fS]:"Device code is expired.",[mS]:"Device code stopped polling for unknown reasons.",[Rh]:"Please pass an account object, silent flow is not supported without account information",[tb]:"Cache record object was null or undefined.",[Mh]:"Invalid environment when attempting to create cache entry",[Kp]:"No account found in cache for given key.",[Wp]:"No crypto object detected.",[xS]:"Unexpected credential type.",[yS]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[bS]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[hi]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[vS]:"User defined timeout for device code polling reached",[nb]:"Cannot generate a POP jwt if the token_claims are not populated",[rb]:"Server response does not contain an authorization code to proceed",[ob]:"Could not remove the credential's binding key from storage.",[ib]:"The provided authority does not support logout",[Lh]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[wS]:"No network connectivity. Check your internet connection.",[CS]:"User cancelled the flow.",[BS]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[yt]:"This method has not been implemented",[SS]:"The nested app auth bridge is disabled",[IS]:"An error occurred in the native broker. See the platformBrokerError property for details."};class Dh extends Lt{constructor(e,t){super(e,t?`${Nm[e]}: ${t}`:Nm[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Dh.prototype)}}function _e(i,e){return new Dh(i,e)}/*! @azure/msal-common v15.13.2 2025-11-19 */const xc={createNewGuid:()=>{throw _e(yt)},base64Decode:()=>{throw _e(yt)},base64Encode:()=>{throw _e(yt)},base64UrlEncode:()=>{throw _e(yt)},encodeKid:()=>{throw _e(yt)},async getPublicKeyThumbprint(){throw _e(yt)},async removeTokenBindingKey(){throw _e(yt)},async clearKeystore(){throw _e(yt)},async signJwt(){throw _e(yt)},async hashString(){throw _e(yt)}};/*! @azure/msal-common v15.13.2 2025-11-19 */var Yt;(function(i){i[i.Error=0]="Error",i[i.Warning=1]="Warning",i[i.Info=2]="Info",i[i.Verbose=3]="Verbose",i[i.Trace=4]="Trace"})(Yt||(Yt={}));let ea=class Gp{constructor(e,t,r){this.level=Yt.Info;const a=()=>{},A=e||Gp.createDefaultLoggerOptions();this.localCallback=A.loggerCallback||a,this.piiLoggingEnabled=A.piiLoggingEnabled||!1,this.level=typeof A.logLevel=="number"?A.logLevel:Yt.Info,this.correlationId=A.correlationId||Te.EMPTY_STRING,this.packageName=t||Te.EMPTY_STRING,this.packageVersion=r||Te.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Yt.Info}}clone(e,t,r){return new Gp({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const A=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Yt[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,A,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:Yt.Error,containsPii:!1,correlationId:t||Te.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Yt.Error,containsPii:!0,correlationId:t||Te.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Yt.Warning,containsPii:!1,correlationId:t||Te.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Yt.Warning,containsPii:!0,correlationId:t||Te.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Yt.Info,containsPii:!1,correlationId:t||Te.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Yt.Info,containsPii:!0,correlationId:t||Te.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Yt.Verbose,containsPii:!1,correlationId:t||Te.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Yt.Verbose,containsPii:!0,correlationId:t||Te.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Yt.Trace,containsPii:!1,correlationId:t||Te.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Yt.Trace,containsPii:!0,correlationId:t||Te.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};/*! @azure/msal-common v15.13.2 2025-11-19 */const sb="@azure/msal-common",Ph="15.13.2";/*! @azure/msal-common v15.13.2 2025-11-19 */const Hh={None:"none"};/*! @azure/msal-common v15.13.2 2025-11-19 */const ab="redirect_uri_empty",ES="claims_request_parsing_error",Ab="authority_uri_insecure",Wa="url_parse_error",lb="empty_url_error",cb="empty_input_scopes_error",Nh="invalid_claims",db="token_request_empty",ub="logout_request_empty",kS="invalid_code_challenge_method",_h="pkce_params_missing",Oh="invalid_cloud_discovery_metadata",pb="invalid_authority_metadata",hb="untrusted_authority",Jc="missing_ssh_jwk",gb="missing_ssh_kid",TS="missing_nonce_authentication_header",jS="invalid_authentication_header",fb="cannot_set_OIDCOptions",mb="cannot_allow_platform_broker",xb="authority_mismatch",yb="invalid_request_method_for_EAR",bb="invalid_authorize_post_body_parameters";/*! @azure/msal-common v15.13.2 2025-11-19 */const FS={[ab]:"A redirect URI is required for all calls, and none has been set.",[ES]:"Could not parse the given claims request object.",[Ab]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Wa]:"URL could not be parsed into appropriate segments.",[lb]:"URL was empty or null.",[cb]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Nh]:"Given claims parameter must be a stringified JSON object.",[db]:"Token request was empty and not found in cache.",[ub]:"The logout request was null or undefined.",[kS]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[_h]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Oh]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[pb]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[hb]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Jc]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[gb]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[TS]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[jS]:"Invalid authentication header provided",[fb]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[mb]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[xb]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[bb]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[yb]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class zh extends Lt{constructor(e){super(e,FS[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,zh.prototype)}}function Ht(i){return new zh(i)}/*! @azure/msal-common v15.13.2 2025-11-19 */class xr{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),a=A=>decodeURIComponent(A.replace(/\+/g," "));return r.forEach(A=>{if(A.trim()){const[c,p]=A.split(/=(.+)/g,2);c&&p&&(t[a(c)]=a(p))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class xn{constructor(e){const t=e?xr.trimArrayEntries([...e]):[],r=t?xr.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw Ht(cb);this.scopes=new Set,r.forEach(a=>this.scopes.add(a))}static fromString(e){const r=(e||Te.EMPTY_STRING).split(" ");return new xn(r)}static createSearchScopes(e){const t=e&&e.length>0?e:[...Zs],r=new xn(t);return r.containsOnlyOIDCScopes()?r.removeScope(Te.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new xn(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return Lm.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw _e(eb)}}removeScope(e){if(!e)throw _e(Zy);this.scopes.delete(e.trim())}removeOIDCScopes(){Lm.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw _e(zp);const t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw _e(zp);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),a=this.getScopeCount();return t.size<a+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):Te.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.13.2 2025-11-19 */function yc(i,e){if(!i)throw _e(zy);try{const t=e(i);return JSON.parse(t)}catch{throw _e(Fh)}}function Ns(i){if(!i)throw _e(Fh);const e=i.split(uA.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Te.EMPTY_STRING:e[1]}}/*! @azure/msal-common v15.13.2 2025-11-19 */function _m(i,e){return!!i&&!!e&&i===e.split(".")[1]}function Xc(i,e,t,r){if(r){const{oid:a,sub:A,tid:c,name:p,tfp:u,acr:f,preferred_username:g,upn:y,login_hint:b}=r,H=c||u||f||"";return{tenantId:H,localAccountId:a||A||"",name:p,username:g||y||"",loginHint:b,isHomeTenant:_m(H,i)}}else return{tenantId:t,localAccountId:e,username:"",isHomeTenant:_m(t,i)}}function Kh(i,e,t,r){let a=i;if(e){const{isHomeTenant:A,...c}=e;a={...i,...c}}if(t){const{isHomeTenant:A,...c}=Xc(i.homeAccountId,i.localAccountId,i.tenantId,t);return a={...a,...c,idTokenClaims:t,idToken:r},a}return a}/*! @azure/msal-common v15.13.2 2025-11-19 */const _r={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.13.2 2025-11-19 */function Wh(i){return i&&(i.tid||i.tfp||i.acr)||null}/*! @azure/msal-common v15.13.2 2025-11-19 */const sr={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.13.2 2025-11-19 */class sn{static getAccountInfo(e){return{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,loginHint:e.loginHint,name:e.name,nativeAccountId:e.nativeAccountId,authorityType:e.authorityType,tenantProfiles:new Map((e.tenantProfiles||[]).map(t=>[t.tenantId,t])),dataBoundary:e.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){var f,g,y,b,H,S,L;const a=new sn;t.authorityType===_r.Adfs?a.authorityType=Tl.ADFS_ACCOUNT_TYPE:t.protocolMode===sr.OIDC?a.authorityType=Tl.GENERIC_ACCOUNT_TYPE:a.authorityType=Tl.MSSTS_ACCOUNT_TYPE;let A;e.clientInfo&&r&&(A=yc(e.clientInfo,r),A.xms_tdbr&&(a.dataBoundary=A.xms_tdbr==="EU"?"EU":"None")),a.clientInfo=e.clientInfo,a.homeAccountId=e.homeAccountId,a.nativeAccountId=e.nativeAccountId;const c=e.environment||t&&t.getPreferredCache();if(!c)throw _e(Mh);a.environment=c,a.realm=(A==null?void 0:A.utid)||Wh(e.idTokenClaims)||"",a.localAccountId=(A==null?void 0:A.uid)||((f=e.idTokenClaims)==null?void 0:f.oid)||((g=e.idTokenClaims)==null?void 0:g.sub)||"";const p=((y=e.idTokenClaims)==null?void 0:y.preferred_username)||((b=e.idTokenClaims)==null?void 0:b.upn),u=(H=e.idTokenClaims)!=null&&H.emails?e.idTokenClaims.emails[0]:null;if(a.username=p||u||"",a.loginHint=(S=e.idTokenClaims)==null?void 0:S.login_hint,a.name=((L=e.idTokenClaims)==null?void 0:L.name)||"",a.cloudGraphHostName=e.cloudGraphHostName,a.msGraphHost=e.msGraphHost,e.tenantProfiles)a.tenantProfiles=e.tenantProfiles;else{const Q=Xc(e.homeAccountId,a.localAccountId,a.realm,e.idTokenClaims);a.tenantProfiles=[Q]}return a}static createFromAccountInfo(e,t,r){var A;const a=new sn;return a.authorityType=e.authorityType||Tl.GENERIC_ACCOUNT_TYPE,a.homeAccountId=e.homeAccountId,a.localAccountId=e.localAccountId,a.nativeAccountId=e.nativeAccountId,a.realm=e.tenantId,a.environment=e.environment,a.username=e.username,a.name=e.name,a.loginHint=e.loginHint,a.cloudGraphHostName=t,a.msGraphHost=r,a.tenantProfiles=Array.from(((A=e.tenantProfiles)==null?void 0:A.values())||[]),a.dataBoundary=e.dataBoundary,a}static generateHomeAccountId(e,t,r,a,A){if(!(t===_r.Adfs||t===_r.Dsts)){if(e)try{const c=yc(e,a.base64Decode);if(c.uid&&c.utid)return`${c.uid}.${c.utid}`}catch{}r.warning("No client info in response")}return(A==null?void 0:A.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let a=!0;if(r){const A=e.idTokenClaims||{},c=t.idTokenClaims||{};a=A.iat===c.iat&&A.nonce===c.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&a}}/*! @azure/msal-common v15.13.2 2025-11-19 */function io(i,e){const t=US(i);try{const r=e(t);return JSON.parse(r)}catch{throw _e(Uh)}}function ao(i){if(!i.signin_state)return!1;const e=["kmsi","dvc_dmjd"];return i.signin_state.some(r=>e.includes(r.trim().toLowerCase()))}function US(i){if(!i)throw _e(Ky);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(i);if(!t||t.length<4)throw _e(Uh);return t[2]}function vb(i,e){if(e===0||Date.now()-3e5>i+e)throw _e(Jy)}/*! @azure/msal-common v15.13.2 2025-11-19 */function Om(i){if(!i)return i;let e=i.toLowerCase();return xr.endsWith(e,"?")?e=e.slice(0,-1):xr.endsWith(e,"?/")&&(e=e.slice(0,-2)),xr.endsWith(e,"/")||(e+="/"),e}function wb(i){return i.startsWith("#/")?i.substring(2):i.startsWith("#")||i.startsWith("?")?i.substring(1):i}function bc(i){if(!i||i.indexOf("=")<0)return null;try{const e=wb(i),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.ear_jwe||t.error||t.error_description||t.state)return t}catch{throw _e(Vy)}return null}function pA(i,e=!0,t){const r=new Array;return i.forEach((a,A)=>{!e&&t&&A in t?r.push(`${A}=${a}`):r.push(`${A}=${encodeURIComponent(a)}`)}),r.join("&")}function zm(i){if(!i)return i;const e=i.split("#")[0];try{const t=new URL(e),r=t.origin+t.pathname+t.search;return Om(r)}catch{return Om(e)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class Et{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Ht(lb);e.includes("#")||(this._urlString=Et.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return xr.endsWith(t,"?")?t=t.slice(0,-1):xr.endsWith(t,"?/")&&(t=t.slice(0,-2)),xr.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Ht(Wa)}if(!e.HostNameAndPort||!e.PathSegments)throw Ht(Wa);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Ht(Ab)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return Et.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===pi.COMMON||r[0]===pi.ORGANIZATIONS)&&(r[0]=e),Et.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Ht(Wa);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let a=r.AbsolutePath.split("/");return a=a.filter(A=>A&&A.length>0),r.PathSegments=a,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw Ht(Wa);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===Te.FORWARD_SLASH){const a=new Et(t).getUrlComponents();return a.Protocol+"//"+a.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Et(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!bc(e)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const Cb={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Km=Cb.endpointMetadata,Gh=Cb.instanceDiscoveryMetadata,Bb=new Set;Gh.metadata.forEach(i=>{i.aliases.forEach(e=>{Bb.add(e)})});function QS(i,e){var a;let t;const r=i.canonicalAuthority;if(r){const A=new Et(r).getUrlComponents().HostNameAndPort;t=Wm(A,(a=i.cloudDiscoveryMetadata)==null?void 0:a.metadata,fr.CONFIG,e)||Wm(A,Gh.metadata,fr.HARDCODED_VALUES,e)||i.knownAuthorities}return t||[]}function Wm(i,e,t,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${t}`),i&&e){const a=vc(e,i);if(a)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),a.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function RS(i){return vc(Gh.metadata,i)}function vc(i,e){for(let t=0;t<i.length;t++){const r=i[t];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v15.13.2 2025-11-19 */const wc="cache_quota_exceeded",Vh="cache_error_unknown";/*! @azure/msal-common v15.13.2 2025-11-19 */const up={[wc]:"Exceeded cache storage capacity.",[Vh]:"Unexpected error occurred when using cache storage."};class _s extends Lt{constructor(e,t){const r=t||(up[e]?up[e]:up[Vh]);super(`${e}: ${r}`),Object.setPrototypeOf(this,_s.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function Vp(i){return i instanceof Error?i.name==="QuotaExceededError"||i.name==="NS_ERROR_DOM_QUOTA_REACHED"||i.message.includes("exceeded the quota")?new _s(wc):new _s(i.name,i.message):new _s(Vh)}/*! @azure/msal-common v15.13.2 2025-11-19 */class $p{constructor(e,t,r,a,A){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(sb,Ph),this.staticAuthorityOptions=A,this.performanceClient=a}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(Object.keys(e).length===0||Object.values(e).every(a=>!a))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,t);return r.length>1?r.sort(A=>A.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,t){const r=this.getAccountsFilteredBy(e,t);return r.length>0?sn.getAccountInfo(r[0]):null}buildTenantProfiles(e,t,r){return e.flatMap(a=>this.getTenantProfilesFromAccountEntity(a,t,r==null?void 0:r.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,a,A){let c=null,p;if(A&&!this.tenantProfileMatchesFilter(r,A))return null;const u=this.getIdToken(e,a,t,r.tenantId);return u&&(p=io(u.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(p,A))?null:(c=Kh(e,r,p,u==null?void 0:u.secret),c)}getTenantProfilesFromAccountEntity(e,t,r,a){const A=sn.getAccountInfo(e);let c=A.tenantProfiles||new Map;const p=this.getTokenKeys();if(r){const f=c.get(r);if(f)c=new Map([[r,f]]);else return[]}const u=[];return c.forEach(f=>{const g=this.getTenantedAccountInfoByFilter(A,p,f,t,a);g&&u.push(g)}),u}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}async saveCacheRecord(e,t,r,a){var A;if(!e)throw _e(tb);try{e.account&&await this.setAccount(e.account,t,r),e.idToken&&(a==null?void 0:a.idToken)!==!1&&await this.setIdTokenCredential(e.idToken,t,r),e.accessToken&&(a==null?void 0:a.accessToken)!==!1&&await this.saveAccessToken(e.accessToken,t,r),e.refreshToken&&(a==null?void 0:a.refreshToken)!==!1&&await this.setRefreshTokenCredential(e.refreshToken,t,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(c){throw(A=this.commonLogger)==null||A.error("CacheManager.saveCacheRecord: failed"),c instanceof Lt?c:Vp(c)}}async saveAccessToken(e,t,r){const a={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},A=this.getTokenKeys(),c=xn.fromString(e.target);A.accessToken.forEach(p=>{if(!this.accessTokenKeyMatchesFilter(p,a,!1))return;const u=this.getAccessTokenCredential(p,t);u&&this.credentialMatchesFilter(u,a)&&xn.fromString(u.target).intersectingScopeSets(c)&&this.removeAccessToken(p,t)}),await this.setAccessTokenCredential(e,t,r)}getAccountsFilteredBy(e,t){const r=this.getAccountKeys(),a=[];return r.forEach(A=>{var f;const c=this.getAccount(A,t);if(!c||e.homeAccountId&&!this.matchHomeAccountId(c,e.homeAccountId)||e.username&&!this.matchUsername(c.username,e.username)||e.environment&&!this.matchEnvironment(c,e.environment)||e.realm&&!this.matchRealm(c,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(c,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(c,e.authorityType))return;const p={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},u=(f=c.tenantProfiles)==null?void 0:f.filter(g=>this.tenantProfileMatchesFilter(g,p));u&&u.length===0||a.push(c)}),a}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===Un.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===Mt.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach(a=>{if(!this.isAppMetadata(a))return;const A=this.getAppMetadata(a);A&&(e.environment&&!this.matchEnvironment(A,e.environment)||e.clientId&&!this.matchClientId(A,e.clientId)||(r[a]=A))}),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(a=>{if(!this.isAuthorityMetadata(a)||a.indexOf(this.clientId)===-1)return;const A=this.getAuthorityMetadata(a);A&&A.aliases.indexOf(e)!==-1&&(r=A)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,t){this.removeAccountContext(e,t);const r=this.getAccountKeys(),a=A=>A.includes(e.homeAccountId)&&A.includes(e.environment);r.filter(a).forEach(A=>{this.removeItem(A,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){const r=this.getTokenKeys(),a=A=>A.includes(e.homeAccountId)&&A.includes(e.environment);r.idToken.filter(a).forEach(A=>{this.removeIdToken(A,t)}),r.accessToken.filter(a).forEach(A=>{this.removeAccessToken(A,t)}),r.refreshToken.filter(a).forEach(A=>{this.removeRefreshToken(A,t)})}removeAccessToken(e,t){const r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==Un.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==Mt.POP)return;const a=r.keyId;a&&this.cryptoImpl.removeTokenBindingKey(a).catch(()=>{var A;this.commonLogger.error(`Failed to remove token binding key ${a}`,t),(A=this.performanceClient)==null||A.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,t,r,a,A){this.commonLogger.trace("CacheManager - getIdToken called");const c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Un.ID_TOKEN,clientId:this.clientId,realm:a},p=this.getIdTokensByFilter(c,t,r),u=p.size;if(u<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(u>1){let f=p;if(!a){const g=new Map;p.forEach((b,H)=>{b.realm===e.tenantId&&g.set(H,b)});const y=g.size;if(y<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),p.values().next().value;if(y===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),g.values().next().value;f=g}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),f.forEach((g,y)=>{this.removeIdToken(y,t)}),A&&t&&A.addFields({multiMatchedID:p.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),p.values().next().value}getIdTokensByFilter(e,t,r){const a=r&&r.idToken||this.getTokenKeys().idToken,A=new Map;return a.forEach(c=>{if(!this.idTokenKeyMatchesFilter(c,{clientId:this.clientId,...e}))return;const p=this.getIdTokenCredential(c,t);p&&this.credentialMatchesFilter(p,e)&&A.set(c,p)}),A}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,a){const A=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",A);const c=xn.createSearchScopes(t.scopes),p=t.authenticationScheme||Mt.BEARER,u=p.toLowerCase()!==Mt.BEARER.toLowerCase()?Un.ACCESS_TOKEN_WITH_AUTH_SCHEME:Un.ACCESS_TOKEN,f={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:u,clientId:this.clientId,realm:a||e.tenantId,target:c,tokenType:p,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},g=r&&r.accessToken||this.getTokenKeys().accessToken,y=[];g.forEach(H=>{if(this.accessTokenKeyMatchesFilter(H,f,!0)){const S=this.getAccessTokenCredential(H,A);S&&this.credentialMatchesFilter(S,f)&&y.push(S)}});const b=y.length;return b<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",A),null):b>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",A),y.forEach(H=>{this.removeAccessToken(this.generateCredentialKey(H),A)}),this.performanceClient.addFields({multiMatchedAT:y.length},A),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",A),y[0])}accessTokenKeyMatchesFilter(e,t,r){const a=e.toLowerCase();if(t.clientId&&a.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&a.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&a.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&a.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){const A=t.target.asArray();for(let c=0;c<A.length;c++){if(r&&!a.includes(A[c].toLowerCase()))return!1;if(!r&&a.includes(A[c].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){const r=this.getTokenKeys(),a=[];return r.accessToken.forEach(A=>{if(!this.accessTokenKeyMatchesFilter(A,e,!0))return;const c=this.getAccessTokenCredential(A,t);c&&this.credentialMatchesFilter(c,e)&&a.push(c)}),a}getRefreshToken(e,t,r,a,A){this.commonLogger.trace("CacheManager - getRefreshToken called");const c=t?gc:void 0,p={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Un.REFRESH_TOKEN,clientId:this.clientId,familyId:c},u=a&&a.refreshToken||this.getTokenKeys().refreshToken,f=[];u.forEach(y=>{if(this.refreshTokenKeyMatchesFilter(y,p)){const b=this.getRefreshTokenCredential(y,r);b&&this.credentialMatchesFilter(b,p)&&f.push(b)}});const g=f.length;return g<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(g>1&&A&&r&&A.addFields({multiMatchedRT:g},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),f[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),a=Object.keys(r).map(c=>r[c]),A=a.length;if(A<1)return null;if(A>1)throw _e(Xy);return a[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===gc)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){const r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var r;return t.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,t){return!!(e&&typeof e=="string"&&(t==null?void 0:t.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const a=QS(this.staticAuthorityOptions,this.commonLogger);if(a.includes(t)&&a.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==Un.ACCESS_TOKEN&&e.credentialType!==Un.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:xn.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(jh)!==-1}isAuthorityMetadata(e){return e.indexOf(fc.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${fc.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class MS extends $p{async setAccount(){throw _e(yt)}getAccount(){throw _e(yt)}async setIdTokenCredential(){throw _e(yt)}getIdTokenCredential(){throw _e(yt)}async setAccessTokenCredential(){throw _e(yt)}getAccessTokenCredential(){throw _e(yt)}async setRefreshTokenCredential(){throw _e(yt)}getRefreshTokenCredential(){throw _e(yt)}setAppMetadata(){throw _e(yt)}getAppMetadata(){throw _e(yt)}setServerTelemetry(){throw _e(yt)}getServerTelemetry(){throw _e(yt)}setAuthorityMetadata(){throw _e(yt)}getAuthorityMetadata(){throw _e(yt)}getAuthorityMetadataKeys(){throw _e(yt)}setThrottlingCache(){throw _e(yt)}getThrottlingCache(){throw _e(yt)}removeItem(){throw _e(yt)}getKeys(){throw _e(yt)}getAccountKeys(){throw _e(yt)}getTokenKeys(){throw _e(yt)}generateCredentialKey(){throw _e(yt)}generateAccountKey(){throw _e(yt)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const ee={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},LS={InProgress:1};/*! @azure/msal-common v15.13.2 2025-11-19 */class Gm{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class Sb{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:LS.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new Gm}}startPerformanceMeasurement(){return new Gm}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v15.13.2 2025-11-19 */const Ib={tokenRenewalOffsetSeconds:Oy,preventCorsPreflight:!1},DS={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Yt.Info,correlationId:Te.EMPTY_STRING},PS={claimsBasedCachingEnabled:!1},HS={async sendGetRequestAsync(){throw _e(yt)},async sendPostRequestAsync(){throw _e(yt)}},NS={sku:Te.SKU,version:Ph,cpu:Te.EMPTY_STRING,os:Te.EMPTY_STRING},_S={clientSecret:Te.EMPTY_STRING,clientAssertion:void 0},OS={azureCloudInstance:Hh.None,tenant:`${Te.DEFAULT_COMMON_TENANT}`},zS={application:{appName:"",appVersion:""}};function KS({authOptions:i,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:a,networkInterface:A,cryptoInterface:c,clientCredentials:p,libraryInfo:u,telemetry:f,serverTelemetryManager:g,persistencePlugin:y,serializableCache:b}){const H={...DS,...t};return{authOptions:WS(i),systemOptions:{...Ib,...e},loggerOptions:H,cacheOptions:{...PS,...r},storageInterface:a||new MS(i.clientId,xc,new ea(H),new Sb),networkInterface:A||HS,cryptoInterface:c||xc,clientCredentials:p||_S,libraryInfo:{...NS,...u},telemetry:{...zS,...f},serverTelemetryManager:g||null,persistencePlugin:y||null,serializableCache:b||null}}function WS(i){return{clientCapabilities:[],azureCloudOptions:OS,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...i}}function Eb(i){return i.authOptions.authority.options.protocolMode===sr.OIDC}/*! @azure/msal-common v15.13.2 2025-11-19 */const Or={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.13.2 2025-11-19 */const qi="client_id",kb="redirect_uri",GS="response_type",VS="response_mode",$S="grant_type",YS="claims",JS="scope",XS="refresh_token",qS="state",ZS="nonce",eI="prompt",tI="code",nI="code_challenge",rI="code_challenge_method",oI="code_verifier",iI="client-request-id",sI="x-client-SKU",aI="x-client-VER",AI="x-client-OS",lI="x-client-CPU",cI="x-client-current-telemetry",dI="x-client-last-telemetry",uI="x-ms-lib-capability",pI="x-app-name",hI="x-app-ver",gI="post_logout_redirect_uri",fI="id_token_hint",mI="client_secret",xI="client_assertion",yI="client_assertion_type",Tb="token_type",jb="req_cnf",Vm="return_spa_code",bI="nativebroker",vI="logout_hint",wI="sid",CI="login_hint",BI="domain_hint",SI="x-client-xtra-sku",Cc="brk_client_id",Bc="brk_redirect_uri",Yp="instance_aware",II="ear_jwk",EI="ear_jwe_crypto";/*! @azure/msal-common v15.13.2 2025-11-19 */function qc(i,e,t){if(!e)return;const r=i.get(qi);r&&i.has(Cc)&&(t==null||t.addFields({embeddedClientId:r,embeddedRedirectUri:i.get(kb)},e))}function $h(i,e){i.set(GS,e)}function kI(i,e){i.set(VS,e||lS.QUERY)}function TI(i){i.set(bI,"1")}function Yh(i,e,t=!0,r=Zs){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const a=t?[...e||[],...r]:e||[],A=new xn(a);i.set(JS,A.printScopes())}function Jh(i,e){i.set(qi,e)}function Xh(i,e){i.set(kb,e)}function jI(i,e){i.set(gI,e)}function FI(i,e){i.set(fI,e)}function UI(i,e){i.set(BI,e)}function jl(i,e){i.set(CI,e)}function Sc(i,e){i.set(Jn.CCS_HEADER,`UPN:${e}`)}function nA(i,e){i.set(Jn.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function $m(i,e){i.set(wI,e)}function qh(i,e,t){const r=PI(e,t);try{JSON.parse(r)}catch{throw Ht(Nh)}i.set(YS,r)}function Zh(i,e){i.set(iI,e)}function eg(i,e){i.set(sI,e.sku),i.set(aI,e.version),e.os&&i.set(AI,e.os),e.cpu&&i.set(lI,e.cpu)}function tg(i,e){e!=null&&e.appName&&i.set(pI,e.appName),e!=null&&e.appVersion&&i.set(hI,e.appVersion)}function QI(i,e){i.set(eI,e)}function Fb(i,e){e&&i.set(qS,e)}function RI(i,e){i.set(ZS,e)}function ng(i,e,t){if(e&&t)i.set(nI,e),i.set(rI,t);else throw Ht(_h)}function MI(i,e){i.set(tI,e)}function LI(i,e){i.set(XS,e)}function DI(i,e){i.set(oI,e)}function Ub(i,e){i.set(mI,e)}function Qb(i,e){e&&i.set(xI,e)}function Rb(i,e){e&&i.set(yI,e)}function Mb(i,e){i.set($S,e)}function rg(i){i.set(cS,"1")}function Lb(i){i.has(Yp)||i.set(Yp,"true")}function gi(i,e){Object.entries(e).forEach(([t,r])=>{!i.has(t)&&r&&i.set(t,r)})}function PI(i,e){let t;if(!i)t={};else try{t=JSON.parse(i)}catch{throw Ht(Nh)}return e&&e.length>0&&(t.hasOwnProperty(kl.ACCESS_TOKEN)||(t[kl.ACCESS_TOKEN]={}),t[kl.ACCESS_TOKEN][kl.XMS_CC]={values:e}),JSON.stringify(t)}function og(i,e){e&&(i.set(Tb,Mt.POP),i.set(jb,e))}function Db(i,e){e&&(i.set(Tb,Mt.SSH),i.set(jb,e))}function Pb(i,e){i.set(cI,e.generateCurrentRequestHeaderValue()),i.set(dI,e.generateLastRequestHeaderValue())}function Hb(i){i.set(uI,tA.X_MS_LIB_CAPABILITY_VALUE)}function HI(i,e){i.set(vI,e)}function Zc(i,e,t){i.has(Cc)||i.set(Cc,e),i.has(Bc)||i.set(Bc,t)}function NI(i,e){i.set(II,encodeURIComponent(e)),i.set(EI,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function _I(i,e){Object.entries(e).forEach(([t,r])=>{r&&i.set(t,r)})}/*! @azure/msal-common v15.13.2 2025-11-19 */function OI(i){return i.hasOwnProperty("authorization_endpoint")&&i.hasOwnProperty("token_endpoint")&&i.hasOwnProperty("issuer")&&i.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.13.2 2025-11-19 */function zI(i){return i.hasOwnProperty("tenant_discovery_endpoint")&&i.hasOwnProperty("metadata")}/*! @azure/msal-common v15.13.2 2025-11-19 */function KI(i){return i.hasOwnProperty("error")&&i.hasOwnProperty("error_description")}/*! @azure/msal-common v15.13.2 2025-11-19 */const yr=(i,e,t,r,a)=>(...A)=>{t.trace(`Executing function ${e}`);const c=r==null?void 0:r.startMeasurement(e,a);if(a){const p=e+"CallCount";r==null||r.incrementFields({[p]:1},a)}try{const p=i(...A);return c==null||c.end({success:!0}),t.trace(`Returning result from ${e}`),p}catch(p){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(p))}catch{t.trace("Unable to print error message.")}throw c==null||c.end({success:!1},p),p}},Ie=(i,e,t,r,a)=>(...A)=>{t.trace(`Executing function ${e}`);const c=r==null?void 0:r.startMeasurement(e,a);if(a){const p=e+"CallCount";r==null||r.incrementFields({[p]:1},a)}return r==null||r.setPreQueueTime(e,a),i(...A).then(p=>(t.trace(`Returning result from ${e}`),c==null||c.end({success:!0}),p)).catch(p=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(p))}catch{t.trace("Unable to print error message.")}throw c==null||c.end({success:!1},p),p})};/*! @azure/msal-common v15.13.2 2025-11-19 */class ed{constructor(e,t,r,a){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=a}async detectRegion(e,t){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(ee.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)t.region_source=ks.ENVIRONMENT_VARIABLE;else{const A=ed.IMDS_OPTIONS;try{const c=await Ie(this.getRegionFromIMDS.bind(this),ee.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Te.IMDS_VERSION,A);if(c.status===Ai.SUCCESS&&(r=c.body,t.region_source=ks.IMDS),c.status===Ai.BAD_REQUEST){const p=await Ie(this.getCurrentVersion.bind(this),ee.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(A);if(!p)return t.region_source=ks.FAILED_AUTO_DETECTION,null;const u=await Ie(this.getRegionFromIMDS.bind(this),ee.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(p,A);u.status===Ai.SUCCESS&&(r=u.body,t.region_source=ks.IMDS)}}catch{return t.region_source=ks.FAILED_AUTO_DETECTION,null}}return r||(t.region_source=ks.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,t){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(ee.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Te.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,Te.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;(t=this.performanceClient)==null||t.addQueueMeasurement(ee.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${Te.IMDS_ENDPOINT}?format=json`,e);return r.status===Ai.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}ed.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.13.2 2025-11-19 */function Ar(){return Math.round(new Date().getTime()/1e3)}function Ym(i){return i.getTime()/1e3}function Os(i){return i?new Date(Number(i)*1e3):new Date}function Ic(i,e){const t=Number(i)||0;return Ar()+e>t}function Jm(i,e){const t=Number(i)+e*24*60*60*1e3;return Date.now()>t}function WI(i){return Number(i)>Ar()}/*! @azure/msal-common v15.13.2 2025-11-19 */function td(i,e,t,r,a){return{credentialType:Un.ID_TOKEN,homeAccountId:i,environment:e,clientId:r,secret:t,realm:a,lastUpdatedAt:Date.now().toString()}}function nd(i,e,t,r,a,A,c,p,u,f,g,y,b,H,S){var Q,V;const L={homeAccountId:i,credentialType:Un.ACCESS_TOKEN,secret:t,cachedAt:Ar().toString(),expiresOn:c.toString(),extendedExpiresOn:p.toString(),environment:e,clientId:r,realm:a,target:A,tokenType:g||Mt.BEARER,lastUpdatedAt:Date.now().toString()};if(y&&(L.userAssertionHash=y),f&&(L.refreshOn=f.toString()),H&&(L.requestedClaims=H,L.requestedClaimsHash=S),((Q=L.tokenType)==null?void 0:Q.toLowerCase())!==Mt.BEARER.toLowerCase())switch(L.credentialType=Un.ACCESS_TOKEN_WITH_AUTH_SCHEME,L.tokenType){case Mt.POP:const D=io(t,u);if(!((V=D==null?void 0:D.cnf)!=null&&V.kid))throw _e(nb);L.keyId=D.cnf.kid;break;case Mt.SSH:L.keyId=b}return L}function Nb(i,e,t,r,a,A,c){const p={credentialType:Un.REFRESH_TOKEN,homeAccountId:i,environment:e,clientId:r,secret:t,lastUpdatedAt:Date.now().toString()};return A&&(p.userAssertionHash=A),a&&(p.familyId=a),c&&(p.expiresOn=c.toString()),p}function rd(i){return i.hasOwnProperty("homeAccountId")&&i.hasOwnProperty("environment")&&i.hasOwnProperty("credentialType")&&i.hasOwnProperty("clientId")&&i.hasOwnProperty("secret")}function Xm(i){return i?rd(i)&&i.hasOwnProperty("realm")&&i.hasOwnProperty("target")&&(i.credentialType===Un.ACCESS_TOKEN||i.credentialType===Un.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function GI(i){return i?rd(i)&&i.hasOwnProperty("realm")&&i.credentialType===Un.ID_TOKEN:!1}function qm(i){return i?rd(i)&&i.credentialType===Un.REFRESH_TOKEN:!1}function VI(i,e){const t=i.indexOf(jn.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function $I(i,e){let t=!1;i&&(t=i.indexOf(tA.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function YI({environment:i,clientId:e}){return[jh,i,e].join(uA.CACHE_KEY_SEPARATOR).toLowerCase()}function JI(i,e){return e?i.indexOf(jh)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function XI(i,e){return e?i.indexOf(fc.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function Zm(){return Ar()+fc.REFRESH_TIME_SECONDS}function Fl(i,e,t){i.authorization_endpoint=e.authorization_endpoint,i.token_endpoint=e.token_endpoint,i.end_session_endpoint=e.end_session_endpoint,i.issuer=e.issuer,i.endpointsFromNetwork=t,i.jwks_uri=e.jwks_uri}function pp(i,e,t){i.aliases=e.aliases,i.preferred_cache=e.preferred_cache,i.preferred_network=e.preferred_network,i.aliasesFromNetwork=t}function ex(i){return i.expiresAt<=Ar()}/*! @azure/msal-common v15.13.2 2025-11-19 */class zn{constructor(e,t,r,a,A,c,p,u){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=a,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=A,this.performanceClient=p,this.correlationId=c,this.managedIdentity=u||!1,this.regionDiscovery=new ed(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Te.CIAM_AUTH_URL))return _r.Ciam;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case Te.ADFS:return _r.Adfs;case Te.DSTS:return _r.Dsts}return _r.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Et(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw _e(So)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw _e(So)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw _e(So)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw _e(ib);return this.replacePath(this.metadata.end_session_endpoint)}else throw _e(So)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw _e(So)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw _e(So)}canReplaceTenant(e){return e.PathSegments.length===1&&!zn.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===_r.Default&&this.protocolMode!==sr.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const a=new Et(this.metadata.canonical_authority).getUrlComponents(),A=a.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((p,u)=>{let f=A[u];if(u===0&&this.canReplaceTenant(a)){const g=new Et(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];f!==g&&(this.logger.verbose(`Replacing tenant domain name ${f} with id ${g}`),f=g)}p!==f&&(t=t.replace(`/${f}/`,`/${p}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===_r.Adfs||this.protocolMode===sr.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var a,A;(a=this.performanceClient)==null||a.addQueueMeasurement(ee.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await Ie(this.updateCloudDiscoveryMetadata.bind(this),ee.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await Ie(this.updateEndpointMetadata.bind(this),ee.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),(A=this.performanceClient)==null||A.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Zm(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==fr.CACHE&&(r==null?void 0:r.source)!==fr.CACHE&&(e.expiresAt=Zm(),e.canonical_authority=this.canonicalAuthority);const a=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(a,e),this.metadata=e}async updateEndpointMetadata(e){var a,A,c;(a=this.performanceClient)==null||a.addQueueMeasurement(ee.AuthorityUpdateEndpointMetadata,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===fr.HARDCODED_VALUES&&(A=this.authorityOptions.azureRegionConfiguration)!=null&&A.azureRegion&&t.metadata){const p=await Ie(this.updateMetadataWithRegionalInformation.bind(this),ee.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);Fl(e,p,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=await Ie(this.getEndpointMetadataFromNetwork.bind(this),ee.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(c=this.authorityOptions.azureRegionConfiguration)!=null&&c.azureRegion&&(r=await Ie(this.updateMetadataWithRegionalInformation.bind(this),ee.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Fl(e,r,!0),fr.NETWORK;throw _e(Gy,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Fl(e,t,!1),{source:fr.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const a=this.getEndpointMetadataFromHardcodedValues();if(a)return Fl(e,a,!1),{source:fr.HARDCODED_VALUES,metadata:a};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=ex(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:fr.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Et(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Ht(pb)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(ee.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const a=await this.networkInterface.sendGetRequestAsync(t,e);return OI(a.body)?a.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(a){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${a}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Km?Km[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,a,A;(r=this.performanceClient)==null||r.addQueueMeasurement(ee.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const t=(a=this.authorityOptions.azureRegionConfiguration)==null?void 0:a.azureRegion;if(t){if(t!==Te.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=dp.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,zn.replaceWithRegionalInformation(e,t);const c=await Ie(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),ee.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((A=this.authorityOptions.azureRegionConfiguration)==null?void 0:A.environmentRegion,this.regionDiscoveryMetadata);if(c)return this.regionDiscoveryMetadata.region_outcome=dp.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=c,zn.replaceWithRegionalInformation(e,c);this.regionDiscoveryMetadata.region_outcome=dp.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(ee.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const r=await Ie(this.getCloudDiscoveryMetadataFromNetwork.bind(this),ee.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return pp(e,r,!0),fr.NETWORK;throw Ht(hb)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Te.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Te.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Te.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),pp(e,t,!1),fr.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const a=RS(this.hostnameAndPort);if(a)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),pp(e,a,!1),fr.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=ex(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),fr.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===_r.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),zn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=vc(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Ht(Oh)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),zn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(ee.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${Te.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let r=null;try{const A=await this.networkInterface.sendGetRequestAsync(e,t);let c,p;if(zI(A.body))c=A.body,p=c.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${c.tenant_discovery_endpoint}`);else if(KI(A.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${A.status}`),c=A.body,c.error===Te.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${c.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${c.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),p=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=vc(p,this.hostnameAndPort)}catch(A){if(A instanceof Lt)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${A.errorCode}
Error Description: ${A.errorMessage}`);else{const c=A;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${c.name}
Error Description: ${c.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=zn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&Et.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==Hh.None){const a=t.tenant?t.tenant:Te.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${a}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Te.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw _e(So)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Bb.has(e)}static isPublicCloudAuthority(e){return Te.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const a=new Et(e);a.validateAsUri();const A=a.getUrlComponents();let c=`${t}.${A.HostNameAndPort}`;this.isPublicCloudAuthority(A.HostNameAndPort)&&(c=`${t}.${Te.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const p=Et.constructAuthorityUriFromObject({...a.getUrlComponents(),HostNameAndPort:c}).urlString;return r?`${p}?${r}`:p}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=zn.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=zn.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=zn.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const a=new Et(e).getUrlComponents();if(a.PathSegments.length===0&&a.HostNameAndPort.endsWith(Te.CIAM_AUTH_URL)){const A=a.HostNameAndPort.split(".")[0];t=`${t}${A}${Te.AAD_TENANT_DOMAIN_SUFFIX}`}return t}}zn.reservedTenantDomains=new Set(["{tenant}","{tenantid}",pi.COMMON,pi.CONSUMERS,pi.ORGANIZATIONS]);function qI(i){var a;const r=(a=new Et(i).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:a.toLowerCase();switch(r){case pi.COMMON:case pi.ORGANIZATIONS:case pi.CONSUMERS:return;default:return r}}function _b(i){return i.endsWith(Te.FORWARD_SLASH)?i:`${i}${Te.FORWARD_SLASH}`}function ZI(i){const e=i.cloudDiscoveryMetadata;let t;if(e)try{t=JSON.parse(e)}catch{throw Ht(Oh)}return{canonicalAuthority:i.authority?_b(i.authority):void 0,knownAuthorities:i.knownAuthorities,cloudDiscoveryMetadata:t}}/*! @azure/msal-common v15.13.2 2025-11-19 */async function Ob(i,e,t,r,a,A,c){c==null||c.addQueueMeasurement(ee.AuthorityFactoryCreateDiscoveredInstance,A);const p=zn.transformCIAMAuthority(_b(i)),u=new zn(p,e,t,r,a,A,c);try{return await Ie(u.resolveEndpointsAsync.bind(u),ee.AuthorityResolveEndpointsAsync,a,c,A)(),u}catch{throw _e(So)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class rs extends Lt{constructor(e,t,r,a,A){super(e,t,r),this.name="ServerError",this.errorNo=a,this.status=A,Object.setPrototypeOf(this,rs.prototype)}}/*! @azure/msal-common v15.13.2 2025-11-19 */function od(i,e,t){var r;return{clientId:i,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:t,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||((r=e.tokenBodyParameters)==null?void 0:r.clientId)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class ro{static generateThrottlingStorageKey(e){return`${tA.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t,r){var c;const a=ro.generateThrottlingStorageKey(t),A=e.getThrottlingCache(a);if(A){if(A.throttleTime<Date.now()){e.removeItem(a,r);return}throw new rs(((c=A.errorCodes)==null?void 0:c.join(" "))||Te.EMPTY_STRING,A.errorMessage,A.subError)}}static postProcess(e,t,r,a){if(ro.checkResponseStatus(r)||ro.checkResponseForRetryAfter(r)){const A={throttleTime:ro.calculateThrottleTime(parseInt(r.headers[Jn.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(ro.generateThrottlingStorageKey(t),A,a)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Jn.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||tA.DEFAULT_THROTTLE_TIME_SECONDS),r+tA.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,a){const A=od(t,r,a),c=this.generateThrottlingStorageKey(A);e.removeItem(c,r.correlationId)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class id extends Lt{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,id.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}function Ga(i,e,t,r){return i.errorMessage=`${i.errorMessage}, additionalErrorInfo: error.name:${r==null?void 0:r.name}, error.message:${r==null?void 0:r.message}`,new id(i,e,t)}/*! @azure/msal-common v15.13.2 2025-11-19 */class ig{constructor(e,t){this.config=KS(e),this.logger=new ea(this.config.loggerOptions,sb,Ph),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[Jn.CONTENT_TYPE]=Te.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Or.HOME_ACCOUNT_ID:try{const r=Ns(e.credential);t[Jn.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Or.UPN:t[Jn.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}async executePostToTokenEndpoint(e,t,r,a,A,c){var u;c&&((u=this.performanceClient)==null||u.addQueueMeasurement(c,A));const p=await this.sendPostRequest(a,e,{body:t,headers:r},A);return this.config.serverTelemetryManager&&p.status<500&&p.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),p}async sendPostRequest(e,t,r,a){var c,p,u;ro.preProcess(this.cacheManager,e,a);let A;try{A=await Ie(this.networkClient.sendPostRequestAsync.bind(this.networkClient),ee.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,a)(t,r);const f=A.headers||{};(p=this.performanceClient)==null||p.addFields({refreshTokenSize:((c=A.body.refresh_token)==null?void 0:c.length)||0,httpVerToken:f[Jn.X_MS_HTTP_VERSION]||"",requestId:f[Jn.X_MS_REQUEST_ID]||""},a)}catch(f){if(f instanceof id){const g=f.responseHeaders;throw g&&((u=this.performanceClient)==null||u.addFields({httpVerToken:g[Jn.X_MS_HTTP_VERSION]||"",requestId:g[Jn.X_MS_REQUEST_ID]||"",contentTypeHeader:g[Jn.CONTENT_TYPE]||void 0,contentLengthHeader:g[Jn.CONTENT_LENGTH]||void 0,httpStatus:f.httpStatus},a)),f.error}throw f instanceof Lt?f:_e(Wy)}return ro.postProcess(this.cacheManager,e,A,a),A}async updateAuthority(e,t){var A;(A=this.performanceClient)==null||A.addQueueMeasurement(ee.UpdateTokenEndpointAuthority,t);const r=`https://${e}/${this.authority.tenant}/`,a=await Ob(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=a}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&Zc(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&gi(t,e.tokenQueryParameters),Zh(t,e.correlationId),qc(t,e.correlationId,this.performanceClient),pA(t)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const Ec="no_tokens_found",zb="native_account_unavailable",sg="refresh_token_expired",ag="ux_not_allowed",eE="interaction_required",tE="consent_required",nE="login_required",sd="bad_token";/*! @azure/msal-common v15.13.2 2025-11-19 */const tx=[eE,tE,nE,sd,ag],rE=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],oE={[Ec]:"No refresh token found in the cache. Please sign-in.",[zb]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[sg]:"Refresh token has expired.",[sd]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[ag]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class Wr extends Lt{constructor(e,t,r,a,A,c,p,u){super(e,t,r),Object.setPrototypeOf(this,Wr.prototype),this.timestamp=a||Te.EMPTY_STRING,this.traceId=A||Te.EMPTY_STRING,this.correlationId=c||Te.EMPTY_STRING,this.claims=p||Te.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=u}}function Kb(i,e,t){const r=!!i&&tx.indexOf(i)>-1,a=!!t&&rE.indexOf(t)>-1,A=!!e&&tx.some(c=>e.indexOf(c)>-1);return r||A||a}function kc(i){return new Wr(i,oE[i])}/*! @azure/msal-common v15.13.2 2025-11-19 */class ta{static setRequestState(e,t,r){const a=ta.generateLibraryState(e,r);return t?`${a}${Te.RESOURCE_DELIM}${t}`:a}static generateLibraryState(e,t){if(!e)throw _e(Wp);const r={id:e.createNewGuid()};t&&(r.meta=t);const a=JSON.stringify(r);return e.base64Encode(a)}static parseRequestState(e,t){if(!e)throw _e(Wp);if(!t)throw _e($s);try{const r=t.split(Te.RESOURCE_DELIM),a=r[0],A=r.length>1?r.slice(1).join(Te.RESOURCE_DELIM):Te.EMPTY_STRING,c=e.base64Decode(a),p=JSON.parse(c);return{userRequestState:A||Te.EMPTY_STRING,libraryState:p}}catch{throw _e($s)}}}/*! @azure/msal-common v15.13.2 2025-11-19 */const iE={SW:"sw"};class Ys{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var A;(A=this.performanceClient)==null||A.addQueueMeasurement(ee.PopTokenGenerateCnf,e.correlationId);const r=await Ie(this.generateKid.bind(this),ee.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),a=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:a}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(ee.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:iE.SW}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,a){const{resourceRequestMethod:A,resourceRequestUri:c,shrClaims:p,shrNonce:u,shrOptions:f}=r,g=c?new Et(c):void 0,y=g==null?void 0:g.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:Ar(),m:A==null?void 0:A.toUpperCase(),u:y==null?void 0:y.HostNameAndPort,nonce:u||this.cryptoUtils.createNewGuid(),p:y==null?void 0:y.AbsolutePath,q:y!=null&&y.QueryString?[[],y.QueryString]:void 0,client_claims:p||void 0,...a},t,f,r.correlationId)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class sE{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.13.2 2025-11-19 */class Zi{constructor(e,t,r,a,A,c,p){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=a,this.serializableCache=A,this.persistencePlugin=c,this.performanceClient=p}validateTokenResponse(e,t){var r;if(e.error||e.error_description||e.suberror){const a=`Error(s): ${e.error_codes||Te.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Te.NOT_AVAILABLE} - Description: ${e.error_description||Te.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Te.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Te.NOT_AVAILABLE}`,A=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,c=new rs(e.error,a,e.suberror,A,e.status);if(t&&e.status&&e.status>=Ai.SERVER_ERROR_RANGE_START&&e.status<=Ai.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${c}`);return}else if(t&&e.status&&e.status>=Ai.CLIENT_ERROR_RANGE_START&&e.status<=Ai.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${c}`);return}throw Kb(e.error,e.error_description,e.suberror)?new Wr(e.error,e.error_description,e.suberror,e.timestamp||Te.EMPTY_STRING,e.trace_id||Te.EMPTY_STRING,e.correlation_id||Te.EMPTY_STRING,e.claims||Te.EMPTY_STRING,A):c}}async handleServerTokenResponse(e,t,r,a,A,c,p,u,f){var S;(S=this.performanceClient)==null||S.addQueueMeasurement(ee.HandleServerTokenResponse,e.correlation_id);let g;if(e.id_token){if(g=io(e.id_token||Te.EMPTY_STRING,this.cryptoObj.base64Decode),A&&A.nonce&&g.nonce!==A.nonce)throw _e(Yy);if(a.maxAge||a.maxAge===0){const L=g.auth_time;if(!L)throw _e(Qh);vb(L,a.maxAge)}}this.homeAccountIdentifier=sn.generateHomeAccountId(e.client_info||Te.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,g);let y;A&&A.state&&(y=ta.parseRequestState(this.cryptoObj,A.state)),e.key_id=e.key_id||a.sshKid||void 0;const b=this.generateCacheRecord(e,t,r,a,g,c,A);let H;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),H=new sE(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(H)),p&&!u&&b.account){const L=this.cacheStorage.generateAccountKey(sn.getAccountInfo(b.account));if(!this.cacheStorage.getAccount(L,a.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Zi.generateAuthenticationResult(this.cryptoObj,t,b,!1,a,g,y,void 0,f)}await this.cacheStorage.saveCacheRecord(b,a.correlationId,ao(g||{}),a.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&H&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(H))}return Zi.generateAuthenticationResult(this.cryptoObj,t,b,!1,a,g,y,e,f)}generateCacheRecord(e,t,r,a,A,c,p){const u=t.getPreferredCache();if(!u)throw _e(Mh);const f=Wh(A);let g,y;e.id_token&&A&&(g=td(this.homeAccountIdentifier,u,e.id_token,this.clientId,f||""),y=Ag(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,a.correlationId,A,e.client_info,u,f,p,void 0,this.logger));let b=null;if(e.access_token){const L=e.scope?xn.fromString(e.scope):new xn(a.scopes||[]),Q=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,V=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,D=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,te=r+Q,J=te+V,M=D&&D>0?r+D:void 0;b=nd(this.homeAccountIdentifier,u,e.access_token,this.clientId,f||t.tenant||"",L.printScopes(),te,J,this.cryptoObj.base64Decode,M,e.token_type,c,e.key_id,a.claims,a.requestedClaimsHash)}let H=null;if(e.refresh_token){let L;if(e.refresh_token_expires_in){const Q=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;L=r+Q}H=Nb(this.homeAccountIdentifier,u,e.refresh_token,this.clientId,e.foci,c,L)}let S=null;return e.foci&&(S={clientId:this.clientId,environment:u,familyId:e.foci}),{account:y,idToken:g,accessToken:b,refreshToken:H,appMetadata:S}}static async generateAuthenticationResult(e,t,r,a,A,c,p,u,f){var te,J,M,N,X;let g=Te.EMPTY_STRING,y=[],b=null,H,S,L=Te.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Mt.POP&&!A.popKid){const Be=new Ys(e),{secret:Ae,keyId:le}=r.accessToken;if(!le)throw _e(Lh);g=await Be.signPopToken(Ae,le,A)}else g=r.accessToken.secret;y=xn.fromString(r.accessToken.target).asArray(),b=Os(r.accessToken.expiresOn),H=Os(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(S=Os(r.accessToken.refreshOn))}r.appMetadata&&(L=r.appMetadata.familyId===gc?gc:"");const Q=(c==null?void 0:c.oid)||(c==null?void 0:c.sub)||"",V=(c==null?void 0:c.tid)||"";u!=null&&u.spa_accountid&&r.account&&(r.account.nativeAccountId=u==null?void 0:u.spa_accountid);const D=r.account?Kh(sn.getAccountInfo(r.account),void 0,c,(te=r.idToken)==null?void 0:te.secret):null;return{authority:t.canonicalAuthority,uniqueId:Q,tenantId:V,scopes:y,account:D,idToken:((J=r==null?void 0:r.idToken)==null?void 0:J.secret)||"",idTokenClaims:c||{},accessToken:g,fromCache:a,expiresOn:b,extExpiresOn:H,refreshOn:S,correlationId:A.correlationId,requestId:f||Te.EMPTY_STRING,familyId:L,tokenType:((M=r.accessToken)==null?void 0:M.tokenType)||Te.EMPTY_STRING,state:p?p.userRequestState:Te.EMPTY_STRING,cloudGraphHostName:((N=r.account)==null?void 0:N.cloudGraphHostName)||Te.EMPTY_STRING,msGraphHost:((X=r.account)==null?void 0:X.msGraphHost)||Te.EMPTY_STRING,code:u==null?void 0:u.spa_code,fromNativeBroker:!1}}}function Ag(i,e,t,r,a,A,c,p,u,f,g,y){y==null||y.verbose("setCachedAccount called");const H=i.getAccountKeys().find(D=>D.startsWith(t));let S=null;H&&(S=i.getAccount(H,a));const L=S||sn.createAccount({homeAccountId:t,idTokenClaims:A,clientInfo:c,environment:p,cloudGraphHostName:f==null?void 0:f.cloud_graph_host_name,msGraphHost:f==null?void 0:f.msgraph_host,nativeAccountId:g},e,r),Q=L.tenantProfiles||[],V=u||L.realm;if(V&&!Q.find(D=>D.tenantId===V)){const D=Xc(t,L.localAccountId,V,A);Q.push(D)}return L.tenantProfiles=Q,L}/*! @azure/msal-common v15.13.2 2025-11-19 */async function Wb(i,e,t){return typeof i=="string"?i:i({clientId:e,tokenEndpoint:t})}/*! @azure/msal-common v15.13.2 2025-11-19 */class Gb extends ig{constructor(e,t){var r;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async acquireToken(e,t){var p,u;if((p=this.performanceClient)==null||p.addQueueMeasurement(ee.AuthClientAcquireToken,e.correlationId),!e.code)throw _e(qy);const r=Ar(),a=await Ie(this.executeTokenRequest.bind(this),ee.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),A=(u=a.headers)==null?void 0:u[Jn.X_MS_REQUEST_ID],c=new Zi(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return c.validateTokenResponse(a.body),Ie(c.handleServerTokenResponse.bind(c),ee.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(a.body,this.authority,r,e,t,void 0,void 0,void 0,A)}getLogoutUri(e){if(!e)throw Ht(ub);const t=this.createLogoutUrlQueryString(e);return Et.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var f;(f=this.performanceClient)==null||f.addQueueMeasurement(ee.AuthClientExecuteTokenRequest,t.correlationId);const r=this.createTokenQueryParameters(t),a=Et.appendQueryString(e.tokenEndpoint,r),A=await Ie(this.createTokenRequestBody.bind(this),ee.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t);let c;if(t.clientInfo)try{const g=yc(t.clientInfo,this.cryptoUtils.base64Decode);c={credential:`${g.uid}${uA.CLIENT_INFO_SEPARATOR}${g.utid}`,type:Or.HOME_ACCOUNT_ID}}catch(g){this.logger.verbose("Could not parse client info for CCS Header: "+g)}const p=this.createTokenRequestHeaders(c||t.ccsCredential),u=od(this.config.authOptions.clientId,t);return Ie(this.executePostToTokenEndpoint.bind(this),ee.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(a,A,p,u,t.correlationId,ee.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var a,A;(a=this.performanceClient)==null||a.addQueueMeasurement(ee.AuthClientCreateTokenRequestBody,e.correlationId);const t=new Map;if(Jh(t,e.embeddedClientId||((A=e.tokenBodyParameters)==null?void 0:A[qi])||this.config.authOptions.clientId),this.includeRedirectUri)Xh(t,e.redirectUri);else if(!e.redirectUri)throw Ht(ab);if(Yh(t,e.scopes,!0,this.oidcDefaultScopes),MI(t,e.code),eg(t,this.config.libraryInfo),tg(t,this.config.telemetry.application),Hb(t),this.serverTelemetryManager&&!Eb(this.config)&&Pb(t,this.serverTelemetryManager),e.codeVerifier&&DI(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&Ub(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const c=this.config.clientCredentials.clientAssertion;Qb(t,await Wb(c.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Rb(t,c.assertionType)}if(Mb(t,_y.AUTHORIZATION_CODE_GRANT),rg(t),e.authenticationScheme===Mt.POP){const c=new Ys(this.cryptoUtils,this.performanceClient);let p;e.popKid?p=this.cryptoUtils.encodeKid(e.popKid):p=(await Ie(c.generateCnf.bind(c),ee.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,og(t,p)}else if(e.authenticationScheme===Mt.SSH)if(e.sshJwk)Db(t,e.sshJwk);else throw Ht(Jc);(!xr.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&qh(t,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const c=yc(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${c.uid}${uA.CLIENT_INFO_SEPARATOR}${c.utid}`,type:Or.HOME_ACCOUNT_ID}}catch(c){this.logger.verbose("Could not parse client info for CCS Header: "+c)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case Or.HOME_ACCOUNT_ID:try{const c=Ns(r.credential);nA(t,c)}catch(c){this.logger.verbose("Could not parse home account ID for CCS Header: "+c)}break;case Or.UPN:Sc(t,r.credential);break}return e.embeddedClientId&&Zc(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&gi(t,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[Vm])&&gi(t,{[Vm]:"1"}),qc(t,e.correlationId,this.performanceClient),pA(t)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&jI(t,e.postLogoutRedirectUri),e.correlationId&&Zh(t,e.correlationId),e.idTokenHint&&FI(t,e.idTokenHint),e.state&&Fb(t,e.state),e.logoutHint&&HI(t,e.logoutHint),e.extraQueryParameters&&gi(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&Lb(t),pA(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const aE=300;class AE extends ig{constructor(e,t){super(e,t)}async acquireToken(e){var c,p;(c=this.performanceClient)==null||c.addQueueMeasurement(ee.RefreshTokenClientAcquireToken,e.correlationId);const t=Ar(),r=await Ie(this.executeTokenRequest.bind(this),ee.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),a=(p=r.headers)==null?void 0:p[Jn.X_MS_REQUEST_ID],A=new Zi(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return A.validateTokenResponse(r.body),Ie(A.handleServerTokenResponse.bind(A),ee.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,a)}async acquireTokenByRefreshToken(e){var r;if(!e)throw Ht(db);if((r=this.performanceClient)==null||r.addQueueMeasurement(ee.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw _e(Rh);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await Ie(this.acquireTokenWithCachedRefreshToken.bind(this),ee.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(a){const A=a instanceof Wr&&a.errorCode===Ec,c=a instanceof rs&&a.errorCode===Pm.INVALID_GRANT_ERROR&&a.subError===Pm.CLIENT_MISMATCH_ERROR;if(A||c)return Ie(this.acquireTokenWithCachedRefreshToken.bind(this),ee.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw a}return Ie(this.acquireTokenWithCachedRefreshToken.bind(this),ee.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){var A,c,p;(A=this.performanceClient)==null||A.addQueueMeasurement(ee.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=yr(this.cacheManager.getRefreshToken.bind(this.cacheManager),ee.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!r)throw kc(Ec);if(r.expiresOn&&Ic(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||aE))throw(c=this.performanceClient)==null||c.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),kc(sg);const a={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Mt.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Or.HOME_ACCOUNT_ID}};try{return await Ie(this.acquireToken.bind(this),ee.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(a)}catch(u){if(u instanceof Wr&&((p=this.performanceClient)==null||p.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),u.subError===sd)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const f=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(f,e.correlationId)}throw u}}async executeTokenRequest(e,t){var u;(u=this.performanceClient)==null||u.addQueueMeasurement(ee.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),a=Et.appendQueryString(t.tokenEndpoint,r),A=await Ie(this.createTokenRequestBody.bind(this),ee.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),c=this.createTokenRequestHeaders(e.ccsCredential),p=od(this.config.authOptions.clientId,e);return Ie(this.executePostToTokenEndpoint.bind(this),ee.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(a,A,c,p,e.correlationId,ee.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var r,a,A;(r=this.performanceClient)==null||r.addQueueMeasurement(ee.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const t=new Map;if(Jh(t,e.embeddedClientId||((a=e.tokenBodyParameters)==null?void 0:a[qi])||this.config.authOptions.clientId),e.redirectUri&&Xh(t,e.redirectUri),Yh(t,e.scopes,!0,(A=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:A.defaultScopes),Mb(t,_y.REFRESH_TOKEN_GRANT),rg(t),eg(t,this.config.libraryInfo),tg(t,this.config.telemetry.application),Hb(t),this.serverTelemetryManager&&!Eb(this.config)&&Pb(t,this.serverTelemetryManager),LI(t,e.refreshToken),this.config.clientCredentials.clientSecret&&Ub(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const c=this.config.clientCredentials.clientAssertion;Qb(t,await Wb(c.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Rb(t,c.assertionType)}if(e.authenticationScheme===Mt.POP){const c=new Ys(this.cryptoUtils,this.performanceClient);let p;e.popKid?p=this.cryptoUtils.encodeKid(e.popKid):p=(await Ie(c.generateCnf.bind(c),ee.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,og(t,p)}else if(e.authenticationScheme===Mt.SSH)if(e.sshJwk)Db(t,e.sshJwk);else throw Ht(Jc);if((!xr.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&qh(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Or.HOME_ACCOUNT_ID:try{const c=Ns(e.ccsCredential.credential);nA(t,c)}catch(c){this.logger.verbose("Could not parse home account ID for CCS Header: "+c)}break;case Or.UPN:Sc(t,e.ccsCredential.credential);break}return e.embeddedClientId&&Zc(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&gi(t,e.tokenBodyParameters),qc(t,e.correlationId,this.performanceClient),pA(t)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class lE extends ig{constructor(e,t){super(e,t)}async acquireCachedToken(e){var u;(u=this.performanceClient)==null||u.addQueueMeasurement(ee.SilentFlowClientAcquireCachedToken,e.correlationId);let t=Ni.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!xr.isEmptyObj(e.claims))throw this.setCacheOutcome(Ni.FORCE_REFRESH_OR_CLAIMS,e.correlationId),_e(hi);if(!e.account)throw _e(Rh);const r=e.account.tenantId||qI(e.authority),a=this.cacheManager.getTokenKeys(),A=this.cacheManager.getAccessToken(e.account,e,a,r);if(A){if(WI(A.cachedAt)||Ic(A.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Ni.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),_e(hi);A.refreshOn&&Ic(A.refreshOn,0)&&(t=Ni.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Ni.NO_CACHED_ACCESS_TOKEN,e.correlationId),_e(hi);const c=e.authority||this.authority.getPreferredCache(),p={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:A,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,a,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(c)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Ie(this.generateResultFromCacheRecord.bind(this),ee.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(p,e),t]}setCacheOutcome(e,t){var r,a;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(a=this.performanceClient)==null||a.addFields({cacheOutcome:e},t),e!==Ni.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(ee.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=io(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){const A=r==null?void 0:r.auth_time;if(!A)throw _e(Qh);vb(A,t.maxAge)}return Zi.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const cE={sendGetRequestAsync:()=>Promise.reject(_e(yt)),sendPostRequestAsync:()=>Promise.reject(_e(yt))};/*! @azure/msal-common v15.13.2 2025-11-19 */function dE(i,e,t,r){var p,u;const a=e.correlationId,A=new Map;Jh(A,e.embeddedClientId||((p=e.extraQueryParameters)==null?void 0:p[qi])||i.clientId);const c=[...e.scopes||[],...e.extraScopesToConsent||[]];if(Yh(A,c,!0,(u=i.authority.options.OIDCOptions)==null?void 0:u.defaultScopes),Xh(A,e.redirectUri),Zh(A,a),kI(A,e.responseMode),rg(A),e.prompt&&(QI(A,e.prompt),r==null||r.addFields({prompt:e.prompt},a)),e.domainHint&&(UI(A,e.domainHint),r==null||r.addFields({domainHintFromRequest:!0},a)),e.prompt!==Rn.SELECT_ACCOUNT)if(e.sid&&e.prompt===Rn.NONE)t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),$m(A,e.sid),r==null||r.addFields({sidFromRequest:!0},a);else if(e.account){const f=hE(e.account);let g=gE(e.account);if(g&&e.domainHint&&(t.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),g=null),g){t.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),jl(A,g),r==null||r.addFields({loginHintFromClaim:!0},a);try{const y=Ns(e.account.homeAccountId);nA(A,y)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(f&&e.prompt===Rn.NONE){t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),$m(A,f),r==null||r.addFields({sidFromClaim:!0},a);try{const y=Ns(e.account.homeAccountId);nA(A,y)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),jl(A,e.loginHint),Sc(A,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},a);else if(e.account.username){t.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),jl(A,e.account.username),r==null||r.addFields({loginHintFromUpn:!0},a);try{const y=Ns(e.account.homeAccountId);nA(A,y)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),jl(A,e.loginHint),Sc(A,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},a));else t.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&RI(A,e.nonce),e.state&&Fb(A,e.state),(e.claims||i.clientCapabilities&&i.clientCapabilities.length>0)&&qh(A,e.claims,i.clientCapabilities),e.embeddedClientId&&Zc(A,i.clientId,i.redirectUri),i.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(Yp))&&Lb(A),A}function lg(i,e,t,r){const a=pA(e,t,r);return Et.appendQueryString(i.authorizationEndpoint,a)}function uE(i,e){if(Vb(i,e),!i.code)throw _e(rb);return i}function Vb(i,e){if(!i.state||!e)throw i.state?_e(Op,"Cached State"):_e(Op,"Server State");let t,r;try{t=decodeURIComponent(i.state)}catch{throw _e($s,i.state)}try{r=decodeURIComponent(e)}catch{throw _e($s,i.state)}if(t!==r)throw _e($y);if(i.error||i.error_description||i.suberror){const a=pE(i);throw Kb(i.error,i.error_description,i.suberror)?new Wr(i.error||"",i.error_description,i.suberror,i.timestamp||"",i.trace_id||"",i.correlation_id||"",i.claims||"",a):new rs(i.error||"",i.error_description,i.suberror,a)}}function pE(i){var r,a;const e="code=",t=(r=i.error_uri)==null?void 0:r.lastIndexOf(e);return t&&t>=0?(a=i.error_uri)==null?void 0:a.substring(t+e.length):void 0}function hE(i){var e;return((e=i.idTokenClaims)==null?void 0:e.sid)||null}function gE(i){var e;return i.loginHint||((e=i.idTokenClaims)==null?void 0:e.login_hint)||null}/*! @azure/msal-common v15.13.2 2025-11-19 */const nx=",",$b="|";function fE(i){const{skus:e,libraryName:t,libraryVersion:r,extensionName:a,extensionVersion:A}=i,c=new Map([[0,[t,r]],[2,[a,A]]]);let p=[];if(e!=null&&e.length){if(p=e.split(nx),p.length<4)return e}else p=Array.from({length:4},()=>$b);return c.forEach((u,f)=>{var g,y;u.length===2&&((g=u[0])!=null&&g.length)&&((y=u[1])!=null&&y.length)&&mE({skuArr:p,index:f,skuName:u[0],skuVersion:u[1]})}),p.join(nx)}function mE(i){const{skuArr:e,index:t,skuName:r,skuVersion:a}=i;t>=e.length||(e[t]=[r,a].join($b))}class hA{constructor(e,t){this.cacheOutcome=Ni.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Te.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Te.EMPTY_STRING,this.telemetryCacheKey=jn.CACHE_KEY+uA.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${jn.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&t.push(`broker_error=${r}`);const a=t.join(jn.VALUE_SEPARATOR),A=this.getRegionDiscoveryFields(),c=[e,A].join(jn.VALUE_SEPARATOR);return[jn.SCHEMA_VERSION,c,a].join(jn.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=hA.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(jn.VALUE_SEPARATOR),a=e.errors.slice(0,t).join(jn.VALUE_SEPARATOR),A=e.errors.length,c=t<A?jn.OVERFLOW_TRUE:jn.OVERFLOW_FALSE,p=[A,c].join(jn.VALUE_SEPARATOR);return[jn.SCHEMA_VERSION,e.cacheHits,r,a,p].join(jn.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=jn.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Lt?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(jn.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),t=hA.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const a={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,a=0;const A=e.errors.length;for(t=0;t<A;t++){const c=e.failedRequests[2*t]||Te.EMPTY_STRING,p=e.failedRequests[2*t+1]||Te.EMPTY_STRING,u=e.errors[t]||Te.EMPTY_STRING;if(a+=c.toString().length+p.toString().length+u.length+3,a<jn.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Te.EMPTY_STRING),e.push(this.regionSource||Te.EMPTY_STRING),e.push(this.regionOutcome||Te.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return fE(e)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const Yb="missing_kid_error",Jb="missing_alg_error";/*! @azure/msal-common v15.13.2 2025-11-19 */const xE={[Yb]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Jb]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class cg extends Lt{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,cg.prototype)}}function rx(i){return new cg(i,xE[i])}/*! @azure/msal-common v15.13.2 2025-11-19 */class dg{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw rx(Yb);if(!e.alg)throw rx(Jb);const t=new dg({typ:e.typ||dS.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const ug="pkce_not_created",pg="ear_jwk_empty",Xb="ear_jwe_empty",Jp="crypto_nonexistent",ad="empty_navigate_uri",qb="hash_empty_error",hg="no_state_in_hash",Zb="hash_does_not_contain_known_properties",ev="unable_to_parse_state",tv="state_interaction_type_mismatch",nv="interaction_in_progress",rv="popup_window_error",ov="empty_window_error",gA="user_cancelled",yE="monitor_popup_timeout",iv="monitor_window_timeout",sv="redirect_in_iframe",av="block_iframe_reload",Av="block_nested_popups",bE="iframe_closed_prematurely",Ad="silent_logout_unsupported",lv="no_account_error",vE="silent_prompt_value_error",cv="no_token_request_cache_error",dv="unable_to_parse_token_request_cache_error",wE="auth_request_not_set_error",CE="invalid_cache_type",ld="non_browser_environment",Ms="database_not_open",Tc="no_network_connectivity",uv="post_request_failed",pv="get_request_failed",Xp="failed_to_parse_response",hv="unable_to_load_token",gg="crypto_key_not_found",gv="auth_code_required",fv="auth_code_or_nativeAccountId_required",mv="spa_code_and_nativeAccountId_present",fg="database_unavailable",xv="unable_to_acquire_token_from_native_platform",yv="native_handshake_timeout",bv="native_extension_not_installed",mg="native_connection_not_established",rA="uninitialized_public_client_application",vv="native_prompt_not_supported",wv="invalid_base64_string",Cv="invalid_pop_token_request",Bv="failed_to_build_headers",Sv="failed_to_parse_headers",ic="failed_to_decrypt_ear_response",jc="timed_out";/*! @azure/msal-browser v4.26.2 2025-11-19 */const vo="For more visit: aka.ms/msaljs/browser-errors",BE={[ug]:"The PKCE code challenge and verifier could not be generated.",[pg]:"No EAR encryption key provided. This is unexpected.",[Xb]:"Server response does not contain ear_jwe property. This is unexpected.",[Jp]:"The crypto object or function is not available.",[ad]:"Navigation URI is empty. Please check stack trace for more info.",[qb]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${vo}`,[hg]:"Hash does not contain state. Please verify that the request originated from msal.",[Zb]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${vo}`,[ev]:"Unable to parse state. Please verify that the request originated from msal.",[tv]:"Hash contains state but the interaction type does not match the caller.",[nv]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${vo}`,[rv]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[ov]:"window.open returned null or undefined window object.",[gA]:"User cancelled the flow.",[yE]:`Token acquisition in popup failed due to timeout.  ${vo}`,[iv]:`Token acquisition in iframe failed due to timeout.  ${vo}`,[sv]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[av]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${vo}`,[Av]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[bE]:"The iframe being monitored was closed prematurely.",[Ad]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[lv]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[vE]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[cv]:"No token request found in cache.",[dv]:"The cached token request could not be parsed.",[wE]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[CE]:"Invalid cache type",[ld]:"Login and token requests are not supported in non-browser environments.",[Ms]:"Database is not open!",[Tc]:"No network connectivity. Check your internet connection.",[uv]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[pv]:"Network request failed. Please check the network trace to determine root cause.",[Xp]:"Failed to parse network response. Check network trace.",[hv]:"Error loading token to cache.",[gg]:"Cryptographic Key or Keypair not found in browser storage.",[gv]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[fv]:"An authorization code or nativeAccountId must be provided to this flow.",[mv]:"Request cannot contain both spa code and native account id.",[fg]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[xv]:`Unable to acquire token from native platform.  ${vo}`,[yv]:"Timed out while attempting to establish connection to browser extension",[bv]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[mg]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${vo}`,[rA]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${vo}`,[vv]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[wv]:"Invalid base64 encoded string.",[Cv]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Bv]:"Failed to build request headers object.",[Sv]:"Failed to parse response headers",[ic]:"Failed to decrypt ear response",[jc]:"The request timed out."};class wA extends Lt{constructor(e,t){super(e,BE[e],t),Object.setPrototypeOf(this,wA.prototype),this.name="BrowserAuthError"}}function Ve(i,e){return new wA(i,e)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const ir={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},kr={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Na={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},En={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},ox={GET:"GET",POST:"POST"},si={SIGNIN:"signin",SIGNOUT:"signout"},ln={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Ul={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Ft={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var ct;(function(i){i.Redirect="redirect",i.Popup="popup",i.Silent="silent",i.None="none"})(ct||(ct={}));const gn={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},ix={scopes:Zs},Iv="jwk",SE={React:"@azure/msal-react"},qp="msal.db",IE=1,EE=`${qp}.keys`,$n={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},kE=[$n.Default,$n.Skip,$n.RefreshTokenAndNetwork];/*! @azure/msal-browser v4.26.2 2025-11-19 */function Ql(i){return encodeURIComponent(fA(i).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function bi(i){return Ev(i).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fA(i){return Ev(new TextEncoder().encode(i))}function Ev(i){const e=Array.from(i,t=>String.fromCodePoint(t)).join("");return btoa(e)}/*! @azure/msal-browser v4.26.2 2025-11-19 */function Xn(i){return new TextDecoder().decode(fi(i))}function fi(i){let e=i.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw Ve(wv)}const t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const TE="RSASSA-PKCS1-v1_5",na="AES-GCM",kv="HKDF",xg="SHA-256",jE=2048,FE=new Uint8Array([1,0,1]),sx="0123456789abcdef",ax=new Uint32Array(1),yg="raw",Tv="encrypt",bg="decrypt",UE="deriveKey",QE="crypto_subtle_undefined",vg={name:TE,hash:xg,modulusLength:jE,publicExponent:FE};function RE(i){if(!window)throw Ve(ld);if(!window.crypto)throw Ve(Jp);if(!i&&!window.crypto.subtle)throw Ve(Jp,QE)}async function jv(i,e,t){e==null||e.addQueueMeasurement(ee.Sha256Digest,t);const a=new TextEncoder().encode(i);return window.crypto.subtle.digest(xg,a)}function ME(i){return window.crypto.getRandomValues(i)}function hp(){return window.crypto.getRandomValues(ax),ax[0]}function Gr(){const i=Date.now(),e=hp()*1024+(hp()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),a=e&2**30-1,A=hp();t[0]=i/2**40,t[1]=i/2**32,t[2]=i/2**24,t[3]=i/2**16,t[4]=i/2**8,t[5]=i,t[6]=112|r>>>8,t[7]=r,t[8]=128|a>>>24,t[9]=a>>>16,t[10]=a>>>8,t[11]=a,t[12]=A>>>24,t[13]=A>>>16,t[14]=A>>>8,t[15]=A;let c="";for(let p=0;p<t.length;p++)c+=sx.charAt(t[p]>>>4),c+=sx.charAt(t[p]&15),(p===3||p===5||p===7||p===9)&&(c+="-");return c}async function LE(i,e){return window.crypto.subtle.generateKey(vg,i,e)}async function gp(i){return window.crypto.subtle.exportKey(Iv,i)}async function DE(i,e,t){return window.crypto.subtle.importKey(Iv,i,vg,e,t)}async function PE(i,e){return window.crypto.subtle.sign(vg,i,e)}async function wg(){const i=await Fv(),t={alg:"dir",kty:"oct",k:bi(new Uint8Array(i))};return fA(JSON.stringify(t))}async function HE(i){const e=Xn(i),r=JSON.parse(e).k,a=fi(r);return window.crypto.subtle.importKey(yg,a,na,!1,[bg])}async function NE(i,e){const t=e.split(".");if(t.length!==5)throw Ve(ic,"jwe_length");const r=await HE(i).catch(()=>{throw Ve(ic,"import_key")});try{const a=new TextEncoder().encode(t[0]),A=fi(t[2]),c=fi(t[3]),p=fi(t[4]),u=p.byteLength*8,f=new Uint8Array(c.length+p.length);f.set(c),f.set(p,c.length);const g=await window.crypto.subtle.decrypt({name:na,iv:A,tagLength:u,additionalData:a},r,f);return new TextDecoder().decode(g)}catch{throw Ve(ic,"decrypt")}}async function Fv(){const i=await window.crypto.subtle.generateKey({name:na,length:256},!0,[Tv,bg]);return window.crypto.subtle.exportKey(yg,i)}async function Ax(i){return window.crypto.subtle.importKey(yg,i,kv,!1,[UE])}async function Uv(i,e,t){return window.crypto.subtle.deriveKey({name:kv,salt:e,hash:xg,info:new TextEncoder().encode(t)},i,{name:na,length:256},!1,[Tv,bg])}async function _E(i,e,t){const r=new TextEncoder().encode(e),a=window.crypto.getRandomValues(new Uint8Array(16)),A=await Uv(i,a,t),c=await window.crypto.subtle.encrypt({name:na,iv:new Uint8Array(12)},A,r);return{data:bi(new Uint8Array(c)),nonce:bi(a)}}async function lx(i,e,t,r){const a=fi(r),A=await Uv(i,fi(e),t),c=await window.crypto.subtle.decrypt({name:na,iv:new Uint8Array(12)},A,a);return new TextDecoder().decode(c)}async function Qv(i){const e=await jv(i),t=new Uint8Array(e);return bi(t)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const cd="storage_not_supported",hn="stubbed_public_client_application_called",Cg="in_mem_redirect_unavailable";/*! @azure/msal-browser v4.26.2 2025-11-19 */const sc={[cd]:"Given storage configuration option was not supported.",[hn]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Cg]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};sc[cd],sc[hn],sc[Cg];class Bg extends Lt{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Bg.prototype)}}function An(i){return new Bg(i,sc[i])}/*! @azure/msal-browser v4.26.2 2025-11-19 */function Rv(i){i.location.hash="",typeof i.history.replaceState=="function"&&i.history.replaceState(null,"",`${i.location.origin}${i.location.pathname}${i.location.search}`)}function OE(i){const e=i.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function Sg(){return window.parent!==window}function zE(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${ir.POPUP_NAME_PREFIX}.`)===0}function Io(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function KE(){const e=new Et(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function WE(){if(Et.hashContainsKnownProperties(window.location.hash)&&Sg())throw Ve(av)}function GE(i){if(Sg()&&!i)throw Ve(sv)}function VE(){if(zE())throw Ve(Av)}function Mv(){if(typeof window>"u")throw Ve(ld)}function Lv(i){if(!i)throw Ve(rA)}function Ig(i){Mv(),WE(),VE(),Lv(i)}function cx(i,e){if(Ig(i),GE(e.system.allowRedirectInIframe),e.cache.cacheLocation===En.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw An(Cg)}function Dv(i){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(i).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function $E(){return Gr()}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Fc{navigateInternal(e,t){return Fc.defaultNavigateWindow(e,t)}navigateExternal(e,t){return Fc.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,a)=>{setTimeout(()=>{a(Ve(jc,"failed_to_redirect"))},t.timeout)})}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class YE{async sendGetRequestAsync(e,t){let r,a={},A=0;const c=dx(t);try{r=await fetch(e,{method:ox.GET,headers:c})}catch(p){throw Ga(Ve(window.navigator.onLine?pv:Tc),void 0,void 0,p)}a=ux(r.headers);try{return A=r.status,{headers:a,body:await r.json(),status:A}}catch(p){throw Ga(Ve(Xp),A,a,p)}}async sendPostRequestAsync(e,t){const r=t&&t.body||"",a=dx(t);let A,c=0,p={};try{A=await fetch(e,{method:ox.POST,headers:a,body:r})}catch(u){throw Ga(Ve(window.navigator.onLine?uv:Tc),void 0,void 0,u)}p=ux(A.headers);try{return c=A.status,{headers:p,body:await A.json(),status:c}}catch(u){throw Ga(Ve(Xp),c,p,u)}}}function dx(i){try{const e=new Headers;if(!(i&&i.headers))return e;const t=i.headers;return Object.entries(t).forEach(([r,a])=>{e.append(r,a)}),e}catch(e){throw Ga(Ve(Bv),void 0,void 0,e)}}function ux(i){try{const e={};return i.forEach((t,r)=>{e[r]=t}),e}catch{throw Ve(Sv)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const JE=6e4,Zp=1e4,XE=3e4,Pv=2e3;function qE({auth:i,cache:e,system:t,telemetry:r},a){const A={clientId:Te.EMPTY_STRING,authority:`${Te.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:Te.EMPTY_STRING,authorityMetadata:Te.EMPTY_STRING,redirectUri:typeof window<"u"?Io():"",postLogoutRedirectUri:Te.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:sr.AAD,OIDCOptions:{serverResponseType:Yc.FRAGMENT,defaultScopes:[Te.OPENID_SCOPE,Te.PROFILE_SCOPE,Te.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Hh.None,tenant:Te.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},c={cacheLocation:En.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:En.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===En.LocalStorage),claimsBasedCachingEnabled:!1},p={loggerCallback:()=>{},logLevel:Yt.Info,piiLoggingEnabled:!1},f={...{...Ib,loggerOptions:p,networkClient:a?new YE:cE,navigationClient:new Fc,loadFrameTimeout:0,windowHashTimeout:(t==null?void 0:t.loadFrameTimeout)||JE,iframeHashTimeout:(t==null?void 0:t.loadFrameTimeout)||Zp,navigateFrameWait:0,redirectNavigationTimeout:XE,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(t==null?void 0:t.nativeBrokerHandshakeTimeout)||Pv,pollIntervalMilliseconds:ir.DEFAULT_POLL_INTERVAL_MS},...t,loggerOptions:(t==null?void 0:t.loggerOptions)||p},g={application:{appName:Te.EMPTY_STRING,appVersion:Te.EMPTY_STRING},client:new Sb};if((i==null?void 0:i.protocolMode)!==sr.OIDC&&(i!=null&&i.OIDCOptions)&&new ea(f.loggerOptions).warning(JSON.stringify(Ht(fb))),i!=null&&i.protocolMode&&i.protocolMode===sr.OIDC&&(f!=null&&f.allowPlatformBroker))throw Ht(mb);return{auth:{...A,...i,OIDCOptions:{...A.OIDCOptions,...i==null?void 0:i.OIDCOptions}},cache:{...c,...e},system:f,telemetry:{...g,...r}}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const ZE="@azure/msal-browser",es="4.26.2";/*! @azure/msal-browser v4.26.2 2025-11-19 */const Qn="msal",Eg="browser",px="|",_n=2,ac=2,e5=`${Qn}.${Eg}.log.level`,t5=`${Qn}.${Eg}.log.pii`,n5=`${Qn}.${Eg}.platform.auth.dom`,hx=`${Qn}.version`,gx="account.keys",fx="token.keys";function zs(i=ac){return i<1?`${Qn}.${gx}`:`${Qn}.${i}.${gx}`}function Ks(i,e=_n){return e<1?`${Qn}.${fx}.${i}`:`${Qn}.${e}.${fx}.${i}`}/*! @azure/msal-browser v4.26.2 2025-11-19 */class kg{static loggerCallback(e,t){switch(e){case Yt.Error:console.error(t);return;case Yt.Info:console.info(t);return;case Yt.Verbose:console.debug(t);return;case Yt.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){var u;this.browserEnvironment=typeof window<"u",this.config=qE(e,this.browserEnvironment);let t;try{t=window[En.SessionStorage]}catch{}const r=t==null?void 0:t.getItem(e5),a=(u=t==null?void 0:t.getItem(t5))==null?void 0:u.toLowerCase(),A=a==="true"?!0:a==="false"?!1:void 0,c={...this.config.system.loggerOptions},p=r&&Object.keys(Yt).includes(r)?Yt[r]:void 0;p&&(c.loggerCallback=kg.loggerCallback,c.logLevel=p),A!==void 0&&(c.piiLoggingEnabled=A),this.logger=new ea(c,ZE,es),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class ts extends kg{getModuleName(){return ts.MODULE_NAME}getId(){return ts.ID}async initialize(){return this.available=typeof window<"u",this.available}}ts.MODULE_NAME="";ts.ID="StandardOperatingContext";/*! @azure/msal-browser v4.26.2 2025-11-19 */class r5{constructor(){this.dbName=qp,this.version=IE,this.tableName=EE,this.dbOpen=!1}async open(){return new Promise((e,t)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",a=>{a.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",a=>{const A=a;this.db=A.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(Ve(fg)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(Ve(Ms));const c=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);c.addEventListener("success",p=>{const u=p;this.closeConnection(),t(u.target.result)}),c.addEventListener("error",p=>{this.closeConnection(),r(p)})})}async setItem(e,t){return await this.validateDbIsOpen(),new Promise((r,a)=>{if(!this.db)return a(Ve(Ms));const p=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);p.addEventListener("success",()=>{this.closeConnection(),r()}),p.addEventListener("error",u=>{this.closeConnection(),a(u)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(Ve(Ms));const c=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);c.addEventListener("success",()=>{this.closeConnection(),t()}),c.addEventListener("error",p=>{this.closeConnection(),r(p)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(Ve(Ms));const A=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();A.addEventListener("success",c=>{const p=c;this.closeConnection(),e(p.target.result)}),A.addEventListener("error",c=>{this.closeConnection(),t(c)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(Ve(Ms));const c=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);c.addEventListener("success",p=>{const u=p;this.closeConnection(),t(u.target.result===1)}),c.addEventListener("error",p=>{this.closeConnection(),r(p)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{const r=window.indexedDB.deleteDatabase(qp),a=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(a),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(a),e(!0))),r.addEventListener("error",()=>(clearTimeout(a),t(!1)))})}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class dd{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class o5{constructor(e){this.inMemoryCache=new dd,this.indexedDBCache=new r5,this.logger=e}handleDatabaseAccessError(e){if(e instanceof wA&&e.errorCode===fg)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Uo{constructor(e,t,r){this.logger=e,RE(r??!1),this.cache=new o5(this.logger),this.performanceClient=t}createNewGuid(){return Gr()}base64Encode(e){return fA(e)}base64Decode(e){return Xn(e)}base64UrlEncode(e){return Ql(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var g;const t=(g=this.performanceClient)==null?void 0:g.startMeasurement(ee.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await LE(Uo.EXTRACTABLE,Uo.POP_KEY_USAGES),a=await gp(r.publicKey),A={e:a.e,kty:a.kty,n:a.n},c=mx(A),p=await this.hashString(c),u=await gp(r.privateKey),f=await DE(u,!1,["sign"]);return await this.cache.setItem(p,{privateKey:f,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),t&&t.end({success:!0}),p}async removeTokenBindingKey(e){if(await this.cache.removeItem(e),await this.cache.containsKey(e))throw _e(ob)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,r,a){var te;const A=(te=this.performanceClient)==null?void 0:te.startMeasurement(ee.CryptoOptsSignJwt,a),c=await this.cache.getItem(t);if(!c)throw Ve(gg);const p=await gp(c.publicKey),u=mx(p),f=Ql(JSON.stringify({kid:t})),g=dg.getShrHeaderString({...r==null?void 0:r.header,alg:p.alg,kid:f}),y=Ql(g);e.cnf={jwk:JSON.parse(u)};const b=Ql(JSON.stringify(e)),H=`${y}.${b}`,L=new TextEncoder().encode(H),Q=await PE(c.privateKey,L),V=bi(new Uint8Array(Q)),D=`${H}.${V}`;return A&&A.end({success:!0}),D}async hashString(e){return Qv(e)}}Uo.POP_KEY_USAGES=["sign","verify"];Uo.EXTRACTABLE=!0;function mx(i){return JSON.stringify(i,Object.keys(i).sort())}/*! @azure/msal-browser v4.26.2 2025-11-19 */const i5=24*60*60*1e3,eh={Lax:"Lax",None:"None"};class Hv{initialize(){return Promise.resolve()}getItem(e){const t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let a=0;a<r.length;a++){const A=r[a],[c,...p]=decodeURIComponent(A).trim().split("="),u=p.join("=");if(c===t)return u}return""}getUserData(){throw _e(yt)}setItem(e,t,r,a=!0,A=eh.Lax){let c=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${A};`;if(r){const p=s5(r);c+=`expires=${p};`}(a||A===eh.None)&&(c+="Secure;"),document.cookie=c}async setUserData(){return Promise.reject(_e(yt))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(r=>{const a=decodeURIComponent(r).trim().split("=");t.push(a[0])}),t}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function s5(i){const e=new Date;return new Date(e.getTime()+i*i5).toUTCString()}/*! @azure/msal-browser v4.26.2 2025-11-19 */function oi(i,e){const t=i.getItem(zs(e));return t?JSON.parse(t):[]}function Nr(i,e,t){const r=e.getItem(Ks(i,t));if(r){const a=JSON.parse(r);if(a&&a.hasOwnProperty("idToken")&&a.hasOwnProperty("accessToken")&&a.hasOwnProperty("refreshToken"))return a}return{idToken:[],accessToken:[],refreshToken:[]}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function Ac(i){return i.hasOwnProperty("id")&&i.hasOwnProperty("nonce")&&i.hasOwnProperty("data")}/*! @azure/msal-browser v4.26.2 2025-11-19 */const xx="msal.cache.encryption",a5="msal.broadcast.cache";class A5{constructor(e,t,r){if(!window.localStorage)throw An(cd);this.memoryStorage=new dd,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel(a5)}async initialize(e){const t=new Hv,r=t.getItem(xx);let a={key:"",id:""};if(r)try{a=JSON.parse(r)}catch{}if(a.key&&a.id){const A=yr(fi,ee.Base64Decode,this.logger,this.performanceClient,e)(a.key);this.encryptionCookie={id:a.id,key:await Ie(Ax,ee.GenerateHKDF,this.logger,this.performanceClient,e)(A)}}else{const A=Gr(),c=await Ie(Fv,ee.GenerateBaseKey,this.logger,this.performanceClient,e)(),p=yr(bi,ee.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(c));this.encryptionCookie={id:A,key:await Ie(Ax,ee.GenerateHKDF,this.logger,this.performanceClient,e)(c)};const u={id:A,key:p};t.setItem(xx,JSON.stringify(u),0,!0,eh.None)}await Ie(this.importExistingCache.bind(this),ee.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw Ve(rA);return this.memoryStorage.getItem(e)}async decryptData(e,t,r){if(!this.initialized||!this.encryptionCookie)throw Ve(rA);if(t.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const a=await Ie(lx,ee.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t.nonce,this.getContext(e),t.data);if(!a)return null;try{return{...JSON.parse(a),lastUpdatedAt:t.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,r,a,A){if(!this.initialized||!this.encryptionCookie)throw Ve(rA);if(A)this.setItem(e,t);else{const{data:c,nonce:p}=await Ie(_E,ee.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t,this.getContext(e)),u={id:this.encryptionCookie.id,nonce:p,data:c,lastUpdatedAt:a};this.setItem(e,JSON.stringify(u))}this.memoryStorage.setItem(e,t),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),oi(this).forEach(r=>this.removeItem(r));const t=Nr(this.clientId,this);t.idToken.forEach(r=>this.removeItem(r)),t.accessToken.forEach(r=>this.removeItem(r)),t.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(Qn)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(e){if(!this.encryptionCookie)return;let t=oi(this);t=await this.importArray(t,e),t.length?this.setItem(zs(),JSON.stringify(t)):this.removeItem(zs());const r=Nr(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(Ks(this.clientId),JSON.stringify(r)):this.removeItem(Ks(this.clientId))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let a;try{a=JSON.parse(r)}catch{return null}return Ac(a)?a.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},t),Ie(lx,ee.Decrypt,this.logger,this.performanceClient,t)(this.encryptionCookie.key,a.nonce,this.getContext(e),a.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),r)}async importArray(e,t){const r=[],a=[];return e.forEach(A=>{const c=this.getItemFromEncryptedCache(A,t).then(p=>{p?(this.memoryStorage.setItem(A,p),r.push(A)):this.removeItem(A)});a.push(c)}),await Promise.all(a),r}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(ee.LocalStorageUpdated);t.add({isBackground:!0});const{key:r,value:a,context:A}=e.data;if(!r){this.logger.error("Broadcast event missing key"),t.end({success:!1,errorCode:"noKey"});return}if(A&&A!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${A}`),t.end({success:!1,errorCode:"contextMismatch"});return}a?(this.memoryStorage.setItem(r,a),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),t.end({success:!0})}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class l5{constructor(){if(!window.sessionStorage)throw An(cd)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const Xe={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};/*! @azure/msal-browser v4.26.2 2025-11-19 */function ti(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class th extends $p{constructor(e,t,r,a,A,c,p){super(e,r,a,A,p),this.cacheConfig=t,this.logger=a,this.internalStorage=new dd,this.browserStorage=yx(e,t.cacheLocation,a,A),this.temporaryCacheStorage=yx(e,t.temporaryCacheLocation,a,A),this.cookieStorage=new Hv,this.eventHandler=c}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){let t=oi(this.browserStorage),r=Nr(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:t.length,preMigrateATCount:r.accessToken.length,preMigrateITCount:r.idToken.length,preMigrateRTCount:r.refreshToken.length},e);for(let A=0;A<ac;A++){const c=A;await this.removeStaleAccounts(A,c,e)}for(let A=0;A<_n;A++){const c=A;await this.migrateIdTokens(A,c,e)}const a=this.getKMSIValues();for(let A=0;A<_n;A++)await this.migrateAccessTokens(A,a,e),await this.migrateRefreshTokens(A,a,e);t=oi(this.browserStorage),r=Nr(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:t.length,postMigrateATCount:r.accessToken.length,postMigrateITCount:r.idToken.length,postMigrateRTCount:r.refreshToken.length},e)}async updateOldEntry(e,t){const r=this.browserStorage.getItem(e),a=this.validateAndParseJson(r||"");if(!a)return this.browserStorage.removeItem(e),null;if(!a.lastUpdatedAt)a.lastUpdatedAt=Date.now().toString(),this.setItem(e,JSON.stringify(a),t);else if(Jm(a.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null;const A=Ac(a)?await this.browserStorage.decryptData(e,a,t):a;return!A||!rd(A)?(this.performanceClient.incrementFields({invalidCacheCount:1},t),null):(Xm(A)||qm(A))&&A.expiresOn&&Ic(A.expiresOn,Oy)?(this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null):A}async removeStaleAccounts(e,t,r){const a=oi(this.browserStorage,e);if(a.length!==0){for(const A of[...a]){this.performanceClient.incrementFields({oldAcntCount:1},r);const c=this.browserStorage.getItem(A),p=this.validateAndParseJson(c||"");if(!p){ti(a,A);continue}if(p.lastUpdatedAt)Jm(p.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(A,p,t,r),ti(a,A));else{p.lastUpdatedAt=Date.now().toString(),this.setItem(A,JSON.stringify(p),r);continue}}this.setAccountKeys(a,r,e)}}async removeAccountOldSchema(e,t,r,a){const A=Ac(t)?await this.browserStorage.decryptData(e,t,a):t,c=A==null?void 0:A.homeAccountId;if(c){const p=this.getTokenKeys(r);[...p.idToken].filter(u=>u.includes(c)).forEach(u=>{this.browserStorage.removeItem(u),ti(p.idToken,u)}),[...p.accessToken].filter(u=>u.includes(c)).forEach(u=>{this.browserStorage.removeItem(u),ti(p.accessToken,u)}),[...p.refreshToken].filter(u=>u.includes(c)).forEach(u=>{this.browserStorage.removeItem(u),ti(p.refreshToken,u)}),this.setTokenKeys(p,a,r)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},a),this.browserStorage.removeItem(e)}getKMSIValues(){const e={},t=this.getTokenKeys().idToken;for(const r of t){const a=this.browserStorage.getUserData(r);if(a){const A=JSON.parse(a),c=io(A.secret,Xn);c&&(e[A.homeAccountId]=ao(c))}}return e}async migrateIdTokens(e,t,r){const a=Nr(this.clientId,this.browserStorage,e);if(a.idToken.length===0)return;const A=Nr(this.clientId,this.browserStorage,_n),c=oi(this.browserStorage),p=oi(this.browserStorage,t);for(const u of[...a.idToken]){this.performanceClient.incrementFields({oldITCount:1},r);const f=await this.updateOldEntry(u,r);if(!f){ti(a.idToken,u);continue}const g=c.find(D=>D.includes(f.homeAccountId)),y=p.find(D=>D.includes(f.homeAccountId));let b=null;if(g)b=this.getAccount(g,r);else if(y){const D=this.browserStorage.getItem(y),te=this.validateAndParseJson(D||"");b=te&&Ac(te)?await this.browserStorage.decryptData(y,te,r):te}if(!b){this.performanceClient.incrementFields({skipITMigrateCount:1},r);continue}const H=io(f.secret,Xn),S=this.generateCredentialKey(f),L=this.getIdTokenCredential(S,r),Q=Object.keys(H).includes("signin_state"),V=L&&Object.keys(io(L.secret,Xn)||{}).includes("signin_state");if(!L||f.lastUpdatedAt>L.lastUpdatedAt&&(Q||!V)){const D=b.tenantProfiles||[],te=Wh(H)||b.realm;if(te&&!D.find(N=>N.tenantId===te)){const N=Xc(b.homeAccountId,b.localAccountId,te,H);D.push(N)}b.tenantProfiles=D;const J=this.generateAccountKey(sn.getAccountInfo(b)),M=ao(H);await this.setUserData(J,JSON.stringify(b),r,b.lastUpdatedAt,M),c.includes(J)||c.push(J),await this.setUserData(S,JSON.stringify(f),r,f.lastUpdatedAt,M),this.performanceClient.incrementFields({migratedITCount:1},r),A.idToken.push(S)}}this.setTokenKeys(a,r,e),this.setTokenKeys(A,r),this.setAccountKeys(c,r)}async migrateAccessTokens(e,t,r){const a=Nr(this.clientId,this.browserStorage,e);if(a.accessToken.length===0)return;const A=Nr(this.clientId,this.browserStorage,_n);for(const c of[...a.accessToken]){this.performanceClient.incrementFields({oldATCount:1},r);const p=await this.updateOldEntry(c,r);if(!p){ti(a.accessToken,c);continue}if(!Object.keys(t).includes(p.homeAccountId)){this.performanceClient.incrementFields({skipATMigrateCount:1},r);continue}const u=this.generateCredentialKey(p),f=t[p.homeAccountId];if(!A.accessToken.includes(u))await this.setUserData(u,JSON.stringify(p),r,p.lastUpdatedAt,f),this.performanceClient.incrementFields({migratedATCount:1},r),A.accessToken.push(u);else{const g=this.getAccessTokenCredential(u,r);(!g||p.lastUpdatedAt>g.lastUpdatedAt)&&(await this.setUserData(u,JSON.stringify(p),r,p.lastUpdatedAt,f),this.performanceClient.incrementFields({migratedATCount:1},r))}}this.setTokenKeys(a,r,e),this.setTokenKeys(A,r)}async migrateRefreshTokens(e,t,r){const a=Nr(this.clientId,this.browserStorage,e);if(a.refreshToken.length===0)return;const A=Nr(this.clientId,this.browserStorage,_n);for(const c of[...a.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},r);const p=await this.updateOldEntry(c,r);if(!p){ti(a.refreshToken,c);continue}if(!Object.keys(t).includes(p.homeAccountId)){this.performanceClient.incrementFields({skipRTMigrateCount:1},r);continue}const u=this.generateCredentialKey(p),f=t[p.homeAccountId];if(!A.refreshToken.includes(u))await this.setUserData(u,JSON.stringify(p),r,p.lastUpdatedAt,f),this.performanceClient.incrementFields({migratedRTCount:1},r),A.refreshToken.push(u);else{const g=this.getRefreshTokenCredential(u,r);(!g||p.lastUpdatedAt>g.lastUpdatedAt)&&(await this.setUserData(u,JSON.stringify(p),r,p.lastUpdatedAt,f),this.performanceClient.incrementFields({migratedRTCount:1},r))}}this.setTokenKeys(a,r,e),this.setTokenKeys(A,r)}trackVersionChanges(e){const t=this.browserStorage.getItem(hx);t&&(this.logger.info(`MSAL.js was last initialized by version: ${t}`),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==es&&this.setItem(hx,es,e)}validateAndParseJson(e){if(!e)return null;try{const t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}setItem(e,t,r){const a=new Array(_n+1).fill(0),A=[],c=20;for(let p=0;p<=c;p++)try{if(this.browserStorage.setItem(e,t),p>0)for(let u=0;u<=_n;u++){const f=a.slice(0,u).reduce((y,b)=>y+b,0);if(f>=p)break;const g=p>f+a[u]?f+a[u]:p;p>f&&a[u]>0&&this.removeAccessTokenKeys(A.slice(f,g),r,u)}break}catch(u){const f=Vp(u);if(f.errorCode===wc&&p<c){if(!A.length)for(let g=0;g<=_n;g++)if(e===Ks(this.clientId,g)){const y=JSON.parse(t).accessToken;A.push(...y),a[g]=y.length}else{const y=this.getTokenKeys(g).accessToken;A.push(...y),a[g]=y.length}if(A.length<=p)throw f;this.removeAccessToken(A[p],r,!1)}else throw f}}async setUserData(e,t,r,a,A){const c=new Array(_n+1).fill(0),p=[],u=20;for(let f=0;f<=u;f++)try{if(await Ie(this.browserStorage.setUserData.bind(this.browserStorage),ee.SetUserData,this.logger,this.performanceClient)(e,t,r,a,A),f>0)for(let g=0;g<=_n;g++){const y=c.slice(0,g).reduce((H,S)=>H+S,0);if(y>=f)break;const b=f>y+c[g]?y+c[g]:f;f>y&&c[g]>0&&this.removeAccessTokenKeys(p.slice(y,b),r,g)}break}catch(g){const y=Vp(g);if(y.errorCode===wc&&f<u){if(!p.length)for(let b=0;b<=_n;b++){const H=this.getTokenKeys(b).accessToken;p.push(...H),c[b]=H.length}if(p.length<=f)throw y;this.removeAccessToken(p[f],r,!1)}else throw y}}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,t),null;const a=this.validateAndParseJson(r);return!a||!sn.isAccountEntity(a)?null:$p.toObject(new sn,a)}async setAccount(e,t,r){this.logger.trace("BrowserCacheManager.setAccount called");const a=this.generateAccountKey(sn.getAccountInfo(e)),A=Date.now().toString();e.lastUpdatedAt=A,await this.setUserData(a,JSON.stringify(e),t,A,r);const c=this.addAccountKeyToMap(a,t);this.performanceClient.addFields({kmsi:r},t),this.cacheConfig.cacheLocation===En.LocalStorage&&c&&this.eventHandler.emitEvent(Xe.ACCOUNT_ADDED,void 0,sn.getAccountInfo(e))}getAccountKeys(){return oi(this.browserStorage)}setAccountKeys(e,t,r=ac){e.length===0?this.removeItem(zs(r)):this.setItem(zs(r),JSON.stringify(e),t)}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(zs(),JSON.stringify(r),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),a=r.indexOf(e);a>-1?(r.splice(a,1),this.setAccountKeys(r,t),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){const r=this.getActiveAccount(t);(r==null?void 0:r.homeAccountId)===e.homeAccountId&&(r==null?void 0:r.environment)===e.environment&&this.setActiveAccount(null,t),super.removeAccount(e,t),this.removeAccountKeyFromMap(this.generateAccountKey(e),t),this.browserStorage.getKeys().forEach(a=>{a.includes(e.homeAccountId)&&a.includes(e.environment)&&this.browserStorage.removeItem(a)}),this.cacheConfig.cacheLocation===En.LocalStorage&&this.eventHandler.emitEvent(Xe.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,t){super.removeIdToken(e,t);const r=this.getTokenKeys(),a=r.idToken.indexOf(e);a>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(a,1),this.setTokenKeys(r,t))}removeAccessToken(e,t,r=!0){super.removeAccessToken(e,t),r&&this.removeAccessTokenKeys([e],t)}removeAccessTokenKeys(e,t,r=_n){this.logger.trace("removeAccessTokenKey called");const a=this.getTokenKeys(r);let A=0;if(e.forEach(c=>{const p=a.accessToken.indexOf(c);p>-1&&(a.accessToken.splice(p,1),A++)}),A>0){this.logger.info(`removed ${A} accessToken keys from tokenKeys map`),this.setTokenKeys(a,t,r);return}}removeRefreshToken(e,t){super.removeRefreshToken(e,t);const r=this.getTokenKeys(),a=r.refreshToken.indexOf(e);a>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(a,1),this.setTokenKeys(r,t))}getTokenKeys(e=_n){return Nr(this.clientId,this.browserStorage,e)}setTokenKeys(e,t,r=_n){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(Ks(this.clientId,r));return}else this.setItem(Ks(this.clientId,r),JSON.stringify(e),t)}getIdTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;const a=this.validateAndParseJson(r);return!a||!GI(a)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),a)}async setIdTokenCredential(e,t,r){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const a=this.generateCredentialKey(e),A=Date.now().toString();e.lastUpdatedAt=A,await this.setUserData(a,JSON.stringify(e),t,A,r);const c=this.getTokenKeys();c.idToken.indexOf(a)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),c.idToken.push(a),this.setTokenKeys(c,t))}getAccessTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],t),null;const a=this.validateAndParseJson(r);return!a||!Xm(a)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),a)}async setAccessTokenCredential(e,t,r){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const a=this.generateCredentialKey(e),A=Date.now().toString();e.lastUpdatedAt=A,await this.setUserData(a,JSON.stringify(e),t,A,r);const c=this.getTokenKeys(),p=c.accessToken.indexOf(a);p!==-1&&c.accessToken.splice(p,1),this.logger.trace(`access token ${p===-1?"added to":"updated in"} map`),c.accessToken.push(a),this.setTokenKeys(c,t)}getRefreshTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,t),null;const a=this.validateAndParseJson(r);return!a||!qm(a)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),a)}async setRefreshTokenCredential(e,t,r){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const a=this.generateCredentialKey(e),A=Date.now().toString();e.lastUpdatedAt=A,await this.setUserData(a,JSON.stringify(e),t,A,r);const c=this.getTokenKeys();c.refreshToken.indexOf(a)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),c.refreshToken.push(a),this.setTokenKeys(c,t))}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!JI(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=YI(e);this.setItem(r,JSON.stringify(e),t)}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!VI(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),r)}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&XI(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(Ul.WRAPPER_SKU,e),this.internalStorage.setItem(Ul.WRAPPER_VER,t)}getWrapperMetadata(){const e=this.internalStorage.getItem(Ul.WRAPPER_SKU)||Te.EMPTY_STRING,t=this.internalStorage.getItem(Ul.WRAPPER_VER)||Te.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){const t=this.generateCacheKey(Dm.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const a=this.validateAndParseJson(r);return a?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:a.homeAccountId,localAccountId:a.localAccountId,tenantId:a.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){const r=this.generateCacheKey(Dm.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");const a={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:Ar().toString()};this.setItem(r,JSON.stringify(a),t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(Xe.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!$I(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),r)}getTemporaryCache(e,t){const r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const A=this.cookieStorage.getItem(r);if(A)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),A}const a=this.temporaryCacheStorage.getItem(r);if(!a){if(this.cacheConfig.cacheLocation===En.LocalStorage){const A=this.browserStorage.getItem(r);if(A)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),A}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),a}setTemporaryCache(e,t,r){const a=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(a,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(a,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(t=>{(t.indexOf(Qn)!==-1||t.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(t)}),this.browserStorage.getKeys().forEach(t=>{(t.indexOf(Qn)!==-1||t.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(t)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(ee.ClearTokensAndKeysWithClaims,e);const t=this.getTokenKeys();let r=0;t.accessToken.forEach(a=>{const A=this.getAccessTokenCredential(a,e);A!=null&&A.requestedClaimsHash&&a.includes(A.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(a,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return xr.startsWith(e,Qn)?e:`${Qn}.${this.clientId}.${e}`}generateCredentialKey(e){const t=e.credentialType===Un.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==Mt.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${Qn}.${_n}`,e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join(px).toLowerCase()}generateAccountKey(e){const t=e.homeAccountId.split(".")[1];return[`${Qn}.${ac}`,e.homeAccountId,e.environment,t||e.tenantId||""].join(px).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(ln.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(ln.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(ln.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(ln.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(ln.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=fA(JSON.stringify(e));if(this.setTemporaryCache(ln.REQUEST_PARAMS,r,!0),t){const a=fA(t);this.setTemporaryCache(ln.VERIFIER,a,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(ln.REQUEST_PARAMS,!0);if(!e)throw Ve(cv);const t=this.getTemporaryCache(ln.VERIFIER,!0);let r,a="";try{r=JSON.parse(Xn(e)),t&&(a=Xn(t))}catch(A){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${A}`),Ve(dv)}return[r,a]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(ln.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var r;const t=(r=this.getInteractionInProgress())==null?void 0:r.clientId;return e?t===this.clientId:!!t}getInteractionInProgress(){const e=`${Qn}.${ln.INTERACTION_STATUS_KEY}`,t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),Rv(window),null}}setInteractionInProgress(e,t=si.SIGNIN){var a;const r=`${Qn}.${ln.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw Ve(nv);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:t}),!1)}else!e&&((a=this.getInteractionInProgress())==null?void 0:a.clientId)===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(e,t){var p,u,f;const r=td((p=e.account)==null?void 0:p.homeAccountId,(u=e.account)==null?void 0:u.environment,e.idToken,this.clientId,e.tenantId);let a;t.claims&&(a=await this.cryptoImpl.hashString(t.claims));const A=nd((f=e.account)==null?void 0:f.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?Ym(e.expiresOn):0,e.extExpiresOn?Ym(e.extExpiresOn):0,Xn,void 0,e.tokenType,void 0,t.sshKid,t.claims,a),c={idToken:r,accessToken:A};return this.saveCacheRecord(c,e.correlationId,ao(io(e.idToken,Xn)))}async saveCacheRecord(e,t,r,a){try{await super.saveCacheRecord(e,t,r,a)}catch(A){if(A instanceof _s&&this.performanceClient&&t)try{const c=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:c.refreshToken.length,cacheIdCount:c.idToken.length,cacheAtCount:c.accessToken.length},t)}catch{}throw A}}}function yx(i,e,t,r){try{switch(e){case En.LocalStorage:return new A5(i,t,r);case En.SessionStorage:return new l5;case En.MemoryStorage:default:break}}catch(a){t.error(a)}return new dd}const c5=(i,e,t,r)=>{const a={cacheLocation:En.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:En.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new th(i,a,xc,e,t,r)};/*! @azure/msal-browser v4.26.2 2025-11-19 */function d5(i,e,t,r,a){return i.verbose("getAllAccounts called"),t?e.getAllAccounts(a||{},r):[]}function u5(i,e,t,r){const a=t.getAccountInfoFilteredBy(i,r);return a?(e.verbose("getAccount: Account matching provided filter found, returning"),a):(e.verbose("getAccount: No matching account found, returning null"),null)}function p5(i,e,t,r){if(e.trace("getAccountByUsername called"),!i)return e.warning("getAccountByUsername: No username provided"),null;const a=t.getAccountInfoFilteredBy({username:i},r);return a?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${i}`),a):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function h5(i,e,t,r){if(e.trace("getAccountByHomeId called"),!i)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const a=t.getAccountInfoFilteredBy({homeAccountId:i},r);return a?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${i}`),a):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function g5(i,e,t,r){if(e.trace("getAccountByLocalId called"),!i)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const a=t.getAccountInfoFilteredBy({localAccountId:i},r);return a?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${i}`),a):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function f5(i,e,t){e.setActiveAccount(i,t)}function m5(i,e){return i.getActiveAccount(e)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const x5="msal.broadcast.event";class y5{constructor(e){this.eventCallbacks=new Map,this.logger=e||new ea({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(x5)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if(typeof window<"u"){const a=r||$E();return this.eventCallbacks.has(a)?(this.logger.error(`Event callback with id: ${a} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(a,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${a}`),a)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,a){var c;const A={eventType:e,interactionType:t||null,payload:r||null,error:a||null,timestamp:Date.now()};switch(e){case Xe.ACCOUNT_ADDED:case Xe.ACCOUNT_REMOVED:case Xe.ACTIVE_ACCOUNT_CHANGED:(c=this.broadcastChannel)==null||c.postMessage(A);break;default:this.invokeCallbacks(A);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,r],a)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${a}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Nv{constructor(e,t,r,a,A,c,p,u,f){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=A,this.navigationClient=c,this.platformAuthProvider=u,this.correlationId=f||Gr(),this.logger=a.clone(ir.MSAL_SKU,es,this.correlationId),this.performanceClient=p}async clearCacheOnLogout(e,t){if(t)try{this.browserStorage.removeAccount(t,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return Et.getAbsoluteUrl(t,Io())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new hA(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(ee.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const a={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},A=e.requestAuthority||this.config.auth.authority,c=r!=null&&r.length?r==="true":this.config.auth.instanceAware,p=t&&c?this.config.auth.authority.replace(Et.getDomainFromUrl(A),t.environment):A,u=zn.generateAuthority(p,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),f=await Ie(Ob,ee.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(u,this.config.system.networkClient,this.browserStorage,a,this.logger,this.correlationId,this.performanceClient);if(t&&!f.isAlias(t.environment))throw Ht(xb);return f}}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function Tg(i,e,t,r){t.addQueueMeasurement(ee.InitializeBaseRequest,i.correlationId);const a=i.authority||e.auth.authority,A=[...i&&i.scopes||[]],c={...i,correlationId:i.correlationId,authority:a,scopes:A};if(!c.authenticationScheme)c.authenticationScheme=Mt.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(c.authenticationScheme===Mt.SSH){if(!i.sshJwk)throw Ht(Jc);if(!i.sshKid)throw Ht(gb)}r.verbose(`Authentication Scheme set to "${c.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&i.claims&&!xr.isEmptyObj(i.claims)&&(c.requestedClaimsHash=await Qv(i.claims)),c}async function b5(i,e,t,r,a){r.addQueueMeasurement(ee.InitializeSilentRequest,i.correlationId);const A=await Ie(Tg,ee.InitializeBaseRequest,a,r,i.correlationId)(i,t,r,a);return{...i,...A,account:e,forceRefresh:i.forceRefresh||!1}}function _v(i,e){let t;const r=i.httpMethod;if(e===sr.EAR){if(t=r||zi.POST,t!==zi.POST)throw Ht(yb)}else t=r||zi.GET;if(i.authorizePostBodyParameters&&t!==zi.POST)throw Ht(bb);return t}/*! @azure/msal-browser v4.26.2 2025-11-19 */class ra extends Nv{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const t={correlationId:this.correlationId||Gr(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=Et.getAbsoluteUrl(e.postLogoutRedirectUri,Io())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=Et.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Io())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=Et.getAbsoluteUrl(Io(),Io())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(ee.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const t=await Ie(this.getClientConfiguration.bind(this),ee.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new Gb(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:a,requestExtraQueryParameters:A,account:c}=e;this.performanceClient.addQueueMeasurement(ee.StandardInteractionClientGetClientConfiguration,this.correlationId);const p=e.authority||await Ie(this.getDiscoveredAuthority.bind(this),ee.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:a,requestExtraQueryParameters:A,account:c}),u=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:p,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:u.loggerCallback,piiLoggingEnabled:u.piiLoggingEnabled,logLevel:u.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:ir.MSAL_SKU,version:es,cpu:Te.EMPTY_STRING,os:Te.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(ee.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),a={interactionType:t},A=ta.setRequestState(this.browserCrypto,e&&e.state||Te.EMPTY_STRING,a),p={...await Ie(Tg,ee.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:A,nonce:e.nonce||Gr(),responseMode:this.config.auth.OIDCOptions.serverResponseType},u={...p,httpMethod:_v(p,this.config.auth.protocolMode)};if(e.loginHint||e.sid)return u;const f=e.account||this.browserStorage.getActiveAccount(this.correlationId);return f&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${f.homeAccountId}`,this.correlationId),u.account=f),u}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function v5(i,e){if(!e)return null;try{return ta.parseRequestState(i,e).libraryState.meta}catch{throw _e($s)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function oA(i,e,t){const r=bc(i);if(!r)throw wb(i)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${i}`),Ve(Zb)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),Ve(qb));return r}function w5(i,e,t){if(!i.state)throw Ve(hg);const r=v5(e,i.state);if(!r)throw Ve(ev);if(r.interactionType!==t)throw Ve(tv)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Ov{constructor(e,t,r,a,A){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=a,this.performanceClient=A}async handleCodeResponse(e,t){this.performanceClient.addQueueMeasurement(ee.HandleCodeResponse,t.correlationId);let r;try{r=uE(e,t.state)}catch(a){throw a instanceof rs&&a.subError===gA?Ve(gA):a}return Ie(this.handleCodeResponseFromServer.bind(this),ee.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)}async handleCodeResponseFromServer(e,t,r=!0){if(this.performanceClient.addQueueMeasurement(ee.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await Ie(this.authModule.updateAuthority.bind(this.authModule),ee.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const A=this.createCcsCredentials(t);A&&(this.authCodeRequest.ccsCredential=A)}return await Ie(this.authModule.acquireToken.bind(this.authModule),ee.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Or.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:Or.UPN}:null}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const C5="ContentError",B5="PageException",zv="user_switch";/*! @azure/msal-browser v4.26.2 2025-11-19 */const S5="USER_INTERACTION_REQUIRED",I5="USER_CANCEL",E5="NO_NETWORK",k5="DISABLED",T5="ACCOUNT_UNAVAILABLE",j5="UX_NOT_ALLOWED";/*! @azure/msal-browser v4.26.2 2025-11-19 */const F5=-2147186943,U5={[zv]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class oo extends Lt{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,oo.prototype),this.name="NativeAuthError",this.ext=r}}function Ls(i){if(i.ext&&i.ext.status&&i.ext.status===k5||i.ext&&i.ext.error&&i.ext.error===F5)return!0;switch(i.errorCode){case C5:case B5:return!0;default:return!1}}function Uc(i,e,t){if(t&&t.status)switch(t.status){case T5:return kc(zb);case S5:return new Wr(i,e);case I5:return Ve(gA);case E5:return Ve(Tc);case j5:return kc(ag)}return new oo(i,U5[i]||e,t)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Kv extends ra{async acquireToken(e){this.performanceClient.addQueueMeasurement(ee.SilentCacheClientAcquireToken,e.correlationId);const t=this.initializeServerTelemetryManager(Ft.acquireTokenSilent_silentFlow),r=await Ie(this.getClientConfiguration.bind(this),ee.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),a=new lE(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const c=(await Ie(a.acquireCachedToken.bind(a),ee.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),c}catch(A){throw A instanceof wA&&A.errorCode===gg&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),A}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t.correlationId,t==null?void 0:t.account)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class lc extends Nv{constructor(e,t,r,a,A,c,p,u,f,g,y,b){super(e,t,r,a,A,c,u,f,b),this.apiId=p,this.accountId=g,this.platformAuthProvider=f,this.nativeStorageManager=y,this.silentCacheClient=new Kv(e,this.nativeStorageManager,r,a,A,c,u,f,b);const H=this.platformAuthProvider.getExtensionName();this.skus=hA.makeExtraSkuString({libraryName:ir.MSAL_SKU,libraryVersion:es,extensionName:H,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[SI]:this.skus}}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(ee.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(ee.NativeInteractionClientAcquireToken,this.correlationId),a=Ar(),A=this.initializeServerTelemetryManager(this.apiId);try{const c=await this.initializeNativeRequest(e);try{const u=await this.acquireTokensFromCache(this.accountId,c);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),u}catch(u){if(t===$n.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),u;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const p=await this.platformAuthProvider.sendMessage(c);return await this.handleNativeResponse(p,c,a).then(u=>(r.end({success:!0,isNativeBroker:!0,requestId:u.requestId}),A.clearNativeBrokerErrorCode(),u)).catch(u=>{throw r.end({success:!1,errorCode:u.errorCode,subErrorCode:u.subError}),u})}catch(c){throw c instanceof oo&&A.setNativeBrokerErrorCode(c.errorCode),r.end({success:!1}),c}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:xn.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),_e(Kp);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw _e(Kp);try{const a=this.createSilentCacheRequest(t,r),A=await this.silentCacheClient.acquireToken(a),c={...r,idTokenClaims:A==null?void 0:A.idTokenClaims,idToken:A==null?void 0:A.idToken};return{...A,account:c}}catch(a){throw a}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const a=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(a)}catch(p){if(p instanceof oo&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(p.errorCode),Ls(p)))throw p}this.browserStorage.setTemporaryCache(ln.NATIVE_REQUEST,JSON.stringify(a),!0);const A={apiId:Ft.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(c,A)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(e==null||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:a,...A}=r;a&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(ln.NATIVE_REQUEST));const c=Ar();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const p=await this.platformAuthProvider.sendMessage(A),u=await this.handleNativeResponse(p,A,c);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),u}catch(p){throw p}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,r){var g,y;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const a=io(e.id_token,Xn),A=this.createHomeAccountIdentifier(e,a),c=(g=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},this.correlationId))==null?void 0:g.homeAccountId;if((y=t.extraParameters)!=null&&y.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(A!==c&&e.account.id!==t.accountId)throw Uc(zv);const p=await this.getDiscoveredAuthority({requestAuthority:t.authority}),u=Ag(this.browserStorage,p,A,Xn,this.correlationId,a,e.client_info,void 0,a.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const f=await this.generateAuthenticationResult(e,t,a,u,p.canonicalAuthority,r);return await this.cacheAccount(u,this.correlationId,ao(a)),await this.cacheNativeTokens(e,t,A,a,e.access_token,f.tenantId,r),f}createHomeAccountIdentifier(e,t){return sn.generateHomeAccountId(e.client_info||Te.EMPTY_STRING,_r.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return t?xn.fromString(t):xn.fromString(e)}async generatePopAccessToken(e,t){if(t.tokenType===Mt.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new Ys(this.browserCrypto),a={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw _e(Lh);return r.signPopToken(e.access_token,t.keyId,a)}else return e.access_token}async generateAuthenticationResult(e,t,r,a,A,c){const p=this.addTelemetryFromNativeResponse(e.properties.MATS),u=this.generateScopes(t.scope,e.scope),f=e.account.properties||{},g=f.UID||r.oid||r.sub||Te.EMPTY_STRING,y=f.TenantId||r.tid||Te.EMPTY_STRING,b=Kh(sn.getAccountInfo(a),void 0,r,e.id_token);b.nativeAccountId!==e.account.id&&(b.nativeAccountId=e.account.id);const H=await this.generatePopAccessToken(e,t),S=t.tokenType===Mt.POP?Mt.POP:Mt.BEARER;return{authority:A,uniqueId:g,tenantId:y,scopes:u.asArray(),account:b,idToken:e.id_token,idTokenClaims:r,accessToken:H,fromCache:p?this.isResponseFromCache(p):!1,expiresOn:Os(c+e.expires_in),tokenType:S,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,t,r){await this.browserStorage.setAccount(e,this.correlationId,r),this.browserStorage.removeAccountContext(sn.getAccountInfo(e),t)}cacheNativeTokens(e,t,r,a,A,c,p){const u=td(r,t.authority,e.id_token||"",t.clientId,a.tid||""),f=t.tokenType===Mt.POP?Te.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,g=p+f,y=this.generateScopes(e.scope,t.scope),b=nd(r,t.authority,A,t.clientId,a.tid||c,y.printScopes(),g,0,Xn,void 0,t.tokenType,void 0,t.keyId),H={idToken:u,accessToken:b};return this.nativeStorageManager.saveCacheRecord(H,this.correlationId,ao(a),t.storeInCache)}getExpiresInValue(e,t){return e===Mt.POP?Te.SHR_NONCE_VALIDITY:(typeof t=="string"?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=await this.getCanonicalAuthority(e),{scopes:r,...a}=e,A=new xn(r||[]);A.appendScopes(Zs);const c={...a,accountId:this.accountId,clientId:this.config.auth.clientId,authority:t.urlString,scope:A.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(c.signPopToken&&e.popKid)throw Ve(Cv);if(this.handleExtraBrokerParams(c),c.extraParameters=c.extraParameters||{},c.extraParameters.telemetry=kr.MATS_TELEMETRY,e.authenticationScheme===Mt.POP){const p={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},u=new Ys(this.browserCrypto);let f;if(c.keyId)f=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:c.keyId})),c.signPopToken=!1;else{const g=await Ie(u.generateCnf.bind(u),ee.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(p,this.logger);f=g.reqCnfString,c.keyId=g.kid,c.signPopToken=!0}c.reqCnf=f}return this.addRequestSKUs(c),c}async getCanonicalAuthority(e){const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new Et(t);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case Ft.ssoSilent:case Ft.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Rn.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case Rn.NONE:case Rn.CONSENT:case Rn.LOGIN:case Rn.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),Ve(vv)}}handleExtraBrokerParams(e){var A;const t=e.extraParameters&&e.extraParameters.hasOwnProperty(Cc)&&e.extraParameters.hasOwnProperty(Bc)&&e.extraParameters.hasOwnProperty(qi);if(!e.embeddedClientId&&!t)return;let r="";const a=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[Bc],r=e.extraParameters[qi]),e.extraParameters={child_client_id:r,child_redirect_uri:a},(A=this.performanceClient)==null||A.addFields({embeddedClientId:r,embeddedRedirectUri:a},this.correlationId)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function jg(i,e,t,r,a){const A=dE({...i.auth,authority:e},t,r,a);if(eg(A,{sku:ir.MSAL_SKU,version:es,os:"",cpu:""}),i.auth.protocolMode!==sr.OIDC&&tg(A,i.telemetry.application),t.platformBroker&&(TI(A),a.addFields({isPlatformAuthorizeRequest:!0},t.correlationId),t.authenticationScheme===Mt.POP)){const c=new Uo(r,a),p=new Ys(c);let u;t.popKid?u=c.encodeKid(t.popKid):u=(await Ie(p.generateCnf.bind(p),ee.PopTokenGenerateCnf,r,a,t.correlationId)(t,r)).reqCnfString,og(A,u)}return qc(A,t.correlationId,a),A}async function Fg(i,e,t,r,a){if(!t.codeChallenge)throw Ht(_h);const A=await Ie(jg,ee.GetStandardParams,r,a,t.correlationId)(i,e,t,r,a);return $h(A,Th.CODE),ng(A,t.codeChallenge,Te.S256_CODE_CHALLENGE_METHOD),gi(A,t.extraQueryParameters||{}),lg(e,A,i.auth.encodeExtraQueryParams,t.extraQueryParameters)}async function Ug(i,e,t,r,a,A){if(!r.earJwk)throw Ve(pg);const c=await jg(e,t,r,a,A);$h(c,Th.IDTOKEN_TOKEN_REFRESHTOKEN),NI(c,r.earJwk),ng(c,r.codeChallenge,Te.S256_CODE_CHALLENGE_METHOD);const p=new Map;gi(p,r.extraQueryParameters||{});const u=lg(t,p,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return Wv(i,u,c)}async function Qg(i,e,t,r,a,A){const c=await jg(e,t,r,a,A);$h(c,Th.CODE),ng(c,r.codeChallenge,r.codeChallengeMethod||Te.S256_CODE_CHALLENGE_METHOD),_I(c,r.authorizePostBodyParameters||{});const p=new Map;gi(p,r.extraQueryParameters||{});const u=lg(t,p,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return Wv(i,u,c)}function Wv(i,e,t){const r=i.createElement("form");return r.method="post",r.action=e,t.forEach((a,A)=>{const c=i.createElement("input");c.hidden=!0,c.name=A,c.value=a,r.appendChild(c)}),i.body.appendChild(r),r}async function Gv(i,e,t,r,a,A,c,p,u,f){if(p.verbose("Account id found, calling WAM for token"),!f)throw Ve(mg);const g=new Uo(p,u),y=new lc(r,a,g,p,c,r.system.navigationClient,t,u,f,e,A,i.correlationId),{userRequestState:b}=ta.parseRequestState(g,i.state);return Ie(y.acquireToken.bind(y),ee.NativeInteractionClientAcquireToken,p,u,i.correlationId)({...i,state:b,prompt:void 0})}async function Ws(i,e,t,r,a,A,c,p,u,f,g,y){if(ro.removeThrottle(c,a.auth.clientId,i),e.accountId)return Ie(Gv,ee.HandleResponsePlatformBroker,f,g,i.correlationId)(i,e.accountId,r,a,c,p,u,f,g,y);const b={...i,code:e.code||"",codeVerifier:t},H=new Ov(A,c,b,f,g);return await Ie(H.handleCodeResponse.bind(H),ee.HandleCodeResponse,f,g,i.correlationId)(e,i)}async function Rg(i,e,t,r,a,A,c,p,u,f,g){if(ro.removeThrottle(A,r.auth.clientId,i),Vb(e,i.state),!e.ear_jwe)throw Ve(Xb);if(!i.earJwk)throw Ve(pg);const y=JSON.parse(await Ie(NE,ee.DecryptEarResponse,u,f,i.correlationId)(i.earJwk,e.ear_jwe));if(y.accountId)return Ie(Gv,ee.HandleResponsePlatformBroker,u,f,i.correlationId)(i,y.accountId,t,r,A,c,p,u,f,g);const b=new Zi(r.auth.clientId,A,new Uo(u,f),u,null,null,f);b.validateTokenResponse(y);const H={code:"",state:i.state,nonce:i.nonce,client_info:y.client_info,cloud_graph_host_name:y.cloud_graph_host_name,cloud_instance_host_name:y.cloud_instance_host_name,cloud_instance_name:y.cloud_instance_name,msgraph_host:y.msgraph_host};return await Ie(b.handleServerTokenResponse.bind(b),ee.HandleServerTokenResponse,u,f,i.correlationId)(y,a,Ar(),i,H,void 0,void 0,void 0,void 0)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const Q5=32;async function ns(i,e,t){i.addQueueMeasurement(ee.GeneratePkceCodes,t);const r=yr(R5,ee.GenerateCodeVerifier,e,i,t)(i,e,t),a=await Ie(M5,ee.GenerateCodeChallengeFromVerifier,e,i,t)(r,i,e,t);return{verifier:r,challenge:a}}function R5(i,e,t){try{const r=new Uint8Array(Q5);return yr(ME,ee.GetRandomValues,e,i,t)(r),bi(r)}catch{throw Ve(ug)}}async function M5(i,e,t,r){e.addQueueMeasurement(ee.GenerateCodeChallengeFromVerifier,r);try{const a=await Ie(jv,ee.Sha256Digest,t,e,r)(i,e,r);return bi(new Uint8Array(a))}catch{throw Ve(ug)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Qc{constructor(e,t,r,a){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=a,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(ee.NativeMessageHandlerHandshake),this.platformAuthType=kr.PLATFORM_EXTENSION_PROVIDER}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const t={method:Na.GetToken,request:e},r={channel:kr.CHANNEL_ID,extensionId:this.extensionId,responseId:Gr(),body:t};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const a=await new Promise((c,p)=>{this.resolvers.set(r.responseId,{resolve:c,reject:p})});return this.validatePlatformBrokerResponse(a)}static async createProvider(e,t,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const a=new Qc(e,t,r,kr.PREFERRED_EXTENSION_ID);return await a.sendHandshakeRequest(),a}catch{const A=new Qc(e,t,r);return await A.sendHandshakeRequest(),A}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:kr.CHANNEL_ID,extensionId:this.extensionId,responseId:Gr(),body:{method:Na.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(Ve(yv)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const t=e.data;if(!(!t.channel||t.channel!==kr.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===Na.HandshakeRequest){const r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(Ve(bv))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const t=e.data,r=this.resolvers.get(t.responseId),a=this.handshakeResolvers.get(t.responseId);try{const A=t.body.method;if(A===Na.Response){if(!r)return;const c=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(c)}`),c.status!=="Success")r.reject(Uc(c.code,c.description,c.ext));else if(c.result)c.result.code&&c.result.description?r.reject(Uc(c.result.code,c.result.description,c.result.ext)):r.resolve(c.result);else throw _p(mc,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(A===Na.HandshakeResponse){if(!a){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),a.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(A){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${A}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(A):a&&a.reject(A)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw _p(mc,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){var e;return this.getExtensionId()===kr.PREFERRED_EXTENSION_ID?"chrome":(e=this.getExtensionId())!=null&&e.length?"unknown":void 0}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Mg{constructor(e,t,r){this.logger=e,this.performanceClient=t,this.correlationId=r,this.platformAuthType=kr.PLATFORM_DOM_PROVIDER}static async createProvider(e,t,r){var a;if(e.trace("PlatformAuthDOMHandler: createProvider called"),(a=window.navigator)!=null&&a.platformAuthentication){const A=await window.navigator.platformAuthentication.getSupportedContracts(kr.MICROSOFT_ENTRA_BROKERID);if(A!=null&&A.includes(kr.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new Mg(e,t,r)}}getExtensionId(){return kr.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return kr.DOM_API_NAME}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const t=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(t);return this.validatePlatformBrokerResponse(r)}catch(t){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),t}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:t,clientId:r,authority:a,scope:A,redirectUri:c,correlationId:p,state:u,storeInCache:f,embeddedClientId:g,extraParameters:y,...b}=e,H=this.getDOMExtraParams(b);return{accountId:t,brokerId:this.getExtensionId(),authority:a,clientId:r,correlationId:p||this.correlationId,extraParameters:{...y,...H},isSecurityTokenService:!1,redirectUri:c,scope:A,state:u,storeInCache:f,embeddedClientId:g}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const t=e;if(t.isSuccess===!1&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),Uc(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw _p(mc,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((a,[A,c])=>(a[A]=String(c),a),{})}}}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function L5(i,e,t,r){i.trace("getPlatformAuthProvider called",t);const a=D5();i.trace("Has client allowed platform auth via DOM API: "+a);let A;try{a&&(A=await Mg.createProvider(i,e,t)),A||(i.trace("Platform auth via DOM API not available, checking for extension"),A=await Qc.createProvider(i,r||Pv,e))}catch(c){i.trace("Platform auth not available",c)}return A}function D5(){let i;try{return i=window[En.SessionStorage],(i==null?void 0:i.getItem(n5))==="true"}catch{return!1}}function mA(i,e,t,r){if(e.trace("isPlatformAuthAllowed called"),!i.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!t)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case Mt.BEARER:case Mt.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}/*! @azure/msal-browser v4.26.2 2025-11-19 */class P5 extends ra{constructor(e,t,r,a,A,c,p,u,f,g){super(e,t,r,a,A,c,p,f,g),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=u,this.eventHandler=A}acquireToken(e,t){let r;try{if(r={popupName:this.generatePopupName(e.scopes||Zs,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t);{const A={...e,httpMethod:_v(e,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(A,r,t)}}catch(a){return Promise.reject(a)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},a=e&&e.authority,A=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,a,A)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,a,A))}catch(t){return Promise.reject(t)}}async acquireTokenPopupAsync(e,t,r){this.logger.verbose("acquireTokenPopupAsync called");const a=await Ie(this.initializeAuthorizationRequest.bind(this),ee.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,ct.Popup);t.popup&&Dv(a.authority);const A=mA(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return a.platformBroker=A,this.config.auth.protocolMode===sr.EAR?this.executeEarFlow(a,t,r):this.executeCodeFlow(a,t,r)}async executeCodeFlow(e,t,r){var u;const a=e.correlationId,A=this.initializeServerTelemetryManager(Ft.acquireTokenPopup),c=r||await Ie(ns,ee.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),p={...e,codeChallenge:c.challenge};try{const f=await Ie(this.createAuthCodeClient.bind(this),ee.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,a)({serverTelemetryManager:A,requestAuthority:p.authority,requestAzureCloudOptions:p.azureCloudOptions,requestExtraQueryParameters:p.extraQueryParameters,account:p.account});if(p.httpMethod===zi.POST)return await this.executeCodeFlowWithPost(p,t,f,c.verifier);{const g=await Ie(Fg,ee.GetAuthCodeUrl,this.logger,this.performanceClient,a)(this.config,f.authority,p,this.logger,this.performanceClient),y=this.initiateAuthRequest(g,t);this.eventHandler.emitEvent(Xe.POPUP_OPENED,ct.Popup,{popupWindow:y},null);const b=await this.monitorPopupForHash(y,t.popupWindowParent),H=yr(oA,ee.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(b,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await Ie(Ws,ee.HandleResponseCode,this.logger,this.performanceClient,a)(e,H,c.verifier,Ft.acquireTokenPopup,this.config,f,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(f){throw(u=t.popup)==null||u.close(),f instanceof Lt&&(f.setCorrelationId(this.correlationId),A.cacheFailedRequest(f)),f}}async executeEarFlow(e,t,r){const a=e.correlationId,A=await Ie(this.getDiscoveredAuthority.bind(this),ee.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),c=await Ie(wg,ee.GenerateEarKey,this.logger,this.performanceClient,a)(),p=r||await Ie(ns,ee.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),u={...e,earJwk:c,codeChallenge:p.challenge},f=t.popup||this.openPopup("about:blank",t);(await Ug(f.document,this.config,A,u,this.logger,this.performanceClient)).submit();const y=await Ie(this.monitorPopupForHash.bind(this),ee.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,a)(f,t.popupWindowParent),b=yr(oA,ee.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(!b.ear_jwe&&b.code){const H=await Ie(this.createAuthCodeClient.bind(this),ee.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,a)({serverTelemetryManager:this.initializeServerTelemetryManager(Ft.acquireTokenPopup),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:A});return Ie(Ws,ee.HandleResponseCode,this.logger,this.performanceClient,a)(u,b,p.verifier,Ft.acquireTokenPopup,this.config,H,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return Ie(Rg,ee.HandleResponseEar,this.logger,this.performanceClient,a)(u,b,Ft.acquireTokenPopup,this.config,A,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,t,r,a){const A=e.correlationId,c=await Ie(this.getDiscoveredAuthority.bind(this),ee.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,A)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),p=t.popup||this.openPopup("about:blank",t);(await Qg(p.document,this.config,c,e,this.logger,this.performanceClient)).submit();const f=await Ie(this.monitorPopupForHash.bind(this),ee.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,A)(p,t.popupWindowParent),g=yr(oA,ee.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(f,this.config.auth.OIDCOptions.serverResponseType,this.logger);return Ie(Ws,ee.HandleResponseCode,this.logger,this.performanceClient,A)(e,g,a,Ft.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,t,r,a){var c,p,u;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Xe.LOGOUT_START,ct.Popup,e);const A=this.initializeServerTelemetryManager(Ft.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,e.account);const f=await Ie(this.createAuthCodeClient.bind(this),ee.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:A,requestAuthority:r,account:e.account||void 0});try{f.authority.endSessionEndpoint}catch{if((c=e.account)!=null&&c.homeAccountId&&e.postLogoutRedirectUri&&f.authority.protocolMode===sr.OIDC){if(this.eventHandler.emitEvent(Xe.LOGOUT_SUCCESS,ct.Popup,e),a){const b={apiId:Ft.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},H=Et.getAbsoluteUrl(a,Io());await this.navigationClient.navigateInternal(H,b)}(p=t.popup)==null||p.close();return}}const g=f.getLogoutUri(e);this.eventHandler.emitEvent(Xe.LOGOUT_SUCCESS,ct.Popup,e);const y=this.openPopup(g,t);if(this.eventHandler.emitEvent(Xe.POPUP_OPENED,ct.Popup,{popupWindow:y},null),await this.monitorPopupForHash(y,t.popupWindowParent).catch(()=>{}),a){const b={apiId:Ft.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},H=Et.getAbsoluteUrl(a,Io());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${H}`),await this.navigationClient.navigateInternal(H,b)}else this.logger.verbose("No main window navigation requested")}catch(f){throw(u=t.popup)==null||u.close(),f instanceof Lt&&(f.setCorrelationId(this.correlationId),A.cacheFailedRequest(f)),this.eventHandler.emitEvent(Xe.LOGOUT_FAILURE,ct.Popup,null,f),this.eventHandler.emitEvent(Xe.LOGOUT_END,ct.Popup),f}this.eventHandler.emitEvent(Xe.LOGOUT_END,ct.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),Ve(ad)}monitorPopupForHash(e,t){return new Promise((r,a)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const A=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(A),a(Ve(gA));return}let c="";try{c=e.location.href}catch{}if(!c||c==="about:blank")return;clearInterval(A);let p="";const u=this.config.auth.OIDCOptions.serverResponseType;e&&(u===Yc.QUERY?p=e.location.search:p=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(p)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw Ve(ov);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),Ve(rv)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:a}){var H,S,L,Q;const A=a.screenLeft?a.screenLeft:a.screenX,c=a.screenTop?a.screenTop:a.screenY,p=a.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,u=a.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let f=(H=r.popupSize)==null?void 0:H.width,g=(S=r.popupSize)==null?void 0:S.height,y=(L=r.popupPosition)==null?void 0:L.top,b=(Q=r.popupPosition)==null?void 0:Q.left;return(!f||f<0||f>p)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),f=ir.POPUP_WIDTH),(!g||g<0||g>u)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),g=ir.POPUP_HEIGHT),(!y||y<0||y>u)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),y=Math.max(0,u/2-ir.POPUP_HEIGHT/2+c)),(!b||b<0||b>p)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),b=Math.max(0,p/2-ir.POPUP_WIDTH/2+A)),a.open(e,t,`width=${f}, height=${g}, top=${y}, left=${b}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return`${ir.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return`${ir.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function H5(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const i=window.performance.getEntriesByType("navigation"),e=i.length?i[0]:void 0;return e==null?void 0:e.type}class N5 extends ra{constructor(e,t,r,a,A,c,p,u,f,g){super(e,t,r,a,A,c,p,f,g),this.nativeStorage=u}async acquireToken(e){const t=await Ie(this.initializeAuthorizationRequest.bind(this),ee.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,ct.Redirect);t.platformBroker=mA(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const r=A=>{A.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(Xe.RESTORE_FROM_BFCACHE,ct.Redirect))},a=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${a}`),this.browserStorage.setTemporaryCache(ln.ORIGIN_URI,a,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===sr.EAR?await this.executeEarFlow(t):await this.executeCodeFlow(t,e.onRedirectNavigate)}catch(A){throw A instanceof Lt&&A.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),A}}async executeCodeFlow(e,t){const r=e.correlationId,a=this.initializeServerTelemetryManager(Ft.acquireTokenRedirect),A=await Ie(ns,ee.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),c={...e,codeChallenge:A.challenge};this.browserStorage.cacheAuthorizeRequest(c,A.verifier);try{if(c.httpMethod===zi.POST)return await this.executeCodeFlowWithPost(c);{const p=await Ie(this.createAuthCodeClient.bind(this),ee.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:c.authority,requestAzureCloudOptions:c.azureCloudOptions,requestExtraQueryParameters:c.extraQueryParameters,account:c.account}),u=await Ie(Fg,ee.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,p.authority,c,this.logger,this.performanceClient);return await this.initiateAuthRequest(u,t)}}catch(p){throw p instanceof Lt&&(p.setCorrelationId(this.correlationId),a.cacheFailedRequest(p)),p}}async executeEarFlow(e){const t=e.correlationId,r=await Ie(this.getDiscoveredAuthority.bind(this),ee.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=await Ie(wg,ee.GenerateEarKey,this.logger,this.performanceClient,t)(),A=await Ie(ns,ee.GeneratePkceCodes,this.logger,this.performanceClient,t)(this.performanceClient,this.logger,t),c={...e,earJwk:a,codeChallenge:A.challenge};return this.browserStorage.cacheAuthorizeRequest(c,A.verifier),(await Ug(document,this.config,r,c,this.logger,this.performanceClient)).submit(),new Promise((u,f)=>{setTimeout(()=>{f(Ve(jc,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const t=e.correlationId,r=await Ie(this.getDiscoveredAuthority.bind(this),ee.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(await Qg(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((A,c)=>{setTimeout(()=>{c(Ve(jc,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e="",t,r,a){const A=this.initializeServerTelemetryManager(Ft.handleRedirectPromise);try{const[c,p]=this.getRedirectResponse(e||"");if(!c)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),H5()!=="back_forward"?a.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const u=this.browserStorage.getTemporaryCache(ln.ORIGIN_URI,!0)||Te.EMPTY_STRING,f=zm(u),g=zm(window.location.href);if(f===g&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),u.indexOf("#")>-1&&OE(u),await this.handleResponse(c,t,r,A);if(this.config.auth.navigateToLoginRequestUrl){if(!Sg()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(ln.URL_HASH,p,!0);const y={apiId:Ft.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let b=!0;if(!u||u==="null"){const H=KE();this.browserStorage.setTemporaryCache(ln.ORIGIN_URI,H,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),b=await this.navigationClient.navigateInternal(H,y)}else this.logger.verbose(`Navigating to loginRequestUrl: ${u}`),b=await this.navigationClient.navigateInternal(u,y);if(!b)return await this.handleResponse(c,t,r,A)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(c,t,r,A);return null}catch(c){throw c instanceof Lt&&(c.setCorrelationId(this.correlationId),A.cacheFailedRequest(c)),c}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===Yc.QUERY?t=window.location.search:t=window.location.hash);let r=bc(t);if(r){try{w5(r,this.browserCrypto,ct.Redirect)}catch(A){return A instanceof Lt&&this.logger.error(`Interaction type validation failed due to ${A.errorCode}: ${A.errorMessage}`),[null,""]}return Rv(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}const a=this.browserStorage.getTemporaryCache(ln.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(ln.URL_HASH)),a&&(r=bc(a),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,a]):[null,""]}async handleResponse(e,t,r,a){if(!e.state)throw Ve(hg);if(e.ear_jwe){const p=await Ie(this.getDiscoveredAuthority.bind(this),ee.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return Ie(Rg,ee.HandleResponseEar,this.logger,this.performanceClient,t.correlationId)(t,e,Ft.acquireTokenRedirect,this.config,p,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const c=await Ie(this.createAuthCodeClient.bind(this),ee.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:t.authority});return Ie(Ws,ee.HandleResponseCode,this.logger,this.performanceClient,t.correlationId)(t,e,r,Ft.acquireTokenRedirect,this.config,c,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:Ft.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=t||this.config.auth.onRedirectNavigate;if(typeof a=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),a(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Ve(ad)}async logout(e){var a;this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(Ft.logout);try{this.eventHandler.emitEvent(Xe.LOGOUT_START,ct.Redirect,e),await this.clearCacheOnLogout(this.correlationId,t.account);const A={apiId:Ft.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=await Ie(this.createAuthCodeClient.bind(this),ee.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(c.authority.protocolMode===sr.OIDC)try{c.authority.endSessionEndpoint}catch{if((a=t.account)!=null&&a.homeAccountId){this.eventHandler.emitEvent(Xe.LOGOUT_SUCCESS,ct.Redirect,t);return}}const p=c.getLogoutUri(t);if(this.eventHandler.emitEvent(Xe.LOGOUT_SUCCESS,ct.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(p)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,si.SIGNOUT),await this.navigationClient.navigateExternal(p,A);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,si.SIGNOUT),await this.navigationClient.navigateExternal(p,A);return}}catch(A){throw A instanceof Lt&&(A.setCorrelationId(this.correlationId),r.cacheFailedRequest(A)),this.eventHandler.emitEvent(Xe.LOGOUT_FAILURE,ct.Redirect,null,A),this.eventHandler.emitEvent(Xe.LOGOUT_END,ct.Redirect),A}this.eventHandler.emitEvent(Xe.LOGOUT_END,ct.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return Et.getAbsoluteUrl(t,Io())}}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function _5(i,e,t,r,a){if(e.addQueueMeasurement(ee.SilentHandlerInitiateAuthRequest,r),!i)throw t.info("Navigate url is empty"),Ve(ad);return a?Ie(K5,ee.SilentHandlerLoadFrame,t,e,r)(i,a,e,r):yr(W5,ee.SilentHandlerLoadFrameSync,t,e,r)(i)}async function O5(i,e,t,r,a){const A=ud();if(!A.contentDocument)throw"No document associated with iframe!";return(await Qg(A.contentDocument,i,e,t,r,a)).submit(),A}async function z5(i,e,t,r,a){const A=ud();if(!A.contentDocument)throw"No document associated with iframe!";return(await Ug(A.contentDocument,i,e,t,r,a)).submit(),A}async function bx(i,e,t,r,a,A,c){return r.addQueueMeasurement(ee.SilentHandlerMonitorIframeForHash,A),new Promise((p,u)=>{e<Zp&&a.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Zp}ms). This may result in timeouts.`);const f=window.setTimeout(()=>{window.clearInterval(g),u(Ve(iv))},e),g=window.setInterval(()=>{let y="";const b=i.contentWindow;try{y=b?b.location.href:""}catch{}if(!y||y==="about:blank")return;let H="";b&&(c===Yc.QUERY?H=b.location.search:H=b.location.hash),window.clearTimeout(f),window.clearInterval(g),p(H)},t)}).finally(()=>{yr(G5,ee.RemoveHiddenIframe,a,r,A)(i)})}function K5(i,e,t,r){return t.addQueueMeasurement(ee.SilentHandlerLoadFrame,r),new Promise((a,A)=>{const c=ud();window.setTimeout(()=>{if(!c){A("Unable to load iframe");return}c.src=i,a(c)},e)})}function W5(i){const e=ud();return e.src=i,e}function ud(){const i=document.createElement("iframe");return i.className="msalSilentIframe",i.style.visibility="hidden",i.style.position="absolute",i.style.width=i.style.height="0",i.style.border="0",i.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),i.setAttribute("allow","local-network-access *"),document.body.appendChild(i),i}function G5(i){document.body===i.parentNode&&document.body.removeChild(i)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class V5 extends ra{constructor(e,t,r,a,A,c,p,u,f,g,y){super(e,t,r,a,A,c,u,g,y),this.apiId=p,this.nativeStorage=f}async acquireToken(e){this.performanceClient.addQueueMeasurement(ee.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t={...e};t.prompt?t.prompt!==Rn.NONE&&t.prompt!==Rn.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${Rn.NONE}`),t.prompt=Rn.NONE):t.prompt=Rn.NONE;const r=await Ie(this.initializeAuthorizationRequest.bind(this),ee.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,ct.Silent);return r.platformBroker=mA(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),Dv(r.authority),this.config.auth.protocolMode===sr.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let t;const r=this.initializeServerTelemetryManager(this.apiId);try{return t=await Ie(this.createAuthCodeClient.bind(this),ee.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await Ie(this.silentTokenHelper.bind(this),ee.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(a){if(a instanceof Lt&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),!t||!(a instanceof Lt)||a.errorCode!==ir.INVALID_GRANT_ERROR)throw a;return this.performanceClient.addFields({retryError:a.errorCode},this.correlationId),await Ie(this.silentTokenHelper.bind(this),ee.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(t,e)}}async executeEarFlow(e){const t=e.correlationId,r=await Ie(this.getDiscoveredAuthority.bind(this),ee.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=await Ie(wg,ee.GenerateEarKey,this.logger,this.performanceClient,t)(),A=await Ie(ns,ee.GeneratePkceCodes,this.logger,this.performanceClient,t)(this.performanceClient,this.logger,t),c={...e,earJwk:a,codeChallenge:A.challenge},p=await Ie(z5,ee.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,t)(this.config,r,c,this.logger,this.performanceClient),u=this.config.auth.OIDCOptions.serverResponseType,f=await Ie(bx,ee.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,t)(p,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,u),g=yr(oA,ee.DeserializeResponse,this.logger,this.performanceClient,t)(f,u,this.logger);if(!g.ear_jwe&&g.code){const y=await Ie(this.createAuthCodeClient.bind(this),ee.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,t)({serverTelemetryManager:this.initializeServerTelemetryManager(this.apiId),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:r});return Ie(Ws,ee.HandleResponseCode,this.logger,this.performanceClient,t)(c,g,A.verifier,this.apiId,this.config,y,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return Ie(Rg,ee.HandleResponseEar,this.logger,this.performanceClient,t)(c,g,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(Ve(Ad))}async silentTokenHelper(e,t){const r=t.correlationId;this.performanceClient.addQueueMeasurement(ee.SilentIframeClientTokenHelper,r);const a=await Ie(ns,ee.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),A={...t,codeChallenge:a.challenge};let c;if(t.httpMethod===zi.POST)c=await Ie(O5,ee.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,e.authority,A,this.logger,this.performanceClient);else{const g=await Ie(Fg,ee.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,A,this.logger,this.performanceClient);c=await Ie(_5,ee.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(g,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const p=this.config.auth.OIDCOptions.serverResponseType,u=await Ie(bx,ee.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(c,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,p),f=yr(oA,ee.DeserializeResponse,this.logger,this.performanceClient,r)(u,p,this.logger);return Ie(Ws,ee.HandleResponseCode,this.logger,this.performanceClient,r)(t,f,a.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class $5 extends ra{async acquireToken(e){this.performanceClient.addQueueMeasurement(ee.SilentRefreshClientAcquireToken,e.correlationId);const t=await Ie(Tg,ee.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...t};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const a=this.initializeServerTelemetryManager(Ft.acquireTokenSilent_silentFlow),A=await this.createRefreshTokenClient({serverTelemetryManager:a,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return Ie(A.acquireTokenByRefreshToken.bind(A),ee.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(c=>{throw c.setCorrelationId(this.correlationId),a.cacheFailedRequest(c),c})}logout(){return Promise.reject(Ve(Ad))}async createRefreshTokenClient(e){const t=await Ie(this.getClientConfiguration.bind(this),ee.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new AE(t,this.performanceClient)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Y5{constructor(e,t,r,a){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=a}async loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw Ve(ld);const a=e.correlationId||Gr(),A=t.id_token?io(t.id_token,Xn):void 0,c=ao(A||{}),p={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},u=e.authority?new zn(zn.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,p,this.logger,e.correlationId||Gr()):void 0,f=await this.loadAccount(e,r.clientInfo||t.client_info||"",a,A,u),g=await this.loadIdToken(t,f.homeAccountId,f.environment,f.realm,a,c),y=await this.loadAccessToken(e,t,f.homeAccountId,f.environment,f.realm,r,a,c),b=await this.loadRefreshToken(t,f.homeAccountId,f.environment,a,c);return this.generateAuthenticationResult(e,{account:f,idToken:g,accessToken:y,refreshToken:b},A,u)}async loadAccount(e,t,r,a,A){if(this.logger.verbose("TokenCache - loading account"),e.account){const f=sn.createFromAccountInfo(e.account);return await this.storage.setAccount(f,r,ao(a||{})),f}else if(!A||!t&&!a)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Ve(hv);const c=sn.generateHomeAccountId(t,A.authorityType,this.logger,this.cryptoObj,a),p=a==null?void 0:a.tid,u=Ag(this.storage,A,c,Xn,r,a,t,A.hostnameAndPort,p,void 0,void 0,this.logger);return await this.storage.setAccount(u,r,ao(a||{})),u}async loadIdToken(e,t,r,a,A,c){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const p=td(t,r,e.id_token,this.config.auth.clientId,a);return await this.storage.setIdTokenCredential(p,A,c),p}async loadAccessToken(e,t,r,a,A,c,p,u){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const f=t.scope?xn.fromString(t.scope):new xn(e.scopes),g=c.expiresOn||t.expires_in+Ar(),y=c.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+Ar(),b=nd(r,a,t.access_token,this.config.auth.clientId,A,f.printScopes(),g,y,Xn);return await this.storage.setAccessTokenCredential(b,p,u),b}async loadRefreshToken(e,t,r,a,A){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const c=Nb(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(c,a,A),c}generateAuthenticationResult(e,t,r,a){var g,y,b;let A="",c=[],p=null,u;t!=null&&t.accessToken&&(A=t.accessToken.secret,c=xn.fromString(t.accessToken.target).asArray(),p=Os(t.accessToken.expiresOn),u=Os(t.accessToken.extendedExpiresOn));const f=t.account;return{authority:a?a.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:c,account:sn.getAccountInfo(f),idToken:((g=t.idToken)==null?void 0:g.secret)||"",idTokenClaims:r||{},accessToken:A,fromCache:!0,expiresOn:p,correlationId:e.correlationId||"",requestId:"",extExpiresOn:u,familyId:((y=t.refreshToken)==null?void 0:y.familyId)||"",tokenType:((b=t==null?void 0:t.accessToken)==null?void 0:b.tokenType)||"",state:e.state||"",cloudGraphHostName:f.cloudGraphHostName||"",msGraphHost:f.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class J5 extends Gb{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class X5 extends ra{constructor(e,t,r,a,A,c,p,u,f,g){super(e,t,r,a,A,c,u,f,g),this.apiId=p}async acquireToken(e){if(!e.code)throw Ve(gv);const t=await Ie(this.initializeAuthorizationRequest.bind(this),ee.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,ct.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const a={...t,code:e.code},A=await Ie(this.getClientConfiguration.bind(this),ee.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),c=new J5(A);this.logger.verbose("Auth code client created");const p=new Ov(c,this.browserStorage,a,this.logger,this.performanceClient);return await Ie(p.handleCodeResponseFromServer.bind(p),ee.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(a){throw a instanceof Lt&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),a}}logout(){return Promise.reject(Ve(Ad))}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function q5(i,e,t){var c;const r=((c=window.msal)==null?void 0:c.clientIds)||[],a=r.length,A=r.filter(p=>p===i).length;A>1&&t.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:a,sameClientIdInstanceCount:A})}/*! @azure/msal-browser v4.26.2 2025-11-19 */function Rl(i,e,t){try{Ig(i)}catch(r){throw e.end({success:!1},r,t),r}}class pd{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Uo(this.logger,this.performanceClient):xc,this.eventHandler=new y5(this.logger),this.browserStorage=this.isBrowserEnvironment?new th(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,ZI(this.config.auth)):c5(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const t={cacheLocation:En.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:En.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new th(this.config.auth.clientId,t,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new Y5(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const r=new pd(e);return await r.initialize(t),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,t){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(Xe.INITIALIZE_END);return}const r=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),a=this.config.system.allowPlatformBroker,A=this.performanceClient.startMeasurement(ee.InitializeClientApplication,r);if(this.eventHandler.emitEvent(Xe.INITIALIZE_START),!t)try{this.logMultipleInstances(A)}catch{}if(await Ie(this.browserStorage.initialize.bind(this.browserStorage),ee.InitializeCache,this.logger,this.performanceClient,r)(r),a)try{this.platformAuthProvider=await L5(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(c){this.logger.verbose(c)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yr(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),ee.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(Xe.INITIALIZE_END),A.end({allowPlatformBroker:a,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),Lv(this.initialized),this.isBrowserEnvironment){const t=e||"";let r=this.redirectResponse.get(t);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var u;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(((u=this.browserStorage.getInteractionInProgress())==null?void 0:u.type)===si.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),a=this.browserStorage.getCachedNativeRequest(),A=a&&this.platformAuthProvider&&!e;let c;this.eventHandler.emitEvent(Xe.HANDLE_REDIRECT_START,ct.Redirect);let p;try{if(A&&this.platformAuthProvider){c=this.performanceClient.startMeasurement(ee.AcquireTokenRedirect,(a==null?void 0:a.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),c.add({isPlatformBrokerRequest:!0});const f=new lc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ft.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,a.accountId,this.nativeInternalStorage,a.correlationId);p=Ie(f.handleRedirectPromise.bind(f),ee.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,c.event.correlationId)(this.performanceClient,c.event.correlationId)}else{const[f,g]=this.browserStorage.getCachedRequest(),y=f.correlationId;c=this.performanceClient.startMeasurement(ee.AcquireTokenRedirect,y),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const b=this.createRedirectClient(y);p=Ie(b.handleRedirectPromise.bind(b),ee.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,c.event.correlationId)(e,f,g,c)}}catch(f){throw this.browserStorage.resetRequestCache(),f}return p.then(f=>(f?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Xe.LOGIN_SUCCESS,ct.Redirect,f),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_SUCCESS,ct.Redirect,f),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),c.end({success:!0},void 0,f.account)):c.event.errorCode?c.end({success:!1},void 0):c.discard(),this.eventHandler.emitEvent(Xe.HANDLE_REDIRECT_END,ct.Redirect),f)).catch(f=>{this.browserStorage.resetRequestCache();const g=f;throw r.length>0?this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_FAILURE,ct.Redirect,null,g):this.eventHandler.emitEvent(Xe.LOGIN_FAILURE,ct.Redirect,null,g),this.eventHandler.emitEvent(Xe.HANDLE_REDIRECT_END,ct.Redirect),c.end({success:!1},g),f})}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const r=this.performanceClient.startMeasurement(ee.AcquireTokenPreRedirect,t);r.add({scenarioId:e.scenarioId});const a=e.onRedirectNavigate;if(a)e.onRedirectNavigate=c=>{const p=typeof a=="function"?a(c):void 0;return r.add({navigateCallbackResult:p!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,p};else{const c=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=p=>{const u=typeof c=="function"?c(p):void 0;return r.add({navigateCallbackResult:u!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,u}}const A=this.getAllAccounts().length>0;try{cx(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,si.SIGNIN),A?this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_START,ct.Redirect,e):this.eventHandler.emitEvent(Xe.LOGIN_START,ct.Redirect,e);let c;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?c=new lc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ft.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(u=>{if(r.add({brokerErrorName:u.name,brokerErrorCode:u.errorCode}),u instanceof oo&&Ls(u))return this.platformAuthProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(u instanceof Wr)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw u}):c=this.createRedirectClient(t).acquireToken(e),await c}catch(c){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(ee.AcquireTokenRedirect,t).end({success:!1},c,e.account):r.end({success:!1},c,e.account),A?this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_FAILURE,ct.Redirect,null,c):this.eventHandler.emitEvent(Xe.LOGIN_FAILURE,ct.Redirect,null,c),c}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(ee.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",t),Rl(this.initialized,r,e.account),this.browserStorage.setInteractionInProgress(!0,si.SIGNIN)}catch(p){return Promise.reject(p)}const a=this.getAllAccounts();a.length>0?this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_START,ct.Popup,e):this.eventHandler.emitEvent(Xe.LOGIN_START,ct.Popup,e);let A;const c=this.getPreGeneratedPkceCodes(t);return this.canUsePlatformBroker(e)?(r.add({isPlatformBrokerRequest:!0}),A=this.acquireTokenNative({...e,correlationId:t},Ft.acquireTokenPopup).then(p=>(r.end({success:!0},void 0,p.account),p)).catch(p=>{if(r.add({brokerErrorName:p.name,brokerErrorCode:p.errorCode}),p instanceof oo&&Ls(p))return this.platformAuthProvider=void 0,this.createPopupClient(t).acquireToken(e,c);if(p instanceof Wr)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e,c);throw p})):A=this.createPopupClient(t).acquireToken(e,c),A.then(p=>(a.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Xe.LOGIN_SUCCESS,ct.Popup,p):this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_SUCCESS,ct.Popup,p),r.end({success:!0,accessTokenSize:p.accessToken.length,idTokenSize:p.idToken.length},void 0,p.account),p)).catch(p=>(a.length>0?this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_FAILURE,ct.Popup,null,p):this.eventHandler.emitEvent(Xe.LOGIN_FAILURE,ct.Popup,null,p),r.end({success:!1},p,e.account),Promise.reject(p))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var A,c,p;const t=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:t};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(ee.SsoSilent,t),(A=this.ssoSilentMeasurement)==null||A.add({scenarioId:e.scenarioId}),Rl(this.initialized,this.ssoSilentMeasurement,e.account),(c=this.ssoSilentMeasurement)==null||c.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(Xe.SSO_SILENT_START,ct.Silent,r);let a;return this.canUsePlatformBroker(r)?((p=this.ssoSilentMeasurement)==null||p.add({isPlatformBrokerRequest:!0}),a=this.acquireTokenNative(r,Ft.ssoSilent).catch(u=>{var f;if((f=this.ssoSilentMeasurement)==null||f.add({brokerErrorName:u.name,brokerErrorCode:u.errorCode}),u instanceof oo&&Ls(u))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw u})):a=this.createSilentIframeClient(r.correlationId).acquireToken(r),a.then(u=>{var f;return this.eventHandler.emitEvent(Xe.SSO_SILENT_SUCCESS,ct.Silent,u),(f=this.ssoSilentMeasurement)==null||f.end({success:!0,accessTokenSize:u.accessToken.length,idTokenSize:u.idToken.length},void 0,u.account),u}).catch(u=>{var f;throw this.eventHandler.emitEvent(Xe.SSO_SILENT_FAILURE,ct.Silent,null,u),(f=this.ssoSilentMeasurement)==null||f.end({success:!1},u,e.account),u}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const r=this.performanceClient.startMeasurement(ee.AcquireTokenByCode,t);Rl(this.initialized,r),this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_BY_CODE_START,ct.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Ve(mv);if(e.code){const a=e.code;let A=this.hybridAuthCodeResponses.get(a);return A?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),A=this.acquireTokenByCodeAsync({...e,correlationId:t}).then(c=>(this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_BY_CODE_SUCCESS,ct.Silent,c),this.hybridAuthCodeResponses.delete(a),r.end({success:!0,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length},void 0,c.account),c)).catch(c=>{throw this.hybridAuthCodeResponses.delete(a),this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_BY_CODE_FAILURE,ct.Silent,null,c),r.end({success:!1},c),c}),this.hybridAuthCodeResponses.set(a,A)),await A}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const a=await this.acquireTokenNative({...e,correlationId:t},Ft.acquireTokenByCode,e.nativeAccountId).catch(A=>{throw A instanceof oo&&Ls(A)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:A.name,brokerErrorCode:A.errorCode}),A});return r.end({success:!0},void 0,a.account),a}else throw Ve(xv);else throw Ve(fv)}catch(a){throw this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_BY_CODE_FAILURE,ct.Silent,null,a),r.end({success:!1},a),a}}async acquireTokenByCodeAsync(e){var a;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(ee.AcquireTokenByCodeAsync,e.correlationId),(a=this.acquireTokenByCodeAsyncMeasurement)==null||a.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(A=>{var c;return(c=this.acquireTokenByCodeAsyncMeasurement)==null||c.end({success:!0,fromCache:A.fromCache}),A}).catch(A=>{var c;throw(c=this.acquireTokenByCodeAsyncMeasurement)==null||c.end({success:!1},A),A}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(ee.AcquireTokenFromCache,e.correlationId),t){case $n.Default:case $n.AccessToken:case $n.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return Ie(r.acquireToken.bind(r),ee.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw _e(hi)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(ee.AcquireTokenByRefreshToken,e.correlationId),t){case $n.Default:case $n.AccessTokenAndRefreshToken:case $n.RefreshToken:case $n.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return Ie(r.acquireToken.bind(r),ee.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw _e(hi)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(ee.AcquireTokenBySilentIframe,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return Ie(t.acquireToken.bind(t),ee.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect({correlationId:t,...e})}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);return cx(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,si.SIGNOUT),this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);return Ig(this.initialized),this.browserStorage.setInteractionInProgress(!0,si.SIGNOUT),this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){const t=this.getRequestCorrelationId();return d5(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){const t=this.getRequestCorrelationId();return u5(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){const t=this.getRequestCorrelationId();return p5(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){const t=this.getRequestCorrelationId();return h5(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){const t=this.getRequestCorrelationId();return g5(e,this.logger,this.browserStorage,t)}setActiveAccount(e){const t=this.getRequestCorrelationId();f5(e,this.browserStorage,t)}getActiveAccount(){const e=this.getRequestCorrelationId();return m5(this.browserStorage,e)}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const r=sn.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId,ao(e.idTokenClaims)),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,r,a){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw Ve(mg);return new lc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,a)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!mA(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Rn.NONE:case Rn.CONSENT:case Rn.LOGIN:case Rn.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new P5(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new N5(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new V5(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ft.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new Kv(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new $5(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new X5(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ft.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return Mv(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==En.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==En.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?Gr():Te.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect({correlationId:t,...e||ix})}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||ix})}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(ee.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Rl(this.initialized,r,e.account),this.logger.verbose("acquireTokenSilent called",t);const a=e.account||this.getActiveAccount();if(!a)throw Ve(lv);return this.acquireTokenSilentDeduped(e,a,t).then(A=>(r.end({success:!0,fromCache:A.fromCache,accessTokenSize:A.accessToken.length,idTokenSize:A.idToken.length},void 0,A.account),{...A,state:e.state,correlationId:t})).catch(A=>{throw A instanceof Lt&&A.setCorrelationId(t),r.end({success:!1},A,a),A})}async acquireTokenSilentDeduped(e,t,r){const a=od(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority},t.homeAccountId),A=JSON.stringify(a),c=this.activeSilentTokenRequests.get(A);if(typeof c>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const p=Ie(this.acquireTokenSilentAsync.bind(this),ee.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...e,correlationId:r},t);return this.activeSilentTokenRequests.set(A,p),p.finally(()=>{this.activeSilentTokenRequests.delete(A)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),c}async acquireTokenSilentAsync(e,t){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(ee.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_START,ct.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const a=await Ie(b5,ee.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),A=e.cacheLookupPolicy||$n.Default;return this.acquireTokenSilentNoIframe(a,A).catch(async p=>{if(Z5(p,A))if(this.activeIframeRequest)if(A!==$n.Skip){const[f,g]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${g}`,a.correlationId);const y=this.performanceClient.startMeasurement(ee.AwaitConcurrentIframe,a.correlationId);y.add({awaitIframeCorrelationId:g});const b=await f;if(y.end({success:b}),b)return this.logger.verbose(`Parallel iframe request with correlationId: ${g} succeeded. Retrying cache and/or RT redemption`,a.correlationId),this.acquireTokenSilentNoIframe(a,A);throw this.logger.info(`Iframe request with correlationId: ${g} failed. Interaction is required.`),p}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",a.correlationId),Ie(this.acquireTokenBySilentIframe.bind(this),ee.AcquireTokenBySilentIframe,this.logger,this.performanceClient,a.correlationId)(a);else{let f;return this.activeIframeRequest=[new Promise(g=>{f=g}),a.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",a.correlationId),Ie(this.acquireTokenBySilentIframe.bind(this),ee.AcquireTokenBySilentIframe,this.logger,this.performanceClient,a.correlationId)(a).then(g=>(f(!0),g)).catch(g=>{throw f(!1),g}).finally(()=>{this.activeIframeRequest=void 0})}else throw p}).then(p=>(this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_SUCCESS,ct.Silent,p),this.performanceClient.addFields({fromCache:p.fromCache},e.correlationId),p)).catch(p=>{throw this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_FAILURE,ct.Silent,null,p),p}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,t){return mA(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,Ft.acquireTokenSilent_silentFlow,e.account.nativeAccountId,t).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},e.correlationId),r instanceof oo&&Ls(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,_e(hi)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===$n.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),Ie(this.acquireTokenFromCache.bind(this),ee.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===$n.AccessToken)throw r;return this.eventHandler.emitEvent(Xe.ACQUIRE_TOKEN_NETWORK_START,ct.Silent,e),Ie(this.acquireTokenByRefreshToken.bind(this),ee.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await Ie(ns,ee.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${t?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){const t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),q5(t,e,this.logger)}}function Z5(i,e){const t=!(i instanceof Wr&&i.subError!==sd),r=i.errorCode===ir.INVALID_GRANT_ERROR||i.errorCode===hi,a=t&&r||i.errorCode===Ec||i.errorCode===sg,A=kE.includes(e);return a&&A}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function e4(i,e){const t=new ts(i);return await t.initialize(),pd.createController(t,e)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Lg{static async createPublicClientApplication(e){const t=await e4(e);return new Lg(e,t)}constructor(e,t){this.isBroker=!1,this.controller=t||new pd(new ts(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const t4={initialize:()=>Promise.reject(An(hn)),acquireTokenPopup:()=>Promise.reject(An(hn)),acquireTokenRedirect:()=>Promise.reject(An(hn)),acquireTokenSilent:()=>Promise.reject(An(hn)),acquireTokenByCode:()=>Promise.reject(An(hn)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(An(hn)),loginPopup:()=>Promise.reject(An(hn)),loginRedirect:()=>Promise.reject(An(hn)),logout:()=>Promise.reject(An(hn)),logoutRedirect:()=>Promise.reject(An(hn)),logoutPopup:()=>Promise.reject(An(hn)),ssoSilent:()=>Promise.reject(An(hn)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw An(hn)},getLogger:()=>{throw An(hn)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw An(hn)},hydrateCache:()=>Promise.reject(An(hn)),clearCache:()=>Promise.reject(An(hn))};/*! @azure/msal-browser v4.26.2 2025-11-19 */class n4{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case Xe.LOGIN_START:return gn.Login;case Xe.SSO_SILENT_START:return gn.SsoSilent;case Xe.ACQUIRE_TOKEN_START:if(e.interactionType===ct.Redirect||e.interactionType===ct.Popup)return gn.AcquireToken;break;case Xe.HANDLE_REDIRECT_START:return gn.HandleRedirect;case Xe.LOGOUT_START:return gn.Logout;case Xe.SSO_SILENT_SUCCESS:case Xe.SSO_SILENT_FAILURE:if(t&&t!==gn.SsoSilent)break;return gn.None;case Xe.LOGOUT_END:if(t&&t!==gn.Logout)break;return gn.None;case Xe.HANDLE_REDIRECT_END:if(t&&t!==gn.HandleRedirect)break;return gn.None;case Xe.LOGIN_SUCCESS:case Xe.LOGIN_FAILURE:case Xe.ACQUIRE_TOKEN_SUCCESS:case Xe.ACQUIRE_TOKEN_FAILURE:case Xe.RESTORE_FROM_BFCACHE:if(e.interactionType===ct.Redirect||e.interactionType===ct.Popup){if(t&&t!==gn.Login&&t!==gn.AcquireToken)break;return gn.None}break}return null}}/*! @azure/msal-react v3.0.22 2025-11-19 */const r4={instance:t4,inProgress:gn.None,accounts:[],logger:new ea({})},Dg=m.createContext(r4);Dg.Consumer;/*! @azure/msal-react v3.0.22 2025-11-19 */function vx(i,e){if(i.length!==e.length)return!1;const t=[...e];return i.every(r=>{const a=t.shift();return!r||!a?!1:r.homeAccountId===a.homeAccountId&&r.localAccountId===a.localAccountId&&r.username===a.username})}/*! @azure/msal-react v3.0.22 2025-11-19 */const o4="@azure/msal-react",wx="3.0.22";/*! @azure/msal-react v3.0.22 2025-11-19 */const Rc={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},i4=(i,e)=>{const{type:t,payload:r}=e;let a=i.inProgress;switch(t){case Rc.UNBLOCK_INPROGRESS:i.inProgress===gn.Startup&&(a=gn.None,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case Rc.EVENT:const c=r.message,p=n4.getInteractionStatusFromEvent(c,i.inProgress);p&&(r.logger.info(`MsalProvider - ${c.eventType} results in setting inProgress from ${i.inProgress} to ${p}`),a=p);break;default:throw new Error(`Unknown action type: ${t}`)}if(a===gn.Startup)return i;const A=r.instance.getAllAccounts();return a!==i.inProgress&&!vx(A,i.accounts)?{...i,inProgress:a,accounts:A}:a!==i.inProgress?{...i,inProgress:a}:vx(A,i.accounts)?i:{...i,accounts:A}};function s4({instance:i,children:e}){m.useEffect(()=>{i.initializeWrapperLibrary(SE.React,wx)},[i]);const t=m.useMemo(()=>i.getLogger().clone(o4,wx),[i]),[r,a]=m.useReducer(i4,void 0,()=>({inProgress:gn.Startup,accounts:[]}));m.useEffect(()=>{const c=i.addEventCallback(p=>{a({payload:{instance:i,logger:t,message:p},type:Rc.EVENT})});return t.verbose(`MsalProvider - Registered event callback with id: ${c}`),i.initialize().then(()=>{i.handleRedirectPromise().catch(()=>{}).finally(()=>{a({payload:{instance:i,logger:t},type:Rc.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{c&&(t.verbose(`MsalProvider - Removing event callback ${c}`),i.removeEventCallback(c))}},[i,t]);const A={instance:i,inProgress:r.inProgress,accounts:r.accounts,logger:t};return Ji.createElement(Dg.Provider,{value:A},e)}/*! @azure/msal-react v3.0.22 2025-11-19 */const Vv=()=>m.useContext(Dg),a4="https://maxcap.azurewebsites.net";async function Fe(i,e={}){const t=await fetch(`${a4}${i}`,{credentials:"include",...e,headers:{"Content-Type":"application/json",...e.headers||{}}});if(!t.ok){const r=await t.text();throw new Error(r||`API error: ${t.status}`)}return t}const A4=()=>{const{instance:i,accounts:e}=Vv(),[t,r]=m.useState({email:"",password:""}),[a,A]=m.useState(!1),[c,p]=m.useState(!1),[u,f]=m.useState(""),[g,y]=m.useState({x:window.innerWidth/2,y:window.innerHeight/2}),b=Ji.useRef({x:window.innerWidth/2,y:window.innerHeight/2}),H=Ji.useMemo(()=>Array.from({length:6}).map(()=>({top:Math.random()*100,left:Math.random()*100,delay:Math.random()*20})),[]),[S,L]=m.useState(!1),[Q,V]=m.useState({y:0,x:0,velocityY:0,velocityX:0,rotation:0,rotationVelocity:0,opacity:1,isFalling:!1}),[D,te]=m.useState({y:0,x:0,velocityY:0,velocityX:0,rotation:0,rotationVelocity:0,opacity:1}),J=1.2,M=125,N=.6,X=.98,Be=15,Ae=()=>{if(Q.isFalling)return;const re=(Math.random()-.5)*8,P=(Math.random()-.5)*Be;V({y:0,x:0,velocityY:0,velocityX:re,rotation:0,rotationVelocity:P,opacity:1,isFalling:!0}),te({y:0,x:0,velocityY:Math.random()*2-1,velocityX:(Math.random()-.5)*10,rotation:0,rotationVelocity:(Math.random()-.5)*20,opacity:1});let oe;const je=()=>{V(U=>{let B=U.velocityY+J,j=U.velocityX*X,_=U.y+B,ve=U.x+j,k=U.rotation+U.rotationVelocity,O=U.rotationVelocity*.99;return _>=M&&(_=M,B=-B*N,O*=.8,Math.abs(B)<.5&&Math.abs(j)<.1)?(setTimeout(()=>{V(Z=>({...Z,opacity:0})),te(Z=>({...Z,opacity:0}))},800),setTimeout(()=>{V({y:0,x:0,velocityY:0,velocityX:0,rotation:0,rotationVelocity:0,opacity:0,isFalling:!1}),te({y:0,x:0,velocityY:0,velocityX:0,rotation:0,rotationVelocity:0,opacity:0})},1200),setTimeout(()=>{V(Z=>({...Z,opacity:1})),te(Z=>({...Z,opacity:1}))},1500),cancelAnimationFrame(oe),U):{...U,y:_,x:ve,velocityY:B,velocityX:j,rotation:k,rotationVelocity:O}}),te(U=>{let B=U.velocityY+J,j=U.velocityX*X,_=U.y+B,ve=U.x+j,k=U.rotation+U.rotationVelocity,O=U.rotationVelocity*.99;return _>=M+10&&(_=M+10,B=-B*N*.7,O*=.7),{y:_,x:ve,velocityY:B,velocityX:j,rotation:k,rotationVelocity:O,opacity:U.opacity}}),oe=requestAnimationFrame(je)};oe=requestAnimationFrame(je)},[le,G]=m.useState(0),[se,pe]=m.useState(!0),Me=["Clarity for planning, approvals, and execution.","Designed for signal. Built to reduce guesswork.","Insight you can defend  not just display."];m.useEffect(()=>{const re=setInterval(()=>{pe(!1),setTimeout(()=>{G(P=>(P+1)%Me.length),pe(!0)},300)},3e3);return()=>clearInterval(re)},[]),m.useEffect(()=>{const re=P=>{b.current={x:P.clientX,y:P.clientY}};return window.addEventListener("mousemove",re),()=>window.removeEventListener("mousemove",re)},[]),m.useEffect(()=>{let re;const P=()=>{y(oe=>{const je=b.current.x-oe.x,U=b.current.y-oe.y;return{x:oe.x+je*.04,y:oe.y+U*.04}}),re=requestAnimationFrame(P)};return P(),()=>cancelAnimationFrame(re)},[]),m.useEffect(()=>{console.log(" LoginForm mounted"),console.log(" MSAL instance:",i?"READY":"NOT READY"),console.log(" Accounts:",(e==null?void 0:e.length)||0),e&&e.length>0&&console.log(" Existing account found:",e[0].username)},[i,e]);const be=re=>{const{name:P,value:oe}=re.target;r(je=>({...je,[P]:oe})),u&&f("")},de=()=>{A(!a)},Ue=async re=>{re.preventDefault(),p(!0),f("");try{const P=await Fe("/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:"password",email:t.email,password:t.password})}),oe=await P.json();P.ok?(console.log("Login successful! User role:",oe.role),window.location.href="/admindashboard"):(P.status===401?f("Invalid email or password"):P.status===400?f(oe.error||"Missing email or password"):P.status===500?f("Server error. Please try again later."):f(oe.error||"Login failed"),p(!1))}catch(P){p(!1),console.error("Login error:",P),f("Login failed. Please check your connection.")}},me=async()=>{console.log(""),console.log(" Microsoft Login Button Clicked");try{if(!i){console.error(" MSAL instance not ready!"),alert("Microsoft login not ready. Please refresh and try again.");return}i.getAllAccounts().length>0&&(console.log(" Clearing cached accounts before fresh login..."),Object.keys(localStorage).forEach(oe=>{oe.includes("msal")&&(localStorage.removeItem(oe),console.log("   Removed:",oe))}),console.log(" Cache cleared! Proceeding with fresh login...")),console.log(" MSAL instance ready"),console.log(" Expected MSAL Configuration:"),console.log("   Redirect URI: /auth");const P={scopes:["openid","profile","email","User.Read","Calendars.Read"],prompt:"select_account"};console.log(" Calling instance.loginRedirect()..."),console.log(""),await i.loginRedirect(P)}catch(re){console.error(""),console.error(" Microsoft login error:",re),console.error(""),alert(`Microsoft login failed: ${re.message}`)}},F={container:{minHeight:"100vh",display:"flex",fontFamily:'"Montserrat", Tahoma, Geneva, Verdana, sans-serif',overflow:"hidden",position:"relative"},leftPanel:{flex:"0 0 60%",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)",position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",overflow:"hidden"},rightPanel:{flex:"0 0 40%",backgroundColor:"#ffffff",display:"flex",justifyContent:"center",alignItems:"center",padding:"40px",position:"relative",boxShadow:"-10px 0 40px rgba(0, 0, 0, 0.1)"},animatedBg1:{position:"absolute",width:"600px",height:"600px",background:"radial-gradient(circle, rgba(59, 130, 246, 0.2) 0%, transparent 70%)",borderRadius:"50%",top:"-250px",left:"-250px",animation:"float1 20s ease-in-out infinite",pointerEvents:"none"},animatedBg2:{position:"absolute",width:"500px",height:"500px",background:"radial-gradient(circle, rgba(168, 85, 247, 0.15) 0%, transparent 70%)",borderRadius:"50%",bottom:"-200px",right:"-200px",animation:"float2 18s ease-in-out infinite",pointerEvents:"none"},animatedBg3:{position:"absolute",width:"450px",height:"450px",background:"radial-gradient(circle, rgba(34, 211, 238, 0.12) 0%, transparent 70%)",borderRadius:"50%",top:"40%",left:"60%",animation:"float3 22s ease-in-out infinite",pointerEvents:"none"},particles:{position:"absolute",inset:0,pointerEvents:"none"},particle:re=>({position:"absolute",width:"5px",height:"5px",background:"rgba(255, 255, 255, 0.4)",borderRadius:"50%",top:`${re*17%100}%`,left:`${re*23%100}%`,animation:`particle${re%3} ${15+re%5}s ease-in-out infinite`,animationDelay:`${re*.5}s`}),mouseGlow:{position:"absolute",width:"700px",height:"700px",background:"radial-gradient(circle, rgba(96, 165, 250, 0.12) 0%, transparent 70%)",borderRadius:"50%",pointerEvents:"none",transform:`translate(${g.x-350}px, ${g.y-350}px)`,transition:"transform 1s cubic-bezier(0.22, 1, 0.36, 1)"},shootingStars:{position:"absolute",inset:0,overflow:"hidden",pointerEvents:"none",zIndex:0},shootingStar:re=>({position:"absolute",width:"200px",height:"2px",background:"linear-gradient(90deg, rgba(255,255,255,0), #00A4EF, #7FBA00, #A855F7, rgba(255,255,255,0))",opacity:1,transform:"rotate(-25deg)",animation:`shootingStar ${8+re*2}s cubic-bezier(0.4, 0, 0.2, 1) infinite`,filter:"drop-shadow(0 0 12px rgba(59,130,246,0.9))"}),logoContainer:{position:"relative",zIndex:2,display:"flex",flexDirection:"column",alignItems:"center",gap:"40px"},logoFloatWrapper:{position:"relative",animation:"floatY 4s ease-in-out infinite"},logoClickWrapper:{cursor:"pointer",willChange:"transform, opacity",transition:"opacity 0.3s ease",position:"relative",transform:`translate(${Q.x}px, ${Q.y}px) rotate(${Q.rotation}deg)`,opacity:Q.opacity},logoImage:{height:"80px",width:"auto",maxWidth:"300px",objectFit:"contain",animation:"logoClock 10s ease-in-out infinite",filter:"drop-shadow(0 8px 24px rgba(59, 130, 246, 0.4))"},circularText:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",animation:"sealRotate 40s linear infinite",pointerEvents:"none",zIndex:1},brandingText:{textAlign:"center",color:"white",marginTop:"20px"},brandingTitle:{fontSize:"48px",fontWeight:"800",marginBottom:"16px",background:"linear-gradient(90deg, #FF0000 0%, #00FF00 25%, #0000FF 50%, #FF00FF 75%, #FF0000 100%)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",animation:"fadeInDown 1s ease-out, rgbShift 3s linear infinite"},brandingSubtitle:{fontSize:"18px",fontWeight:"500",color:"rgba(255, 255, 255, 0.8)",transition:"opacity 0.3s ease",opacity:se?1:0,minHeight:"27px",lineHeight:"1.5"},featurePills:{display:"flex",gap:"12px",marginTop:"40px",flexWrap:"wrap",justifyContent:"center",maxWidth:"500px"},featurePill:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"50px",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",fontSize:"13px",fontWeight:"600",animation:"fadeInUp 1s ease-out"},formContainer:{width:"100%",maxWidth:"420px",animation:"fadeInRight 0.8s ease-out"},formTitle:{fontSize:"32px",fontWeight:"bold",color:"#1f2937",marginBottom:"12px"},formSubtitle:{fontSize:"15px",color:"#6b7280",marginBottom:"40px",lineHeight:"0.6"},inputGroup:{marginBottom:"24px"},label:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#1f2937"},input:re=>({width:"100%",padding:"14px 16px",borderRadius:"10px",border:re?"2px solid #ef4444":"2px solid #e5e7eb",fontSize:"15px",outline:"none",boxSizing:"border-box",transition:"all 0.3s ease",backgroundColor:"#f9fafb"}),passwordContainer:{position:"relative"},passwordInput:re=>({width:"100%",padding:"14px 50px 14px 16px",borderRadius:"10px",border:re?"2px solid #ef4444":"2px solid #e5e7eb",fontSize:"15px",outline:"none",boxSizing:"border-box",transition:"all 0.3s ease",backgroundColor:"#f9fafb"}),eyeButton:{position:"absolute",top:"50%",right:"12px",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#9ca3af",padding:"8px",transition:"all 0.3s ease"},signInButton:re=>({width:"100%",backgroundColor:re?"#6b7280":"#0f172a",color:"white",padding:"16px",fontSize:"16px",fontWeight:"bold",borderRadius:"10px",border:"none",cursor:re?"not-allowed":"pointer",marginTop:"12px",transition:"all 0.3s ease",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",transform:re?"scale(0.98)":"scale(1)"}),loadingSpinner:{width:"18px",height:"18px",border:"2px solid #ffffff40",borderRadius:"50%",borderTopColor:"#ffffff",animation:"spin 0.6s linear infinite",marginRight:"10px"},errorMessage:{color:"#ef4444",fontSize:"14px",textAlign:"left",marginTop:"12px",padding:"12px",backgroundColor:"#fef2f2",borderRadius:"8px",border:"1px solid #fecaca",animation:"shake 0.5s ease-in-out, fadeIn 0.3s ease-out"},divider:{display:"flex",alignItems:"center",margin:"28px 0",gap:"16px"},dividerLine:{flex:1,height:"1px",background:"linear-gradient(to right, transparent, #d1d5db, transparent)"},dividerText:{fontSize:"13px",color:"#9ca3af",fontWeight:"500"},microsoftButtonWrapper:{position:"relative",width:"100%"},microsoftButton:{position:"relative",zIndex:1,width:"100%",backgroundColor:"#ffffff",color:"#1e293b",padding:"14px",fontSize:"15px",fontWeight:"600",borderRadius:"10px",border:"2px solid #e5e7eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",transition:"all 0.3s ease"},microsoftLogo:{width:"22px",height:"22px"}};return m.useEffect(()=>{const re=document.createElement("style");return re.textContent=`
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            @keyframes float1 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                33% { transform: translate(120px, -120px) scale(1.1); }
                66% { transform: translate(-60px, 60px) scale(0.9); }
            }
            @keyframes float2 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                33% { transform: translate(-120px, 120px) scale(1.15); }
                66% { transform: translate(90px, -90px) scale(0.95); }
            }
            @keyframes float3 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                50% { transform: translate(-140px, 70px) scale(1.2); }
            }
            @keyframes particle0 {
                0%, 100% { transform: translateY(0) translateX(0); opacity: 0.3; }
                50% { transform: translateY(-40px) translateX(25px); opacity: 0.7; }
            }
            @keyframes particle1 {
                0%, 100% { transform: translateY(0) translateX(0); opacity: 0.2; }
                50% { transform: translateY(50px) translateX(-20px); opacity: 0.6; }
            }
            @keyframes particle2 {
                0%, 100% { transform: translateY(0) translateX(0); opacity: 0.4; }
                50% { transform: translateY(-30px) translateX(-30px); opacity: 0.8; }
            }
            @keyframes floatY {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-15px); }
            }
            @keyframes logoClock {
                0% { transform: rotate(0deg); }
                70% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            @keyframes fadeInDown {
                0% { transform: translateY(-30px); opacity: 0; }
                100% { transform: translateY(0); opacity: 1; }
            }
            @keyframes fadeInUp {
                0% { transform: translateY(30px); opacity: 0; }
                100% { transform: translateY(0); opacity: 1; }
            }
            @keyframes fadeInRight {
                0% { transform: translateX(40px); opacity: 0; }
                100% { transform: translateX(0); opacity: 1; }
            }
            @keyframes fadeIn {
                0% { opacity: 0; }
                100% { opacity: 1; }
            }
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
                20%, 40%, 60%, 80% { transform: translateX(8px); }
            }
            @keyframes shootingStar {
                0% {
                    transform: translateX(200px) translateY(-100px) rotate(-25deg);
                    opacity: 0;
                }
                15% {
                    opacity: 0.9;
                }
                100% {
                    transform: translateX(-900px) translateY(500px) rotate(-25deg);
                    opacity: 0;
                }
            }
            @keyframes sealRotate {
                from {
                    transform: translate(-50%, -50%) rotate(0deg);
                }
                to {
                    transform: translate(-50%, -50%) rotate(360deg);
                }
            }
            @keyframes microsoftGlow {
                0% { background-position: 200% 0; }
                100% { background-position: -200% 0; }
            }
            @keyframes rgbShift {
                0% { background-position: 0% center; }
                100% { background-position: 200% center; }
            }
            input:focus {
                border-color: #3b82f6 !important;
                background-color: #ffffff !important;
                box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1) !important;
            }
            button:hover:not(:disabled) {
                transform: scale(1.03) !important;
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12) !important;
            }
            svg text {
                font-size: 15.5px;
                font-weight: 600;
                letter-spacing: 1.2px;
                fill: rgba(255, 255, 255, 0.85);
                text-transform: uppercase;
            }
            
            @media (max-width: 1024px) {
                .split-container {
                    flex-direction: column !important;
                }
                .left-panel, .right-panel {
                    flex: 1 1 100% !important;
                    min-height: 50vh !important;
                }
            }
        `,document.head.appendChild(re),()=>{document.head.contains(re)&&document.head.removeChild(re)}},[]),n.jsxs("div",{style:F.container,className:"split-container",children:[n.jsxs("div",{style:F.leftPanel,className:"left-panel",children:[n.jsx("div",{style:F.animatedBg1}),n.jsx("div",{style:F.animatedBg2}),n.jsx("div",{style:F.animatedBg3}),n.jsx("div",{style:F.shootingStars,children:H.map((re,P)=>n.jsx("div",{style:{...F.shootingStar(P),top:`${re.top}%`,left:`${re.left}%`,animationDelay:`${re.delay}s`}},P))}),n.jsx("div",{style:F.mouseGlow}),n.jsx("div",{style:F.particles,children:[...Array(15)].map((re,P)=>n.jsx("div",{style:F.particle(P)},P))}),n.jsxs("div",{style:F.logoContainer,children:[n.jsx("div",{style:F.logoFloatWrapper,children:n.jsxs("div",{style:F.logoClickWrapper,onClick:Ae,children:[n.jsxs("svg",{width:"180",height:"180",viewBox:"0 0 180 180",style:{...F.circularText,transform:`translate(calc(-50% + ${D.x}px), calc(-50% + ${D.y}px)) rotate(${D.rotation}deg)`,opacity:D.opacity},children:[n.jsx("defs",{children:n.jsx("path",{id:"circlePath",d:"M 90, 90 m -60, 0 a 60,60 0 1,1 120,0 a 60,60 0 1,1 -120,0"})}),n.jsx("text",{children:n.jsx("textPath",{href:"#circlePath",startOffset:"0%",children:"MAXCAP  MAXCAP  MAXCAP  MAXCAP "})})]}),n.jsx("img",{src:"/images/maxcap.png",alt:"Logo",style:F.logoImage})]})}),n.jsxs("div",{style:F.brandingText,children:[n.jsx("h1",{style:F.brandingTitle,children:"MAXCAP"}),n.jsx("p",{style:F.brandingSubtitle,children:Me[le]})]}),n.jsxs("div",{style:F.featurePills,children:[n.jsxs("div",{style:F.featurePill,children:[n.jsx(yi,{size:16}),n.jsx("span",{children:"Enterprise Grade"})]}),n.jsxs("div",{style:{...F.featurePill,animationDelay:"0.1s"},children:[n.jsx(Bo,{size:16}),n.jsx("span",{children:"Real-time Sync"})]}),n.jsxs("div",{style:{...F.featurePill,animationDelay:"0.2s"},children:[n.jsx(zr,{size:16}),n.jsx("span",{children:"AI-Powered"})]})]})]})]}),n.jsx("div",{style:F.rightPanel,className:"right-panel",children:n.jsxs("div",{style:F.formContainer,children:[n.jsx("h2",{style:F.formTitle,children:"Welcome back"}),n.jsx("p",{style:F.formSubtitle,children:"Sign in to your workspace"}),n.jsxs("form",{onSubmit:Ue,children:[n.jsxs("div",{style:F.inputGroup,children:[n.jsx("label",{style:F.label,children:"Email Address"}),n.jsx("input",{type:"email",name:"email",value:t.email,onChange:be,onKeyDown:re=>re.key==="Enter"&&Ue(re),style:F.input(!!u),required:!0,disabled:c,placeholder:"Enter your email address"})]}),n.jsxs("div",{style:F.inputGroup,children:[n.jsx("label",{style:F.label,children:"Password"}),n.jsxs("div",{style:F.passwordContainer,children:[n.jsx("input",{type:a?"text":"password",name:"password",value:t.password,onChange:be,onKeyDown:re=>re.key==="Enter"&&Ue(re),style:F.passwordInput(!!u),required:!0,disabled:c,placeholder:"Enter your password"}),n.jsx("button",{type:"button",onClick:de,style:F.eyeButton,disabled:c,children:a?n.jsx(Np,{size:18}):n.jsx(Fo,{size:18})})]})]}),u&&n.jsx("div",{style:F.errorMessage,children:u}),n.jsx("button",{type:"submit",style:F.signInButton(c),disabled:c,children:c?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:F.loadingSpinner}),"Signing In..."]}):"Sign In"})]}),n.jsxs("div",{style:F.divider,children:[n.jsx("div",{style:F.dividerLine}),n.jsx("span",{style:F.dividerText,children:"OR"}),n.jsx("div",{style:F.dividerLine})]}),n.jsxs("div",{style:F.microsoftButtonWrapper,onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1),children:[S&&n.jsx("div",{style:{position:"absolute",inset:"-3px",borderRadius:"12px",background:"linear-gradient(90deg, #F25022 0%, #7FBA00 25%, #00A4EF 50%, #FFB900 75%, #F25022 100%)",backgroundSize:"300% 100%",animation:"microsoftGlow 3s linear infinite",filter:"blur(10px)",opacity:"0.7",zIndex:0}}),n.jsxs("button",{type:"button",onClick:me,style:F.microsoftButton,children:[n.jsx("img",{src:"/images/microsoft.png",alt:"Microsoft Logo",style:F.microsoftLogo}),"Sign in with Microsoft"]})]})]})})]})},l4=()=>{const[i,e]=m.useState(""),t=bB(),r=A=>{A.preventDefault(),console.log("Reset requested for:",i)},a={container:{minHeight:"100vh",background:"linear-gradient(to right, #0079D3, #00A1F1)",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:'"Segoe UI", sans-serif',padding:"20px"},formBox:{backgroundColor:"#fff",padding:"40px",borderRadius:"10px",width:"100%",maxWidth:"400px",position:"relative",boxShadow:"0 10px 30px rgba(0,0,0,0.1)"},backButton:{position:"absolute",top:"20px",left:"20px",background:"none",border:"none",color:"#0079D3",cursor:"pointer"},header:{textAlign:"center",fontSize:"20px",fontWeight:"600",marginBottom:"30px",marginTop:"10px",color:"#1f2937"},input:{width:"100%",padding:"12px 14px",borderRadius:"6px",border:"1px solid #ccc",fontSize:"15px",marginBottom:"24px",outline:"none"},button:{width:"100%",backgroundColor:"#0079D3",color:"white",padding:"12px",fontSize:"16px",fontWeight:"bold",borderRadius:"6px",border:"none",cursor:"pointer"}};return n.jsx("div",{style:a.container,children:n.jsxs("div",{style:a.formBox,children:[n.jsx("button",{onClick:()=>t("/"),style:a.backButton,children:n.jsx(wi,{size:20})}),n.jsx("h2",{style:a.header,children:"Reset Password"}),n.jsxs("form",{onSubmit:r,children:[n.jsx("input",{type:"email",placeholder:"Email/Phone",value:i,onChange:A=>e(A.target.value),style:a.input,required:!0}),n.jsx("button",{type:"submit",style:a.button,children:"NEXT"})]})]})})},$v=m.createContext(),c4=()=>{try{const i=localStorage.getItem("sidebarCollapsed");if(i!==null)return JSON.parse(i)}catch(i){console.error("Error reading initial sidebar state from localStorage:",i)}return!1},d4=({children:i})=>{const[e,t]=m.useState(c4);m.useEffect(()=>{try{localStorage.setItem("sidebarCollapsed",JSON.stringify(e)),localStorage.getItem("sidebarCollapsed")!==JSON.stringify(e)&&localStorage.setItem("sidebarCollapsed",JSON.stringify(e))}catch(a){console.error("Error saving sidebar state to localStorage:",a)}},[e]);const r=()=>{t(a=>!a)};return n.jsx($v.Provider,{value:{collapsed:e,toggleSidebar:r},children:i})},hd=()=>{const i=m.useContext($v);if(!i)throw new Error("useSidebar must be used within SidebarProvider");return i},u4=()=>{const{collapsed:i,toggleSidebar:e}=hd(),[t,r]=m.useState(null),[a,A]=m.useState(null),[c,p]=m.useState(null),[u,f]=m.useState(!1),[g,y]=m.useState(window.location.pathname),b=Ji.useMemo(()=>Array.from({length:8}).map((N,X)=>({top:Math.random()*100,left:Math.random()*100,delay:Math.random()*10,duration:15+Math.random()*10,size:2+Math.random()*3})),[]),[H,S]=m.useState(!1);m.useEffect(()=>{sessionStorage.getItem("sidebarIntroPlayed")||(S(!0),sessionStorage.setItem("sidebarIntroPlayed","true"))},[]),m.useEffect(()=>{const N=()=>{y(window.location.pathname)};return window.addEventListener("popstate",N),()=>window.removeEventListener("popstate",N)},[]),m.useEffect(()=>{(async()=>{try{const X=await Fe("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(X.ok){const Be=await X.json();p(Be)}else p({firstName:"Test",lastName:"Admin",role:"admin",email:"admin@example.com",department:"Engineering"})}catch{p({firstName:"Test",lastName:"Admin",role:"admin",email:"admin@example.com",department:"Engineering"})}})()},[]);const L=[{label:"Home",icon:n.jsx(T2,{size:22}),path:"/admindashboard",roles:["admin","member"]},{label:"Actuals",icon:n.jsx(A2,{size:22}),path:"/adminactuals",roles:["admin","member"]},{label:"Plan",icon:n.jsx(To,{size:22}),path:"/adminviewplan",roles:["admin","member"]},{label:"Reports",icon:n.jsx(qB,{size:22}),path:"/adminreports",roles:["admin","member"]},{label:"Users",icon:n.jsx(Eo,{size:22}),path:"/users",roles:["admin"]},{label:"Resources",icon:n.jsx(oS,{size:22}),path:"/secret",roles:["admin"],allowedEmails:["muhammad.hasan@ihrp.sg","jumana.haseen@ihrp.sg"]}],Q=c?L.filter(N=>{const X=N.roles.includes(c.role),Be=!N.allowedEmails||N.allowedEmails.includes(c.email);return X&&Be}):L,V=(N,X)=>{if(!u){X&&(X.preventDefault(),X.stopPropagation()),A(null),r(null);try{localStorage.setItem("sidebarCollapsed",JSON.stringify(i))}catch(Be){console.error("Error saving sidebar state:",Be)}setTimeout(()=>{window.location.href=N},50)}},D=async N=>{N&&(N.preventDefault(),N.stopPropagation()),f(!0),A(null);try{(await Fe("/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})).ok||console.warn("Server logout failed, but proceeding with client logout"),window.location.href="/"}catch(X){console.error("Logout error:",X),window.location.href="/"}finally{f(!1)}},te={sidebar:{height:"100vh",width:i?"80px":"220px",background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",overflow:"hidden",position:"fixed",top:0,left:0,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"0px",paddingRight:"0px",zIndex:10,fontFamily:'"Montserrat", sans-serif',boxShadow:"2px 0 20px rgba(0, 0, 0, 0.15)",color:"white",transition:"width 0.3s ease"},animatedBg1:{position:"absolute",width:"350px",height:"350px",background:"radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, transparent 70%)",borderRadius:"50%",top:"-120px",left:"-120px",animation:H?"sidebarFloat1 20s ease-in-out infinite":"none",pointerEvents:"none",filter:"blur(40px)"},animatedBg2:{position:"absolute",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(168, 85, 247, 0.12) 0%, transparent 70%)",borderRadius:"50%",bottom:"-100px",right:"-100px",animation:"sidebarFloat2 22s ease-in-out infinite",pointerEvents:"none",filter:"blur(40px)"},animatedBg3:{position:"absolute",width:"250px",height:"250px",background:"radial-gradient(circle, rgba(34, 211, 238, 0.1) 0%, transparent 70%)",borderRadius:"50%",top:"40%",left:"50%",transform:"translateX(-50%)",animation:"sidebarFloat3 25s ease-in-out infinite",pointerEvents:"none",filter:"blur(40px)"},gradientOverlay:{position:"absolute",inset:0,background:"linear-gradient(180deg, transparent 0%, rgba(59, 130, 246, 0.03) 50%, transparent 100%)",animation:"gradientMove 8s ease-in-out infinite",pointerEvents:"none"},particlesContainer:{position:"absolute",inset:0,pointerEvents:"none",overflow:"hidden"},particle:N=>({position:"absolute",width:`${N.size}px`,height:`${N.size}px`,background:"rgba(255, 255, 255, 0.3)",borderRadius:"50%",top:`${N.top}%`,left:`${N.left}%`,animation:`floatParticle ${N.duration}s ease-in-out infinite`,animationDelay:`${N.delay}s`,boxShadow:"0 0 10px rgba(255, 255, 255, 0.5)"}),logoContainer:{marginBottom:"32px",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",paddingLeft:"16px",paddingRight:"16px",position:"relative",zIndex:2,animation:H?"slideInDown 0.6s ease-out":"none"},logoWrapper:{position:"relative",animation:"logoFloat 4s ease-in-out infinite",marginTop:"12px"},logoGlow:{position:"absolute",inset:"-10px",background:"radial-gradient(circle, rgba(59, 130, 246, 0.3) 0%, transparent 70%)",borderRadius:"50%",animation:"pulse 3s ease-in-out infinite",filter:"blur(20px)",zIndex:-1},logo:{height:i?"48px":"56px",transition:"height 0.3s ease, filter 0.3s ease",filter:"brightness(1.1) drop-shadow(0 4px 12px rgba(59, 130, 246, 0.3))",position:"relative",zIndex:1},logoText:{fontSize:"13px",fontWeight:"bold",opacity:i?0:1,transition:"opacity 0.3s ease",background:"linear-gradient(90deg, #60a5fa, #a78bfa)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",animation:"shimmer 3s ease-in-out infinite",marginTop:"4px"},toggleButton:{background:"rgba(255, 255, 255, 0.1)",border:"none",color:"white",cursor:"pointer",marginBottom:"24px",paddingTop:"8px",paddingBottom:"8px",paddingLeft:"8px",paddingRight:"8px",borderRadius:"8px",transition:"all 0.3s ease",position:"relative",zIndex:2,animation:"fadeIn 0.8s ease-out 0.2s both",backdropFilter:"blur(10px)"},navItem:{display:"flex",alignItems:"center",gap:i?"4px":"16px",width:i?"56px":"calc(100% - 24px)",paddingTop:i?"12px":"14px",paddingBottom:i?"12px":"14px",paddingLeft:i?"8px":"16px",paddingRight:i?"8px":"16px",borderRadius:"12px",textDecoration:"none",color:"white",fontSize:"14px",fontWeight:"500",marginBottom:"6px",marginTop:"0px",marginLeft:"12px",marginRight:"12px",backgroundColor:"transparent",flexDirection:i?"column":"row",justifyContent:i?"center":"flex-start",textAlign:i?"center":"left",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",border:"none",cursor:"pointer",zIndex:2,backdropFilter:"blur(10px)"},activeItem:{backgroundColor:"rgba(59, 130, 246, 0.15)",borderLeft:"4px solid #3b82f6",marginLeft:i?"12px":"8px",paddingLeft:i?"8px":"12px",boxShadow:"0 4px 15px rgba(59, 130, 246, 0.2)"},hoverItem:{backgroundColor:"rgba(255, 255, 255, 0.1)",transform:"translateX(4px) scale(1.02)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},navContainer:{flex:1,width:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",paddingTop:"8px",position:"relative",zIndex:2},logoutContainer:{width:"100%",marginTop:"auto",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",zIndex:2},logoutButton:N=>({display:"flex",alignItems:"center",gap:i?"4px":"16px",width:i?"56px":"calc(100% - 24px)",paddingTop:i?"12px":"14px",paddingBottom:i?"12px":"14px",paddingLeft:i?"8px":"16px",paddingRight:i?"8px":"16px",borderRadius:"12px",textDecoration:"none",color:N?"#94a3b8":"#ef4444",fontSize:"14px",fontWeight:"500",marginBottom:"6px",marginTop:"0px",marginLeft:"12px",marginRight:"12px",backgroundColor:"transparent",flexDirection:i?"column":"row",justifyContent:i?"center":"flex-start",textAlign:i?"center":"left",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",border:"none",cursor:N?"not-allowed":"pointer",backdropFilter:"blur(10px)"}),tooltip:{position:"absolute",left:"72px",top:"50%",transform:"translateY(-50%)",backgroundColor:"#374151",color:"white",paddingTop:"8px",paddingBottom:"8px",paddingLeft:"12px",paddingRight:"12px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",zIndex:1e3,opacity:a?1:0,visibility:a?"visible":"hidden",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)",pointerEvents:"none",backdropFilter:"blur(10px)"},tooltipArrow:{position:"absolute",left:"-4px",top:"50%",transform:"translateY(-50%)",width:0,height:0,borderTop:"4px solid transparent",borderBottom:"4px solid transparent",borderRight:"4px solid #374151",pointerEvents:"none"},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:"22px",transition:"transform 0.3s ease"},labelText:{marginTop:i?"4px":"0px",fontSize:i?"10px":"14px",lineHeight:"1.2",opacity:i?.9:1,transition:"all 0.3s ease"},sectionDivider:{width:"calc(100% - 24px)",height:"1px",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)",marginTop:"12px",marginBottom:"16px",marginLeft:"12px",marginRight:"12px",animation:"shimmerLine 3s ease-in-out infinite"},loadingSpinner:{width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderRadius:"50%",borderTopColor:"#ef4444",animation:"spin 1s linear infinite",marginRight:i?"0":"8px"}},J=(N,X)=>{u||(r(N),i&&setTimeout(()=>{A(X)},100))},M=()=>{u||(r(null),A(null))};return Ji.useEffect(()=>{const N=document.createElement("style");return N.textContent=`
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            
            @keyframes sidebarFloat1 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                33% { transform: translate(40px, -50px) scale(1.15); }
                66% { transform: translate(-30px, 40px) scale(0.95); }
            }
            
            @keyframes sidebarFloat2 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                33% { transform: translate(-40px, 50px) scale(1.2); }
                66% { transform: translate(35px, -35px) scale(0.9); }
            }
            
            @keyframes sidebarFloat3 {
                0%, 100% { transform: translate(-50%, 0) scale(1); }
                50% { transform: translate(-50%, 30px) scale(1.25); }
            }
            
            @keyframes gradientMove {
                0%, 100% { transform: translateY(0); opacity: 0.3; }
                50% { transform: translateY(20%); opacity: 0.6; }
            }
            
            @keyframes floatParticle {
                0%, 100% { 
                    transform: translateY(0) translateX(0); 
                    opacity: 0.2; 
                }
                25% { 
                    transform: translateY(-30px) translateX(10px); 
                    opacity: 0.5; 
                }
                50% { 
                    transform: translateY(-50px) translateX(-10px); 
                    opacity: 0.8; 
                }
                75% { 
                    transform: translateY(-30px) translateX(15px); 
                    opacity: 0.5; 
                }
            }
            
            @keyframes logoFloat {
                0%, 100% { transform: translateY(0) rotate(0deg); }
                50% { transform: translateY(-3px) rotate(1deg); }
            }
            
            @keyframes pulse {
                0%, 100% { opacity: 0.3; transform: scale(1); }
                50% { opacity: 0.6; transform: scale(1.1); }
            }
            
            @keyframes shimmer {
                0% { background-position: -200% center; }
                100% { background-position: 200% center; }
            }
            
            @keyframes shimmerLine {
                0%, 100% { opacity: 0.3; }
                50% { opacity: 1; }
            }
            
            @keyframes slideInDown {
                0% { 
                    transform: translateY(-20px); 
                    opacity: 0; 
                }
                100% { 
                    transform: translateY(0); 
                    opacity: 1; 
                }
            }
            
            @keyframes fadeIn {
                0% { opacity: 0; }
                100% { opacity: 1; }
            }
        `,document.head.appendChild(N),()=>{document.head.contains(N)&&document.head.removeChild(N)}},[]),n.jsxs("div",{style:te.sidebar,children:[n.jsx("div",{style:te.animatedBg1}),n.jsx("div",{style:te.animatedBg2}),n.jsx("div",{style:te.animatedBg3}),n.jsx("div",{style:te.gradientOverlay}),n.jsx("div",{style:te.particlesContainer,children:b.map((N,X)=>n.jsx("div",{style:te.particle(N)},X))}),n.jsx("div",{style:te.logoContainer,children:n.jsxs("div",{style:te.logoWrapper,children:[n.jsx("div",{style:te.logoGlow}),n.jsx("img",{src:"/images/maxcap.png",alt:"Logo",style:te.logo}),!i&&n.jsx("div",{style:te.logoText,children:"MAXCAP"})]})}),n.jsx("button",{onClick:N=>{N.preventDefault(),N.stopPropagation(),A(null),e()},style:{...te.toggleButton,backgroundColor:t==="toggle"?"rgba(255, 255, 255, 0.2)":"rgba(255, 255, 255, 0.1)"},onMouseEnter:()=>r("toggle"),onMouseLeave:()=>r(null),disabled:u,children:n.jsx(P2,{size:20})}),n.jsxs("div",{style:te.navContainer,children:[Q.map((N,X)=>{const Be=N.path==="/adminviewplan"&&(g==="/adminviewplan"||g==="/adminindividualplan"||g==="/adminapprovals"||g==="/adminaddplan"||g==="/admineditplan"||g==="/adminaddindividualplan"||g==="/admineditindividualplan")||N.path==="/adminreports"&&(g==="/adminreports"||g==="/adminteamcapacity"||g==="/adminutilization")||N.path==="/users"&&(g==="/users"||g==="/addusers")||N.path==="/adminactuals"&&(g==="/adminactuals"||g==="/adminviewlogs")||g===N.path,Ae=t===X;return n.jsxs("div",{style:{position:"relative",animation:H?`fadeIn 0.5s ease-out ${X*.1}s both`:"none"},children:[n.jsxs("button",{onClick:le=>V(N.path,le),style:{...te.navItem,...Be?te.activeItem:{},...Ae&&!Be?te.hoverItem:{},pointerEvents:u?"none":"auto",opacity:u?.5:1},onMouseEnter:()=>J(X,N.label),onMouseLeave:M,disabled:u,children:[n.jsx("div",{style:{...te.iconContainer,transform:Ae?"scale(1.1) rotate(5deg)":"scale(1) rotate(0deg)"},children:N.icon}),n.jsx("span",{style:te.labelText,children:N.label})]}),i&&a===N.label&&n.jsxs("div",{style:te.tooltip,children:[n.jsx("div",{style:te.tooltipArrow}),N.label]})]},X)}),n.jsx("div",{style:te.sectionDivider})]}),n.jsxs("div",{style:te.logoutContainer,children:[n.jsxs("button",{onClick:N=>D(N),style:{...te.logoutButton(u),...t==="logout"&&!u?te.hoverItem:{}},onMouseEnter:()=>J("logout","Logout"),onMouseLeave:M,disabled:u,children:[n.jsx("div",{style:{...te.iconContainer,transform:t==="logout"&&!u?"scale(1.1) rotate(-5deg)":"scale(1) rotate(0deg)"},children:u?n.jsx("div",{style:te.loadingSpinner}):n.jsx(R2,{size:22})}),n.jsx("span",{style:te.labelText,children:u?i?"Wait...":"Logging out...":"Logout"})]}),i&&a==="Logout"&&!u&&n.jsxs("div",{style:{...te.tooltip,position:"absolute",bottom:"20px",left:"72px",top:"auto",transform:"none",pointerEvents:"none"},children:[n.jsx("div",{style:te.tooltipArrow}),"Logout"]})]})]})},Bn=({children:i})=>{const{collapsed:e}=hd(),[t,r]=m.useState(!0),[a,A]=m.useState(()=>{try{return localStorage.getItem("sidebarCollapsed")==="true"?"80px":"220px"}catch{return"220px"}});return m.useEffect(()=>{A(e?"80px":"220px"),r(!1)},[e]),n.jsxs("div",{style:{display:"flex",margin:0,padding:0,minHeight:"100vh"},children:[n.jsx(u4,{}),n.jsx("div",{style:{marginLeft:a,transition:t?"none":"margin-left 0.3s ease",flex:1,padding:"0",boxSizing:"border-box",minHeight:"100vh"},children:i})]})},p4=({isOpen:i,onClose:e,statusData:t,isDarkMode:r})=>{if(!i)return null;const{title:a,users:A,color:c,darkColor:p}=t,u=()=>{switch(a){case"Overworked":return n.jsx($c,{size:24,style:{color:"#ef4444"}});case"Underutilized":return n.jsx(X2,{size:24,style:{color:"#eab308"}});case"Optimal":return n.jsx(vA,{size:24,style:{color:"#22c55e"}});default:return n.jsx(Nt,{size:24})}},f=()=>{switch(a){case"Overworked":return"#ef4444";case"Underutilized":return"#eab308";case"Optimal":return"#22c55e";default:return"#3b82f6"}},g={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,animation:"fadeIn 0.3s ease-out",padding:"20px"},modal:{backgroundColor:r?"#1e293b":"#ffffff",borderRadius:"24px",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.3)",width:"90%",maxWidth:"700px",maxHeight:"85vh",overflow:"hidden",animation:"slideUp 0.3s ease-out",border:r?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)"},header:{padding:"24px 28px",borderBottom:r?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",display:"flex",justifyContent:"space-between",alignItems:"center",background:r?"linear-gradient(135deg, #334155 0%, #1e293b 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerTitle:{fontSize:"24px",fontWeight:"700",color:r?"#e2e8f0":"#1e293b"},headerSubtitle:{fontSize:"14px",color:r?"#94a3b8":"#64748b",fontWeight:"500",marginTop:"4px"},closeButton:{background:"none",border:"none",color:r?"#94a3b8":"#64748b",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},content:{padding:"24px 28px",maxHeight:"calc(85vh - 100px)",overflowY:"auto"},noUsers:{textAlign:"center",padding:"60px 20px",color:r?"#94a3b8":"#64748b"},noUsersIcon:{fontSize:"48px",marginBottom:"16px",opacity:.5},userCard:{backgroundColor:r?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",borderRadius:"16px",padding:"20px",marginBottom:"16px",borderLeft:`4px solid ${f()}`,transition:"all 0.2s ease",cursor:"pointer",position:"relative",overflow:"hidden"},userHeader:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},avatar:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:f(),display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"700",fontSize:"18px",flexShrink:0},userInfo:{flex:1},userName:{fontSize:"18px",fontWeight:"600",color:r?"#e2e8f0":"#1e293b",marginBottom:"4px"},userDepartment:{fontSize:"14px",color:r?"#94a3b8":"#64748b",display:"flex",alignItems:"center",gap:"8px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginTop:"16px",paddingTop:"16px",borderTop:r?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)"},statItem:{textAlign:"center"},statValue:{fontSize:"20px",fontWeight:"700",color:r?"#e2e8f0":"#1e293b",marginBottom:"4px"},statLabel:{fontSize:"11px",color:r?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:"600"},utilizationBar:{marginTop:"16px",height:"8px",backgroundColor:r?"rgba(51,65,85,0.5)":"rgba(226,232,240,0.5)",borderRadius:"4px",overflow:"hidden",position:"relative"},utilizationFill:L=>({height:"100%",width:`${Math.min(L,100)}%`,backgroundColor:f(),borderRadius:"4px",transition:"width 0.5s ease"}),categoryBreakdown:{marginTop:"12px",display:"flex",gap:"12px",fontSize:"12px",color:r?"#94a3b8":"#64748b"},categoryItem:{display:"flex",alignItems:"center",gap:"6px"},categoryDot:L=>({width:"8px",height:"8px",borderRadius:"50%",backgroundColor:L}),summaryCard:{backgroundColor:r?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"12px",padding:"16px",marginBottom:"20px",border:`2px solid ${f()}20`},summaryGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",textAlign:"center"},summaryItem:{display:"flex",flexDirection:"column",gap:"4px"},summaryValue:{fontSize:"24px",fontWeight:"700",color:f()},summaryLabel:{fontSize:"11px",color:r?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:"600"}},y=A.reduce((L,Q)=>L+Q.totalHours,0),b=A.length>0?(y/A.length).toFixed(1):0,H=A.length>0?(A.reduce((L,Q)=>L+Q.totalManDays,0)/A.length).toFixed(1):0,S=A.length>0?(A.reduce((L,Q)=>L+Q.utilizationPercentage,0)/A.length).toFixed(1):0;return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(30px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        .user-card:hover {
          transform: translateX(4px);
          box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
      `}),n.jsx("div",{style:g.overlay,onClick:e,children:n.jsxs("div",{style:g.modal,onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{style:g.header,children:[n.jsxs("div",{style:g.headerLeft,children:[u(),n.jsxs("div",{children:[n.jsxs("div",{style:g.headerTitle,children:[a," Users"]}),n.jsxs("div",{style:g.headerSubtitle,children:[A.length," ",A.length===1?"user":"users"," in this category"]})]})]}),n.jsx("button",{style:g.closeButton,onClick:e,onMouseEnter:L=>L.currentTarget.style.backgroundColor="rgba(59,130,246,0.1)",onMouseLeave:L=>L.currentTarget.style.backgroundColor="transparent",children:n.jsx(mr,{size:24})})]}),n.jsx("div",{style:g.content,children:A.length===0?n.jsxs("div",{style:g.noUsers,children:[n.jsx("div",{style:g.noUsersIcon,children:""}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"No users in this category"}),n.jsx("div",{style:{fontSize:"14px",opacity:.8},children:"All users are in other workload categories"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:g.summaryCard,children:n.jsxs("div",{style:g.summaryGrid,children:[n.jsxs("div",{style:g.summaryItem,children:[n.jsx("div",{style:g.summaryValue,children:A.length}),n.jsx("div",{style:g.summaryLabel,children:"Users"})]}),n.jsxs("div",{style:g.summaryItem,children:[n.jsx("div",{style:g.summaryValue,children:b}),n.jsx("div",{style:g.summaryLabel,children:"Avg Hours"})]}),n.jsxs("div",{style:g.summaryItem,children:[n.jsx("div",{style:g.summaryValue,children:H}),n.jsx("div",{style:g.summaryLabel,children:"Avg Days"})]}),n.jsxs("div",{style:g.summaryItem,children:[n.jsxs("div",{style:g.summaryValue,children:[S,"%"]}),n.jsx("div",{style:g.summaryLabel,children:"Avg Capacity"})]})]})}),A.map((L,Q)=>n.jsxs("div",{className:"user-card",style:g.userCard,onMouseEnter:V=>{V.currentTarget.style.transform="translateX(4px)",V.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.15)"},onMouseLeave:V=>{V.currentTarget.style.transform="translateX(0)",V.currentTarget.style.boxShadow="none"},children:[n.jsxs("div",{style:g.userHeader,children:[n.jsxs("div",{style:g.avatar,children:[L.firstName[0],L.lastName[0]]}),n.jsxs("div",{style:g.userInfo,children:[n.jsxs("div",{style:g.userName,children:[L.firstName," ",L.lastName]}),n.jsxs("div",{style:g.userDepartment,children:[n.jsx("span",{children:L.department}),n.jsx("span",{children:""}),n.jsx("span",{children:L.email})]})]})]}),n.jsxs("div",{style:g.statsGrid,children:[n.jsxs("div",{style:g.statItem,children:[n.jsx("div",{style:g.statValue,children:L.totalHours.toFixed(0)}),n.jsx("div",{style:g.statLabel,children:"Hours"})]}),n.jsxs("div",{style:g.statItem,children:[n.jsx("div",{style:g.statValue,children:L.totalManDays.toFixed(1)}),n.jsx("div",{style:g.statLabel,children:"Man-Days"})]}),n.jsxs("div",{style:g.statItem,children:[n.jsxs("div",{style:g.statValue,children:[L.utilizationPercentage.toFixed(1),"%"]}),n.jsx("div",{style:g.statLabel,children:"Capacity"})]})]}),n.jsx("div",{style:g.utilizationBar,children:n.jsx("div",{style:g.utilizationFill(L.utilizationPercentage)})}),(L.projectHours>0||L.operationsHours>0||L.adminHours>0)&&n.jsxs("div",{style:g.categoryBreakdown,children:[L.projectHours>0&&n.jsxs("div",{style:g.categoryItem,children:[n.jsx("div",{style:g.categoryDot("#3b82f6")}),n.jsxs("span",{children:["Project: ",L.projectHours.toFixed(0),"h"]})]}),L.operationsHours>0&&n.jsxs("div",{style:g.categoryItem,children:[n.jsx("div",{style:g.categoryDot("#8b5cf6")}),n.jsxs("span",{children:["Operations: ",L.operationsHours.toFixed(0),"h"]})]}),L.adminHours>0&&n.jsxs("div",{style:g.categoryItem,children:[n.jsx("div",{style:g.categoryDot("#f59e0b")}),n.jsxs("span",{children:["Admin: ",L.adminHours.toFixed(0),"h"]})]})]})]},Q))]})})]})})]})},h4=({isOpen:i,onClose:e,selectedDate:t,events:r,isDarkMode:a})=>{if(!i)return null;const A=g=>{const y={weekday:"long",year:"numeric",month:"long",day:"numeric"};return new Date(g).toLocaleDateString("en-US",y)},c=g=>new Date(g).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),p=(g,y)=>{const b=new Date(y)-new Date(g),H=Math.floor(b/(1e3*60*60)),S=Math.floor(b%(1e3*60*60)/(1e3*60));return H>0?`${H}h ${S}m`:`${S}m`},u=r.filter(g=>{const y=new Date(g.start.dateTime).toDateString(),b=new Date(t).toDateString();return y===b}).sort((g,y)=>new Date(g.start.dateTime)-new Date(y.start.dateTime)),f={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,animation:"fadeIn 0.3s ease-out",padding:"20px"},modal:{backgroundColor:a?"#1e293b":"#ffffff",borderRadius:"24px",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.3)",width:"90%",maxWidth:"700px",maxHeight:"85vh",overflow:"hidden",animation:"slideUp 0.3s ease-out",border:a?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)"},header:{padding:"24px 28px",borderBottom:a?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",display:"flex",justifyContent:"space-between",alignItems:"center",background:a?"linear-gradient(135deg, #334155 0%, #1e293b 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)"},headerTitle:{fontSize:"20px",fontWeight:"700",color:a?"#e2e8f0":"#1e293b",marginBottom:"4px"},headerDate:{fontSize:"14px",color:a?"#94a3b8":"#64748b",fontWeight:"500"},closeButton:{background:"none",border:"none",color:a?"#94a3b8":"#64748b",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},content:{padding:"24px 28px",maxHeight:"calc(85vh - 100px)",overflowY:"auto"},noEvents:{textAlign:"center",padding:"60px 20px",color:a?"#94a3b8":"#64748b"},noEventsIcon:{fontSize:"48px",marginBottom:"16px",opacity:.5},eventCard:{backgroundColor:a?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",borderRadius:"16px",padding:"20px",marginBottom:"16px",borderLeft:"4px solid #3b82f6",transition:"all 0.2s ease",cursor:"pointer",position:"relative",overflow:"hidden"},eventTime:{fontSize:"13px",fontWeight:"600",color:"#3b82f6",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},eventTitle:{fontSize:"16px",fontWeight:"600",color:a?"#e2e8f0":"#1e293b",marginBottom:"8px",lineHeight:"1.4"},eventDetails:{display:"flex",flexDirection:"column",gap:"6px",fontSize:"13px",color:a?"#94a3b8":"#64748b"},eventDetail:{display:"flex",alignItems:"center",gap:"8px"},eventBadge:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:a?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.1)",color:"#3b82f6",marginTop:"8px"}};return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(30px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        .event-card:hover {
          transform: translateX(4px);
          box-shadow: 0 8px 20px rgba(59,130,246,0.15);
        }
      `}),n.jsx("div",{style:f.overlay,onClick:e,children:n.jsxs("div",{style:f.modal,onClick:g=>g.stopPropagation(),children:[n.jsxs("div",{style:f.header,children:[n.jsxs("div",{children:[n.jsxs("div",{style:f.headerTitle,children:[u.length," ",u.length===1?"Event":"Events"]}),n.jsx("div",{style:f.headerDate,children:A(t)})]}),n.jsx("button",{style:f.closeButton,onClick:e,onMouseEnter:g=>g.currentTarget.style.backgroundColor="rgba(59,130,246,0.1)",onMouseLeave:g=>g.currentTarget.style.backgroundColor="transparent",children:n.jsx(mr,{size:24})})]}),n.jsx("div",{style:f.content,children:u.length===0?n.jsxs("div",{style:f.noEvents,children:[n.jsx("div",{style:f.noEventsIcon,children:""}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"No events scheduled"}),n.jsx("div",{style:{fontSize:"14px",opacity:.8},children:"You're free this day!"})]}):u.map((g,y)=>{var b,H,S;return n.jsxs("div",{className:"event-card",style:f.eventCard,onMouseEnter:L=>{L.currentTarget.style.transform="translateX(4px)",L.currentTarget.style.boxShadow="0 8px 20px rgba(59,130,246,0.15)"},onMouseLeave:L=>{L.currentTarget.style.transform="translateX(0)",L.currentTarget.style.boxShadow="none"},children:[n.jsxs("div",{style:f.eventTime,children:[n.jsx(Xi,{size:14}),c(g.start.dateTime)," - ",c(g.end.dateTime),n.jsx("span",{style:{marginLeft:"auto",fontSize:"12px",opacity:.7},children:p(g.start.dateTime,g.end.dateTime)})]}),n.jsx("div",{style:f.eventTitle,children:g.subject||"Untitled Event"}),n.jsxs("div",{style:f.eventDetails,children:[((b=g.location)==null?void 0:b.displayName)&&n.jsxs("div",{style:f.eventDetail,children:[n.jsx(Py,{size:14}),g.location.displayName]}),g.isOnlineMeeting&&n.jsxs("div",{style:f.eventBadge,children:[n.jsx(sS,{size:14}),"Online Meeting"]}),((S=(H=g.organizer)==null?void 0:H.emailAddress)==null?void 0:S.name)&&n.jsxs("div",{style:f.eventDetail,children:[n.jsx(Nt,{size:14}),"Organized by ",g.organizer.emailAddress.name]})]})]},y)})})]})})]})},g4=({isDarkMode:i,events:e=[],holidays:t=[],onDateClick:r})=>{const[a,A]=m.useState(new Date),[c,p]=m.useState(null),u=new Date,f=a.getMonth(),g=a.getFullYear(),y=["January","February","March","April","May","June","July","August","September","October","November","December"],b=["S","M","T","W","T","F","S"],H=new Date(g,f,1),S=new Date(g,f+1,0),L=H.getDay(),Q=S.getDate(),V=[];for(let le=0;le<L;le++)V.push(null);for(let le=1;le<=Q;le++)V.push(le);const D=le=>le===u.getDate()&&f===u.getMonth()&&g===u.getFullYear(),te=()=>{A(new Date(g,f-1,1))},J=()=>{A(new Date(g,f+1,1))},M=le=>{if(!le)return!1;const G=new Date(g,f,le).toDateString();return e.some(se=>new Date(se.start.dateTime).toDateString()===G)},N=le=>{if(!le)return null;const G=g,se=String(f+1).padStart(2,"0"),pe=String(le).padStart(2,"0"),Me=`${G}-${se}-${pe}`;return t.find(be=>be.date===Me)},X=le=>{if(!le)return 0;const G=new Date(g,f,le).toDateString();return e.filter(se=>new Date(se.start.dateTime).toDateString()===G).length},Be=le=>{if(!le)return;const G=new Date(g,f,le);r(G)},Ae={container:{marginTop:"24px",padding:"20px",backgroundColor:i?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",transition:"all 0.3s ease",backdropFilter:"blur(10px)",border:i?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"0 8px"},monthYear:{fontSize:"18px",fontWeight:"700",color:i?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},navButton:le=>({background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",color:i?"#94a3b8":"#64748b",transition:"all 0.2s ease",backgroundColor:le?"rgba(59,130,246,0.1)":"transparent",transform:le?"scale(1.1)":"scale(1)"}),weekDays:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"12px"},weekDay:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",padding:"8px 4px",textTransform:"uppercase",transition:"all 0.3s ease"},daysGrid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},day:(le,G,se,pe)=>({textAlign:"center",padding:"12px 4px",fontSize:"14px",fontWeight:G?"700":"500",color:le?G?i?"#ffffff":"#1e293b":i?"#e2e8f0":"#374151":"transparent",border:pe?"2px solid #3b82f6":"none",backgroundColor:pe?"rgba(59,130,246,0.15)":G?"#3b82f6":se?"rgba(59,130,246,0.1)":"transparent",borderRadius:"8px",cursor:le?"pointer":"default",transition:"all 0.2s ease",transform:se&&le?"scale(1.1)":"scale(1)",boxShadow:G?"0 4px 12px rgba(59,130,246,0.3)":"none",position:"relative"}),eventDot:{position:"absolute",bottom:"4px",left:"50%",transform:"translateX(-50%)",fontSize:"8px",color:"#3b82f6"}};return n.jsxs("div",{style:Ae.container,children:[n.jsxs("div",{style:Ae.header,children:[n.jsx("button",{onClick:te,style:Ae.navButton(c==="prev"),onMouseEnter:()=>p("prev"),onMouseLeave:()=>p(null),children:n.jsx(r2,{size:20})}),n.jsxs("div",{style:Ae.monthYear,children:[y[f]," ",g]}),n.jsx("button",{onClick:J,style:Ae.navButton(c==="next"),onMouseEnter:()=>p("next"),onMouseLeave:()=>p(null),children:n.jsx(Hp,{size:20})})]}),n.jsx("div",{style:Ae.weekDays,children:b.map((le,G)=>n.jsx("div",{style:Ae.weekDay,children:le},G))}),n.jsx("div",{style:Ae.daysGrid,children:V.map((le,G)=>{const se=X(le),pe=N(le);return n.jsxs("div",{onClick:()=>Be(le),style:{...Ae.day(le,D(le),c===`day-${G}`,M(le)),border:pe?"2px solid #ef4444":void 0,backgroundColor:pe?"rgba(239,68,68,0.12)":void 0},onMouseEnter:()=>le&&p(`day-${G}`),onMouseLeave:()=>p(null),children:[le,pe&&n.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",fontSize:"9px",fontWeight:"700",color:"#ef4444"},children:"PH"}),se>0&&n.jsx("div",{style:Ae.eventDot,children:"".repeat(Math.min(se,3))})]},G)})})]})},f4=()=>{var Tt,I,v,he,Ke,nt;const{collapsed:i}=hd(),[e,t]=m.useState([]),[r,a]=m.useState("calendar"),[A,c]=m.useState("personal"),[p,u]=m.useState([]),[f,g]=m.useState(!1),[y,b]=m.useState(!1),[H,S]=m.useState(!1),[L,Q]=m.useState(!1),[V,D]=m.useState(new Date),[te,J]=m.useState("week"),[M,N]=m.useState(null),[X,Be]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[Ae,le]=m.useState(null),[G,se]=m.useState(!0),[pe,Me]=m.useState({weeklyHours:0,capacityUtilization:0,projectHours:0,targetHours:32}),[be,de]=m.useState(!1),[Ue,me]=m.useState(!1),[F,re]=m.useState(null),[P,oe]=m.useState(null),[je,U]=m.useState(!1),[B,j]=m.useState(null),[_,ve]=m.useState(!1),k=m.useRef(null),O=m.useRef(null),Z=m.useRef(null),ke=m.useRef(null),[at,T]=m.useState({top:64,left:0}),[ge,He]=m.useState({summary:{totalUsers:0,overworked:0,underutilized:0,optimal:0},users:[],year:new Date().getFullYear()});m.useEffect(()=>{ke.current||(ke.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),Z.current&&document.head.removeChild(Z.current);const E=document.createElement("style");E.setAttribute("data-component","admin-dashboard-background");const $=X?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return E.textContent=`
      .admin-dashboard-page {
        min-height: 100vh;
        background: ${$};
      }
      
      body {
        background: ${$} !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      html, body, #root {
        margin: 0 !important;
        padding: 0 !important;
        background: ${$} !important;
      }
      
      #root > div:first-child,
      .app > div:first-child,
      .main-content,
      .page-container {
        background: transparent !important;
        min-height: 100vh;
      }
      
      div[style*="background: white"],
      div[style*="background-color: white"],
      div[style*="background: #fff"],
      div[style*="background-color: #fff"] {
        background: transparent !important;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      .table-row:hover {
        background-color: rgba(59,130,246,0.05) !important;
        transform: scale(1.01);
      }
      
      * {
        transition: background-color 0.3s ease, background 0.3s ease;
      }
    `,document.head.appendChild(E),Z.current=E,()=>{Z.current&&document.head.contains(Z.current)&&(document.head.removeChild(Z.current),Z.current=null),ke.current&&document.querySelectorAll('[data-component="admin-dashboard-background"]').length===0&&Object.assign(document.body.style,ke.current)}},[X]),m.useEffect(()=>{(async()=>{try{console.log(" Fetching user data from /user/profile...");const $=await Fe("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" API Response status:",$.status),$.ok){const Qe=await $.json();console.log(" User data received:",Qe),le(Qe),Qe.role==="admin"?(console.log(" Admin user detected - setting status view"),a("status")):(console.log(" Member user detected - setting calendar view"),a("calendar"))}else{const Qe=await $.text();console.error(" Failed to fetch user data:",$.status,Qe),le(null)}}catch($){console.error(" Error fetching user data:",$),le(null)}finally{se(!1)}})()},[]),m.useEffect(()=>{(async()=>{try{const $=new Date().getFullYear(),Qe=await Fe(`/actuals/holidays?year=${$}`,{method:"GET",credentials:"include"});if(Qe.ok){const W=await Qe.json();u(W)}}catch($){console.error("Failed to fetch holidays:",$)}})()},[]),m.useEffect(()=>{if(k.current&&y){const E=k.current.getBoundingClientRect();T({top:E.bottom+4,left:E.left})}},[y]),m.useEffect(()=>{const E=$=>{k.current&&!k.current.contains($.target)&&b(!1),O.current&&!O.current.contains($.target)&&g(!1)};return(y||f)&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[y,f]),m.useEffect(()=>{const E=async()=>{var $;try{console.log(" Starting calendar fetch..."),console.log(" User data exists:",!!Ae),console.log(" Fetching from: /calendar/events");const Qe=await Fe("/calendar/events",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" Calendar response status:",Qe.status),Qe.ok){const W=await Qe.json();console.log(" Calendar data received:",W),console.log(" Number of events:",(($=W.events)==null?void 0:$.length)||0),t(W.events||[])}else{const W=await Qe.text();console.error(" Calendar fetch failed:",Qe.status),console.error(" Error response:",W)}}catch(Qe){console.error(" Calendar fetch error:",Qe),console.error(" Error details:",Qe.message)}};console.log(" Calendar useEffect running, userData:",Ae),Ae?(console.log(" User data available, fetching calendar..."),E()):console.log(" Waiting for user data...")},[Ae]),m.useEffect(()=>{Ae&&(async()=>{try{console.log(` Fetching user stats for period: ${te}`);const $=await Fe(`/actuals/stats?period=${te}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if($.ok){const Qe=await $.json();console.log(" Stats received:",Qe),Me(Qe)}else console.error(" Failed to fetch stats")}catch($){console.error(" Error fetching stats:",$)}})()},[Ae,te]),m.useEffect(()=>{Ae&&(async()=>{if(!(!Ae||Ae.role!=="admin"))try{const $=await Fe(`/api/workload-status?period=${te}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if($.ok){const Qe=await $.json();He(Qe)}}catch($){console.error("Error fetching workload status:",$)}})()},[Ae,te]);const ze=()=>{const E=!X;Be(E),S(!1);try{localStorage.setItem("darkMode",E.toString())}catch{console.log("Dark mode preference cannot be saved in this environment")}},mt=E=>{D(E),Q(!0)},tt=E=>E<70?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":E<=100?"linear-gradient(135deg, #10b981 0%, #059669 100%)":E<=120?"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",Se={page:{minHeight:"100vh",padding:"0",background:X?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease",boxSizing:"border-box",width:"100%",overflowX:"hidden"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:X?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},card:(E,$)=>({backgroundColor:X?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"28px",marginBottom:"28px",boxShadow:E?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:E?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",border:X?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:$==="stats"?"visible":"hidden",zIndex:$==="stats"&&(je||P==="leave")?50:1}),cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.03) 0%, transparent 70%)",opacity:0,transition:"opacity 0.4s ease",pointerEvents:"none"},flexRow:{display:"flex",justifyContent:"space-between",gap:"32px",flexWrap:"wrap"},statItem:E=>({flex:1,textAlign:"center",padding:"20px",borderRadius:"16px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",backgroundColor:E?"rgba(59,130,246,0.05)":"transparent",transform:E?"scale(1.05)":"scale(1)",position:"relative"}),statLabel:{fontSize:"14px",color:X?"#94a3b8":"#64748b",marginBottom:"8px",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},statValue:E=>({fontSize:"36px",fontWeight:"800",color:X?"#e2e8f0":"#1e293b",transition:"all 0.3s ease",transform:E?"scale(1.1)":"scale(1)",textShadow:E?"0 4px 8px rgba(30,41,59,0.3)":"none"}),statusFlex:{display:"flex",gap:"20px",flexWrap:"wrap",marginTop:"24px"},capacityValue:(E,$)=>({fontSize:"36px",fontWeight:"800",backgroundImage:tt($),backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",transition:"all 0.3s ease",transform:E?"scale(1.1)":"scale(1)"}),statusBox:(E,$,Qe)=>({flex:1,background:X?`linear-gradient(135deg, ${$} 0%, ${$}dd 100%)`:`linear-gradient(135deg, ${E} 0%, ${E}dd 100%)`,borderRadius:"16px",padding:"24px",textAlign:"center",minWidth:"160px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",transform:Qe?"translateY(-4px) scale(1.03)":"translateY(0) scale(1)",boxShadow:Qe?"0 12px 24px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",border:X?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(255,255,255,0.5)",position:"relative",overflow:"hidden"}),statusTitle:{fontSize:"16px",fontWeight:"700",marginBottom:"8px",color:X?"#e2e8f0":"#374151",transition:"all 0.3s ease"},statusCount:{fontSize:"24px",fontWeight:"800",marginBottom:"8px",color:X?"#f1f5f9":"#1f2937",transition:"all 0.3s ease"},statusNote:{fontSize:"12px",color:X?"#94a3b8":"#6b7280",fontWeight:"500",transition:"all 0.3s ease"},table:{width:"100%",borderCollapse:"collapse",marginTop:"20px",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},th:{textAlign:"left",backgroundColor:X?"#4b5563":"#f8fafc",padding:"16px 12px",fontSize:"14px",color:X?"#e2e8f0":"#374151",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},td:{padding:"16px 12px",fontSize:"15px",color:X?"#e2e8f0":"#1f2937",borderBottom:X?"1px solid #4b5563":"1px solid #f1f5f9",transition:"all 0.3s ease"},tableRow:{transition:"all 0.2s ease",cursor:"pointer"},sectionOverlay:{position:"fixed",top:at.top,left:at.left,zIndex:999,backgroundColor:X?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:X?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},statusOverlay:{position:"absolute",top:"100%",left:0,zIndex:9999,backgroundColor:X?"rgba(30,41,59,0.98)":"rgba(255,255,255,0.98)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.25)",padding:"12px 0",minWidth:"160px",border:X?"2px solid rgba(51,65,85,0.8)":"2px solid rgba(255,255,255,0.8)",marginTop:"8px",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",pointerEvents:"auto",transition:"all 0.3s ease"},blurOption:E=>({backgroundColor:E?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:X?"#e2e8f0":"#374151",transform:E?"translateX(4px)":"translateX(0)",borderLeft:E?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),toggleViewContainer:{fontSize:"18px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:X?"#e2e8f0":"#1e293b"},toggleViewContainerStatic:{fontSize:"18px",fontWeight:"700",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:X?"#e2e8f0":"#1e293b"},chevron:(E,$)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:E||$?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:E||$?"#3b82f6":X?"#94a3b8":"#64748b"}),floatingIcon:{position:"absolute",top:"20px",right:"20px",opacity:.1,fontSize:"48px",color:"#3b82f6"},topButton:E=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:E?"rgba(59,130,246,0.1)":X?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:E?"#3b82f6":X?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:E?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:E?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:X?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:X?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:X?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:X?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:X?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:X?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:X?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:X?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:X?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},activityTitle:{marginBottom:"20px",fontSize:"18px",fontWeight:"700",color:X?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},loadingSpinner:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",fontSize:"18px",color:X?"#94a3b8":"#64748b"}},ie={container:{display:"flex",gap:"8px",padding:"4px",backgroundColor:X?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",borderRadius:"12px",border:X?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backdropFilter:"blur(10px)",marginBottom:"20px",width:"fit-content"},button:(E,$)=>({padding:"10px 20px",borderRadius:"8px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:E?"#3b82f6":$?"rgba(59,130,246,0.1)":"transparent",color:E?"#fff":X?"#e2e8f0":"#64748b",boxShadow:E?"0 2px 8px rgba(59,130,246,0.3)":"none",transform:$&&!E?"scale(1.05)":"scale(1)"})},dt=E=>{j(E),ve(!0)},ht=E=>{c(E),b(!1),E==="team"?window.location.href="/adminteamcapacity":E==="utilization"&&(window.location.href="/adminutilization")},R=()=>{if(!Ae)return"Loading...";const E=Ae.firstName||"User";switch(A){case"personal":return`Welcome back, ${E}!`;case"team":return"Team Capacity Summary";case"utilization":return"Utilization Overview";default:return`Welcome back, ${E}!`}},Ut=(Ae==null?void 0:Ae.role)==="admin";return G?n.jsx("div",{className:"admin-dashboard-page",style:Se.page,children:n.jsx("div",{style:Se.loadingSpinner,children:"Loading dashboard..."})}):Ae?n.jsxs("div",{className:"admin-dashboard-page",style:Se.page,children:[n.jsxs("div",{style:{padding:"30px",background:"transparent",minHeight:"100vh"},children:[n.jsxs("div",{style:Se.headerRow,children:[n.jsx("div",{style:Se.headerLeft,children:Ut?n.jsx("div",{style:Se.toggleViewContainerStatic,className:"floating",children:n.jsx("span",{style:Se.header,children:R()})}):n.jsx("div",{style:Se.toggleViewContainerStatic,className:"floating",children:n.jsx("span",{style:Se.header,children:R()})})}),n.jsxs("div",{style:Se.headerRight,children:[Ut&&n.jsxs("button",{style:Se.topButton(F==="alerts"),onMouseEnter:()=>re("alerts"),onMouseLeave:()=>re(null),onClick:()=>{window.location.href="/adminalerts"},children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:Se.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:Se.topButton(F==="profile"),onMouseEnter:()=>{re("profile"),S(!0)},onMouseLeave:()=>{re(null)},onClick:()=>{window.location.href="/adminprofile"},children:n.jsx(Nt,{size:20})}),H&&Ae&&n.jsxs("div",{style:Se.profileTooltip,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:[n.jsx("div",{style:Se.tooltipArrow}),n.jsxs("div",{style:Se.userInfo,children:[n.jsxs("div",{style:Se.avatar,children:[(((Tt=Ae.firstName)==null?void 0:Tt[0])||"").toUpperCase(),(((I=Ae.lastName)==null?void 0:I[0])||"").toUpperCase()]}),n.jsxs("div",{style:Se.userDetails,children:[n.jsxs("div",{style:Se.userName,children:[Ae.firstName||"Unknown"," ",Ae.lastName||"User"]}),n.jsxs("div",{style:Se.userRole,children:[Ae.role==="admin"?"Admin":"Member","  ",Ae.department||"N/A"]})]})]}),n.jsxs("div",{style:Se.userStats,children:[n.jsxs("div",{style:Se.tooltipStatItem,children:[n.jsx("div",{style:Se.tooltipStatNumber,children:pe.totalHours}),n.jsx("div",{style:Se.tooltipStatLabel,children:"Hours"})]}),n.jsxs("div",{style:Se.tooltipStatItem,children:[n.jsx("div",{style:Se.tooltipStatNumber,children:pe.projectHours>0?Math.ceil(pe.projectHours/40):0}),n.jsx("div",{style:Se.tooltipStatLabel,children:"Projects"})]}),n.jsxs("div",{style:Se.tooltipStatItem,children:[n.jsxs("div",{style:Se.tooltipStatNumber,children:[pe.capacityUtilization,"%"]}),n.jsx("div",{style:Se.tooltipStatLabel,children:"Capacity"})]})]}),n.jsx("button",{style:Se.themeToggle,onClick:ze,children:X?" Light Mode":" Dark Mode"})]})]})]})]}),Ut&&y&&n.jsx("div",{style:Se.sectionOverlay,onMouseDown:E=>E.stopPropagation(),onClick:E=>E.stopPropagation(),children:n.jsx("div",{children:["personal","team","utilization"].map((E,$)=>n.jsx("div",{style:Se.blurOption(F===`section-${$}`),onClick:Qe=>{Qe.preventDefault(),Qe.stopPropagation(),ht(E)},onMouseDown:Qe=>{Qe.preventDefault(),Qe.stopPropagation()},onMouseEnter:()=>re(`section-${$}`),onMouseLeave:()=>re(null),children:E==="personal"?"Personal Dashboard":E==="team"?"Team Capacity":"Utilization Overview"},E))})}),n.jsxs("div",{style:ie.container,children:[n.jsx("button",{style:ie.button(te==="week",M==="week"),onClick:()=>J("week"),onMouseEnter:()=>N("week"),onMouseLeave:()=>N(null),children:"This Week"}),n.jsx("button",{style:ie.button(te==="month",M==="month"),onClick:()=>J("month"),onMouseEnter:()=>N("month"),onMouseLeave:()=>N(null),children:"This Month"})]}),n.jsxs("div",{style:Se.card(F==="stats","stats"),onMouseEnter:()=>re("stats"),onMouseLeave:()=>re(null),children:[n.jsx("div",{style:Se.cardGlow}),n.jsx("div",{style:Se.floatingIcon,children:n.jsx($c,{})}),n.jsxs("div",{style:Se.flexRow,children:[n.jsxs("div",{style:Se.statItem(P==="hours"),onMouseEnter:()=>oe("hours"),onMouseLeave:()=>oe(null),children:[n.jsxs("div",{style:Se.statLabel,children:[n.jsx(Xi,{size:16,style:{display:"inline",marginRight:"4px"}}),"Hours Logged ",te==="week"?"This Week":"This Month"]}),n.jsx("div",{style:Se.statValue(P==="hours"),children:pe.totalHours||0}),n.jsx("div",{style:{fontSize:"12px",color:X?"#94a3b8":"#64748b",marginTop:"4px"},children:"Excludes leave/non-working hours"})]}),n.jsxs("div",{style:{...Se.statItem(P==="leave"),position:"relative"},onMouseEnter:()=>oe("leave"),onMouseLeave:()=>oe(null),children:[n.jsxs("div",{style:Se.statLabel,children:[n.jsx(To,{size:16,style:{display:"inline",marginRight:"4px"}}),"Leave / Holidays "]}),n.jsx("div",{style:{fontSize:"36px",fontWeight:"800",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",transition:"all 0.3s ease",transform:P==="leave"?"scale(1.1)":"scale(1)"},children:(pe.leaveDays||0)+(pe.holidayDays||0)}),n.jsxs("div",{style:{fontSize:"12px",color:X?"#94a3b8":"#64748b",marginTop:"4px"},children:["days ",te==="week"?"this week":"this month"]}),P==="leave"&&n.jsxs("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px",background:X?"#020617":"#ffffff",color:X?"#e5e7eb":"#1f2937",padding:"12px",borderRadius:"10px",fontSize:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",zIndex:1e3,minWidth:"220px"},children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Leave:"})," ",pe.leaveDays||0," days"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Public Holidays:"})," ",pe.holidayDays||0," days"]}),((v=pe.holidaysInPeriod)==null?void 0:v.length)>0&&n.jsxs("div",{style:{marginTop:"8px",opacity:.85},children:[n.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:"Holidays:"}),pe.holidaysInPeriod.map((E,$)=>n.jsxs("div",{children:[" ",E.name]},$))]})]})]}),n.jsxs("div",{style:{...Se.statItem(P==="capacity"),position:"relative"},onMouseEnter:()=>oe("capacity"),onMouseLeave:()=>oe(null),children:[n.jsxs("div",{onMouseEnter:()=>U(!0),onMouseLeave:()=>U(!1),children:[n.jsxs("div",{style:Se.statLabel,children:[n.jsx(vA,{size:16,style:{display:"inline",marginRight:"4px"}}),"Capacity Utilization "]}),n.jsxs("div",{style:Se.capacityValue(P==="capacity",pe.capacityUtilization||0),children:[pe.capacityUtilization||0,"%"]}),je&&n.jsxs("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px",background:X?"#020617":"#ffffff",color:X?"#e5e7eb":"#1f2937",padding:"12px",borderRadius:"10px",fontSize:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",zIndex:1e3,minWidth:"220px"},children:[n.jsxs("div",{children:[n.jsx("span",{style:{color:"#3b82f6"},children:""})," < 70%  Underutilized"]}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"#10b981"},children:""})," 70100%  Optimal"]}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"#f59e0b"},children:""})," 100120%  Stretched"]}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"#ef4444"},children:""})," > 120%  Overloaded"]})]})]}),n.jsxs("div",{style:{fontSize:"12px",color:X?"#94a3b8":"#64748b",marginTop:"4px"},children:[pe.effectiveWorkingDays>0?`Avg: ${(pe.totalHours/pe.effectiveWorkingDays).toFixed(1)}h/day`:"No working days","  ",pe.effectiveWorkingDays||0," working days"]})]})]})]}),n.jsxs("div",{style:Se.card(F==="status"),onMouseEnter:()=>re("status"),onMouseLeave:()=>re(null),children:[n.jsx("div",{style:Se.cardGlow}),n.jsx("div",{style:Se.floatingIcon,children:n.jsx(Eo,{})}),n.jsxs("div",{style:{position:"relative"},children:[Ut?n.jsxs("div",{ref:O,style:Se.toggleViewContainer,onClick:()=>g(E=>!E),onMouseEnter:()=>de(!0),onMouseLeave:()=>de(!1),children:[r==="status"?"Status":"Mini Calendar",n.jsx(jo,{style:Se.chevron(f,be),size:18})]}):n.jsx("div",{style:Se.toggleViewContainerStatic,children:"Mini Calendar"}),Ut&&f&&n.jsxs("div",{style:Se.statusOverlay,onMouseDown:E=>E.stopPropagation(),children:[n.jsx("div",{style:Se.blurOption(F==="view-0"),onMouseDown:E=>{E.preventDefault(),E.stopPropagation(),a("status"),g(!1)},onMouseEnter:()=>re("view-0"),onMouseLeave:()=>re(null),children:"Status"}),n.jsx("div",{style:Se.blurOption(F==="view-1"),onMouseDown:E=>{E.preventDefault(),E.stopPropagation(),a("calendar"),g(!1)},onMouseEnter:()=>re("view-1"),onMouseLeave:()=>re(null),children:"Mini Calendar"})]})]}),r==="status"&&Ut?n.jsx("div",{style:Se.statusFlex,children:[{title:"Overloaded",count:`${ge.summary.overworked}/${ge.summary.totalUsers}`,users:((he=ge.users)==null?void 0:he.filter(E=>E.status==="Overworked"))||[],note:"Users working over capacity",color:"#fee2e2",darkColor:"rgba(239,68,68,0.15)"},{title:"Underutilized",count:`${ge.summary.underutilized}/${ge.summary.totalUsers}`,users:((Ke=ge.users)==null?void 0:Ke.filter(E=>E.status==="Underutilized"))||[],note:"Users working under capacity",color:"#fef9c3",darkColor:"rgba(234,179,8,0.15)"},{title:"Optimal",count:`${ge.summary.optimal}/${ge.summary.totalUsers}`,users:((nt=ge.users)==null?void 0:nt.filter(E=>E.status==="Optimal"))||[],note:"Users working at optimal capacity",color:"#dcfce7",darkColor:"rgba(34,197,94,0.15)"}].map((E,$)=>n.jsxs("div",{style:Se.statusBox(E.color,E.darkColor,F===`status-${$}`),onMouseEnter:()=>re(`status-${$}`),onMouseLeave:()=>re(null),onClick:()=>dt(E),children:[X&&n.jsx("div",{style:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:E.title==="Overloaded"?"radial-gradient(circle, rgba(239,68,68,0.1) 0%, transparent 70%)":E.title==="Underutilized"?"radial-gradient(circle, rgba(234,179,8,0.1) 0%, transparent 70%)":"radial-gradient(circle, rgba(34,197,94,0.1) 0%, transparent 70%)",opacity:F===`status-${$}`?1:.5,transition:"opacity 0.4s ease",pointerEvents:"none"}}),n.jsx("div",{style:Se.statusTitle,children:E.title}),n.jsx("div",{style:Se.statusCount,children:E.count}),n.jsx("div",{style:Se.statusNote,children:E.note})]},`${$}-${X}`))},`status-cards-${X}`):n.jsx(g4,{isDarkMode:X,events:e,holidays:p,onDateClick:mt})]}),n.jsxs("div",{style:Se.card(F==="activity"),onMouseEnter:()=>re("activity"),onMouseLeave:()=>re(null),children:[n.jsx("div",{style:Se.cardGlow}),n.jsx("div",{style:Se.activityTitle,children:"Recent Activity"}),n.jsxs("table",{style:Se.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:Se.th,children:"Date"}),n.jsx("th",{style:Se.th,children:"Meeting"}),n.jsx("th",{style:Se.th,children:"Type"}),n.jsx("th",{style:Se.th,children:"Duration"})]})}),n.jsx("tbody",{children:(()=>{const E=new Date,$=e.filter(Qe=>new Date(Qe.end.dateTime)<E).sort((Qe,W)=>new Date(W.start.dateTime)-new Date(Qe.start.dateTime)).slice(0,10);return $.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"4",style:{...Se.td,textAlign:"center",padding:"40px 20px",color:X?"#94a3b8":"#64748b",fontStyle:"italic"},children:"No recent meetings found"})}):$.map((Qe,W)=>{var Ln,$r;const Y=new Date(Qe.start.dateTime),We=new Date(Qe.end.dateTime),Ze=Y.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),St=We-Y,xe=Math.floor(St/(1e3*60*60)),C=Math.floor(St%(1e3*60*60)/(1e3*60)),ae=xe>0?`${xe}h ${C}m`:`${C}m`;let Ce="Meeting",At="",bt=X?"#94a3b8":"#64748b";Qe.isOnlineMeeting?(Ce="Online Meeting",At="",bt="#3b82f6"):(Ln=Qe.location)!=null&&Ln.displayName&&(Ce="In-Person",At="",bt="#10b981");const Pt=(($r=Qe.subject)==null?void 0:$r.toLowerCase())||"";return(Pt.includes("call")||Pt.includes("phone"))&&(Ce="Call",At="",bt="#8b5cf6"),n.jsxs("tr",{className:"table-row",style:{...Se.tableRow,cursor:"pointer"},onClick:()=>{D(Y),Q(!0)},onMouseEnter:lr=>{lr.currentTarget.style.backgroundColor="rgba(59,130,246,0.05)",lr.currentTarget.style.transform="scale(1.01)"},onMouseLeave:lr=>{lr.currentTarget.style.backgroundColor="transparent",lr.currentTarget.style.transform="scale(1)"},children:[n.jsx("td",{style:Se.td,children:Ze}),n.jsx("td",{style:{...Se.td,fontWeight:"600",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Qe.subject||"Untitled Meeting"}),n.jsxs("td",{style:{...Se.td,color:bt,fontWeight:"600"},children:[n.jsx("span",{style:{marginRight:"6px"},children:At}),Ce]}),n.jsx("td",{style:Se.td,children:ae})]},W)})})()})]})]})]}),n.jsx(h4,{isOpen:L,onClose:()=>Q(!1),selectedDate:V,events:e,isDarkMode:X}),n.jsx(p4,{isOpen:_,onClose:()=>ve(!1),statusData:B,isDarkMode:X})]}):n.jsx("div",{className:"admin-dashboard-page",style:Se.page,children:n.jsx("div",{style:Se.loadingSpinner,children:n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"16px"},children:""}),n.jsx("div",{children:"Unable to load user profile"}),n.jsx("div",{style:{fontSize:"14px",marginTop:"8px",opacity:.7},children:"Please ensure you are logged in and try again"}),n.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"16px",padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"#3b82f6",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Retry"})]})})})},m4=()=>{const[i,e]=m.useState("all"),[t,r]=m.useState("all"),[a,A]=m.useState(null),[c,p]=m.useState("team"),[u,f]=m.useState(!1),[g,y]=m.useState(!1),[b,H]=m.useState("week"),[S,L]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[Q,V]=m.useState(!1),[D,te]=m.useState(null),[J,M]=m.useState({top:64,left:0}),N=m.useRef(null),[X,Be]=m.useState([]),[Ae,le]=m.useState(!1),[G,se]=m.useState(null),[pe,Me]=m.useState(null),[be,de]=m.useState({availableHours:0,assignedHours:0,assignedPercentage:0,availableCapacity:0});m.useEffect(()=>{if(N.current&&u){const B=N.current.getBoundingClientRect();M({top:B.bottom+4,left:B.left})}},[u]),m.useEffect(()=>{const B=j=>{N.current&&!N.current.contains(j.target)&&f(!1)};return u&&document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[u]),m.useEffect(()=>{(async()=>{le(!0),se(null);try{console.log(` Fetching team capacity for ${b}...`);const j=await Fe(`/api/workload-status?period=${b}`,{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch team capacity");const _=await j.json();console.log(" Team data:",_);const ve=(_.users||[]).map(at=>({name:`${at.firstName} ${at.lastName||""}`.trim(),utilization:at.utilizationPercentage||0,project:"Various",team:at.department||"Unknown"}));Be(ve);const k=_.users.reduce((at,T)=>at+T.targetHours,0),O=_.users.reduce((at,T)=>at+T.totalHours,0),Z=k>0?Math.round(O/k*100):0,ke=k>0?((k-O)/k*100).toFixed(1):0;de({availableHours:k,assignedHours:O,assignedPercentage:Z,availableCapacity:ke})}catch(j){console.error(" Error fetching team capacity:",j),se(j.message)}finally{le(!1)}})()},[b]),m.useEffect(()=>{(async()=>{try{const j=await Fe("/user/profile",{credentials:"include"});if(j.ok){const _=await j.json();Me(_)}}catch(j){console.error("Error fetching user profile:",j)}})()},[]);const Ue=["all",...new Set(X.map(B=>B.project))],me=["all",...new Set(X.map(B=>B.team))],F=X.filter(B=>(i==="all"||B.project===i)&&(t==="all"||B.team===t)),re=()=>{L(!S);try{localStorage.setItem("darkMode",(!S).toString())}catch{console.log("LocalStorage not available")}y(!1)},P=B=>{p(B),f(!1),B==="reports"?window.location.href="/adminreports":B==="utilization"&&(window.location.href="/adminutilization")},oe=()=>{switch(c){case"reports":return"Personal Reports";case"team":return"Team Capacity Summary";case"utilization":return"Utilization Overview";default:return"Team Capacity Summary"}},je=(B,j)=>B?!j||j.trim()===""?B[0].toUpperCase():`${B[0]}${j[0]}`.toUpperCase():"?",U={page:{minHeight:"100vh",padding:"30px",background:S?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:S?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},toggleViewContainer:{fontSize:"18px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:S?"#e2e8f0":"#1e293b"},chevron:(B,j)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:B||j?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:B||j?"#3b82f6":S?"#94a3b8":"#64748b"}),sectionOverlay:{position:"fixed",top:J.top,left:J.left,zIndex:999,backgroundColor:S?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:S?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},blurOption:B=>({backgroundColor:B?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:S?"#e2e8f0":"#374151",transform:B?"translateX(4px)":"translateX(0)",borderLeft:B?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),periodToggle:{display:"flex",gap:"12px",padding:"8px",backgroundColor:S?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.6)",borderRadius:"12px",backdropFilter:"blur(10px)",border:S?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",width:"fit-content",marginBottom:"24px"},periodButton:B=>({padding:"8px 24px",borderRadius:"8px",border:"none",backgroundColor:B?"#3b82f6":"transparent",color:B?"#fff":S?"#94a3b8":"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",transform:B?"scale(1.05)":"scale(1)"}),statsRow:{display:"flex",gap:"24px",marginBottom:"32px",flexWrap:"wrap"},statCard:(B,j)=>({flex:1,minWidth:"200px",background:`linear-gradient(135deg, ${B} 0%, ${B}dd 100%)`,borderRadius:"20px",padding:"24px",color:"#fff",boxShadow:j?"0 12px 24px rgba(0,0,0,0.15)":"0 6px 16px rgba(0,0,0,0.1)",transform:j?"translateY(-4px) scale(1.02)":"translateY(0) scale(1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",border:"1px solid rgba(255,255,255,0.2)",backdropFilter:"blur(10px)"}),statLabel:{fontSize:"16px",fontWeight:"600",marginBottom:"8px",opacity:.9},statValue:{fontSize:"32px",fontWeight:"800",textShadow:"0 2px 4px rgba(0,0,0,0.2)"},mainContent:{display:"flex",gap:"32px",flexWrap:"wrap"},tableSection:{flex:"2",minWidth:"400px"},chartSection:{flex:"1",minWidth:"300px",display:"flex",flexDirection:"column",alignItems:"center"},filtersContainer:{display:"flex",gap:"16px",marginBottom:"24px",flexWrap:"wrap",alignItems:"center"},filterGroup:{display:"flex",flexDirection:"column",gap:"8px"},filterLabel:{fontSize:"14px",fontWeight:"600",color:S?"#e2e8f0":"#374151",transition:"all 0.3s ease"},filterSelect:{padding:"8px 12px",borderRadius:"8px",border:S?"2px solid rgba(75,85,99,0.3)":"2px solid rgba(226,232,240,0.5)",backgroundColor:S?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",fontSize:"14px",fontWeight:"500",color:S?"#e2e8f0":"#374151",cursor:"pointer",transition:"all 0.3s ease",minWidth:"120px",backdropFilter:"blur(10px)"},employeeTable:{backgroundColor:S?"rgba(55,65,81,0.9)":"rgba(30,41,59,0.95)",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease",backdropFilter:"blur(10px)",border:S?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.1)"},tableHeader:{backgroundColor:S?"rgba(75,85,99,0.9)":"rgba(51,65,85,0.9)",padding:"20px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},tableHeaderText:{color:"#fff",fontSize:"18px",fontWeight:"700"},tableBody:{padding:"8px 0"},employeeRow:B=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",transition:"all 0.2s ease",backgroundColor:B?"rgba(255,255,255,0.05)":"transparent",borderLeft:B?"4px solid #3b82f6":"4px solid transparent",cursor:"pointer"}),employeeName:{color:S?"#e2e8f0":"#f1f5f9",fontSize:"16px",fontWeight:"500",flex:1,transition:"all 0.3s ease"},utilizationPercent:B=>({color:B>=85?"#f59e0b":B>=80?"#10b981":"#64748b",fontSize:"16px",fontWeight:"700"}),pieChart:{width:"200px",height:"200px",borderRadius:"50%",background:`conic-gradient(${S?"#4b5563":"#1e293b"} 0deg ${be.assignedPercentage*3.6}deg, ${S?"#6b7280":"#e5e7eb"} ${be.assignedPercentage*3.6}deg 360deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",marginBottom:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"},pieChartInner:{width:"140px",height:"140px",borderRadius:"50%",backgroundColor:S?"rgba(55,65,81,0.95)":"rgba(255,255,255,0.95)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},pieChartLabel:{fontSize:"14px",fontWeight:"600",color:S?"#94a3b8":"#64748b",marginBottom:"4px",transition:"all 0.3s ease"},pieChartValue:{fontSize:"24px",fontWeight:"800",color:S?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},capacityInfo:{textAlign:"center"},freePercentage:{fontSize:"18px",fontWeight:"700",color:"#10b981",marginBottom:"8px"},capacityText:{fontSize:"16px",color:S?"#94a3b8":"#64748b",fontWeight:"500",lineHeight:"1.4",transition:"all 0.3s ease"},topButton:B=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:B?"rgba(59,130,246,0.1)":S?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:B?"#3b82f6":S?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:B?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:B?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:S?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:S?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:S?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:S?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:S?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:S?"#94a3b8":"#64748b",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"}};return m.useEffect(()=>{const B=document.createElement("style");return B.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
    `,document.head.appendChild(B),()=>document.head.removeChild(B)},[]),n.jsxs("div",{style:U.page,children:[n.jsxs("div",{style:U.headerRow,children:[n.jsx("div",{style:U.headerLeft,children:n.jsxs("div",{ref:N,style:U.toggleViewContainer,onClick:()=>f(B=>!B),onMouseEnter:()=>V(!0),onMouseLeave:()=>V(!1),className:"floating",children:[n.jsx("span",{style:U.header,children:oe()}),n.jsx(jo,{style:U.chevron(u,Q),size:20})]})}),n.jsxs("div",{style:U.headerRight,children:[n.jsxs("button",{style:U.topButton(D==="alerts"),onMouseEnter:()=>te("alerts"),onMouseLeave:()=>te(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:U.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:U.topButton(D==="profile"),onMouseEnter:()=>{te("profile"),y(!0)},onMouseLeave:()=>te(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Nt,{size:20})}),g&&pe&&n.jsxs("div",{style:U.profileTooltip,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[n.jsx("div",{style:U.tooltipArrow}),n.jsxs("div",{style:U.userInfo,children:[n.jsx("div",{style:U.avatar,children:je(pe.firstName,pe.lastName)}),n.jsxs("div",{style:U.userDetails,children:[n.jsxs("div",{style:U.userName,children:[pe.firstName," ",pe.lastName||""]}),n.jsxs("div",{style:U.userRole,children:[pe.role==="admin"?"Admin":"Member","  ",pe.department]})]})]}),n.jsx("button",{style:U.themeToggle,onClick:re,children:S?" Light Mode":" Dark Mode"})]})]})]})]}),u&&n.jsx("div",{style:U.sectionOverlay,onMouseDown:B=>B.stopPropagation(),onClick:B=>B.stopPropagation(),children:n.jsx("div",{children:["reports","team","utilization"].map((B,j)=>n.jsx("div",{style:U.blurOption(D===`section-${j}`),onClick:_=>{_.preventDefault(),_.stopPropagation(),P(B)},onMouseDown:_=>{_.preventDefault(),_.stopPropagation()},onMouseEnter:()=>te(`section-${j}`),onMouseLeave:()=>te(null),children:B==="reports"?"Personal Reports":B==="team"?"Team Capacity":"Utilization Overview"},B))})}),G&&n.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",color:"#ef4444"},children:[n.jsx(so,{size:20}),n.jsx("span",{children:G})]}),n.jsxs("div",{style:U.periodToggle,children:[n.jsx("button",{style:U.periodButton(b==="week"),onClick:()=>H("week"),children:"Week"}),n.jsx("button",{style:U.periodButton(b==="month"),onClick:()=>H("month"),children:"Month"})]}),n.jsxs("div",{style:U.statsRow,children:[n.jsxs("div",{style:U.statCard("#10b981",a==="available"),onMouseEnter:()=>A("available"),onMouseLeave:()=>A(null),children:[n.jsx("div",{style:U.statLabel,children:"Available Hours:"}),n.jsx("div",{style:U.statValue,children:Ae?"...":`${be.availableHours.toFixed(0)}h`})]}),n.jsxs("div",{style:U.statCard("#f59e0b",a==="assigned"),onMouseEnter:()=>A("assigned"),onMouseLeave:()=>A(null),children:[n.jsx("div",{style:U.statLabel,children:"Assigned Hours:"}),n.jsx("div",{style:U.statValue,children:Ae?"...":`${be.assignedHours.toFixed(0)}h`})]})]}),Ae?n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"60px",color:S?"#94a3b8":"#64748b"},children:n.jsx(Vi,{size:32,style:{animation:"spin 1s linear infinite"}})}):n.jsxs("div",{style:U.mainContent,children:[n.jsxs("div",{style:U.tableSection,children:[n.jsxs("div",{style:U.filtersContainer,children:[n.jsxs("div",{style:U.filterGroup,children:[n.jsx("label",{style:U.filterLabel,children:"Filter by Project:"}),n.jsx("select",{value:i,onChange:B=>e(B.target.value),style:U.filterSelect,children:Ue.map(B=>n.jsx("option",{value:B,children:B==="all"?"All Projects":B},B))})]}),n.jsxs("div",{style:U.filterGroup,children:[n.jsx("label",{style:U.filterLabel,children:"Filter by Team:"}),n.jsx("select",{value:t,onChange:B=>r(B.target.value),style:U.filterSelect,children:me.map(B=>n.jsx("option",{value:B,children:B==="all"?"All Teams":B},B))})]})]}),n.jsxs("div",{style:U.employeeTable,children:[n.jsxs("div",{style:U.tableHeader,children:[n.jsx("span",{style:U.tableHeaderText,children:"Employee"}),n.jsx("span",{style:U.tableHeaderText,children:"Utilization (%)"})]}),n.jsx("div",{style:U.tableBody,children:F.length>0?F.map((B,j)=>n.jsxs("div",{style:U.employeeRow(a===`emp-${j}`),onMouseEnter:()=>A(`emp-${j}`),onMouseLeave:()=>A(null),children:[n.jsx("span",{style:U.employeeName,children:B.name}),n.jsxs("span",{style:U.utilizationPercent(B.utilization),children:[B.utilization,"%"]})]},j)):n.jsx("div",{style:{padding:"40px",textAlign:"center",color:S?"#94a3b8":"#64748b"},children:"No team members found"})})]})]}),n.jsxs("div",{style:U.chartSection,children:[n.jsx("div",{style:U.pieChart,children:n.jsxs("div",{style:U.pieChartInner,children:[n.jsx("div",{style:U.pieChartLabel,children:"Assigned"}),n.jsxs("div",{style:U.pieChartValue,children:[be.assignedPercentage,"%"]})]})}),n.jsxs("div",{style:U.capacityInfo,children:[n.jsxs("div",{style:U.freePercentage,children:["Free ",be.availableCapacity,"%"]}),n.jsxs("div",{style:U.capacityText,children:[be.availableCapacity,"% of team capacity",n.jsx("br",{}),"is still available"]})]})]})]})]})},x4=()=>{const[i,e]=m.useState("utilization"),[t,r]=m.useState(!1),[a,A]=m.useState(!1),[c,p]=m.useState(null),[u,f]=m.useState(null),[g,y]=m.useState("all"),[b,H]=m.useState("all"),[S,L]=m.useState(!1),[Q,V]=m.useState("week"),[D,te]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),J=m.useRef(null),[M,N]=m.useState({top:64,left:0}),[X,Be]=m.useState([]),[Ae,le]=m.useState(0),[G,se]=m.useState(!1),[pe,Me]=m.useState(null),[be,de]=m.useState(null);m.useEffect(()=>{if(J.current&&t){const B=J.current.getBoundingClientRect();N({top:B.bottom+4,left:B.left})}},[t]),m.useEffect(()=>{const B=j=>{J.current&&!J.current.contains(j.target)&&r(!1)};return t&&document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[t]),m.useEffect(()=>{(async()=>{se(!0),Me(null);try{console.log(` Fetching utilization data for ${Q}...`);const j=await Fe(`/api/workload-status?period=${Q}`,{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch team data");const _=await j.json();console.log(" Team workload data:",_),console.log(" Users array:",_.users);const ve=(_.users||[]).map(O=>(console.log(" Processing user:",O),{name:`${O.firstName} ${O.lastName||""}`.trim(),utilization:O.utilizationPercentage||0,project:O.project||"Various",team:O.department||"Unknown"}));console.log(" Transformed employees:",ve),Be(ve);const k=ve.length>0?Math.round(ve.reduce((O,Z)=>O+Z.utilization,0)/ve.length):0;le(k)}catch(j){console.error(" Error fetching utilization data:",j),Me(j.message)}finally{se(!1)}})()},[Q]),m.useEffect(()=>{(async()=>{try{const j=await Fe("/user/profile",{credentials:"include"});if(j.ok){const _=await j.json();de(_)}}catch(j){console.error("Error fetching user profile:",j)}})()},[]);const Ue=["all",...new Set(X.map(B=>B.project))],me=["all",...new Set(X.map(B=>B.team))],F=X.filter(B=>(g==="all"||B.project===g)&&(b==="all"||B.team===b)),re=()=>{te(!D);try{localStorage.setItem("darkMode",(!D).toString())}catch{console.log("LocalStorage not available")}L(!1)},P=B=>{e(B),r(!1),B==="reports"?window.location.href="/adminreports":B==="team"&&(window.location.href="/adminteamcapacity")},oe=()=>{switch(i){case"reports":return"Personal Reports";case"team":return"Team Capacity Summary";case"utilization":return"Utilization Overview";default:return"Utilization Overview"}},je=(B,j)=>B?!j||j.trim()===""?B[0].toUpperCase():`${B[0]}${j[0]}`.toUpperCase():"?";m.useEffect(()=>{const B=document.createElement("style");return B.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
    `,document.head.appendChild(B),()=>document.head.removeChild(B)},[]);const U={page:{minHeight:"100vh",padding:"30px",background:D?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:D?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},toggleViewContainer:{fontSize:"18px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:D?"#e2e8f0":"#1e293b"},chevron:(B,j)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:B||j?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:B||j?"#3b82f6":D?"#94a3b8":"#64748b"}),sectionOverlay:{position:"fixed",top:M.top,left:M.left,zIndex:999,backgroundColor:D?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:D?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},blurOption:B=>({backgroundColor:B?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:D?"#e2e8f0":"#374151",transform:B?"translateX(4px)":"translateX(0)",borderLeft:B?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),mainContent:{display:"flex",gap:"32px",marginBottom:"32px",flexWrap:"wrap"},avgUtilizationCard:{flex:"0 0 300px",backgroundColor:D?"#374151":"#1e293b",borderRadius:"20px",padding:"32px",color:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease",cursor:"pointer"},avgUtilizationLabel:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",opacity:.9},avgUtilizationValue:{fontSize:"48px",fontWeight:"800",textShadow:"0 2px 4px rgba(0,0,0,0.2)"},periodToggleContainer:{flex:"1",minWidth:"400px",display:"flex",flexDirection:"column",gap:"16px"},periodToggle:{display:"flex",gap:"12px",padding:"8px",backgroundColor:D?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.6)",borderRadius:"12px",backdropFilter:"blur(10px)",border:D?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",width:"fit-content"},periodButton:B=>({padding:"8px 24px",borderRadius:"8px",border:"none",backgroundColor:B?"#3b82f6":"transparent",color:B?"#fff":D?"#94a3b8":"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",transform:B?"scale(1.05)":"scale(1)"}),summaryText:{fontSize:"16px",fontWeight:"600",color:D?"#e2e8f0":"#1e293b",marginBottom:"8px"},employeeTable:{backgroundColor:D?"#374151":"#1e293b",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"},tableHeader:{backgroundColor:D?"#4b5563":"#334155",padding:"20px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.3s ease"},tableHeaderText:{color:"#fff",fontSize:"18px",fontWeight:"700"},tableBody:{padding:"8px 0"},employeeRow:B=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",transition:"all 0.2s ease",backgroundColor:B?"rgba(255,255,255,0.05)":"transparent",borderLeft:B?"4px solid #3b82f6":"4px solid transparent",cursor:"pointer"}),employeeName:{color:D?"#e2e8f0":"#f1f5f9",fontSize:"16px",fontWeight:"500",flex:1,transition:"all 0.3s ease"},utilizationPercent:B=>({color:B>=85?"#f59e0b":B>=80?"#10b981":"#64748b",fontSize:"16px",fontWeight:"700"}),filtersContainer:{display:"flex",gap:"16px",marginBottom:"24px",flexWrap:"wrap",alignItems:"center"},filterGroup:{display:"flex",flexDirection:"column",gap:"8px"},filterLabel:{fontSize:"14px",fontWeight:"600",color:D?"#e2e8f0":"#374151",transition:"all 0.3s ease"},filterSelect:{padding:"8px 12px",borderRadius:"8px",border:D?"2px solid #4b5563":"2px solid #e5e7eb",backgroundColor:D?"#374151":"#fff",fontSize:"14px",fontWeight:"500",color:D?"#e2e8f0":"#374151",cursor:"pointer",transition:"all 0.3s ease",minWidth:"120px"},topButton:B=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:B?"rgba(59,130,246,0.1)":D?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:B?"#3b82f6":D?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:B?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:B?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:D?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:D?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:D?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:D?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:D?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:D?"#94a3b8":"#64748b",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"}};return n.jsxs("div",{style:U.page,children:[n.jsxs("div",{style:U.headerRow,children:[n.jsx("div",{style:U.headerLeft,children:n.jsxs("div",{ref:J,style:U.toggleViewContainer,onClick:()=>r(B=>!B),onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),className:"floating",children:[n.jsx("span",{style:U.header,children:oe()}),n.jsx(jo,{style:U.chevron(t,a),size:20})]})}),n.jsxs("div",{style:U.headerRight,children:[n.jsxs("button",{style:U.topButton(c==="alerts"),onMouseEnter:()=>p("alerts"),onMouseLeave:()=>p(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:U.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:U.topButton(c==="profile"),onMouseEnter:()=>{p("profile"),L(!0)},onMouseLeave:()=>p(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Nt,{size:20})}),S&&be&&n.jsxs("div",{style:U.profileTooltip,onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1),children:[n.jsx("div",{style:U.tooltipArrow}),n.jsxs("div",{style:U.userInfo,children:[n.jsx("div",{style:U.avatar,children:je(be.firstName,be.lastName)}),n.jsxs("div",{style:U.userDetails,children:[n.jsxs("div",{style:U.userName,children:[be.firstName," ",be.lastName||""]}),n.jsxs("div",{style:U.userRole,children:[be.role==="admin"?"Admin":"Member","  ",be.department]})]})]}),n.jsx("button",{style:U.themeToggle,onClick:re,children:D?" Light Mode":" Dark Mode"})]})]})]})]}),t&&n.jsx("div",{style:U.sectionOverlay,onMouseDown:B=>B.stopPropagation(),onClick:B=>B.stopPropagation(),children:n.jsx("div",{children:["reports","team","utilization"].map((B,j)=>n.jsx("div",{style:U.blurOption(c===`section-${j}`),onClick:_=>{_.preventDefault(),_.stopPropagation(),P(B)},onMouseDown:_=>{_.preventDefault(),_.stopPropagation()},onMouseEnter:()=>p(`section-${j}`),onMouseLeave:()=>p(null),children:B==="reports"?"Personal Reports":B==="team"?"Team Capacity":"Utilization Overview"},B))})}),pe&&n.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",color:"#ef4444"},children:[n.jsx(so,{size:20}),n.jsx("span",{children:pe})]}),G?n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"60px",color:D?"#94a3b8":"#64748b"},children:n.jsx(Vi,{size:32,style:{animation:"spin 1s linear infinite"}})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:U.mainContent,children:[n.jsxs("div",{style:U.avgUtilizationCard,onMouseEnter:()=>p("avg-util"),onMouseLeave:()=>p(null),children:[n.jsx("div",{style:U.avgUtilizationLabel,children:"Average Utilization"}),n.jsxs("div",{style:U.avgUtilizationValue,children:[Ae,"%"]})]}),n.jsxs("div",{style:U.periodToggleContainer,children:[n.jsxs("div",{style:U.summaryText,children:["Team utilization for this ",Q==="week"?"week":"month"]}),n.jsxs("div",{style:U.periodToggle,children:[n.jsx("button",{style:U.periodButton(Q==="week"),onClick:()=>V("week"),children:"Week"}),n.jsx("button",{style:U.periodButton(Q==="month"),onClick:()=>V("month"),children:"Month"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{style:U.filtersContainer,children:[n.jsxs("div",{style:U.filterGroup,children:[n.jsx("label",{style:U.filterLabel,children:"Filter by Project:"}),n.jsx("select",{value:g,onChange:B=>y(B.target.value),style:U.filterSelect,children:Ue.map(B=>n.jsx("option",{value:B,children:B==="all"?"All Projects":B},B))})]}),n.jsxs("div",{style:U.filterGroup,children:[n.jsx("label",{style:U.filterLabel,children:"Filter by Team:"}),n.jsx("select",{value:b,onChange:B=>H(B.target.value),style:U.filterSelect,children:me.map(B=>n.jsx("option",{value:B,children:B==="all"?"All Teams":B},B))})]})]}),n.jsxs("div",{style:U.employeeTable,children:[n.jsxs("div",{style:U.tableHeader,children:[n.jsx("span",{style:U.tableHeaderText,children:"Employee"}),n.jsx("span",{style:U.tableHeaderText,children:"Utilization (%)"})]}),n.jsx("div",{style:U.tableBody,children:F.length>0?F.map((B,j)=>n.jsxs("div",{style:U.employeeRow(u===`emp-${j}`),onMouseEnter:()=>f(`emp-${j}`),onMouseLeave:()=>f(null),children:[n.jsx("span",{style:U.employeeName,children:B.name}),n.jsxs("span",{style:U.utilizationPercent(B.utilization),children:[B.utilization,"%"]})]},j)):n.jsx("div",{style:{padding:"40px",textAlign:"center",color:D?"#94a3b8":"#64748b"},children:"No team members found"})})]})]})]})]})},y4=()=>{var Qe;const[i,e]=m.useState("actuals"),[t,r]=m.useState(!1),[a,A]=m.useState(!1),[c,p]=m.useState(null),[u,f]=m.useState(!1),[g,y]=m.useState("Project"),[b,H]=m.useState([]),[S,L]=m.useState({matching:{matchedActivities:[],totalMatchedHours:0,summary:""}}),[Q,V]=m.useState(!1),[D,te]=m.useState(!1),[J,M]=m.useState(""),[N,X]=m.useState(""),[Be,Ae]=m.useState(""),[le,G]=m.useState(""),[se,pe]=m.useState("0.00"),[Me,be]=m.useState(null),[de,Ue]=m.useState([]),[me]=m.useState(["L1 Operations","L2 Operations"]),[F]=m.useState(["Annual Leave","Half-Day Leave","Hospitalization Leave","No Pay Leave","Birthday Leave","Medical Leave","Off-in-Lieu"]),[re,P]=m.useState([]),[oe,je]=m.useState([]),[U,B]=m.useState(!1),[j,_]=m.useState(null),[ve,k]=m.useState([]),[O,Z]=m.useState(null),[ke,at]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),T=m.useRef(null),ge=m.useRef(null),He=m.useRef(null),[ze,mt]=m.useState({top:64,left:0}),tt=async()=>{try{const W=await Fe("/user/profile",{credentials:"include"});if(W.ok){const Y=await W.json();if(be(Y),Y.assignedProjects&&Y.assignedProjects.length>0){const We=Y.assignedProjects.filter(Ze=>Ze.projectType==="Project").map(Ze=>Ze.name);H(We),console.log(" User assigned projects:",We)}}else _("Failed to fetch user profile")}catch(W){console.error("Error fetching user profile:",W),_("Error fetching user profile")}},Se=async()=>{try{const W=await Fe("/actuals/capacity",{credentials:"include"});if(W.ok){const Y=await W.json();Z(Y)}}catch(W){console.error(" Error fetching capacity:",W)}};m.useEffect(()=>{console.log(" AdminActuals - isSectionOpen state changed to:",t)},[t]),m.useEffect(()=>{if(T.current&&t){const W=T.current.getBoundingClientRect();mt({top:W.bottom+4,left:W.left})}},[t]),m.useEffect(()=>{const W=Y=>{T.current&&!T.current.contains(Y.target)&&r(!1)};return t&&document.addEventListener("mousedown",W),()=>{document.removeEventListener("mousedown",W)}},[t]),m.useEffect(()=>{const W=document.createElement("style");return W.textContent=`
      /* Target common parent container classes */
      body, html, #root, .app, .main-content, .page-container, .content-wrapper {
        background: ${ke?"linear-gradient(135deg, #1e293b 0%, #334155 100%) !important":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%) !important"};
        margin: 0 !important;
        padding: 0 !important;
      }
      
      /* Target any div that might be the white container */
      body > div, #root > div, .app > div {
        background: transparent !important;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      @keyframes sparkle {
        0%, 100% {
          transform: rotate(0deg) scale(1);
        }
        50% {
          transform: rotate(5deg) scale(1.1);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
    `,document.head.appendChild(W),()=>{document.head.removeChild(W)}},[ke]),m.useEffect(()=>{const W=document.createElement("style");return W.textContent=`
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .ai-card-fade {
      animation: fadeIn 0.6s ease;
    }
  `,document.head.appendChild(W),()=>document.head.removeChild(W)},[]),m.useEffect(()=>{tt(),ie(),dt(),ht(),Se()},[]),m.useEffect(()=>{if(le){const Y=(parseFloat(le)/8).toFixed(2);pe(Y)}else pe("0.00")},[le]),m.useEffect(()=>{if(g!=="Admin/Others"||!N||!Be||!J)return;const W=new Date(N),Y=new Date(Be);let We=0;for(let St=new Date(W);St<=Y;St.setDate(St.getDate()+1)){const xe=St.getDay();xe!==0&&xe!==6&&We++}let Ze=0;J==="Half-Day Leave"?Ze=We*4:Ze=We*8,G(Ze.toString())},[g,J,N,Be]),m.useEffect(()=>{R()},[N,Be]);const ie=async()=>{try{console.log(" Fetching projects from /plan/master...");const W=await Fe("/plan/master",{credentials:"include"});if(console.log(" Response status:",W.status),W.ok){const Y=await W.json();console.log(" Raw data from API:",Y);const We=Y.map(St=>St.project).filter(Boolean);console.log(" Extracted project names:",We);const Ze=[...new Set(We)];console.log(" Unique projects:",Ze),Ue(Ze)}else console.error(" Failed to fetch projects, status:",W.status)}catch(W){console.error(" Error fetching projects:",W)}},dt=async()=>{try{const W=await Fe("/actuals",{credentials:"include"});if(W.ok){const Y=await W.json();P(Y)}}catch(W){console.error("Error fetching actuals:",W)}},ht=async()=>{try{const W=new Date().getFullYear(),Y=await Fe(`/actuals/holidays?year=${W}`,{credentials:"include"});if(Y.ok){const We=await Y.json();k(We),console.log(" Holidays loaded:",We)}}catch(W){console.error(" Error fetching holidays:",W)}},R=async()=>{if(!(!N||!Be))try{const W=await Fe(`/actuals/system?startDate=${N}&endDate=${Be}`,{credentials:"include"});if(W.ok){const Y=await W.json();je(Y)}}catch(W){console.error(" Error fetching system actuals:",W)}},Ut=W=>{console.log(" AdminActuals - handleSectionChange called with:",W),e(W),r(!1),W==="view-logs"?(console.log(" AdminActuals - Navigating to view logs page"),window.location.href="/adminviewlogs"):console.log(" AdminActuals - Staying on current page for section:",W)},Tt=W=>{M(W),W==="__custom__"&&te(!0)},I=()=>i==="actuals"?"Actuals":"View Logs",v=async()=>{var Y;if(!N||!Be){alert("Please select dates first");return}let W=[];if(J)W=[J],console.log(` Specific project selected: ${J}`);else{if(g==="Project")W=b;else if(g==="Operations")W=me;else if(g==="Admin/Others"){alert("Please select a leave type to match activities");return}if(W.length===0){alert("You have no assigned projects/operations to match");return}console.log(` No project selected - searching ALL assigned: ${W.join(", ")}`)}V(!0),_(null),L(null);try{console.log(" Matching project activities with AI...");const We=await Fe("/api/actuals/match-project",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({projectNames:W,startDate:N,endDate:Be,systemActivities:oe,category:g})}),Ze=await We.json();if(!We.ok)throw new Error(Ze.message||"AI matching failed");L(Ze),(Y=Ze.matching)!=null&&Y.totalMatchedHours&&G(Ze.matching.totalMatchedHours.toString())}catch(We){console.error(" Error during AI matching:",We),_(We.message)}finally{V(!1)}},he=async()=>{var Y;if(console.log(" handleAdd called"),console.log(" Form values:",{selectedProject:J,startDate:N,endDate:Be,hours:le,selectedCategory:g}),!J||!N||!Be||!le){alert("Please fill in all fields");return}B(!0),_(null);const W={category:g,project:J,startDate:N,endDate:Be,hours:parseFloat(le)};console.log(" Sending request body:",W);try{console.log(" Fetching /actuals...");const We=await Fe("/actuals",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(W)});if(console.log(" Response status:",We.status),console.log(" Response ok:",We.ok),We.ok){const Ze=await We.json(),St=(Y=Ze.actual)==null?void 0:Y.Hours;console.log(" Success response:",Ze),alert("Actual entry added successfully!"),M(""),X(""),Ae(""),G(""),pe("0.00"),L(null),dt()}else{const Ze=await We.json();console.error(" Error response:",Ze),_(Ze.message||"Failed to add actual entry")}}catch(We){console.error(" Fetch error:",We),_("Error adding actual entry")}finally{B(!1)}},Ke=()=>{at(!ke),f(!1)},nt=()=>{switch(g){case"Project":const W=new Set(b),Y=de.filter(Ze=>W.has(Ze)),We=de.filter(Ze=>!W.has(Ze));return[...Y,...We];case"Operations":return me;case"Admin/Others":return F;default:return[]}},E=()=>{switch(g){case"Project":return"Project:";case"Operations":return"Operation:";case"Admin/Others":return"Leave Type:";default:return"Select:"}},$={page:{minHeight:"100vh",padding:"30px 40px",background:ke?"linear-gradient(135deg, rgba(30,41,59,0.95) 0%, rgba(15,23,42,0.95) 100%)":"linear-gradient(135deg, #f8fafc 0%, #eef2ff 60%, #e0e7ff 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease",display:"flex",flexDirection:"column"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"40px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"32px",fontWeight:"800",color:ke?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},toggleViewContainer:{fontSize:"20px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:ke?"#e2e8f0":"#1e293b"},chevron:(W,Y)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:W||Y?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:W||Y?"#3b82f6":"#64748b"}),sectionOverlay:{position:"fixed",top:ze.top,left:ze.left,zIndex:999,backgroundColor:ke?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:ke?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},blurOption:W=>({backgroundColor:W?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:ke?"#e2e8f0":"#374151",transform:W?"translateX(4px)":"translateX(0)",borderLeft:W?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),topButton:W=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:W?"rgba(59,130,246,0.1)":ke?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:W?"#3b82f6":ke?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:W?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:W?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:ke?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:ke?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:ke?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:ke?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:ke?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:ke?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:ke?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:ke?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:ke?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},contentArea:{display:"flex",gap:"40px",alignItems:"flex-start",width:"100%",margin:"0"},leftSection:{flex:"1 1 65%",minWidth:"600px"},rightSection:{flex:"1 1 30%",minWidth:"400px",maxWidth:"550px"},categoryTabs:{display:"flex",gap:"20px",marginBottom:"40px",justifyContent:"flex-start",flexWrap:"wrap"},categoryTab:(W,Y)=>({padding:"16px 40px",borderRadius:"50px",border:W?"2px solid #3b82f6":ke?"2px solid #374151":"2px solid #e2e8f0",backgroundColor:W?"rgba(59,130,246,0.1)":Y?"rgba(59,130,246,0.05)":ke?"#374151":"#fff",color:W?"#3b82f6":ke?"#e2e8f0":"#64748b",fontWeight:"600",fontSize:"16px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:Y?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",boxShadow:Y?"0 8px 25px rgba(59,130,246,0.15)":"0 2px 8px rgba(0,0,0,0.05)",userSelect:"none",minWidth:"140px",textAlign:"center"}),formContainer:{backgroundColor:ke?"#374151":"#fff",borderRadius:"24px",padding:"40px",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",border:ke?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)",backdropFilter:"blur(10px)",width:"100%",transition:"all 0.3s ease"},formRow:{display:"flex",gap:"24px",marginBottom:"24px",alignItems:"flex-end",width:"100%"},formGroup:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},label:{fontSize:"14px",fontWeight:"600",color:ke?"#e2e8f0":"#374151",marginBottom:"4px",transition:"all 0.3s ease"},input:W=>({padding:"16px 20px",borderRadius:"12px",border:W?"2px solid #3b82f6":ke?"2px solid #4b5563":"2px solid #e2e8f0",fontSize:"16px",transition:"all 0.3s ease",backgroundColor:ke?"#4b5563":"#fff",color:ke?"#e2e8f0":"#374151",outline:"none",boxShadow:W?"0 0 0 3px rgba(59,130,246,0.1)":"0 2px 4px rgba(0,0,0,0.02)"}),select:W=>({padding:"16px 20px",borderRadius:"12px",border:W?"2px solid #3b82f6":ke?"2px solid #4b5563":"2px solid #e2e8f0",fontSize:"16px",transition:"all 0.3s ease",backgroundColor:ke?"#4b5563":"#fff",color:ke?"#e2e8f0":"#374151",outline:"none",cursor:"pointer",boxShadow:W?"0 0 0 3px rgba(59,130,246,0.1)":"0 2px 4px rgba(0,0,0,0.02)"}),autoCalculated:{fontSize:"12px",color:ke?"#94a3b8":"#64748b",fontStyle:"italic",marginTop:"4px",transition:"all 0.3s ease"},buttonRow:{display:"flex",gap:"20px",marginTop:"40px",width:"100%"},recommendButton:W=>({flex:1,padding:"20px 32px",borderRadius:"16px",border:"2px solid #f59e0b",backgroundColor:W?"#f59e0b":"transparent",color:W?"#fff":"#f59e0b",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",transform:W?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",boxShadow:W?"0 8px 25px rgba(245,158,11,0.25)":"0 2px 8px rgba(0,0,0,0.05)",minHeight:"60px",opacity:U?.5:1,pointerEvents:U?"none":"auto"}),addButton:W=>({flex:1,padding:"20px 32px",borderRadius:"16px",border:"2px solid #10b981",backgroundColor:W?"#10b981":"transparent",color:W?"#fff":"#10b981",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:W?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",boxShadow:W?"0 8px 25px rgba(16,185,129,0.25)":"0 2px 8px rgba(0,0,0,0.05)",minHeight:"60px"}),aiCard:{background:ke?"linear-gradient(135deg, rgba(30,41,59,0.95) 0%, rgba(15,23,42,0.95) 100%)":"linear-gradient(135deg, rgba(239,246,255,0.95) 0%, rgba(224,242,254,0.95) 100%)",borderRadius:"20px",padding:"32px",border:ke?"1px solid rgba(99,102,241,0.35)":"1px solid rgba(79,70,229,0.35)",boxShadow:ke?"0 20px 50px rgba(99,102,241,0.15)":"0 24px 60px rgba(79,70,229,0.18)",backdropFilter:"blur(20px)",position:"relative",overflow:"hidden",minHeight:"350px"},aiCardHeader:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},aiIcon:{color:"#6366f1",animation:"sparkle 2s ease-in-out infinite"},aiDescription:{fontSize:"14px",color:ke?"#cbd5e1":"#334155",lineHeight:"1.6",marginBottom:"16px"},aiTitle:{fontSize:"18px",fontWeight:"700",color:ke?"#e5e7eb":"#1e293b"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},aiFeatures:{fontSize:"12px",color:ke?"#e5e7eb":"#1e293b",lineHeight:"1.4"},errorMessage:{backgroundColor:"#fee",color:"#c00",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},manDaysDisplay:{fontSize:"14px",color:"#3b82f6",fontWeight:"600",marginTop:"4px"}};return n.jsxs("div",{style:$.page,children:[n.jsxs("div",{style:$.headerRow,children:[n.jsx("div",{style:$.headerLeft,children:n.jsxs("div",{ref:T,style:$.toggleViewContainer,onClick:()=>{console.log(" AdminActuals - Header dropdown clicked, current state:",t),r(W=>!W)},onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),className:"floating",children:[n.jsx("span",{style:$.header,children:I()}),n.jsx(jo,{style:$.chevron(t,a),size:22})]})}),n.jsxs("div",{style:$.headerRight,children:[n.jsxs("button",{style:$.topButton(c==="alerts"),onMouseEnter:()=>p("alerts"),onMouseLeave:()=>p(null),onClick:()=>{console.log(" Alerts clicked - Navigating to alerts page"),window.location.href="/adminalerts"},children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:$.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:$.topButton(c==="profile"),onMouseEnter:()=>{p("profile"),f(!0)},onMouseLeave:()=>{p(null)},onClick:()=>{console.log(" Profile clicked - Navigating to profile page"),window.location.href="/adminprofile"},children:n.jsx(Nt,{size:20})}),u&&Me&&n.jsxs("div",{style:$.profileTooltip,onMouseEnter:()=>{f(!0)},onMouseLeave:()=>{f(!1)},children:[n.jsx("div",{style:$.tooltipArrow}),n.jsxs("div",{style:$.userInfo,children:[n.jsxs("div",{style:$.avatar,children:[Me.firstName[0],Me.lastName[0]]}),n.jsxs("div",{style:$.userDetails,children:[n.jsxs("div",{style:$.userName,children:[Me.firstName," ",Me.lastName]}),n.jsxs("div",{style:$.userRole,children:[Me.role,"  ",Me.department]})]})]}),n.jsxs("div",{style:$.userStats,children:[n.jsxs("div",{style:$.tooltipStatItem,children:[n.jsx("div",{style:$.tooltipStatNumber,children:re.reduce((W,Y)=>W+parseFloat(Y.Hours||0),0).toFixed(1)}),n.jsx("div",{style:$.tooltipStatLabel,children:"Hours"})]}),n.jsxs("div",{style:$.tooltipStatItem,children:[n.jsx("div",{style:$.tooltipStatNumber,children:re.filter(W=>W.Category==="Project").length}),n.jsx("div",{style:$.tooltipStatLabel,children:"Projects"})]}),n.jsxs("div",{style:$.tooltipStatItem,children:[n.jsx("div",{style:$.tooltipStatNumber,children:(O==null?void 0:O.utilizationPercentage)!==void 0?`${Number(O.utilizationPercentage).toFixed(0)}%`:"--"}),n.jsx("div",{style:$.tooltipStatLabel,children:"Capacity"})]})]}),n.jsx("button",{style:$.themeToggle,onClick:Ke,children:ke?" Light Mode":" Dark Mode"})]})]})]})]}),t&&n.jsx("div",{style:$.sectionOverlay,onMouseDown:W=>{console.log(" AdminActuals - Dropdown container mousedown"),W.stopPropagation()},onClick:W=>{console.log(" AdminActuals - Dropdown container click"),W.stopPropagation()},children:n.jsx("div",{children:["actuals","view-logs"].map((W,Y)=>n.jsx("div",{style:$.blurOption(c===`section-${Y}`),onClick:We=>{console.log(" AdminActuals - Dropdown option clicked:",W),We.preventDefault(),We.stopPropagation(),Ut(W)},onMouseDown:We=>{We.preventDefault(),We.stopPropagation()},onMouseEnter:()=>p(`section-${Y}`),onMouseLeave:()=>p(null),children:W==="actuals"?"Actuals":"View Logs"},W))})}),n.jsxs("div",{style:$.contentArea,children:[n.jsxs("div",{style:$.leftSection,children:[n.jsx("div",{style:$.categoryTabs,children:["Project","Operations","Admin/Others"].map(W=>n.jsx("div",{style:$.categoryTab(g===W,c===`category-${W}`),onClick:()=>{y(W),M("")},onMouseEnter:()=>p(`category-${W}`),onMouseLeave:()=>p(null),children:W},W))}),n.jsxs("div",{style:$.formContainer,children:[j&&n.jsx("div",{style:$.errorMessage,children:j}),n.jsxs("div",{style:$.formRow,children:[n.jsxs("div",{style:{...$.formGroup,cursor:"pointer"},onClick:()=>{var W,Y;(W=ge.current)!=null&&W.showPicker?ge.current.showPicker():(Y=ge.current)==null||Y.focus()},children:[n.jsx("label",{style:$.label,children:"Start Date:"}),n.jsx("input",{ref:ge,type:"date",value:N,onChange:W=>X(W.target.value),style:{...$.input(!1),cursor:"pointer"}})]}),n.jsxs("div",{style:{...$.formGroup,cursor:"pointer"},onClick:()=>{var W,Y;(W=He.current)!=null&&W.showPicker?He.current.showPicker():(Y=He.current)==null||Y.focus()},children:[n.jsx("label",{style:$.label,children:"End Date:"}),n.jsx("input",{ref:He,type:"date",value:Be,onChange:W=>Ae(W.target.value),style:{...$.input(!1),cursor:"pointer"}})]})]}),n.jsx("div",{style:$.formRow,children:n.jsxs("div",{style:$.formGroup,children:[n.jsx("label",{style:$.label,children:E()}),D?n.jsx("input",{type:"text",value:J,onChange:W=>M(W.target.value),placeholder:g==="Project"?"Enter custom project name":g==="Operations"?"Enter custom operation":"Enter custom leave type",style:$.input(!1),onBlur:()=>{J||te(!1)}}):n.jsx(n.Fragment,{children:n.jsxs("select",{value:J,onChange:W=>Tt(W.target.value),style:$.select(!1),children:[n.jsx("option",{value:"",children:b.length>0?"Select your project...":"Select project..."}),g==="Project"&&b.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("optgroup",{label:"Your Assigned Projects",children:b.map((W,Y)=>n.jsxs("option",{value:W,children:[" ",W]},`assigned-${Y}`))}),n.jsx("optgroup",{label:"All Projects",children:de.filter(W=>!b.includes(W)).map((W,Y)=>n.jsx("option",{value:W,children:W},`other-${Y}`))})]}),g!=="Project"&&n.jsx(n.Fragment,{children:nt().map((W,Y)=>n.jsx("option",{value:W,children:W},Y))}),n.jsx("option",{value:"__custom__",children:" Custom / Other"})]})}),n.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"6px"},children:["Select from list or choose ",n.jsx("strong",{children:"Custom / Other"})," to enter your own"]})]})}),n.jsx("div",{style:$.formRow,children:n.jsxs("div",{style:$.formGroup,children:[n.jsx("label",{style:$.label,children:"Hours:"}),n.jsx("input",{type:"number",value:le,onChange:W=>G(W.target.value),style:$.input(!1),disabled:g==="Admin/Others",placeholder:g==="Admin/Others"?"Auto-calculated":"Enter hours worked"}),g!=="Admin/Others"&&n.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"6px"},children:"Enter expected hours  system will adjust if capacity is exceeded"}),oe.length>0&&n.jsxs("div",{style:{marginTop:"12px",padding:"14px",borderRadius:"12px",backgroundColor:ke?"rgba(30,41,59,0.7)":"rgba(248,250,252,0.9)",border:ke?"1px solid rgba(99,102,241,0.25)":"1px solid rgba(226,232,240,0.8)",color:ke?"#e5e7eb":"#1e293b",fontSize:"12px"},children:[n.jsx("strong",{style:{color:ke?"#e0e7ff":"#1e3a8a"},children:"System-detected activity (ManicTime):"}),oe.slice(0,6).map((W,Y)=>n.jsxs("div",{style:{marginTop:"4px"},children:[" ",W.activityName,"  ",W.hours.toFixed(2),"h"]},Y)),oe.length>6&&n.jsxs("div",{style:{fontStyle:"italic",marginTop:"4px"},children:["+ ",oe.length-6," more"]})]}),g==="Admin/Others"?n.jsx("div",{style:$.autoCalculated,children:"Hours auto-calculated:  Half-Day = 4h/day  Other Leave = 8h/day (Weekends & public holidays excluded)"}):n.jsx("div",{style:$.autoCalculated,children:"(validated against remaining capacity, leave & public holidays)"}),n.jsxs("div",{style:$.manDaysDisplay,children:[" ",se," man-days"]})]})}),n.jsxs("div",{style:$.buttonRow,children:[n.jsxs("button",{style:$.recommendButton(c==="match"),onMouseEnter:()=>p("match"),onMouseLeave:()=>p(null),onClick:v,disabled:U||Q,children:[n.jsx(zr,{size:20}),Q?"Matching...":"Match Activities"]}),n.jsx("button",{style:$.addButton(c==="add"),onMouseEnter:()=>p("add"),onMouseLeave:()=>p(null),onClick:he,disabled:U,children:U?"Adding...":"Add"})]})]})]}),n.jsx("div",{style:$.rightSection,children:n.jsxs("div",{style:$.aiCard,className:"ai-card-fade",children:[n.jsx("div",{style:{position:"absolute",inset:0,background:ke?"radial-gradient(circle at top right, rgba(99,102,241,0.18), transparent 60%)":"radial-gradient(circle at top right, rgba(59,130,246,0.18), transparent 60%)",pointerEvents:"none"}}),n.jsxs("div",{style:$.aiCardHeader,children:[n.jsx(zr,{size:20,style:$.aiIcon}),n.jsx("span",{style:$.aiTitle,children:"AI Activity Matching"})]}),Q?n.jsx("div",{style:{color:ke?"#e0e7ff":"#1e3a8a",fontSize:"14px",fontWeight:"500"},children:" Analyzing your ManicTime activities..."}):S?n.jsxs("div",{children:[console.log(" AI matchingResult:",S),n.jsx("p",{style:{fontSize:"14px",color:ke?"#e5e7eb":"#1e293b",marginBottom:"12px"},children:n.jsx("strong",{children:S.matching.summary})}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"700",color:ke?"#e5e7eb":"#1e293b",marginBottom:"16px"},children:["Total Matched: ",S.matching.totalMatchedHours," hours"]}),n.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:ke?"#e5e7eb":"#1e293b",marginBottom:"8px"},children:"MATCHED ACTIVITIES:"}),(((Qe=S==null?void 0:S.matching)==null?void 0:Qe.matchedActivities)||[]).map((W,Y)=>n.jsxs("div",{style:{backgroundColor:ke?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.9)",borderRadius:"10px",padding:"14px",marginBottom:"10px",border:"1px solid rgba(99,102,241,0.25)",boxShadow:"0 4px 14px rgba(99,102,241,0.08)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[n.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:ke?"#e5e7eb":"#1e293b"},children:W.activityName}),n.jsx("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",backgroundColor:W.confidence==="high"?"#10b98120":W.confidence==="medium"?"#f59e0b20":"#ef444420",color:W.confidence==="high"?"#10b981":W.confidence==="medium"?"#f59e0b":"#ef4444"},children:W.confidence})]}),W.projectName&&n.jsxs("div",{style:{fontSize:"11px",color:"#6366f1",fontWeight:"600",marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[" ",W.projectName]}),n.jsxs("div",{style:{fontSize:"12px",color:ke?"#cbd5e1":"#475569",marginBottom:"4px"},children:[W.hours," hours"]}),n.jsx("div",{style:{fontSize:"11px",color:ke?"#9ca3af":"#64748b",fontStyle:"italic"},children:W.reason})]},Y))]}):n.jsxs("div",{style:$.aiDescription,children:['Select a project and click "Match Activities" to see which ManicTime activities correspond to your project work.',n.jsxs("div",{style:$.aiFeatures,children:[n.jsx("br",{})," AI analyzes your PC activity",n.jsx("br",{})," Matches apps/files to projects",n.jsx("br",{})," Suggests actual hours worked",n.jsx("br",{})," Confidence-based recommendations"]})]})]})})]})]})},b4=()=>{const[i,e]=m.useState("view-logs"),[t,r]=m.useState(!1),[a,A]=m.useState(!1),[c,p]=m.useState(null),[u,f]=m.useState(null),[g,y]=m.useState(!1),[b,H]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[S,L]=m.useState("all"),[Q,V]=m.useState("all"),[D,te]=m.useState([]),[J,M]=m.useState(!0),[N,X]=m.useState(null),[Be,Ae]=m.useState({weeklyHours:0,capacityUtilization:0,projectHours:0}),[le,G]=m.useState({firstName:"",lastName:"",role:"",email:"",department:""}),se=m.useRef(null),[pe,Me]=m.useState({top:64,left:0});m.useEffect(()=>{(async()=>{try{M(!0);const j=await Fe("/actuals",{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch actuals");const _=await j.json();te(_),X(null)}catch(j){console.error("Error fetching actuals:",j),X(j.message)}finally{M(!1)}})()},[]),m.useEffect(()=>{(async()=>{try{const j=await Fe("/user/profile",{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch profile");const _=await j.json();G(_)}catch(j){console.error("Error fetching profile:",j)}})()},[]),m.useEffect(()=>{(async()=>{try{const j=await Fe("/actuals/stats",{credentials:"include"});if(!j.ok)throw new Error("Failed to fetch stats");const _=await j.json();Ae(_)}catch(j){console.error("Error fetching stats:",j)}})()},[]),m.useEffect(()=>{if(se.current&&t){const B=se.current.getBoundingClientRect();Me({top:B.bottom+4,left:B.left})}},[t]),m.useEffect(()=>{const B=j=>{se.current&&!se.current.contains(j.target)&&r(!1)};return t&&document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[t]);const be=B=>{const j={JRET:"#3b82f6",MaxCap:"#10b981",Analytics:"#f59e0b",Training:"#8b5cf6",Research:"#ec4899",Development:"#06b6d4",default:"#64748b"};return j[B]||j.default},de=B=>{const j={Project:"#3b82f6",Admin:"#10b981",Training:"#f59e0b",Meeting:"#8b5cf6",Leave:"#ef4444",default:"#64748b"};return j[B]||j.default},Ue=D.map(B=>({id:B.Id,date:new Date(B.StartDate).toLocaleDateString("en-GB"),dateEnd:new Date(B.EndDate).toLocaleDateString("en-GB"),project:B.Project||B.Category,projectColor:B.Project?be(B.Project):de(B.Category),category:B.Category,hours:Number(B.Hours)||0,manDays:(parseFloat(B.Hours)/8).toFixed(2),createdAt:new Date(B.CreatedAt).toLocaleString("en-GB")})),me=["all",...new Set(Ue.map(B=>B.project).filter(Boolean))],F=["all",...new Set(Ue.map(B=>B.category))],re=Ue.filter(B=>(S==="all"||B.project===S)&&(Q==="all"||B.category===Q)),P=()=>{H(!b),y(!1);try{localStorage.setItem("darkMode",(!b).toString())}catch(B){console.error("Failed to save theme:",B)}},oe=B=>{e(B),r(!1),B==="actuals"&&(window.location.href="/adminactuals")},je=()=>i==="actuals"?"Actuals":"Logs";m.useEffect(()=>{const B=document.createElement("style");return B.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      @keyframes pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }
      
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      .spinning {
        animation: spin 1s linear infinite;
      }
    `,document.head.appendChild(B),()=>document.head.removeChild(B)},[]);const U={page:{minHeight:"100vh",padding:"30px",background:b?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"40px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"32px",fontWeight:"800",color:b?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},toggleViewContainer:{fontSize:"20px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:b?"#e2e8f0":"#1e293b"},chevron:(B,j)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:B||j?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:B||j?"#3b82f6":b?"#94a3b8":"#64748b"}),sectionOverlay:{position:"fixed",top:pe.top,left:pe.left,zIndex:999,backgroundColor:b?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:b?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},blurOption:B=>({backgroundColor:B?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:b?"#e2e8f0":"#374151",transform:B?"translateX(4px)":"translateX(0)",borderLeft:B?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),filtersContainer:{display:"flex",gap:"20px",marginBottom:"32px",flexWrap:"wrap",alignItems:"center"},filterGroup:{display:"flex",flexDirection:"column",gap:"8px"},filterLabel:{fontSize:"14px",fontWeight:"600",color:b?"#e2e8f0":"#374151",transition:"all 0.3s ease"},filterSelect:{padding:"12px 16px",borderRadius:"12px",border:b?"2px solid #4b5563":"2px solid #e2e8f0",backgroundColor:b?"#374151":"#fff",fontSize:"14px",fontWeight:"500",color:b?"#e2e8f0":"#374151",cursor:"pointer",transition:"all 0.3s ease",minWidth:"150px",outline:"none"},statsRow:{display:"flex",gap:"20px",marginBottom:"32px",flexWrap:"wrap"},statCard:(B,j)=>({flex:"1",minWidth:"200px",backgroundColor:b?"#374151":"#fff",borderRadius:"16px",padding:"24px",boxShadow:j?"0 12px 24px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:j?"translateY(-4px) scale(1.02)":"translateY(0) scale(1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",border:b?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)",borderLeft:`4px solid ${B}`}),statIcon:{marginBottom:"12px",color:"#3b82f6"},statLabel:{fontSize:"14px",fontWeight:"600",color:b?"#94a3b8":"#64748b",marginBottom:"4px"},statValue:{fontSize:"24px",fontWeight:"800",color:b?"#e2e8f0":"#1e293b"},logsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:"24px"},logCard:B=>({backgroundColor:b?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:B?"0 12px 24px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:B?"translateY(-4px) scale(1.02)":"translateY(0) scale(1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",border:b?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)",position:"relative",overflow:"hidden"}),cardHeader:{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",marginBottom:"16px"},cardNumber:{fontSize:"12px",fontWeight:"700",color:b?"#94a3b8":"#64748b",backgroundColor:b?"#4b5563":"#f1f5f9",padding:"4px 8px",borderRadius:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},projectInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},projectBadge:B=>({width:"12px",height:"12px",borderRadius:"50%",backgroundColor:B,flexShrink:0}),projectName:{fontSize:"18px",fontWeight:"700",color:b?"#e2e8f0":"#1e293b"},categoryBadge:{fontSize:"12px",fontWeight:"600",color:b?"#94a3b8":"#64748b",backgroundColor:b?"#4b5563":"#f1f5f9",padding:"4px 8px",borderRadius:"6px",marginLeft:"auto"},dateInfo:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:b?"#94a3b8":"#64748b",marginBottom:"16px"},hoursDisplay:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",padding:"16px",backgroundColor:b?"#4b5563":"#f8fafc",borderRadius:"12px"},hoursItem:{textAlign:"center",flex:1},hoursLabel:{fontSize:"12px",fontWeight:"600",color:b?"#94a3b8":"#64748b",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},hoursValue:B=>({fontSize:"20px",fontWeight:"700",color:B||"#3b82f6"}),hoursDivider:{width:"1px",height:"30px",backgroundColor:b?"#6b7280":"#d1d5db",margin:"0 16px"},createdInfo:{marginTop:"16px",padding:"12px",backgroundColor:b?"#4b556350":"#f8fafc50",borderRadius:"8px",borderLeft:`3px solid ${b?"#6b7280":"#d1d5db"}`},createdLabel:{fontSize:"12px",fontWeight:"600",color:b?"#94a3b8":"#64748b",marginBottom:"4px",display:"flex",alignItems:"center",gap:"6px"},createdText:{fontSize:"13px",color:b?"#e2e8f0":"#374151",lineHeight:"1.4"},topButton:B=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:B?"rgba(59,130,246,0.1)":b?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:B?"#3b82f6":b?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:B?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:B?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:b?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:b?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:b?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:b?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:b?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:b?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:b?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:b?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:b?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",gap:"20px"},loadingText:{fontSize:"18px",fontWeight:"600",color:b?"#94a3b8":"#64748b"},errorContainer:{backgroundColor:b?"#7f1d1d":"#fee2e2",color:b?"#fca5a5":"#991b1b",padding:"20px",borderRadius:"12px",marginBottom:"20px",border:b?"1px solid #991b1b":"1px solid #fca5a5"},emptyState:{textAlign:"center",padding:"60px 20px",color:b?"#94a3b8":"#64748b"},emptyStateIcon:{marginBottom:"16px",opacity:.5},emptyStateText:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},emptyStateSubtext:{fontSize:"14px",opacity:.8}};return J?n.jsx("div",{style:U.page,children:n.jsxs("div",{style:U.loadingContainer,children:[n.jsx(F2,{size:48,className:"spinning",style:{color:"#3b82f6"}}),n.jsx("div",{style:U.loadingText,children:"Loading actuals data..."})]})}):n.jsxs("div",{style:U.page,children:[n.jsxs("div",{style:U.headerRow,children:[n.jsx("div",{style:U.headerLeft,children:n.jsxs("div",{ref:se,style:U.toggleViewContainer,onClick:()=>r(B=>!B),onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),className:"floating",children:[n.jsx("span",{style:U.header,children:je()}),n.jsx(jo,{style:U.chevron(t,a),size:22})]})}),n.jsxs("div",{style:U.headerRight,children:[n.jsxs("button",{style:U.topButton(c==="alerts"),onMouseEnter:()=>p("alerts"),onMouseLeave:()=>p(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:U.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:U.topButton(c==="profile"),onMouseEnter:()=>{p("profile"),y(!0)},onMouseLeave:()=>{p(null)},onClick:()=>window.location.href="/adminprofile",children:n.jsx(Nt,{size:20})}),g&&n.jsxs("div",{style:U.profileTooltip,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[n.jsx("div",{style:U.tooltipArrow}),n.jsxs("div",{style:U.userInfo,children:[n.jsx("div",{style:U.avatar,children:le.firstName&&le.lastName?`${le.firstName[0]}${le.lastName[0]}`:"??"}),n.jsxs("div",{style:U.userDetails,children:[n.jsx("div",{style:U.userName,children:le.firstName&&le.lastName?`${le.firstName} ${le.lastName}`:"Loading..."}),n.jsxs("div",{style:U.userRole,children:[le.role?`${le.role.charAt(0).toUpperCase()+le.role.slice(1)}`:"User","  ",le.department||"Loading..."]})]})]}),n.jsxs("div",{style:U.userStats,children:[n.jsxs("div",{style:U.tooltipStatItem,children:[n.jsx("div",{style:U.tooltipStatNumber,children:Be.totalHours||0}),n.jsx("div",{style:U.tooltipStatLabel,children:"Hours"})]}),n.jsxs("div",{style:U.tooltipStatItem,children:[n.jsx("div",{style:U.tooltipStatNumber,children:Be.projectHours>0?Math.ceil(Be.projectHours/40):0}),n.jsx("div",{style:U.tooltipStatLabel,children:"Projects"})]}),n.jsxs("div",{style:U.tooltipStatItem,children:[n.jsxs("div",{style:U.tooltipStatNumber,children:[Be.capacityUtilization,"%"]}),n.jsx("div",{style:U.tooltipStatLabel,children:"Capacity"})]})]}),n.jsx("button",{style:U.themeToggle,onClick:P,children:b?" Light Mode":" Dark Mode"})]})]})]})]}),t&&n.jsx("div",{style:U.sectionOverlay,onMouseDown:B=>B.stopPropagation(),onClick:B=>B.stopPropagation(),children:n.jsx("div",{children:["actuals","view-logs"].map((B,j)=>n.jsx("div",{style:U.blurOption(c===`section-${j}`),onClick:_=>{_.preventDefault(),_.stopPropagation(),oe(B)},onMouseDown:_=>{_.preventDefault(),_.stopPropagation()},onMouseEnter:()=>p(`section-${j}`),onMouseLeave:()=>p(null),children:B==="actuals"?"Actuals":"View Logs"},B))})}),N&&n.jsxs("div",{style:U.errorContainer,children:[n.jsx("strong",{children:"Error:"})," ",N]}),n.jsxs("div",{style:U.filtersContainer,children:[n.jsxs("div",{style:U.filterGroup,children:[n.jsx("label",{style:U.filterLabel,children:"Filter by Project:"}),n.jsx("select",{value:S,onChange:B=>L(B.target.value),style:U.filterSelect,children:me.map(B=>n.jsx("option",{value:B,children:B==="all"?"All Projects":B},B))})]}),n.jsxs("div",{style:U.filterGroup,children:[n.jsx("label",{style:U.filterLabel,children:"Filter by Category:"}),n.jsx("select",{value:Q,onChange:B=>V(B.target.value),style:U.filterSelect,children:F.map(B=>n.jsx("option",{value:B,children:B==="all"?"All Categories":B},B))})]})]}),n.jsxs("div",{style:U.statsRow,children:[n.jsxs("div",{style:U.statCard("#3b82f6",c==="total"),onMouseEnter:()=>p("total"),onMouseLeave:()=>p(null),children:[n.jsx("div",{style:U.statIcon,children:n.jsx(vA,{size:24})}),n.jsx("div",{style:U.statLabel,children:"Total Entries"}),n.jsx("div",{style:U.statValue,children:re.length})]}),n.jsxs("div",{style:U.statCard("#10b981",c==="hours"),onMouseEnter:()=>p("hours"),onMouseLeave:()=>p(null),children:[n.jsx("div",{style:U.statIcon,children:n.jsx(Xi,{size:24})}),n.jsx("div",{style:U.statLabel,children:"Total Hours"}),n.jsx("div",{style:U.statValue,children:re.reduce((B,j)=>B+(j.hours||0),0).toFixed(1)})]}),n.jsxs("div",{style:U.statCard("#f59e0b",c==="mandays"),onMouseEnter:()=>p("mandays"),onMouseLeave:()=>p(null),children:[n.jsx("div",{style:U.statIcon,children:n.jsx($c,{size:24})}),n.jsx("div",{style:U.statLabel,children:"Total Man-Days"}),n.jsx("div",{style:U.statValue,children:(re.reduce((B,j)=>B+(j.hours||0),0)/8).toFixed(2)})]})]}),re.length===0&&!J&&n.jsxs("div",{style:U.emptyState,children:[n.jsx("div",{style:U.emptyStateIcon,children:n.jsx(w2,{size:64})}),n.jsx("div",{style:U.emptyStateText,children:"No logs found"}),n.jsx("div",{style:U.emptyStateSubtext,children:D.length===0?"Start tracking your actuals to see them here":"Try adjusting your filters"})]}),n.jsx("div",{style:U.logsGrid,children:re.map((B,j)=>n.jsxs("div",{style:U.logCard(u===j),onMouseEnter:()=>f(j),onMouseLeave:()=>f(null),children:[n.jsx("div",{style:U.cardHeader,children:n.jsxs("div",{style:U.cardNumber,children:["#",B.id]})}),n.jsxs("div",{style:U.projectInfo,children:[n.jsx("div",{style:U.projectBadge(B.projectColor)}),n.jsx("div",{style:U.projectName,children:B.project}),n.jsx("div",{style:U.categoryBadge,children:B.category})]}),n.jsxs("div",{style:U.dateInfo,children:[n.jsx(To,{size:14}),B.date===B.dateEnd?B.date:`${B.date} - ${B.dateEnd}`]}),n.jsxs("div",{style:U.hoursDisplay,children:[n.jsxs("div",{style:U.hoursItem,children:[n.jsx("div",{style:U.hoursLabel,children:"Hours"}),n.jsx("div",{style:U.hoursValue("#3b82f6"),children:B.hours.toFixed(1)})]}),n.jsx("div",{style:U.hoursDivider}),n.jsxs("div",{style:U.hoursItem,children:[n.jsx("div",{style:U.hoursLabel,children:"Man-Days"}),n.jsx("div",{style:U.hoursValue("#10b981"),children:B.manDays})]})]}),n.jsxs("div",{style:U.createdInfo,children:[n.jsxs("div",{style:U.createdLabel,children:[n.jsx(Xi,{size:14}),"Created"]}),n.jsx("div",{style:U.createdText,children:B.createdAt})]})]},B.id))})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nh=function(i,e){return nh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},nh(i,e)};function Vr(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");nh(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var rh=function(){return rh=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var A in t)Object.prototype.hasOwnProperty.call(t,A)&&(e[A]=t[A])}return e},rh.apply(this,arguments)};function Yn(i,e,t,r){function a(A){return A instanceof t?A:new t(function(c){c(A)})}return new(t||(t=Promise))(function(A,c){function p(g){try{f(r.next(g))}catch(y){c(y)}}function u(g){try{f(r.throw(g))}catch(y){c(y)}}function f(g){g.done?A(g.value):a(g.value).then(p,u)}f((r=r.apply(i,[])).next())})}function On(i,e){var t={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},r,a,A,c;return c={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function p(f){return function(g){return u([f,g])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(A=f[0]&2?a.return:f[0]?a.throw||((A=a.return)&&A.call(a),0):a.next)&&!(A=A.call(a,f[1])).done)return A;switch(a=0,A&&(f=[f[0]&2,A.value]),f[0]){case 0:case 1:A=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(A=t.trys,!(A=A.length>0&&A[A.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!A||f[1]>A[0]&&f[1]<A[3])){t.label=f[1];break}if(f[0]===6&&t.label<A[1]){t.label=A[1],A=f;break}if(A&&t.label<A[2]){t.label=A[2],t.ops.push(f);break}A[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(i,t)}catch(g){f=[6,g],a=0}finally{r=A=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Ml(i,e,t){if(arguments.length===2)for(var r=0,a=e.length,A;r<a;r++)(A||!(r in e))&&(A||(A=Array.prototype.slice.call(e,0,r)),A[r]=e[r]);return i.concat(A||e)}var Qo=function(){function i(e,t,r,a){this.left=e,this.top=t,this.width=r,this.height=a}return i.prototype.add=function(e,t,r,a){return new i(this.left+e,this.top+t,this.width+r,this.height+a)},i.fromClientRect=function(e,t){return new i(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},i.fromDOMRectList=function(e,t){var r=Array.from(t).find(function(a){return a.width!==0});return r?new i(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):i.EMPTY},i.EMPTY=new i(0,0,0,0),i}(),gd=function(i,e){return Qo.fromClientRect(i,e.getBoundingClientRect())},v4=function(i){var e=i.body,t=i.documentElement;if(!e||!t)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),a=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new Qo(0,0,r,a)},fd=function(i){for(var e=[],t=0,r=i.length;t<r;){var a=i.charCodeAt(t++);if(a>=55296&&a<=56319&&t<r){var A=i.charCodeAt(t++);(A&64512)===56320?e.push(((a&1023)<<10)+(A&1023)+65536):(e.push(a),t--)}else e.push(a)}return e},on=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,i);var t=i.length;if(!t)return"";for(var r=[],a=-1,A="";++a<t;){var c=i[a];c<=65535?r.push(c):(c-=65536,r.push((c>>10)+55296,c%1024+56320)),(a+1===t||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},Cx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w4=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ll=0;Ll<Cx.length;Ll++)w4[Cx.charCodeAt(Ll)]=Ll;var Bx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Va=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Dl=0;Dl<Bx.length;Dl++)Va[Bx.charCodeAt(Dl)]=Dl;var C4=function(i){var e=i.length*.75,t=i.length,r,a=0,A,c,p,u;i[i.length-1]==="="&&(e--,i[i.length-2]==="="&&e--);var f=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),g=Array.isArray(f)?f:new Uint8Array(f);for(r=0;r<t;r+=4)A=Va[i.charCodeAt(r)],c=Va[i.charCodeAt(r+1)],p=Va[i.charCodeAt(r+2)],u=Va[i.charCodeAt(r+3)],g[a++]=A<<2|c>>4,g[a++]=(c&15)<<4|p>>2,g[a++]=(p&3)<<6|u&63;return f},B4=function(i){for(var e=i.length,t=[],r=0;r<e;r+=2)t.push(i[r+1]<<8|i[r]);return t},S4=function(i){for(var e=i.length,t=[],r=0;r<e;r+=4)t.push(i[r+3]<<24|i[r+2]<<16|i[r+1]<<8|i[r]);return t},$i=5,Pg=11,fp=2,I4=Pg-$i,Yv=65536>>$i,E4=1<<$i,mp=E4-1,k4=1024>>$i,T4=Yv+k4,j4=T4,F4=32,U4=j4+F4,Q4=65536>>Pg,R4=1<<I4,M4=R4-1,Sx=function(i,e,t){return i.slice?i.slice(e,t):new Uint16Array(Array.prototype.slice.call(i,e,t))},L4=function(i,e,t){return i.slice?i.slice(e,t):new Uint32Array(Array.prototype.slice.call(i,e,t))},D4=function(i,e){var t=C4(i),r=Array.isArray(t)?S4(t):new Uint32Array(t),a=Array.isArray(t)?B4(t):new Uint16Array(t),A=24,c=Sx(a,A/2,r[4]/2),p=r[5]===2?Sx(a,(A+r[4])/2):L4(r,Math.ceil((A+r[4])/4));return new P4(r[0],r[1],r[2],r[3],c,p)},P4=function(){function i(e,t,r,a,A,c){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=a,this.index=A,this.data=c}return i.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>$i],t=(t<<fp)+(e&mp),this.data[t];if(e<=65535)return t=this.index[Yv+(e-55296>>$i)],t=(t<<fp)+(e&mp),this.data[t];if(e<this.highStart)return t=U4-Q4+(e>>Pg),t=this.index[t],t+=e>>$i&M4,t=this.index[t],t=(t<<fp)+(e&mp),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},i}(),Ix="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H4=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Pl=0;Pl<Ix.length;Pl++)H4[Ix.charCodeAt(Pl)]=Pl;var N4="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Ex=50,_4=1,Jv=2,Xv=3,O4=4,z4=5,kx=7,qv=8,Tx=9,li=10,oh=11,jx=12,ih=13,K4=14,$a=15,sh=16,Hl=17,_a=18,W4=19,Fx=20,ah=21,Oa=22,xp=23,Ts=24,gr=25,Ya=26,Ja=27,js=28,G4=29,_i=30,V4=31,Nl=32,_l=33,Ah=34,lh=35,ch=36,xA=37,dh=38,cc=39,dc=40,yp=41,Zv=42,$4=43,Y4=[9001,65288],ew="!",Ct="",Ol="",uh=D4(N4),wo=[_i,ch],ph=[_4,Jv,Xv,z4],tw=[li,qv],Ux=[Ja,Ya],J4=ph.concat(tw),Qx=[dh,cc,dc,Ah,lh],X4=[$a,ih],q4=function(i,e){e===void 0&&(e="strict");var t=[],r=[],a=[];return i.forEach(function(A,c){var p=uh.get(A);if(p>Ex?(a.push(!0),p-=Ex):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return r.push(c),t.push(sh);if(p===O4||p===oh){if(c===0)return r.push(c),t.push(_i);var u=t[c-1];return J4.indexOf(u)===-1?(r.push(r[c-1]),t.push(u)):(r.push(c),t.push(_i))}if(r.push(c),p===V4)return t.push(e==="strict"?ah:xA);if(p===Zv||p===G4)return t.push(_i);if(p===$4)return A>=131072&&A<=196605||A>=196608&&A<=262141?t.push(xA):t.push(_i);t.push(p)}),[r,t,a]},bp=function(i,e,t,r){var a=r[t];if(Array.isArray(i)?i.indexOf(a)!==-1:i===a)for(var A=t;A<=r.length;){A++;var c=r[A];if(c===e)return!0;if(c!==li)break}if(a===li)for(var A=t;A>0;){A--;var p=r[A];if(Array.isArray(i)?i.indexOf(p)!==-1:i===p)for(var u=t;u<=r.length;){u++;var c=r[u];if(c===e)return!0;if(c!==li)break}if(p!==li)break}return!1},Rx=function(i,e){for(var t=i;t>=0;){var r=e[t];if(r===li)t--;else return r}return 0},Z4=function(i,e,t,r,a){if(t[r]===0)return Ct;var A=r-1;if(Array.isArray(a)&&a[A]===!0)return Ct;var c=A-1,p=A+1,u=e[A],f=c>=0?e[c]:0,g=e[p];if(u===Jv&&g===Xv)return Ct;if(ph.indexOf(u)!==-1)return ew;if(ph.indexOf(g)!==-1||tw.indexOf(g)!==-1)return Ct;if(Rx(A,e)===qv)return Ol;if(uh.get(i[A])===oh||(u===Nl||u===_l)&&uh.get(i[p])===oh||u===kx||g===kx||u===Tx||[li,ih,$a].indexOf(u)===-1&&g===Tx||[Hl,_a,W4,Ts,js].indexOf(g)!==-1||Rx(A,e)===Oa||bp(xp,Oa,A,e)||bp([Hl,_a],ah,A,e)||bp(jx,jx,A,e))return Ct;if(u===li)return Ol;if(u===xp||g===xp)return Ct;if(g===sh||u===sh)return Ol;if([ih,$a,ah].indexOf(g)!==-1||u===K4||f===ch&&X4.indexOf(u)!==-1||u===js&&g===ch||g===Fx||wo.indexOf(g)!==-1&&u===gr||wo.indexOf(u)!==-1&&g===gr||u===Ja&&[xA,Nl,_l].indexOf(g)!==-1||[xA,Nl,_l].indexOf(u)!==-1&&g===Ya||wo.indexOf(u)!==-1&&Ux.indexOf(g)!==-1||Ux.indexOf(u)!==-1&&wo.indexOf(g)!==-1||[Ja,Ya].indexOf(u)!==-1&&(g===gr||[Oa,$a].indexOf(g)!==-1&&e[p+1]===gr)||[Oa,$a].indexOf(u)!==-1&&g===gr||u===gr&&[gr,js,Ts].indexOf(g)!==-1)return Ct;if([gr,js,Ts,Hl,_a].indexOf(g)!==-1)for(var y=A;y>=0;){var b=e[y];if(b===gr)return Ct;if([js,Ts].indexOf(b)!==-1)y--;else break}if([Ja,Ya].indexOf(g)!==-1)for(var y=[Hl,_a].indexOf(u)!==-1?c:A;y>=0;){var b=e[y];if(b===gr)return Ct;if([js,Ts].indexOf(b)!==-1)y--;else break}if(dh===u&&[dh,cc,Ah,lh].indexOf(g)!==-1||[cc,Ah].indexOf(u)!==-1&&[cc,dc].indexOf(g)!==-1||[dc,lh].indexOf(u)!==-1&&g===dc||Qx.indexOf(u)!==-1&&[Fx,Ya].indexOf(g)!==-1||Qx.indexOf(g)!==-1&&u===Ja||wo.indexOf(u)!==-1&&wo.indexOf(g)!==-1||u===Ts&&wo.indexOf(g)!==-1||wo.concat(gr).indexOf(u)!==-1&&g===Oa&&Y4.indexOf(i[p])===-1||wo.concat(gr).indexOf(g)!==-1&&u===_a)return Ct;if(u===yp&&g===yp){for(var H=t[A],S=1;H>0&&(H--,e[H]===yp);)S++;if(S%2!==0)return Ct}return u===Nl&&g===_l?Ct:Ol},ek=function(i,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=q4(i,e.lineBreak),r=t[0],a=t[1],A=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(p){return[gr,_i,Zv].indexOf(p)!==-1?xA:p}));var c=e.wordBreak==="keep-all"?A.map(function(p,u){return p&&i[u]>=19968&&i[u]<=40959}):void 0;return[r,a,c]},tk=function(){function i(e,t,r,a){this.codePoints=e,this.required=t===ew,this.start=r,this.end=a}return i.prototype.slice=function(){return on.apply(void 0,this.codePoints.slice(this.start,this.end))},i}(),nk=function(i,e){var t=fd(i),r=ek(t,e),a=r[0],A=r[1],c=r[2],p=t.length,u=0,f=0;return{next:function(){if(f>=p)return{done:!0,value:null};for(var g=Ct;f<p&&(g=Z4(t,A,a,++f,c))===Ct;);if(g!==Ct||f===p){var y=new tk(t,g,u,f);return u=f,{value:y,done:!1}}return{done:!0,value:null}}}},rk=1,ok=2,CA=4,Mx=8,Mc=10,Lx=47,iA=92,ik=9,sk=32,zl=34,za=61,ak=35,Ak=36,lk=37,Kl=39,Wl=40,Ka=41,ck=95,or=45,dk=33,uk=60,pk=62,hk=64,gk=91,fk=93,mk=61,xk=123,Gl=63,yk=125,Dx=124,bk=126,vk=128,Px=65533,vp=42,Ki=43,wk=44,Ck=58,Bk=59,yA=46,Sk=0,Ik=8,Ek=11,kk=14,Tk=31,jk=127,no=-1,nw=48,rw=97,ow=101,Fk=102,Uk=117,Qk=122,iw=65,sw=69,aw=70,Rk=85,Mk=90,Kn=function(i){return i>=nw&&i<=57},Lk=function(i){return i>=55296&&i<=57343},Fs=function(i){return Kn(i)||i>=iw&&i<=aw||i>=rw&&i<=Fk},Dk=function(i){return i>=rw&&i<=Qk},Pk=function(i){return i>=iw&&i<=Mk},Hk=function(i){return Dk(i)||Pk(i)},Nk=function(i){return i>=vk},Vl=function(i){return i===Mc||i===ik||i===sk},Lc=function(i){return Hk(i)||Nk(i)||i===ck},Hx=function(i){return Lc(i)||Kn(i)||i===or},_k=function(i){return i>=Sk&&i<=Ik||i===Ek||i>=kk&&i<=Tk||i===jk},ii=function(i,e){return i!==iA?!1:e!==Mc},$l=function(i,e,t){return i===or?Lc(e)||ii(e,t):Lc(i)?!0:!!(i===iA&&ii(i,e))},wp=function(i,e,t){return i===Ki||i===or?Kn(e)?!0:e===yA&&Kn(t):Kn(i===yA?e:i)},Ok=function(i){var e=0,t=1;(i[e]===Ki||i[e]===or)&&(i[e]===or&&(t=-1),e++);for(var r=[];Kn(i[e]);)r.push(i[e++]);var a=r.length?parseInt(on.apply(void 0,r),10):0;i[e]===yA&&e++;for(var A=[];Kn(i[e]);)A.push(i[e++]);var c=A.length,p=c?parseInt(on.apply(void 0,A),10):0;(i[e]===sw||i[e]===ow)&&e++;var u=1;(i[e]===Ki||i[e]===or)&&(i[e]===or&&(u=-1),e++);for(var f=[];Kn(i[e]);)f.push(i[e++]);var g=f.length?parseInt(on.apply(void 0,f),10):0;return t*(a+p*Math.pow(10,-c))*Math.pow(10,u*g)},zk={type:2},Kk={type:3},Wk={type:4},Gk={type:13},Vk={type:8},$k={type:21},Yk={type:9},Jk={type:10},Xk={type:11},qk={type:12},Zk={type:14},Yl={type:23},eT={type:1},tT={type:25},nT={type:24},rT={type:26},oT={type:27},iT={type:28},sT={type:29},aT={type:31},hh={type:32},Aw=function(){function i(){this._value=[]}return i.prototype.write=function(e){this._value=this._value.concat(fd(e))},i.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==hh;)e.push(t),t=this.consumeToken();return e},i.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case zl:return this.consumeStringToken(zl);case ak:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),a=this.peekCodePoint(2);if(Hx(t)||ii(r,a)){var A=$l(t,r,a)?ok:rk,c=this.consumeName();return{type:5,value:c,flags:A}}break;case Ak:if(this.peekCodePoint(0)===za)return this.consumeCodePoint(),Gk;break;case Kl:return this.consumeStringToken(Kl);case Wl:return zk;case Ka:return Kk;case vp:if(this.peekCodePoint(0)===za)return this.consumeCodePoint(),Zk;break;case Ki:if(wp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case wk:return Wk;case or:var p=e,u=this.peekCodePoint(0),f=this.peekCodePoint(1);if(wp(p,u,f))return this.reconsumeCodePoint(e),this.consumeNumericToken();if($l(p,u,f))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(u===or&&f===pk)return this.consumeCodePoint(),this.consumeCodePoint(),nT;break;case yA:if(wp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Lx:if(this.peekCodePoint(0)===vp)for(this.consumeCodePoint();;){var g=this.consumeCodePoint();if(g===vp&&(g=this.consumeCodePoint(),g===Lx))return this.consumeToken();if(g===no)return this.consumeToken()}break;case Ck:return rT;case Bk:return oT;case uk:if(this.peekCodePoint(0)===dk&&this.peekCodePoint(1)===or&&this.peekCodePoint(2)===or)return this.consumeCodePoint(),this.consumeCodePoint(),tT;break;case hk:var y=this.peekCodePoint(0),b=this.peekCodePoint(1),H=this.peekCodePoint(2);if($l(y,b,H)){var c=this.consumeName();return{type:7,value:c}}break;case gk:return iT;case iA:if(ii(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case fk:return sT;case mk:if(this.peekCodePoint(0)===za)return this.consumeCodePoint(),Vk;break;case xk:return Xk;case yk:return qk;case Uk:case Rk:var S=this.peekCodePoint(0),L=this.peekCodePoint(1);return S===Ki&&(Fs(L)||L===Gl)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case Dx:if(this.peekCodePoint(0)===za)return this.consumeCodePoint(),Yk;if(this.peekCodePoint(0)===Dx)return this.consumeCodePoint(),$k;break;case bk:if(this.peekCodePoint(0)===za)return this.consumeCodePoint(),Jk;break;case no:return hh}return Vl(e)?(this.consumeWhiteSpace(),aT):Kn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Lc(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:on(e)}},i.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},i.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},i.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},i.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Fs(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var r=!1;t===Gl&&e.length<6;)e.push(t),t=this.consumeCodePoint(),r=!0;if(r){var a=parseInt(on.apply(void 0,e.map(function(u){return u===Gl?nw:u})),16),A=parseInt(on.apply(void 0,e.map(function(u){return u===Gl?aw:u})),16);return{type:30,start:a,end:A}}var c=parseInt(on.apply(void 0,e),16);if(this.peekCodePoint(0)===or&&Fs(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var p=[];Fs(t)&&p.length<6;)p.push(t),t=this.consumeCodePoint();var A=parseInt(on.apply(void 0,p),16);return{type:30,start:c,end:A}}else return{type:30,start:c,end:c}},i.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Wl?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Wl?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},i.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===no)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===Kl||t===zl){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===no||this.peekCodePoint(0)===Ka)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Yl)}for(;;){var a=this.consumeCodePoint();if(a===no||a===Ka)return{type:22,value:on.apply(void 0,e)};if(Vl(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===no||this.peekCodePoint(0)===Ka?(this.consumeCodePoint(),{type:22,value:on.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Yl);if(a===zl||a===Kl||a===Wl||_k(a))return this.consumeBadUrlRemnants(),Yl;if(a===iA)if(ii(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Yl;else e.push(a)}},i.prototype.consumeWhiteSpace=function(){for(;Vl(this.peekCodePoint(0));)this.consumeCodePoint()},i.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Ka||e===no)return;ii(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},i.prototype.consumeStringSlice=function(e){for(var t=5e4,r="";e>0;){var a=Math.min(t,e);r+=on.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),r},i.prototype.consumeStringToken=function(e){var t="",r=0;do{var a=this._value[r];if(a===no||a===void 0||a===e)return t+=this.consumeStringSlice(r),{type:0,value:t};if(a===Mc)return this._value.splice(0,r),eT;if(a===iA){var A=this._value[r+1];A!==no&&A!==void 0&&(A===Mc?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):ii(a,A)&&(t+=this.consumeStringSlice(r),t+=on(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},i.prototype.consumeNumber=function(){var e=[],t=CA,r=this.peekCodePoint(0);for((r===Ki||r===or)&&e.push(this.consumeCodePoint());Kn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(r===yA&&Kn(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Mx;Kn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),a=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((r===sw||r===ow)&&((a===Ki||a===or)&&Kn(A)||Kn(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Mx;Kn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Ok(e),t]},i.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],r=e[1],a=this.peekCodePoint(0),A=this.peekCodePoint(1),c=this.peekCodePoint(2);if($l(a,A,c)){var p=this.consumeName();return{type:15,number:t,flags:r,unit:p}}return a===lk?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},i.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Fs(e)){for(var t=on(e);Fs(this.peekCodePoint(0))&&t.length<6;)t+=on(this.consumeCodePoint());Vl(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return r===0||Lk(r)||r>1114111?Px:r}return e===no?Px:e},i.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(Hx(t))e+=on(t);else if(ii(t,this.peekCodePoint(0)))e+=on(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},i}(),lw=function(){function i(e){this._tokens=e}return i.create=function(e){var t=new Aw;return t.write(e),new i(t.read())},i.parseValue=function(e){return i.create(e).parseComponentValue()},i.parseValues=function(e){return i.create(e).parseComponentValues()},i.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},i.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},i.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},i.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||lT(r,e))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},i.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},i.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?hh:e},i.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},i}(),BA=function(i){return i.type===15},oa=function(i){return i.type===17},Dt=function(i){return i.type===20},AT=function(i){return i.type===0},gh=function(i,e){return Dt(i)&&i.value===e},cw=function(i){return i.type!==31},Js=function(i){return i.type!==31&&i.type!==4},Ao=function(i){var e=[],t=[];return i.forEach(function(r){if(r.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}r.type!==31&&t.push(r)}),t.length&&e.push(t),e},lT=function(i,e){return e===11&&i.type===12||e===28&&i.type===29?!0:e===2&&i.type===3},vi=function(i){return i.type===17||i.type===15},cn=function(i){return i.type===16||vi(i)},dw=function(i){return i.length>1?[i[0],i[1]]:[i[0]]},Mn={type:17,number:0,flags:CA},Hg={type:16,number:50,flags:CA},ci={type:16,number:100,flags:CA},Xa=function(i,e,t){var r=i[0],a=i[1];return[Ot(r,e),Ot(typeof a<"u"?a:r,t)]},Ot=function(i,e){if(i.type===16)return i.number/100*e;if(BA(i))switch(i.unit){case"rem":case"em":return 16*i.number;case"px":default:return i.number}return i.number},uw="deg",pw="grad",hw="rad",gw="turn",md={name:"angle",parse:function(i,e){if(e.type===15)switch(e.unit){case uw:return Math.PI*e.number/180;case pw:return Math.PI/200*e.number;case hw:return e.number;case gw:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},fw=function(i){return i.type===15&&(i.unit===uw||i.unit===pw||i.unit===hw||i.unit===gw)},mw=function(i){var e=i.filter(Dt).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Mn,Mn];case"to top":case"bottom":return jr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Mn,ci];case"to right":case"left":return jr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ci,ci];case"to bottom":case"top":return jr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ci,Mn];case"to left":case"right":return jr(270)}return 0},jr=function(i){return Math.PI*i/180},mi={name:"color",parse:function(i,e){if(e.type===18){var t=cT[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(i,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),a=e.value.substring(1,2),A=e.value.substring(2,3);return di(parseInt(r+r,16),parseInt(a+a,16),parseInt(A+A,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),a=e.value.substring(1,2),A=e.value.substring(2,3),c=e.value.substring(3,4);return di(parseInt(r+r,16),parseInt(a+a,16),parseInt(A+A,16),parseInt(c+c,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),a=e.value.substring(2,4),A=e.value.substring(4,6);return di(parseInt(r,16),parseInt(a,16),parseInt(A,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),a=e.value.substring(2,4),A=e.value.substring(4,6),c=e.value.substring(6,8);return di(parseInt(r,16),parseInt(a,16),parseInt(A,16),parseInt(c,16)/255)}}if(e.type===20){var p=ko[e.value.toUpperCase()];if(typeof p<"u")return p}return ko.TRANSPARENT}},xi=function(i){return(255&i)===0},Sn=function(i){var e=255&i,t=255&i>>8,r=255&i>>16,a=255&i>>24;return e<255?"rgba("+a+","+r+","+t+","+e/255+")":"rgb("+a+","+r+","+t+")"},di=function(i,e,t,r){return(i<<24|e<<16|t<<8|Math.round(r*255)<<0)>>>0},Nx=function(i,e){if(i.type===17)return i.number;if(i.type===16){var t=e===3?1:255;return e===3?i.number/100*t:Math.round(i.number/100*t)}return 0},_x=function(i,e){var t=e.filter(Js);if(t.length===3){var r=t.map(Nx),a=r[0],A=r[1],c=r[2];return di(a,A,c,1)}if(t.length===4){var p=t.map(Nx),a=p[0],A=p[1],c=p[2],u=p[3];return di(a,A,c,u)}return 0};function Cp(i,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-i)*t*6+i:t<1/2?e:t<2/3?(e-i)*6*(2/3-t)+i:i}var Ox=function(i,e){var t=e.filter(Js),r=t[0],a=t[1],A=t[2],c=t[3],p=(r.type===17?jr(r.number):md.parse(i,r))/(Math.PI*2),u=cn(a)?a.number/100:0,f=cn(A)?A.number/100:0,g=typeof c<"u"&&cn(c)?Ot(c,1):1;if(u===0)return di(f*255,f*255,f*255,1);var y=f<=.5?f*(u+1):f+u-f*u,b=f*2-y,H=Cp(b,y,p+1/3),S=Cp(b,y,p),L=Cp(b,y,p-1/3);return di(H*255,S*255,L*255,g)},cT={hsl:Ox,hsla:Ox,rgb:_x,rgba:_x},sA=function(i,e){return mi.parse(i,lw.create(e).parseComponentValue())},ko={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},dT={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(i,e){return e.map(function(t){if(Dt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},uT={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xd=function(i,e){var t=mi.parse(i,e[0]),r=e[1];return r&&cn(r)?{color:t,stop:r}:{color:t,stop:null}},zx=function(i,e){var t=i[0],r=i[i.length-1];t.stop===null&&(t.stop=Mn),r.stop===null&&(r.stop=ci);for(var a=[],A=0,c=0;c<i.length;c++){var p=i[c].stop;if(p!==null){var u=Ot(p,e);u>A?a.push(u):a.push(A),A=u}else a.push(null)}for(var f=null,c=0;c<a.length;c++){var g=a[c];if(g===null)f===null&&(f=c);else if(f!==null){for(var y=c-f,b=a[f-1],H=(g-b)/(y+1),S=1;S<=y;S++)a[f+S-1]=H*S;f=null}}return i.map(function(L,Q){var V=L.color;return{color:V,stop:Math.max(Math.min(1,a[Q]/e),0)}})},pT=function(i,e,t){var r=e/2,a=t/2,A=Ot(i[0],e)-r,c=a-Ot(i[1],t);return(Math.atan2(c,A)+Math.PI*2)%(Math.PI*2)},hT=function(i,e,t){var r=typeof i=="number"?i:pT(i,e,t),a=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),A=e/2,c=t/2,p=a/2,u=Math.sin(r-Math.PI/2)*p,f=Math.cos(r-Math.PI/2)*p;return[a,A-f,A+f,c-u,c+u]},Hr=function(i,e){return Math.sqrt(i*i+e*e)},Kx=function(i,e,t,r,a){var A=[[0,0],[0,e],[i,0],[i,e]];return A.reduce(function(c,p){var u=p[0],f=p[1],g=Hr(t-u,r-f);return(a?g<c.optimumDistance:g>c.optimumDistance)?{optimumCorner:p,optimumDistance:g}:c},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},gT=function(i,e,t,r,a){var A=0,c=0;switch(i.size){case 0:i.shape===0?A=c=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-a)):i.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-r)),c=Math.min(Math.abs(t),Math.abs(t-a)));break;case 2:if(i.shape===0)A=c=Math.min(Hr(e,t),Hr(e,t-a),Hr(e-r,t),Hr(e-r,t-a));else if(i.shape===1){var p=Math.min(Math.abs(t),Math.abs(t-a))/Math.min(Math.abs(e),Math.abs(e-r)),u=Kx(r,a,e,t,!0),f=u[0],g=u[1];A=Hr(f-e,(g-t)/p),c=p*A}break;case 1:i.shape===0?A=c=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-a)):i.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-r)),c=Math.max(Math.abs(t),Math.abs(t-a)));break;case 3:if(i.shape===0)A=c=Math.max(Hr(e,t),Hr(e,t-a),Hr(e-r,t),Hr(e-r,t-a));else if(i.shape===1){var p=Math.max(Math.abs(t),Math.abs(t-a))/Math.max(Math.abs(e),Math.abs(e-r)),y=Kx(r,a,e,t,!1),f=y[0],g=y[1];A=Hr(f-e,(g-t)/p),c=p*A}break}return Array.isArray(i.size)&&(A=Ot(i.size[0],r),c=i.size.length===2?Ot(i.size[1],a):A),[A,c]},fT=function(i,e){var t=jr(180),r=[];return Ao(e).forEach(function(a,A){if(A===0){var c=a[0];if(c.type===20&&c.value==="to"){t=mw(a);return}else if(fw(c)){t=md.parse(i,c);return}}var p=xd(i,a);r.push(p)}),{angle:t,stops:r,type:1}},Jl=function(i,e){var t=jr(180),r=[];return Ao(e).forEach(function(a,A){if(A===0){var c=a[0];if(c.type===20&&["top","left","right","bottom"].indexOf(c.value)!==-1){t=mw(a);return}else if(fw(c)){t=(md.parse(i,c)+jr(270))%jr(360);return}}var p=xd(i,a);r.push(p)}),{angle:t,stops:r,type:1}},mT=function(i,e){var t=jr(180),r=[],a=1,A=0,c=3,p=[];return Ao(e).forEach(function(u,f){var g=u[0];if(f===0){if(Dt(g)&&g.value==="linear"){a=1;return}else if(Dt(g)&&g.value==="radial"){a=2;return}}if(g.type===18){if(g.name==="from"){var y=mi.parse(i,g.values[0]);r.push({stop:Mn,color:y})}else if(g.name==="to"){var y=mi.parse(i,g.values[0]);r.push({stop:ci,color:y})}else if(g.name==="color-stop"){var b=g.values.filter(Js);if(b.length===2){var y=mi.parse(i,b[1]),H=b[0];oa(H)&&r.push({stop:{type:16,number:H.number*100,flags:H.flags},color:y})}}}}),a===1?{angle:(t+jr(180))%jr(360),stops:r,type:a}:{size:c,shape:A,stops:r,position:p,type:a}},xw="closest-side",yw="farthest-side",bw="closest-corner",vw="farthest-corner",ww="circle",Cw="ellipse",Bw="cover",Sw="contain",xT=function(i,e){var t=0,r=3,a=[],A=[];return Ao(e).forEach(function(c,p){var u=!0;if(p===0){var f=!1;u=c.reduce(function(y,b){if(f)if(Dt(b))switch(b.value){case"center":return A.push(Hg),y;case"top":case"left":return A.push(Mn),y;case"right":case"bottom":return A.push(ci),y}else(cn(b)||vi(b))&&A.push(b);else if(Dt(b))switch(b.value){case ww:return t=0,!1;case Cw:return t=1,!1;case"at":return f=!0,!1;case xw:return r=0,!1;case Bw:case yw:return r=1,!1;case Sw:case bw:return r=2,!1;case vw:return r=3,!1}else if(vi(b)||cn(b))return Array.isArray(r)||(r=[]),r.push(b),!1;return y},u)}if(u){var g=xd(i,c);a.push(g)}}),{size:r,shape:t,stops:a,position:A,type:2}},Xl=function(i,e){var t=0,r=3,a=[],A=[];return Ao(e).forEach(function(c,p){var u=!0;if(p===0?u=c.reduce(function(g,y){if(Dt(y))switch(y.value){case"center":return A.push(Hg),!1;case"top":case"left":return A.push(Mn),!1;case"right":case"bottom":return A.push(ci),!1}else if(cn(y)||vi(y))return A.push(y),!1;return g},u):p===1&&(u=c.reduce(function(g,y){if(Dt(y))switch(y.value){case ww:return t=0,!1;case Cw:return t=1,!1;case Sw:case xw:return r=0,!1;case yw:return r=1,!1;case bw:return r=2,!1;case Bw:case vw:return r=3,!1}else if(vi(y)||cn(y))return Array.isArray(r)||(r=[]),r.push(y),!1;return g},u)),u){var f=xd(i,c);a.push(f)}}),{size:r,shape:t,stops:a,position:A,type:2}},yT=function(i){return i.type===1},bT=function(i){return i.type===2},Ng={name:"image",parse:function(i,e){if(e.type===22){var t={url:e.value,type:0};return i.cache.addImage(e.value),t}if(e.type===18){var r=Iw[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(i,e.values)}throw new Error("Unsupported image type "+e.type)}};function vT(i){return!(i.type===20&&i.value==="none")&&(i.type!==18||!!Iw[i.name])}var Iw={"linear-gradient":fT,"-moz-linear-gradient":Jl,"-ms-linear-gradient":Jl,"-o-linear-gradient":Jl,"-webkit-linear-gradient":Jl,"radial-gradient":xT,"-moz-radial-gradient":Xl,"-ms-radial-gradient":Xl,"-o-radial-gradient":Xl,"-webkit-radial-gradient":Xl,"-webkit-gradient":mT},wT={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(i,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(r){return Js(r)&&vT(r)}).map(function(r){return Ng.parse(i,r)})}},CT={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(i,e){return e.map(function(t){if(Dt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},BT={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(i,e){return Ao(e).map(function(t){return t.filter(cn)}).map(dw)}},ST={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(i,e){return Ao(e).map(function(t){return t.filter(Dt).map(function(r){return r.value}).join(" ")}).map(IT)}},IT=function(i){switch(i){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Gs;(function(i){i.AUTO="auto",i.CONTAIN="contain",i.COVER="cover"})(Gs||(Gs={}));var ET={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(i,e){return Ao(e).map(function(t){return t.filter(kT)})}},kT=function(i){return Dt(i)||cn(i)},yd=function(i){return{name:"border-"+i+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},TT=yd("top"),jT=yd("right"),FT=yd("bottom"),UT=yd("left"),bd=function(i){return{name:"border-radius-"+i,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return dw(t.filter(cn))}}},QT=bd("top-left"),RT=bd("top-right"),MT=bd("bottom-right"),LT=bd("bottom-left"),vd=function(i){return{name:"border-"+i+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},DT=vd("top"),PT=vd("right"),HT=vd("bottom"),NT=vd("left"),wd=function(i){return{name:"border-"+i+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return BA(t)?t.number:0}}},_T=wd("top"),OT=wd("right"),zT=wd("bottom"),KT=wd("left"),WT={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},GT={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(i,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},VT={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(i,e){return e.filter(Dt).reduce(function(t,r){return t|$T(r.value)},0)}},$T=function(i){switch(i){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},YT={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(i,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},JT={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(i,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Dc;(function(i){i.NORMAL="normal",i.STRICT="strict"})(Dc||(Dc={}));var XT={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(i,e){switch(e){case"strict":return Dc.STRICT;case"normal":default:return Dc.NORMAL}}},qT={name:"line-height",initialValue:"normal",prefix:!1,type:4},Wx=function(i,e){return Dt(i)&&i.value==="normal"?1.2*e:i.type===17?e*i.number:cn(i)?Ot(i,e):e},ZT={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(i,e){return e.type===20&&e.value==="none"?null:Ng.parse(i,e)}},ej={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(i,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},fh={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(i,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Cd=function(i){return{name:"margin-"+i,initialValue:"0",prefix:!1,type:4}},tj=Cd("top"),nj=Cd("right"),rj=Cd("bottom"),oj=Cd("left"),ij={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(i,e){return e.filter(Dt).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},sj={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(i,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Bd=function(i){return{name:"padding-"+i,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},aj=Bd("top"),Aj=Bd("right"),lj=Bd("bottom"),cj=Bd("left"),dj={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(i,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},uj={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(i,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},pj={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(i,e){return e.length===1&&gh(e[0],"none")?[]:Ao(e).map(function(t){for(var r={color:ko.TRANSPARENT,offsetX:Mn,offsetY:Mn,blur:Mn},a=0,A=0;A<t.length;A++){var c=t[A];vi(c)?(a===0?r.offsetX=c:a===1?r.offsetY=c:r.blur=c,a++):r.color=mi.parse(i,c)}return r})}},hj={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(i,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},gj={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(i,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=xj[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},fj=function(i){var e=i.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},mj=function(i){var e=i.filter(function(u){return u.type===17}).map(function(u){return u.number}),t=e[0],r=e[1];e[2],e[3];var a=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var c=e[12],p=e[13];return e[14],e[15],e.length===16?[t,r,a,A,c,p]:null},xj={matrix:fj,matrix3d:mj},Gx={type:16,number:50,flags:CA},yj=[Gx,Gx],bj={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(i,e){var t=e.filter(cn);return t.length!==2?yj:[t[0],t[1]]}},vj={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(i,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},aA;(function(i){i.NORMAL="normal",i.BREAK_ALL="break-all",i.KEEP_ALL="keep-all"})(aA||(aA={}));var wj={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(i,e){switch(e){case"break-all":return aA.BREAK_ALL;case"keep-all":return aA.KEEP_ALL;case"normal":default:return aA.NORMAL}}},Cj={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(i,e){if(e.type===20)return{auto:!0,order:0};if(oa(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Ew={name:"time",parse:function(i,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Bj={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(i,e){return oa(e)?e.number:1}},Sj={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ij={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(i,e){return e.filter(Dt).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},Ej={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(i,e){var t=[],r=[];return e.forEach(function(a){switch(a.type){case 20:case 0:t.push(a.value);break;case 17:t.push(a.number.toString());break;case 4:r.push(t.join(" ")),t.length=0;break}}),t.length&&r.push(t.join(" ")),r.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},kj={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Tj={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(i,e){if(oa(e))return e.number;if(Dt(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},jj={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(i,e){return e.filter(Dt).map(function(t){return t.value})}},Fj={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(i,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},mn=function(i,e){return(i&e)!==0},Uj={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(i,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},Qj={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(i,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var r=[],a=e.filter(cw),A=0;A<a.length;A++){var c=a[A],p=a[A+1];if(c.type===20){var u=p&&oa(p)?p.number:1;r.push({counter:c.value,increment:u})}}return r}},Rj={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(i,e){if(e.length===0)return[];for(var t=[],r=e.filter(cw),a=0;a<r.length;a++){var A=r[a],c=r[a+1];if(Dt(A)&&A.value!=="none"){var p=c&&oa(c)?c.number:0;t.push({counter:A.value,reset:p})}}return t}},Mj={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(i,e){return e.filter(BA).map(function(t){return Ew.parse(i,t)})}},Lj={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(i,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var r=[],a=e.filter(AT);if(a.length%2!==0)return null;for(var A=0;A<a.length;A+=2){var c=a[A].value,p=a[A+1].value;r.push({open:c,close:p})}return r}},Vx=function(i,e,t){if(!i)return"";var r=i[Math.min(e,i.length-1)];return r?t?r.open:r.close:""},Dj={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(i,e){return e.length===1&&gh(e[0],"none")?[]:Ao(e).map(function(t){for(var r={color:255,offsetX:Mn,offsetY:Mn,blur:Mn,spread:Mn,inset:!1},a=0,A=0;A<t.length;A++){var c=t[A];gh(c,"inset")?r.inset=!0:vi(c)?(a===0?r.offsetX=c:a===1?r.offsetY=c:a===2?r.blur=c:r.spread=c,a++):r.color=mi.parse(i,c)}return r})}},Pj={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(i,e){var t=[0,1,2],r=[];return e.filter(Dt).forEach(function(a){switch(a.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),t.forEach(function(a){r.indexOf(a)===-1&&r.push(a)}),r}},Hj={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Nj={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(i,e){return BA(e)?e.number:0}},_j=function(){function i(e,t){var r,a;this.animationDuration=Ye(e,Mj,t.animationDuration),this.backgroundClip=Ye(e,dT,t.backgroundClip),this.backgroundColor=Ye(e,uT,t.backgroundColor),this.backgroundImage=Ye(e,wT,t.backgroundImage),this.backgroundOrigin=Ye(e,CT,t.backgroundOrigin),this.backgroundPosition=Ye(e,BT,t.backgroundPosition),this.backgroundRepeat=Ye(e,ST,t.backgroundRepeat),this.backgroundSize=Ye(e,ET,t.backgroundSize),this.borderTopColor=Ye(e,TT,t.borderTopColor),this.borderRightColor=Ye(e,jT,t.borderRightColor),this.borderBottomColor=Ye(e,FT,t.borderBottomColor),this.borderLeftColor=Ye(e,UT,t.borderLeftColor),this.borderTopLeftRadius=Ye(e,QT,t.borderTopLeftRadius),this.borderTopRightRadius=Ye(e,RT,t.borderTopRightRadius),this.borderBottomRightRadius=Ye(e,MT,t.borderBottomRightRadius),this.borderBottomLeftRadius=Ye(e,LT,t.borderBottomLeftRadius),this.borderTopStyle=Ye(e,DT,t.borderTopStyle),this.borderRightStyle=Ye(e,PT,t.borderRightStyle),this.borderBottomStyle=Ye(e,HT,t.borderBottomStyle),this.borderLeftStyle=Ye(e,NT,t.borderLeftStyle),this.borderTopWidth=Ye(e,_T,t.borderTopWidth),this.borderRightWidth=Ye(e,OT,t.borderRightWidth),this.borderBottomWidth=Ye(e,zT,t.borderBottomWidth),this.borderLeftWidth=Ye(e,KT,t.borderLeftWidth),this.boxShadow=Ye(e,Dj,t.boxShadow),this.color=Ye(e,WT,t.color),this.direction=Ye(e,GT,t.direction),this.display=Ye(e,VT,t.display),this.float=Ye(e,YT,t.cssFloat),this.fontFamily=Ye(e,Ej,t.fontFamily),this.fontSize=Ye(e,kj,t.fontSize),this.fontStyle=Ye(e,Fj,t.fontStyle),this.fontVariant=Ye(e,jj,t.fontVariant),this.fontWeight=Ye(e,Tj,t.fontWeight),this.letterSpacing=Ye(e,JT,t.letterSpacing),this.lineBreak=Ye(e,XT,t.lineBreak),this.lineHeight=Ye(e,qT,t.lineHeight),this.listStyleImage=Ye(e,ZT,t.listStyleImage),this.listStylePosition=Ye(e,ej,t.listStylePosition),this.listStyleType=Ye(e,fh,t.listStyleType),this.marginTop=Ye(e,tj,t.marginTop),this.marginRight=Ye(e,nj,t.marginRight),this.marginBottom=Ye(e,rj,t.marginBottom),this.marginLeft=Ye(e,oj,t.marginLeft),this.opacity=Ye(e,Bj,t.opacity);var A=Ye(e,ij,t.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=Ye(e,sj,t.overflowWrap),this.paddingTop=Ye(e,aj,t.paddingTop),this.paddingRight=Ye(e,Aj,t.paddingRight),this.paddingBottom=Ye(e,lj,t.paddingBottom),this.paddingLeft=Ye(e,cj,t.paddingLeft),this.paintOrder=Ye(e,Pj,t.paintOrder),this.position=Ye(e,uj,t.position),this.textAlign=Ye(e,dj,t.textAlign),this.textDecorationColor=Ye(e,Sj,(r=t.textDecorationColor)!==null&&r!==void 0?r:t.color),this.textDecorationLine=Ye(e,Ij,(a=t.textDecorationLine)!==null&&a!==void 0?a:t.textDecoration),this.textShadow=Ye(e,pj,t.textShadow),this.textTransform=Ye(e,hj,t.textTransform),this.transform=Ye(e,gj,t.transform),this.transformOrigin=Ye(e,bj,t.transformOrigin),this.visibility=Ye(e,vj,t.visibility),this.webkitTextStrokeColor=Ye(e,Hj,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ye(e,Nj,t.webkitTextStrokeWidth),this.wordBreak=Ye(e,wj,t.wordBreak),this.zIndex=Ye(e,Cj,t.zIndex)}return i.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},i.prototype.isTransparent=function(){return xi(this.backgroundColor)},i.prototype.isTransformed=function(){return this.transform!==null},i.prototype.isPositioned=function(){return this.position!==0},i.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},i.prototype.isFloating=function(){return this.float!==0},i.prototype.isInlineLevel=function(){return mn(this.display,4)||mn(this.display,33554432)||mn(this.display,268435456)||mn(this.display,536870912)||mn(this.display,67108864)||mn(this.display,134217728)},i}(),Oj=function(){function i(e,t){this.content=Ye(e,Uj,t.content),this.quotes=Ye(e,Lj,t.quotes)}return i}(),$x=function(){function i(e,t){this.counterIncrement=Ye(e,Qj,t.counterIncrement),this.counterReset=Ye(e,Rj,t.counterReset)}return i}(),Ye=function(i,e,t){var r=new Aw,a=t!==null&&typeof t<"u"?t.toString():e.initialValue;r.write(a);var A=new lw(r.read());switch(e.type){case 2:var c=A.parseComponentValue();return e.parse(i,Dt(c)?c.value:e.initialValue);case 0:return e.parse(i,A.parseComponentValue());case 1:return e.parse(i,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return md.parse(i,A.parseComponentValue());case"color":return mi.parse(i,A.parseComponentValue());case"image":return Ng.parse(i,A.parseComponentValue());case"length":var p=A.parseComponentValue();return vi(p)?p:Mn;case"length-percentage":var u=A.parseComponentValue();return cn(u)?u:Mn;case"time":return Ew.parse(i,A.parseComponentValue())}break}},zj="data-html2canvas-debug",Kj=function(i){var e=i.getAttribute(zj);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},mh=function(i,e){var t=Kj(i);return t===1||e===t},lo=function(){function i(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,mh(t,3))debugger;this.styles=new _j(e,window.getComputedStyle(t,null)),bh(t)&&(this.styles.animationDuration.some(function(r){return r>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=gd(this.context,t),mh(t,4)&&(this.flags|=16)}return i}(),Wj="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Yx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qa=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ql=0;ql<Yx.length;ql++)qa[Yx.charCodeAt(ql)]=ql;var Gj=function(i){var e=i.length*.75,t=i.length,r,a=0,A,c,p,u;i[i.length-1]==="="&&(e--,i[i.length-2]==="="&&e--);var f=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),g=Array.isArray(f)?f:new Uint8Array(f);for(r=0;r<t;r+=4)A=qa[i.charCodeAt(r)],c=qa[i.charCodeAt(r+1)],p=qa[i.charCodeAt(r+2)],u=qa[i.charCodeAt(r+3)],g[a++]=A<<2|c>>4,g[a++]=(c&15)<<4|p>>2,g[a++]=(p&3)<<6|u&63;return f},Vj=function(i){for(var e=i.length,t=[],r=0;r<e;r+=2)t.push(i[r+1]<<8|i[r]);return t},$j=function(i){for(var e=i.length,t=[],r=0;r<e;r+=4)t.push(i[r+3]<<24|i[r+2]<<16|i[r+1]<<8|i[r]);return t},Yi=5,_g=11,Bp=2,Yj=_g-Yi,kw=65536>>Yi,Jj=1<<Yi,Sp=Jj-1,Xj=1024>>Yi,qj=kw+Xj,Zj=qj,eF=32,tF=Zj+eF,nF=65536>>_g,rF=1<<Yj,oF=rF-1,Jx=function(i,e,t){return i.slice?i.slice(e,t):new Uint16Array(Array.prototype.slice.call(i,e,t))},iF=function(i,e,t){return i.slice?i.slice(e,t):new Uint32Array(Array.prototype.slice.call(i,e,t))},sF=function(i,e){var t=Gj(i),r=Array.isArray(t)?$j(t):new Uint32Array(t),a=Array.isArray(t)?Vj(t):new Uint16Array(t),A=24,c=Jx(a,A/2,r[4]/2),p=r[5]===2?Jx(a,(A+r[4])/2):iF(r,Math.ceil((A+r[4])/4));return new aF(r[0],r[1],r[2],r[3],c,p)},aF=function(){function i(e,t,r,a,A,c){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=a,this.index=A,this.data=c}return i.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Yi],t=(t<<Bp)+(e&Sp),this.data[t];if(e<=65535)return t=this.index[kw+(e-55296>>Yi)],t=(t<<Bp)+(e&Sp),this.data[t];if(e<this.highStart)return t=tF-nF+(e>>_g),t=this.index[t],t+=e>>Yi&oF,t=this.index[t],t=(t<<Bp)+(e&Sp),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},i}(),Xx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",AF=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zl=0;Zl<Xx.length;Zl++)AF[Xx.charCodeAt(Zl)]=Zl;var lF=1,Ip=2,Ep=3,qx=4,Zx=5,cF=7,ey=8,kp=9,Tp=10,ty=11,ny=12,ry=13,oy=14,jp=15,dF=function(i){for(var e=[],t=0,r=i.length;t<r;){var a=i.charCodeAt(t++);if(a>=55296&&a<=56319&&t<r){var A=i.charCodeAt(t++);(A&64512)===56320?e.push(((a&1023)<<10)+(A&1023)+65536):(e.push(a),t--)}else e.push(a)}return e},uF=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,i);var t=i.length;if(!t)return"";for(var r=[],a=-1,A="";++a<t;){var c=i[a];c<=65535?r.push(c):(c-=65536,r.push((c>>10)+55296,c%1024+56320)),(a+1===t||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},pF=sF(Wj),Er="",Fp="",hF=function(i){return pF.get(i)},gF=function(i,e,t){var r=t-2,a=e[r],A=e[t-1],c=e[t];if(A===Ip&&c===Ep)return Er;if(A===Ip||A===Ep||A===qx||c===Ip||c===Ep||c===qx)return Fp;if(A===ey&&[ey,kp,ty,ny].indexOf(c)!==-1||(A===ty||A===kp)&&(c===kp||c===Tp)||(A===ny||A===Tp)&&c===Tp||c===ry||c===Zx||c===cF||A===lF)return Er;if(A===ry&&c===oy){for(;a===Zx;)a=e[--r];if(a===oy)return Er}if(A===jp&&c===jp){for(var p=0;a===jp;)p++,a=e[--r];if(p%2===0)return Er}return Fp},fF=function(i){var e=dF(i),t=e.length,r=0,a=0,A=e.map(hF);return{next:function(){if(r>=t)return{done:!0,value:null};for(var c=Er;r<t&&(c=gF(e,A,++r))===Er;);if(c!==Er||r===t){var p=uF.apply(null,e.slice(a,r));return a=r,{value:p,done:!1}}return{done:!0,value:null}}}},mF=function(i){for(var e=fF(i),t=[],r;!(r=e.next()).done;)r.value&&t.push(r.value.slice());return t},xF=function(i){var e=123;if(i.createRange){var t=i.createRange();if(t.getBoundingClientRect){var r=i.createElement("boundtest");r.style.height=e+"px",r.style.display="block",i.body.appendChild(r),t.selectNode(r);var a=t.getBoundingClientRect(),A=Math.round(a.height);if(i.body.removeChild(r),A===e)return!0}}return!1},yF=function(i){var e=i.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",i.body.appendChild(e);var t=i.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,a=fd(r.data).map(function(u){return on(u)}),A=0,c={},p=a.every(function(u,f){t.setStart(r,A),t.setEnd(r,A+u.length);var g=t.getBoundingClientRect();A+=u.length;var y=g.x>c.x||g.y>c.y;return c=g,f===0?!0:y});return i.body.removeChild(e),p},bF=function(){return typeof new Image().crossOrigin<"u"},vF=function(){return typeof new XMLHttpRequest().responseType=="string"},wF=function(i){var e=new Image,t=i.createElement("canvas"),r=t.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},iy=function(i){return i[0]===0&&i[1]===255&&i[2]===0&&i[3]===255},CF=function(i){var e=i.createElement("canvas"),t=100;e.width=t,e.height=t;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var a=new Image,A=e.toDataURL();a.src=A;var c=xh(t,t,0,0,a);return r.fillStyle="red",r.fillRect(0,0,t,t),sy(c).then(function(p){r.drawImage(p,0,0);var u=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var f=i.createElement("div");return f.style.backgroundImage="url("+A+")",f.style.height=t+"px",iy(u)?sy(xh(t,t,0,0,f)):Promise.reject(!1)}).then(function(p){return r.drawImage(p,0,0),iy(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},xh=function(i,e,t,r,a){var A="http://www.w3.org/2000/svg",c=document.createElementNS(A,"svg"),p=document.createElementNS(A,"foreignObject");return c.setAttributeNS(null,"width",i.toString()),c.setAttributeNS(null,"height",e.toString()),p.setAttributeNS(null,"width","100%"),p.setAttributeNS(null,"height","100%"),p.setAttributeNS(null,"x",t.toString()),p.setAttributeNS(null,"y",r.toString()),p.setAttributeNS(null,"externalResourcesRequired","true"),c.appendChild(p),p.appendChild(a),c},sy=function(i){return new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(i))})},Fn={get SUPPORT_RANGE_BOUNDS(){var i=xF(document);return Object.defineProperty(Fn,"SUPPORT_RANGE_BOUNDS",{value:i}),i},get SUPPORT_WORD_BREAKING(){var i=Fn.SUPPORT_RANGE_BOUNDS&&yF(document);return Object.defineProperty(Fn,"SUPPORT_WORD_BREAKING",{value:i}),i},get SUPPORT_SVG_DRAWING(){var i=wF(document);return Object.defineProperty(Fn,"SUPPORT_SVG_DRAWING",{value:i}),i},get SUPPORT_FOREIGNOBJECT_DRAWING(){var i=typeof Array.from=="function"&&typeof window.fetch=="function"?CF(document):Promise.resolve(!1);return Object.defineProperty(Fn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:i}),i},get SUPPORT_CORS_IMAGES(){var i=bF();return Object.defineProperty(Fn,"SUPPORT_CORS_IMAGES",{value:i}),i},get SUPPORT_RESPONSE_TYPE(){var i=vF();return Object.defineProperty(Fn,"SUPPORT_RESPONSE_TYPE",{value:i}),i},get SUPPORT_CORS_XHR(){var i="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Fn,"SUPPORT_CORS_XHR",{value:i}),i},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var i=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Fn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:i}),i}},AA=function(){function i(e,t){this.text=e,this.bounds=t}return i}(),BF=function(i,e,t,r){var a=EF(e,t),A=[],c=0;return a.forEach(function(p){if(t.textDecorationLine.length||p.trim().length>0)if(Fn.SUPPORT_RANGE_BOUNDS){var u=ay(r,c,p.length).getClientRects();if(u.length>1){var f=Og(p),g=0;f.forEach(function(b){A.push(new AA(b,Qo.fromDOMRectList(i,ay(r,g+c,b.length).getClientRects()))),g+=b.length})}else A.push(new AA(p,Qo.fromDOMRectList(i,u)))}else{var y=r.splitText(p.length);A.push(new AA(p,SF(i,r))),r=y}else Fn.SUPPORT_RANGE_BOUNDS||(r=r.splitText(p.length));c+=p.length}),A},SF=function(i,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(r,e);var A=gd(i,r);return r.firstChild&&a.replaceChild(r.firstChild,r),A}}return Qo.EMPTY},ay=function(i,e,t){var r=i.ownerDocument;if(!r)throw new Error("Node has no owner document");var a=r.createRange();return a.setStart(i,e),a.setEnd(i,e+t),a},Og=function(i){if(Fn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(i)).map(function(t){return t.segment})}return mF(i)},IF=function(i,e){if(Fn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(i)).map(function(r){return r.segment})}return TF(i,e)},EF=function(i,e){return e.letterSpacing!==0?Og(i):IF(i,e)},kF=[32,160,4961,65792,65793,4153,4241],TF=function(i,e){for(var t=nk(i,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],a,A=function(){if(a.value){var c=a.value.slice(),p=fd(c),u="";p.forEach(function(f){kF.indexOf(f)===-1?u+=on(f):(u.length&&r.push(u),r.push(on(f)),u="")}),u.length&&r.push(u)}};!(a=t.next()).done;)A();return r},jF=function(){function i(e,t,r){this.text=FF(t.data,r.textTransform),this.textBounds=BF(e,this.text,r,t)}return i}(),FF=function(i,e){switch(e){case 1:return i.toLowerCase();case 3:return i.replace(UF,QF);case 2:return i.toUpperCase();default:return i}},UF=/(^|\s|:|-|\(|\))([a-z])/g,QF=function(i,e,t){return i.length>0?e+t.toUpperCase():i},Tw=function(i){Vr(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a.src=r.currentSrc||r.src,a.intrinsicWidth=r.naturalWidth,a.intrinsicHeight=r.naturalHeight,a.context.cache.addImage(a.src),a}return e}(lo),jw=function(i){Vr(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a.canvas=r,a.intrinsicWidth=r.width,a.intrinsicHeight=r.height,a}return e}(lo),Fw=function(i){Vr(e,i);function e(t,r){var a=i.call(this,t,r)||this,A=new XMLSerializer,c=gd(t,r);return r.setAttribute("width",c.width+"px"),r.setAttribute("height",c.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(r)),a.intrinsicWidth=r.width.baseVal.value,a.intrinsicHeight=r.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(lo),Uw=function(i){Vr(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a.value=r.value,a}return e}(lo),yh=function(i){Vr(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a.start=r.start,a.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,a}return e}(lo),RF=[{type:15,flags:0,unit:"px",number:3}],MF=[{type:16,flags:0,number:50}],LF=function(i){return i.width>i.height?new Qo(i.left+(i.width-i.height)/2,i.top,i.height,i.height):i.width<i.height?new Qo(i.left,i.top+(i.height-i.width)/2,i.width,i.width):i},DF=function(i){var e=i.type===PF?new Array(i.value.length+1).join(""):i.value;return e.length===0?i.placeholder||"":e},Pc="checkbox",Hc="radio",PF="password",Ay=707406591,zg=function(i){Vr(e,i);function e(t,r){var a=i.call(this,t,r)||this;switch(a.type=r.type.toLowerCase(),a.checked=r.checked,a.value=DF(r),(a.type===Pc||a.type===Hc)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=LF(a.bounds)),a.type){case Pc:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=RF;break;case Hc:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=MF;break}return a}return e}(lo),Qw=function(i){Vr(e,i);function e(t,r){var a=i.call(this,t,r)||this,A=r.options[r.selectedIndex||0];return a.value=A&&A.text||"",a}return e}(lo),Rw=function(i){Vr(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a.value=r.value,a}return e}(lo),Mw=function(i){Vr(e,i);function e(t,r){var a=i.call(this,t,r)||this;a.src=r.src,a.width=parseInt(r.width,10)||0,a.height=parseInt(r.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){a.tree=Dw(t,r.contentWindow.document.documentElement);var A=r.contentWindow.document.documentElement?sA(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):ko.TRANSPARENT,c=r.contentWindow.document.body?sA(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):ko.TRANSPARENT;a.backgroundColor=xi(A)?xi(c)?a.styles.backgroundColor:c:A}}catch{}return a}return e}(lo),HF=["OL","UL","MENU"],uc=function(i,e,t,r){for(var a=e.firstChild,A=void 0;a;a=A)if(A=a.nextSibling,Pw(a)&&a.data.trim().length>0)t.textNodes.push(new jF(i,a,t.styles));else if(Hs(a))if(Ow(a)&&a.assignedNodes)a.assignedNodes().forEach(function(p){return uc(i,p,t,r)});else{var c=Lw(i,a);c.styles.isVisible()&&(NF(a,c,r)?c.flags|=4:_F(c.styles)&&(c.flags|=2),HF.indexOf(a.tagName)!==-1&&(c.flags|=8),t.elements.push(c),a.slot,a.shadowRoot?uc(i,a.shadowRoot,c,r):!Nc(a)&&!Hw(a)&&!_c(a)&&uc(i,a,c,r))}},Lw=function(i,e){return vh(e)?new Tw(i,e):Nw(e)?new jw(i,e):Hw(e)?new Fw(i,e):OF(e)?new Uw(i,e):zF(e)?new yh(i,e):KF(e)?new zg(i,e):_c(e)?new Qw(i,e):Nc(e)?new Rw(i,e):_w(e)?new Mw(i,e):new lo(i,e)},Dw=function(i,e){var t=Lw(i,e);return t.flags|=4,uc(i,e,t,t),t},NF=function(i,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Kg(i)&&t.styles.isTransparent()},_F=function(i){return i.isPositioned()||i.isFloating()},Pw=function(i){return i.nodeType===Node.TEXT_NODE},Hs=function(i){return i.nodeType===Node.ELEMENT_NODE},bh=function(i){return Hs(i)&&typeof i.style<"u"&&!pc(i)},pc=function(i){return typeof i.className=="object"},OF=function(i){return i.tagName==="LI"},zF=function(i){return i.tagName==="OL"},KF=function(i){return i.tagName==="INPUT"},WF=function(i){return i.tagName==="HTML"},Hw=function(i){return i.tagName==="svg"},Kg=function(i){return i.tagName==="BODY"},Nw=function(i){return i.tagName==="CANVAS"},ly=function(i){return i.tagName==="VIDEO"},vh=function(i){return i.tagName==="IMG"},_w=function(i){return i.tagName==="IFRAME"},cy=function(i){return i.tagName==="STYLE"},GF=function(i){return i.tagName==="SCRIPT"},Nc=function(i){return i.tagName==="TEXTAREA"},_c=function(i){return i.tagName==="SELECT"},Ow=function(i){return i.tagName==="SLOT"},dy=function(i){return i.tagName.indexOf("-")>0},VF=function(){function i(){this.counters={}}return i.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},i.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},i.prototype.pop=function(e){var t=this;e.forEach(function(r){return t.counters[r].pop()})},i.prototype.parse=function(e){var t=this,r=e.counterIncrement,a=e.counterReset,A=!0;r!==null&&r.forEach(function(p){var u=t.counters[p.counter];u&&p.increment!==0&&(A=!1,u.length||u.push(1),u[Math.max(0,u.length-1)]+=p.increment)});var c=[];return A&&a.forEach(function(p){var u=t.counters[p.counter];c.push(p.counter),u||(u=t.counters[p.counter]=[]),u.push(p.reset)}),c},i}(),uy={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},py={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},$F={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},YF={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Us=function(i,e,t,r,a,A){return i<e||i>t?bA(i,a,A.length>0):r.integers.reduce(function(c,p,u){for(;i>=p;)i-=p,c+=r.values[u];return c},"")+A},zw=function(i,e,t,r){var a="";do t||i--,a=r(i)+a,i/=e;while(i*e>=e);return a},rn=function(i,e,t,r,a){var A=t-e+1;return(i<0?"-":"")+(zw(Math.abs(i),A,r,function(c){return on(Math.floor(c%A)+e)})+a)},Hi=function(i,e,t){t===void 0&&(t=". ");var r=e.length;return zw(Math.abs(i),r,!1,function(a){return e[Math.floor(a%r)]})+t},Ds=1,ni=2,ri=4,Za=8,Co=function(i,e,t,r,a,A){if(i<-9999||i>9999)return bA(i,4,a.length>0);var c=Math.abs(i),p=a;if(c===0)return e[0]+p;for(var u=0;c>0&&u<=4;u++){var f=c%10;f===0&&mn(A,Ds)&&p!==""?p=e[f]+p:f>1||f===1&&u===0||f===1&&u===1&&mn(A,ni)||f===1&&u===1&&mn(A,ri)&&i>100||f===1&&u>1&&mn(A,Za)?p=e[f]+(u>0?t[u-1]:"")+p:f===1&&u>0&&(p=t[u-1]+p),c=Math.floor(c/10)}return(i<0?r:"")+p},hy="",gy="",fy="",Up="",bA=function(i,e,t){var r=t?". ":"",a=t?"":"",A=t?", ":"",c=t?" ":"";switch(e){case 0:return""+c;case 1:return""+c;case 2:return""+c;case 5:var p=rn(i,48,57,!0,r);return p.length<4?"0"+p:p;case 4:return Hi(i,"",a);case 6:return Us(i,1,3999,uy,3,r).toLowerCase();case 7:return Us(i,1,3999,uy,3,r);case 8:return rn(i,945,969,!1,r);case 9:return rn(i,97,122,!1,r);case 10:return rn(i,65,90,!1,r);case 11:return rn(i,1632,1641,!0,r);case 12:case 49:return Us(i,1,9999,py,3,r);case 35:return Us(i,1,9999,py,3,r).toLowerCase();case 13:return rn(i,2534,2543,!0,r);case 14:case 30:return rn(i,6112,6121,!0,r);case 15:return Hi(i,"",a);case 16:return Hi(i,"",a);case 17:case 48:return Co(i,"",hy,"",a,ni|ri|Za);case 47:return Co(i,"",gy,"",a,Ds|ni|ri|Za);case 42:return Co(i,"",hy,"",a,ni|ri|Za);case 41:return Co(i,"",gy,"",a,Ds|ni|ri|Za);case 26:return Co(i,"","",fy,a,0);case 25:return Co(i,"","",fy,a,Ds|ni|ri);case 31:return Co(i,"","",Up,A,Ds|ni|ri);case 33:return Co(i,"","",Up,A,0);case 32:return Co(i,"","",Up,A,Ds|ni|ri);case 18:return rn(i,2406,2415,!0,r);case 20:return Us(i,1,19999,YF,3,r);case 21:return rn(i,2790,2799,!0,r);case 22:return rn(i,2662,2671,!0,r);case 22:return Us(i,1,10999,$F,3,r);case 23:return Hi(i,"");case 24:return Hi(i,"");case 27:return rn(i,3302,3311,!0,r);case 28:return Hi(i,"",a);case 29:return Hi(i,"",a);case 34:return rn(i,3792,3801,!0,r);case 37:return rn(i,6160,6169,!0,r);case 38:return rn(i,4160,4169,!0,r);case 39:return rn(i,2918,2927,!0,r);case 40:return rn(i,1776,1785,!0,r);case 43:return rn(i,3046,3055,!0,r);case 44:return rn(i,3174,3183,!0,r);case 45:return rn(i,3664,3673,!0,r);case 46:return rn(i,3872,3881,!0,r);case 3:default:return rn(i,48,57,!0,r)}},Kw="data-html2canvas-ignore",my=function(){function i(e,t,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=t,this.counters=new VF,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return i.prototype.toIFrame=function(e,t){var r=this,a=JF(e,t);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,c=e.defaultView.pageYOffset,p=a.contentWindow,u=p.document,f=ZF(a).then(function(){return Yn(r,void 0,void 0,function(){var g,y;return On(this,function(b){switch(b.label){case 0:return this.scrolledElements.forEach(rU),p&&(p.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(p.scrollY!==t.top||p.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(p.scrollX-t.left,p.scrollY-t.top,0,0))),g=this.options.onclone,y=this.clonedReferenceElement,typeof y>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:u.fonts&&u.fonts.ready?[4,u.fonts.ready]:[3,2];case 1:b.sent(),b.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,qF(u)]:[3,4];case 3:b.sent(),b.label=4;case 4:return typeof g=="function"?[2,Promise.resolve().then(function(){return g(u,y)}).then(function(){return a})]:[2,a]}})})});return u.open(),u.write(tU(document.doctype)+"<html></html>"),nU(this.referenceElement.ownerDocument,A,c),u.replaceChild(u.adoptNode(this.documentElement),u.documentElement),u.close(),f},i.prototype.createElementClone=function(e){if(mh(e,2))debugger;if(Nw(e))return this.createCanvasClone(e);if(ly(e))return this.createVideoClone(e);if(cy(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return vh(t)&&(vh(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),dy(t)?this.createCustomElementClone(t):t},i.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return Qp(e.style,t),t},i.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var r=[].slice.call(t.cssRules,0).reduce(function(A,c){return c&&typeof c.cssText=="string"?A+c.cssText:A},""),a=e.cloneNode(!1);return a.textContent=r,a}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},i.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var A=e.getContext("2d"),c=a.getContext("2d");if(c)if(!this.options.allowTaint&&A)c.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var p=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(p){var u=p.getContextAttributes();(u==null?void 0:u.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}c.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},i.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var r=t.getContext("2d");try{return r&&(r.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||r.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},i.prototype.appendChildNode=function(e,t,r){(!Hs(t)||!GF(t)&&!t.hasAttribute(Kw)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!Hs(t)||!cy(t))&&e.appendChild(this.cloneNode(t,r))},i.prototype.cloneChildNodes=function(e,t,r){for(var a=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if(Hs(A)&&Ow(A)&&typeof A.assignedNodes=="function"){var c=A.assignedNodes();c.length&&c.forEach(function(p){return a.appendChildNode(t,p,r)})}else this.appendChildNode(t,A,r)},i.prototype.cloneNode=function(e,t){if(Pw(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Hs(e)&&(bh(e)||pc(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var A=r.getComputedStyle(e),c=r.getComputedStyle(e,":before"),p=r.getComputedStyle(e,":after");this.referenceElement===e&&bh(a)&&(this.clonedReferenceElement=a),Kg(a)&&sU(a);var u=this.counters.parse(new $x(this.context,A)),f=this.resolvePseudoContent(e,a,c,lA.BEFORE);dy(e)&&(t=!0),ly(e)||this.cloneChildNodes(e,a,t),f&&a.insertBefore(f,a.firstChild);var g=this.resolvePseudoContent(e,a,p,lA.AFTER);return g&&a.appendChild(g),this.counters.pop(u),(A&&(this.options.copyStyles||pc(e))&&!_w(e)||t)&&Qp(A,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(Nc(e)||_c(e))&&(Nc(a)||_c(a))&&(a.value=e.value),a}return e.cloneNode(!1)},i.prototype.resolvePseudoContent=function(e,t,r,a){var A=this;if(r){var c=r.content,p=t.ownerDocument;if(!(!p||!c||c==="none"||c==="-moz-alt-content"||r.display==="none")){this.counters.parse(new $x(this.context,r));var u=new Oj(this.context,r),f=p.createElement("html2canvaspseudoelement");Qp(r,f),u.content.forEach(function(y){if(y.type===0)f.appendChild(p.createTextNode(y.value));else if(y.type===22){var b=p.createElement("img");b.src=y.value,b.style.opacity="1",f.appendChild(b)}else if(y.type===18){if(y.name==="attr"){var H=y.values.filter(Dt);H.length&&f.appendChild(p.createTextNode(e.getAttribute(H[0].value)||""))}else if(y.name==="counter"){var S=y.values.filter(Js),L=S[0],Q=S[1];if(L&&Dt(L)){var V=A.counters.getCounterValue(L.value),D=Q&&Dt(Q)?fh.parse(A.context,Q.value):3;f.appendChild(p.createTextNode(bA(V,D,!1)))}}else if(y.name==="counters"){var te=y.values.filter(Js),L=te[0],J=te[1],Q=te[2];if(L&&Dt(L)){var M=A.counters.getCounterValues(L.value),N=Q&&Dt(Q)?fh.parse(A.context,Q.value):3,X=J&&J.type===0?J.value:"",Be=M.map(function(G){return bA(G,N,!1)}).join(X);f.appendChild(p.createTextNode(Be))}}}else if(y.type===20)switch(y.value){case"open-quote":f.appendChild(p.createTextNode(Vx(u.quotes,A.quoteDepth++,!0)));break;case"close-quote":f.appendChild(p.createTextNode(Vx(u.quotes,--A.quoteDepth,!1)));break;default:f.appendChild(p.createTextNode(y.value))}}),f.className=wh+" "+Ch;var g=a===lA.BEFORE?" "+wh:" "+Ch;return pc(t)?t.className.baseValue+=g:t.className+=g,f}}},i.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},i}(),lA;(function(i){i[i.BEFORE=0]="BEFORE",i[i.AFTER=1]="AFTER"})(lA||(lA={}));var JF=function(i,e){var t=i.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(Kw,"true"),i.body.appendChild(t),t},XF=function(i){return new Promise(function(e){if(i.complete){e();return}if(!i.src){e();return}i.onload=e,i.onerror=e})},qF=function(i){return Promise.all([].slice.call(i.images,0).map(XF))},ZF=function(i){return new Promise(function(e,t){var r=i.contentWindow;if(!r)return t("No window assigned for iframe");var a=r.document;r.onload=i.onload=function(){r.onload=i.onload=null;var A=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(A),e(i))},50)}})},eU=["all","d","content"],Qp=function(i,e){for(var t=i.length-1;t>=0;t--){var r=i.item(t);eU.indexOf(r)===-1&&e.style.setProperty(r,i.getPropertyValue(r))}return e},tU=function(i){var e="";return i&&(e+="<!DOCTYPE ",i.name&&(e+=i.name),i.internalSubset&&(e+=i.internalSubset),i.publicId&&(e+='"'+i.publicId+'"'),i.systemId&&(e+='"'+i.systemId+'"'),e+=">"),e},nU=function(i,e,t){i&&i.defaultView&&(e!==i.defaultView.pageXOffset||t!==i.defaultView.pageYOffset)&&i.defaultView.scrollTo(e,t)},rU=function(i){var e=i[0],t=i[1],r=i[2];e.scrollLeft=t,e.scrollTop=r},oU=":before",iU=":after",wh="___html2canvas___pseudoelement_before",Ch="___html2canvas___pseudoelement_after",xy=`{
    content: "" !important;
    display: none !important;
}`,sU=function(i){aU(i,"."+wh+oU+xy+`
         .`+Ch+iU+xy)},aU=function(i,e){var t=i.ownerDocument;if(t){var r=t.createElement("style");r.textContent=e,i.appendChild(r)}},Ww=function(){function i(){}return i.getOrigin=function(e){var t=i._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},i.isSameOrigin=function(e){return i.getOrigin(e)===i._origin},i.setContext=function(e){i._link=e.document.createElement("a"),i._origin=i.getOrigin(e.location.href)},i._origin="about:blank",i}(),AU=function(){function i(e,t){this.context=e,this._options=t,this._cache={}}return i.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(Mp(e)||uU(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},i.prototype.match=function(e){return this._cache[e]},i.prototype.loadImage=function(e){return Yn(this,void 0,void 0,function(){var t,r,a,A,c=this;return On(this,function(p){switch(p.label){case 0:return t=Ww.isSameOrigin(e),r=!Rp(e)&&this._options.useCORS===!0&&Fn.SUPPORT_CORS_IMAGES&&!t,a=!Rp(e)&&!t&&!Mp(e)&&typeof this._options.proxy=="string"&&Fn.SUPPORT_CORS_XHR&&!r,!t&&this._options.allowTaint===!1&&!Rp(e)&&!Mp(e)&&!a&&!r?[2]:(A=e,a?[4,this.proxy(A)]:[3,2]);case 1:A=p.sent(),p.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(u,f){var g=new Image;g.onload=function(){return u(g)},g.onerror=f,(pU(A)||r)&&(g.crossOrigin="anonymous"),g.src=A,g.complete===!0&&setTimeout(function(){return u(g)},500),c._options.imageTimeout>0&&setTimeout(function(){return f("Timed out ("+c._options.imageTimeout+"ms) loading image")},c._options.imageTimeout)})];case 3:return[2,p.sent()]}})})},i.prototype.has=function(e){return typeof this._cache[e]<"u"},i.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},i.prototype.proxy=function(e){var t=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(A,c){var p=Fn.SUPPORT_RESPONSE_TYPE?"blob":"text",u=new XMLHttpRequest;u.onload=function(){if(u.status===200)if(p==="text")A(u.response);else{var y=new FileReader;y.addEventListener("load",function(){return A(y.result)},!1),y.addEventListener("error",function(b){return c(b)},!1),y.readAsDataURL(u.response)}else c("Failed to proxy resource "+a+" with status code "+u.status)},u.onerror=c;var f=r.indexOf("?")>-1?"&":"?";if(u.open("GET",""+r+f+"url="+encodeURIComponent(e)+"&responseType="+p),p!=="text"&&u instanceof XMLHttpRequest&&(u.responseType=p),t._options.imageTimeout){var g=t._options.imageTimeout;u.timeout=g,u.ontimeout=function(){return c("Timed out ("+g+"ms) proxying "+a)}}u.send()})},i}(),lU=/^data:image\/svg\+xml/i,cU=/^data:image\/.*;base64,/i,dU=/^data:image\/.*/i,uU=function(i){return Fn.SUPPORT_SVG_DRAWING||!hU(i)},Rp=function(i){return dU.test(i)},pU=function(i){return cU.test(i)},Mp=function(i){return i.substr(0,4)==="blob"},hU=function(i){return i.substr(-3).toLowerCase()==="svg"||lU.test(i)},Ge=function(){function i(e,t){this.type=0,this.x=e,this.y=t}return i.prototype.add=function(e,t){return new i(this.x+e,this.y+t)},i}(),Qs=function(i,e,t){return new Ge(i.x+(e.x-i.x)*t,i.y+(e.y-i.y)*t)},ec=function(){function i(e,t,r,a){this.type=1,this.start=e,this.startControl=t,this.endControl=r,this.end=a}return i.prototype.subdivide=function(e,t){var r=Qs(this.start,this.startControl,e),a=Qs(this.startControl,this.endControl,e),A=Qs(this.endControl,this.end,e),c=Qs(r,a,e),p=Qs(a,A,e),u=Qs(c,p,e);return t?new i(this.start,r,c,u):new i(u,p,A,this.end)},i.prototype.add=function(e,t){return new i(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},i.prototype.reverse=function(){return new i(this.end,this.endControl,this.startControl,this.start)},i}(),Tr=function(i){return i.type===1},gU=function(){function i(e){var t=e.styles,r=e.bounds,a=Xa(t.borderTopLeftRadius,r.width,r.height),A=a[0],c=a[1],p=Xa(t.borderTopRightRadius,r.width,r.height),u=p[0],f=p[1],g=Xa(t.borderBottomRightRadius,r.width,r.height),y=g[0],b=g[1],H=Xa(t.borderBottomLeftRadius,r.width,r.height),S=H[0],L=H[1],Q=[];Q.push((A+u)/r.width),Q.push((S+y)/r.width),Q.push((c+L)/r.height),Q.push((f+b)/r.height);var V=Math.max.apply(Math,Q);V>1&&(A/=V,c/=V,u/=V,f/=V,y/=V,b/=V,S/=V,L/=V);var D=r.width-u,te=r.height-b,J=r.width-y,M=r.height-L,N=t.borderTopWidth,X=t.borderRightWidth,Be=t.borderBottomWidth,Ae=t.borderLeftWidth,le=Ot(t.paddingTop,e.bounds.width),G=Ot(t.paddingRight,e.bounds.width),se=Ot(t.paddingBottom,e.bounds.width),pe=Ot(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||c>0?$t(r.left+Ae/3,r.top+N/3,A-Ae/3,c-N/3,jt.TOP_LEFT):new Ge(r.left+Ae/3,r.top+N/3),this.topRightBorderDoubleOuterBox=A>0||c>0?$t(r.left+D,r.top+N/3,u-X/3,f-N/3,jt.TOP_RIGHT):new Ge(r.left+r.width-X/3,r.top+N/3),this.bottomRightBorderDoubleOuterBox=y>0||b>0?$t(r.left+J,r.top+te,y-X/3,b-Be/3,jt.BOTTOM_RIGHT):new Ge(r.left+r.width-X/3,r.top+r.height-Be/3),this.bottomLeftBorderDoubleOuterBox=S>0||L>0?$t(r.left+Ae/3,r.top+M,S-Ae/3,L-Be/3,jt.BOTTOM_LEFT):new Ge(r.left+Ae/3,r.top+r.height-Be/3),this.topLeftBorderDoubleInnerBox=A>0||c>0?$t(r.left+Ae*2/3,r.top+N*2/3,A-Ae*2/3,c-N*2/3,jt.TOP_LEFT):new Ge(r.left+Ae*2/3,r.top+N*2/3),this.topRightBorderDoubleInnerBox=A>0||c>0?$t(r.left+D,r.top+N*2/3,u-X*2/3,f-N*2/3,jt.TOP_RIGHT):new Ge(r.left+r.width-X*2/3,r.top+N*2/3),this.bottomRightBorderDoubleInnerBox=y>0||b>0?$t(r.left+J,r.top+te,y-X*2/3,b-Be*2/3,jt.BOTTOM_RIGHT):new Ge(r.left+r.width-X*2/3,r.top+r.height-Be*2/3),this.bottomLeftBorderDoubleInnerBox=S>0||L>0?$t(r.left+Ae*2/3,r.top+M,S-Ae*2/3,L-Be*2/3,jt.BOTTOM_LEFT):new Ge(r.left+Ae*2/3,r.top+r.height-Be*2/3),this.topLeftBorderStroke=A>0||c>0?$t(r.left+Ae/2,r.top+N/2,A-Ae/2,c-N/2,jt.TOP_LEFT):new Ge(r.left+Ae/2,r.top+N/2),this.topRightBorderStroke=A>0||c>0?$t(r.left+D,r.top+N/2,u-X/2,f-N/2,jt.TOP_RIGHT):new Ge(r.left+r.width-X/2,r.top+N/2),this.bottomRightBorderStroke=y>0||b>0?$t(r.left+J,r.top+te,y-X/2,b-Be/2,jt.BOTTOM_RIGHT):new Ge(r.left+r.width-X/2,r.top+r.height-Be/2),this.bottomLeftBorderStroke=S>0||L>0?$t(r.left+Ae/2,r.top+M,S-Ae/2,L-Be/2,jt.BOTTOM_LEFT):new Ge(r.left+Ae/2,r.top+r.height-Be/2),this.topLeftBorderBox=A>0||c>0?$t(r.left,r.top,A,c,jt.TOP_LEFT):new Ge(r.left,r.top),this.topRightBorderBox=u>0||f>0?$t(r.left+D,r.top,u,f,jt.TOP_RIGHT):new Ge(r.left+r.width,r.top),this.bottomRightBorderBox=y>0||b>0?$t(r.left+J,r.top+te,y,b,jt.BOTTOM_RIGHT):new Ge(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=S>0||L>0?$t(r.left,r.top+M,S,L,jt.BOTTOM_LEFT):new Ge(r.left,r.top+r.height),this.topLeftPaddingBox=A>0||c>0?$t(r.left+Ae,r.top+N,Math.max(0,A-Ae),Math.max(0,c-N),jt.TOP_LEFT):new Ge(r.left+Ae,r.top+N),this.topRightPaddingBox=u>0||f>0?$t(r.left+Math.min(D,r.width-X),r.top+N,D>r.width+X?0:Math.max(0,u-X),Math.max(0,f-N),jt.TOP_RIGHT):new Ge(r.left+r.width-X,r.top+N),this.bottomRightPaddingBox=y>0||b>0?$t(r.left+Math.min(J,r.width-Ae),r.top+Math.min(te,r.height-Be),Math.max(0,y-X),Math.max(0,b-Be),jt.BOTTOM_RIGHT):new Ge(r.left+r.width-X,r.top+r.height-Be),this.bottomLeftPaddingBox=S>0||L>0?$t(r.left+Ae,r.top+Math.min(M,r.height-Be),Math.max(0,S-Ae),Math.max(0,L-Be),jt.BOTTOM_LEFT):new Ge(r.left+Ae,r.top+r.height-Be),this.topLeftContentBox=A>0||c>0?$t(r.left+Ae+pe,r.top+N+le,Math.max(0,A-(Ae+pe)),Math.max(0,c-(N+le)),jt.TOP_LEFT):new Ge(r.left+Ae+pe,r.top+N+le),this.topRightContentBox=u>0||f>0?$t(r.left+Math.min(D,r.width+Ae+pe),r.top+N+le,D>r.width+Ae+pe?0:u-Ae+pe,f-(N+le),jt.TOP_RIGHT):new Ge(r.left+r.width-(X+G),r.top+N+le),this.bottomRightContentBox=y>0||b>0?$t(r.left+Math.min(J,r.width-(Ae+pe)),r.top+Math.min(te,r.height+N+le),Math.max(0,y-(X+G)),b-(Be+se),jt.BOTTOM_RIGHT):new Ge(r.left+r.width-(X+G),r.top+r.height-(Be+se)),this.bottomLeftContentBox=S>0||L>0?$t(r.left+Ae+pe,r.top+M,Math.max(0,S-(Ae+pe)),L-(Be+se),jt.BOTTOM_LEFT):new Ge(r.left+Ae+pe,r.top+r.height-(Be+se))}return i}(),jt;(function(i){i[i.TOP_LEFT=0]="TOP_LEFT",i[i.TOP_RIGHT=1]="TOP_RIGHT",i[i.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",i[i.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(jt||(jt={}));var $t=function(i,e,t,r,a){var A=4*((Math.sqrt(2)-1)/3),c=t*A,p=r*A,u=i+t,f=e+r;switch(a){case jt.TOP_LEFT:return new ec(new Ge(i,f),new Ge(i,f-p),new Ge(u-c,e),new Ge(u,e));case jt.TOP_RIGHT:return new ec(new Ge(i,e),new Ge(i+c,e),new Ge(u,f-p),new Ge(u,f));case jt.BOTTOM_RIGHT:return new ec(new Ge(u,e),new Ge(u,e+p),new Ge(i+c,f),new Ge(i,f));case jt.BOTTOM_LEFT:default:return new ec(new Ge(u,f),new Ge(u-c,f),new Ge(i,e+p),new Ge(i,e))}},Oc=function(i){return[i.topLeftBorderBox,i.topRightBorderBox,i.bottomRightBorderBox,i.bottomLeftBorderBox]},fU=function(i){return[i.topLeftContentBox,i.topRightContentBox,i.bottomRightContentBox,i.bottomLeftContentBox]},zc=function(i){return[i.topLeftPaddingBox,i.topRightPaddingBox,i.bottomRightPaddingBox,i.bottomLeftPaddingBox]},mU=function(){function i(e,t,r){this.offsetX=e,this.offsetY=t,this.matrix=r,this.type=0,this.target=6}return i}(),tc=function(){function i(e,t){this.path=e,this.target=t,this.type=1}return i}(),xU=function(){function i(e){this.opacity=e,this.type=2,this.target=6}return i}(),yU=function(i){return i.type===0},Gw=function(i){return i.type===1},bU=function(i){return i.type===2},yy=function(i,e){return i.length===e.length?i.some(function(t,r){return t===e[r]}):!1},vU=function(i,e,t,r,a){return i.map(function(A,c){switch(c){case 0:return A.add(e,t);case 1:return A.add(e+r,t);case 2:return A.add(e+r,t+a);case 3:return A.add(e,t+a)}return A})},Vw=function(){function i(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return i}(),$w=function(){function i(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new gU(this.container),this.container.styles.opacity<1&&this.effects.push(new xU(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new mU(r,a,A))}if(this.container.styles.overflowX!==0){var c=Oc(this.curves),p=zc(this.curves);yy(c,p)?this.effects.push(new tc(c,6)):(this.effects.push(new tc(c,2)),this.effects.push(new tc(p,4)))}}return i.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,a=this.effects.slice(0);r;){var A=r.effects.filter(function(u){return!Gw(u)});if(t||r.container.styles.position!==0||!r.parent){if(a.unshift.apply(a,A),t=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var c=Oc(r.curves),p=zc(r.curves);yy(c,p)||a.unshift(new tc(p,6))}}else a.unshift.apply(a,A);r=r.parent}return a.filter(function(u){return mn(u.target,e)})},i}(),Bh=function(i,e,t,r){i.container.elements.forEach(function(a){var A=mn(a.flags,4),c=mn(a.flags,2),p=new $w(a,i);mn(a.styles.display,2048)&&r.push(p);var u=mn(a.flags,8)?[]:r;if(A||c){var f=A||a.styles.isPositioned()?t:e,g=new Vw(p);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var y=a.styles.zIndex.order;if(y<0){var b=0;f.negativeZIndex.some(function(S,L){return y>S.element.container.styles.zIndex.order?(b=L,!1):b>0}),f.negativeZIndex.splice(b,0,g)}else if(y>0){var H=0;f.positiveZIndex.some(function(S,L){return y>=S.element.container.styles.zIndex.order?(H=L+1,!1):H>0}),f.positiveZIndex.splice(H,0,g)}else f.zeroOrAutoZIndexOrTransformedOrOpacity.push(g)}else a.styles.isFloating()?f.nonPositionedFloats.push(g):f.nonPositionedInlineLevel.push(g);Bh(p,g,A?g:t,u)}else a.styles.isInlineLevel()?e.inlineLevel.push(p):e.nonInlineLevel.push(p),Bh(p,e,t,u);mn(a.flags,8)&&Yw(a,u)})},Yw=function(i,e){for(var t=i instanceof yh?i.start:1,r=i instanceof yh?i.reversed:!1,a=0;a<e.length;a++){var A=e[a];A.container instanceof Uw&&typeof A.container.value=="number"&&A.container.value!==0&&(t=A.container.value),A.listValue=bA(t,A.container.styles.listStyleType,!0),t+=r?-1:1}},wU=function(i){var e=new $w(i,null),t=new Vw(e),r=[];return Bh(e,t,t,r),Yw(e.container,r),t},by=function(i,e){switch(e){case 0:return Fr(i.topLeftBorderBox,i.topLeftPaddingBox,i.topRightBorderBox,i.topRightPaddingBox);case 1:return Fr(i.topRightBorderBox,i.topRightPaddingBox,i.bottomRightBorderBox,i.bottomRightPaddingBox);case 2:return Fr(i.bottomRightBorderBox,i.bottomRightPaddingBox,i.bottomLeftBorderBox,i.bottomLeftPaddingBox);case 3:default:return Fr(i.bottomLeftBorderBox,i.bottomLeftPaddingBox,i.topLeftBorderBox,i.topLeftPaddingBox)}},CU=function(i,e){switch(e){case 0:return Fr(i.topLeftBorderBox,i.topLeftBorderDoubleOuterBox,i.topRightBorderBox,i.topRightBorderDoubleOuterBox);case 1:return Fr(i.topRightBorderBox,i.topRightBorderDoubleOuterBox,i.bottomRightBorderBox,i.bottomRightBorderDoubleOuterBox);case 2:return Fr(i.bottomRightBorderBox,i.bottomRightBorderDoubleOuterBox,i.bottomLeftBorderBox,i.bottomLeftBorderDoubleOuterBox);case 3:default:return Fr(i.bottomLeftBorderBox,i.bottomLeftBorderDoubleOuterBox,i.topLeftBorderBox,i.topLeftBorderDoubleOuterBox)}},BU=function(i,e){switch(e){case 0:return Fr(i.topLeftBorderDoubleInnerBox,i.topLeftPaddingBox,i.topRightBorderDoubleInnerBox,i.topRightPaddingBox);case 1:return Fr(i.topRightBorderDoubleInnerBox,i.topRightPaddingBox,i.bottomRightBorderDoubleInnerBox,i.bottomRightPaddingBox);case 2:return Fr(i.bottomRightBorderDoubleInnerBox,i.bottomRightPaddingBox,i.bottomLeftBorderDoubleInnerBox,i.bottomLeftPaddingBox);case 3:default:return Fr(i.bottomLeftBorderDoubleInnerBox,i.bottomLeftPaddingBox,i.topLeftBorderDoubleInnerBox,i.topLeftPaddingBox)}},SU=function(i,e){switch(e){case 0:return nc(i.topLeftBorderStroke,i.topRightBorderStroke);case 1:return nc(i.topRightBorderStroke,i.bottomRightBorderStroke);case 2:return nc(i.bottomRightBorderStroke,i.bottomLeftBorderStroke);case 3:default:return nc(i.bottomLeftBorderStroke,i.topLeftBorderStroke)}},nc=function(i,e){var t=[];return Tr(i)?t.push(i.subdivide(.5,!1)):t.push(i),Tr(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Fr=function(i,e,t,r){var a=[];return Tr(i)?a.push(i.subdivide(.5,!1)):a.push(i),Tr(t)?a.push(t.subdivide(.5,!0)):a.push(t),Tr(r)?a.push(r.subdivide(.5,!0).reverse()):a.push(r),Tr(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},Jw=function(i){var e=i.bounds,t=i.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Kc=function(i){var e=i.styles,t=i.bounds,r=Ot(e.paddingLeft,t.width),a=Ot(e.paddingRight,t.width),A=Ot(e.paddingTop,t.width),c=Ot(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+a),-(e.borderTopWidth+e.borderBottomWidth+A+c))},IU=function(i,e){return i===0?e.bounds:i===2?Kc(e):Jw(e)},EU=function(i,e){return i===0?e.bounds:i===2?Kc(e):Jw(e)},Lp=function(i,e,t){var r=IU(Ps(i.styles.backgroundOrigin,e),i),a=EU(Ps(i.styles.backgroundClip,e),i),A=kU(Ps(i.styles.backgroundSize,e),t,r),c=A[0],p=A[1],u=Xa(Ps(i.styles.backgroundPosition,e),r.width-c,r.height-p),f=TU(Ps(i.styles.backgroundRepeat,e),u,A,r,a),g=Math.round(r.left+u[0]),y=Math.round(r.top+u[1]);return[f,g,y,c,p]},Rs=function(i){return Dt(i)&&i.value===Gs.AUTO},rc=function(i){return typeof i=="number"},kU=function(i,e,t){var r=e[0],a=e[1],A=e[2],c=i[0],p=i[1];if(!c)return[0,0];if(cn(c)&&p&&cn(p))return[Ot(c,t.width),Ot(p,t.height)];var u=rc(A);if(Dt(c)&&(c.value===Gs.CONTAIN||c.value===Gs.COVER)){if(rc(A)){var f=t.width/t.height;return f<A!=(c.value===Gs.COVER)?[t.width,t.width/A]:[t.height*A,t.height]}return[t.width,t.height]}var g=rc(r),y=rc(a),b=g||y;if(Rs(c)&&(!p||Rs(p))){if(g&&y)return[r,a];if(!u&&!b)return[t.width,t.height];if(b&&u){var H=g?r:a*A,S=y?a:r/A;return[H,S]}var L=g?r:t.width,Q=y?a:t.height;return[L,Q]}if(u){var V=0,D=0;return cn(c)?V=Ot(c,t.width):cn(p)&&(D=Ot(p,t.height)),Rs(c)?V=D*A:(!p||Rs(p))&&(D=V/A),[V,D]}var te=null,J=null;if(cn(c)?te=Ot(c,t.width):p&&cn(p)&&(J=Ot(p,t.height)),te!==null&&(!p||Rs(p))&&(J=g&&y?te/r*a:t.height),J!==null&&Rs(c)&&(te=g&&y?J/a*r:t.width),te!==null&&J!==null)return[te,J];throw new Error("Unable to calculate background-size for element")},Ps=function(i,e){var t=i[e];return typeof t>"u"?i[0]:t},TU=function(i,e,t,r,a){var A=e[0],c=e[1],p=t[0],u=t[1];switch(i){case 2:return[new Ge(Math.round(r.left),Math.round(r.top+c)),new Ge(Math.round(r.left+r.width),Math.round(r.top+c)),new Ge(Math.round(r.left+r.width),Math.round(u+r.top+c)),new Ge(Math.round(r.left),Math.round(u+r.top+c))];case 3:return[new Ge(Math.round(r.left+A),Math.round(r.top)),new Ge(Math.round(r.left+A+p),Math.round(r.top)),new Ge(Math.round(r.left+A+p),Math.round(r.height+r.top)),new Ge(Math.round(r.left+A),Math.round(r.height+r.top))];case 1:return[new Ge(Math.round(r.left+A),Math.round(r.top+c)),new Ge(Math.round(r.left+A+p),Math.round(r.top+c)),new Ge(Math.round(r.left+A+p),Math.round(r.top+c+u)),new Ge(Math.round(r.left+A),Math.round(r.top+c+u))];default:return[new Ge(Math.round(a.left),Math.round(a.top)),new Ge(Math.round(a.left+a.width),Math.round(a.top)),new Ge(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Ge(Math.round(a.left),Math.round(a.height+a.top))]}},jU="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",vy="Hidden Text",FU=function(){function i(e){this._data={},this._document=e}return i.prototype.parseMetrics=function(e,t){var r=this._document.createElement("div"),a=this._document.createElement("img"),A=this._document.createElement("span"),c=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",c.appendChild(r),a.src=jU,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=t,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode(vy)),r.appendChild(A),r.appendChild(a);var p=a.offsetTop-A.offsetTop+2;r.removeChild(A),r.appendChild(this._document.createTextNode(vy)),r.style.lineHeight="normal",a.style.verticalAlign="super";var u=a.offsetTop-r.offsetTop+2;return c.removeChild(r),{baseline:p,middle:u}},i.prototype.getMetrics=function(e,t){var r=e+" "+t;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,t)),this._data[r]},i}(),Xw=function(){function i(e,t){this.context=e,this.options=t}return i}(),UU=1e4,QU=function(i){Vr(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a._activeEffects=[],a.canvas=r.canvas?r.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),r.canvas||(a.canvas.width=Math.floor(r.width*r.scale),a.canvas.height=Math.floor(r.height*r.scale),a.canvas.style.width=r.width+"px",a.canvas.style.height=r.height+"px"),a.fontMetrics=new FU(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-r.x,-r.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),a}return e.prototype.applyEffects=function(t){for(var r=this;this._activeEffects.length;)this.popEffect();t.forEach(function(a){return r.applyEffect(a)})},e.prototype.applyEffect=function(t){this.ctx.save(),bU(t)&&(this.ctx.globalAlpha=t.opacity),yU(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),Gw(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Yn(this,void 0,void 0,function(){var r;return On(this,function(a){switch(a.label){case 0:return r=t.element.container.styles,r.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return Yn(this,void 0,void 0,function(){return On(this,function(r){switch(r.label){case 0:if(mn(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,r,a){var A=this;if(r===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+a);else{var c=Og(t.text);c.reduce(function(p,u){return A.ctx.fillText(u,p,t.bounds.top+a),p+A.ctx.measureText(u).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var r=t.fontVariant.filter(function(c){return c==="normal"||c==="small-caps"}).join(""),a=PU(t.fontFamily).join(", "),A=BA(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,r,t.fontWeight,A,a].join(" "),a,A]},e.prototype.renderTextNode=function(t,r){return Yn(this,void 0,void 0,function(){var a,A,c,p,u,f,g,y,b=this;return On(this,function(H){return a=this.createFontStyle(r),A=a[0],c=a[1],p=a[2],this.ctx.font=A,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",u=this.fontMetrics.getMetrics(c,p),f=u.baseline,g=u.middle,y=r.paintOrder,t.textBounds.forEach(function(S){y.forEach(function(L){switch(L){case 0:b.ctx.fillStyle=Sn(r.color),b.renderTextWithLetterSpacing(S,r.letterSpacing,f);var Q=r.textShadow;Q.length&&S.text.trim().length&&(Q.slice(0).reverse().forEach(function(V){b.ctx.shadowColor=Sn(V.color),b.ctx.shadowOffsetX=V.offsetX.number*b.options.scale,b.ctx.shadowOffsetY=V.offsetY.number*b.options.scale,b.ctx.shadowBlur=V.blur.number,b.renderTextWithLetterSpacing(S,r.letterSpacing,f)}),b.ctx.shadowColor="",b.ctx.shadowOffsetX=0,b.ctx.shadowOffsetY=0,b.ctx.shadowBlur=0),r.textDecorationLine.length&&(b.ctx.fillStyle=Sn(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(V){switch(V){case 1:b.ctx.fillRect(S.bounds.left,Math.round(S.bounds.top+f),S.bounds.width,1);break;case 2:b.ctx.fillRect(S.bounds.left,Math.round(S.bounds.top),S.bounds.width,1);break;case 3:b.ctx.fillRect(S.bounds.left,Math.ceil(S.bounds.top+g),S.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&S.text.trim().length&&(b.ctx.strokeStyle=Sn(r.webkitTextStrokeColor),b.ctx.lineWidth=r.webkitTextStrokeWidth,b.ctx.lineJoin=window.chrome?"miter":"round",b.ctx.strokeText(S.text,S.bounds.left,S.bounds.top+f)),b.ctx.strokeStyle="",b.ctx.lineWidth=0,b.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,r,a){if(a&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var A=Kc(t),c=zc(r);this.path(c),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,t.intrinsicWidth,t.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Yn(this,void 0,void 0,function(){var r,a,A,c,p,u,D,D,f,g,y,b,J,H,S,M,L,Q,V,D,te,J,M;return On(this,function(N){switch(N.label){case 0:this.applyEffects(t.getEffects(4)),r=t.container,a=t.curves,A=r.styles,c=0,p=r.textNodes,N.label=1;case 1:return c<p.length?(u=p[c],[4,this.renderTextNode(u,A)]):[3,4];case 2:N.sent(),N.label=3;case 3:return c++,[3,1];case 4:if(!(r instanceof Tw))return[3,8];N.label=5;case 5:return N.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return D=N.sent(),this.renderReplacedElement(r,a,D),[3,8];case 7:return N.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof jw&&this.renderReplacedElement(r,a,r.canvas),!(r instanceof Fw))return[3,12];N.label=9;case 9:return N.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return D=N.sent(),this.renderReplacedElement(r,a,D),[3,12];case 11:return N.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof Mw&&r.tree?(f=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,f.render(r.tree)]):[3,14];case 13:g=N.sent(),r.width&&r.height&&this.ctx.drawImage(g,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),N.label=14;case 14:if(r instanceof zg&&(y=Math.min(r.bounds.width,r.bounds.height),r.type===Pc?r.checked&&(this.ctx.save(),this.path([new Ge(r.bounds.left+y*.39363,r.bounds.top+y*.79),new Ge(r.bounds.left+y*.16,r.bounds.top+y*.5549),new Ge(r.bounds.left+y*.27347,r.bounds.top+y*.44071),new Ge(r.bounds.left+y*.39694,r.bounds.top+y*.5649),new Ge(r.bounds.left+y*.72983,r.bounds.top+y*.23),new Ge(r.bounds.left+y*.84,r.bounds.top+y*.34085),new Ge(r.bounds.left+y*.39363,r.bounds.top+y*.79)]),this.ctx.fillStyle=Sn(Ay),this.ctx.fill(),this.ctx.restore()):r.type===Hc&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+y/2,r.bounds.top+y/2,y/4,0,Math.PI*2,!0),this.ctx.fillStyle=Sn(Ay),this.ctx.fill(),this.ctx.restore())),RU(r)&&r.value.length){switch(b=this.createFontStyle(A),J=b[0],H=b[1],S=this.fontMetrics.getMetrics(J,H).baseline,this.ctx.font=J,this.ctx.fillStyle=Sn(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=LU(r.styles.textAlign),M=Kc(r),L=0,r.styles.textAlign){case 1:L+=M.width/2;break;case 2:L+=M.width;break}Q=M.add(L,0,0,-M.height/2+1),this.ctx.save(),this.path([new Ge(M.left,M.top),new Ge(M.left+M.width,M.top),new Ge(M.left+M.width,M.top+M.height),new Ge(M.left,M.top+M.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new AA(r.value,Q),A.letterSpacing,S),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!mn(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(V=r.styles.listStyleImage,V.type!==0)return[3,18];D=void 0,te=V.url,N.label=15;case 15:return N.trys.push([15,17,,18]),[4,this.context.cache.match(te)];case 16:return D=N.sent(),this.ctx.drawImage(D,r.bounds.left-(D.width+10),r.bounds.top),[3,18];case 17:return N.sent(),this.context.logger.error("Error loading list-style-image "+te),[3,18];case 18:return[3,20];case 19:t.listValue&&r.styles.listStyleType!==-1&&(J=this.createFontStyle(A)[0],this.ctx.font=J,this.ctx.fillStyle=Sn(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",M=new Qo(r.bounds.left,r.bounds.top+Ot(r.styles.paddingTop,r.bounds.width),r.bounds.width,Wx(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new AA(t.listValue,M),A.letterSpacing,Wx(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),N.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return Yn(this,void 0,void 0,function(){var r,a,V,A,c,V,p,u,V,f,g,V,y,b,V,H,S,V,L,Q,V;return On(this,function(D){switch(D.label){case 0:if(mn(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:D.sent(),r=0,a=t.negativeZIndex,D.label=2;case 2:return r<a.length?(V=a[r],[4,this.renderStack(V)]):[3,5];case 3:D.sent(),D.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:D.sent(),A=0,c=t.nonInlineLevel,D.label=7;case 7:return A<c.length?(V=c[A],[4,this.renderNode(V)]):[3,10];case 8:D.sent(),D.label=9;case 9:return A++,[3,7];case 10:p=0,u=t.nonPositionedFloats,D.label=11;case 11:return p<u.length?(V=u[p],[4,this.renderStack(V)]):[3,14];case 12:D.sent(),D.label=13;case 13:return p++,[3,11];case 14:f=0,g=t.nonPositionedInlineLevel,D.label=15;case 15:return f<g.length?(V=g[f],[4,this.renderStack(V)]):[3,18];case 16:D.sent(),D.label=17;case 17:return f++,[3,15];case 18:y=0,b=t.inlineLevel,D.label=19;case 19:return y<b.length?(V=b[y],[4,this.renderNode(V)]):[3,22];case 20:D.sent(),D.label=21;case 21:return y++,[3,19];case 22:H=0,S=t.zeroOrAutoZIndexOrTransformedOrOpacity,D.label=23;case 23:return H<S.length?(V=S[H],[4,this.renderStack(V)]):[3,26];case 24:D.sent(),D.label=25;case 25:return H++,[3,23];case 26:L=0,Q=t.positiveZIndex,D.label=27;case 27:return L<Q.length?(V=Q[L],[4,this.renderStack(V)]):[3,30];case 28:D.sent(),D.label=29;case 29:return L++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var r=this;t.forEach(function(a,A){var c=Tr(a)?a.start:a;A===0?r.ctx.moveTo(c.x,c.y):r.ctx.lineTo(c.x,c.y),Tr(a)&&r.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(t,r,a,A){this.path(t),this.ctx.fillStyle=r,this.ctx.translate(a,A),this.ctx.fill(),this.ctx.translate(-a,-A)},e.prototype.resizeImage=function(t,r,a){var A;if(t.width===r&&t.height===a)return t;var c=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,p=c.createElement("canvas");p.width=Math.max(1,r),p.height=Math.max(1,a);var u=p.getContext("2d");return u.drawImage(t,0,0,t.width,t.height,0,0,r,a),p},e.prototype.renderBackgroundImage=function(t){return Yn(this,void 0,void 0,function(){var r,a,A,c,p,u;return On(this,function(f){switch(f.label){case 0:r=t.styles.backgroundImage.length-1,a=function(g){var y,b,H,le,de,Ue,pe,Me,Be,S,le,de,Ue,pe,Me,L,Q,V,D,te,J,M,N,X,Be,Ae,le,G,se,pe,Me,be,de,Ue,me,F,re,P,oe,je,U,B;return On(this,function(j){switch(j.label){case 0:if(g.type!==0)return[3,5];y=void 0,b=g.url,j.label=1;case 1:return j.trys.push([1,3,,4]),[4,A.context.cache.match(b)];case 2:return y=j.sent(),[3,4];case 3:return j.sent(),A.context.logger.error("Error loading background-image "+b),[3,4];case 4:return y&&(H=Lp(t,r,[y.width,y.height,y.width/y.height]),le=H[0],de=H[1],Ue=H[2],pe=H[3],Me=H[4],Be=A.ctx.createPattern(A.resizeImage(y,pe,Me),"repeat"),A.renderRepeat(le,Be,de,Ue)),[3,6];case 5:yT(g)?(S=Lp(t,r,[null,null,null]),le=S[0],de=S[1],Ue=S[2],pe=S[3],Me=S[4],L=hT(g.angle,pe,Me),Q=L[0],V=L[1],D=L[2],te=L[3],J=L[4],M=document.createElement("canvas"),M.width=pe,M.height=Me,N=M.getContext("2d"),X=N.createLinearGradient(V,te,D,J),zx(g.stops,Q).forEach(function(_){return X.addColorStop(_.stop,Sn(_.color))}),N.fillStyle=X,N.fillRect(0,0,pe,Me),pe>0&&Me>0&&(Be=A.ctx.createPattern(M,"repeat"),A.renderRepeat(le,Be,de,Ue))):bT(g)&&(Ae=Lp(t,r,[null,null,null]),le=Ae[0],G=Ae[1],se=Ae[2],pe=Ae[3],Me=Ae[4],be=g.position.length===0?[Hg]:g.position,de=Ot(be[0],pe),Ue=Ot(be[be.length-1],Me),me=gT(g,de,Ue,pe,Me),F=me[0],re=me[1],F>0&&re>0&&(P=A.ctx.createRadialGradient(G+de,se+Ue,0,G+de,se+Ue,F),zx(g.stops,F*2).forEach(function(_){return P.addColorStop(_.stop,Sn(_.color))}),A.path(le),A.ctx.fillStyle=P,F!==re?(oe=t.bounds.left+.5*t.bounds.width,je=t.bounds.top+.5*t.bounds.height,U=re/F,B=1/U,A.ctx.save(),A.ctx.translate(oe,je),A.ctx.transform(1,0,0,U,0,0),A.ctx.translate(-oe,-je),A.ctx.fillRect(G,B*(se-je)+je,pe,Me*B),A.ctx.restore()):A.ctx.fill())),j.label=6;case 6:return r--,[2]}})},A=this,c=0,p=t.styles.backgroundImage.slice(0).reverse(),f.label=1;case 1:return c<p.length?(u=p[c],[5,a(u)]):[3,4];case 2:f.sent(),f.label=3;case 3:return c++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,r,a){return Yn(this,void 0,void 0,function(){return On(this,function(A){return this.path(by(a,r)),this.ctx.fillStyle=Sn(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,r,a,A){return Yn(this,void 0,void 0,function(){var c,p;return On(this,function(u){switch(u.label){case 0:return r<3?[4,this.renderSolidBorder(t,a,A)]:[3,2];case 1:return u.sent(),[2];case 2:return c=CU(A,a),this.path(c),this.ctx.fillStyle=Sn(t),this.ctx.fill(),p=BU(A,a),this.path(p),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return Yn(this,void 0,void 0,function(){var r,a,A,c,p,u,f,g,y=this;return On(this,function(b){switch(b.label){case 0:return this.applyEffects(t.getEffects(2)),r=t.container.styles,a=!xi(r.backgroundColor)||r.backgroundImage.length,A=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],c=MU(Ps(r.backgroundClip,0),t.curves),a||r.boxShadow.length?(this.ctx.save(),this.path(c),this.ctx.clip(),xi(r.backgroundColor)||(this.ctx.fillStyle=Sn(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:b.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(H){y.ctx.save();var S=Oc(t.curves),L=H.inset?0:UU,Q=vU(S,-L+(H.inset?1:-1)*H.spread.number,(H.inset?1:-1)*H.spread.number,H.spread.number*(H.inset?-2:2),H.spread.number*(H.inset?-2:2));H.inset?(y.path(S),y.ctx.clip(),y.mask(Q)):(y.mask(S),y.ctx.clip(),y.path(Q)),y.ctx.shadowOffsetX=H.offsetX.number+L,y.ctx.shadowOffsetY=H.offsetY.number,y.ctx.shadowColor=Sn(H.color),y.ctx.shadowBlur=H.blur.number,y.ctx.fillStyle=H.inset?Sn(H.color):"rgba(0,0,0,1)",y.ctx.fill(),y.ctx.restore()}),b.label=2;case 2:p=0,u=0,f=A,b.label=3;case 3:return u<f.length?(g=f[u],g.style!==0&&!xi(g.color)&&g.width>0?g.style!==2?[3,5]:[4,this.renderDashedDottedBorder(g.color,g.width,p,t.curves,2)]:[3,11]):[3,13];case 4:return b.sent(),[3,11];case 5:return g.style!==3?[3,7]:[4,this.renderDashedDottedBorder(g.color,g.width,p,t.curves,3)];case 6:return b.sent(),[3,11];case 7:return g.style!==4?[3,9]:[4,this.renderDoubleBorder(g.color,g.width,p,t.curves)];case 8:return b.sent(),[3,11];case 9:return[4,this.renderSolidBorder(g.color,p,t.curves)];case 10:b.sent(),b.label=11;case 11:p++,b.label=12;case 12:return u++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,r,a,A,c){return Yn(this,void 0,void 0,function(){var p,u,f,g,y,b,H,S,L,Q,V,D,te,J,M,N,M,N;return On(this,function(X){return this.ctx.save(),p=SU(A,a),u=by(A,a),c===2&&(this.path(u),this.ctx.clip()),Tr(u[0])?(f=u[0].start.x,g=u[0].start.y):(f=u[0].x,g=u[0].y),Tr(u[1])?(y=u[1].end.x,b=u[1].end.y):(y=u[1].x,b=u[1].y),a===0||a===2?H=Math.abs(f-y):H=Math.abs(g-b),this.ctx.beginPath(),c===3?this.formatPath(p):this.formatPath(u.slice(0,2)),S=r<3?r*3:r*2,L=r<3?r*2:r,c===3&&(S=r,L=r),Q=!0,H<=S*2?Q=!1:H<=S*2+L?(V=H/(2*S+L),S*=V,L*=V):(D=Math.floor((H+L)/(S+L)),te=(H-D*S)/(D-1),J=(H-(D+1)*S)/D,L=J<=0||Math.abs(L-te)<Math.abs(L-J)?te:J),Q&&(c===3?this.ctx.setLineDash([0,S+L]):this.ctx.setLineDash([S,L])),c===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Sn(t),this.ctx.stroke(),this.ctx.setLineDash([]),c===2&&(Tr(u[0])&&(M=u[3],N=u[0],this.ctx.beginPath(),this.formatPath([new Ge(M.end.x,M.end.y),new Ge(N.start.x,N.start.y)]),this.ctx.stroke()),Tr(u[1])&&(M=u[1],N=u[2],this.ctx.beginPath(),this.formatPath([new Ge(M.end.x,M.end.y),new Ge(N.start.x,N.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return Yn(this,void 0,void 0,function(){var r;return On(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Sn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=wU(t),[4,this.renderStack(r)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(Xw),RU=function(i){return i instanceof Rw||i instanceof Qw?!0:i instanceof zg&&i.type!==Hc&&i.type!==Pc},MU=function(i,e){switch(i){case 0:return Oc(e);case 2:return fU(e);case 1:default:return zc(e)}},LU=function(i){switch(i){case 1:return"center";case 2:return"right";case 0:default:return"left"}},DU=["-apple-system","system-ui"],PU=function(i){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?i.filter(function(e){return DU.indexOf(e)===-1}):i},HU=function(i){Vr(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a.canvas=r.canvas?r.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=r,a.canvas.width=Math.floor(r.width*r.scale),a.canvas.height=Math.floor(r.height*r.scale),a.canvas.style.width=r.width+"px",a.canvas.style.height=r.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-r.x,-r.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),a}return e.prototype.render=function(t){return Yn(this,void 0,void 0,function(){var r,a;return On(this,function(A){switch(A.label){case 0:return r=xh(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,NU(r)];case 1:return a=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Sn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(Xw),NU=function(i){return new Promise(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(i))})},_U=function(){function i(e){var t=e.id,r=e.enabled;this.id=t,this.enabled=r,this.start=Date.now()}return i.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ml([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},i.prototype.getTime=function(){return Date.now()-this.start},i.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ml([this.id,this.getTime()+"ms"],e))},i.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ml([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},i.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ml([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},i.instances={},i}(),OU=function(){function i(e,t){var r;this.windowBounds=t,this.instanceName="#"+i.instanceCount++,this.logger=new _U({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new AU(this,e)}return i.instanceCount=1,i}(),zU=function(i,e){return e===void 0&&(e={}),KU(i,e)};typeof window<"u"&&Ww.setContext(window);var KU=function(i,e){return Yn(void 0,void 0,void 0,function(){var t,r,a,A,c,p,u,f,g,y,b,H,S,L,Q,V,D,te,J,M,X,N,X,Be,Ae,le,G,se,pe,Me,be,de,Ue,me,F,re,P,oe,je,U;return On(this,function(B){switch(B.label){case 0:if(!i||typeof i!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=i.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(r=t.defaultView,!r)throw new Error("Document is not attached to a Window");return a={allowTaint:(Be=e.allowTaint)!==null&&Be!==void 0?Be:!1,imageTimeout:(Ae=e.imageTimeout)!==null&&Ae!==void 0?Ae:15e3,proxy:e.proxy,useCORS:(le=e.useCORS)!==null&&le!==void 0?le:!1},A=rh({logging:(G=e.logging)!==null&&G!==void 0?G:!0,cache:e.cache},a),c={windowWidth:(se=e.windowWidth)!==null&&se!==void 0?se:r.innerWidth,windowHeight:(pe=e.windowHeight)!==null&&pe!==void 0?pe:r.innerHeight,scrollX:(Me=e.scrollX)!==null&&Me!==void 0?Me:r.pageXOffset,scrollY:(be=e.scrollY)!==null&&be!==void 0?be:r.pageYOffset},p=new Qo(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),u=new OU(A,p),f=(de=e.foreignObjectRendering)!==null&&de!==void 0?de:!1,g={allowTaint:(Ue=e.allowTaint)!==null&&Ue!==void 0?Ue:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:f,copyStyles:f},u.logger.debug("Starting document clone with size "+p.width+"x"+p.height+" scrolled to "+-p.left+","+-p.top),y=new my(u,i,g),b=y.clonedReferenceElement,b?[4,y.toIFrame(t,p)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return H=B.sent(),S=Kg(b)||WF(b)?v4(b.ownerDocument):gd(u,b),L=S.width,Q=S.height,V=S.left,D=S.top,te=WU(u,b,e.backgroundColor),J={canvas:e.canvas,backgroundColor:te,scale:(F=(me=e.scale)!==null&&me!==void 0?me:r.devicePixelRatio)!==null&&F!==void 0?F:1,x:((re=e.x)!==null&&re!==void 0?re:0)+V,y:((P=e.y)!==null&&P!==void 0?P:0)+D,width:(oe=e.width)!==null&&oe!==void 0?oe:Math.ceil(L),height:(je=e.height)!==null&&je!==void 0?je:Math.ceil(Q)},f?(u.logger.debug("Document cloned, using foreign object rendering"),X=new HU(u,J),[4,X.render(b)]):[3,3];case 2:return M=B.sent(),[3,5];case 3:return u.logger.debug("Document cloned, element located at "+V+","+D+" with size "+L+"x"+Q+" using computed rendering"),u.logger.debug("Starting DOM parsing"),N=Dw(u,b),te===N.styles.backgroundColor&&(N.styles.backgroundColor=ko.TRANSPARENT),u.logger.debug("Starting renderer for element at "+J.x+","+J.y+" with size "+J.width+"x"+J.height),X=new QU(u,J),[4,X.render(N)];case 4:M=B.sent(),B.label=5;case 5:return(!((U=e.removeContainer)!==null&&U!==void 0)||U)&&(my.destroy(H)||u.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),u.logger.debug("Finished rendering"),[2,M]}})})},WU=function(i,e,t){var r=e.ownerDocument,a=r.documentElement?sA(i,getComputedStyle(r.documentElement).backgroundColor):ko.TRANSPARENT,A=r.body?sA(i,getComputedStyle(r.body).backgroundColor):ko.TRANSPARENT,c=typeof t=="string"?sA(i,t):t===null?ko.TRANSPARENT:4294967295;return e===r.documentElement?xi(a)?xi(A)?c:A:a:c};const GU=()=>{var br,Bi,os,SA;const[i,e]=m.useState([]),[t,r]=m.useState([]),[a,A]=m.useState(!0),[c,p]=m.useState(null),[u,f]=m.useState(!0),[g,y]=m.useState(null),[b,H]=m.useState(null),[S,L]=m.useState([]),[Q,V]=m.useState(null),D=m.useRef(null),[te,J]=m.useState(!1),[M,N]=m.useState(!1),[X,Be]=m.useState(!1),[Ae,le]=m.useState("Master Plan"),[G,se]=m.useState(!1),[pe,Me]=m.useState(null),[be,de]=m.useState([]),[Ue,me]=m.useState(!1),[F,re]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[P,oe]=m.useState(!1),[je,U]=m.useState(null),[B,j]=m.useState(""),[_,ve]=m.useState(()=>{try{const z=localStorage.getItem("emailsSentToday"),ce=localStorage.getItem("emailsSentDate"),Ee=new Date().toDateString();return ce!==Ee?(localStorage.setItem("emailsSentDate",Ee),localStorage.removeItem("emailsSentToday"),[]):z?JSON.parse(z):[]}catch{return[]}}),[k,O]=m.useState(!1),[Z,ke]=m.useState(null),[at,T]=m.useState(""),ge=m.useRef(null),He=m.useRef(null),ze=m.useRef(null),[mt,tt]=m.useState({}),[Se,ie]=m.useState(!1),[dt,ht]=m.useState({}),[R,Ut]=m.useState("timeline"),[Tt,I]=m.useState("all"),v=z=>{if(!z)return null;if(z instanceof Date)return z;if(typeof z=="number")return new Date(z);if(z=String(z).trim(),/^\d{4}-\d{2}-\d{2}/.test(z)){const[ce,Ee,Pe]=z.split("T")[0].split("-");return new Date(Number(ce),Number(Ee)-1,Number(Pe))}if(/^\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}$/.test(z)){const[ce,Ee,Pe]=z.split(/[\/\-]/);return new Date(Number(Pe),Number(Ee)-1,Number(ce))}return console.warn(" Unrecognized date format:",z),null},he=z=>{if(!z.fields)return null;const ce=[];return Object.entries(z.fields).forEach(([Ee,Pe])=>{Ee.toLowerCase()!=="status"&&Ee.toLowerCase()!=="lead"&&Ee.toLowerCase()!=="budget"&&Ee.toLowerCase()!=="completion"&&ce.push({name:Ee,status:Pe.status||Pe,endDate:Pe.endDate?v(Pe.endDate):null})}),ce.length===0?null:(ce.sort((Ee,Pe)=>Ee.endDate?Pe.endDate?Ee.endDate-Pe.endDate:1:-1),ce[ce.length-1].status)},[Ke,nt]=m.useState(0),[E,$]=m.useState(!1),Qe=S.length===1,W=Qe?S[0]:null,Y=Qe?[`Viewing project: ${W}`,`${i.filter(z=>z.project===W).length} plans in this project`,`${i.filter(z=>{if(z.project!==W)return!1;const ce=he(z);return ce&&!ce.toLowerCase().includes("complete")}).length} active plans`,`${i.filter(z=>{if(z.project!==W)return!1;const ce=he(z);return ce&&ce.toLowerCase().includes("complete")}).length} completed plans`]:["Overview of all master plans and milestones",`${i.length} total master plans`,`${i.filter(z=>{const ce=he(z);return ce&&!ce.toLowerCase().includes("complete")}).length} plans in progress`,`${i.filter(z=>{const ce=he(z);return ce&&ce.toLowerCase().includes("complete")}).length} plans completed`];m.useEffect(()=>{if(E)return;const z=setInterval(()=>{nt(ce=>(ce+1)%Y.length)},5e3);return()=>clearInterval(z)},[Y.length,E]),m.useEffect(()=>{if(!document.getElementById("fade-style")){const z=document.createElement("style");z.id="fade-style",z.innerHTML=`
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(2px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes tooltipFadeIn {
        from {
          opacity: 0;
          transform: translateY(-6px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .profile-tooltip-animated {
        animation: slideIn 0.2s ease-out;
      }
    `,document.head.appendChild(z)}},[]),m.useEffect(()=>{const z=document.getElementById("scrollbar-style");z&&z.remove();const ce=document.createElement("style");return ce.id="scrollbar-style",ce.innerHTML=F?`
      /* Dark mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #1e293b;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #475569;
        border-radius: 10px;
        border: 2px solid #1e293b;
      }

      ::-webkit-scrollbar-thumb:hover {
        background-color: #64748b;
      }

      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #475569 #1e293b;
      }
    `:`
      /* Light mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #cbd5e1;
        border-radius: 10px;
        border: 2px solid #f1f5f9;
      }

      ::-webkit-scrollbar-thumb:hover {
        background-color: #94a3b8;
      }

      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #cbd5e1 #f1f5f9;
      }
    `,document.head.appendChild(ce),()=>{ce.remove()}},[F]),m.useEffect(()=>{(async()=>{try{console.log(" Fetching master plans from /plan/master..."),A(!0);const ce=await Fe("/plan/master",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" API Response status:",ce.status),ce.ok){const Ee=await ce.json();console.log(" Master plans received:",Ee),console.log(" Total plans fetched:",Ee.length),e(Ee),r(Ee)}else{const Ee=await ce.text();console.error(" Failed to fetch master plans:",ce.status,Ee),console.error(" Unable to load master plans. Please ensure you are logged in."),e([]),r([])}}catch(ce){console.error(" Error fetching master plans:",ce),console.error(" Network error. Please check your connection and try again."),e([]),r([])}finally{A(!1)}})()},[]);const We=async()=>{try{const z=await Fe("/plan/locks/active",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(z.ok){const ce=await z.json();console.log(" Active locks:",ce.locks);const Ee={};ce.locks.forEach(Pe=>{Ee[Pe.planId]=Pe}),tt(Ee)}}catch(z){console.error(" Failed to fetch locks:",z)}},Ze=async()=>{if(!(!c||i.length===0))try{console.log(" Fetching plan permissions..."),console.log("MasterPlans available:",i);const z={};for(const ce of i)try{const Ee=await Fe(`/plan/master/${ce.id}/permission`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Ee.ok){const Pe=await Ee.json();z[ce.id]=Pe.permission||"viewer",console.log(`   Plan ${ce.id}: ${z[ce.id]}`)}else console.warn(`   Plan ${ce.id}: Permission endpoint returned ${Ee.status}, using fallback`),z[ce.id]="viewer"}catch(Ee){console.warn(`   Plan ${ce.id}: Permission fetch failed, using fallback`,Ee.message),z[ce.id]="viewer"}ht(z),console.log(" Permissions loaded:",z),Object.keys(z).length===0&&console.log(" No permissions loaded - using ownership-based access control")}catch(z){console.error(" Failed to fetch permissions:",z),console.log(" Falling back to ownership-based access control")}};m.useEffect(()=>{(async()=>{try{console.log(" Fetching user data from /user/profile...");const ce=await Fe("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" User API Response status:",ce.status),ce.ok){const Ee=await ce.json();console.log(" User data received:",Ee),p(Ee)}else{const Ee=await ce.text();console.error(" Failed to fetch user data:",ce.status,Ee),console.error(" Unable to load user profile. Please ensure you are logged in."),p(null)}}catch(ce){console.error(" Error fetching user data:",ce),console.error(" Network error. Please check your connection and try again."),p(null)}finally{f(!1)}})()},[]),m.useEffect(()=>{c&&i.length>0&&Ze()},[c,i]),m.useEffect(()=>{var Gt;if(!i.length||!Object.keys(dt).length)return;const z=new URLSearchParams(window.location.search),ce=z.get("planId"),Ee=z.get("milestone");if(!ce||!Ee)return;const Pe=i.find(lt=>String(lt.id)===String(ce));if(!Pe||dt[Pe.id]!=="owner")return;const xt=(Gt=Pe.fields)==null?void 0:Gt[Ee];xt&&(Ur(Pe,Ee,xt.status),window.history.replaceState({},document.title,window.location.pathname))},[i,dt]),m.useEffect(()=>{const z=async()=>{if(!c||i.length===0)return;const Ee=new Date;Ee.setHours(0,0,0,0);for(const Pe of i){const xt=dt[Pe.id];if(xt!=="owner"&&xt!=="editor")continue;let Gt=!1;const lt={...Pe.fields};if(Pe.fields&&Object.entries(Pe.fields).forEach(([rt,zt])=>{rt.toLowerCase()==="status"||rt.toLowerCase()==="lead"||rt.toLowerCase()==="budget"||rt.toLowerCase()==="completion"||zt.endDate&&v(zt.endDate)<Ee&&zt.status!=="Completed"&&zt.status!=="Delayed"&&(console.log(` Auto-marking ${rt} as Delayed (deadline passed)`),lt[rt]={...zt,status:"Delayed"},Gt=!0)}),Gt)try{if((await Fe(`/plan/master/${Pe.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:Pe.project,startDate:Pe.startDate,endDate:Pe.endDate,fields:lt})})).ok){console.log(` Auto-updated plan ${Pe.project} with Delayed status`);const zt=i.map(Zt=>Zt.id===Pe.id?{...Zt,fields:lt}:Zt);e(zt)}}catch(rt){console.error("Failed to auto-update delayed status:",rt)}}};z();const ce=setInterval(z,6e4*60);return()=>clearInterval(ce)},[c,i,dt]),m.useEffect(()=>{const z=async()=>{if(!c||i.length===0)return;const Ee=new Date,Pe=Ee.getHours(),xt=Ee.getMinutes();if(Pe!==8||xt<30||xt>31)return;const Gt=new Date;Gt.setHours(0,0,0,0);for(const lt of i){if(dt[lt.id]!=="owner")continue;const zt=`${lt.id}-${Gt.toDateString()}`;if(_.includes(zt))continue;const Zt=[];lt.fields&&Object.entries(lt.fields).forEach(([ft,Jt])=>{ft.toLowerCase()!=="status"&&ft.toLowerCase()!=="lead"&&ft.toLowerCase()!=="budget"&&ft.toLowerCase()!=="completion"&&Zt.push({name:ft,status:Jt})});const cr=new Date(lt.endDate);cr.setHours(0,0,0,0);const Yr=cr.getTime()===Gt.getTime(),Le=Zt.some(ft=>{var Jt;return!((Jt=ft.status)!=null&&Jt.toLowerCase().includes("complete"))});if(Yr&&Le)try{console.log(` Sending deadline reminder for plan: ${lt.project}`);const ft=await Fe("/notifications/milestone-deadline",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:lt.id,projectName:lt.project,milestones:Zt,dueDate:lt.endDate,userEmail:c.email,userName:`${c.firstName} ${c.lastName}`})});if(ft.ok){console.log(` Email sent successfully for ${lt.project}`);const Jt=[..._,zt];ve(Jt);try{localStorage.setItem("emailsSentToday",JSON.stringify(Jt))}catch(bn){console.error("Failed to save email sent status:",bn)}}else console.error(` Failed to send email for ${lt.project}:`,await ft.text())}catch(ft){console.error(` Error sending email for ${lt.project}:`,ft)}}};z();const ce=setInterval(z,6e4);return()=>clearInterval(ce)},[c,i,_,dt]),m.useEffect(()=>{const z=async()=>{if(!c||i.length===0||Object.keys(dt).length===0)return;const Ee=new Date;Ee.setHours(0,0,0,0);const Pe=new Date(Ee);Pe.setDate(Pe.getDate()+7);for(const xt of i){const Gt=dt[xt.id];Gt!=="owner"&&Gt!=="editor"||xt.fields&&Object.entries(xt.fields).forEach(async([lt,rt])=>{var Zt;if(lt.toLowerCase()==="status"||lt.toLowerCase()==="lead"||lt.toLowerCase()==="budget"||lt.toLowerCase()==="completion"||!rt.endDate)return;const zt=v(rt.endDate);if(zt.setHours(0,0,0,0),zt.getTime()===Pe.getTime()){if((Zt=rt.status)!=null&&Zt.toLowerCase().includes("complete"))return;const cr=`week-warning-${xt.id}-${lt}-${zt.toDateString()}`,Yr=JSON.parse(localStorage.getItem("sentWeekWarnings")||"[]");if(Yr.includes(cr)){console.log(` Week warning already sent for ${lt}`);return}try{console.log(` Sending 1-week warning for ${lt} in ${xt.project}`),(await Fe("/plan/master/milestone-week-warning",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:xt.id,projectName:xt.project,milestoneName:lt,dueDate:rt.endDate,userEmail:c.email,userName:`${c.firstName} ${c.lastName}`})})).ok&&(console.log(` Week warning email sent for ${lt}`),Yr.push(cr),localStorage.setItem("sentWeekWarnings",JSON.stringify(Yr)))}catch(Le){console.error(`Failed to send week warning for ${lt}:`,Le)}}})}};z();const ce=setInterval(z,6e4*60);return()=>clearInterval(ce)},[c,i,dt]),m.useEffect(()=>{let z=i;if(S.length>0&&(z=z.filter(ce=>S.includes(ce.project))),at.trim()){const ce=at.toLowerCase();z=z.filter(Ee=>{var Pe,xt;return Ee.project.toLowerCase().includes(ce)||((Pe=Ee.fields)==null?void 0:Pe.lead)&&Ee.fields.lead.toLowerCase().includes(ce)||((xt=Ee.fields)==null?void 0:xt.status)&&Ee.fields.status.toLowerCase().includes(ce)})}z=[...z].sort((ce,Ee)=>{const Pe=v(ce.startDate),xt=v(Ee.startDate);return Pe?xt?Pe-xt:-1:1}),r(z)},[S,at,i]),m.useEffect(()=>{if(console.log(" Daily reminder useEffect triggered"),!c){console.log(" userData not ready yet.");return}if(!Array.isArray(i)||i.length===0){console.log(" masterPlans not ready yet.");return}if(Object.keys(dt).length===0)return;const z=new Date().toISOString().split("T")[0];localStorage.getItem("deadlineEmailLastRun")!==z&&(console.log(" Running Daily Milestone Deadline Check"),i.forEach(Ee=>{const Pe=dt[Ee.id];if(!["owner","editor"].includes(Pe))return;const xt=[];Ee.fields&&Object.entries(Ee.fields).forEach(([lt,rt])=>{lt.toLowerCase()!=="status"&&lt.toLowerCase()!=="lead"&&lt.toLowerCase()!=="budget"&&lt.toLowerCase()!=="completion"&&xt.push({name:lt,status:rt.status,startDate:rt.startDate,endDate:rt.endDate})}),xt.sort((lt,rt)=>lt.startDate?rt.startDate?lt.startDate-rt.startDate:-1:1);const Gt=new Date().toDateString();xt.forEach(lt=>{var zt;!lt.endDate||new Date(lt.endDate).toDateString()!==Gt||(zt=lt.status)!=null&&zt.toLowerCase().includes("complete")||(console.log(` Sending reminder for milestone "${lt.name}" in project "${Ee.project}"`),Fe("/plan/master/milestone-deadline",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:Ee.id,projectName:Ee.project,milestones:xt,dueDate:lt.endDate,userEmail:c.email,userName:`${c.firstName} ${c.lastName}`})}))})}),localStorage.setItem("deadlineEmailLastRun",z))},[c,i,dt]),m.useEffect(()=>{const z=ce=>{ze.current&&!ze.current.contains(ce.target)&&J(!1)};return te&&document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[te]);const St=[...new Set(i.map(z=>z.project))],xe=z=>{L(ce=>ce.includes(z)?ce.filter(Ee=>Ee!==z):[...ce,z])};m.useEffect(()=>{if(i.length>0){We();const z=setInterval(()=>{We()},1e4);return()=>clearInterval(z)}},[i]);const C=async(z,ce)=>{me(!0),se(!0),Me({id:z,name:ce});try{console.log(` Fetching history for plan ${z}...`);const Ee=await Fe(`/plan/master/${z}/history`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Ee.ok){const Pe=await Ee.json();console.log(" History loaded:",Pe.history),de(Pe.history||[])}else console.error(" Failed to fetch history:",Ee.status),de([]),alert("Failed to load history. Please try again.")}catch(Ee){console.error(" Error fetching history:",Ee),de([]),alert("Network error. Please check your connection.")}finally{me(!1)}},ae=z=>({status_changed:" Status Changed",dates_changed:" Dates Changed",milestone_added:" Milestone Added",milestone_deleted:" Milestone Deleted",project_renamed:" Project Renamed",project_dates_changed:" Project Timeline Changed"})[z]||z,Ce=z=>({status_changed:"#3b82f6",dates_changed:"#f59e0b",milestone_added:"#10b981",milestone_deleted:"#ef4444",project_renamed:"#8b5cf6",project_dates_changed:"#f59e0b"})[z]||"#94a3b8",At=z=>{console.log(` AdminViewPlan - Navigating to ${z} tab`),le(z),z==="Individual Plan"?window.location.href="/adminindividualplan":z==="Approvals"&&(window.location.href="/adminapprovals")},bt=()=>{console.log(" AdminViewPlan - Creating new master plan"),window.location.href="/adminaddplan"},Pt=async z=>{const ce=dt[z.id];if(ce===void 0){if(z.createdBy!==(c==null?void 0:c.id)){alert(" You can only edit plans that you created.");return}}else{if(ce==="viewer"){alert(" You have view-only access to this plan. Contact the owner for edit permissions.");return}if(!ce){alert(" You do not have permission to edit this plan.");return}}console.log(" AdminViewPlan - Editing plan:",z.project);const Ee=mt[z.id];if(Ee&&Ee.userId!==(c==null?void 0:c.id)){const Pe=Math.floor((new Date-new Date(Ee.lastActivity))/6e4);if(!window.confirm(` This plan is currently being edited by ${Ee.lockedBy}.

Last activity: ${Pe} minute(s) ago
Lock expires in: ${Ee.minutesRemaining} minute(s)

Do you want to take over editing? This will disconnect them.`))return;try{if(!(await Fe(`/plan/lock/${z.id}/takeover`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({force:!0})})).ok){alert(" Failed to take over lock. Please try again.");return}console.log(" Lock takeover successful")}catch(Gt){console.error(" Takeover error:",Gt),alert(" Failed to take over lock. Please try again.");return}}sessionStorage.setItem("editingPlanId",z.id),sessionStorage.setItem("editingPlanData",JSON.stringify(z)),window.location.href="/admineditplan"},Ln=z=>{const ce=dt[z.id];if(ce===void 0){if(z.createdBy!==(c==null?void 0:c.id)){alert(" You can only delete plans that you created.");return}}else if(ce!=="owner"){alert(" Only the plan owner can delete this plan.");return}ke(z),O(!0)},$r=async()=>{if(Z)try{console.log(" Deleting plan:",Z.project,"ID:",Z.id);const z=await Fe(`/plan/master/${Z.id}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" Delete response status:",z.status),z.ok)console.log(" Plan deleted successfully"),e(i.filter(ce=>ce.id!==Z.id)),alert(`Plan "${Z.project}" has been deleted successfully!`);else{const ce=await z.text();console.error(" Failed to delete plan:",z.status,ce),alert("Failed to delete plan. Please try again.")}}catch(z){console.error(" Error deleting plan:",z),alert("Failed to delete plan. Please check your connection and try again.")}finally{O(!1),ke(null)}},lr=()=>{O(!1),ke(null)},Ur=(z,ce,Ee)=>{if(dt[z.id]!=="owner"){alert(" Only the plan owner can change milestone status.");return}U({plan:z,milestoneName:ce,currentStatus:Ee,justification:""}),j(Ee),oe(!0)},Ci=async()=>{if(!je||!B)return;const{plan:z,milestoneName:ce}=je,Ee=z.fields[ce];if(Ee!=null&&Ee.endDate){const Pe=v(Ee.endDate),xt=new Date;if(xt.setHours(0,0,0,0),Pe<xt&&!["Completed","Delayed"].includes(B)){alert(" After the end date, a milestone can only be marked as Delayed or Completed.");return}}try{console.log(` Updating status for ${ce} to ${B}`);const Pe=await Fe(`/plan/master/${z.id}/status`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({milestoneName:ce,newStatus:B,justification:je.justification||null})});if(Pe.ok){console.log(" Status updated successfully"),alert("Status updated successfully!");const xt={...z.fields,[ce]:{...z.fields[ce],status:B}},Gt=i.map(lt=>lt.id===z.id?{...lt,fields:xt}:lt);e(Gt),r(Gt.filter(lt=>S.length===0||S.includes(lt.project)))}else console.error("Failed to update status:",await Pe.text()),alert("Failed to update status. Please try again.")}catch(Pe){console.error("Error updating status:",Pe),alert("Network error. Please check your connection.")}finally{oe(!1),U(null),j("")}},co=()=>{re(!F),N(!1)},uo=z=>{const ce=dt[z];if(!ce)return null;const Pe={owner:{bg:"#3b82f6",icon:yi},editor:{bg:"#10b981",icon:eA},viewer:{bg:"#64748b",icon:Fo}}[ce];if(!Pe)return null;const xt=Pe.icon;return n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",backgroundColor:Pe.bg+"20",border:`1px solid ${Pe.bg}40`,fontSize:"11px",fontWeight:"600",color:Pe.bg,textTransform:"uppercase",width:"fit-content",alignSelf:"flex-start"},children:[n.jsx(xt,{size:12}),ce]})},we={page:{minHeight:"100vh",padding:"30px",background:F?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease",overflowX:"hidden"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"32px"},header:{fontSize:"28px",fontWeight:"700",color:F?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},topButton:z=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:z?"rgba(59,130,246,0.1)":F?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:z?"#3b82f6":F?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s ease",boxShadow:z?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:z?"translateY(-2px) scale(1.05)":"translateY(0)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:F?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:F?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:F?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:F?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userName:{fontSize:"14px",fontWeight:"600",color:F?"#e2e8f0":"#1e293b",marginBottom:"2px"},userRole:{fontSize:"12px",color:F?"#94a3b8":"#64748b"},userStats:{borderTop:F?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:F?"#e2e8f0":"#1e293b"},tooltipStatLabel:{fontSize:"10px",color:F?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px",width:"100%"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:F?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:F?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(z,ce)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",border:"none",backgroundColor:z?"#3b82f6":ce?F?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:z?"#fff":F?"#e2e8f0":"#64748b",boxShadow:z?"0 4px 12px rgba(59,130,246,0.3)":"none"}),createButton:z=>({backgroundColor:z?"#f59e0b":"#fbbf24",color:"#fff",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",transform:z?"translateY(-2px)":"translateY(0)",boxShadow:z?"0 8px 25px rgba(251,191,36,0.3)":"0 4px 12px rgba(251,191,36,0.2)"}),searchInput:{width:"300px",padding:"12px 16px",borderRadius:"12px",border:F?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:F?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:F?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",backdropFilter:"blur(10px)"},filterContainer:{display:"flex",gap:"12px",alignItems:"center",marginBottom:"28px"},projectDropdown:{position:"absolute",top:"100%",left:0,backgroundColor:F?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",border:F?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",padding:"12px 0",minWidth:"250px",zIndex:1e3,marginTop:"8px"},dropdownItem:z=>({backgroundColor:z?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease",borderRadius:"8px",margin:"0 8px",color:F?"#e2e8f0":"#374151",transform:z?"translateX(4px)":"translateX(0)",borderLeft:z?"3px solid #3b82f6":"3px solid transparent"}),checkboxItem:z=>({display:"flex",alignItems:"center",gap:"12px",padding:"12px",cursor:"pointer",borderRadius:"8px",transition:"all 0.2s ease",backgroundColor:z?"rgba(59,130,246,0.1)":"transparent"}),checkbox:z=>({width:"18px",height:"18px",borderRadius:"4px",border:z?"2px solid #3b82f6":F?"2px solid #64748b":"2px solid #cbd5e1",backgroundColor:z?"#3b82f6":"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:"700",transition:"all 0.2s ease"}),checkboxLabel:{fontSize:"14px",fontWeight:"500",color:F?"#e2e8f0":"#374151"},todayLine:{position:"absolute",top:"-50px",bottom:"0px",width:"2px",backgroundImage:"linear-gradient(to bottom, #ef4444 60%, transparent 60%)",backgroundSize:"2px 16px",backgroundRepeat:"repeat-y",zIndex:100,pointerEvents:"none"},todayLabel:{position:"absolute",top:"-35px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#ef4444",color:"#fff",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"700",whiteSpace:"nowrap",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:101},emptyState:{textAlign:"center",padding:"60px 20px",color:F?"#94a3b8":"#64748b",fontSize:"16px"},loadingState:{textAlign:"center",padding:"60px 20px",color:F?"#94a3b8":"#64748b",fontSize:"16px"},statsContainer:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"28px"},statCard:z=>({backgroundColor:F?"#374151":"#fff",borderRadius:"20px",padding:"28px",textAlign:"center",boxShadow:z?"0 20px 40px rgba(0,0,0,0.15)":"0 8px 25px rgba(0,0,0,0.08)",border:F?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",transition:"all 0.3s ease",transform:z?"translateY(-8px) scale(1.02)":"translateY(0)",cursor:"pointer",backdropFilter:"blur(10px)"}),statNumber:{fontSize:"36px",fontWeight:"800",color:F?"#e2e8f0":"#1e293b",marginBottom:"8px"},statLabel:{fontSize:"14px",color:F?"#94a3b8":"#64748b",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},deleteConfirmation:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(4px)"},deleteModal:{backgroundColor:F?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",border:F?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",maxWidth:"400px",width:"90%",textAlign:"center"},deleteModalTitle:{fontSize:"20px",fontWeight:"700",color:F?"#e2e8f0":"#1e293b",marginBottom:"12px"},deleteModalText:{fontSize:"14px",color:F?"#94a3b8":"#64748b",marginBottom:"24px",lineHeight:"1.5"},deleteModalActions:{display:"flex",gap:"12px",justifyContent:"center"},modalButton:(z,ce)=>({padding:"12px 24px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:ce==="danger"?z?"#dc2626":"#ef4444":z?F?"#4b5563":"#e5e7eb":F?"#6b7280":"#f3f4f6",color:ce==="danger"?"#fff":F?"#e2e8f0":"#374151",transform:z?"translateY(-1px)":"translateY(0)",boxShadow:z?"0 4px 12px rgba(0,0,0,0.15)":"none"}),statusModal:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(4px)"},statusModalContent:{backgroundColor:F?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",border:F?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",maxWidth:"400px",width:"90%"},statusModalTitle:{fontSize:"20px",fontWeight:"700",color:F?"#e2e8f0":"#1e293b",marginBottom:"8px"},statusModalSubtitle:{fontSize:"14px",color:F?"#94a3b8":"#64748b",marginBottom:"24px"},statusSelect:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:F?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:F?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:F?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",cursor:"pointer",marginBottom:"24px"},ganttContainer:{marginTop:"24px",overflowX:"auto",overflowY:"visible",position:"relative",paddingTop:"60px",paddingBottom:"30px",minHeight:"300px",maxWidth:"100%"},ganttHeader:{display:"grid",gridTemplateColumns:"200px repeat(auto-fit, minmax(80px, 1fr))",gap:"1px",marginBottom:"16px",backgroundColor:F?"#4b5563":"#f8fafc",borderRadius:"12px",padding:"16px",transition:"all 0.3s ease"},monthHeader:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:F?"#e2e8f0":"#475569",padding:"8px 4px",transition:"all 0.3s ease",borderBottom:F?"1px solid #4b5563":"1px solid #e2e8f0"},taskHeader:{fontSize:"12px",fontWeight:"600",color:F?"#e2e8f0":"#475569",padding:"8px 12px",transition:"all 0.3s ease"},ganttRow:{display:"grid",gridTemplateColumns:"200px repeat(auto-fit, minmax(80px, 1fr))",gap:"1px",marginBottom:"8px",alignItems:"center"},taskName:{fontSize:"14px",fontWeight:"500",color:F?"#e2e8f0":"#374151",padding:"12px",backgroundColor:F?"#4b5563":"#f8fafc",borderRadius:"8px",transition:"all 0.3s ease"},ganttCell:{height:"40px",position:"relative",transition:"all 0.3s ease"},ganttBar:(z,ce,Ee,Pe)=>({position:"absolute",left:"0%",width:"100%",height:"24px",top:"8px",backgroundColor:z,borderRadius:"6px",opacity:Pe!=null&&Pe.toLowerCase().includes("complete")?.8:1,border:Pe!=null&&Pe.toLowerCase().includes("delay")?"2px solid #ef4444":"none",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"14px",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",transition:"all 0.3s ease"}),monthBoxOverlay:{position:"absolute",top:0,bottom:0,left:0,right:0,borderRight:F?"2px solid rgba(100,116,139,0.8)":"2px solid rgba(148,163,184,0.8)",borderLeft:"none",borderTop:"none",borderBottom:"none",pointerEvents:"none",zIndex:1},legend:{display:"flex",gap:"24px",marginTop:"20px",padding:"20px",backgroundColor:F?"#4b5563":"#f8fafc",borderRadius:"12px",transition:"all 0.3s ease"},legendItem:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",color:F?"#e2e8f0":"#475569",transition:"all 0.3s ease"},legendColor:z=>({width:"16px",height:"16px",borderRadius:"4px",backgroundColor:z,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}),projectTitle:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",position:"relative"},projectTitleLeft:{display:"flex",alignItems:"center",gap:"12px",position:"relative"},projectTitleRight:{display:"flex",alignItems:"center",gap:"8px"},projectName:{fontSize:"24px",fontWeight:"700",color:F?"#e2e8f0":"#1e293b",transition:"all 0.3s ease",display:"flex",flexDirection:"column",gap:"4px"},projectMeta:{display:"flex",gap:"24px",fontSize:"14px",color:F?"#94a3b8":"#64748b",flexWrap:"wrap",marginBottom:"16px",transition:"all 0.3s ease"},card:z=>({backgroundColor:F?"#374151":"#fff",borderRadius:"20px",padding:"28px",marginBottom:"28px",boxShadow:z?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:z?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",border:F?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"visible"}),cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.03) 0%, transparent 70%)",opacity:0,transition:"opacity 0.4s ease",pointerEvents:"none"},actionButton:(z,ce,Ee=!1)=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:Ee?F?"rgba(51,65,85,0.3)":"rgba(226,232,240,0.3)":z?ce==="edit"?"rgba(59,130,246,0.1)":ce==="delete"?"rgba(239,68,68,0.1)":ce==="history"?"rgba(139,92,246,0.1)":"rgba(59,130,246,0.1)":F?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",color:Ee?F?"#475569":"#94a3b8":z?ce==="edit"?"#3b82f6":ce==="delete"?"#ef4444":ce==="history"?"#8b5cf6":"#3b82f6":F?"#94a3b8":"#64748b",cursor:Ee?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",transform:z&&!Ee?"scale(1.1)":"scale(1)",opacity:Ee?.5:1}),lockBadge:(z,ce)=>({position:"absolute",top:"12px",right:"12px",padding:"6px 12px",borderRadius:"8px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",backgroundColor:ce?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",color:ce?"#10b981":"#ef4444",border:`1px solid ${ce?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,zIndex:10}),changeStatusButton:z=>({padding:"6px 12px",borderRadius:"8px",border:"none",backgroundColor:z?"rgba(16,185,129,0.15)":"rgba(16,185,129,0.1)",color:z?"#059669":"#10b981",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"600",gap:"4px",transform:z?"scale(1.05)":"scale(1)",pointerEvents:"auto"}),statusBadge:z=>{const Ee={Completed:{bg:"#3b82f620",text:"#3b82f6"},"On Track":{bg:"#10b98120",text:"#10b981"},"At Risk":{bg:"#f59e0b20",text:"#f59e0b"},Delayed:{bg:"#ef444420",text:"#ef4444"},"In Progress":{bg:"#10b98120",text:"#10b981"},Pending:{bg:"#10b98120",text:"#10b981"},Planning:{bg:"#10b98120",text:"#10b981"},"On Hold":{bg:"#ef444420",text:"#ef4444"},Ongoing:{bg:"#10b98120",text:"#10b981"}}[z]||{bg:"#94a3b820",text:"#94a3b8"};return{display:"inline-block",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",backgroundColor:Ee.bg,color:Ee.text}},rulerTick:{position:"absolute",bottom:0,width:"1px",height:"8px",backgroundColor:F?"#64748b":"#cbd5e1"},rulerMajorTick:{position:"absolute",bottom:0,width:"2px",height:"12px",backgroundColor:"#94a3b8"},milestoneTooltip:{position:"absolute",top:"-113px",bottom:"100%",left:"50%",transform:"translateX(-50%)",backgroundColor:F?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)",borderRadius:"8px",padding:"12px 16px",marginBottom:"8px",maxWidth:"400px",minWidth:"200px",fontSize:"12px",fontWeight:"600",color:F?"#e2e8f0":"#1e293b",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",border:F?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",zIndex:9999,pointerEvents:"auto",whiteSpace:"normal",wordWrap:"break-word",wordBreak:"break-word"},historyModal:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(8px)"},historyModalContent:{backgroundColor:F?"#374151":"#fff",borderRadius:"24px",padding:"32px",boxShadow:"0 25px 50px rgba(0,0,0,0.3)",border:F?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",maxWidth:"800px",width:"90%",maxHeight:"80vh",display:"flex",flexDirection:"column"},historyModalHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",paddingBottom:"16px",borderBottom:F?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)"},historyModalTitle:{fontSize:"24px",fontWeight:"700",color:F?"#e2e8f0":"#1e293b",display:"flex",alignItems:"center",gap:"12px"},historyModalSubtitle:{fontSize:"14px",color:F?"#94a3b8":"#64748b",marginTop:"4px"},historyList:{flex:1,overflowY:"auto",marginBottom:"20px"},historyItem:z=>({backgroundColor:z?F?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":F?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px",border:F?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",transition:"all 0.2s ease",transform:z?"translateX(4px)":"translateX(0)"}),historyItemHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},historyChangeType:z=>({display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",backgroundColor:z+"20",color:z,border:`1px solid ${z}40`}),historyTimestamp:{fontSize:"12px",color:F?"#94a3b8":"#64748b",fontWeight:"500"},historyMilestoneName:{fontSize:"16px",fontWeight:"700",color:F?"#e2e8f0":"#1e293b",marginBottom:"8px"},historyChangeDetails:{display:"flex",gap:"12px",alignItems:"center",fontSize:"14px",color:F?"#cbd5e1":"#475569"},historyValue:z=>({padding:"6px 12px",borderRadius:"8px",backgroundColor:z?F?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.05)":F?"rgba(16,185,129,0.1)":"rgba(16,185,129,0.05)",border:z?"1px solid rgba(239,68,68,0.3)":"1px solid rgba(16,185,129,0.3)",color:z?"#ef4444":"#10b981",fontWeight:"600",fontSize:"13px"}),historyChangedBy:{fontSize:"12px",color:F?"#94a3b8":"#64748b",marginTop:"8px",display:"flex",alignItems:"center",gap:"6px"},historyEmptyState:{textAlign:"center",padding:"60px 20px",color:F?"#94a3b8":"#64748b",fontSize:"16px"},historyLoadingState:{textAlign:"center",padding:"60px 20px",color:F?"#94a3b8":"#64748b",fontSize:"16px"},closeHistoryButton:z=>({padding:"12px 24px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:z?"#3b82f6":F?"#4b5563":"#e5e7eb",color:z?"#fff":F?"#e2e8f0":"#374151",transform:z?"translateY(-1px)":"translateY(0)",boxShadow:z?"0 4px 12px rgba(59,130,246,0.3)":"none"})};return n.jsxs("div",{style:we.page,children:[n.jsxs("div",{style:we.headerRow,children:[n.jsx("h1",{style:we.header,children:"Plan"}),n.jsxs("div",{style:we.headerRight,children:[n.jsxs("button",{style:we.topButton(b==="alerts"),onMouseEnter:()=>H("alerts"),onMouseLeave:()=>H(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:we.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:we.topButton(b==="profile"),onMouseEnter:()=>{H("profile"),N(!0)},onMouseLeave:()=>H(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Nt,{size:20})}),M&&n.jsxs("div",{className:"profile-tooltip-animated",style:we.profileTooltip,onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),children:[n.jsx("div",{style:we.tooltipArrow}),n.jsxs("div",{style:we.userInfo,children:[n.jsx("div",{style:we.avatar,children:c&&`${((br=c.firstName)==null?void 0:br[0])||""}${((Bi=c.lastName)==null?void 0:Bi[0])||""}`||"U"}),n.jsxs("div",{children:[n.jsx("div",{style:we.userName,children:c?`${c.firstName} ${c.lastName}`:"Loading..."}),n.jsx("div",{style:we.userRole,children:c?`${c.role}  ${c.department}`:"Loading..."})]})]}),n.jsxs("div",{style:we.userStats,children:[n.jsxs("div",{style:we.tooltipStatItem,children:[n.jsx("div",{style:we.tooltipStatNumber,children:i.length}),n.jsx("div",{style:we.tooltipStatLabel,children:"Plans"})]}),n.jsxs("div",{style:we.tooltipStatItem,children:[n.jsx("div",{style:we.tooltipStatNumber,children:i.filter(z=>{const ce=typeof z.fields=="string"?JSON.parse(z.fields):z.fields;if(!ce)return!1;const Ee=Object.values(ce).filter(Pe=>typeof Pe=="object"&&(Pe==null?void 0:Pe.status));return Ee.length>0&&Ee.some(Pe=>Pe.status!=="Completed")}).length}),n.jsx("div",{style:we.tooltipStatLabel,children:"In Progress"})]}),n.jsxs("div",{style:we.tooltipStatItem,children:[n.jsx("div",{style:we.tooltipStatNumber,children:i.filter(z=>{const ce=typeof z.fields=="string"?JSON.parse(z.fields):z.fields;if(!ce)return!1;const Ee=Object.values(ce).filter(Pe=>typeof Pe=="object"&&(Pe==null?void 0:Pe.status));return Ee.length>0&&Ee.every(Pe=>Pe.status==="Completed")}).length}),n.jsx("div",{style:we.tooltipStatLabel,children:"Completed"})]})]}),n.jsx("button",{style:we.themeToggle,onClick:co,children:F?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:we.tabContainer,children:["Master Plan","Individual Plan","Approvals"].map(z=>n.jsx("button",{style:we.tab(Ae===z,g===`tab-${z}`),onMouseEnter:()=>y(`tab-${z}`),onMouseLeave:()=>y(null),onClick:()=>At(z),children:z},z))}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[n.jsxs("div",{children:[n.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",color:F?"#e2e8f0":"#1e293b",margin:0},children:"Master Plans Timeline"}),n.jsx("div",{style:{marginTop:"6px",fontSize:"13px",fontWeight:"500",color:F?"#94a3b8":"#64748b",animation:"fadeIn 0.4s ease"},onMouseEnter:()=>$(!0),onMouseLeave:()=>$(!1),children:Y[Ke]},Ke)]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[S.length===1&&t.length===1&&n.jsxs("button",{style:{...we.createButton(g==="history"),backgroundColor:g==="history"?"#8b5cf6":"#a78bfa"},onMouseEnter:()=>y("history"),onMouseLeave:()=>y(null),onClick:()=>C(t[0].id,t[0].project),children:[n.jsx(El,{size:16}),"View History"]}),n.jsxs("button",{style:we.createButton(g==="download"),onMouseEnter:()=>y("download"),onMouseLeave:()=>y(null),onClick:async()=>{try{const z=He.current;if(!z)return alert("Nothing to download!");const ce=await zU(z,{backgroundColor:F?"#1e293b":"#ffffff",scale:2,useCORS:!0}),Ee=document.createElement("a");Ee.download=`MasterPlan_Gantt_${new Date().toISOString().split("T")[0]}.png`,Ee.href=ce.toDataURL("image/png"),Ee.click()}catch(z){console.error(" Error saving Gantt chart:",z),alert("Failed to generate PNG. Try again.")}},children:[n.jsx(To,{size:16}),"Download PNG"]}),n.jsxs("button",{style:we.createButton(g==="create"),onMouseEnter:()=>y("create"),onMouseLeave:()=>y(null),onClick:bt,children:[n.jsx(In,{size:16}),"Create a Master Plan"]})]})]}),n.jsxs("div",{style:we.filterContainer,children:[n.jsx("input",{type:"text",placeholder:"Search by project, lead, or status...",value:at,onChange:z=>T(z.target.value),style:we.searchInput}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 16px",borderRadius:"12px",backgroundColor:F?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",border:F?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",cursor:"pointer",backdropFilter:"blur(10px)"},onClick:()=>Be(!X),children:[n.jsx("div",{style:we.checkbox(X),children:X&&""}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:F?"#e2e8f0":"#374151"},children:"Show Month Grid"})]}),S.length===1&&t.length===1&&n.jsxs("div",{style:{display:"flex",gap:"4px",padding:"4px",backgroundColor:F?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",border:F?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",borderRadius:"12px",backdropFilter:"blur(10px)"},children:[n.jsx("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:R==="timeline"?"#3b82f6":"transparent",color:R==="timeline"?"#fff":F?"#e2e8f0":"#64748b",boxShadow:R==="timeline"?"0 2px 8px rgba(59,130,246,0.3)":"none"},onClick:()=>Ut("timeline"),children:"Timeline"}),n.jsx("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:R==="waterfall"?"#3b82f6":"transparent",color:R==="waterfall"?"#fff":F?"#e2e8f0":"#64748b",boxShadow:R==="waterfall"?"0 2px 8px rgba(59,130,246,0.3)":"none"},onClick:()=>Ut("waterfall"),children:"Waterfall"})]}),n.jsxs("div",{style:{position:"relative"},ref:ze,children:[n.jsxs("button",{style:we.createButton(g==="filter"),onMouseEnter:()=>y("filter"),onMouseLeave:()=>y(null),onClick:()=>J(!te),children:[n.jsx(Eh,{size:16}),"Filter Projects",S.length>0&&` (${S.length})`,n.jsx(jo,{size:16})]}),te&&n.jsxs("div",{style:we.projectDropdown,children:[n.jsxs("div",{style:we.checkboxItem(g==="all"),onMouseEnter:()=>y("all"),onMouseLeave:()=>y(null),onClick:()=>L([]),children:[n.jsx("div",{style:we.checkbox(S.length===0),children:S.length===0&&""}),n.jsx("span",{style:we.checkboxLabel,children:"All Projects"})]},"all"),n.jsx("div",{style:{height:"1px",backgroundColor:F?"rgba(75,85,99,0.5)":"rgba(226,232,240,0.8)",margin:"8px 12px"}}),St.map(z=>n.jsxs("div",{style:we.checkboxItem(g===z),onMouseEnter:()=>y(z),onMouseLeave:()=>y(null),onClick:()=>xe(z),children:[n.jsx("div",{style:we.checkbox(S.includes(z)),children:S.includes(z)&&""}),n.jsx("span",{style:we.checkboxLabel,children:z})]},z))]})]})]}),a?n.jsxs("div",{style:we.loadingState,children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"12px"},children:""}),"Loading master plans..."]}):i.length===0?n.jsxs("div",{style:we.emptyState,children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No master plans found"}),n.jsx("div",{children:"Create your first master plan to get started"})]}):n.jsxs("div",{ref:He,style:we.card(b==="gantt"),onMouseEnter:()=>H("gantt"),onMouseLeave:()=>H(null),children:[n.jsx("div",{style:we.cardGlow}),n.jsxs("div",{style:we.projectTitle,children:[n.jsx("div",{style:we.projectName,children:S.length===0?"Master Plan Overview":S.length===1?n.jsxs(n.Fragment,{children:[S[0],t.length===1&&uo(t[0].id)]}):`${S.length} Projects Selected`}),S.length===1&&t.length===1&&n.jsxs("div",{style:we.projectTitleRight,children:[n.jsx("button",{style:we.actionButton(g==="history-single","history"),onMouseEnter:()=>y("history-single"),onMouseLeave:()=>y(null),onClick:()=>C(t[0].id,t[0].project),title:"View project history",children:n.jsx(El,{size:16})}),dt[t[0].id]!=="viewer"&&n.jsx("button",{style:we.actionButton(g==="edit-single","edit",dt[t[0].id]==="viewer"),onMouseEnter:()=>y("edit-single"),onMouseLeave:()=>y(null),onClick:()=>Pt(t[0]),title:dt[t[0].id]==="viewer"?"View-only access":"Edit this plan",disabled:dt[t[0].id]==="viewer",children:n.jsx(eA,{size:16})}),(dt[t[0].id]==="owner"||dt[t[0].id]===void 0&&t[0].createdBy===(c==null?void 0:c.id))&&n.jsx("button",{style:we.actionButton(g==="delete-single","delete"),onMouseEnter:()=>y("delete-single"),onMouseLeave:()=>y(null),onClick:()=>Ln(t[0]),title:"Delete this plan",children:n.jsx(ar,{size:16})})]})]}),S.length===1&&t.length===1&&n.jsxs("div",{style:we.projectMeta,children:[n.jsxs("span",{children:[n.jsx("strong",{children:"Start:"})," ",new Date(t[0].startDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),n.jsxs("span",{children:[n.jsx("strong",{children:"End:"})," ",new Date(t[0].endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),((os=t[0].fields)==null?void 0:os.lead)&&n.jsxs("span",{children:[n.jsx("strong",{children:"Lead:"})," ",t[0].fields.lead]}),((SA=t[0].fields)==null?void 0:SA.status)&&n.jsxs("span",{children:[n.jsx("strong",{children:"Status:"})," ",n.jsx("span",{style:we.statusBadge(t[0].fields.status),children:t[0].fields.status})]})]}),n.jsx("div",{ref:ge,style:we.ganttContainer,children:t.length===0?n.jsxs("div",{style:we.emptyState,children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No projects found"}),n.jsx("div",{children:"Try adjusting your filters or search query"})]}):(()=>{const z=new Date;z.setHours(0,0,0,0);const ce=[];t.forEach(Le=>{Le.startDate&&ce.push(v(Le.startDate)),Le.endDate&&ce.push(v(Le.endDate)),Le.fields&&Object.values(Le.fields).forEach(ft=>{ft.startDate&&ce.push(v(ft.startDate)),ft.endDate&&ce.push(v(ft.endDate))})});const Ee=ce.filter(Le=>Le&&!isNaN(Le)),Pe=new Date(Math.min(...Ee)),xt=new Date(Math.max(...Ee));console.log(" Timeline boundaries:",Pe.toLocaleDateString(),"",xt.toLocaleDateString());const Gt=Math.max(1,(xt-Pe)/(1e3*60*60*24));console.log(" Total timeline days:",Gt);const lt=Math.ceil((xt-Pe)/(1e3*60*60*24*30))+1,rt=[];for(let Le=0;Le<lt;Le++){const ft=new Date(Pe);ft.setMonth(Pe.getMonth()+Le),rt.push({label:ft.toLocaleDateString("en-US",{month:"short",year:"numeric"}),date:new Date(ft)})}const zt=Le=>{for(let ft=0;ft<rt.length;ft++){const Jt=rt[ft].date;if(Le.getFullYear()===Jt.getFullYear()&&Le.getMonth()===Jt.getMonth())return ft}return-1};let Zt=-1,cr=0;for(let Le=0;Le<rt.length;Le++){const ft=new Date(rt[Le].date);ft.setDate(1),ft.setHours(0,0,0,0);const Jt=new Date(ft.getFullYear(),ft.getMonth()+1,0);if(Jt.setHours(23,59,59,999),z>=ft&&z<=Jt){Zt=Le;const bn=Jt.getDate(),Jr=z.getDate();cr=Jr/bn*100,console.log(" Today Line FOUND:",{monthIndex:Le,monthLabel:rt[Le].label,monthStart:ft.toLocaleDateString(),monthEnd:Jt.toLocaleDateString(),todayDate:z.toLocaleDateString(),dayOfMonth:Jr,daysInMonth:bn,percentInMonth:cr.toFixed(2)+"%"});break}}Zt===-1&&z<rt[0].date&&console.log(" Today is BEFORE the timeline starts"),Zt===-1&&z>new Date(rt[rt.length-1].date.getFullYear(),rt[rt.length-1].date.getMonth()+1,0)&&console.log(" Today is AFTER the timeline ends"),console.log(" Today Line Debug:",{todayMonthIndex:Zt,todayPercentInMonth:cr.toFixed(2)+"%",todayDate:z.toLocaleDateString(),monthCount:rt.length,firstMonth:rt[0].label,lastMonth:rt[rt.length-1].label});const Yr=Le=>{const ft=(Le==null?void 0:Le.toLowerCase())||"";return ft.includes("complete")?"#3b82f6":ft.includes("on track")?"#10b981":ft.includes("at risk")?"#f59e0b":ft.includes("delay")?"#ef4444":"#94a3b8"};return n.jsxs("div",{style:{position:"relative",minHeight:"100%"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${rt.length}, 1fr)`,gap:"0",marginBottom:"16px",backgroundColor:F?"#4b5563":"#f8fafc",borderRadius:"12px",position:"relative",gridColumnGap:"0",gridRowGap:"0"},children:[n.jsx("div",{style:we.taskHeader,children:"Project"}),rt.map((Le,ft)=>n.jsxs("div",{style:{...we.monthHeader,minWidth:0,width:"100%",position:"relative",borderBottom:F?"2px solid #4b5563":"2px solid #cbd5e1",borderRight:ft===rt.length-1?"none":X?F?"2px solid rgba(100,116,139,0.8)":"2px solid rgba(148,163,184,0.8)":"none"},children:[Le.label,[0,25,50,75,100].map((Jt,bn)=>n.jsx("div",{style:{...bn===0||bn===4?we.rulerMajorTick:we.rulerTick,left:`calc(${Jt}% - 1px)`}},bn))]},ft))]}),t.map(Le=>{var Jr;const ft=v(Le.startDate),Jt=v(Le.endDate),bn=[];return Le.fields&&Object.entries(Le.fields).forEach(([it,vt],kt)=>{it.toLowerCase()!=="status"&&it.toLowerCase()!=="lead"&&it.toLowerCase()!=="budget"&&it.toLowerCase()!=="completion"&&bn.push({name:it,status:vt.status||vt,startDate:v(vt.startDate)||null,endDate:v(vt.endDate)||null,color:Yr(vt.status||vt)})}),bn.sort((it,vt)=>{if(!it.startDate&&!vt.startDate)return 0;if(!it.startDate)return 1;if(!vt.startDate)return-1;const kt=it.startDate-vt.startDate;return kt!==0?kt:!it.endDate&&!vt.endDate?0:it.endDate?vt.endDate?it.endDate-vt.endDate:-1:1}),R==="waterfall"&&S.length===1?bn.map((it,vt)=>n.jsxs("div",{style:{position:"relative",marginBottom:"8px",width:"100%",maxWidth:"100%"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${rt.length}, 1fr)`,gap:"0",alignItems:"center"},children:[n.jsx("div",{style:{...we.taskName,display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",minHeight:"60px",overflow:"hidden"},children:n.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[n.jsx("div",{style:{fontWeight:"700",fontSize:"13px"},children:it.name}),n.jsx("span",{style:{...we.statusBadge(it.status),marginTop:"4px",width:"fit-content"},children:it.status})]})}),rt.map((kt,Qt)=>n.jsx("div",{style:{...we.ganttCell,position:"relative",minWidth:0,width:"100%"},children:X&&n.jsx("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:F?"rgba(75, 85, 99, 0.15)":"rgba(148, 163, 184, 0.1)",borderRadius:"8px",pointerEvents:"none",zIndex:1,margin:"1px"}})},Qt))]}),it.startDate&&it.endDate&&(()=>{const kt=v(it.startDate),Qt=v(it.endDate);if(!kt||!Qt)return null;const Xr=zt(kt),dn=zt(Qt);if(Xr===-1||dn===-1)return null;const ia=new Date(kt.getFullYear(),kt.getMonth()+1,0).getDate(),sa=new Date(Qt.getFullYear(),Qt.getMonth()+1,0).getDate(),Si=kt.getDate()/ia*100,Ro=Qt.getDate()/sa*100;return n.jsxs("div",{style:{position:"absolute",left:`calc(200px + ((100% - 200px) / ${rt.length}) * ${Xr} + ((100% - 200px) / ${rt.length}) * ${Si/100})`,width:`calc(((100% - 200px) / ${rt.length}) * ${dn-Xr} + ((100% - 200px) / ${rt.length}) * ${(Ro-Si)/100})`,height:"24px",top:"50%",transform:"translateY(-50%)",backgroundColor:it.color,opacity:1,zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"10px",fontWeight:"600",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",cursor:"pointer",pointerEvents:"auto"},onMouseEnter:()=>{D.current&&clearTimeout(D.current),V(`${Le.id}-waterfall-${vt}`)},onMouseLeave:()=>{D.current=setTimeout(()=>{V(null)},150)},children:[n.jsxs("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"0 4px",fontSize:"9px",maxWidth:"100%",display:"block"},children:[kt.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",Qt.toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),Q===`${Le.id}-waterfall-${vt}`&&n.jsxs("div",{style:{...we.milestoneTooltip,position:"fixed",bottom:"auto",top:"auto",left:"50%",transform:"translate(-50%, -60%)",maxWidth:"300px",zIndex:1e4},onMouseEnter:()=>{D.current&&clearTimeout(D.current),V(`${Le.id}-waterfall-${vt}`)},onMouseLeave:()=>{D.current=setTimeout(()=>{V(null)},150)},children:[n.jsx("div",{style:{marginBottom:"4px",fontWeight:"700"},children:it.name}),n.jsxs("div",{style:{fontSize:"11px",opacity:.9},children:[kt.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," - ",Qt.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),n.jsx("div",{style:{fontSize:"11px",marginTop:"4px",color:it.color,fontWeight:"700"},children:it.status}),dt[Le.id]==="owner"&&n.jsxs("button",{style:{...we.changeStatusButton(g===`change-${Le.id}-${vt}`),marginTop:"4px"},onMouseEnter:()=>y(`change-${Le.id}-${vt}`),onMouseLeave:()=>y(null),onClick:Mo=>{Mo.stopPropagation(),Ur(Le,it.name,it.status)},children:[n.jsx(Kr,{size:12}),"Change Status"]})]})]})})()]},`${Le.id}-waterfall-${vt}`)):n.jsxs("div",{style:{position:"relative",marginBottom:"8px"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${rt.length}, 1fr)`,gap:"0",alignItems:"center"},children:[n.jsxs("div",{style:{...we.taskName,display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative"},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",marginBottom:"4px"},children:[n.jsx("div",{style:{fontWeight:"700"},children:Le.project}),uo(Le.id)]}),(()=>{const it=mt[Le.id],vt=!!it,kt=(it==null?void 0:it.userId)===(c==null?void 0:c.id);return vt?n.jsxs("div",{style:{marginTop:"2px",marginBottom:"4px",fontSize:"11px",padding:"3px 6px",width:"fit-content",borderRadius:"6px",backgroundColor:kt?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",color:kt?"#10b981":"#ef4444",border:`1px solid ${kt?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"}`,fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(ui,{size:10}),kt?"You are editing":`Locked by ${it.lockedBy}`]}):null})(),((Jr=Le.fields)==null?void 0:Jr.status)&&n.jsx("span",{style:we.statusBadge(Le.fields.status),children:Le.fields.status})]}),t.length>1&&n.jsxs("div",{style:{display:"flex",gap:"4px"},children:[n.jsx("button",{style:we.actionButton(g===`history-${Le.id}`,"history"),onMouseEnter:()=>y(`history-${Le.id}`),onMouseLeave:()=>y(null),onClick:it=>{it.stopPropagation(),C(Le.id,Le.project)},title:"View project history",children:n.jsx(El,{size:14})}),dt[Le.id]!=="viewer"&&n.jsx("button",{style:we.actionButton(g===`edit-${Le.id}`,"edit",dt[Le.id]==="viewer"),onMouseEnter:()=>y(`edit-${Le.id}`),onMouseLeave:()=>y(null),onClick:it=>{it.stopPropagation(),Pt(Le)},title:"Edit this plan",children:n.jsx(eA,{size:14})}),(dt[Le.id]==="owner"||dt[Le.id]===void 0&&Le.createdBy===(c==null?void 0:c.id))&&n.jsx("button",{style:we.actionButton(g===`delete-${Le.id}`,"delete"),onMouseEnter:()=>y(`delete-${Le.id}`),onMouseLeave:()=>y(null),onClick:it=>{it.stopPropagation(),Ln(Le)},title:"Delete this plan",children:n.jsx(ar,{size:14})})]})]}),rt.map((it,vt)=>n.jsx("div",{style:{...we.ganttCell,position:"relative",minWidth:0,width:"100%"},children:X&&n.jsx("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:F?"rgba(75, 85, 99, 0.15)":"rgba(148, 163, 184, 0.1)",borderRadius:"8px",pointerEvents:"none",zIndex:1,margin:"1px"}})},vt))]}),n.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,height:"40px",display:"grid",gridTemplateColumns:`200px repeat(${rt.length}, 1fr)`,gap:"0",pointerEvents:"none"},children:[n.jsx("div",{}),bn.length>0?bn.map((it,vt)=>{console.log(`
 ========== RENDERING PHASE ${vt+1}/${bn.length} ==========`),console.log(` Phase Name: ${it.name}`);const kt=it.startDate?v(it.startDate):null,Qt=it.endDate?v(it.endDate):null;if(!kt||!Qt)return console.warn("Phase missing date:",it),null;const Xr=zt(kt),dn=zt(Qt),ia=new Date(kt.getFullYear(),kt.getMonth()+1,0).getDate(),sa=new Date(Qt.getFullYear(),Qt.getMonth()+1,0).getDate(),Si=kt.getDate()/ia*100,Ro=Qt.getDate()/sa*100,Mo=`calc(
200px +
((100% - 200px) * (${Xr} / ${rt.length})) +
((100% - 200px) * (${Si} / 100 / ${rt.length}))
)`,Ii=`calc(
((100% - 200px) * ((${dn} - ${Xr}) / ${rt.length})) +
((100% - 200px) * ((${Ro} - ${Si}) / 100 / ${rt.length}))
)`;return n.jsxs("div",{style:{position:"absolute",left:Mo,width:Ii,height:"24px",top:"8px",transform:"translateY(83.5%)",backgroundColor:it.color,opacity:1,zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"10px",fontWeight:"600",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",cursor:"pointer",pointerEvents:"auto"},onMouseEnter:()=>{D.current&&clearTimeout(D.current),V(`${Le.id}-${vt}`)},onMouseLeave:()=>{D.current=setTimeout(()=>{V(null)},150)},children:[n.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"0 4px",fontSize:"9px",letterSpacing:"-0.3px",maxWidth:"100%",display:"block"},children:it.name}),Q===`${Le.id}-${vt}`&&n.jsxs("div",{className:"milestone-tooltip",style:{...we.milestoneTooltip,position:"absolute",bottom:"100%",top:"auto",marginBottom:"10px",left:"50%",transform:"translateX(-50%)",maxWidth:"300px",maxHeight:"220px",overflowY:"auto",wordBreak:"break-word",zIndex:9999},onMouseEnter:()=>{D.current&&clearTimeout(D.current),V(`${Le.id}-${vt}`)},onMouseLeave:()=>{D.current=setTimeout(()=>{V(null)},150)},children:[n.jsx("div",{style:{marginBottom:"4px",fontWeight:"700"},children:it.name}),n.jsxs("div",{style:{fontSize:"11px",opacity:.9},children:[kt.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," - ",Qt.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),n.jsx("div",{style:{fontSize:"11px",marginTop:"4px",color:it.color,fontWeight:"700"},children:it.status}),dt[Le.id]!=="viewer"&&n.jsxs("button",{style:{...we.changeStatusButton(g===`change-${Le.id}-${vt}`),marginTop:"4px"},onMouseEnter:()=>y(`change-${Le.id}-${vt}`),onMouseLeave:()=>y(null),onClick:is=>{is.stopPropagation(),Ur(Le,it.name,it.status)},children:[n.jsx(Kr,{size:12}),"Change Status"]})]})]},`${Le.id}-${vt}`)}):(()=>{var dn;const it=(xt-Pe)/864e5,vt=(ft-Pe)/(1e3*60*60*24),kt=(Jt-Pe)/(1e3*60*60*24),Qt=vt/it*100,Xr=(kt-vt)/it*100;return n.jsx("div",{style:{position:"absolute",left:`calc(200px + (100% - 200px) * ${Qt/100})`,width:`calc((100% - 200px) * ${Xr/100})`,height:"24px",top:"8px",backgroundColor:Yr((dn=Le.fields)==null?void 0:dn.status),display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:"600",padding:"0 8px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",pointerEvents:"auto"},children:Le.project})})()]})]},Le.id)}),n.jsxs("div",{style:we.legend,children:[n.jsxs("div",{style:we.legendItem,children:[n.jsx("div",{style:we.legendColor("#3b82f6")}),"Completed"]}),n.jsxs("div",{style:we.legendItem,children:[n.jsx("div",{style:we.legendColor("#10b981")}),"On Track"]}),n.jsxs("div",{style:we.legendItem,children:[n.jsx("div",{style:we.legendColor("#f59e0b")}),"At Risk"]}),n.jsxs("div",{style:we.legendItem,children:[n.jsx("div",{style:we.legendColor("#ef4444")}),"Delayed"]})]}),Zt!==-1&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{position:"absolute",top:"0px",bottom:"80px",height:"auto",left:`calc(200px + (100% - 200px) * ${(Zt+cr/100)/rt.length})`,width:"2px",backgroundImage:"linear-gradient(to bottom, #ef4444 60%, transparent 60%)",backgroundSize:"2px 16px",backgroundRepeat:"repeat-y",zIndex:100,pointerEvents:"none"}}),n.jsx("div",{style:{position:"absolute",top:"-40px",left:`calc(200px + (100% - 200px) * ${(Zt+cr/100)/rt.length})`,transform:"translateX(-50%)",backgroundColor:"#ef4444",color:"#fff",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"700",whiteSpace:"nowrap",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:101},children:"Today"})]})]})})()})]}),n.jsxs("div",{style:we.statsContainer,children:[n.jsxs("div",{style:we.statCard(b==="stat1"),onMouseEnter:()=>H("stat1"),onMouseLeave:()=>H(null),children:[n.jsx("div",{style:we.statNumber,children:i.length}),n.jsx("div",{style:we.statLabel,children:"Total Master Plans"})]}),n.jsxs("div",{style:we.statCard(b==="stat2"),onMouseEnter:()=>H("stat2"),onMouseLeave:()=>H(null),children:[n.jsx("div",{style:we.statNumber,children:i.filter(z=>{const ce=he(z);return ce&&!ce.toLowerCase().includes("complete")}).length}),n.jsx("div",{style:we.statLabel,children:"In Progress"})]}),n.jsxs("div",{style:we.statCard(b==="stat3"),onMouseEnter:()=>H("stat3"),onMouseLeave:()=>H(null),children:[n.jsx("div",{style:we.statNumber,children:i.filter(z=>{const ce=he(z);return ce&&ce.toLowerCase().includes("complete")}).length}),n.jsx("div",{style:we.statLabel,children:"Completed"})]})]}),k&&Z&&n.jsx("div",{style:we.deleteConfirmation,children:n.jsxs("div",{style:we.deleteModal,children:[n.jsx("h3",{style:we.deleteModalTitle,children:"Delete Plan"}),n.jsxs("p",{style:we.deleteModalText,children:['Are you sure you want to delete "',Z.project,'"? This action cannot be undone and will permanently remove all associated data.']}),n.jsxs("div",{style:we.deleteModalActions,children:[n.jsx("button",{style:we.modalButton(g==="cancel","cancel"),onMouseEnter:()=>y("cancel"),onMouseLeave:()=>y(null),onClick:lr,children:"Cancel"}),n.jsx("button",{style:we.modalButton(g==="confirm-delete","danger"),onMouseEnter:()=>y("confirm-delete"),onMouseLeave:()=>y(null),onClick:$r,children:"Delete Plan"})]})]})}),P&&je&&n.jsx("div",{style:we.statusModal,children:n.jsxs("div",{style:we.statusModalContent,children:[n.jsx("h3",{style:we.statusModalTitle,children:"Change Milestone Status"}),n.jsxs("p",{style:we.statusModalSubtitle,children:[n.jsx("strong",{children:"Project:"})," ",je.plan.project,n.jsx("br",{}),n.jsx("strong",{children:"Milestone:"})," ",je.milestoneName]}),n.jsxs("select",{style:we.statusSelect,value:B,onChange:z=>j(z.target.value),children:[n.jsx("option",{value:"On Track",children:"On Track"}),n.jsx("option",{value:"At Risk",children:"At Risk"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Delayed",children:"Delayed"})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{fontSize:"14px",fontWeight:"600",color:F?"#d1d5db":"#374151",marginBottom:"8px",display:"block"},children:"Justification (Optional) "}),n.jsx("textarea",{style:{width:"100%",padding:"12px",borderRadius:"8px",border:F?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:F?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:F?"#e2e8f0":"#1e293b",fontSize:"14px",fontFamily:'"Montserrat", sans-serif',resize:"vertical",minHeight:"80px",outline:"none"},placeholder:"Optionally explain why you're changing this status...",value:je.justification||"",onChange:z=>U({...je,justification:z.target.value})})]}),n.jsxs("div",{style:we.deleteModalActions,children:[n.jsx("button",{style:we.modalButton(g==="cancel-status","cancel"),onMouseEnter:()=>y("cancel-status"),onMouseLeave:()=>y(null),onClick:()=>{oe(!1),U(null),j("")},children:"Cancel"}),n.jsx("button",{style:{...we.modalButton(g==="confirm-status","primary"),backgroundColor:g==="confirm-status"?"#2563eb":"#3b82f6"},onMouseEnter:()=>y("confirm-status"),onMouseLeave:()=>y(null),onClick:Ci,children:"Update Status "})]})]})}),G&&pe&&n.jsx("div",{style:we.historyModal,children:n.jsxs("div",{style:we.historyModalContent,children:[n.jsx("div",{style:we.historyModalHeader,children:n.jsxs("div",{children:[n.jsxs("div",{style:we.historyModalTitle,children:[n.jsx(El,{size:24}),"Project History"]}),n.jsx("div",{style:we.historyModalSubtitle,children:pe.name})]})}),n.jsxs("div",{style:we.historyList,children:[n.jsxs("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:F?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",borderRadius:"12px",border:F?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)"},children:[n.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:F?"#94a3b8":"#64748b",marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Filter by Change Type"}),n.jsxs("select",{value:Tt,onChange:z=>I(z.target.value),style:{width:"100%",padding:"10px 14px",borderRadius:"8px",border:F?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:F?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:F?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",cursor:"pointer",outline:"none"},children:[n.jsx("option",{value:"all",children:"All Changes"}),n.jsx("option",{value:"status_changed",children:"Status Changed"}),n.jsx("option",{value:"dates_changed",children:"Dates Changed"}),n.jsx("option",{value:"milestone_added",children:"Milestone Added"}),n.jsx("option",{value:"milestone_deleted",children:"Milestone Deleted"}),n.jsx("option",{value:"project_renamed",children:"Project Renamed"}),n.jsx("option",{value:"project_dates_changed",children:"Project Timeline Changed"})]})]}),Ue?n.jsxs("div",{style:we.historyLoadingState,children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"12px"},children:""}),"Loading history..."]}):be.length===0?n.jsxs("div",{style:we.historyEmptyState,children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No history found"}),n.jsx("div",{children:"This plan has no recorded changes yet"})]}):(()=>{const z=Tt==="all"?be:be.filter(ce=>ce.ChangeType===Tt);return z.length===0?n.jsxs("div",{style:we.historyEmptyState,children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No matching changes"}),n.jsx("div",{children:"Try selecting a different filter"})]}):z.map((ce,Ee)=>n.jsxs("div",{style:we.historyItem(g===`history-${Ee}`),onMouseEnter:()=>y(`history-${Ee}`),onMouseLeave:()=>y(null),children:[n.jsxs("div",{style:we.historyItemHeader,children:[n.jsx("div",{style:we.historyChangeType(Ce(ce.ChangeType)),children:ae(ce.ChangeType)}),n.jsx("div",{style:we.historyTimestamp,children:new Date(ce.ChangedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),n.jsx("div",{style:we.historyMilestoneName,children:ce.MilestoneName}),ce.OldValue&&ce.NewValue&&n.jsxs("div",{style:we.historyChangeDetails,children:[n.jsx("span",{style:we.historyValue(!0),children:ce.OldValue}),n.jsx("span",{style:{fontSize:"16px",fontWeight:"700"},children:""}),n.jsx("span",{style:we.historyValue(!1),children:ce.NewValue})]}),!ce.OldValue&&ce.NewValue&&n.jsx("div",{style:we.historyChangeDetails,children:n.jsx("span",{style:we.historyValue(!1),children:ce.NewValue})}),ce.OldValue&&!ce.NewValue&&n.jsx("div",{style:we.historyChangeDetails,children:n.jsx("span",{style:we.historyValue(!0),children:ce.OldValue})}),n.jsxs("div",{style:we.historyChangedBy,children:[n.jsx(Nt,{size:12}),"Changed by: ",ce.ChangedBy]}),ce.Justification&&n.jsxs("div",{style:{marginTop:"12px",padding:"12px",borderRadius:"8px",backgroundColor:F?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",border:F?"1px solid rgba(59,130,246,0.3)":"1px solid rgba(59,130,246,0.2)"},children:[n.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:F?"#93c5fd":"#3b82f6",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Justification:"}),n.jsxs("div",{style:{fontSize:"13px",color:F?"#e2e8f0":"#1e293b",lineHeight:"1.5",fontStyle:"italic"},children:['"',ce.Justification,'"']})]})]},ce.Id||Ee))})()]}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:n.jsx("button",{style:we.closeHistoryButton(g==="close-history"),onMouseEnter:()=>y("close-history"),onMouseLeave:()=>y(null),onClick:()=>{se(!1),Me(null),de([]),I("all")},children:"Close"})})]})})]})},VU=()=>{var Ke,nt;const[i,e]=m.useState(null),[t,r]=m.useState([]),[a,A]=m.useState(!0),[c,p]=m.useState(null),[u,f]=m.useState(null),[g,y]=m.useState(!1),[b,H]=m.useState("Individual Plan");m.useRef(null);const[S,L]=m.useState(!1),[Q,V]=m.useState("cards"),[D,te]=m.useState("my"),J=m.useRef({});m.useRef(null);const[M,N]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[X,Be]=m.useState(""),[Ae,le]=m.useState("all"),[G,se]=m.useState(0),[pe,Me]=m.useState(0),be=["L1","L2"],[de,Ue]=m.useState([]),[me,F]=m.useState(0),re=de.length>0,P=m.useRef(null),oe=m.useRef(null),[je,U]=m.useState({x:0,y:0});m.useRef({});const B=m.useRef(!1),[j,_]=m.useState(null),[ve,k]=m.useState(!1),[O,Z]=m.useState(null),[ke,at]=m.useState(!1),[T,ge]=m.useState(null),He=(E,$)=>{const Qe=new Date(E),W=new Date($),Y=new Date;if(Y<=Qe)return 0;if(Y>=W)return 100;const We=W-Qe,Ze=Y-Qe;return Math.round(Ze/We*100)},ze=(E,$)=>{const Qe=E?new Date(E):null,W=$?new Date($):null;return!Qe||!W||isNaN(Qe)||isNaN(W)?0:Math.floor((W-Qe)/(1e3*60*60*24))},mt=E=>{if(!E)return null;if(E instanceof Date)return E;if(typeof E=="number")return new Date(E);if(E=String(E).trim(),/^\d{4}-\d{2}-\d{2}/.test(E)){const[$,Qe,W]=E.split("T")[0].split("-");return new Date(Number($),Number(Qe)-1,Number(W))}if(/^\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}$/.test(E)){const[$,Qe,W]=E.split(/[\/\-]/);return new Date(Number(W),Number(Qe)-1,Number($))}return console.warn(" Unrecognized date format:",E),null},tt=E=>E!=null&&E.includes("Progress")?"#10b981":E!=null&&E.includes("Complete")?"#3b82f6":E!=null&&E.includes("Risk")?"#f59e0b":"#64748b",Se=t.map(E=>{var $,Qe;return{id:E.Id,title:(($=E.Fields)==null?void 0:$.title)||"Untitled Plan",project:E.Project,projectType:E.ProjectType||"custom",status:((Qe=E.Fields)==null?void 0:Qe.status)||"In Progress",progress:He(E.StartDate,E.EndDate),startDate:E.StartDate,endDate:E.EndDate,lastUpdated:E.CreatedAt?new Date(E.CreatedAt).toLocaleString():"N/A",fields:E.Fields}}),ie=["Your assigned projects and personal timeline",()=>`${Se.length} active individual plans`,()=>D==="my"?"Currently viewing: My Plans":"Currently viewing: Supervised Plans"],dt=de.map(E=>({id:E.id,title:E.project,project:E.project,projectType:E.projectType||"custom",status:E.status,progress:He(E.startDate,E.endDate),startDate:E.startDate,endDate:E.endDate,lastUpdated:"N/A",ownerName:E.ownerName,fields:E.fields}));m.useEffect(()=>{oe.current||(oe.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),P.current&&document.head.removeChild(P.current);const E=document.createElement("style");E.setAttribute("data-component","admin-individual-plan-background");const $=M?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return E.textContent=`
      /* More specific targeting to avoid conflicts */
      .admin-individual-plan-page {
        min-height: 100vh;
        background: ${$};
      }
      
      /* Target common parent containers more carefully */
      body {
        background: ${$} !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      /* Only target direct children of common containers */
      #root > div:first-child,
      .app > div:first-child,
      .main-content,
      .page-container {
        background: transparent !important;
        min-height: 100vh;
      }
      
      /* Fallback for nested containers */
      div[style*="background: white"],
      div[style*="background-color: white"],
      div[style*="background: #fff"],
      div[style*="background-color: #fff"] {
        background: transparent !important;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      /* Smooth transitions for theme changes */
      * {
        transition: background-color 0.3s ease, background 0.3s ease;
      }

      @keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(2px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
    `,document.head.appendChild(E),P.current=E,()=>{P.current&&document.head.contains(P.current)&&(document.head.removeChild(P.current),P.current=null),oe.current&&document.querySelectorAll('[data-component="admin-individual-plan-background"]').length===0&&Object.assign(document.body.style,oe.current)}},[M]),m.useEffect(()=>{(async()=>{try{console.log(" Fetching individual plans...");const $=await Fe("/plan/individual",{method:"GET",credentials:"include"});if(!$.ok)throw new Error(`Fetch failed: ${$.status}`);const Qe=await $.json();console.log(" Plans received:",Qe),r(Qe)}catch($){console.error(" Error fetching individual plans:",$)}finally{A(!1)}})()},[]),m.useEffect(()=>{(async()=>{try{console.log(" Fetching supervised individual plans...");const $=await Fe("/plan/individual/supervised",{method:"GET",credentials:"include"});if(!$.ok)return;const Qe=await $.json();console.log(" Supervised plans received:",Qe),Ue(Qe)}catch($){console.error(" Error fetching supervised plans:",$)}})()},[]),m.useEffect(()=>{(async()=>{try{console.log(" Fetching user profile...");const $=await Fe("/user/profile",{method:"GET",credentials:"include"});if(!$.ok)throw new Error(`Profile fetch failed: ${$.status}`);const Qe=await $.json();console.log(" User data received:",Qe),e(Qe)}catch($){console.error(" Error fetching user profile:",$)}})()},[]),m.useEffect(()=>{const E=async()=>{try{console.log(" Fetching master plans count...");const $=await Fe("/plan/master",{method:"GET",credentials:"include"});if($.ok){const W=(await $.json()).filter(We=>We.createdBy===(i==null?void 0:i.id));se(W.length);const Y=W.filter(We=>We.approvalStatus==="Pending Approval").length;Me(Y),console.log(` Master Plans: ${W.length}, Pending: ${Y}`)}}catch($){console.error(" Error fetching master plans count:",$)}};i!=null&&i.id&&E()},[i]),m.useEffect(()=>{const E=setInterval(()=>{F($=>($+1)%ie.length)},5e3);return()=>clearInterval(E)},[Se.length,D]);const ht=E=>{console.log(` AdminIndividualPlan - Navigating to ${E} tab`),E==="Master Plan"?(console.log(" Navigating to master plan page"),window.location.href="/adminviewplan"):E==="Approvals"?(console.log(" Navigating to approvals page"),window.location.href="/adminapprovals"):console.log(" Staying on individual plan page")},R=()=>{N(!M),y(!1)},Ut=E=>E>=80?"#10b981":E>=50?"#f59e0b":"#ef4444",I=(D==="my"?Se:dt).filter(E=>{const $=E.title||"",Qe=E.project||"",W=$.toLowerCase().includes(X.toLowerCase())||Qe.toLowerCase().includes(X.toLowerCase()),Y=Ae==="all"||E.projectType===Ae;return W&&Y}),v={page:{minHeight:"100vh",padding:"30px",background:M?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:M?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},createButton:E=>({backgroundColor:E?"#059669":"#10b981",color:"#fff",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:E?"translateY(-2px)":"translateY(0)",boxShadow:E?"0 8px 25px rgba(16,185,129,0.3)":"0 4px 12px rgba(16,185,129,0.2)"}),topButton:E=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:E?"rgba(59,130,246,0.1)":M?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:E?"#3b82f6":M?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:E?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:E?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:M?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:M?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:M?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:M?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:M?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:M?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:M?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:M?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:M?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:M?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:M?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(E,$)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",outline:"none",backgroundColor:E?"#3b82f6":$?M?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:E?"#fff":M?"#e2e8f0":"#64748b",transform:$&&!E?"translateY(-1px)":"translateY(0)",boxShadow:E?"0 4px 12px rgba(59,130,246,0.3)":$&&!E?"0 2px 8px rgba(0,0,0,0.1)":"none"}),searchContainer:{position:"relative",marginBottom:"24px",maxWidth:"400px"},searchInput:{width:"100%",padding:"12px 16px 12px 44px",borderRadius:"12px",border:M?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:M?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:M?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',boxSizing:"border-box",position:"relative",zIndex:1},searchIcon:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:M?"#94a3b8":"#64748b",transition:"all 0.3s ease",zIndex:2,pointerEvents:"none"},viewModeToggle:{display:"flex",gap:"4px",padding:"4px",backgroundColor:M?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",border:M?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",borderRadius:"12px",backdropFilter:"blur(10px)",marginBottom:"24px",maxWidth:"fit-content"},viewModeButton:E=>({padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:E?"#3b82f6":"transparent",color:E?"#fff":M?"#e2e8f0":"#64748b",boxShadow:E?"0 2px 8px rgba(59,130,246,0.3)":"none"}),plansGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"24px",marginBottom:"32px"},planCard:E=>({backgroundColor:M?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"24px",boxShadow:E?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:E?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",border:M?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden",cursor:"pointer"}),cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},planTitle:{fontSize:"18px",fontWeight:"700",color:M?"#e2e8f0":"#1e293b",marginBottom:"4px",transition:"all 0.3s ease"},planOwner:{fontSize:"14px",color:M?"#94a3b8":"#64748b",transition:"all 0.3s ease"},actionButtons:{display:"flex",gap:"8px"},actionButton:(E,$="#64748b")=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:E?`${$}15`:"transparent",color:E?$:M?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",transform:E?"scale(1.1)":"scale(1)"}),statusBadge:E=>({display:"inline-flex",alignItems:"center",padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",backgroundColor:`${tt(E)}20`,color:tt(E),marginBottom:"16px"}),progressContainer:{marginBottom:"16px"},progressLabel:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},progressText:{fontSize:"14px",fontWeight:"600",color:M?"#e2e8f0":"#374151",transition:"all 0.3s ease"},progressPercentage:E=>({fontSize:"14px",fontWeight:"700",color:Ut(E)}),progressBar:{width:"100%",height:"8px",backgroundColor:M?"#4b5563":"#f1f5f9",borderRadius:"4px",overflow:"hidden"},progressFill:E=>({width:`${E}%`,height:"100%",backgroundColor:Ut(E),borderRadius:"4px",transition:"width 0.3s ease"}),planStats:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",marginBottom:"16px"},statItem:{textAlign:"center",padding:"12px",backgroundColor:M?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},statNumber:{fontSize:"20px",fontWeight:"700",color:M?"#e2e8f0":"#1e293b",marginBottom:"4px",transition:"all 0.3s ease"},statLabel:{fontSize:"12px",color:M?"#94a3b8":"#64748b",fontWeight:"500",transition:"all 0.3s ease"},planFooter:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"16px",borderTop:M?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"},dateRange:{fontSize:"12px",color:M?"#94a3b8":"#64748b",transition:"all 0.3s ease"},lastUpdated:{fontSize:"12px",color:M?"#94a3b8":"#64748b",fontStyle:"italic",transition:"all 0.3s ease"},statsContainer:{display:"block",width:"100%",marginTop:"32px"},statCard:E=>({backgroundColor:M?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"28px",textAlign:"center",boxShadow:E?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",border:M?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:E?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",cursor:"pointer",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.03) 0%, transparent 70%)",opacity:0,transition:"opacity 0.4s ease",pointerEvents:"none"},statCardNumber:{fontSize:"36px",fontWeight:"800",color:M?"#e2e8f0":"#1e293b",marginBottom:"8px",transition:"all 0.3s ease"},statCardLabel:{fontSize:"14px",color:M?"#94a3b8":"#64748b",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},sectionTitle:{fontSize:"24px",fontWeight:"700",color:M?"#e2e8f0":"#1e293b",margin:0,transition:"all 0.3s ease"},sectionSubtitle:{fontSize:"14px",color:M?"#94a3b8":"#64748b",margin:"4px 0 0 0",transition:"all 0.3s ease"},planTypeBadge:E=>({display:"inline-block",padding:"4px 10px",borderRadius:"999px",fontSize:"11px",fontWeight:"700",letterSpacing:"0.5px",marginBottom:"8px",backgroundColor:E?"rgba(168,85,247,0.15)":"rgba(59,130,246,0.15)",color:E?"#a855f7":"#3b82f6"}),ganttContainer:{marginTop:"24px",overflowX:"auto",overflowY:"visible",position:"relative",paddingTop:"60px",paddingBottom:"30px",minHeight:"300px",maxWidth:"100%"},ganttCard:E=>({backgroundColor:M?"#374151":"#fff",borderRadius:"20px",padding:"28px",marginBottom:"28px",boxShadow:E?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:E?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",border:M?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"visible"}),taskHeader:{fontSize:"12px",fontWeight:"600",color:M?"#e2e8f0":"#475569",padding:"8px 12px",transition:"all 0.3s ease"},monthHeader:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:M?"#e2e8f0":"#475569",padding:"8px 4px",transition:"all 0.3s ease",borderBottom:M?"2px solid #4b5563":"2px solid #cbd5e1"},taskName:{fontSize:"14px",fontWeight:"500",color:M?"#e2e8f0":"#374151",padding:"12px",backgroundColor:M?"#4b5563":"#f8fafc",borderRadius:"8px",transition:"all 0.3s ease"},ganttCell:{height:"40px",position:"relative",transition:"all 0.3s ease"},legend:{display:"flex",gap:"24px",marginTop:"20px",padding:"20px",backgroundColor:M?"#4b5563":"#f8fafc",borderRadius:"12px",transition:"all 0.3s ease"},legendItem:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",color:M?"#e2e8f0":"#475569",transition:"all 0.3s ease"},legendColor:E=>({width:"16px",height:"16px",borderRadius:"4px",backgroundColor:E,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}),milestoneTooltip:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",backgroundColor:M?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)",borderRadius:"8px",padding:"12px 16px",marginBottom:"8px",maxWidth:"300px",minWidth:"200px",fontSize:"12px",fontWeight:"600",color:M?"#e2e8f0":"#1e293b",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",border:M?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",zIndex:99999,pointerEvents:"auto",whiteSpace:"normal",wordWrap:"break-word",wordBreak:"break-word"},rulerTick:{position:"absolute",bottom:0,width:"1px",height:"8px",backgroundColor:M?"#64748b":"#cbd5e1"},rulerMajorTick:{position:"absolute",bottom:0,width:"2px",height:"12px",backgroundColor:"#94a3b8"},checkbox:E=>({width:"18px",height:"18px",borderRadius:"4px",border:E?"2px solid #3b82f6":M?"2px solid #64748b":"2px solid #cbd5e1",backgroundColor:E?"#3b82f6":"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:"700",transition:"all 0.2s ease"})},he=()=>I.length===0?n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:M?"#94a3b8":"#64748b"},children:[n.jsx(To,{size:48,style:{marginBottom:"16px",opacity:.5}}),n.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"600"},children:"No assignments found"}),n.jsx("p",{style:{margin:0,fontSize:"14px"},children:X?"Try adjusting your search terms":"You have no project assignments at the moment"})]}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:I.map(E=>{const $=[],Qe=E.projectType==="planned-leave";E.fields&&Object.entries(E.fields).forEach(([ae,Ce])=>{if(ae==="title"||ae==="status"||ae==="leaveType"||ae==="leaveReason")return;let At,bt,Pt;if(typeof Ce=="string"){const Ln=Ce.split(" - ");Ln.length===2&&(At=mt(Ln[0].trim()),bt=mt(Ln[1].trim()),Pt=Qe?void 0:"Ongoing")}else typeof Ce=="object"&&Ce!==null&&(At=mt(Ce.startDate),bt=mt(Ce.endDate),Pt=Qe?void 0:Ce.status||"Ongoing");At&&bt&&$.push({name:ae,startDate:At,endDate:bt,status:Pt,color:Qe?"#8b5cf6":Pt==="Completed"?"#3b82f6":"#10b981"})});let W,Y,We,Ze;if(Qe){const ae=new Date().getFullYear();W=new Date(ae,0,1),Y=new Date(ae,11,31),We=12,Ze=Array.from({length:12},(Ce,At)=>({label:new Date(ae,At,1).toLocaleDateString("en-US",{month:"short"}),date:new Date(ae,At,1)}))}else{const ae=$.flatMap(Ce=>[Ce.startDate,Ce.endDate]);if(ae.length===0)return null;W=new Date(Math.min(...ae)),Y=new Date(Math.max(...ae)),We=Math.ceil((Y-W)/(1e3*60*60*24*30))+1,Ze=[];for(let Ce=0;Ce<We;Ce++){const At=new Date(W);At.setMonth(W.getMonth()+Ce),Ze.push({label:At.toLocaleDateString("en-US",{month:"short",year:"numeric"}),date:new Date(At)})}}const St=new Date;St.setHours(0,0,0,0);let xe=-1,C=0;for(let ae=0;ae<Ze.length;ae++){const Ce=new Date(Ze[ae].date);Ce.setDate(1),Ce.setHours(0,0,0,0);const At=new Date(Ce.getFullYear(),Ce.getMonth()+1,0);if(At.setHours(23,59,59,999),St>=Ce&&St<=At){xe=ae;const bt=At.getDate();C=St.getDate()/bt*100;break}}return n.jsxs("div",{ref:ae=>{ae&&(J.current[E.id]=ae)},style:{...v.ganttCard(u===`timeline-${E.id}`),position:"relative",zIndex:1,overflow:"visible"},onMouseEnter:()=>f(`timeline-${E.id}`),onMouseLeave:()=>f(null),children:[n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:v.planTypeBadge(be.includes(E.project)),children:be.includes(E.project)?"OPERATION":"PROJECT"}),D==="supervised"&&n.jsx("div",{style:{display:"inline-block",padding:"4px 10px",borderRadius:"999px",fontSize:"11px",fontWeight:"700",marginBottom:"6px",backgroundColor:"rgba(239,68,68,0.15)",color:"#ef4444"},children:"READ-ONLY (SUPERVISED)"}),n.jsx("div",{style:v.planTitle,children:E.title}),n.jsxs("div",{style:v.planOwner,children:["Project: ",E.project]}),D==="supervised"&&E.ownerName&&n.jsxs("div",{style:v.planOwner,children:["Owner: ",E.ownerName]})]}),n.jsxs("div",{style:{position:"relative",overflowX:"auto",minHeight:"120px"},children:[n.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Ze.length}, 1fr)`,gap:"0",marginBottom:"12px",backgroundColor:M?"#4b5563":"#f8fafc",borderRadius:"8px",padding:"8px 0",position:"relative",zIndex:10},children:Ze.map((ae,Ce)=>n.jsxs("div",{style:{textAlign:"center",fontSize:"11px",fontWeight:"600",color:M?"#e2e8f0":"#475569",position:"relative",paddingBottom:"4px"},children:[ae.label,[0,25,50,75,100].map((At,bt)=>n.jsx("div",{style:{...bt===0||bt===4?v.rulerMajorTick:v.rulerTick,left:`calc(${At}% - 1px)`}},bt))]},Ce))}),n.jsxs("div",{style:{position:"relative",height:`${$.length*32}px`,zIndex:10},children:[$.map((ae,Ce)=>{const At=uo=>{for(let we=0;we<Ze.length;we++){const br=Ze[we].date;if(uo.getFullYear()===br.getFullYear()&&uo.getMonth()===br.getMonth())return we}return-1},bt=At(ae.startDate),Pt=At(ae.endDate);if(bt===-1||Pt===-1)return null;const Ln=new Date(ae.startDate.getFullYear(),ae.startDate.getMonth()+1,0).getDate(),$r=new Date(ae.endDate.getFullYear(),ae.endDate.getMonth()+1,0).getDate(),lr=ae.startDate.getDate()/Ln*100,Ur=ae.endDate.getDate()/$r*100,Ci=`calc((100% * (${bt} / ${Ze.length})) + (100% * (${lr} / 100 / ${Ze.length})))`,co=`calc(((100% * ((${Pt} - ${bt}) / ${Ze.length}))) + ((100% * ((${Ur} - ${lr}) / 100 / ${Ze.length}))))`;return n.jsx("div",{style:{position:"absolute",left:Ci,width:co,top:`${Ce*32}px`,height:"24px",backgroundColor:ae.color,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"11px",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",cursor:"pointer"},onMouseEnter:uo=>{const we=uo.currentTarget.getBoundingClientRect(),br=J.current[E.id].getBoundingClientRect();_({planId:E.id,milestone:ae,barRect:we,cardRect:br})},onMouseLeave:()=>{requestAnimationFrame(()=>{B.current||_(null)})},children:n.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"0 8px"},children:ae.name})},Ce)}),xe!==-1&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{position:"absolute",top:"-40px",bottom:"0",left:`calc((100% * (${xe} / ${Ze.length})) + (100% * (${C} / 100 / ${Ze.length})))`,width:"2px",backgroundImage:"linear-gradient(to bottom, #ef4444 60%, transparent 60%)",backgroundSize:"2px 16px",backgroundRepeat:"repeat-y",zIndex:3,pointerEvents:"none"}}),n.jsx("div",{style:{position:"absolute",top:"-35px",left:`calc((100% * (${xe} / ${Ze.length})) + (100% * (${C} / 100 / ${Ze.length})))`,transform:"translateX(-50%)",backgroundColor:"#ef4444",color:"#fff",padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:"700",whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:4},children:"Today"})]})]}),n.jsx("div",{style:{display:"flex",gap:"20px",marginTop:"16px",padding:"12px 16px",backgroundColor:M?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"8px",justifyContent:"center"},children:Qe?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",backgroundColor:"#8b5cf6"}}),n.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:M?"#e2e8f0":"#475569"},children:"Leave Period"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",backgroundColor:"#10b981"}}),n.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:M?"#e2e8f0":"#475569"},children:"Ongoing"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",backgroundColor:"#3b82f6"}}),n.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:M?"#e2e8f0":"#475569"},children:"Completed"})]})]})}),n.jsxs("div",{style:{...v.planFooter,marginTop:"20px",paddingTop:"16px"},children:[n.jsxs("div",{style:v.dateRange,children:[new Date(E.startDate).toLocaleDateString()," - ",new Date(E.endDate).toLocaleDateString()]}),n.jsxs("div",{style:v.lastUpdated,children:["Updated ",E.lastUpdated]})]})]}),(j==null?void 0:j.planId)===E.id&&n.jsxs("div",{className:"milestone-tooltip",onMouseEnter:()=>{B.current=!0},onMouseLeave:()=>{B.current=!1,_(null)},onMouseDown:ae=>{ae.stopPropagation()},style:{position:"absolute",left:j.barRect.left-j.cardRect.left+j.barRect.width/2,top:j.barRect.top-j.cardRect.top-4,transform:"translate(-50%, -100%)",backgroundColor:M?"rgba(30,41,59,0.97)":"rgba(255,255,255,0.97)",backdropFilter:"blur(12px)",borderRadius:"10px",padding:"12px 16px",fontSize:"12px",fontWeight:"600",color:M?"#e2e8f0":"#1e293b",boxShadow:"0 20px 60px rgba(0,0,0,0.4)",border:M?"1px solid rgba(51,65,85,0.9)":"1px solid rgba(226,232,240,0.9)",zIndex:9999999,pointerEvents:"auto",maxWidth:"320px"},children:[n.jsx("div",{style:{fontWeight:"700",marginBottom:"4px"},children:j.milestone.name}),n.jsxs("div",{style:{fontSize:"11px",opacity:.9,marginBottom:"8px"},children:[j.milestone.startDate.toLocaleDateString()," "," ",j.milestone.endDate.toLocaleDateString()]}),D==="supervised"&&n.jsx("div",{style:{fontSize:"10px",fontWeight:"700",color:"#ef4444",backgroundColor:"rgba(239,68,68,0.15)",padding:"4px 8px",borderRadius:"999px",textAlign:"center"},children:"READ-ONLY (SUPERVISED)"}),D==="my"&&!Qe&&n.jsx("button",{style:{marginTop:"8px",width:"100%",padding:"6px 10px",borderRadius:"8px",border:"none",backgroundColor:"#3b82f6",color:"#fff",fontSize:"11px",fontWeight:"600",cursor:"pointer"},onMouseDown:ae=>{ae.stopPropagation()},onClick:ae=>{ae.stopPropagation(),Z({planId:E.id,milestoneName:j.milestone.name,currentStatus:j.milestone.status}),k(!0),_(null)},children:"Change Status"})]})]},E.id)})});return n.jsxs("div",{className:"admin-individual-plan-page",style:v.page,children:[n.jsxs("div",{style:v.headerRow,children:[n.jsx("div",{style:v.headerLeft,children:n.jsx("h1",{style:v.header,children:"Plan"})}),n.jsxs("div",{style:v.headerRight,children:[n.jsxs("button",{style:v.topButton(u==="alerts"),onMouseEnter:()=>f("alerts"),onMouseLeave:()=>f(null),onClick:()=>{console.log(" Alerts clicked - Navigating to alerts page"),window.location.href="/adminalerts"},children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:v.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:v.topButton(u==="profile"),onMouseEnter:()=>{f("profile"),y(!0)},onMouseLeave:()=>{f(null)},onClick:()=>{console.log(" Profile clicked - Navigating to profile page"),window.location.href="/adminprofile"},children:n.jsx(Nt,{size:20})}),g&&n.jsxs("div",{style:v.profileTooltip,onMouseEnter:()=>{y(!0)},onMouseLeave:()=>{y(!1)},children:[n.jsx("div",{style:v.tooltipArrow}),n.jsxs("div",{style:v.userInfo,children:[n.jsx("div",{style:v.avatar,children:i&&((((Ke=i.firstName)==null?void 0:Ke[0])||"")+(((nt=i.lastName)==null?void 0:nt[0])||"")).toUpperCase()||"U"}),n.jsxs("div",{style:v.userDetails,children:[n.jsx("div",{style:v.userName,children:i?`${i.firstName} ${i.lastName}`:"Loading..."}),n.jsx("div",{style:v.userRole,children:i?`${i.role||"User"}  ${i.department||"Department"}`:""})]})]}),n.jsxs("div",{style:v.userStats,children:[n.jsxs("div",{style:v.tooltipStatItem,children:[n.jsx("div",{style:v.tooltipStatNumber,children:Se.length}),n.jsx("div",{style:v.tooltipStatLabel,children:"My Plans"})]}),n.jsxs("div",{style:v.tooltipStatItem,children:[n.jsx("div",{style:v.tooltipStatNumber,children:de.length}),n.jsx("div",{style:v.tooltipStatLabel,children:"Supervised"})]}),n.jsxs("div",{style:v.tooltipStatItem,children:[n.jsx("div",{style:v.tooltipStatNumber,children:pe}),n.jsx("div",{style:v.tooltipStatLabel,children:"Pending"})]})]}),n.jsx("button",{style:v.themeToggle,onClick:R,children:M?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:v.tabContainer,children:["Master Plan","Individual Plan","Approvals"].map(E=>n.jsx("button",{style:v.tab(b===E,c===`tab-${E}`),onMouseEnter:()=>p(`tab-${E}`),onMouseLeave:()=>p(null),onClick:()=>ht(E),children:E},E))}),n.jsxs("div",{style:v.sectionHeader,children:[n.jsxs("div",{children:[n.jsxs("h2",{style:v.sectionTitle,children:["My Individual Plan",n.jsxs("span",{style:{marginLeft:"12px",fontSize:"14px",fontWeight:"600",color:M?"#94a3b8":"#64748b"},children:["(",Se.length,")"]})]}),n.jsx("p",{style:{...v.sectionSubtitle,minHeight:"20px",animation:"fadeIn 0.4s ease"},children:typeof ie[me]=="function"?ie[me]():ie[me]},me)]}),n.jsxs("button",{style:v.createButton(c==="create"),onMouseEnter:()=>p("create"),onMouseLeave:()=>p(null),onClick:()=>{window.location.href="/adminaddindividualplan"},children:[n.jsx(In,{size:16}),"Add New Assignment"]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",marginBottom:"24px"},children:[n.jsxs("div",{style:v.searchContainer,children:[n.jsx(kh,{size:18,style:v.searchIcon}),n.jsx("input",{type:"text",placeholder:D==="my"?"Search your assignments by title or project...":"Search supervised assignments...",value:X,onChange:E=>Be(E.target.value),style:v.searchInput})]}),n.jsx("div",{style:v.viewModeToggle,children:n.jsxs("select",{value:Ae,onChange:E=>le(E.target.value),style:{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"13px",fontWeight:"600",cursor:"pointer",backgroundColor:M?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:M?"#e2e8f0":"#64748b",outline:"none",fontFamily:'"Montserrat", sans-serif'},children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"master-plan",children:"Master Plan Projects"}),n.jsx("option",{value:"operation",children:"Operations"}),n.jsx("option",{value:"custom",children:"Custom Projects"}),n.jsx("option",{value:"planned-leave",children:"Planned Leave"})]})}),n.jsxs("div",{style:v.viewModeToggle,children:[n.jsx("button",{style:v.viewModeButton(D==="my"),onClick:()=>te("my"),children:"My Plans"}),re&&n.jsx("button",{style:v.viewModeButton(D==="supervised"),onClick:()=>te("supervised"),children:"Supervised Plans"})]}),n.jsxs("div",{style:v.viewModeToggle,children:[n.jsx("button",{style:v.viewModeButton(Q==="cards"),onClick:()=>V("cards"),children:"Progress View"}),n.jsx("button",{style:v.viewModeButton(Q==="timeline"),onClick:()=>V("timeline"),children:"Timeline View"})]})]}),Q==="cards"?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:v.plansGrid,children:I.map(E=>n.jsxs("div",{style:v.planCard(u===`plan-${E.id}`),onMouseEnter:()=>f(`plan-${E.id}`),onMouseLeave:()=>f(null),children:[n.jsxs("div",{style:v.cardHeader,children:[n.jsxs("div",{children:[n.jsx("div",{style:v.planTypeBadge(be.includes(E.project)),children:be.includes(E.project)?"OPERATION":"PROJECT"}),D==="supervised"&&n.jsx("div",{style:{display:"inline-block",padding:"4px 10px",borderRadius:"999px",fontSize:"11px",fontWeight:"700",marginBottom:"6px",backgroundColor:"rgba(239,68,68,0.15)",color:"#ef4444"},children:"READ-ONLY (SUPERVISED)"}),n.jsx("div",{style:v.planTitle,children:E.title}),n.jsxs("div",{style:v.planOwner,children:["Project: ",E.project]}),D==="supervised"&&E.ownerName&&n.jsxs("div",{style:v.planOwner,children:["Owner: ",E.ownerName]})]}),D==="my"&&n.jsxs("div",{style:v.actionButtons,children:[n.jsx("button",{style:v.actionButton(c===`status-${E.id}`,"#10b981"),onMouseEnter:()=>p(`status-${E.id}`),onMouseLeave:()=>p(null),onClick:$=>{$.stopPropagation(),Z({planId:E.id,planTitle:E.title,currentStatus:E.status,isOverallStatus:!0}),k(!0)},title:"Update Plan Status",children:n.jsx(Kr,{size:16})}),n.jsx("button",{style:v.actionButton(c===`edit-${E.id}`,"#f59e0b"),onMouseEnter:()=>p(`edit-${E.id}`),onMouseLeave:()=>p(null),onClick:$=>{$.stopPropagation(),window.location.href=`/admineditindividualplan?id=${E.id}`},title:"Edit Plan",children:n.jsx(eA,{size:16})}),n.jsx("button",{style:v.actionButton(c===`delete-${E.id}`,"#ef4444"),onMouseEnter:()=>p(`delete-${E.id}`),onMouseLeave:()=>p(null),onClick:$=>{$.stopPropagation(),ge(E),at(!0)},title:"Delete Plan",children:n.jsx(ar,{size:16})})]})]}),n.jsx("div",{style:v.statusBadge(E.status),children:E.status}),n.jsxs("div",{style:v.progressContainer,children:[n.jsxs("div",{style:v.progressLabel,children:[n.jsx("span",{style:v.progressText,children:"Progress"}),n.jsxs("span",{style:v.progressPercentage(E.progress),children:[E.progress,"%"]})]}),n.jsx("div",{style:v.progressBar,children:n.jsx("div",{style:v.progressFill(E.progress)})})]}),n.jsxs("div",{style:v.planStats,children:[n.jsxs("div",{style:v.statItem,children:[n.jsx("div",{style:v.statNumber,children:Math.max(0,ze(new Date,E.endDate))}),n.jsx("div",{style:v.statLabel,children:"Days Left"})]}),n.jsxs("div",{style:v.statItem,children:[n.jsx("div",{style:v.statNumber,children:Math.max(0,ze(E.startDate,new Date))}),n.jsx("div",{style:v.statLabel,children:"Days Elapsed"})]})]}),n.jsxs("div",{style:v.planFooter,children:[n.jsxs("div",{style:v.dateRange,children:[new Date(E.startDate).toLocaleDateString()," - ",new Date(E.endDate).toLocaleDateString()]}),n.jsxs("div",{style:v.lastUpdated,children:["Updated ",E.lastUpdated]})]})]},E.id))}),I.length===0&&n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:M?"#94a3b8":"#64748b"},children:[n.jsx(To,{size:48,style:{marginBottom:"16px",opacity:.5}}),n.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"600"},children:X||Ae!=="all"?"No assignments found":"No assignments yet"}),n.jsx("p",{style:{margin:0,fontSize:"14px"},children:X||Ae!=="all"?"Try adjusting your search terms or filter":"You have no project assignments at the moment"})]})]}):he(),ve&&O&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:n.jsxs("div",{style:{backgroundColor:M?"#374151":"#fff",borderRadius:"20px",padding:"32px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:M?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)"},children:[n.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:M?"#e2e8f0":"#1e293b",marginBottom:"8px"},children:O.isOverallStatus?"Update Plan Status":"Change Milestone Status"}),n.jsx("p",{style:{fontSize:"14px",color:M?"#94a3b8":"#64748b",marginBottom:"24px"},children:O.isOverallStatus?O.planTitle:O.milestoneName}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:(O.isOverallStatus?["Completed","Ongoing"]:["Ongoing","Completed"]).map(E=>n.jsxs("button",{onClick:async()=>{try{if(O.isOverallStatus){if(!(await Fe(`/plan/individual/${O.planId}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({...I.find(Qe=>Qe.id===O.planId),fields:{...I.find(Qe=>Qe.id===O.planId).fields,status:E}})})).ok)throw new Error("Failed to update plan status");r(Qe=>Qe.map(W=>{if(W.Id===O.planId){const Y={...W.Fields,status:E};return{...W,Fields:Y}}return W})),alert(` Plan status updated to ${E}`)}else{if(!(await Fe(`/plan/individual/${O.planId}/milestone`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({milestoneName:O.milestoneName,status:E})})).ok)throw new Error("Failed to update milestone status");r(Qe=>Qe.map(W=>{if(W.Id===O.planId){const Y={...W.Fields};return Y[O.milestoneName]&&(Y[O.milestoneName].status=E),{...W,Fields:Y}}return W})),alert(` ${O.milestoneName} status updated to ${E}`)}k(!1),Z(null)}catch($){console.error(" Failed to update status:",$),alert(`Failed to update status: ${$.message}`)}},style:{padding:"16px",borderRadius:"12px",border:O.currentStatus===E?`2px solid ${E.includes("Complete")?"#3b82f6":"#10b981"}`:M?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:O.currentStatus===E?E.includes("Complete")?"#3b82f620":"#10b98120":M?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",color:M?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:E.includes("Complete")?"#3b82f6":"#10b981"}}),E]},E))}),n.jsx("button",{onClick:()=>{k(!1),Z(null)},style:{width:"100%",padding:"12px",borderRadius:"12px",border:"none",backgroundColor:M?"rgba(51,65,85,0.5)":"rgba(226,232,240,0.3)",color:M?"#e2e8f0":"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"})]})})]})},$U=()=>{var Ut,Tt;const[i,e]=m.useState(null),[t,r]=m.useState(null),[a,A]=m.useState(!1),[c,p]=m.useState("Approvals"),[u,f]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[g,y]=m.useState(""),[b,H]=m.useState("Pending Approval"),[S,L]=m.useState(!1),[Q,V]=m.useState(null),[D,te]=m.useState(null),J={"Pending Approval":"pendingApproval",Approved:"approved",Rejected:"rejected"},[M,N]=m.useState(0),[X,Be]=m.useState(!1),[Ae,le]=m.useState(!1),[G,se]=m.useState([]),[pe,Me]=m.useState({pendingApproval:0,underReview:0,approved:0,rejected:0}),be={"Pending Approval":["Plans awaiting your decision",`${pe.pendingApproval} plans pending approval`,"Timely reviews keep projects moving"],Approved:["Approved master plans",`${pe.approved} plans approved`,"These plans are now in execution"],Rejected:["Rejected master plans",`${pe.rejected} plans rejected`,"Rejected plans require revision"]},[de,Ue]=m.useState(!1),[me,F]=m.useState(""),[re,P]=m.useState(!0),[oe,je]=m.useState(null),[U,B]=m.useState(!1),[j,_]=m.useState(""),[ve,k]=m.useState(null),O=m.useRef(null),Z=m.useRef(null),ke=m.useRef(null),at=async()=>{try{const I=await Fe("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(I.ok){const v=await I.json();je(v)}}catch(I){console.error("Error fetching user profile:",I)}},T=async()=>{try{P(!0),console.log(" Fetching approvals...");const I=await Fe("/api/approvals",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!I.ok)throw new Error("Failed to fetch approvals");const v=await I.json();console.log(" Approvals data received:",v),se(v.approvals),Me(v.stats),Ue(v.isApprover),F(v.userEmail)}catch(I){console.error(" Error fetching approvals:",I),alert("Failed to load approvals. Please refresh the page.")}finally{P(!1)}},ge=async(I,v)=>{if(!de){alert("You are not authorized to approve plans. Only designated approvers (muhammad.hasan@ihrp.sg and jumana.haseen@ihrp.sg) can approve.");return}let he="Are you sure you want to approve this master plan?";if(v==="Approved"?he="This plan is already approved. Do you want to re-approve it? (This will update the approval timestamp)":v==="Rejected"&&(he="This plan was previously rejected. Are you sure you want to approve it now?"),!!confirm(he))try{console.log(` Approving plan ${I}...`);const Ke=await Fe(`/api/approvals/${I}/approve`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({comments:""})}),nt=await Ke.json();if(!Ke.ok)throw new Error(nt.message||"Failed to approve plan");console.log(" Plan approved successfully"),alert("Master plan approved successfully!"),await T()}catch(Ke){console.error(" Error approving plan:",Ke),alert(Ke.message||"Failed to approve plan. Please try again.")}},He=(I,v)=>{if(!de){alert("You are not authorized to reject plans. Only designated approvers (muhammad.hasan@ihrp.sg and jumana.haseen@ihrp.sg) can reject.");return}k({planId:I,currentStatus:v}),_(""),B(!0)},ze=async()=>{if(!j||j.trim().length===0){alert("Please provide a reason for rejection");return}try{console.log(` Rejecting plan ${ve.planId}...`);const I=await Fe(`/api/approvals/${ve.planId}/reject`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:j.trim()})}),v=await I.json();if(!I.ok)throw new Error(v.message||"Failed to reject plan");console.log(" Plan rejected successfully"),alert("Master plan rejected successfully!"),B(!1),k(null),_(""),await T()}catch(I){console.error(" Error rejecting plan:",I),alert(I.message||"Failed to reject plan. Please try again.")}};if(m.useEffect(()=>{const I=document.getElementById("scrollbar-style");I&&I.remove();const v=document.createElement("style");return v.id="scrollbar-style",v.innerHTML=u?`
      /* Dark mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #1e293b;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #475569;
        border-radius: 10px;
        border: 2px solid #1e293b;
      }

      ::-webkit-scrollbar-thumb:hover {
        background-color: #64748b;
      }

      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #475569 #1e293b;
      }
    `:`
      /* Light mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #cbd5e1;
        border-radius: 10px;
        border: 2px solid #f1f5f9;
      }

      ::-webkit-scrollbar-thumb:hover {
        background-color: #94a3b8;
      }

      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #cbd5e1 #f1f5f9;
      }
    `,document.head.appendChild(v),()=>{v.remove()}},[u]),m.useEffect(()=>{T(),at()},[]),m.useEffect(()=>{Z.current||(Z.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),O.current&&document.head.removeChild(O.current);const I=document.createElement("style");I.setAttribute("data-component","admin-approvals-background");const v=u?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return I.textContent=`
      .admin-approvals-page {
        min-height: 100vh;
        background: ${v};
      }
      
      body {
        background: ${v} !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      #root > div:first-child,
      .app > div:first-child,
      .main-content,
      .page-container {
        background: transparent !important;
        min-height: 100vh;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      * {
        transition: background-color 0.3s ease, background 0.3s ease;
      }
    `,document.head.appendChild(I),O.current=I,()=>{O.current&&document.head.contains(O.current)&&(document.head.removeChild(O.current),O.current=null),Z.current&&document.querySelectorAll('[data-component="admin-approvals-background"]').length===0&&Object.assign(document.body.style,Z.current)}},[u]),m.useEffect(()=>{const I=v=>{ke.current&&!ke.current.contains(v.target)&&te(null)};return D&&document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[D]),m.useEffect(()=>{if(X)return;const I=setInterval(()=>{N(v=>{const he=be[b]||[];return he.length?(v+1)%he.length:0})},5e3);return()=>clearInterval(I)},[b,be,X]),m.useEffect(()=>{N(0)},[b]),typeof document<"u"&&!document.getElementById("fade-style")){const I=document.createElement("style");I.id="fade-style",I.innerHTML=`
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(2px); }
      to { opacity: 1; transform: translateY(0); }
    }
  `,document.head.appendChild(I)}const mt=I=>{console.log(` AdminApprovals - Navigating to ${I} tab`),I==="Master Plan"?window.location.href="/adminviewplan":I==="Individual Plan"&&(window.location.href="/adminindividualplan")},tt=()=>{f(!u),localStorage.setItem("darkMode",!u),A(!1)},Se=I=>{switch(I){case"Pending Approval":return"#ef4444";case"Under Review":return"#f59e0b";case"Approved":return"#10b981";case"Rejected":return"#6b7280";default:return"#6b7280"}},ie=I=>{V(I),le(!1),L(!0)},dt=()=>{L(!1),le(!1),V(null)},ht=G.filter(I=>{const v=I.title.toLowerCase().includes(g.toLowerCase())||I.createdBy.toLowerCase().includes(g.toLowerCase()),he=I.status===b;return v&&he}),R={page:{minHeight:"100vh",padding:"30px",background:u?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:u?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},topButton:I=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:I?"rgba(59,130,246,0.1)":u?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:I?"#3b82f6":u?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:I?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:I?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:u?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:u?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:u?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:u?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:u?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:u?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:u?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:u?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:u?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:u?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(I,v)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",outline:"none",backgroundColor:I?"#3b82f6":v?u?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:I?"#fff":u?"#e2e8f0":"#64748b",transform:v&&!I?"translateY(-1px)":"translateY(0)",boxShadow:I?"0 4px 12px rgba(59,130,246,0.3)":v&&!I?"0 2px 8px rgba(0,0,0,0.1)":"none"}),approverBadge:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"12px",backgroundColor:de?"rgba(16,185,129,0.1)":"rgba(107,114,128,0.1)",border:`1px solid ${de?"rgba(16,185,129,0.3)":"rgba(107,114,128,0.3)"}`,fontSize:"13px",fontWeight:"600",color:de?"#10b981":"#6b7280",marginBottom:"16px"},controlsRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",gap:"16px"},searchContainer:{position:"relative",flex:1,maxWidth:"400px"},searchInput:{width:"100%",padding:"12px 16px 12px 44px",borderRadius:"12px",border:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:u?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:u?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',position:"relative",zIndex:1},searchIcon:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:u?"#94a3b8":"#64748b",transition:"all 0.3s ease",zIndex:2,pointerEvents:"none"},filterContainer:{display:"flex",gap:"8px"},filterButton:(I,v)=>({padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:I?"#3b82f6":v?u?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":u?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:I?"#fff":u?"#e2e8f0":"#64748b",backdropFilter:"blur(10px)"}),approvalsGrid:{display:"grid",gap:"24px",marginBottom:"32px"},approvalCard:I=>({backgroundColor:u?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"24px",boxShadow:I?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:I?"translateY(-8px) scale(1.01)":"translateY(0) scale(1)",border:u?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},cardTitle:{fontSize:"20px",fontWeight:"700",color:u?"#e2e8f0":"#1e293b",marginBottom:"4px",transition:"all 0.3s ease"},cardMeta:{fontSize:"14px",color:u?"#94a3b8":"#64748b",marginBottom:"8px"},statusBadge:I=>({display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",backgroundColor:`${Se(I)}20`,color:Se(I),border:`1px solid ${Se(I)}30`}),cardInfo:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",marginBottom:"16px",marginTop:"16px"},infoItem:{display:"flex",flexDirection:"column",gap:"4px"},infoLabel:{fontSize:"12px",fontWeight:"600",color:u?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},infoValue:{fontSize:"14px",fontWeight:"500",color:u?"#e2e8f0":"#374151"},cardActions:{display:"flex",justifyContent:"flex-end",alignItems:"center",paddingTop:"16px",borderTop:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",gap:"8px"},actionButton:(I,v,he)=>{const Ke={approve:{bg:"#10b981",hover:"#059669"},reject:{bg:"#ef4444",hover:"#dc2626"},view:{bg:"#3b82f6",hover:"#2563eb"}},nt=Ke[I]||Ke.view;return{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"12px",fontWeight:"600",cursor:he?"not-allowed":"pointer",transition:"all 0.3s ease",backgroundColor:he?"#9ca3af":v?nt.hover:nt.bg,color:"#fff",display:"flex",alignItems:"center",gap:"6px",transform:v&&!he?"translateY(-1px)":"translateY(0)",boxShadow:v&&!he?`0 4px 12px ${nt.bg}40`:"none",opacity:he?.5:1}},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},modalContent:{backgroundColor:u?"rgba(55,65,81,0.95)":"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"32px",maxWidth:"500px",width:"100%",position:"relative",border:u?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",boxShadow:"0 25px 50px rgba(0,0,0,0.25)",backdropFilter:"blur(20px)"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",borderBottom:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",paddingBottom:"16px"},modalTitle:{fontSize:"24px",fontWeight:"700",color:u?"#e2e8f0":"#1e293b"},closeButton:I=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:I?"rgba(239,68,68,0.1)":"transparent",color:I?"#ef4444":u?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),textarea:{width:"100%",minHeight:"120px",padding:"12px 16px",borderRadius:"12px",border:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:u?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:u?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',resize:"vertical"},modalActions:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"24px"},statsContainer:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"24px"},statCard:I=>({backgroundColor:u?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"28px",textAlign:"center",boxShadow:I?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",border:u?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:I?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",cursor:"pointer",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),statNumber:{fontSize:"36px",fontWeight:"800",color:u?"#e2e8f0":"#1e293b",marginBottom:"8px",transition:"all 0.3s ease"},statLabel:{fontSize:"14px",color:u?"#94a3b8":"#64748b",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",color:u?"#94a3b8":"#64748b"},emptyState:{textAlign:"center",padding:"60px 20px",color:u?"#94a3b8":"#64748b"}};return re?n.jsx("div",{className:"admin-approvals-page",style:R.page,children:n.jsx("div",{style:R.loadingContainer,children:n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx(Xi,{size:48,style:{marginBottom:"16px",opacity:.5}}),n.jsx("p",{children:"Loading approvals..."})]})})}):n.jsxs("div",{className:"admin-approvals-page",style:R.page,children:[n.jsxs("div",{style:R.headerRow,children:[n.jsx("div",{style:R.headerLeft,children:n.jsx("h1",{style:R.header,children:"Plan"})}),n.jsxs("div",{style:R.headerRight,children:[n.jsxs("button",{style:R.topButton(t==="alerts"),onMouseEnter:()=>r("alerts"),onMouseLeave:()=>r(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:R.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:R.topButton(t==="profile"),onMouseEnter:()=>{r("profile"),A(!0)},onMouseLeave:()=>r(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Nt,{size:20})}),a&&oe&&n.jsxs("div",{style:R.profileTooltip,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[n.jsx("div",{style:R.tooltipArrow}),n.jsxs("div",{style:R.userInfo,children:[n.jsxs("div",{style:R.avatar,children:[(((Ut=oe.firstName)==null?void 0:Ut[0])||"").toUpperCase(),(((Tt=oe.lastName)==null?void 0:Tt[0])||"").toUpperCase()]}),n.jsxs("div",{style:R.userDetails,children:[n.jsxs("div",{style:R.userName,children:[oe.firstName," ",oe.lastName]}),n.jsxs("div",{style:R.userRole,children:[oe.role==="admin"?"Admin":"Member","  ",oe.department]})]})]}),n.jsxs("div",{style:R.userStats,children:[n.jsxs("div",{style:R.tooltipStatItem,children:[n.jsx("div",{style:R.tooltipStatNumber,children:pe.pendingApproval}),n.jsx("div",{style:R.tooltipStatLabel,children:"Pending"})]}),n.jsxs("div",{style:R.tooltipStatItem,children:[n.jsx("div",{style:R.tooltipStatNumber,children:pe.approved}),n.jsx("div",{style:R.tooltipStatLabel,children:"Approved"})]}),n.jsxs("div",{style:R.tooltipStatItem,children:[n.jsx("div",{style:R.tooltipStatNumber,children:pe.rejected}),n.jsx("div",{style:R.tooltipStatLabel,children:"Rejected"})]})]}),n.jsx("button",{style:R.themeToggle,onClick:tt,children:u?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:R.tabContainer,children:["Master Plan","Individual Plan","Approvals"].map(I=>n.jsx("button",{style:R.tab(c===I,i===`tab-${I}`),onMouseEnter:()=>e(`tab-${I}`),onMouseLeave:()=>e(null),onClick:()=>mt(I),children:I},I))}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",color:u?"#e2e8f0":"#1e293b",margin:0},children:"Approvals"}),n.jsx("p",{style:{fontSize:"14px",color:u?"#94a3b8":"#64748b",margin:"4px 0 0 0",animation:"fadeIn 0.4s ease",cursor:"default"},onMouseEnter:()=>Be(!0),onMouseLeave:()=>Be(!1),children:(be[b]||[])[M]},`${b}-${M}`),n.jsx("div",{style:R.approverBadge,children:de?n.jsxs(n.Fragment,{children:[n.jsx(oc,{size:16}),"Authorized Approver (",me,")"]}):n.jsxs(n.Fragment,{children:[n.jsx(so,{size:16}),"View Only (",me,")"]})})]}),n.jsxs("div",{style:R.controlsRow,children:[n.jsxs("div",{style:R.searchContainer,children:[n.jsx(kh,{size:18,style:R.searchIcon}),n.jsx("input",{type:"text",placeholder:"Search approvals by title or creator...",value:g,onChange:I=>y(I.target.value),style:R.searchInput})]}),n.jsx("div",{style:R.filterContainer,children:["Pending Approval","Approved","Rejected"].map(I=>n.jsxs("button",{style:R.filterButton(b===I,i===`filter-${I}`),onMouseEnter:()=>e(`filter-${I}`),onMouseLeave:()=>e(null),onClick:()=>H(I),children:[I," (",pe[J[I]]||0,")"]},I))})]}),n.jsx("div",{style:R.approvalsGrid,children:ht.map(I=>n.jsxs("div",{style:R.approvalCard(t===`approval-${I.id}`),onMouseEnter:()=>r(`approval-${I.id}`),onMouseLeave:()=>r(null),children:[n.jsxs("div",{style:R.cardHeader,children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:R.cardTitle,children:I.title}),n.jsxs("div",{style:R.cardMeta,children:["Created by: ",I.createdBy," (",I.createdByEmail,")  ",I.department,"  ",new Date(I.createdDate).toLocaleDateString()]})]}),n.jsx("div",{style:R.statusBadge(I.status),children:I.status})]}),n.jsxs("div",{style:R.cardInfo,children:[n.jsxs("div",{style:R.infoItem,children:[n.jsx("div",{style:R.infoLabel,children:"Start Date"}),n.jsx("div",{style:R.infoValue,children:new Date(I.startDate).toLocaleDateString()})]}),n.jsxs("div",{style:R.infoItem,children:[n.jsx("div",{style:R.infoLabel,children:"End Date"}),n.jsx("div",{style:R.infoValue,children:new Date(I.endDate).toLocaleDateString()})]}),n.jsxs("div",{style:R.infoItem,children:[n.jsx("div",{style:R.infoLabel,children:"Milestones"}),n.jsx("div",{style:R.infoValue,children:I.milestoneCount})]}),I.latestUpdate&&n.jsxs("div",{style:R.infoItem,children:[n.jsx("div",{style:R.infoLabel,children:I.status==="Pending Approval"?"Pending Changes":"Last Update"}),n.jsxs("div",{style:R.infoValue,children:[I.latestUpdate.changeCount," update",I.latestUpdate.changeCount>1?"s":""]})]}),I.approvedBy&&n.jsxs("div",{style:R.infoItem,children:[n.jsx("div",{style:R.infoLabel,children:"Approved By"}),n.jsxs("div",{style:R.infoValue,children:[I.approvedBy," on ",new Date(I.approvedAt).toLocaleDateString()]})]}),I.rejectedBy&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:R.infoItem,children:[n.jsx("div",{style:R.infoLabel,children:"Rejected By"}),n.jsxs("div",{style:R.infoValue,children:[I.rejectedBy," on ",new Date(I.rejectedAt).toLocaleDateString()]})]}),n.jsxs("div",{style:R.infoItem,children:[n.jsx("div",{style:R.infoLabel,children:"Rejection Reason"}),n.jsx("div",{style:R.infoValue,children:I.rejectionReason})]})]})]}),n.jsxs("div",{style:R.cardActions,children:[n.jsxs("button",{style:R.actionButton("view",i===`view-${I.id}`,!1),onMouseEnter:()=>e(`view-${I.id}`),onMouseLeave:()=>e(null),onClick:()=>ie(I),children:[n.jsx(Fo,{size:14}),"View Details"]}),I.canApprove&&n.jsxs("button",{style:R.actionButton("approve",i===`approve-${I.id}`,!I.canApprove),onMouseEnter:()=>e(`approve-${I.id}`),onMouseLeave:()=>e(null),onClick:()=>ge(I.id,I.status),disabled:!I.canApprove,title:I.status==="Approved"?"Re-approve this plan":I.status==="Rejected"?"Approve (overrides rejection)":"Approve this plan",children:[n.jsx(e2,{size:14}),I.status==="Approved"?"Re-Approve":"Approve"]}),I.canReject&&n.jsxs("button",{style:R.actionButton("reject",i===`reject-${I.id}`,!I.canReject),onMouseEnter:()=>e(`reject-${I.id}`),onMouseLeave:()=>e(null),onClick:()=>He(I.id,I.status),disabled:!I.canReject,title:I.status==="Rejected"?"Update rejection reason":I.status==="Approved"?"Reject (overrides approval)":"Reject this plan",children:[n.jsx(mr,{size:14}),I.status==="Rejected"?"Re-Reject":"Reject"]})]})]},I.id))}),ht.length===0&&n.jsxs("div",{style:R.emptyState,children:[n.jsx(x2,{size:48,style:{marginBottom:"16px",opacity:.5}}),n.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"600"},children:g?"No approvals found":"No approvals in this status"}),n.jsx("p",{style:{margin:0,fontSize:"14px"},children:g?"Try adjusting your search terms":`No ${b.toLowerCase()} approvals at the moment`})]}),U&&n.jsx("div",{style:R.modal,onClick:()=>B(!1),children:n.jsxs("div",{style:R.modalContent,onClick:I=>I.stopPropagation(),children:[n.jsxs("div",{style:R.modalHeader,children:[n.jsx("div",{style:R.modalTitle,children:(ve==null?void 0:ve.currentStatus)==="Rejected"?"Update Rejection":"Reject Master Plan"}),n.jsx("button",{style:R.closeButton(i==="close-modal"),onMouseEnter:()=>e("close-modal"),onMouseLeave:()=>e(null),onClick:()=>B(!1),children:n.jsx(mr,{size:24})})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[(ve==null?void 0:ve.currentStatus)==="Approved"&&n.jsxs("div",{style:{padding:"12px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",marginBottom:"12px",fontSize:"13px",color:"#ef4444"},children:[" This plan is currently ",n.jsx("strong",{children:"Approved"}),". Rejecting it will override the approval."]}),(ve==null?void 0:ve.currentStatus)==="Rejected"&&n.jsx("div",{style:{padding:"12px",backgroundColor:"rgba(59,130,246,0.1)",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"8px",marginBottom:"12px",fontSize:"13px",color:"#3b82f6"},children:" This plan is already rejected. You can update the rejection reason."}),n.jsx("label",{style:{fontSize:"14px",fontWeight:"600",color:u?"#d1d5db":"#374151",marginBottom:"8px",display:"block"},children:"Rejection Reason *"}),n.jsx("textarea",{style:R.textarea,value:j,onChange:I=>_(I.target.value),placeholder:"Please provide a detailed reason for rejection..."}),n.jsx("small",{style:{fontSize:"12px",color:u?"#94a3b8":"#64748b",display:"block",marginTop:"8px"},children:"This reason will be visible to the plan creator."})]}),n.jsxs("div",{style:R.modalActions,children:[n.jsx("button",{style:R.actionButton("view",i==="cancel-reject",!1),onMouseEnter:()=>e("cancel-reject"),onMouseLeave:()=>e(null),onClick:()=>B(!1),children:"Cancel"}),n.jsxs("button",{style:R.actionButton("reject",i==="confirm-reject",!1),onMouseEnter:()=>e("confirm-reject"),onMouseLeave:()=>e(null),onClick:ze,children:[n.jsx(mr,{size:14}),"Confirm Rejection"]})]})]})}),S&&Q&&(()=>{var Ke,nt,E;const I=((Ke=Q.latestUpdate)==null?void 0:Ke.changes)||[],v=3,he=Ae?I:I.slice(0,v);return n.jsx("div",{style:R.modal,onClick:dt,children:n.jsxs("div",{style:{...R.modalContent,maxWidth:"700px",maxHeight:"80vh",padding:0,display:"flex",flexDirection:"column",overflow:"hidden"},onClick:$=>$.stopPropagation(),children:[n.jsxs("div",{style:{...R.modalHeader,position:"sticky",top:0,zIndex:5,backgroundColor:u?"#374151":"#ffffff",borderBottom:u?"1px solid rgba(148,163,184,0.15)":"1px solid rgba(226,232,240,0.9)",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",padding:"20px 24px 16px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:R.modalTitle,children:Q.title}),n.jsxs("div",{style:{fontSize:"14px",color:u?"#94a3b8":"#64748b",marginTop:"4px"},children:["Created by ",Q.createdBy,"  ",Q.department]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:R.statusBadge(Q.status),children:Q.status}),n.jsx("button",{style:R.closeButton(i==="close"),onMouseEnter:()=>e("close"),onMouseLeave:()=>e(null),onClick:dt,children:n.jsx(mr,{size:24})})]})]}),n.jsxs("div",{style:{padding:"24px",overflowY:"auto",flex:1},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",backgroundColor:u?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",marginBottom:"24px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:R.infoLabel,children:"Start Date"}),n.jsx("div",{style:{...R.infoValue,fontSize:"15px",fontWeight:"600"},children:new Date(Q.startDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("div",{style:R.infoLabel,children:"End Date"}),n.jsx("div",{style:{...R.infoValue,fontSize:"15px",fontWeight:"600"},children:new Date(Q.endDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("div",{style:R.infoLabel,children:"Milestones"}),n.jsx("div",{style:{...R.infoValue,fontSize:"15px",fontWeight:"600"},children:Q.milestoneCount})]})]}),((E=(nt=Q.latestUpdate)==null?void 0:nt.changes)==null?void 0:E.length)>0&&he.map(($,Qe)=>n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{...R.infoLabel,marginBottom:"6px"},children:$.milestone}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"16px",alignItems:"center"},children:[n.jsx("div",{style:{...R.infoValue,padding:"8px 12px",backgroundColor:u?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.05)",borderRadius:"8px",textDecoration:"line-through",opacity:.7},children:$.oldValue||"N/A"}),n.jsx("div",{children:""}),n.jsx("div",{style:{...R.infoValue,padding:"8px 12px",backgroundColor:u?"rgba(16,185,129,0.1)":"rgba(16,185,129,0.05)",borderRadius:"8px",fontWeight:600},children:$.newValue||"N/A"})]}),n.jsxs("div",{style:{marginTop:"8px"},children:[n.jsx("div",{style:R.infoLabel,children:"Justification"}),n.jsx("div",{style:{...R.infoValue,fontStyle:$.justification?"normal":"italic"},children:$.justification||"No justification provided"})]})]},Qe)),I.length>v&&n.jsx("div",{style:{textAlign:"center",marginTop:"12px"},children:n.jsx("button",{onClick:()=>le($=>!$),style:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:u?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:Ae?"Collapse changes":`View ${I.length-v} more changes`})}),(Q.approvedBy||Q.rejectedBy)&&n.jsxs("div",{style:{marginTop:"24px",padding:"16px",backgroundColor:Q.approvedBy?u?"rgba(16,185,129,0.1)":"rgba(16,185,129,0.05)":u?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.05)",borderRadius:"12px",border:`1px solid ${Q.approvedBy?u?"rgba(16,185,129,0.3)":"rgba(16,185,129,0.2)":u?"rgba(239,68,68,0.3)":"rgba(239,68,68,0.2)"}`},children:[Q.approvedBy&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{...R.infoLabel,marginBottom:"6px"},children:"Approved By"}),n.jsxs("div",{style:R.infoValue,children:[Q.approvedBy," on ",new Date(Q.approvedAt).toLocaleString()]})]}),Q.rejectedBy&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{...R.infoLabel,marginBottom:"6px"},children:"Rejected By"}),n.jsxs("div",{style:{...R.infoValue,marginBottom:"12px"},children:[Q.rejectedBy," on ",new Date(Q.rejectedAt).toLocaleString()]}),n.jsx("div",{style:{...R.infoLabel,marginBottom:"6px"},children:"Rejection Reason"}),n.jsx("div",{style:{...R.infoValue,padding:"12px",backgroundColor:u?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",borderRadius:"8px",fontSize:"14px",lineHeight:"1.6"},children:Q.rejectionReason})]})]})]})]})})})(),n.jsxs("div",{style:R.statsContainer,children:[n.jsxs("div",{style:R.statCard(t==="stat1"),onMouseEnter:()=>r("stat1"),onMouseLeave:()=>r(null),children:[n.jsx("div",{style:R.statNumber,children:pe.pendingApproval}),n.jsx("div",{style:R.statLabel,children:"Pending Approval"})]}),n.jsxs("div",{style:R.statCard(t==="stat2"),onMouseEnter:()=>r("stat2"),onMouseLeave:()=>r(null),children:[n.jsx("div",{style:R.statNumber,children:pe.approved}),n.jsx("div",{style:R.statLabel,children:"Approved"})]}),n.jsxs("div",{style:R.statCard(t==="stat3"),onMouseEnter:()=>r("stat3"),onMouseLeave:()=>r(null),children:[n.jsx("div",{style:R.statNumber,children:pe.rejected}),n.jsx("div",{style:R.statLabel,children:"Rejected"})]})]})]})},YU=()=>{var dt,ht,R,Ut,Tt;const[i,e]=m.useState(null),[t,r]=m.useState(null),[a,A]=m.useState(!1),[c,p]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[u,f]=m.useState("Master Plan"),[g,y]=m.useState(!1),[b,H]=m.useState(!1),[S,L]=m.useState({project:"",projectType:"",startDate:"",endDate:""}),[Q,V]=m.useState([]),[D,te]=m.useState("UAT"),[J,M]=m.useState("Date Range"),[N,X]=m.useState({reasoning:"",suggestedFields:[]}),[Be,Ae]=m.useState(""),[le,G]=m.useState(null),[se,pe]=m.useState(!0),[Me,be]=m.useState([]),[de,Ue]=m.useState([]),[me,F]=m.useState(!1),[re,P]=m.useState(!1),[oe,je]=m.useState(null),U=m.useRef(null),B=m.useRef(null),j=I=>{if(!I)return"";const v=I.split("/");return v.length===3?`${v[2]}-${v[1]}-${v[0]}`:I},_=I=>{if(!I)return"";const v=I.split("-");return v.length===3?`${v[2]}/${v[1]}/${v[0]}`:I};m.useEffect(()=>{ve()},[]);const ve=async()=>{try{pe(!0),console.log(" Fetching user data from /user/profile...");const I=await Fe("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" API Response status:",I.status),I.ok){const v=await I.json();console.log(" User data received:",v),G(v)}else{const v=await I.text();console.error(" Failed to fetch user data:",I.status,v)}}catch(I){console.error(" Error fetching user data:",I)}finally{pe(!1)}};m.useEffect(()=>{le&&(async()=>{if(le){F(!0);try{console.log(" Fetching user list for permissions...");const v=await Fe("/user/list",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(v.ok){const nt=((await v.json()).users||[]).filter(E=>E.id!==le.id);console.log(` Loaded ${nt.length} available users`),Ue(nt)}else console.error(" Failed to fetch user list")}catch(v){console.error(" Error fetching user list:",v)}finally{F(!1)}}})()},[le]);const k=(I,v="editor")=>{const he=de.find(Ke=>Ke.id===I);he&&!Me.find(Ke=>Ke.id===I)&&(be([...Me,{id:he.id,name:`${he.firstName} ${he.lastName}`,email:he.email,department:he.department,permission:v}]),console.log(` Added ${he.firstName} ${he.lastName} as ${v}`))},O=I=>{be(Me.filter(v=>v.id!==I)),console.log(` Removed user ${I} from permissions`)},Z=(I,v)=>{be(Me.map(he=>he.id===I?{...he,permission:v}:he)),console.log(` Updated user ${I} permission to ${v}`)},ke=I=>[...I].sort((v,he)=>{const Ke=$=>{if(!$)return null;const[Qe,W,Y]=$.split("/");return new Date(Y,W-1,Qe)},nt=Ke(v.startDate),E=Ke(he.startDate);return!nt&&!E?0:nt?E?nt-E:-1:1});m.useEffect(()=>{if(Q.length>0&&Q.some(v=>v.startDate)){const v=ke(Q);v.some((Ke,nt)=>Ke.id!==Q[nt].id)&&V(v)}},[Q.map(I=>I.startDate).join(",")]);const at=()=>{p(!c),A(!1)},T=()=>{console.log(" Going back to plan overview"),window.location.href="/adminviewplan"},ge=()=>{if(D.trim()){if(Q.some(he=>he.name.toLowerCase()===D.trim().toLowerCase())){alert(` Milestone "${D.trim()}" already exists!`);return}const v={id:Date.now(),name:D.trim(),type:"Date Range",value:(Q.length===0,"On Track"),startDate:"",endDate:"",required:!1};V([...Q,v]),te("")}},He=I=>{V(Q.filter(v=>v.id!==I))},ze=(I,v,he)=>{V(Q.map(Ke=>Ke.id===I?{...Ke,[v]:he}:Ke))},mt=async()=>{try{H(!0),y(!1),X({reasoning:"",suggestedFields:[]});const I={project:S.project,projectType:S.projectType,startDate:S.startDate,endDate:S.endDate,userQuery:Be.trim()||void 0};console.log(" Sending Master Plan AI request:",I);const v=await Fe("/masterplan-ai/generate",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}),he=await v.json();if(console.log(" AI Response:",he),v.ok&&he.success&&he.masterPlan){const Ke=he.masterPlan,nt=he.historicalContext;let E=`**AI-Generated Master Plan** (Source: ${he.source==="ai"?"AI Analysis":"Standard Template"})

`;nt.totalRecords>0?E+=`Based on analysis of **${nt.totalRecords} historical project records** from ${nt.projectsAnalyzed} projects in the **${he.department}** department.

`:E+=`No historical data available. Generated using intelligent fallback.

`,nt.hasUserQuery&&(E+=` Customized based on your project scope and requirements.
`),nt.webSearchUsed&&(E+=` Enhanced with general project knowledge from web search.
`);const $=Object.entries(Ke).map(([Qe,W])=>({name:Qe,type:"Date Range",startDate:_(W.startDate),endDate:_(W.endDate),status:W.status||"Planned"}));X({reasoning:E,suggestedFields:$}),y(!0)}else alert(" AI could not generate a plan. "+(he.error||"Please try again."))}catch(I){console.error(" AI Recommendation error:",I),alert(" Failed to fetch AI recommendations. Please check backend connection.")}finally{H(!1)}},tt=I=>{if(Q.some(E=>E.name.toLowerCase()===I.name.toLowerCase())){alert(` Milestone "${I.name}" already exists!`);return}let he=I.status||"On Track";["On Track","At Risk","Completed","Delayed"].includes(he)||(console.warn(` Invalid status "${he}" from AI, converting to "On Track"`),he="On Track"),he="On Track";const nt={id:Date.now(),name:I.name,type:"Date Range",value:he,required:!1,startDate:I.startDate||"",endDate:I.endDate||""};V([...Q,nt])},Se=async()=>{try{if(P(!0),je(null),!S.project||!S.startDate||!S.endDate){alert("Please fill in all required fields: Project, Start Date, and End Date"),P(!1);return}const I=Q.filter(We=>!We.startDate||!We.endDate);if(I.length>0){alert(`Please fill in start and end dates for all milestones: ${I.map(We=>We.name).join(", ")}`),P(!1);return}const[v,he,Ke]=S.startDate.split("/"),nt=new Date(Ke,he-1,v);for(const We of Q)if(We.startDate){const[Ze,St,xe]=We.startDate.split("/");if(new Date(xe,St-1,Ze)<nt){alert(` Milestone "${We.name}" starts before the project's start date.`),P(!1);return}}const E=We=>{if(!We)return"";const[Ze,St,xe]=We.split("/");return`${xe}-${St}-${Ze}`},$={};Q.forEach(We=>{$[We.name]={status:We.value,startDate:E(We.startDate),endDate:E(We.endDate)}});const Qe={project:S.project,projectType:S.projectType,startDate:E(S.startDate),endDate:E(S.endDate),fields:$,userId:le.id,permissions:Me.map(We=>({userId:We.id,permissionLevel:We.permission}))};console.log(" Submitting master plan with permissions:",Qe),console.log(`    Team members: ${Me.length}`);const W=await Fe("/plan/master",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Qe)}),Y=await W.json();W.ok?(console.log(" Master plan created successfully:",Y),alert(` Master plan created successfully with ${Me.length} team members!`),L({project:"Add your project here",projectType:"What is your project focusing on",startDate:"16/06/2025",endDate:"17/10/2025"}),V([]),be([]),y(!1),Ae(""),setTimeout(()=>{window.location.href="/adminviewplan"},1500)):(console.error(" Failed to create master plan:",Y),je(Y.message||"Failed to create master plan"),alert(` ${Y.message||"Failed to create master plan"}`))}catch(I){console.error(" Error submitting master plan:",I),je("Network error. Please check your connection and try again."),alert(" Network error. Please check your connection and try again.")}finally{P(!1)}},ie={page:{minHeight:"100vh",padding:"30px",background:c?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},backButton:I=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:I?"rgba(59,130,246,0.1)":c?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:I?"#3b82f6":c?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:I?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:I?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),header:{fontSize:"28px",fontWeight:"700",color:c?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},topButton:I=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:I?"rgba(59,130,246,0.1)":c?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:I?"#3b82f6":c?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:I?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:I?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:c?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:c?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:c?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:c?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:c?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:c?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:c?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(I,v)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",outline:"none",backgroundColor:I?"#3b82f6":v?c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:I?"#fff":c?"#e2e8f0":"#64748b",transform:v&&!I?"translateY(-1px)":"translateY(0)",boxShadow:I?"0 4px 12px rgba(59,130,246,0.3)":v&&!I?"0 2px 8px rgba(0,0,0,0.1)":"none"}),mainContent:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"32px",alignItems:"start"},formSection:{backgroundColor:c?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:c?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},sectionTitle:{fontSize:"24px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b",marginBottom:"24px",transition:"all 0.3s ease"},configTitle:{fontSize:"18px",fontWeight:"600",color:c?"#e2e8f0":"#1e293b",marginBottom:"20px",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},fieldGroup:{marginBottom:"20px"},fieldLabel:{fontSize:"14px",fontWeight:"600",color:c?"#d1d5db":"#374151",marginBottom:"8px",display:"block",transition:"all 0.3s ease"},input:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:c?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:c?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',cursor:"pointer"},dateInputWrapper:{position:"relative",cursor:"pointer",width:"100%"},textarea:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:c?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:c?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',resize:"vertical",minHeight:"100px"},select:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:c?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:c?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',cursor:"pointer"},addFieldSection:{marginTop:"32px",paddingTop:"24px",borderTop:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"},addFieldRow:{display:"grid",gridTemplateColumns:"1fr 150px auto",gap:"12px",alignItems:"end",marginBottom:"16px"},addButton:I=>({padding:"12px 20px",borderRadius:"12px",border:"none",backgroundColor:I?"#2563eb":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"}),customField:{backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px",transition:"all 0.3s ease"},customFieldHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},customFieldName:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#374151"},customFieldType:{fontSize:"12px",color:c?"#94a3b8":"#64748b",backgroundColor:c?"rgba(75,85,99,0.3)":"rgba(226,232,240,0.3)",padding:"4px 8px",borderRadius:"6px"},removeButton:I=>({padding:"4px",borderRadius:"6px",border:"none",backgroundColor:I?"rgba(239,68,68,0.1)":"transparent",color:I?"#ef4444":c?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),rightSidebar:{display:"flex",flexDirection:"column",gap:"20px"},aiSection:{backgroundColor:c?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:c?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},accessControlSection:{backgroundColor:c?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:c?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},aiHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},aiTitle:{fontSize:"18px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b"},aiInfoBox:{backgroundColor:c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"8px",padding:"12px",marginBottom:"16px",border:c?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(59,130,246,0.1)"},aiInfoText:{fontSize:"12px",lineHeight:"1.5",color:c?"#93c5fd":"#3b82f6",display:"flex",gap:"8px",alignItems:"flex-start"},recommendButton:I=>({width:"100%",padding:"14px 20px",borderRadius:"12px",border:"none",backgroundColor:I?"#8b5cf6":"#a855f7",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"20px"}),loadingSpinner:{animation:"spin 1s linear infinite"},aiRecommendations:{backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"16px"},aiReasoning:{fontSize:"14px",lineHeight:"1.6",color:c?"#d1d5db":"#4b5563",whiteSpace:"pre-line",marginBottom:"16px"},suggestedField:{backgroundColor:c?"rgba(75,85,99,0.3)":"rgba(255,255,255,0.8)",borderRadius:"8px",padding:"12px",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},suggestedFieldInfo:{flex:1},suggestedFieldName:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#374151",marginBottom:"2px"},suggestedFieldType:{fontSize:"12px",color:c?"#94a3b8":"#64748b"},addSuggestedButton:I=>({padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:I?"#059669":"#10b981",color:"#fff",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"}),submitButton:I=>({width:"100%",padding:"16px 24px",borderRadius:"12px",border:"none",backgroundColor:I?"#1e293b":"#334155",color:"#fff",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",marginTop:"32px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}),ownerBadge:{backgroundColor:c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"12px",padding:"12px 16px",marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",border:c?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(59,130,246,0.1)"},permissionBadge:I=>({padding:"4px 12px",borderRadius:"6px",backgroundColor:I==="owner"?"#3b82f6":I==="editor"?"#10b981":"#64748b",color:"#fff",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"}),selectedUserCard:{backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"12px 16px",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"}};return m.useEffect(()=>{const I=document.createElement("style");return I.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      input[type="date"]::-webkit-calendar-picker-indicator {
        cursor: pointer;
        filter: ${c?"invert(1)":"invert(0)"};
      }
    `,document.head.appendChild(I),()=>document.head.removeChild(I)},[c]),m.useEffect(()=>{const I=document.createElement("style");return I.textContent=`
    body, html, #root, .app, .main-content, .page-container, .content-wrapper {
      background: ${c?"linear-gradient(135deg, #1e293b 0%, #334155 100%) !important":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%) !important"};
      margin: 0 !important;
      padding: 0 !important;
    }
    
    body > div, #root > div, .app > div {
      background: transparent !important;
    }
  `,document.head.appendChild(I),()=>{document.head.removeChild(I)}},[c]),n.jsxs("div",{style:ie.page,children:[n.jsxs("div",{style:ie.headerRow,children:[n.jsxs("div",{style:ie.headerLeft,children:[n.jsx("button",{style:ie.backButton(i==="back"),onMouseEnter:()=>e("back"),onMouseLeave:()=>e(null),onClick:T,children:n.jsx(wi,{size:20})}),n.jsx("h1",{style:ie.header,children:"Plan"})]}),n.jsxs("div",{style:ie.headerRight,children:[n.jsxs("button",{style:ie.topButton(t==="alerts"),onMouseEnter:()=>r("alerts"),onMouseLeave:()=>r(null),onClick:()=>{console.log(" Alerts clicked - Navigating to alerts page"),window.location.href="/adminalerts"},children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:ie.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:ie.topButton(t==="profile"),onMouseEnter:()=>{r("profile"),A(!0)},onMouseLeave:()=>{r(null)},onClick:()=>{console.log(" Profile clicked - Navigating to profile page"),window.location.href="/adminprofile"},children:n.jsx(Nt,{size:20})}),a&&le&&n.jsxs("div",{style:ie.profileTooltip,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[n.jsx("div",{style:ie.tooltipArrow}),n.jsxs("div",{style:ie.userInfo,children:[n.jsxs("div",{style:ie.avatar,children:[(((dt=le.firstName)==null?void 0:dt[0])||"").toUpperCase(),(((ht=le.lastName)==null?void 0:ht[0])||"").toUpperCase()]}),n.jsxs("div",{style:ie.userDetails,children:[n.jsxs("div",{style:ie.userName,children:[le.firstName||"Unknown"," ",le.lastName||"User"]}),n.jsxs("div",{style:ie.userRole,children:[le.role==="admin"?"Admin":"Member","  ",le.department||"N/A"]})]})]}),n.jsxs("div",{style:ie.userStats,children:[n.jsxs("div",{style:ie.tooltipStatItem,children:[n.jsx("div",{style:ie.tooltipStatNumber,children:((R=le.stats)==null?void 0:R.hours)||"32"}),n.jsx("div",{style:ie.tooltipStatLabel,children:"Hours"})]}),n.jsxs("div",{style:ie.tooltipStatItem,children:[n.jsx("div",{style:ie.tooltipStatNumber,children:((Ut=le.stats)==null?void 0:Ut.projects)||"3"}),n.jsx("div",{style:ie.tooltipStatLabel,children:"Projects"})]}),n.jsxs("div",{style:ie.tooltipStatItem,children:[n.jsx("div",{style:ie.tooltipStatNumber,children:((Tt=le.stats)==null?void 0:Tt.capacity)||"80%"}),n.jsx("div",{style:ie.tooltipStatLabel,children:"Capacity"})]})]}),n.jsx("button",{style:ie.themeToggle,onClick:at,children:c?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:ie.tabContainer,children:n.jsx("div",{style:ie.tab(!0,!1),children:"Master Plan"})}),n.jsxs("div",{style:ie.mainContent,children:[n.jsxs("div",{style:ie.formSection,children:[n.jsx("h2",{style:ie.sectionTitle,children:"Master Plan"}),n.jsx("h3",{style:ie.configTitle,children:"Configure Planning Fields"}),n.jsxs("div",{style:ie.fieldGroup,children:[n.jsx("label",{style:ie.fieldLabel,children:"Project"}),n.jsx("input",{type:"text",style:ie.input,value:S.project,onChange:I=>L({...S,project:I.target.value}),placeholder:"Enter project name"})]}),n.jsxs("div",{style:ie.fieldGroup,children:[n.jsx("label",{style:ie.fieldLabel,children:"Project Type"}),n.jsx("input",{type:"text",style:ie.input,value:S.projectType,onChange:I=>L({...S,projectType:I.target.value}),placeholder:"e.g., Software Development, Infrastructure, Data Analytics, Migration"})]}),n.jsxs("div",{style:ie.fieldGroup,children:[n.jsx("label",{style:ie.fieldLabel,children:"Start Date"}),n.jsx("div",{style:ie.dateInputWrapper,onClick:()=>{var I,v;return(v=(I=U.current)==null?void 0:I.showPicker)==null?void 0:v.call(I)},children:n.jsx("input",{ref:U,type:"date",style:ie.input,value:j(S.startDate),onChange:I=>L({...S,startDate:_(I.target.value)})})})]}),n.jsxs("div",{style:ie.fieldGroup,children:[n.jsx("label",{style:ie.fieldLabel,children:"End Date"}),n.jsx("div",{style:ie.dateInputWrapper,onClick:()=>{var I,v;return(v=(I=B.current)==null?void 0:I.showPicker)==null?void 0:v.call(I)},children:n.jsx("input",{ref:B,type:"date",style:ie.input,value:j(S.endDate),onChange:I=>L({...S,endDate:_(I.target.value)})})})]}),Q.map((I,v)=>n.jsxs("div",{style:ie.customField,children:[n.jsxs("div",{style:ie.customFieldHeader,children:[n.jsxs("div",{style:{flex:1},children:[n.jsxs("div",{style:ie.customFieldName,children:[I.name,n.jsx("span",{style:{marginLeft:"12px",fontSize:"11px",fontWeight:"600",padding:"4px 8px",borderRadius:"6px",backgroundColor:I.value==="Completed"?"#3b82f620":I.value==="On Track"?"#10b98120":I.value==="At Risk"?"#f59e0b20":I.value==="Delayed"?"#ef444420":"#94a3b820",color:I.value==="Completed"?"#3b82f6":I.value==="On Track"?"#10b981":I.value==="At Risk"?"#f59e0b":I.value==="Delayed"?"#ef4444":"#94a3b8"},children:I.value})]}),n.jsx("div",{style:ie.customFieldType,children:I.type})]}),n.jsx("button",{style:ie.removeButton(i===`remove-${I.id}`),onMouseEnter:()=>e(`remove-${I.id}`),onMouseLeave:()=>e(null),onClick:()=>He(I.id),children:n.jsx(ar,{size:16})})]}),n.jsxs("div",{style:ie.fieldGroup,children:[n.jsx("label",{style:ie.fieldLabel,children:"Timeline"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{...ie.fieldLabel,fontSize:"12px"},children:"Start Date"}),n.jsx("div",{style:ie.dateInputWrapper,onClick:he=>{var Ke,nt;return(nt=(Ke=he.currentTarget.querySelector("input"))==null?void 0:Ke.showPicker)==null?void 0:nt.call(Ke)},children:n.jsx("input",{type:"date",style:ie.input,value:j(I.startDate||""),onChange:he=>ze(I.id,"startDate",_(he.target.value))})})]}),n.jsxs("div",{children:[n.jsx("label",{style:{...ie.fieldLabel,fontSize:"12px"},children:"End Date"}),n.jsx("div",{style:ie.dateInputWrapper,onClick:he=>{var Ke,nt;return(nt=(Ke=he.currentTarget.querySelector("input"))==null?void 0:Ke.showPicker)==null?void 0:nt.call(Ke)},children:n.jsx("input",{type:"date",style:ie.input,value:j(I.endDate||""),onChange:he=>ze(I.id,"endDate",_(he.target.value))})})]})]})]})]},I.id)),n.jsxs("div",{style:ie.addFieldSection,children:[n.jsx("h4",{style:{...ie.fieldLabel,marginBottom:"16px",fontSize:"16px"},children:"Add Milestone/Phase"}),n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[n.jsx("div",{style:{flex:1},children:n.jsx("input",{type:"text",style:ie.input,value:D,onChange:I=>te(I.target.value),placeholder:"Milestone name (e.g., UAT, Testing, Deployment)"})}),n.jsxs("button",{style:ie.addButton(i==="add-field"),onMouseEnter:()=>e("add-field"),onMouseLeave:()=>e(null),onClick:ge,children:[n.jsx(In,{size:16}),"Add Milestone"]})]})]}),n.jsx("button",{style:ie.submitButton(i==="submit"),onMouseEnter:()=>e("submit"),onMouseLeave:()=>e(null),onClick:Se,disabled:re,children:re?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:ie.loadingSpinner,children:""}),"Submitting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Kr,{size:20}),"Submit Master Plan"]})}),oe&&n.jsx("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",color:"#ef4444",fontSize:"14px"},children:oe})]}),n.jsxs("div",{style:ie.rightSidebar,children:[n.jsxs("div",{style:ie.aiSection,children:[n.jsxs("div",{style:ie.aiHeader,children:[n.jsx(zr,{size:20,style:{color:"#a855f7"}}),n.jsx("h3",{style:ie.aiTitle,children:"AI Master Plan Generator"})]}),n.jsx("div",{style:ie.aiInfoBox,children:n.jsxs("div",{style:ie.aiInfoText,children:[n.jsx(so,{size:16,style:{flexShrink:0,marginTop:"2px"}}),n.jsx("span",{children:"AI will analyze historical project data from your department to generate realistic timelines."})]})}),n.jsxs("div",{style:ie.fieldGroup,children:[n.jsx("label",{style:ie.fieldLabel,children:"Project Scope (Optional, but recommended)"}),n.jsx("textarea",{style:ie.textarea,value:Be,onChange:I=>Ae(I.target.value),placeholder:"Describe your project scope, requirements, or specific milestones you need..."})]}),n.jsx("button",{style:ie.recommendButton(i==="recommend"),onMouseEnter:()=>e("recommend"),onMouseLeave:()=>e(null),onClick:mt,disabled:b,children:b?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:ie.loadingSpinner,children:""}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(zr,{size:16}),"Generate Master Plan"]})}),g&&n.jsxs("div",{style:ie.aiRecommendations,children:[n.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#374151",marginBottom:"12px"},children:"AI Analysis"}),n.jsx("div",{style:ie.aiReasoning,children:N.reasoning}),n.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#374151",marginBottom:"12px"},children:"Suggested Project Phases"}),N.suggestedFields.map((I,v)=>n.jsxs("div",{style:ie.suggestedField,children:[n.jsxs("div",{style:ie.suggestedFieldInfo,children:[n.jsx("div",{style:ie.suggestedFieldName,children:I.name}),n.jsx("div",{style:ie.suggestedFieldType,children:I.startDate&&I.endDate&&n.jsxs("span",{style:{color:"#10b981"},children:[I.startDate,"  ",I.endDate]})})]}),n.jsxs("button",{style:ie.addSuggestedButton(i===`add-suggested-${v}`),onMouseEnter:()=>e(`add-suggested-${v}`),onMouseLeave:()=>e(null),onClick:()=>tt(I),children:[n.jsx(In,{size:12}),"Add"]})]},v))]}),!g&&!b&&n.jsx("div",{style:{textAlign:"center",padding:"20px",color:c?"#94a3b8":"#64748b",fontSize:"14px",lineHeight:"1.6"},children:`Fill in project details above, then click "Generate Master Plan" to get AI-powered timeline suggestions based on your department's historical data.`})]}),n.jsxs("div",{style:ie.accessControlSection,children:[n.jsxs("div",{style:ie.aiHeader,children:[n.jsx(yi,{size:20,style:{color:"#3b82f6"}}),n.jsx("h3",{style:ie.aiTitle,children:"Access Control"})]}),le&&n.jsxs("div",{style:ie.ownerBadge,children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontWeight:"600",color:c?"#e2e8f0":"#1e293b",marginBottom:"2px",fontSize:"14px"},children:[le.firstName," ",le.lastName," (You)"]}),n.jsx("div",{style:{fontSize:"12px",color:c?"#94a3b8":"#64748b"},children:le.email})]}),n.jsx("div",{style:ie.permissionBadge("owner"),children:"Owner"})]}),n.jsxs("div",{style:ie.fieldGroup,children:[n.jsxs("label",{style:ie.fieldLabel,children:[n.jsx(Eo,{size:14,style:{display:"inline",marginRight:"6px",verticalAlign:"middle"}}),"Add Team Members"]}),n.jsxs("select",{style:ie.select,onChange:I=>{I.target.value&&(k(parseInt(I.target.value),"editor"),I.target.value="")},disabled:me,children:[n.jsx("option",{value:"",children:me?"Loading users...":"Select a user to add..."}),de.filter(I=>!Me.find(v=>v.id===I.id)).map(I=>n.jsxs("option",{value:I.id,children:[I.firstName," ",I.lastName," - ",I.department]},I.id))]})]}),Me.length>0&&n.jsxs("div",{style:{marginTop:"16px"},children:[n.jsxs("label",{style:{...ie.fieldLabel,marginBottom:"12px"},children:["Team Members (",Me.length,")"]}),Me.map(I=>n.jsxs("div",{style:ie.selectedUserCard,children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:{fontWeight:"600",color:c?"#e2e8f0":"#1e293b",marginBottom:"2px",fontSize:"13px"},children:I.name}),n.jsx("div",{style:{fontSize:"11px",color:c?"#94a3b8":"#64748b"},children:I.email})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsxs("select",{style:{...ie.select,width:"auto",padding:"6px 12px",fontSize:"12px"},value:I.permission,onChange:v=>Z(I.id,v.target.value),children:[n.jsx("option",{value:"owner",children:"Owner"}),n.jsx("option",{value:"editor",children:"Editor"}),n.jsx("option",{value:"viewer",children:"Viewer"})]}),n.jsx("button",{style:{padding:"6px",borderRadius:"6px",border:"none",backgroundColor:"rgba(239,68,68,0.1)",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onClick:()=>O(I.id),title:"Remove user",onMouseEnter:v=>{v.currentTarget.style.backgroundColor="rgba(239,68,68,0.2)"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor="rgba(239,68,68,0.1)"},children:n.jsx(mr,{size:16})})]})]},I.id))]}),n.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"8px",fontSize:"11px",color:c?"#93c5fd":"#3b82f6",lineHeight:"1.5",border:c?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(59,130,246,0.1)"},children:[n.jsx("strong",{children:"Permissions:"}),n.jsx("br",{})," ",n.jsx("strong",{children:"Owner:"})," Full control (multiple owners allowed)",n.jsx("br",{})," ",n.jsx("strong",{children:"Editor:"})," Can view and edit",n.jsx("br",{})," ",n.jsx("strong",{children:"Viewer:"})," Can only view"]})]})]})]})]})},JU=()=>{var ke,at;const[i,e]=m.useState([]),[t,r]=m.useState(null),[a,A]=m.useState(null),[c,p]=m.useState(null),[u,f]=m.useState(!1),[g,y]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[b,H]=m.useState(!1),[S,L]=m.useState(!1),[Q,V]=m.useState([]),D=["L1 Operations","L2 Operations"],te=m.useRef({}),[J,M]=m.useState({project:"",projectType:"master-plan",customProjectName:"",leaveType:"",leaveReason:"",startDate:"",endDate:"",status:"Ongoing"}),[N,X]=m.useState([]),[Be,Ae]=m.useState(""),[le,G]=m.useState([]),[se,pe]=m.useState(""),[Me,be]=m.useState([]),[de,Ue]=m.useState(null),[me,F]=m.useState(!0),[re,P]=m.useState({reasoning:"",suggestedFields:[]}),[oe,je]=m.useState(""),U=async()=>{try{F(!0),console.log(" Fetching user data from /user/profile...");const T=await Fe("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" API Response status:",T.status),T.ok){const ge=await T.json();console.log(" User data received:",ge),Ue(ge)}else{const ge=await T.text();console.error(" Failed to fetch user data:",T.status,ge)}}catch(T){console.error(" Error fetching user data:",T)}finally{F(!1)}},B=()=>{y(!g),f(!1)},j=()=>{console.log(" Going back to individual plan overview"),window.location.href="/adminindividualplan"},_=async()=>{const T=J.projectType==="custom"?J.customProjectName:J.project;if(!T||!J.startDate||!J.endDate){alert("Please fill in project name, start date, and end date first");return}L(!0);try{console.log(" Requesting AI recommendations...");const ge={projectName:T,projectType:J.projectType,masterPlanId:J.projectType==="master-plan"?t==null?void 0:t.id:null,startDate:J.startDate,endDate:J.endDate,userQuery:oe.trim()||void 0};console.log(" Request data:",ge);const He=await Fe("/api/individual-plan/ai-recommendations",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(ge)});if(!He.ok){const Se=await He.json();throw new Error(Se.message||"Failed to generate recommendations")}const ze=await He.json();console.log(" AI Recommendations received:",ze);const mt={reasoning:ze.reasoning||"AI analysis completed.",suggestedFields:ze.recommendations.map(Se=>({name:Se.name,type:"Date Range",startDate:new Date(Se.startDate).toLocaleDateString("en-GB"),endDate:new Date(Se.endDate).toLocaleDateString("en-GB"),estimatedHours:Se.estimatedHours,rationale:Se.rationale}))},tt=`
${ze.reasoning}

 Analysis Based on Your Work Patterns:
- Average Weekly Capacity: ${ze.userWorkPatterns.avgHoursPerWeek} hours
- Historical Data Points: ${ze.userWorkPatterns.totalEntriesAnalyzed} entries
- Top Categories: ${ze.userWorkPatterns.topCategories.map(Se=>`${Se.category} (${Se.hours}h)`).join(", ")}
${ze.userWorkPatterns.topProjects.length>0?` Recent Projects: ${ze.userWorkPatterns.topProjects.map(Se=>`${Se.project} (${Se.hours}h)`).join(", ")}`:""}

These recommendations are personalized based on your actual work history${J.projectType==="master-plan"?" and aligned with the master plan timeline":""}.`;mt.reasoning=tt,P(mt),H(!0)}catch(ge){console.error(" Error generating recommendations:",ge),alert(`Failed to generate recommendations: ${ge.message}`)}finally{L(!1)}},ve=T=>{const ge=He=>{if(!He)return"";const ze=He.split("/");if(ze.length===3){const[mt,tt,Se]=ze;return`${Se}-${tt.padStart(2,"0")}-${mt.padStart(2,"0")}`}return He};X([...N,{id:Date.now(),name:T.name,startDate:ge(T.startDate)||"",endDate:ge(T.endDate)||"",status:"Ongoing"}])},k=async()=>{if(J.projectType==="planned-leave"){if(!J.leaveType||!J.startDate||!J.endDate){alert("Please fill in leave type, start date, and end date");return}}else if(!J.project||!J.startDate||!J.endDate){alert("Please fill in all required fields");return}const T={};J.projectType==="planned-leave"?(T.title=`Leave: ${J.leaveType}`,T.leaveType=J.leaveType,T.leaveReason=J.leaveReason||"",le.forEach(He=>{T[He.name]={startDate:He.startDate,endDate:He.endDate}})):(T.title=J.project,T.status=J.status,N.forEach(He=>{T[He.name]={status:He.status,startDate:He.startDate,endDate:He.endDate}}));const ge={project:J.projectType==="planned-leave"?`Leave: ${J.leaveType}`:J.projectType==="custom"?J.customProjectName:J.project,projectType:J.projectType,startDate:J.startDate,endDate:J.endDate,fields:T};console.log(" Submitting individual plan:",ge);try{const He=await Fe("/plan/individual",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(ge)}),ze=await He.json();if(!He.ok)throw new Error(ze.message||"Failed to create individual plan");alert(" Individual plan created successfully!"),window.location.href="/adminindividualplan"}catch(He){console.error(" Submit error:",He),alert("Failed to create plan: "+He.message)}};m.useEffect(()=>{const T=document.createElement("style");return T.textContent=`
      body, html, #root, .app, .main-content, .page-container, .content-wrapper {
        background: ${g?"linear-gradient(135deg, #1e293b 0%, #334155 100%) !important":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%) !important"};
        margin: 0 !important;
        padding: 0 !important;
      }
      
      body > div, #root > div, .app > div {
        background: transparent !important;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
    `,document.head.appendChild(T),()=>{document.head.removeChild(T)}},[g]);const O=async()=>{try{const T=await Fe("/plan/individual",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!T.ok)throw new Error("Failed to fetch individual plans");const ge=await T.json();V(ge)}catch(T){console.error(" Failed to load individual plans:",T)}};m.useEffect(()=>{(async()=>{try{console.log(" Fetching master plans...");const ge=await Fe("/plan/master",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" Master plans response status:",ge.status),!ge.ok){const ze=await ge.text();throw console.error(" Failed to fetch master plans:",ze),new Error("Failed to fetch master plans")}const He=await ge.json();console.log(" Loaded master plans:",He),console.log(" Number of plans:",He.length),e(He)}catch(ge){console.error(" Error fetching master plans:",ge),alert("Failed to load master plans. Please try refreshing the page.")}})(),U(),O()},[]);const Z={page:{minHeight:"100vh",padding:"30px",background:g?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},backButton:T=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:T?"rgba(59,130,246,0.1)":g?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:T?"#3b82f6":g?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:T?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:T?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),header:{fontSize:"28px",fontWeight:"700",color:g?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},topButton:T=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:T?"rgba(59,130,246,0.1)":g?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:T?"#3b82f6":g?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:T?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:T?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:g?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:g?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:g?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:g?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:g?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:g?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:g?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:g?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:g?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:g?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(T,ge)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",outline:"none",backgroundColor:T?"#3b82f6":ge?g?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:T?"#fff":g?"#e2e8f0":"#64748b",transform:ge&&!T?"translateY(-1px)":"translateY(0)",boxShadow:T?"0 4px 12px rgba(59,130,246,0.3)":ge&&!T?"0 2px 8px rgba(0,0,0,0.1)":"none"}),mainContent:{display:"grid",gridTemplateColumns:J.projectType==="planned-leave"?"1fr":"1fr 400px",gap:"32px",alignItems:"start"},formSection:{backgroundColor:g?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:g?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},sectionTitle:{fontSize:"24px",fontWeight:"700",color:g?"#e2e8f0":"#1e293b",marginBottom:"8px",transition:"all 0.3s ease"},sectionSubtitle:{fontSize:"14px",color:g?"#94a3b8":"#64748b",marginBottom:"24px",transition:"all 0.3s ease"},projectContext:{backgroundColor:g?"rgba(51,65,85,0.3)":"rgba(59,130,246,0.05)",borderRadius:"12px",padding:"16px",marginBottom:"24px",border:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(59,130,246,0.1)"},contextTitle:{fontSize:"14px",fontWeight:"600",color:g?"#e2e8f0":"#1e293b",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},contextInfo:{fontSize:"12px",color:g?"#94a3b8":"#64748b",lineHeight:"1.5"},configTitle:{fontSize:"18px",fontWeight:"600",color:g?"#e2e8f0":"#1e293b",marginBottom:"20px",transition:"all 0.3s ease"},fieldGroup:{marginBottom:"20px"},fieldLabel:{fontSize:"14px",fontWeight:"600",color:g?"#d1d5db":"#374151",marginBottom:"8px",display:"block",transition:"all 0.3s ease"},input:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:g?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:g?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif'},select:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:g?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:g?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',cursor:"pointer"},addFieldSection:{marginTop:"32px",paddingTop:"24px",borderTop:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"},addFieldRow:{display:"grid",gridTemplateColumns:"1fr 150px auto",gap:"12px",alignItems:"end",marginBottom:"16px"},addButton:T=>({padding:"12px 20px",borderRadius:"12px",border:"none",backgroundColor:T?"#2563eb":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"}),customField:{backgroundColor:g?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px",transition:"all 0.3s ease"},customFieldHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},customFieldName:{fontSize:"14px",fontWeight:"600",color:g?"#e2e8f0":"#374151"},customFieldType:{fontSize:"12px",color:g?"#94a3b8":"#64748b",backgroundColor:g?"rgba(75,85,99,0.3)":"rgba(226,232,240,0.3)",padding:"4px 8px",borderRadius:"6px"},removeButton:T=>({padding:"4px",borderRadius:"6px",border:"none",backgroundColor:T?"rgba(239,68,68,0.1)":"transparent",color:T?"#ef4444":g?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),aiSection:{backgroundColor:g?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:g?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease",height:"fit-content",position:"sticky",top:"20px"},aiHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},aiTitle:{fontSize:"18px",fontWeight:"700",color:g?"#e2e8f0":"#1e293b"},recommendButton:T=>({width:"100%",padding:"14px 20px",borderRadius:"12px",border:"none",backgroundColor:T?"#8b5cf6":"#a855f7",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"20px"}),loadingSpinner:{animation:"spin 1s linear infinite"},aiRecommendations:{backgroundColor:g?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"16px"},aiReasoning:{fontSize:"14px",lineHeight:"1.6",color:g?"#d1d5db":"#4b5563",whiteSpace:"pre-line",marginBottom:"16px"},suggestedField:{backgroundColor:g?"rgba(75,85,99,0.3)":"rgba(255,255,255,0.8)",borderRadius:"8px",padding:"12px",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},suggestedFieldInfo:{flex:1},suggestedFieldName:{fontSize:"14px",fontWeight:"600",color:g?"#e2e8f0":"#374151",marginBottom:"2px"},suggestedFieldType:{fontSize:"12px",color:g?"#94a3b8":"#64748b"},addSuggestedButton:T=>({padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:T?"#059669":"#10b981",color:"#fff",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"}),submitButton:T=>({width:"100%",padding:"16px 24px",borderRadius:"12px",border:"none",backgroundColor:T?"#1e293b":"#334155",color:"#fff",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",marginTop:"32px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"})};return n.jsxs("div",{style:Z.page,children:[n.jsxs("div",{style:Z.headerRow,children:[n.jsxs("div",{style:Z.headerLeft,children:[n.jsx("button",{style:Z.backButton(a==="back"),onMouseEnter:()=>A("back"),onMouseLeave:()=>A(null),onClick:j,children:n.jsx(wi,{size:20})}),n.jsx("h1",{style:Z.header,children:"Plan"})]}),n.jsxs("div",{style:Z.headerRight,children:[n.jsxs("button",{style:Z.topButton(c==="alerts"),onMouseEnter:()=>p("alerts"),onMouseLeave:()=>p(null),onClick:()=>{console.log(" Alerts clicked - Navigating to alerts page"),window.location.href="/adminalerts"},children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:Z.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:Z.topButton(c==="profile"),onMouseEnter:()=>{p("profile"),f(!0)},onMouseLeave:()=>{p(null)},onClick:()=>{console.log(" Profile clicked - Navigating to profile page"),window.location.href="/adminprofile"},children:n.jsx(Nt,{size:20})}),u&&de&&n.jsxs("div",{style:Z.profileTooltip,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[n.jsx("div",{style:Z.tooltipArrow}),n.jsxs("div",{style:Z.userInfo,children:[n.jsxs("div",{style:Z.avatar,children:[(((ke=de.firstName)==null?void 0:ke[0])||"").toUpperCase(),(((at=de.lastName)==null?void 0:at[0])||"").toUpperCase()]}),n.jsxs("div",{style:Z.userDetails,children:[n.jsxs("div",{style:Z.userName,children:[de.firstName||"Unknown"," ",de.lastName||"User"]}),n.jsxs("div",{style:Z.userRole,children:[de.role==="admin"?"Admin":"Member","  ",de.department||"N/A"]})]})]}),n.jsxs("div",{style:Z.userStats,children:[n.jsxs("div",{style:Z.tooltipStatItem,children:[n.jsx("div",{style:Z.tooltipStatNumber,children:Q.length}),n.jsx("div",{style:Z.tooltipStatLabel,children:"Plans"})]}),n.jsxs("div",{style:Z.tooltipStatItem,children:[n.jsx("div",{style:Z.tooltipStatNumber,children:Q.filter(T=>T.status==="Ongoing").length}),n.jsx("div",{style:Z.tooltipStatLabel,children:"Ongoing"})]}),n.jsxs("div",{style:Z.tooltipStatItem,children:[n.jsx("div",{style:Z.tooltipStatNumber,children:Q.filter(T=>T.status==="Completed").length}),n.jsx("div",{style:Z.tooltipStatLabel,children:"Completed"})]})]}),n.jsx("button",{style:Z.themeToggle,onClick:B,children:g?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:Z.tabContainer,children:n.jsx("div",{style:Z.tab(!0,!1),children:"Individual Plan"})}),n.jsxs("div",{style:Z.mainContent,children:[n.jsxs("div",{style:Z.formSection,children:[n.jsx("h2",{style:Z.sectionTitle,children:"Create Individual Plan"}),n.jsx("p",{style:Z.sectionSubtitle,children:"Align your personal timeline with assigned master plan projects"}),t&&n.jsxs("div",{style:Z.projectContext,children:[n.jsxs("div",{style:Z.contextTitle,children:[n.jsx(Ny,{size:16}),"Master Plan Assignment"]}),n.jsxs("div",{style:Z.contextInfo,children:[n.jsx("strong",{children:t.project}),n.jsx("br",{}),"Timeline: ",new Date(t.startDate).toLocaleDateString(),"  ",new Date(t.endDate).toLocaleDateString(),n.jsx("br",{}),Object.entries(t.fields||{}).map(([T,ge])=>n.jsxs("div",{children:[T,": ",JSON.stringify(ge)]},T))]})]}),n.jsx("h3",{style:Z.configTitle,children:"Configure Your Individual Plan"}),n.jsxs("div",{style:Z.fieldGroup,children:[n.jsx("label",{style:Z.fieldLabel,children:"Project Type"}),n.jsxs("select",{style:Z.select,value:J.projectType,onChange:T=>{M({...J,projectType:T.target.value,project:"",customProjectName:"",leaveType:"",leaveReason:""}),r(null)},children:[n.jsx("option",{value:"master-plan",children:"Master Plan Project"}),n.jsx("option",{value:"operation",children:"Operations"}),n.jsx("option",{value:"custom",children:"Custom Project"}),n.jsx("option",{value:"planned-leave",children:"Planned Leave"})]})]}),J.projectType==="master-plan"&&n.jsxs("div",{style:Z.fieldGroup,children:[n.jsx("label",{style:Z.fieldLabel,children:"Select Master Plan"}),n.jsxs("select",{style:Z.select,value:J.project,onChange:T=>{const ge=T.target.value;M({...J,project:ge});const He=i.find(ze=>ze.project===ge);r(He||null)},children:[n.jsx("option",{value:"",children:"-- Select Master Plan --"}),i.map((T,ge)=>n.jsx("option",{value:T.project,children:T.project},`plan-${T.id||ge}`))]})]}),J.projectType==="operation"&&n.jsxs("div",{style:Z.fieldGroup,children:[n.jsx("label",{style:Z.fieldLabel,children:"Select Operation"}),n.jsxs("select",{style:Z.select,value:J.project,onChange:T=>M({...J,project:T.target.value}),children:[n.jsx("option",{value:"",children:"-- Select Operation --"}),D.map(T=>n.jsx("option",{value:T,children:T},T))]})]}),J.projectType==="planned-leave"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:Z.fieldGroup,children:[n.jsx("label",{style:Z.fieldLabel,children:"Leave Type"}),n.jsxs("select",{style:Z.select,value:J.leaveType,onChange:T=>M({...J,leaveType:T.target.value}),children:[n.jsx("option",{value:"",children:"-- Select Leave Type --"}),n.jsx("option",{value:"Annual Leave",children:"Annual Leave"}),n.jsx("option",{value:"Medical Leave",children:"Medical Leave"}),n.jsx("option",{value:"Hospitalization Leave",children:"Hospitalization Leave"}),n.jsx("option",{value:"Childcare Leave",children:"Childcare Leave"}),n.jsx("option",{value:"Compassionate Leave",children:"Compassionate Leave"}),n.jsx("option",{value:"No Pay Leave",children:"No Pay Leave"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{style:Z.fieldGroup,children:[n.jsx("label",{style:Z.fieldLabel,children:"Reason (Optional)"}),n.jsx("textarea",{style:{...Z.input,minHeight:"80px",resize:"vertical"},value:J.leaveReason,onChange:T=>M({...J,leaveReason:T.target.value}),placeholder:"Brief description of leave reason (optional)"})]})]}),n.jsxs("div",{style:Z.fieldGroup,children:[n.jsx("label",{style:Z.fieldLabel,children:"Start Date"}),n.jsx("div",{onClick:()=>{var T;return(T=te.current["main-start"])==null?void 0:T.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:T=>te.current["main-start"]=T,type:"date",style:Z.input,value:J.startDate,onChange:T=>M({...J,startDate:T.target.value})})})]}),n.jsxs("div",{style:Z.fieldGroup,children:[n.jsx("label",{style:Z.fieldLabel,children:"End Date"}),n.jsx("div",{onClick:()=>{var T;return(T=te.current["main-end"])==null?void 0:T.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:T=>te.current["main-end"]=T,type:"date",style:Z.input,value:J.endDate,onChange:T=>M({...J,endDate:T.target.value})})})]}),J.projectType==="planned-leave"?n.jsxs(n.Fragment,{children:[le.map(T=>n.jsxs("div",{style:Z.customField,children:[n.jsxs("div",{style:Z.customFieldHeader,children:[n.jsxs("div",{children:[n.jsx("div",{style:Z.customFieldName,children:T.name}),n.jsx("div",{style:Z.customFieldType,children:"Leave Period"})]}),n.jsx("button",{style:Z.removeButton(a===`remove-period-${T.id}`),onMouseEnter:()=>A(`remove-period-${T.id}`),onMouseLeave:()=>A(null),onClick:()=>G(le.filter(ge=>ge.id!==T.id)),children:n.jsx(ar,{size:16})})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"12px",alignItems:"center"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{...Z.fieldLabel,fontSize:"12px"},children:"Start Date"}),n.jsx("div",{onClick:()=>{var ge;return(ge=te.current[`leave-${T.id}-start`])==null?void 0:ge.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:ge=>te.current[`leave-${T.id}-start`]=ge,type:"date",style:Z.input,value:T.startDate,onChange:ge=>{const He=le.map(ze=>ze.id===T.id?{...ze,startDate:ge.target.value}:ze);G(He)}})})]}),n.jsx("span",{style:{color:g?"#94a3b8":"#64748b",fontSize:"14px",marginTop:"20px"},children:"to"}),n.jsxs("div",{children:[n.jsx("label",{style:{...Z.fieldLabel,fontSize:"12px"},children:"End Date"}),n.jsx("div",{onClick:()=>{var ge;return(ge=te.current[`leave-${T.id}-end`])==null?void 0:ge.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:ge=>te.current[`leave-${T.id}-end`]=ge,type:"date",style:Z.input,value:T.endDate,onChange:ge=>{const He=le.map(ze=>ze.id===T.id?{...ze,endDate:ge.target.value}:ze);G(He)}})})]})]})]},T.id)),n.jsxs("div",{style:Z.addFieldSection,children:[n.jsx("h4",{style:{...Z.fieldLabel,marginBottom:"16px",fontSize:"16px"},children:"Add Leave Period"}),n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[n.jsx("div",{style:{flex:1},children:n.jsx("input",{type:"text",style:Z.input,value:se,onChange:T=>pe(T.target.value),placeholder:"Leave period name (e.g., January Leave, March Leave)"})}),n.jsxs("button",{style:Z.addButton(a==="add-leave-period"),onMouseEnter:()=>A("add-leave-period"),onMouseLeave:()=>A(null),onClick:()=>{se.trim()&&(G([...le,{id:Date.now(),name:se.trim(),startDate:"",endDate:""}]),pe(""))},children:[n.jsx(In,{size:16}),"Add Leave Period"]})]})]})]}):n.jsxs(n.Fragment,{children:[N.map(T=>n.jsxs("div",{style:Z.customField,children:[n.jsxs("div",{style:Z.customFieldHeader,children:[n.jsxs("div",{children:[n.jsxs("div",{style:Z.customFieldName,children:[T.name,n.jsx("span",{style:{marginLeft:"12px",fontSize:"11px",fontWeight:"600",padding:"4px 8px",borderRadius:"6px",backgroundColor:T.status==="Completed"?"#3b82f620":T.status==="Ongoing"?"#10b98120":"#94a3b820",color:T.status==="Completed"?"#3b82f6":T.status==="Ongoing"?"#10b981":"#94a3b8"},children:T.status})]}),n.jsx("div",{style:Z.customFieldType,children:"Date Range"})]}),n.jsx("button",{style:Z.removeButton(a===`remove-${T.id}`),onMouseEnter:()=>A(`remove-${T.id}`),onMouseLeave:()=>A(null),onClick:()=>X(N.filter(ge=>ge.id!==T.id)),children:n.jsx(ar,{size:16})})]}),n.jsxs("div",{style:Z.fieldGroup,children:[n.jsx("label",{style:Z.fieldLabel,children:"Status"}),n.jsxs("select",{style:Z.select,value:T.status,onChange:ge=>{const He=N.map(ze=>ze.id===T.id?{...ze,status:ge.target.value}:ze);X(He)},children:[n.jsx("option",{value:"Ongoing",children:"Ongoing"}),n.jsx("option",{value:"Completed",children:"Completed"})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"12px",alignItems:"center"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{...Z.fieldLabel,fontSize:"12px"},children:"Start Date"}),n.jsx("div",{onClick:()=>{var ge;return(ge=te.current[`milestone-${T.id}-start`])==null?void 0:ge.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:ge=>te.current[`milestone-${T.id}-start`]=ge,type:"date",style:Z.input,value:T.startDate,onChange:ge=>{const He=N.map(ze=>ze.id===T.id?{...ze,startDate:ge.target.value}:ze);X(He)}})})]}),n.jsx("span",{style:{color:g?"#94a3b8":"#64748b",fontSize:"14px",marginTop:"20px"},children:"to"}),n.jsxs("div",{children:[n.jsx("label",{style:{...Z.fieldLabel,fontSize:"12px"},children:"End Date"}),n.jsx("div",{onClick:()=>{var ge;return(ge=te.current[`milestone-${T.id}-end`])==null?void 0:ge.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:ge=>te.current[`milestone-${T.id}-end`]=ge,type:"date",style:Z.input,value:T.endDate,onChange:ge=>{const He=N.map(ze=>ze.id===T.id?{...ze,endDate:ge.target.value}:ze);X(He)}})})]})]})]},T.id)),n.jsxs("div",{style:Z.addFieldSection,children:[n.jsx("h4",{style:{...Z.fieldLabel,marginBottom:"16px",fontSize:"16px"},children:"Add Milestone"}),n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[n.jsx("div",{style:{flex:1},children:n.jsx("input",{type:"text",style:Z.input,value:Be,onChange:T=>Ae(T.target.value),placeholder:"Milestone name (e.g., Sprint 1, Testing Phase)"})}),n.jsxs("button",{style:Z.addButton(a==="add-milestone"),onMouseEnter:()=>A("add-milestone"),onMouseLeave:()=>A(null),onClick:()=>{Be.trim()&&(X([...N,{id:Date.now(),name:Be.trim(),startDate:"",endDate:"",status:"Ongoing"}]),Ae(""))},children:[n.jsx(In,{size:16}),"Add Milestone"]})]})]})]}),n.jsxs("button",{style:Z.submitButton(a==="submit"),onMouseEnter:()=>A("submit"),onMouseLeave:()=>A(null),onClick:k,children:[n.jsx(Kr,{size:20}),"Create Individual Plan"]})]}),J.projectType!=="planned-leave"&&n.jsxs("div",{style:Z.aiSection,children:[n.jsxs("div",{style:Z.aiHeader,children:[n.jsx(zr,{size:20,style:{color:"#a855f7"}}),n.jsx("h3",{style:Z.aiTitle,children:"AI Recommendations"})]}),n.jsxs("div",{style:Z.fieldGroup,children:[n.jsx("label",{style:Z.fieldLabel,children:"Describe Your Goals (Optional)"}),n.jsx("textarea",{style:{...Z.input,minHeight:"80px",resize:"vertical"},value:oe,onChange:T=>je(T.target.value),placeholder:"Describe what you want to accomplish, any specific requirements, or priorities for this plan..."})]}),n.jsx("button",{style:Z.recommendButton(a==="recommend"),onMouseEnter:()=>A("recommend"),onMouseLeave:()=>A(null),onClick:_,disabled:S,children:S?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:Z.loadingSpinner,children:""}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(zr,{size:16}),"Get AI Recommendations"]})}),b&&n.jsxs("div",{style:Z.aiRecommendations,children:[n.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:g?"#e2e8f0":"#374151",marginBottom:"12px"},children:"AI Analysis"}),n.jsx("div",{style:Z.aiReasoning,children:re.reasoning}),n.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:g?"#e2e8f0":"#374151",marginBottom:"12px"},children:"Recommended Milestones"}),re.suggestedFields.map((T,ge)=>n.jsxs("div",{style:Z.suggestedField,children:[n.jsxs("div",{style:Z.suggestedFieldInfo,children:[n.jsx("div",{style:Z.suggestedFieldName,children:T.name}),n.jsxs("div",{style:Z.suggestedFieldType,children:[T.type,T.startDate&&T.endDate&&n.jsxs("span",{style:{color:"#10b981",marginLeft:"8px"},children:[" ",T.startDate," to ",T.endDate]}),T.estimatedHours&&n.jsxs("span",{style:{marginLeft:"8px"},children:[" ",T.estimatedHours,"h"]})]}),T.rationale&&n.jsx("div",{style:{fontSize:"11px",color:g?"#9ca3af":"#6b7280",marginTop:"4px"},children:T.rationale})]}),n.jsxs("button",{style:Z.addSuggestedButton(a===`add-suggested-${ge}`),onMouseEnter:()=>A(`add-suggested-${ge}`),onMouseLeave:()=>A(null),onClick:()=>ve(T),children:[n.jsx(In,{size:12}),"Add"]})]},ge))]}),!b&&!S&&n.jsxs("div",{style:{textAlign:"center",padding:"20px",color:g?"#94a3b8":"#64748b",fontSize:"14px"},children:[n.jsx(zr,{size:32,style:{marginBottom:"12px",opacity:.5}}),"Get personalized milestone recommendations based on your historical work patterns and the selected master plan timeline."]})]})]})]})},XU=()=>{const[i,e]=m.useState(null),[t,r]=m.useState(""),[a,A]=m.useState(""),[c,p]=m.useState(""),[u,f]=m.useState({}),[g,y]=m.useState(!0),[b,H]=m.useState(!1),[S,L]=m.useState(null),[Q,V]=m.useState(null),[D,te]=m.useState(null),[J,M]=m.useState(!1),[N,X]=m.useState(null),[Be,Ae]=m.useState(!1),[le,G]=m.useState(null),se=m.useRef(null),[pe,Me]=m.useState(null),[be,de]=m.useState(!0),[Ue,me]=m.useState([]),[F,re]=m.useState([]),[P,oe]=m.useState(!1),[je,U]=m.useState(!1),[B,j]=m.useState(""),[_,ve]=m.useState("editor"),[k,O]=m.useState({}),[Z,ke]=m.useState(!1),[at,T]=m.useState(""),[ge,He]=m.useState("On Track"),[ze,mt]=m.useState(""),[tt,Se]=m.useState(""),[ie,dt]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),ht=sessionStorage.getItem("editingPlanId"),R=m.useRef(null),Ut=m.useRef(null),Tt=m.useRef(null),I=m.useRef(null),v=m.useRef({});m.useEffect(()=>{(async()=>{if(ht)try{const ae=await Fe(`/plan/master/${ht}/permission`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ae.ok){const Ce=await ae.json();Me(Ce.permission),console.log(" User permission:",Ce.permission)}else console.warn(" Permission endpoint not available, using fallback to ownership"),Me(void 0)}catch(ae){console.error(" Error fetching permission:",ae),console.log(" Falling back to ownership-based access control"),Me(void 0)}finally{de(!1)}})()},[ht]),m.useEffect(()=>{pe&&S&&(async()=>{if(!(!ht||!S))try{oe(!0);const ae=await Fe(`/plan/master/${ht}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ae.ok){const Ce=await ae.json();me(Ce.team||[]),console.log(" Team members loaded:",Ce.team)}}catch(ae){console.error(" Error fetching team:",ae)}finally{oe(!1)}})()},[ht,pe,S]),m.useEffect(()=>{pe==="owner"&&S&&Ue&&(async()=>{if(!(pe!=="owner"&&pe!=="editor"))try{const ae=await Fe("/user/list",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ae.ok){const At=(await ae.json()).users.filter(bt=>bt.id!==(S==null?void 0:S.id)&&!Ue.some(Pt=>Pt.userId===bt.id));re(At)}}catch(ae){console.error(" Error fetching users:",ae)}})()},[pe,S,Ue]),m.useEffect(()=>{(async()=>{try{const ae=await Fe("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ae.ok){const Ce=await ae.json();L(Ce)}}catch(ae){console.error("Error fetching user data:",ae)}})()},[]),m.useEffect(()=>{S&&!be&&(async()=>{if(!(!ht||!S)){if(pe==="viewer"){G("You have view-only access to this plan."),y(!1);return}if(pe===null){G("You do not have permission to edit this plan."),y(!1);return}try{Ae(!0),G(null);const ae=await Fe(`/plan/lock/${ht}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(ae.ok){const Ce=await ae.json();X(Ce.lock),console.log(" Lock acquired:",Ce.lock),se.current=setInterval(async()=>{try{await Fe(`/plan/lock/${ht}/heartbeat`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),console.log(" Lock heartbeat sent")}catch(At){console.error(" Heartbeat failed:",At)}},3e4)}else{const Ce=await ae.json();if(Ce.lockedBy&&Ce.lockedBy!==`${S.firstName} ${S.lastName}`)if(window.confirm(` This plan is currently being edited by ${Ce.lockedBy}.

Do you want to take over editing? This will disconnect them.`)){const bt=await Fe(`/plan/lock/${ht}/takeover`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({force:!0})});if(bt.ok){const Pt=await bt.json();X(Pt.lock),console.log(" Lock takeover successful"),se.current=setInterval(async()=>{try{await Fe(`/plan/lock/${ht}/heartbeat`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(Ln){console.error(" Heartbeat failed:",Ln)}},3e4)}else G("Failed to take over lock")}else window.location.href="/adminviewplan";else G(Ce.error||"Failed to acquire lock")}}catch(ae){console.error(" Lock acquisition error:",ae),G("Network error. Please try again.")}finally{Ae(!1)}}})()},[ht,S,pe,be]),m.useEffect(()=>()=>{se.current&&clearInterval(se.current),ht&&N&&Fe(`/plan/lock/${ht}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then(()=>{console.log(" Lock released on unmount")}).catch(()=>{console.warn("Lock already released on unmount, safe to ignore")})},[ht,N]),m.useEffect(()=>{(async()=>{if(!ht){alert("No plan selected for editing"),window.location.href="/adminviewplan";return}try{y(!0);const ae=await Fe(`/plan/master/${ht}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ae.ok){const Ce=await ae.json();e(Ce),r(Ce.project),A(Ce.startDate.split("T")[0]),p(Ce.endDate.split("T")[0]),f(Ce.fields||{}),console.log(" Plan data loaded:",Ce)}else alert("Failed to load plan data"),window.location.href="/adminviewplan"}catch(ae){console.error("Error fetching plan:",ae),alert("Network error. Please try again."),window.location.href="/adminviewplan"}finally{y(!1)}})()},[ht]);const he=async()=>{if(!B||!_){alert("Please select a user and permission level");return}try{const C=await Fe(`/plan/master/${ht}/permissions`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:parseInt(B),permissionLevel:_})});if(C.ok){const ae=await C.json();console.log(" Team member added:",ae);const Ce=await Fe(`/plan/master/${ht}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Ce.ok){const At=await Ce.json();me(At.team||[])}j(""),ve("editor"),alert("Team member added successfully!")}else{const ae=await C.json();alert(`Failed to add team member: ${ae.error}`)}}catch(C){console.error(" Error adding team member:",C),alert("Network error. Please try again.")}},Ke=async(C,ae)=>{try{if((await Fe(`/plan/master/${ht}/permissions`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:C,permissionLevel:ae})})).ok){console.log(" Permission updated");const At=await Fe(`/plan/master/${ht}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(At.ok){const bt=await At.json();me(bt.team||[])}alert("Permission updated successfully!")}else alert("Failed to update permission")}catch(Ce){console.error(" Error updating permission:",Ce),alert("Network error. Please try again.")}},nt=async C=>{if(window.confirm("Are you sure you want to remove this team member?"))try{if((await Fe(`/plan/master/${ht}/permissions/${C}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})).ok){console.log(" Team member removed");const At=await Fe(`/plan/master/${ht}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(At.ok){const bt=await At.json();me(bt.team||[])}alert("Team member removed successfully!")}else alert("Failed to remove team member")}catch(Ce){console.error(" Error removing team member:",Ce),alert("Network error. Please try again.")}},E=()=>{ke(!0)},$=()=>{if(!at.trim()){alert("Please enter a milestone name");return}if(u[at.trim()]){alert("A milestone with this name already exists!");return}f({...u,[at.trim()]:{status:ge,startDate:ze,endDate:tt}}),ke(!1),T(""),He("On Track"),mt(""),Se("")},Qe=()=>{ke(!1),T(""),He("On Track"),mt(""),Se("")},W=(C,ae,Ce)=>{f({...u,[C]:{...u[C],[ae]:Ce}})},Y=async()=>{if(!t.trim()){alert("Please enter a project name");return}if(!a||!c){alert("Please enter start and end dates");return}if(pe==="viewer"){alert(" You have view-only access. Contact the owner for edit permissions.");return}if(pe===null){alert(" You do not have permission to edit this plan.");return}H(!0);try{const C=await Fe(`/plan/master/${ht}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:t,startDate:a,endDate:c,fields:u,justifications:k,submittedBy:{firstName:S==null?void 0:S.firstName,lastName:S==null?void 0:S.lastName,email:S==null?void 0:S.email}})});if(C.ok){if(console.log(" Plan updated successfully"),N)try{await Fe(`/plan/lock/${ht}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})}catch{console.warn("Lock already released or not found, safe to ignore")}alert("Plan updated successfully!"),sessionStorage.removeItem("editingPlanId"),sessionStorage.removeItem("editingPlanData"),window.location.href="/adminviewplan"}else{const ae=await C.json();alert(`Failed to update plan: ${ae.error}`)}}catch(C){console.error("Error updating plan:",C),alert("Network error. Please try again.")}finally{H(!1)}},We=async()=>{if(N)try{await Fe(`/plan/lock/${ht}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}),console.log(" Lock released on cancel")}catch(C){console.error(" Failed to release lock:",C)}sessionStorage.removeItem("editingPlanId"),sessionStorage.removeItem("editingPlanData"),window.location.href="/adminviewplan"},Ze=()=>{dt(!ie),M(!1)},St=C=>{const Ce={owner:{bg:"#3b82f6",icon:yi,label:"Owner"},editor:{bg:"#10b981",icon:eA,label:"Editor"},viewer:{bg:"#64748b",icon:Fo,label:"Viewer"}}[C];if(!Ce)return null;const At=Ce.icon;return n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"8px",backgroundColor:Ce.bg+"20",border:`1px solid ${Ce.bg}40`,fontSize:"12px",fontWeight:"600",color:Ce.bg,textTransform:"uppercase"},children:[n.jsx(At,{size:14}),Ce.label]})},xe={page:{minHeight:"100vh",padding:"30px",background:ie?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif'},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},backButton:C=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:C?"rgba(59,130,246,0.1)":ie?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:C?"#3b82f6":ie?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:C?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:C?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),topButton:C=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:C?"rgba(59,130,246,0.1)":ie?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:C?"#3b82f6":ie?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:C?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:C?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:ie?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:ie?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:ie?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:ie?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},userName:{fontSize:"14px",fontWeight:"600",color:ie?"#e2e8f0":"#1e293b",marginBottom:"2px"},userRole:{fontSize:"12px",color:ie?"#94a3b8":"#64748b"},userStats:{borderTop:ie?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:ie?"#e2e8f0":"#1e293b"},tooltipStatLabel:{fontSize:"10px",color:ie?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px",width:"100%"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:ie?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:ie?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(C,ae)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",border:"none",backgroundColor:C?"#3b82f6":ae?ie?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:C?"#fff":ie?"#e2e8f0":"#64748b",boxShadow:C?"0 4px 12px rgba(59,130,246,0.3)":"none"}),mainContent:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"32px",alignItems:"start"},formSection:{backgroundColor:ie?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:ie?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},rightSidebar:{display:"flex",flexDirection:"column",gap:"20px"},teamSection:{backgroundColor:ie?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:ie?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},teamHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},teamTitle:{fontSize:"18px",fontWeight:"700",color:ie?"#e2e8f0":"#1e293b"},addFieldButton:C=>({padding:"10px 20px",borderRadius:"12px",border:ie?"2px dashed rgba(59,130,246,0.5)":"2px dashed rgba(59,130,246,0.3)",backgroundColor:C?"rgba(59,130,246,0.1)":"transparent",color:"#3b82f6",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",fontSize:"14px",fontWeight:"600",width:"100%",marginTop:"16px"}),container:{maxWidth:"1200px",margin:"0 auto"},header:{fontSize:"28px",fontWeight:"700",color:ie?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"12px"},title:{fontSize:"28px",fontWeight:"700",color:ie?"#f1f5f9":"#1e293b",display:"flex",alignItems:"center",gap:"12px"},lockBanner:C=>({padding:"16px 20px",borderRadius:"12px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"12px",backgroundColor:C==="error"?"rgba(239,68,68,0.1)":C==="acquiring"?"rgba(251,191,36,0.1)":"rgba(16,185,129,0.1)",border:`1px solid ${C==="error"?"rgba(239,68,68,0.3)":C==="acquiring"?"rgba(251,191,36,0.3)":"rgba(16,185,129,0.3)"}`,color:C==="error"?"#ef4444":C==="acquiring"?"#f59e0b":"#10b981",fontWeight:"600",fontSize:"14px"}),card:{backgroundColor:ie?"#374151":"#fff",borderRadius:"20px",padding:"32px",marginBottom:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:ie?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)"},sectionTitle:{fontSize:"20px",fontWeight:"700",color:ie?"#e2e8f0":"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",userSelect:"none"},formGroup:{marginBottom:"24px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:ie?"#e2e8f0":"#374151",marginBottom:"8px"},input:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:ie?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:ie?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:ie?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none"},textarea:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:ie?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:ie?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:ie?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",fontFamily:"inherit",resize:"vertical",minHeight:"60px"},select:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:ie?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:ie?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:ie?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",cursor:"pointer"},fieldCard:{backgroundColor:ie?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"20px",marginBottom:"16px",border:ie?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)"},fieldHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},fieldName:{fontSize:"16px",fontWeight:"600",color:ie?"#e2e8f0":"#1e293b"},removeButton:C=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:C?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",color:"#ef4444",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),button:(C,ae="primary",Ce=!1)=>({padding:"12px 24px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:Ce?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",opacity:Ce?.5:1,backgroundColor:Ce?ie?"#4b5563":"#e5e7eb":ae==="primary"?C?"#2563eb":"#3b82f6":ae==="secondary"?C?"#f59e0b":"#fbbf24":C?ie?"#4b5563":"#e5e7eb":ie?"#6b7280":"#f3f4f6",color:ae==="primary"||ae==="secondary"?"#fff":ie?"#e2e8f0":"#374151",boxShadow:C&&!Ce?"0 4px 12px rgba(0,0,0,0.15)":"none",transform:C&&!Ce?"translateY(-1px)":"translateY(0)"}),buttonGroup:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"32px"},addFieldButton:C=>({padding:"10px 20px",borderRadius:"12px",border:ie?"2px dashed rgba(59,130,246,0.5)":"2px dashed rgba(59,130,246,0.3)",backgroundColor:C?"rgba(59,130,246,0.1)":"transparent",color:"#3b82f6",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",fontSize:"14px",fontWeight:"600"}),dateRow:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},teamMemberCard:{backgroundColor:ie?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center",border:ie?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.8)"},teamMemberInfo:{display:"flex",alignItems:"center",gap:"12px",flex:1},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"14px"},memberDetails:{flex:1},memberName:{fontSize:"14px",fontWeight:"600",color:ie?"#e2e8f0":"#1e293b",marginBottom:"2px"},memberEmail:{fontSize:"12px",color:ie?"#94a3b8":"#64748b"},addTeamRow:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:"12px",alignItems:"end",padding:"16px",backgroundColor:ie?"rgba(59,130,246,0.05)":"rgba(59,130,246,0.03)",borderRadius:"12px",border:ie?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(59,130,246,0.1)"},infoBox:{padding:"16px",borderRadius:"12px",backgroundColor:ie?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",border:ie?"1px solid rgba(59,130,246,0.3)":"1px solid rgba(59,130,246,0.2)",marginTop:"16px",fontSize:"13px",color:ie?"#93c5fd":"#3b82f6",lineHeight:"1.6"},addMilestoneModal:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(8px)"},addMilestoneModalContent:{backgroundColor:ie?"#374151":"#fff",borderRadius:"24px",padding:"32px",boxShadow:"0 25px 50px rgba(0,0,0,0.3)",border:ie?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflowY:"auto"},modalHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",paddingBottom:"16px",borderBottom:ie?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)"},modalTitle:{fontSize:"24px",fontWeight:"700",color:ie?"#e2e8f0":"#1e293b",display:"flex",alignItems:"center",gap:"12px"},modalCloseButton:C=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:C?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",color:"#ef4444",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),modalBody:{marginBottom:"24px"},modalFooter:{display:"flex",gap:"12px",justifyContent:"flex-end",paddingTop:"20px",borderTop:ie?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"}};return g||be?n.jsx("div",{style:xe.page,children:n.jsx("div",{style:xe.container,children:n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:ie?"#94a3b8":"#64748b",fontSize:"16px"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"12px"},children:""}),"Loading plan data..."]})})}):pe===null?n.jsx("div",{style:xe.page,children:n.jsxs("div",{style:xe.container,children:[n.jsxs("div",{style:xe.lockBanner("error"),children:[n.jsx(so,{size:20}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:"700",marginBottom:"4px"},children:"Access Denied"}),n.jsx("div",{style:{fontSize:"13px",opacity:.9},children:"You do not have permission to view this plan."})]})]}),n.jsx("button",{style:xe.button(!1,"default"),onClick:()=>window.location.href="/adminviewplan",children:"Back to Plans"})]})}):n.jsxs("div",{style:xe.page,children:[n.jsxs("div",{style:xe.headerRow,children:[n.jsxs("div",{style:xe.headerLeft,children:[n.jsx("button",{style:xe.backButton(Q==="back"),onMouseEnter:()=>V("back"),onMouseLeave:()=>V(null),onClick:We,children:n.jsx(wi,{size:20})}),n.jsxs("h1",{style:xe.header,children:["Edit Master Plan",pe&&St(pe)]})]}),n.jsxs("div",{style:xe.headerRight,children:[n.jsxs("button",{style:xe.topButton(D==="alerts"),onMouseEnter:()=>te("alerts"),onMouseLeave:()=>te(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:xe.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:xe.topButton(D==="profile"),onMouseEnter:()=>{te("profile"),M(!0)},onMouseLeave:()=>te(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Nt,{size:20})}),J&&n.jsxs("div",{style:xe.profileTooltip,onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),children:[n.jsx("div",{style:xe.tooltipArrow}),n.jsxs("div",{style:xe.userInfo,children:[n.jsx("div",{style:xe.avatar,children:S?`${S.firstName[0]}${S.lastName[0]}`:"U"}),n.jsxs("div",{children:[n.jsx("div",{style:xe.userName,children:S?`${S.firstName} ${S.lastName}`:"Loading..."}),n.jsx("div",{style:xe.userRole,children:S?`${S.role}  ${S.department}`:"Loading..."})]})]}),n.jsxs("div",{style:xe.userStats,children:[n.jsxs("div",{style:xe.tooltipStatItem,children:[n.jsx("div",{style:xe.tooltipStatNumber,children:"32"}),n.jsx("div",{style:xe.tooltipStatLabel,children:"Hours"})]}),n.jsxs("div",{style:xe.tooltipStatItem,children:[n.jsx("div",{style:xe.tooltipStatNumber,children:"3"}),n.jsx("div",{style:xe.tooltipStatLabel,children:"Projects"})]}),n.jsxs("div",{style:xe.tooltipStatItem,children:[n.jsx("div",{style:xe.tooltipStatNumber,children:"80%"}),n.jsx("div",{style:xe.tooltipStatLabel,children:"Capacity"})]})]}),n.jsx("button",{style:xe.themeToggle,onClick:Ze,children:ie?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:xe.tabContainer,children:n.jsx("div",{style:xe.tab(!0,!1),children:"Master Plan"})}),Be&&n.jsxs("div",{style:xe.lockBanner("acquiring"),children:[n.jsx(ui,{size:20}),n.jsx("div",{children:"Acquiring edit lock..."})]}),le&&n.jsxs("div",{style:xe.lockBanner("error"),children:[n.jsx(so,{size:20}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:"700",marginBottom:"4px"},children:"Cannot Edit Plan"}),n.jsx("div",{style:{fontSize:"13px",opacity:.9},children:le})]})]}),N&&!le&&n.jsxs("div",{style:xe.lockBanner("success"),children:[n.jsx(Kr,{size:20}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:"700",marginBottom:"4px"},children:"You have edit access"}),n.jsxs("div",{style:{fontSize:"13px",opacity:.9},children:["Your changes will be saved automatically. Lock expires in ",N.minutesRemaining||5," minutes."]})]})]}),n.jsxs("div",{style:xe.mainContent,children:[n.jsxs("div",{style:xe.formSection,children:[n.jsx("h2",{style:xe.sectionTitle,children:"Basic Information"}),n.jsxs("div",{style:xe.formGroup,children:[n.jsx("label",{style:xe.label,children:"Project Name *"}),n.jsx("input",{type:"text",value:t,onChange:C=>r(C.target.value),style:xe.input,placeholder:"Enter project name",disabled:pe==="viewer"})]}),n.jsxs("div",{style:xe.dateRow,children:[n.jsxs("div",{style:xe.formGroup,children:[n.jsx("label",{style:xe.label,children:"Start Date *"}),n.jsx("div",{onClick:()=>{var C;return(C=R.current)==null?void 0:C.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:R,type:"date",value:a,onChange:C=>A(C.target.value),style:xe.input,disabled:pe==="viewer"})})]}),n.jsxs("div",{style:xe.formGroup,children:[n.jsx("label",{style:xe.label,children:"End Date *"}),n.jsx("div",{onClick:()=>{var C;return(C=Ut.current)==null?void 0:C.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:Ut,type:"date",value:c,onChange:C=>p(C.target.value),style:xe.input,disabled:pe==="viewer"})})]})]}),n.jsx("h2",{style:{...xe.sectionTitle,marginTop:"32px"},children:"Milestones & Phases"}),Object.entries(u).map(([C,ae])=>["status","lead","budget","completion"].includes(C.toLowerCase())?null:n.jsxs("div",{style:xe.fieldCard,children:[n.jsx("div",{style:xe.fieldHeader,children:n.jsx("span",{style:xe.fieldName,children:C})}),n.jsxs("div",{style:xe.dateRow,children:[n.jsxs("div",{style:xe.formGroup,children:[n.jsx("label",{style:xe.label,children:"Status"}),n.jsxs("select",{value:ae.status||"On Track",onChange:Ce=>W(C,"status",Ce.target.value),style:xe.select,disabled:pe==="viewer",children:[n.jsx("option",{value:"On Track",children:"On Track"}),n.jsx("option",{value:"At Risk",children:"At Risk"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Delayed",children:"Delayed"})]})]}),n.jsxs("div",{style:xe.formGroup,children:[n.jsx("label",{style:xe.label,children:"Start Date"}),n.jsx("div",{children:n.jsx("div",{onClick:()=>{var Ce;return(Ce=v.current[`${C}-start`])==null?void 0:Ce.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:Ce=>{v.current[`${C}-start`]=Ce},type:"date",value:ae.startDate||"",onChange:Ce=>W(C,"startDate",Ce.target.value),style:xe.input})})})]}),n.jsxs("div",{style:xe.formGroup,children:[n.jsx("label",{style:xe.label,children:"End Date"}),n.jsx("div",{children:n.jsx("div",{onClick:()=>{var Ce;return(Ce=v.current[`${C}-end`])==null?void 0:Ce.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:Ce=>{v.current[`${C}-end`]=Ce},type:"date",value:ae.endDate||"",onChange:Ce=>W(C,"endDate",Ce.target.value),style:xe.input})})})]})]}),pe!=="viewer"&&n.jsxs("div",{style:xe.formGroup,children:[n.jsx("label",{style:xe.label,children:"Justification for Changes (Optional)"}),n.jsx("textarea",{value:k[C]||"",onChange:Ce=>O({...k,[C]:Ce.target.value}),style:xe.textarea,placeholder:"Optionally explain why you're making changes to this milestone...",rows:2,disabled:pe==="viewer"})]})]},C)),pe!=="viewer"&&n.jsxs("button",{style:xe.addFieldButton(Q==="add-field"),onMouseEnter:()=>V("add-field"),onMouseLeave:()=>V(null),onClick:E,children:[n.jsx(In,{size:16}),"Add Milestone / Phase"]}),n.jsxs("div",{style:xe.buttonGroup,children:[n.jsxs("button",{style:xe.button(Q==="cancel","default"),onMouseEnter:()=>V("cancel"),onMouseLeave:()=>V(null),onClick:We,children:[n.jsx(mr,{size:16}),"Cancel"]}),n.jsxs("button",{style:xe.button(Q==="save","primary",b||pe==="viewer"),onMouseEnter:()=>V("save"),onMouseLeave:()=>V(null),onClick:Y,disabled:b||pe==="viewer",children:[n.jsx(Kr,{size:16}),b?"Saving...":"Save Changes"]})]}),pe==="viewer"&&n.jsxs("div",{style:xe.infoBox,children:[n.jsx(so,{size:16,style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px"}}),"You have view-only access to this plan. Contact the owner to request edit permissions."]})]}),n.jsx("div",{style:xe.rightSidebar,children:n.jsxs("div",{style:xe.teamSection,children:[n.jsxs("div",{style:xe.teamHeader,children:[n.jsx(Eo,{size:20,style:{color:"#3b82f6"}}),n.jsx("h3",{style:xe.teamTitle,children:"Team & Permissions"})]}),Ue.filter(C=>C.permission==="owner").map(C=>n.jsxs("div",{style:xe.teamMemberCard,children:[n.jsxs("div",{style:xe.teamMemberInfo,children:[n.jsxs("div",{style:xe.avatar,children:[C.firstName[0],C.lastName[0]]}),n.jsxs("div",{style:xe.memberDetails,children:[n.jsxs("div",{style:xe.memberName,children:[C.firstName," ",C.lastName,C.userId===(S==null?void 0:S.id)&&" (You)"]}),n.jsx("div",{style:xe.memberEmail,children:C.email})]})]}),St("owner")]},C.userId)),Ue.filter(C=>C.permission!=="owner").map(C=>n.jsxs("div",{style:xe.teamMemberCard,children:[n.jsxs("div",{style:xe.teamMemberInfo,children:[n.jsxs("div",{style:xe.avatar,children:[C.firstName[0],C.lastName[0]]}),n.jsxs("div",{style:xe.memberDetails,children:[n.jsxs("div",{style:xe.memberName,children:[C.firstName," ",C.lastName,C.userId===(S==null?void 0:S.id)&&" (You)"]}),n.jsx("div",{style:xe.memberEmail,children:C.email})]})]}),pe==="owner"?n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsxs("select",{value:C.permission,onChange:ae=>Ke(C.userId,ae.target.value),style:{...xe.select,width:"auto",padding:"6px 12px",fontSize:"12px"},disabled:C.permission==="owner",children:[n.jsx("option",{value:"owner",children:"Owner"}),n.jsx("option",{value:"editor",children:"Editor"}),n.jsx("option",{value:"viewer",children:"Viewer"})]}),n.jsx("button",{style:xe.removeButton(Q===`remove-${C.userId}`),onMouseEnter:()=>V(`remove-${C.userId}`),onMouseLeave:()=>V(null),onClick:()=>nt(C.userId),children:n.jsx(ar,{size:16})})]}):St(C.permission)]},C.userId)),(pe==="owner"||pe==="editor")&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:xe.addTeamRow,children:[n.jsxs("div",{style:xe.formGroup,children:[n.jsx("label",{style:xe.label,children:"Add Team Member"}),n.jsxs("select",{value:B,onChange:C=>j(C.target.value),style:xe.select,children:[n.jsx("option",{value:"",children:"Select a user..."}),F.map(C=>n.jsxs("option",{value:C.id,children:[C.firstName," ",C.lastName," (",C.email,")"]},C.id))]})]}),n.jsxs("div",{style:xe.formGroup,children:[n.jsx("label",{style:xe.label,children:"Permission"}),n.jsxs("select",{value:_,onChange:C=>ve(C.target.value),style:xe.select,children:[n.jsx("option",{value:"owner",children:"Owner"}),n.jsx("option",{value:"editor",children:"Editor"}),n.jsx("option",{value:"viewer",children:"Viewer"})]})]}),n.jsxs("button",{style:xe.button(Q==="add-member","primary",!B),onMouseEnter:()=>V("add-member"),onMouseLeave:()=>V(null),onClick:he,disabled:!B,children:[n.jsx(In,{size:16}),"Add"]})]}),n.jsxs("div",{style:xe.infoBox,children:[n.jsx("strong",{children:"Permission Levels:"}),n.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Owner:"})," Full control including managing team members and permissions"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Editor:"})," Can edit milestones, dates, and status"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Viewer:"})," Can only view the plan (read-only access)"]})]}),n.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",opacity:.8},children:[" ",n.jsx("strong",{children:"Multiple owners allowed"})," - Plans can have more than one owner"]})]})]})]})})]}),Z&&n.jsx("div",{style:xe.addMilestoneModal,children:n.jsxs("div",{style:xe.addMilestoneModalContent,children:[n.jsxs("div",{style:xe.modalHeader,children:[n.jsxs("div",{style:xe.modalTitle,children:[n.jsx(In,{size:24,style:{color:"#3b82f6"}}),"Add New Milestone"]}),n.jsx("button",{style:xe.modalCloseButton(Q==="close-modal"),onMouseEnter:()=>V("close-modal"),onMouseLeave:()=>V(null),onClick:Qe,children:n.jsx(mr,{size:20})})]}),n.jsxs("div",{style:xe.modalBody,children:[n.jsxs("div",{style:xe.formGroup,children:[n.jsx("label",{style:xe.label,children:"Milestone Name *"}),n.jsx("input",{type:"text",value:at,onChange:C=>T(C.target.value),style:xe.input,placeholder:"e.g., Phase 1, Sprint 2, Design Review",autoFocus:!0})]}),n.jsxs("div",{style:xe.formGroup,children:[n.jsx("label",{style:xe.label,children:"Initial Status"}),n.jsxs("select",{value:ge,onChange:C=>He(C.target.value),style:xe.select,children:[n.jsx("option",{value:"On Track",children:"On Track"}),n.jsx("option",{value:"At Risk",children:"At Risk"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Delayed",children:"Delayed"})]})]}),n.jsxs("div",{style:xe.dateRow,children:[n.jsxs("div",{style:xe.formGroup,children:[n.jsx("label",{style:xe.label,children:"Start Date"}),n.jsx("div",{onClick:()=>{var C;return(C=Tt.current)==null?void 0:C.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:Tt,type:"date",value:ze,onChange:C=>mt(C.target.value),style:xe.input})})]}),n.jsxs("div",{style:xe.formGroup,children:[n.jsx("label",{style:xe.label,children:"End Date"}),n.jsx("div",{onClick:()=>{var C;return(C=I.current)==null?void 0:C.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:I,type:"date",value:tt,onChange:C=>Se(C.target.value),style:xe.input})})]})]}),n.jsxs("div",{style:xe.infoBox,children:[" ",n.jsx("strong",{children:"Tip:"})," You can edit the milestone details after adding it. Dates are optional but help with timeline tracking."]})]}),n.jsxs("div",{style:xe.modalFooter,children:[n.jsxs("button",{style:xe.button(Q==="cancel-milestone","default"),onMouseEnter:()=>V("cancel-milestone"),onMouseLeave:()=>V(null),onClick:Qe,children:[n.jsx(mr,{size:16}),"Cancel"]}),n.jsxs("button",{style:xe.button(Q==="add-milestone","primary",!at.trim()),onMouseEnter:()=>V("add-milestone"),onMouseLeave:()=>V(null),onClick:$,disabled:!at.trim(),children:[n.jsx(In,{size:16}),"Add Milestone"]})]})]})})]})},qU=()=>{const[i,e]=m.useState(null),[t,r]=m.useState(null),[a,A]=m.useState(!1),[c,p]=m.useState([]),[u,f]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[g,y]=m.useState(null),[b,H]=m.useState(!0),[S,L]=m.useState(null),[Q,V]=m.useState(null),D=m.useRef(null),te=m.useRef(null),J=m.useRef({}),[M,N]=m.useState({assignedProject:"",projectType:"",role:"",leaveType:"",leaveReason:"",startDate:"",endDate:""}),[X,Be]=m.useState([]),[Ae,le]=m.useState([]),[G,se]=m.useState(""),[pe,Me]=m.useState(""),be=["L1 Operations","L2 Operations"],de=be.includes(M.assignedProject);m.useEffect(()=>{const ve=new URLSearchParams(window.location.search).get("id");ve?L(parseInt(ve)):(alert("No plan ID provided"),window.location.href="/adminindividualplan")},[]);const Ue=async()=>{try{const _=await Fe("/plan/individual",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!_.ok)throw new Error("Failed to fetch individual plans");const ve=await _.json();p(ve)}catch(_){console.error(" Failed to load individual plans:",_)}};m.useEffect(()=>{(async()=>{try{const ve=await Fe("/user/profile",{method:"GET",credentials:"include"});if(!ve.ok)throw new Error("Failed to fetch user profile");const k=await ve.json();y(k)}catch(ve){console.error(" Error fetching user profile:",ve)}})(),Ue()},[]),m.useEffect(()=>{if(!S)return;(async()=>{try{H(!0),console.log(` Fetching plan ${S}...`);const ve=await Fe("/plan/individual",{method:"GET",credentials:"include"});if(!ve.ok)throw new Error("Failed to fetch plans");const O=(await ve.json()).find(mt=>mt.Id===S);if(!O){alert("Plan not found or you do not have access to it"),window.location.href="/adminindividualplan";return}console.log(" Plan loaded:",O),V(O);const Z=typeof O.Fields=="string"?JSON.parse(O.Fields):O.Fields,ke=O.Project.startsWith("Leave:"),at=ke?"planned-leave":be.includes(O.Project)?"operation":"custom";N({assignedProject:O.Project,projectType:at,role:O.Role||"",leaveType:Z.leaveType||"",leaveReason:Z.leaveReason||"",startDate:me(O.StartDate),endDate:me(O.EndDate)});const T=[],ge=[];let He=1,ze=1;Object.entries(Z).forEach(([mt,tt])=>{if(!(mt==="title"||mt==="status"||mt==="leaveType"||mt==="leaveReason")){if(typeof tt=="object"&&tt!==null)ke?ge.push({id:ze++,name:mt,startDate:me(tt.startDate),endDate:me(tt.endDate)}):T.push({id:He++,name:mt,type:"Date Range",status:tt.status||"Ongoing",startDate:me(tt.startDate),endDate:me(tt.endDate),value:`${me(tt.startDate)} - ${me(tt.endDate)}`});else if(typeof tt=="string"){const Se=tt.split(" - ");Se.length===2&&(ke?ge.push({id:ze++,name:mt,startDate:Se[0].trim(),endDate:Se[1].trim()}):T.push({id:He++,name:mt,type:"Date Range",status:"Ongoing",startDate:Se[0].trim(),endDate:Se[1].trim(),value:tt}))}}}),Be(T),le(ge),H(!1)}catch(ve){console.error(" Error fetching plan:",ve),alert("Failed to load plan"),window.location.href="/adminindividualplan"}})()},[S]);const me=_=>{if(!_)return"";const ve=new Date(_);if(isNaN(ve.getTime()))return _;const k=ve.getFullYear(),O=String(ve.getMonth()+1).padStart(2,"0"),Z=String(ve.getDate()).padStart(2,"0");return`${k}-${O}-${Z}`},F=_=>{if(!_)return null;if(/^\d{4}-\d{2}-\d{2}/.test(_))return _.split("T")[0];if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(_)){const[ve,k,O]=_.split("/");return`${O}-${k.padStart(2,"0")}-${ve.padStart(2,"0")}`}return _};m.useEffect(()=>{te.current||(te.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),D.current&&document.head.removeChild(D.current);const _=document.createElement("style");_.setAttribute("data-component","admin-edit-individual-plan-background");const ve=u?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return _.textContent=`
      .admin-edit-individual-plan-page {
        min-height: 100vh;
        background: ${ve};
      }
      body {
        background: ${ve} !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      #root > div:first-child,
      .app > div:first-child,
      .main-content,
      .page-container {
        background: transparent !important;
        min-height: 100vh;
      }
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      * {
        transition: background-color 0.3s ease, background 0.3s ease;
      }
    `,document.head.appendChild(_),D.current=_,()=>{D.current&&document.head.contains(D.current)&&(document.head.removeChild(D.current),D.current=null),te.current&&document.querySelectorAll('[data-component="admin-edit-individual-plan-background"]').length===0&&Object.assign(document.body.style,te.current)}},[u]);const re=()=>{f(!u),A(!1)},P=()=>{window.location.href="/adminindividualplan"},oe=()=>{if(G.trim()){const _={id:Date.now(),name:G.trim(),type:"Date Range",status:"Ongoing",startDate:"",endDate:"",value:""};Be([...X,_]),se("")}},je=_=>{Be(X.filter(ve=>ve.id!==_))},U=(_,ve,k)=>{Be(X.map(O=>O.id===_?{...O,[ve]:k}:O))},B=async()=>{try{console.log(" Saving individual plan changes...");const _={};M.projectType==="planned-leave"?(_.leaveType=M.leaveType,_.leaveReason=M.leaveReason,_.title=`Leave: ${M.leaveType}`,Ae.forEach(O=>{_[O.name]={startDate:F(O.startDate),endDate:F(O.endDate)}})):X.forEach(O=>{_[O.name]={status:O.status||"Ongoing",startDate:F(O.startDate),endDate:F(O.endDate)}});const ve={project:M.assignedProject,projectType:M.projectType,role:M.role,startDate:F(M.startDate),endDate:F(M.endDate),fields:_};console.log(" Payload:",ve);const k=await Fe(`/plan/individual/${S}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(ve)});if(!k.ok){const O=await k.json();throw new Error(O.message||"Failed to update plan")}console.log(" Plan updated successfully"),alert("Individual plan updated successfully!"),window.location.href="/adminindividualplan"}catch(_){console.error(" Error saving plan:",_),alert(`Failed to save plan: ${_.message}`)}},j={page:{minHeight:"100vh",padding:"30px",background:u?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"32px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},title:{fontSize:"28px",fontWeight:"700",color:u?"#f1f5f9":"#1e293b",margin:0,textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},planTypeBadge:_=>({display:"inline-block",padding:"4px 10px",borderRadius:"999px",fontSize:"11px",fontWeight:"700",letterSpacing:"0.5px",marginLeft:"12px",backgroundColor:_?"rgba(168,85,247,0.15)":"rgba(59,130,246,0.15)",color:_?"#a855f7":"#3b82f6",border:`1px solid ${_?"rgba(168,85,247,0.4)":"rgba(59,130,246,0.4)"}`}),button:_=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:_?"rgba(59,130,246,0.1)":u?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:_?"#3b82f6":u?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:_?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:_?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:u?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:u?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:u?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:u?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:u?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:u?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:u?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},statItem:{textAlign:"center"},statNumber:{fontSize:"14px",fontWeight:"700",color:u?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},statLabel:{fontSize:"10px",color:u?"#94a3b8":"#64748b",textTransform:"uppercase",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px",width:"100%",textAlign:"center",transition:"all 0.3s ease"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:u?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",maxWidth:"fit-content",backdropFilter:"blur(10px)",border:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},activeTab:{padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",backgroundColor:"#3b82f6",color:"#fff",boxShadow:"0 4px 12px rgba(59,130,246,0.3)"},formCard:{backgroundColor:u?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"32px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",backdropFilter:"blur(10px)",border:u?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",transition:"all 0.3s ease"},formTitle:{fontSize:"24px",fontWeight:"700",color:u?"#e2e8f0":"#1e293b",marginBottom:"8px",transition:"all 0.3s ease"},formDescription:{fontSize:"14px",color:u?"#94a3b8":"#64748b",marginBottom:"24px",transition:"all 0.3s ease"},sectionTitle:{fontSize:"18px",fontWeight:"600",color:u?"#e2e8f0":"#1e293b",marginBottom:"20px",transition:"all 0.3s ease"},fieldGroup:{marginBottom:"20px"},label:{fontSize:"14px",fontWeight:"600",color:u?"#d1d5db":"#374151",marginBottom:"8px",display:"block",transition:"all 0.3s ease"},requiredBadge:{backgroundColor:u?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",color:"#3b82f6",fontWeight:"600",marginLeft:"8px"},input:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:u?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:u?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",fontFamily:'"Montserrat", sans-serif',boxSizing:"border-box",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},customFieldCard:{backgroundColor:u?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px",border:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},customFieldHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},customFieldName:{fontSize:"14px",fontWeight:"600",color:u?"#e2e8f0":"#374151",transition:"all 0.3s ease"},customFieldType:{fontSize:"12px",color:u?"#94a3b8":"#64748b",backgroundColor:u?"rgba(75,85,99,0.3)":"rgba(226,232,240,0.3)",padding:"4px 8px",borderRadius:"6px",transition:"all 0.3s ease"},deleteButton:_=>({padding:"4px",borderRadius:"6px",border:"none",backgroundColor:_?"rgba(239,68,68,0.1)":"transparent",color:_?"#ef4444":u?"#94a3b8":"#64748b",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"}),dateRangeContainer:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"12px",alignItems:"center"},dateRangeConnector:{color:u?"#94a3b8":"#64748b",fontSize:"14px",fontWeight:"500"},addFieldSection:{marginTop:"32px",paddingTop:"24px",borderTop:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"},addFieldTitle:{fontSize:"16px",fontWeight:"600",color:u?"#d1d5db":"#374151",marginBottom:"16px",transition:"all 0.3s ease"},addFieldGrid:{display:"grid",gridTemplateColumns:"1fr auto",gap:"12px",alignItems:"end",marginBottom:"16px"},addButton:_=>({padding:"12px 20px",borderRadius:"12px",border:"none",backgroundColor:_?"#2563eb":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap",transition:"all 0.3s ease",boxShadow:_?"0 4px 12px rgba(59,130,246,0.3)":"none",transform:_?"translateY(-1px)":"translateY(0)"}),saveButton:_=>({width:"100%",padding:"16px 24px",borderRadius:"12px",border:"none",backgroundColor:_?"#059669":"#10b981",color:"#fff",fontSize:"16px",fontWeight:"700",cursor:"pointer",marginTop:"32px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.3s ease",boxShadow:_?"0 8px 20px rgba(16,185,129,0.3)":"0 4px 12px rgba(16,185,129,0.1)",transform:_?"translateY(-2px)":"translateY(0)"}),loadingState:{textAlign:"center",padding:"60px 20px",color:u?"#94a3b8":"#64748b",fontSize:"16px"}};return b?n.jsx("div",{className:"admin-edit-individual-plan-page",style:j.page,children:n.jsxs("div",{style:j.loadingState,children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"12px"},children:""}),"Loading plan data..."]})}):n.jsxs("div",{className:"admin-edit-individual-plan-page",style:j.page,children:[n.jsxs("div",{style:j.header,children:[n.jsxs("div",{style:j.headerLeft,children:[n.jsx("button",{style:j.button(i==="back"),onMouseEnter:()=>e("back"),onMouseLeave:()=>e(null),onClick:P,children:n.jsx(wi,{size:20})}),n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("h1",{style:j.title,children:"Edit Individual Plan"}),n.jsx("span",{style:j.planTypeBadge(de),children:de?"OPERATION":"PROJECT"})]})]}),n.jsxs("div",{style:j.headerRight,children:[n.jsxs("button",{style:j.button(t==="alerts"),onMouseEnter:()=>r("alerts"),onMouseLeave:()=>r(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:j.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:j.button(t==="profile"),onMouseEnter:()=>{r("profile"),A(!0)},onMouseLeave:()=>r(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Nt,{size:20})}),a&&n.jsxs("div",{style:j.profileTooltip,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[n.jsx("div",{style:j.tooltipArrow}),n.jsxs("div",{style:j.userInfo,children:[n.jsx("div",{style:j.avatar,children:g?`${g.firstName[0]}${g.lastName[0]}`:"U"}),n.jsxs("div",{style:j.userDetails,children:[n.jsx("div",{style:j.userName,children:g?`${g.firstName} ${g.lastName}`:"Loading..."}),n.jsx("div",{style:j.userRole,children:g?`${g.role}  ${g.department}`:""})]})]}),n.jsxs("div",{style:j.userStats,children:[n.jsxs("div",{style:j.statItem,children:[n.jsx("div",{style:j.statNumber,children:c.length}),n.jsx("div",{style:j.statLabel,children:"Plans"})]}),n.jsxs("div",{style:j.statItem,children:[n.jsx("div",{style:j.statNumber,children:c.filter(_=>_.status==="Ongoing").length}),n.jsx("div",{style:j.statLabel,children:"Ongoing"})]}),n.jsxs("div",{style:j.statItem,children:[n.jsx("div",{style:j.statNumber,children:c.filter(_=>_.status==="Completed").length}),n.jsx("div",{style:j.statLabel,children:"Completed"})]})]}),n.jsx("button",{style:j.themeToggle,onClick:re,children:u?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:j.tabContainer,children:n.jsx("div",{style:j.activeTab,children:"Individual Plan"})}),n.jsxs("div",{style:j.formCard,children:[n.jsx("h2",{style:j.formTitle,children:"Edit Individual Plan"}),n.jsx("p",{style:j.formDescription,children:"Update your plan dates and milestones. Add or remove milestones as needed."}),n.jsx("h3",{style:j.sectionTitle,children:"Primary Assignment Details"}),n.jsxs("div",{style:j.fieldGroup,children:[n.jsxs("label",{style:j.label,children:["Assigned Project",n.jsx("span",{style:j.requiredBadge,children:"Locked"})]}),n.jsx("input",{type:"text",style:{...j.input,cursor:"not-allowed",opacity:.7},value:M.assignedProject,disabled:!0})]}),n.jsxs("div",{style:j.fieldGroup,children:[n.jsx("label",{style:j.label,children:"Your Role"}),n.jsx("input",{type:"text",style:j.input,value:M.role,onChange:_=>N({...M,role:_.target.value}),placeholder:"e.g., Frontend Developer, Backend Developer"})]}),M.projectType==="planned-leave"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:j.fieldGroup,children:[n.jsx("label",{style:j.label,children:"Leave Type"}),n.jsx("input",{type:"text",style:j.input,value:M.leaveType,onChange:_=>N({...M,leaveType:_.target.value}),placeholder:"e.g., Annual Leave, Medical Leave"})]}),n.jsxs("div",{style:j.fieldGroup,children:[n.jsx("label",{style:j.label,children:"Reason"}),n.jsx("textarea",{style:{...j.input,minHeight:"80px",resize:"vertical"},value:M.leaveReason,onChange:_=>N({...M,leaveReason:_.target.value}),placeholder:"Leave reason (optional)"})]})]}),n.jsxs("div",{style:j.fieldGroup,children:[n.jsxs("label",{style:j.label,children:["Your Start Date",n.jsx("span",{style:j.requiredBadge,children:"Required"})]}),n.jsx("div",{onClick:()=>{var _;return(_=J.current["main-start"])==null?void 0:_.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:_=>J.current["main-start"]=_,type:"date",style:j.input,value:M.startDate,onChange:_=>N({...M,startDate:_.target.value})})})]}),n.jsxs("div",{style:j.fieldGroup,children:[n.jsxs("label",{style:j.label,children:["Your End Date",n.jsx("span",{style:j.requiredBadge,children:"Required"})]}),n.jsx("div",{onClick:()=>{var _;return(_=J.current["main-end"])==null?void 0:_.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:_=>J.current["main-end"]=_,type:"date",style:j.input,value:M.endDate,onChange:_=>N({...M,endDate:_.target.value})})})]}),M.projectType==="planned-leave"?n.jsxs(n.Fragment,{children:[n.jsx("h3",{style:j.sectionTitle,children:"Leave Periods"}),Ae.map(_=>n.jsxs("div",{style:j.customFieldCard,children:[n.jsxs("div",{style:j.customFieldHeader,children:[n.jsxs("div",{children:[n.jsx("div",{style:j.customFieldName,children:_.name}),n.jsx("div",{style:j.customFieldType,children:"Leave Period"})]}),n.jsx("button",{style:j.deleteButton(i===`remove-period-${_.id}`),onMouseEnter:()=>e(`remove-period-${_.id}`),onMouseLeave:()=>e(null),onClick:()=>le(Ae.filter(ve=>ve.id!==_.id)),title:"Delete this leave period",children:n.jsx(ar,{size:16})})]}),n.jsxs("div",{style:j.dateRangeContainer,children:[n.jsx("div",{children:n.jsx("div",{onClick:()=>{var ve;return(ve=J.current[`leave-${_.id}-start`])==null?void 0:ve.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:ve=>J.current[`leave-${_.id}-start`]=ve,type:"date",style:j.input,value:_.startDate||"",onChange:ve=>{const k=Ae.map(O=>O.id===_.id?{...O,startDate:ve.target.value}:O);le(k)}})})}),n.jsx("span",{style:j.dateRangeConnector,children:"to"}),n.jsx("div",{children:n.jsx("div",{onClick:()=>{var ve;return(ve=J.current[`leave-${_.id}-end`])==null?void 0:ve.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:ve=>J.current[`leave-${_.id}-end`]=ve,type:"date",style:j.input,value:_.endDate||"",onChange:ve=>{const k=Ae.map(O=>O.id===_.id?{...O,endDate:ve.target.value}:O);le(k)}})})})]})]},_.id)),n.jsxs("div",{style:j.addFieldSection,children:[n.jsx("h4",{style:j.addFieldTitle,children:"Add New Leave Period"}),n.jsxs("div",{style:j.addFieldGrid,children:[n.jsx("input",{type:"text",style:j.input,value:pe,onChange:_=>Me(_.target.value),placeholder:"Leave period name (e.g., January Leave)"}),n.jsxs("button",{style:j.addButton(i==="add-leave-period"),onMouseEnter:()=>e("add-leave-period"),onMouseLeave:()=>e(null),onClick:()=>{pe.trim()&&(le([...Ae,{id:Date.now(),name:pe.trim(),startDate:"",endDate:""}]),Me(""))},children:[n.jsx(In,{size:16}),"Add Period"]})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("h3",{style:j.sectionTitle,children:"Milestones"}),X.map(_=>n.jsxs("div",{style:j.customFieldCard,children:[n.jsxs("div",{style:j.customFieldHeader,children:[n.jsxs("div",{children:[n.jsx("div",{style:j.customFieldName,children:_.name}),n.jsx("div",{style:j.customFieldType,children:"Date Range"})]}),n.jsx("button",{style:j.deleteButton(i===`remove-${_.id}`),onMouseEnter:()=>e(`remove-${_.id}`),onMouseLeave:()=>e(null),onClick:()=>je(_.id),title:"Delete this milestone",children:n.jsx(ar,{size:16})})]}),n.jsxs("div",{style:j.dateRangeContainer,children:[n.jsx("div",{children:n.jsx("div",{onClick:()=>{var ve;return(ve=J.current[`milestone-${_.id}-start`])==null?void 0:ve.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:ve=>J.current[`milestone-${_.id}-start`]=ve,type:"date",style:j.input,value:_.startDate||"",onChange:ve=>{U(_.id,"startDate",ve.target.value),U(_.id,"value",`${ve.target.value} - ${_.endDate}`)}})})}),n.jsx("span",{style:j.dateRangeConnector,children:"to"}),n.jsx("div",{children:n.jsx("div",{onClick:()=>{var ve;return(ve=J.current[`milestone-${_.id}-end`])==null?void 0:ve.showPicker()},style:{cursor:"pointer"},children:n.jsx("input",{ref:ve=>J.current[`milestone-${_.id}-end`]=ve,type:"date",style:j.input,value:_.endDate||"",onChange:ve=>{U(_.id,"endDate",ve.target.value),U(_.id,"value",`${_.startDate} - ${ve.target.value}`)}})})})]})]},_.id)),n.jsxs("div",{style:j.addFieldSection,children:[n.jsx("h4",{style:j.addFieldTitle,children:"Add New Milestone"}),n.jsxs("div",{style:j.addFieldGrid,children:[n.jsx("input",{type:"text",style:j.input,value:G,onChange:_=>se(_.target.value),placeholder:"Milestone name (e.g., Sprint 1, Design Phase)"}),n.jsxs("button",{style:j.addButton(i==="add-field"),onMouseEnter:()=>e("add-field"),onMouseLeave:()=>e(null),onClick:oe,children:[n.jsx(In,{size:16}),"Add Milestone"]})]})]})]}),n.jsxs("button",{style:j.saveButton(i==="save"),onMouseEnter:()=>e("save"),onMouseLeave:()=>e(null),onClick:B,children:[n.jsx(Oi,{size:20}),"Save Changes"]})]})]})},ZU=()=>{const[i,e]=m.useState(null),[t,r]=m.useState(null),[a,A]=m.useState(!1),[c,p]=m.useState(!1),[u,f]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[g,y]=m.useState("Last 30 Days"),[b,H]=m.useState("All Projects"),[S,L]=m.useState(!1),[Q,V]=m.useState(null),[D,te]=m.useState(!1),[J,M]=m.useState(null),[N,X]=m.useState(""),[Be,Ae]=m.useState(""),[le,G]=m.useState({firstName:"User",lastName:"Name",role:"member",department:"Department"}),[se,pe]=m.useState(["All Projects"]),[Me,be]=m.useState("reports"),[de,Ue]=m.useState(!1),[me,F]=m.useState(!1),re=m.useRef(null),[P,oe]=m.useState({top:64,left:0}),je=["Today","Last 7 Days","Last 30 Days","Last 3 Months","Last 6 Months","This Year","Custom"],U=()=>{f(!u);try{localStorage.setItem("darkMode",(!u).toString())}catch{console.log("LocalStorage not available")}A(!1)},B=T=>T>=95&&T<=105?"#10b981":T>=90&&T<95?"#f59e0b":T>105?"#8b5cf6":"#ef4444",j=T=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:T?"rgba(59,130,246,0.1)":u?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:T?"#3b82f6":u?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:T?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:T?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}),_=T=>({backgroundColor:u?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:T?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:T?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",border:u?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),ve=T=>{const ge=new Date;ge.setHours(0,0,0,0);let He,ze;switch(T){case"Today":He=ze=new Date(ge);break;case"Last 7 Days":He=new Date(ge),He.setDate(ge.getDate()-7),ze=new Date(ge);break;case"Last 30 Days":He=new Date(ge),He.setDate(ge.getDate()-30),ze=new Date(ge);break;case"Last 3 Months":He=new Date(ge),He.setMonth(ge.getMonth()-3),ze=new Date(ge);break;case"Last 6 Months":He=new Date(ge),He.setMonth(ge.getMonth()-6),ze=new Date(ge);break;case"This Year":He=new Date(ge.getFullYear(),0,1),ze=new Date(ge);break;default:He=ze=new Date(ge)}return{from:He.toISOString().split("T")[0],to:ze.toISOString().split("T")[0]}},k=async()=>{te(!0),M(null);try{const T=g==="Custom"?{from:N,to:Be}:ve(g);if(g==="Custom"&&(!N||!Be)){M("Please select both start and end dates for custom range"),te(!1);return}const ge=new URLSearchParams({fromDate:T.from,toDate:T.to});b&&b!=="All Projects"&&ge.append("projectFilter",b),console.log("Fetching report with params:",ge.toString());const He=await Fe(`/api/reports?${ge.toString()}`,{credentials:"include"});if(!He.ok)throw new Error("Failed to fetch report data");const ze=await He.json();console.log("Report data received:",ze),V(ze),ze.availableProjects&&pe(ze.availableProjects)}catch(T){console.error("Error fetching report:",T),M(T.message)}finally{te(!1)}},O=()=>{L(!0),k(),setTimeout(()=>{L(!1)},1e3)},Z=T=>{be(T),Ue(!1),T==="team"?window.location.href="/adminteamcapacity":T==="utilization"&&(window.location.href="/adminutilization")},ke=()=>{switch(Me){case"reports":return"Personal Reports";case"team":return"Team Capacity Summary";case"utilization":return"Utilization Overview";default:return"Personal Reports"}};m.useEffect(()=>{if(re.current&&de){const T=re.current.getBoundingClientRect();oe({top:T.bottom+4,left:T.left})}},[de]),m.useEffect(()=>{const T=ge=>{re.current&&!re.current.contains(ge.target)&&Ue(!1)};return de&&document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[de]),m.useEffect(()=>{(async()=>{try{const ge=await Fe("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ge.ok){const He=await ge.json();G(He)}}catch(ge){console.error("Error fetching user profile:",ge)}})()},[]),m.useEffect(()=>{k()},[]),m.useEffect(()=>{g!=="Custom"&&k()},[g,b]),m.useEffect(()=>{const T=document.createElement("style");return T.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.8; }
      }
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      .floating {
        animation: float 3s ease-in-out infinite;
      }
    `,document.head.appendChild(T),()=>document.head.removeChild(T)},[]);const at=(T,ge)=>T?!ge||ge.trim()===""?T[0].toUpperCase():`${T[0]}${ge[0]}`.toUpperCase():"?";return n.jsxs("div",{style:{minHeight:"100vh",padding:"30px",background:u?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"32px",position:"relative"},children:[n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:n.jsxs("div",{ref:re,style:{fontSize:"18px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:u?"#e2e8f0":"#1e293b"},onClick:()=>Ue(T=>!T),onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),className:"floating",children:[n.jsx("span",{style:{fontSize:"28px",fontWeight:"700",color:u?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:ke()}),n.jsx(jo,{size:20,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:de||me?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:de||me?"#3b82f6":u?"#94a3b8":"#64748b"}})]})}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[n.jsxs("button",{style:j(t==="alerts"),onMouseEnter:()=>r("alerts"),onMouseLeave:()=>r(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"}})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:j(t==="profile"),onMouseEnter:()=>{r("profile"),A(!0)},onMouseLeave:()=>r(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Nt,{size:20})}),a&&le&&n.jsxs("div",{style:{position:"absolute",top:"60px",right:"0",backgroundColor:u?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:u?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out"},onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[n.jsx("div",{style:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:u?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:u?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"}}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},children:at(le.firstName,le.lastName)}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:u?"#e2e8f0":"#1e293b"},children:[le.firstName," ",le.lastName||""]}),n.jsxs("div",{style:{fontSize:"12px",color:u?"#94a3b8":"#64748b"},children:[le.role==="admin"?"Admin":"Member","  ",le.department]})]})]}),n.jsx("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",width:"100%"},onClick:U,children:u?" Light Mode":" Dark Mode"})]})]})]})]}),de&&n.jsx("div",{style:{position:"fixed",top:P.top,left:P.left,zIndex:999,backgroundColor:u?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:u?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},onMouseDown:T=>T.stopPropagation(),onClick:T=>T.stopPropagation(),children:n.jsx("div",{children:["reports","team","utilization"].map((T,ge)=>n.jsx("div",{style:{backgroundColor:t===`section-${ge}`?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:u?"#e2e8f0":"#374151",transform:t===`section-${ge}`?"translateX(4px)":"translateX(0)",borderLeft:t===`section-${ge}`?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"},onClick:He=>{He.preventDefault(),He.stopPropagation(),Z(T)},onMouseDown:He=>{He.preventDefault(),He.stopPropagation()},onMouseEnter:()=>r(`section-${ge}`),onMouseLeave:()=>r(null),children:T==="reports"?"Personal Reports":T==="team"?"Team Capacity":"Utilization Overview"},T))})}),J&&n.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",color:"#ef4444"},children:[n.jsx(so,{size:20}),n.jsx("span",{children:J})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",marginBottom:"32px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(To,{size:20,style:{color:u?"#94a3b8":"#64748b"}}),n.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:u?"#e2e8f0":"#1e293b"},children:"Date Range:"}),n.jsx("select",{style:{padding:"12px 16px",borderRadius:"12px",border:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:u?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:u?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",cursor:"pointer",outline:"none",minWidth:"150px"},value:g,onChange:T=>y(T.target.value),children:je.map(T=>n.jsx("option",{value:T,children:T},T))})]}),g==="Custom"&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"date",value:N,onChange:T=>X(T.target.value),style:{padding:"12px 16px",borderRadius:"12px",border:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:u?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:u?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none"}}),n.jsx("span",{style:{color:u?"#94a3b8":"#64748b"},children:"to"}),n.jsx("input",{type:"date",value:Be,onChange:T=>Ae(T.target.value),style:{padding:"12px 16px",borderRadius:"12px",border:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:u?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:u?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none"}})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(Eh,{size:20,style:{color:u?"#94a3b8":"#64748b"}}),n.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:u?"#e2e8f0":"#1e293b"},children:"Project:"}),n.jsx("select",{style:{padding:"12px 16px",borderRadius:"12px",border:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:u?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:u?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",cursor:"pointer",outline:"none",minWidth:"180px"},value:b,onChange:T=>H(T.target.value),children:se.map(T=>n.jsx("option",{value:T,children:T},T))})]}),n.jsxs("button",{style:{padding:"12px 24px",borderRadius:"12px",border:"none",backgroundColor:S?"#6b7280":i==="generate"?"#2563eb":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:S?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",transform:i==="generate"&&!S?"translateY(-2px)":"translateY(0)",boxShadow:i==="generate"&&!S?"0 8px 25px rgba(59,130,246,0.3)":"0 4px 12px rgba(59,130,246,0.2)"},onMouseEnter:()=>!S&&e("generate"),onMouseLeave:()=>e(null),onClick:O,disabled:S,children:[n.jsx(Vi,{size:16,style:{animation:S?"spin 1s linear infinite":"none"}}),S?"Generating...":"Generate"]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px",marginBottom:"32px"},children:[n.jsxs("div",{style:_(t==="stat1"),onMouseEnter:()=>r("stat1"),onMouseLeave:()=>r(null),children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[n.jsxs("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(16,185,129,0.1)",color:"#10b981",position:"relative"},children:[n.jsx(Ny,{size:24}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(Dy,{size:14,style:{position:"absolute",top:"-30px",right:"-8px",cursor:"pointer",opacity:.6},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)}),c&&n.jsxs("div",{style:{position:"absolute",bottom:"40px",right:"-50px",backgroundColor:u?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"8px",boxShadow:"0 8px 16px rgba(0,0,0,0.15)",padding:"12px",minWidth:"200px",border:u?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out"},children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:u?"#e2e8f0":"#1e293b",marginBottom:"6px"},children:"Accuracy Formula:"}),n.jsx("div",{style:{fontSize:"11px",color:u?"#94a3b8":"#64748b",fontFamily:"monospace"},children:"(Actuals / Planned)  100"}),n.jsx("div",{style:{fontSize:"10px",color:u?"#94a3b8":"#64748b",marginTop:"6px",fontStyle:"italic"},children:"Optimal: 95-105%"})]})]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:"800",color:u?"#e2e8f0":"#1e293b"},children:Q?`${Q.summary.accuracy}%`:D?"...":"N/A"}),n.jsx("div",{style:{fontSize:"14px",color:u?"#94a3b8":"#64748b"},children:"Actuals vs Planned"})]})]}),n.jsx("div",{style:{width:"100%",height:"6px",backgroundColor:u?"#4b5563":"#f1f5f9",borderRadius:"3px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${Q?Math.min(parseFloat(Q.summary.accuracy),100):0}%`,height:"100%",backgroundColor:B(Q?parseFloat(Q.summary.accuracy):0),borderRadius:"3px",transition:"width 0.8s ease"}})})]}),n.jsx("div",{style:_(t==="stat2"),onMouseEnter:()=>r("stat2"),onMouseLeave:()=>r(null),children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[n.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6"},children:n.jsx(Xi,{size:24})}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:"800",color:u?"#e2e8f0":"#1e293b"},children:Q?`${Q.individualPlans.total}h`:D?"...":"N/A"}),n.jsx("div",{style:{fontSize:"14px",color:u?"#94a3b8":"#64748b"},children:"Total Planned Hours"})]})]})}),n.jsx("div",{style:_(t==="stat3"),onMouseEnter:()=>r("stat3"),onMouseLeave:()=>r(null),children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[n.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(245,158,11,0.1)",color:"#f59e0b"},children:n.jsx(vA,{size:24})}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:"800",color:u?"#e2e8f0":"#1e293b"},children:Q?`${Q.actuals.total}h`:D?"...":"N/A"}),n.jsx("div",{style:{fontSize:"14px",color:u?"#94a3b8":"#64748b"},children:"Total Actual Hours"})]})]})}),n.jsx("div",{style:_(t==="stat4"),onMouseEnter:()=>r("stat4"),onMouseLeave:()=>r(null),children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[n.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(139,92,246,0.1)",color:"#8b5cf6"},children:n.jsx(Eo,{size:24})}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:"800",color:(Q==null?void 0:Q.summary.difference)>=0?"#10b981":"#ef4444"},children:Q?`${Q.summary.difference>=0?"+":""}${Q.summary.difference}h`:D?"...":"N/A"}),n.jsx("div",{style:{fontSize:"14px",color:u?"#94a3b8":"#64748b"},children:"Difference"})]})]})})]}),n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:_(t==="chart"),onMouseEnter:()=>r("chart"),onMouseLeave:()=>r(null),children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[n.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:u?"#e2e8f0":"#1e293b",margin:0},children:"Capacity Utilization Overview"}),n.jsx($c,{size:20,style:{color:"#10b981"}})]}),D?n.jsx("div",{style:{height:"400px",display:"flex",alignItems:"center",justifyContent:"center",color:u?"#94a3b8":"#64748b"},children:n.jsx(Vi,{size:32,style:{animation:"spin 1s linear infinite"}})}):!Q||!Q.capacityByMonth||Q.capacityByMonth.length===0?n.jsxs("div",{style:{height:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:u?"#94a3b8":"#64748b",gap:"12px"},children:[n.jsx(so,{size:48,style:{opacity:.5}}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"600"},children:"No data available"}),n.jsx("div",{style:{fontSize:"14px",opacity:.7},children:"Try adjusting your date range or project filter"})]}):n.jsxs("div",{style:{height:"400px",position:"relative"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"end",justifyContent:"space-between",height:"320px",padding:"0 40px 20px 40px",borderBottom:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",position:"relative"},children:[n.jsxs("div",{style:{position:"absolute",left:"0",top:"0",height:"300px",display:"flex",flexDirection:"column",justifyContent:"space-between",fontSize:"12px",color:u?"#94a3b8":"#64748b"},children:[n.jsx("span",{children:"200h"}),n.jsx("span",{children:"150h"}),n.jsx("span",{children:"100h"}),n.jsx("span",{children:"50h"}),n.jsx("span",{children:"0h"})]}),Q.capacityByMonth.map((T,ge)=>n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",flex:1,position:"relative"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"end",gap:"6px",height:"280px",position:"relative"},children:[n.jsx("div",{style:{width:"24px",height:`${T.planned/200*260}px`,backgroundColor:"#3b82f6",borderRadius:"6px 6px 0 0",transition:"all 0.5s ease",transform:t==="chart"?"scaleY(1.02)":"scaleY(1)",opacity:t==="chart"?.9:.8,position:"relative"},title:`Planned: ${T.planned}h`,children:n.jsxs("div",{style:{position:"absolute",top:"-25px",left:"50%",transform:"translateX(-50%)",fontSize:"10px",color:"#3b82f6",fontWeight:"600",whiteSpace:"nowrap"},children:[T.planned,"h"]})}),n.jsx("div",{style:{width:"24px",height:`${T.actual/200*260}px`,backgroundColor:B(T.efficiency),borderRadius:"6px 6px 0 0",transition:"all 0.5s ease",transform:t==="chart"?"scaleY(1.02)":"scaleY(1)",position:"relative"},title:`Actual: ${T.actual}h`,children:n.jsxs("div",{style:{position:"absolute",top:"-25px",left:"50%",transform:"translateX(-50%)",fontSize:"10px",color:B(T.efficiency),fontWeight:"600",whiteSpace:"nowrap"},children:[T.actual,"h"]})})]}),n.jsxs("div",{style:{position:"absolute",bottom:"30px",left:"50%",transform:"translateX(-50%)",fontSize:"11px",fontWeight:"700",color:B(T.efficiency),backgroundColor:u?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",padding:"4px 8px",borderRadius:"12px",border:`1px solid ${B(T.efficiency)}20`},children:[T.efficiency,"%"]}),n.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:u?"#94a3b8":"#64748b"},children:T.month})]},`${T.month}-${T.year}`))]}),n.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"32px",marginTop:"20px",padding:"16px",backgroundColor:u?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.5)",borderRadius:"12px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"#3b82f6",borderRadius:"4px"}}),n.jsx("span",{style:{fontSize:"13px",color:u?"#94a3b8":"#64748b",fontWeight:"500"},children:"Planned Hours"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"16px",height:"16px",background:"linear-gradient(90deg, #10b981 0%, #f59e0b 50%, #ef4444 100%)",borderRadius:"4px"}}),n.jsx("span",{style:{fontSize:"13px",color:u?"#94a3b8":"#64748b",fontWeight:"500"},children:"Actual Hours (Color = Efficiency)"})]})]})]})]})}),n.jsxs("div",{style:_(t==="table"),onMouseEnter:()=>r("table"),onMouseLeave:()=>r(null),children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[n.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:u?"#e2e8f0":"#1e293b",margin:0},children:"Project Performance"}),n.jsxs("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:i==="download"?"#2563eb":"#3b82f6",color:"#fff",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease"},onMouseEnter:()=>e("download"),onMouseLeave:()=>e(null),children:[n.jsx(h2,{size:14}),"Export"]})]}),D?n.jsx("div",{style:{padding:"60px",display:"flex",alignItems:"center",justifyContent:"center",color:u?"#94a3b8":"#64748b"},children:n.jsx(Vi,{size:32,style:{animation:"spin 1s linear infinite"}})}):!Q||!Q.projectPerformance||Q.projectPerformance.length===0?n.jsxs("div",{style:{padding:"60px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:u?"#94a3b8":"#64748b",gap:"12px"},children:[n.jsx(so,{size:48,style:{opacity:.5}}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"600"},children:"No project data available"}),n.jsx("div",{style:{fontSize:"14px",opacity:.7},children:b!=="All Projects"?"No data found for the selected project":"No master plans found in this date range"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{overflowX:"auto",borderRadius:"12px",border:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{backgroundColor:u?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)"},children:[n.jsx("th",{style:{padding:"16px",textAlign:"left",fontSize:"14px",fontWeight:"700",color:u?"#e2e8f0":"#374151",borderBottom:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Project"}),n.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:u?"#e2e8f0":"#374151",borderBottom:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Activity Type"}),n.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:u?"#e2e8f0":"#374151",borderBottom:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Planned Hours"}),n.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:u?"#e2e8f0":"#374151",borderBottom:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Spent Hours"}),n.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:u?"#e2e8f0":"#374151",borderBottom:u?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Efficiency"})]})}),n.jsx("tbody",{children:Q.projectPerformance.map((T,ge)=>n.jsxs("tr",{style:{backgroundColor:i===`row-${ge}`?u?"rgba(59,130,246,0.05)":"rgba(59,130,246,0.02)":"transparent",transition:"all 0.2s ease"},onMouseEnter:()=>e(`row-${ge}`),onMouseLeave:()=>e(null),children:[n.jsx("td",{style:{padding:"16px",fontSize:"14px",fontWeight:"600",color:u?"#e2e8f0":"#374151",borderBottom:u?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:T.project}),n.jsx("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",color:u?"#94a3b8":"#64748b",borderBottom:u?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:n.jsx("span",{style:{padding:"4px 8px",borderRadius:"6px",backgroundColor:u?"rgba(75,85,99,0.3)":"rgba(226,232,240,0.3)",fontSize:"12px",fontWeight:"500"},children:T.activityType})}),n.jsxs("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"600",color:"#3b82f6",borderBottom:u?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:[T.plannedHours,"h"]}),n.jsxs("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"600",color:B(T.efficiency),borderBottom:u?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:[T.spentHours,"h"]}),n.jsx("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:B(T.efficiency),borderBottom:u?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[T.efficiency,"%",n.jsx("div",{style:{width:"40px",height:"4px",backgroundColor:u?"#4b5563":"#f1f5f9",borderRadius:"2px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${Math.min(T.efficiency,100)}%`,height:"100%",backgroundColor:B(T.efficiency),borderRadius:"2px",transition:"width 0.5s ease"}})})]})})]},ge))})]})}),n.jsxs("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:u?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{fontSize:"14px",color:u?"#94a3b8":"#64748b"},children:["Showing ",Q.projectPerformance.length," of ",Q.projectPerformance.length," projects"]}),n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"16px",fontSize:"14px",fontWeight:"600"},children:n.jsxs("span",{style:{color:u?"#e2e8f0":"#374151"},children:["Total: ",Q.projectPerformance.reduce((T,ge)=>T+ge.plannedHours,0).toFixed(1),"h planned, ",Q.projectPerformance.reduce((T,ge)=>T+ge.spentHours,0).toFixed(1),"h spent"]})})]})]})]})]})},eQ=()=>{var We,Ze,St,xe;const[i,e]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[t,r]=m.useState(""),[a,A]=m.useState("all"),[c,p]=m.useState("all"),[u,f]=m.useState("table"),[g,y]=m.useState(!1),[b,H]=m.useState([]),[S,L]=m.useState(!1),[Q,V]=m.useState(!1),[D,te]=m.useState(null),[J,M]=m.useState(null),[N,X]=m.useState({}),[Be,Ae]=m.useState(null),[le,G]=m.useState(null),[se,pe]=m.useState(!1),[Me,be]=m.useState(!1),[de,Ue]=m.useState([]),[me,F]=m.useState(""),[re,P]=m.useState(""),[oe,je]=m.useState({}),[U,B]=m.useState([]),[j,_]=m.useState([]),[ve,k]=m.useState(!1),[O,Z]=m.useState({x:0,y:0}),[ke,at]=m.useState(null),T=m.useRef(null),[ge,He]=m.useState([]),[ze,mt]=m.useState(!1),[tt,Se]=m.useState(null),ie=(C,ae)=>C?!ae||ae.trim()===""?C[0].toUpperCase():`${C[0]}${ae[0]}`.toUpperCase():"?",dt=["DTO","P&A","PPC","Finance","A&I","Marketing"],ht=async()=>{pe(!0),F("");try{const C=await Fe("/users",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(C.ok){const ae=await C.json();Ue(ae),console.log("Users fetched successfully:",ae)}else if(C.status===401)F("Authentication required. Please log in.");else{const ae=await C.json();F(ae.message||"Failed to fetch users")}}catch(C){console.error("Error fetching users:",C),F("Network error. Please check your connection.")}finally{pe(!1)}};m.useEffect(()=>{(async()=>{mt(!0);try{const ae=await Fe("/api/manictime-admin/subscriptions",{credentials:"include"});if(ae.ok){const Ce=await ae.json();He(Ce)}}catch(ae){console.error("Error fetching subscriptions:",ae)}finally{mt(!1)}})()},[]),m.useEffect(()=>{ht()},[]),m.useEffect(()=>{(async()=>{try{const ae=await Fe("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ae.ok){const Ce=await ae.json();Se(Ce)}else Se(null)}catch(ae){console.error("Failed to fetch user profile",ae),Se(null)}})()},[]),m.useEffect(()=>{if(!Q||!N.department){B([]);return}k(!0),Fe("/api/ai/admin/structure",{credentials:"include"}).then(C=>C.json()).then(C=>{var At;const ae=C.domains.find(bt=>bt.name===N.department),Ce=ae?ae.contexts:[];if(B(Ce),(At=J==null?void 0:J.projects)!=null&&At.length){const bt=J.projects.map(Pt=>Pt.id);_(Ce.filter(Pt=>bt.includes(Pt.id)).map(Pt=>Pt.id))}else _([])}).finally(()=>k(!1))},[Q,N.department]);const R=C=>{te(C),L(!0)},Ut=C=>{var ae;M(C),X({...C}),(ae=C.projects)!=null&&ae.length?_(C.projects.map(Ce=>Ce.id)):_([]),je({}),V(!0)},Tt=()=>{var ae,Ce;const C={};return(ae=N.firstName)!=null&&ae.trim()||(C.firstName="First name is required"),(Ce=N.email)!=null&&Ce.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N.email)||(C.email="Please enter a valid email"):C.email="Email is required",N.department||(C.department="Department is required"),N.phoneNumber&&!/^[689]\d{7}$/.test(N.phoneNumber)&&(C.phoneNumber="Phone number must start with 6, 8, or 9 and be 8 digits long"),je(C),Object.keys(C).length===0},I=async()=>{try{const C=await Fe(`/users/${D}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(C.ok){const ae=await C.json();Ue(Ce=>Ce.filter(At=>At.id!==D)),P("User deleted successfully"),setTimeout(()=>P(""),3e3),console.log("User deleted successfully:",ae)}else{const ae=await C.json();F(ae.message||"Failed to delete user"),setTimeout(()=>F(""),5e3)}}catch(C){console.error("Error deleting user:",C),F("Network error. Please try again."),setTimeout(()=>F(""),5e3)}finally{L(!1),te(null)}},v=async()=>{if(Tt())try{const C=await Fe(`/users/${J.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(C.ok){await Fe(`/api/ai/context-clear/${J.id}`,{method:"DELETE",credentials:"include"});for(const ae of j)await Fe("/api/ai/context-assign",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:J.id,contextId:ae})});await ht(),P("User updated successfully"),setTimeout(()=>P(""),3e3),V(!1),M(null),X({}),je({})}else{const ae=await C.json();F(ae.message||"Failed to update user"),setTimeout(()=>F(""),5e3)}}catch{F("Network error. Please try again."),setTimeout(()=>F(""),5e3)}},he=(C,ae)=>{X(Ce=>({...Ce,[C]:ae})),oe[C]&&je(Ce=>({...Ce,[C]:""}))},Ke=()=>{window.location.href="/addusers"},nt=de.filter(C=>{const ae=`${C.firstName} ${C.lastName}`.toLowerCase().includes(t.toLowerCase())||C.email.toLowerCase().includes(t.toLowerCase())||C.department.toLowerCase().includes(t.toLowerCase()),Ce=a==="all"||C.role===a,At=c==="all"||C.department===c;return ae&&Ce&&At}),E=(tt==null?void 0:tt.role)==="admin"?[{label:"Users",value:de.length},{label:"Admins",value:de.filter(C=>C.role==="admin").length},{label:"Approvers",value:de.filter(C=>C.isApprover).length}]:[{label:"Projects",value:tt!=null&&tt.project?1:0},{label:"Hours",value:(tt==null?void 0:tt.totalHours)??""},{label:"Capacity",value:tt!=null&&tt.capacity?`${tt.capacity}%`:""}],$=[...new Set(de.map(C=>C.department))],Qe=["admin","member"],W=[{label:"Total Users",value:de.length,icon:Eo,color:"#3b82f6",gradient:"from-blue-500 to-blue-600"},{label:"Admins",value:de.filter(C=>C.role==="admin").length,icon:yi,color:"#8b5cf6",gradient:"from-purple-500 to-purple-600"},{label:"Members",value:de.filter(C=>C.role==="member").length,icon:Nt,color:"#10b981",gradient:"from-emerald-500 to-emerald-600"},{label:"Departments",value:$.length,icon:Gi,color:"#f59e0b",gradient:"from-amber-500 to-amber-600"}],Y={page:{minHeight:"100vh",padding:"30px",background:i?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"36px"},title:{fontSize:"32px",fontWeight:"700",color:i?"#f1f5f9":"#1e293b",letterSpacing:"-0.5px"},headerActions:{display:"flex",gap:"12px",alignItems:"center"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"20px",marginBottom:"32px"},statCard:(C,ae)=>({position:"relative",background:i?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.8)",borderRadius:"20px",padding:"28px",border:`2px solid ${C?ae.color:"transparent"}`,boxShadow:C?`0 20px 40px ${ae.color}30, 0 0 0 1px ${ae.color}20`:"0 4px 20px rgba(0,0,0,0.08)",backdropFilter:"blur(20px)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:C?"translateY(-8px)":"translateY(0)",cursor:"pointer",overflow:"hidden"}),statIconContainer:C=>({width:"56px",height:"56px",borderRadius:"16px",background:`linear-gradient(135deg, ${C.color} 0%, ${C.color}dd 100%)`,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px",boxShadow:`0 8px 24px ${C.color}40`}),statContent:{position:"relative",zIndex:1},statNumber:{fontSize:"40px",fontWeight:"800",color:i?"#f1f5f9":"#1e293b",lineHeight:1,marginBottom:"8px",letterSpacing:"-1px"},statLabel:{fontSize:"13px",fontWeight:"600",color:i?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},statDecoration:(C,ae)=>({position:"absolute",top:"-20px",right:"-20px",width:"120px",height:"120px",borderRadius:"50%",background:`radial-gradient(circle, ${C.color}15 0%, transparent 70%)`,opacity:ae?1:.5,transition:"opacity 0.4s ease"}),controlsCard:{position:"relative",background:i?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.8)",borderRadius:"20px",padding:"28px",marginBottom:"28px",border:i?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.6)",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",backdropFilter:"blur(20px)",transition:"all 0.3s ease"},controlsTop:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},searchContainer:{position:"relative",flex:1,minWidth:"320px"},searchInput:{width:"100%",padding:"16px 20px 16px 52px",borderRadius:"14px",border:i?"2px solid rgba(75,85,99,0.3)":"2px solid rgba(226,232,240,0.5)",backgroundColor:i?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#1e293b",fontSize:"15px",fontWeight:"500",outline:"none",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},searchIcon:{position:"absolute",left:"18px",top:"50%",transform:"translateY(-50%)",color:i?"#94a3b8":"#64748b"},filterButton:C=>({padding:"16px 24px",borderRadius:"14px",border:"none",background:C?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":i?"rgba(51,65,85,0.6)":"rgba(255,255,255,0.9)",color:C?"#fff":i?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"10px",fontWeight:"600",fontSize:"14px",boxShadow:C?"0 4px 16px rgba(59,130,246,0.3)":"0 2px 8px rgba(0,0,0,0.04)"}),tableCard:C=>({position:"relative",background:i?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.8)",borderRadius:"20px",overflow:"hidden",border:i?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.6)",boxShadow:C?"0 20px 40px rgba(0,0,0,0.12)":"0 8px 32px rgba(0,0,0,0.08)",backdropFilter:"blur(20px)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:C?"translateY(-4px)":"translateY(0)"}),table:{width:"100%",borderCollapse:"collapse"},th:{textAlign:"left",background:i?"linear-gradient(to bottom, rgba(75,85,99,0.4), rgba(55,65,81,0.6))":"linear-gradient(to bottom, rgba(248,250,252,0.9), rgba(241,245,249,0.9))",padding:"20px 28px",fontSize:"12px",fontWeight:"700",color:i?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"1px",borderBottom:i?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},td:{padding:"20px 28px",fontSize:"15px",fontWeight:"500",color:i?"#e2e8f0":"#1f2937",borderBottom:i?"1px solid rgba(75,85,99,0.2)":"1px solid rgba(241,245,249,0.8)"},tableRow:C=>({transition:"all 0.2s ease",cursor:"pointer",background:C?i?"rgba(59,130,246,0.08)":"rgba(59,130,246,0.04)":"transparent"}),avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},userName:{fontSize:"14px",fontWeight:"600",marginBottom:"4px",color:i?"#f1f5f9":"#1e293b"},userEmail:{fontSize:"13px",fontWeight:"500",color:i?"#94a3b8":"#64748b"},roleChip:C=>({padding:"6px 16px",borderRadius:"10px",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.3px",display:"inline-block",...C==="admin"&&{background:i?"linear-gradient(135deg, rgba(139,92,246,0.2) 0%, rgba(139,92,246,0.3) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",color:i?"#c4b5fd":"#92400e",boxShadow:i?"0 2px 8px rgba(139,92,246,0.3)":"0 2px 8px rgba(251,191,36,0.2)",border:i?"1px solid rgba(139,92,246,0.4)":"none"},...C==="member"&&{background:i?"linear-gradient(135deg, rgba(59,130,246,0.2) 0%, rgba(59,130,246,0.3) 100%)":"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",color:i?"#93c5fd":"#1e40af",boxShadow:i?"0 2px 8px rgba(59,130,246,0.3)":"0 2px 8px rgba(59,130,246,0.2)",border:i?"1px solid rgba(59,130,246,0.4)":"none"}}),iconButton:(C,ae)=>({padding:"11px",borderRadius:"12px",border:"none",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",transform:ae?"scale(1.1)":"scale(1)",...C==="edit"&&{backgroundColor:ae?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.08)",color:"#3b82f6",boxShadow:ae?"0 4px 12px rgba(59,130,246,0.25)":"none"},...C==="delete"&&{backgroundColor:ae?"rgba(239,68,68,0.15)":"rgba(239,68,68,0.08)",color:"#ef4444",boxShadow:ae?"0 4px 12px rgba(239,68,68,0.25)":"none"}}),actionButtons:{display:"flex",gap:"10px"},topButton:C=>({padding:"14px",borderRadius:"14px",border:"none",backgroundColor:C?"rgba(59,130,246,0.12)":i?"rgba(51,65,85,0.6)":"rgba(255,255,255,0.9)",color:C?"#3b82f6":i?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s ease",boxShadow:C?"0 8px 24px rgba(59,130,246,0.15)":"0 2px 8px rgba(0,0,0,0.04)",transform:C?"translateY(-2px)":"translateY(0)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}),notificationBadge:{position:"absolute",top:"10px",right:"10px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:i?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:i?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:i?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:i?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userDetails:{flex:1},userRole:{fontSize:"12px",color:i?"#94a3b8":"#64748b"},userStats:{borderTop:i?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"16px",marginTop:"12px",display:"flex",justifyContent:"space-between"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:i?"#e2e8f0":"#1e293b"},tooltipStatLabel:{fontSize:"10px",color:i?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},floatingAddButton:C=>({position:"fixed",bottom:"32px",right:"32px",width:"68px",height:"68px",borderRadius:"50%",border:"none",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",cursor:"pointer",boxShadow:C?"0 24px 48px rgba(59,130,246,0.4)":"0 12px 32px rgba(59,130,246,0.3)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:C?"translateY(-6px) scale(1.1) rotate(90deg)":"translateY(0) scale(1)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}),actionButton:(C,ae)=>({padding:"14px 28px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"10px",transform:ae?"translateY(-2px)":"translateY(0)",...C==="primary"&&{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",boxShadow:ae?"0 12px 24px rgba(59,130,246,0.3)":"0 4px 12px rgba(59,130,246,0.2)"},...C==="secondary"&&{backgroundColor:i?"rgba(51,65,85,0.6)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#64748b",boxShadow:ae?"0 8px 20px rgba(0,0,0,0.12)":"0 4px 12px rgba(0,0,0,0.06)"}}),modal:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,backdropFilter:"blur(8px)",animation:"fadeIn 0.3s ease-out"},modalContent:{backgroundColor:i?"#374151":"#fff",borderRadius:"24px",padding:"36px",maxWidth:"400px",width:"90%",boxShadow:"0 25px 50px rgba(0,0,0,0.3)",border:i?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(20px)",animation:"modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1)"},modalHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},modalTitle:{fontSize:"22px",fontWeight:"700",color:i?"#f1f5f9":"#1e293b"},modalText:{color:i?"#94a3b8":"#64748b",marginBottom:"28px",lineHeight:"1.6",fontSize:"15px"},modalActions:{display:"flex",gap:"12px",justifyContent:"flex-end"},select:{padding:"12px 16px",borderRadius:"10px",border:i?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:i?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",cursor:"pointer",transition:"all 0.3s ease"},editModalGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px",marginBottom:"28px"},editInput:{width:"100%",padding:"14px 16px",borderRadius:"10px",border:i?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:i?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif'},editLabel:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",marginBottom:"6px",display:"block",textTransform:"uppercase",letterSpacing:"0.5px"},errorMessage:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"#fff",padding:"18px 26px",borderRadius:"14px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"600",boxShadow:"0 12px 28px rgba(239,68,68,0.4)",zIndex:3e3,animation:"slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1)",maxWidth:"400px"},successMessage:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",padding:"18px 26px",borderRadius:"14px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"600",boxShadow:"0 12px 28px rgba(16,185,129,0.4)",zIndex:3e3,animation:"slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px",color:i?"#94a3b8":"#64748b",gap:"16px"},emptyState:{textAlign:"center",padding:"60px",color:i?"#94a3b8":"#64748b"},editErrorText:{color:"#ef4444",fontSize:"12px",marginTop:"6px",display:"flex",alignItems:"center",gap:"4px",fontWeight:"600"},commandBar:{display:"flex",alignItems:"center",gap:"12px",background:i?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.9)",borderRadius:"16px",padding:"10px 14px",border:i?"1px solid rgba(75,85,99,0.4)":"1px solid rgba(226,232,240,0.6)",boxShadow:"0 8px 24px rgba(0,0,0,0.06)",transition:"all 0.3s ease",marginBottom:"24px"},commandInput:{flex:1,border:"none",outline:"none",background:"transparent",fontSize:"15px",color:i?"#e2e8f0":"#1e293b",fontWeight:"500"},commandIcon:{color:i?"#94a3b8":"#64748b"},commandDivider:{width:"1px",height:"24px",background:i?"rgba(75,85,99,0.5)":"rgba(226,232,240,0.8)"},inlineSelect:{border:"none",background:"transparent",color:i?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",cursor:"pointer",outline:"none"},projectsTooltip:{backgroundColor:i?"rgba(30,41,59,0.98)":"rgba(255,255,255,0.98)",borderRadius:"12px",padding:"16px",boxShadow:"0 12px 32px rgba(0,0,0,0.25)",border:i?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",minWidth:"240px",maxWidth:"320px",backdropFilter:"blur(20px)",animation:"fadeIn 0.2s ease-out"},projectsTooltipHeader:{fontSize:"11px",fontWeight:"700",color:i?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",paddingBottom:"10px",borderBottom:i?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},projectItem:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 0",fontSize:"13px",color:i?"#e2e8f0":"#1e293b"},projectBullet:{color:"#6366f1",fontWeight:"700",fontSize:"18px",lineHeight:1,minWidth:"12px"},projectName:{flex:1,fontWeight:"500",lineHeight:1.3},projectType:{fontSize:"10px",padding:"3px 10px",borderRadius:"6px",backgroundColor:i?"rgba(99,102,241,0.2)":"rgba(99,102,241,0.1)",color:"#6366f1",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px",whiteSpace:"nowrap"}};return m.useEffect(()=>{const C=document.createElement("style");return C.textContent=`
      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-30px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      .profile-tooltip-animated {
        animation: slideIn 0.2s ease-out;
      }
    `,document.head.appendChild(C),()=>document.head.removeChild(C)},[]),n.jsxs("div",{style:Y.page,children:[re&&n.jsxs("div",{style:Y.successMessage,children:[n.jsx(Kr,{size:20}),re]}),me&&n.jsxs("div",{style:Y.errorMessage,children:[n.jsx(fn,{size:20}),me]}),n.jsxs("div",{style:Y.header,children:[n.jsx("h1",{style:Y.title,children:"Users Management"}),n.jsxs("div",{style:Y.headerActions,children:[n.jsxs("button",{style:Y.actionButton("secondary",le==="refresh"),onMouseEnter:()=>G("refresh"),onMouseLeave:()=>G(null),onClick:ht,disabled:se,children:[n.jsx(Vi,{size:16,style:{animation:se?"spin 1s linear infinite":"none"}}),"Refresh"]}),n.jsxs("button",{style:Y.topButton(le==="alerts"),onMouseEnter:()=>G("alerts"),onMouseLeave:()=>G(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:Y.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:Y.topButton(le==="profile"),onMouseEnter:()=>{G("profile"),be(!0)},onMouseLeave:()=>{G(null),setTimeout(()=>{Me||be(!1)},100)},onClick:()=>window.location.href="/adminprofile",children:n.jsx(Nt,{size:20})}),Me&&tt&&n.jsxs("div",{style:Y.profileTooltip,onMouseEnter:()=>be(!0),onMouseLeave:()=>be(!1),children:[n.jsx("div",{style:Y.tooltipArrow}),n.jsxs("div",{style:Y.userInfo,children:[n.jsx("div",{style:Y.avatar,children:ie(tt.firstName,tt.lastName)}),n.jsxs("div",{style:Y.userDetails,children:[n.jsxs("div",{style:Y.userName,children:[tt.firstName," ",tt.lastName||""]}),n.jsxs("div",{style:Y.userRole,children:[tt.role==="admin"?"Admin":"Member","  ",tt.department]})]})]}),n.jsx("div",{style:Y.userStats,children:E.map(C=>n.jsxs("div",{style:Y.tooltipStatItem,children:[n.jsx("div",{style:Y.tooltipStatNumber,children:C.value}),n.jsx("div",{style:Y.tooltipStatLabel,children:C.label})]},C.label))}),n.jsx("button",{style:Y.themeToggle,onClick:()=>e(!i),children:i?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:Y.statsGrid,children:W.map((C,ae)=>{const Ce=C.icon;return n.jsxs("div",{style:Y.statCard(Be===`stat${ae}`,C),onMouseEnter:()=>Ae(`stat${ae}`),onMouseLeave:()=>Ae(null),children:[n.jsx("div",{style:Y.statDecoration(C,Be===`stat${ae}`)}),n.jsxs("div",{style:Y.statContent,children:[n.jsx("div",{style:Y.statIconContainer(C),children:n.jsx(Ce,{size:28,color:"#fff",strokeWidth:2.5})}),n.jsx("div",{style:Y.statNumber,children:C.value}),n.jsx("div",{style:Y.statLabel,children:C.label})]})]},ae)})}),n.jsxs("div",{style:Y.commandBar,children:[n.jsx(kh,{size:18,style:Y.commandIcon}),n.jsx("input",{style:Y.commandInput,placeholder:"Search users by name, email, or department",value:t,onChange:C=>r(C.target.value)}),n.jsx("div",{style:Y.commandDivider}),n.jsx(Eh,{size:16,style:Y.commandIcon}),n.jsxs("select",{style:Y.inlineSelect,value:a,onChange:C=>A(C.target.value),children:[n.jsx("option",{value:"all",children:"All Roles"}),Qe.map(C=>n.jsx("option",{value:C,children:C.charAt(0).toUpperCase()+C.slice(1)},C))]}),n.jsxs("select",{style:Y.inlineSelect,value:c,onChange:C=>p(C.target.value),children:[n.jsx("option",{value:"all",children:"All Departments"}),$.map(C=>n.jsx("option",{value:C,children:C},C))]})]}),se?n.jsx("div",{style:Y.tableCard(!1),children:n.jsxs("div",{style:Y.loadingContainer,children:[n.jsx(Vi,{size:32,style:{animation:"spin 1s linear infinite"}}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"600"},children:"Loading users..."})]})}):nt.length===0?n.jsx("div",{style:Y.tableCard(!1),children:n.jsxs("div",{style:Y.emptyState,children:[n.jsx(Eo,{size:64,style:{marginBottom:"20px",opacity:.4}}),n.jsx("div",{style:{fontSize:"20px",fontWeight:"700",marginBottom:"10px"},children:de.length===0?"No users found":"No users match your filters"}),n.jsx("div",{style:{fontSize:"15px",opacity:.7},children:de.length===0?"Start by adding your first user":"Try adjusting your search or filter criteria"})]})}):n.jsx("div",{style:Y.tableCard(Be==="table"),onMouseEnter:()=>Ae("table"),onMouseLeave:()=>Ae(null),children:n.jsxs("table",{style:Y.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:Y.th,children:"User"}),n.jsx("th",{style:Y.th,children:"Role"}),n.jsx("th",{style:Y.th,children:"Department"}),n.jsx("th",{style:Y.th,children:"Supervisor"}),n.jsx("th",{style:Y.th,children:"Project"}),n.jsx("th",{style:Y.th,children:"Actions"})]})}),n.jsx("tbody",{children:nt.map(C=>n.jsxs("tr",{style:Y.tableRow(Be===`user-${C.id}`),onMouseEnter:()=>Ae(`user-${C.id}`),onMouseLeave:()=>Ae(null),children:[n.jsx("td",{style:Y.td,children:n.jsxs("div",{style:Y.userInfo,children:[n.jsx("div",{style:Y.avatar,children:ie(C.firstName,C.lastName)}),n.jsxs("div",{children:[n.jsxs("div",{style:Y.userName,children:[C.firstName," ",C.lastName||""]}),n.jsx("div",{style:Y.userEmail,children:C.email})]})]})}),n.jsx("td",{style:Y.td,children:n.jsx("span",{style:Y.roleChip(C.role),children:C.role})}),n.jsx("td",{style:Y.td,children:C.department}),n.jsx("td",{style:Y.td,children:de.find(ae=>ae.id===C.assignedUnder)?(()=>{const ae=de.find(Ce=>Ce.id===C.assignedUnder);return`${ae.firstName} ${ae.lastName||""}`.trim()})():""}),n.jsx("td",{style:Y.td,children:C.projects&&C.projects.length>0?C.projects.length===1?n.jsx("span",{children:C.projects[0].name}):n.jsxs("div",{onMouseEnter:ae=>{console.log("Badge hovered for user:",C.id),T.current&&clearTimeout(T.current);const Ce=ae.currentTarget.getBoundingClientRect(),At={x:Ce.left+Ce.width/2,y:Ce.bottom-32};console.log("Setting tooltip position:",At),Z(At),at(C.id)},onMouseLeave:()=>{console.log("Badge mouse leave"),T.current=setTimeout(()=>{console.log("Hiding tooltip after delay"),at(null)},200)},style:{cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"8px",backgroundColor:i?"rgba(99,102,241,0.1)":"rgba(99,102,241,0.08)",color:"#6366f1",fontWeight:"600",fontSize:"13px",transition:"all 0.2s ease"},children:[n.jsx(Eo,{size:14}),n.jsxs("span",{children:[C.projects.length," projects"]})]}):n.jsx("span",{style:{color:i?"#64748b":"#94a3b8",fontStyle:"italic"},children:"Not assigned"})}),n.jsx("td",{style:Y.td,children:n.jsxs("div",{style:Y.actionButtons,children:[n.jsx("button",{style:Y.iconButton("edit",le===`edit-${C.id}`),onMouseEnter:()=>G(`edit-${C.id}`),onMouseLeave:()=>G(null),onClick:()=>Ut(C),children:n.jsx(Mm,{size:16})}),n.jsx("button",{style:Y.iconButton("delete",le===`delete-${C.id}`),onMouseEnter:()=>G(`delete-${C.id}`),onMouseLeave:()=>G(null),onClick:()=>R(C.id),children:n.jsx(ar,{size:16})})]})})]},C.id))})]})}),n.jsx("button",{style:Y.floatingAddButton(le==="add"),onMouseEnter:()=>G("add"),onMouseLeave:()=>G(null),onClick:Ke,children:n.jsx(In,{size:30})}),ke&&n.jsx("div",{style:{position:"fixed",left:`${O.x}px`,top:`${O.y}px`,transform:"translate(-50%, -100%)",zIndex:9999},onMouseEnter:()=>{T.current&&clearTimeout(T.current)},onMouseLeave:()=>{at(null)},children:n.jsxs("div",{style:Y.projectsTooltip,children:[n.jsxs("div",{style:Y.projectsTooltipHeader,children:["Assigned Projects (",((Ze=(We=de.find(C=>C.id===ke))==null?void 0:We.projects)==null?void 0:Ze.length)||0,")"]}),(xe=(St=de.find(C=>C.id===ke))==null?void 0:St.projects)==null?void 0:xe.map((C,ae)=>n.jsxs("div",{style:Y.projectItem,children:[n.jsx("div",{style:Y.projectBullet,children:""}),n.jsx("div",{style:Y.projectName,children:C.name}),C.projectType&&n.jsx("div",{style:Y.projectType,children:C.projectType})]},ae))]})}),Q&&J&&n.jsx("div",{style:Y.modal,onClick:()=>V(!1),children:n.jsxs("div",{style:{...Y.modalContent,maxWidth:"700px"},onClick:C=>C.stopPropagation(),children:[n.jsxs("div",{style:Y.modalHeader,children:[n.jsx(Mm,{size:26,color:"#3b82f6"}),n.jsx("div",{style:Y.modalTitle,children:"Edit User"})]}),n.jsxs("div",{style:Y.editModalGrid,children:[n.jsxs("div",{children:[n.jsx("label",{style:Y.editLabel,children:"First Name *"}),n.jsx("input",{style:Y.editInput,value:N.firstName||"",onChange:C=>he("firstName",C.target.value),placeholder:"First name"}),oe.firstName&&n.jsxs("div",{style:Y.editErrorText,children:[n.jsx(fn,{size:12}),oe.firstName]})]}),n.jsxs("div",{children:[n.jsx("label",{style:Y.editLabel,children:"Last Name"}),n.jsx("input",{style:Y.editInput,value:N.lastName||"",onChange:C=>he("lastName",C.target.value),placeholder:"Last name (optional)"})]}),n.jsxs("div",{children:[n.jsx("label",{style:Y.editLabel,children:"Email *"}),n.jsx("input",{style:Y.editInput,type:"email",value:N.email||"",onChange:C=>he("email",C.target.value),placeholder:"Email address"}),oe.email&&n.jsxs("div",{style:Y.editErrorText,children:[n.jsx(fn,{size:12}),oe.email]})]}),n.jsxs("div",{children:[n.jsx("label",{style:Y.editLabel,children:"Phone"}),n.jsx("input",{style:Y.editInput,type:"tel",value:N.phoneNumber||"",onChange:C=>he("phoneNumber",C.target.value),placeholder:"e.g. 81234567"}),oe.phoneNumber&&n.jsxs("div",{style:Y.editErrorText,children:[n.jsx(fn,{size:12}),oe.phoneNumber]})]}),n.jsxs("div",{children:[n.jsx("label",{style:Y.editLabel,children:"Department *"}),n.jsxs("select",{style:Y.editInput,value:N.department||"",onChange:C=>he("department",C.target.value),children:[n.jsx("option",{value:"",children:"Select Department"}),dt.map(C=>n.jsx("option",{value:C,children:C},C))]}),oe.department&&n.jsxs("div",{style:Y.editErrorText,children:[n.jsx(fn,{size:12}),oe.department]})]}),n.jsxs("div",{children:[n.jsx("label",{style:Y.editLabel,children:"Role *"}),n.jsxs("select",{style:Y.editInput,value:N.role||"",onChange:C=>he("role",C.target.value),children:[n.jsx("option",{value:"member",children:"Member"}),n.jsx("option",{value:"admin",children:"Admin"})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:Y.editLabel,children:"Can Approve Plans"}),n.jsxs("select",{style:Y.editInput,value:String(N.isApprover),onChange:C=>he("isApprover",C.target.value==="true"),children:[n.jsx("option",{value:"false",children:"No"}),n.jsx("option",{value:"true",children:"Yes"})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:Y.editLabel,children:"Projects"}),!N.department&&n.jsx("div",{style:{fontSize:"13px",color:i?"#94a3b8":"#64748b",marginTop:"8px"},children:"Select a department to see projects"}),ve&&n.jsx("div",{style:{fontSize:"13px",color:i?"#94a3b8":"#64748b",marginTop:"8px"},children:"Loading projects"}),U.map(C=>n.jsxs("label",{style:{display:"block",fontSize:13,marginBottom:6,color:i?"#e2e8f0":"#1e293b"},children:[n.jsx("input",{type:"checkbox",checked:j.includes(C.id),onChange:()=>_(ae=>ae.includes(C.id)?ae.filter(Ce=>Ce!==C.id):[...ae,C.id])})," ",C.name]},C.id))]}),n.jsxs("div",{children:[n.jsx("label",{style:Y.editLabel,children:"Team"}),n.jsx("input",{style:Y.editInput,value:N.team||"",onChange:C=>he("team",C.target.value),placeholder:"Team"})]}),n.jsxs("div",{children:[n.jsx("label",{style:Y.editLabel,children:"Assigned Under"}),n.jsxs("select",{style:Y.editInput,value:N.assignedUnder||"",onChange:C=>he("assignedUnder",C.target.value?Number(C.target.value):null),children:[n.jsx("option",{value:"",children:"No Supervisor"}),de.filter(C=>C.id!==J.id).map(C=>n.jsxs("option",{value:C.id,children:[C.firstName," ",C.lastName||""," (",C.department,")"]},C.id))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:Y.editLabel,children:"Device Name"}),n.jsx("input",{style:Y.editInput,value:N.deviceName||"",onChange:C=>he("deviceName",C.target.value),placeholder:"IHRP-WLT-XXX"})]}),n.jsxs("div",{children:[n.jsx("label",{style:Y.editLabel,children:"ManicTime Subscription"}),n.jsxs("select",{style:Y.editInput,value:N.subscriptionId||"",onChange:C=>he("subscriptionId",C.target.value?Number(C.target.value):null),disabled:ze,children:[n.jsx("option",{value:"",children:ze?"Loading...":"No subscription"}),ge.map(C=>n.jsx("option",{value:C.Id,children:C.SubscriptionName},C.Id))]})]}),n.jsxs("div",{children:[n.jsx("label",{style:Y.editLabel,children:"Timeline Key"}),n.jsx("input",{style:Y.editInput,value:N.timelineKey||"",onChange:C=>he("timelineKey",C.target.value),placeholder:"abc-123-timeline-key"})]}),n.jsxs("div",{style:Y.modalActions,children:[n.jsx("button",{style:Y.actionButton("secondary",le==="cancelEdit"),onMouseEnter:()=>G("cancelEdit"),onMouseLeave:()=>G(null),onClick:()=>{V(!1),je({})},children:"Cancel"}),n.jsxs("button",{style:Y.actionButton("primary",le==="saveEdit"),onMouseEnter:()=>G("saveEdit"),onMouseLeave:()=>G(null),onClick:v,children:[n.jsx(Oi,{size:16}),"Save Changes"]})]})]})}),S&&n.jsx("div",{style:Y.modal,onClick:()=>L(!1),children:n.jsxs("div",{style:Y.modalContent,onClick:C=>C.stopPropagation(),children:[n.jsxs("div",{style:Y.modalHeader,children:[n.jsx(fn,{size:26,color:"#ef4444"}),n.jsx("div",{style:Y.modalTitle,children:"Delete User"})]}),n.jsx("div",{style:Y.modalText,children:"Are you sure you want to delete this user? This action cannot be undone and will permanently remove their account and all associated data."}),n.jsxs("div",{style:Y.modalActions,children:[n.jsx("button",{style:Y.actionButton("secondary",le==="cancel"),onMouseEnter:()=>G("cancel"),onMouseLeave:()=>G(null),onClick:()=>L(!1),children:"Cancel"}),n.jsxs("button",{style:{...Y.actionButton("primary",le==="confirm"),background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)"},onMouseEnter:()=>G("confirm"),onMouseLeave:()=>G(null),onClick:I,children:[n.jsx(ar,{size:16}),"Delete User"]})]})]})})]})},tQ=()=>{const i=Ji.useRef(null),[e,t]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[r,a]=m.useState({firstName:"",lastName:"",email:"",dateOfBirth:"",phoneNumber:"",department:"",team:"",password:"",confirmPassword:"",role:"member",isApprover:!1,deviceName:"",timelineKey:"",subscriptionId:null,assignedUnder:""}),[A,c]=m.useState({}),[p,u]=m.useState(!1),[f,g]=m.useState(!1),[y,b]=m.useState(!1),[H,S]=m.useState(""),[L,Q]=m.useState(""),[V,D]=m.useState(null),[te,J]=m.useState(!1),[M,N]=m.useState({firstName:"Admin",lastName:"User",role:"admin",email:"admin@example.com",department:"Engineering"}),[X,Be]=m.useState([]),[Ae,le]=m.useState([]),[G,se]=m.useState([]),[pe,Me]=m.useState([]),[be,de]=m.useState(!1),Ue=["DTO","P&A","PPC","Finance","A&I","Marketing"],me=["admin","member"],F=(M==null?void 0:M.role)==="admin"?[{label:"Users",value:G.length},{label:"Admins",value:G.filter(O=>O.role==="admin").length},{label:"Approvers",value:G.filter(O=>O.isApprover).length}]:[{label:"Projects",value:M!=null&&M.project?1:0},{label:"Hours",value:(M==null?void 0:M.totalHours)??""},{label:"Capacity",value:M!=null&&M.capacity?`${M.capacity}%`:""}],[re,P]=m.useState(!1),oe=(O,Z)=>O?!Z||Z.trim()===""?O[0].toUpperCase():`${O[0]}${Z[0]}`.toUpperCase():"?";m.useEffect(()=>{(async()=>{try{const Z=await Fe("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Z.ok){const ke=await Z.json();N(ke)}}catch(Z){console.error("Error fetching user profile:",Z)}})()},[]);const[je,U]=m.useState([]);m.useEffect(()=>{(async()=>{de(!0);try{const Z=await Fe("/api/manictime-admin/subscriptions",{credentials:"include"});if(Z.ok){const ke=await Z.json();Me(ke)}}catch(Z){console.error("Error fetching subscriptions:",Z)}finally{de(!1)}})()},[]),m.useEffect(()=>{(async()=>{try{const Z=await Fe("/users",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Z.ok){const ke=await Z.json();se(ke)}}catch(Z){console.error("Error fetching users:",Z)}})()},[]),m.useEffect(()=>{(async()=>{try{const ke=await(await Fe("/user/list",{credentials:"include"})).json();U(ke.users||[])}catch(Z){console.error("Failed to fetch assignable users",Z)}})()},[]),m.useEffect(()=>{if(!r.department){Be([]),le([]);return}Fe("/api/ai/admin/structure",{credentials:"include"}).then(O=>O.json()).then(O=>{const Z=O.domains.find(ke=>ke.name===r.department);Be(Z?Z.contexts:[]),le([])})},[r.department]);const B=()=>{const O={};return r.firstName.trim()||(O.firstName="First name is required"),r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(O.email="Please enter a valid email address"):O.email="Email is required",r.dateOfBirth?/^\d{4}-\d{2}-\d{2}$/.test(r.dateOfBirth)||(O.dateOfBirth="Invalid date format (YYYY-MM-DD)"):O.dateOfBirth="Date of birth is required",r.phoneNumber.trim()?/^[689]\d{7}$/.test(r.phoneNumber)||(O.phoneNumber="Phone number must start with 6, 8, or 9 and be 8 digits long"):O.phoneNumber="Phone number is required",r.department||(O.department="Department is required"),Ae.length===0&&(O.projects="At least one project must be selected"),r.team.trim()||(O.team="Team is required"),r.password?r.password.length<8&&(O.password="Password must be at least 8 characters long"):O.password="Password is required",r.confirmPassword?r.password!==r.confirmPassword&&(O.confirmPassword="Passwords do not match"):O.confirmPassword="Please confirm your password",c(O),Object.keys(O).length===0},j=(O,Z)=>{a(ke=>({...ke,[O]:Z})),A[O]&&c(ke=>({...ke,[O]:""}))},_=async O=>{if(O.preventDefault(),!B()){S("Please fix the errors in the form"),setTimeout(()=>S(""),5e3);return}u(!0),S(""),Q("");try{const{confirmPassword:Z,...ke}=r,at=await Fe("/signup",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ke)}),T=await at.json();if(at.ok){const ge=T.user.id;for(const He of Ae)await Fe("/api/ai/context-assign",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:ge,contextId:He})});Q("User created successfully! Redirecting..."),console.log("User created successfully:",T),setTimeout(()=>{window.location.href="/users"},2e3)}else S(T.message||"Failed to create user"),setTimeout(()=>S(""),5e3)}catch(Z){console.error("Error creating user:",Z),S("Network error. Please check your connection."),setTimeout(()=>S(""),5e3)}finally{u(!1)}},ve=()=>{window.location.href="/users"},k={page:{minHeight:"100vh",padding:"30px",background:e?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},backButton:O=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:O?"rgba(59,130,246,0.1)":e?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:O?"#3b82f6":e?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:O?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:O?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),title:{fontSize:"32px",fontWeight:"700",color:e?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},topButton:O=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:O?"rgba(59,130,246,0.1)":e?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:O?"#3b82f6":e?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:O?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:O?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:e?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:e?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:e?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:e?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center"},userAvatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"14px",marginRight:"12px"},userDetails:{flex:1},userName:{fontWeight:"600",marginBottom:"2px",color:e?"#e2e8f0":"#1e293b"},userRole:{fontSize:"12px",color:e?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:e?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",marginTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:e?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:e?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},formCard:{backgroundColor:e?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:e?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(20px)",transition:"all 0.3s ease",marginBottom:"24px"},formGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",marginBottom:"24px"},formGroup:{display:"flex",flexDirection:"column"},label:{fontSize:"12px",fontWeight:"600",color:e?"#94a3b8":"#64748b",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},required:{color:"#ef4444",fontSize:"14px"},inputWrapper:{position:"relative",display:"flex",alignItems:"center"},input:O=>({width:"100%",padding:"12px 16px",paddingLeft:"44px",borderRadius:"10px",border:O?"2px solid #ef4444":e?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:e?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:e?"#e2e8f0":"#1e293b",fontSize:"14px",letterSpacing:"0.1px",fontFamily:"Montserrat",outline:"none",transition:"all 0.3s ease",backdropFilter:"blur(10px)"}),passwordInput:{fontFamily:"Montserrat",fontSize:"14px",letterSpacing:"0.1px"},inputIcon:{position:"absolute",left:"14px",color:e?"#94a3b8":"#64748b",pointerEvents:"none",zIndex:5},select:O=>({width:"100%",padding:"12px 16px",paddingLeft:"44px",borderRadius:"10px",border:O?"2px solid #ef4444":e?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:e?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:e?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(10px)",appearance:"none",backgroundImage:`url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='${e?"%2394a3b8":"%2364748b"}' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"20px",paddingRight:"44px"}),passwordToggle:{position:"absolute",right:"14px",cursor:"pointer",color:e?"#94a3b8":"#64748b",transition:"color 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",padding:"4px"},errorText:{color:"#ef4444",fontSize:"12px",marginTop:"4px",display:"flex",alignItems:"center",gap:"4px",fontWeight:"500"},helperText:{color:e?"#94a3b8":"#64748b",fontSize:"12px",marginTop:"4px",fontStyle:"italic"},section:{marginTop:"32px",paddingTop:"32px",borderTop:e?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)"},sectionTitle:{fontSize:"18px",fontWeight:"700",color:e?"#e2e8f0":"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},buttonGroup:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"32px"},button:(O,Z,ke)=>({padding:"12px 24px",borderRadius:"10px",border:"none",fontSize:"14px",fontWeight:"600",cursor:ke?"not-allowed":"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"8px",transform:Z&&!ke?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",opacity:ke?.6:1,...O==="primary"&&{background:ke?e?"#4b5563":"#cbd5e1":"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"#fff",boxShadow:Z&&!ke?"0 12px 24px rgba(59,130,246,0.4)":"0 4px 12px rgba(59,130,246,0.2)"},...O==="secondary"&&{backgroundColor:e?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:e?"#e2e8f0":"#64748b",boxShadow:Z?"0 8px 20px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",backdropFilter:"blur(10px)"}}),successMessage:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#10b981",color:"#fff",padding:"16px 24px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",boxShadow:"0 8px 25px rgba(16,185,129,0.3)",zIndex:1e3,animation:"slideIn 0.5s ease-out"},errorMessage:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#ef4444",color:"#fff",padding:"16px 24px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",boxShadow:"0 8px 25px rgba(239,68,68,0.3)",zIndex:1e3,animation:"slideIn 0.5s ease-out",maxWidth:"400px"},closeButton:{background:"none",border:"none",color:"#fff",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"auto"},infoIcon:{marginLeft:"6px",fontSize:"12px",cursor:"help",color:"#3b82f6",fontWeight:"700"},infoTooltip:{marginTop:"6px",padding:"10px 12px",backgroundColor:"rgba(59,130,246,0.08)",borderLeft:"3px solid #3b82f6",borderRadius:"6px",fontSize:"12px",color:e?"#e2e8f0":"#1e293b",lineHeight:"1.4"}};return m.useEffect(()=>{const O=document.createElement("style");return O.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      input:focus, select:focus {
        border-color: #3b82f6 !important;
        box-shadow: 0 0 0 3px rgba(59,130,246,0.1) !important;
      }

      input[type="date"]::-webkit-calendar-picker-indicator {
        opacity: 0;
        display: none;
      }

      input[type="date"]::-webkit-inner-spin-button,
      input[type="date"]::-webkit-clear-button {
        display: none;
      }
    `,document.head.appendChild(O),()=>document.head.removeChild(O)},[]),n.jsxs("div",{style:k.page,children:[L&&n.jsxs("div",{style:k.successMessage,children:[n.jsx(Kr,{size:20}),L]}),H&&n.jsxs("div",{style:k.errorMessage,children:[n.jsx(fn,{size:20}),H,n.jsx("button",{style:k.closeButton,onClick:()=>S(""),children:n.jsx(mr,{size:16})})]}),n.jsxs("div",{style:k.header,children:[n.jsxs("div",{style:k.headerLeft,children:[n.jsx("button",{style:k.backButton(V==="back"),onMouseEnter:()=>D("back"),onMouseLeave:()=>D(null),onClick:ve,children:n.jsx(wi,{size:20})}),n.jsx("h1",{style:k.title,className:"floating",children:"Add New User"})]}),n.jsxs("div",{style:k.headerRight,children:[n.jsxs("button",{style:k.topButton(V==="alerts"),onMouseEnter:()=>D("alerts"),onMouseLeave:()=>D(null),onClick:()=>{window.location.href="/adminalerts"},children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:k.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:k.topButton(V==="profile"),onMouseEnter:()=>{D("profile"),J(!0)},onMouseLeave:()=>{D(null)},onClick:()=>{window.location.href="/adminprofile"},children:n.jsx(Nt,{size:20})}),te&&M&&n.jsxs("div",{style:k.profileTooltip,onMouseEnter:()=>J(!0),onMouseLeave:()=>J(!1),children:[n.jsx("div",{style:k.tooltipArrow}),n.jsxs("div",{style:k.userInfo,children:[n.jsx("div",{style:k.userAvatar,children:oe(M.firstName,M.lastName)}),n.jsxs("div",{style:k.userDetails,children:[n.jsxs("div",{style:k.userName,children:[M.firstName," ",M.lastName||""]}),n.jsxs("div",{style:k.userRole,children:[M.role==="admin"?"Admin":"Member","  ",M.department]})]})]}),n.jsx("div",{style:k.userStats,children:F.map(O=>n.jsxs("div",{style:k.tooltipStatItem,children:[n.jsx("div",{style:k.tooltipStatNumber,children:O.value}),n.jsx("div",{style:k.tooltipStatLabel,children:O.label})]},O.label))}),n.jsx("button",{style:k.themeToggle,onClick:()=>{t(!e);try{localStorage.setItem("darkMode",(!e).toString())}catch{console.log("LocalStorage not available")}},children:e?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("form",{onSubmit:_,children:n.jsxs("div",{style:k.formCard,children:[n.jsxs("div",{children:[n.jsxs("div",{style:k.sectionTitle,children:[n.jsx(Nt,{size:20}),"Personal Information"]}),n.jsxs("div",{style:k.formGrid,children:[n.jsxs("div",{style:k.formGroup,children:[n.jsxs("label",{style:k.label,children:["First Name ",n.jsx("span",{style:k.required,children:"*"})]}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(Nt,{size:18,style:k.inputIcon}),n.jsx("input",{style:k.input(A.firstName),type:"text",placeholder:"Enter first name",value:r.firstName,onChange:O=>j("firstName",O.target.value)})]}),A.firstName&&n.jsxs("div",{style:k.errorText,children:[n.jsx(fn,{size:12}),A.firstName]})]}),n.jsxs("div",{style:k.formGroup,children:[n.jsx("label",{style:k.label,children:"Last Name "}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(Nt,{size:18,style:k.inputIcon}),n.jsx("input",{style:k.input(A.lastName),type:"text",placeholder:"Enter last name (optional)",value:r.lastName,onChange:O=>j("lastName",O.target.value)})]}),A.lastName&&n.jsxs("div",{style:k.errorText,children:[n.jsx(fn,{size:12}),A.lastName]}),!A.lastName&&n.jsx("div",{style:k.helperText,children:"Optional - leave blank if not applicable"})]}),n.jsxs("div",{style:k.formGroup,children:[n.jsxs("label",{style:k.label,children:["Email ",n.jsx("span",{style:k.required,children:"*"})]}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(hc,{size:18,style:k.inputIcon}),n.jsx("input",{style:k.input(A.email),type:"email",placeholder:"user@example.com",value:r.email,onChange:O=>j("email",O.target.value)})]}),A.email&&n.jsxs("div",{style:k.errorText,children:[n.jsx(fn,{size:12}),A.email]})]}),n.jsxs("div",{style:k.formGroup,children:[n.jsxs("label",{style:k.label,children:["Phone Number ",n.jsx("span",{style:k.required,children:"*"})]}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(Hy,{size:18,style:k.inputIcon}),n.jsx("input",{style:k.input(A.phoneNumber),type:"tel",placeholder:"81234567",value:r.phoneNumber,onChange:O=>j("phoneNumber",O.target.value)})]}),A.phoneNumber&&n.jsxs("div",{style:k.errorText,children:[n.jsx(fn,{size:12}),A.phoneNumber]}),!A.phoneNumber&&n.jsx("div",{style:k.helperText,children:"Must start with 6, 8, or 9 and be 8 digits long"})]}),n.jsxs("div",{style:k.formGroup,children:[n.jsxs("label",{style:k.label,children:["Date of Birth ",n.jsx("span",{style:k.required,children:"*"})]}),n.jsxs("div",{style:k.inputWrapper,onClick:()=>{var O;return(O=i.current)==null?void 0:O.showPicker()},children:[n.jsx(To,{size:18,style:k.inputIcon}),n.jsx("input",{ref:i,style:k.input(A.dateOfBirth),type:"date",value:r.dateOfBirth,onChange:O=>j("dateOfBirth",O.target.value)})]}),A.dateOfBirth&&n.jsxs("div",{style:k.errorText,children:[n.jsx(fn,{size:12}),A.dateOfBirth]})]})]})]}),n.jsxs("div",{style:k.section,children:[n.jsxs("div",{style:k.sectionTitle,children:[n.jsx(Gi,{size:20}),"Work Information"]}),n.jsxs("div",{style:k.formGrid,children:[n.jsxs("div",{style:k.formGroup,children:[n.jsxs("label",{style:k.label,children:["Department ",n.jsx("span",{style:k.required,children:"*"})]}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(Gi,{size:18,style:k.inputIcon}),n.jsxs("select",{style:k.select(A.department),value:r.department,onChange:O=>j("department",O.target.value),children:[n.jsx("option",{value:"",children:"Select Department"}),Ue.map(O=>n.jsx("option",{value:O,children:O},O))]})]}),A.department&&n.jsxs("div",{style:k.errorText,children:[n.jsx(fn,{size:12}),A.department]})]}),n.jsxs("div",{style:k.formGroup,children:[n.jsxs("label",{style:k.label,children:["Projects ",n.jsx("span",{style:k.required,children:"*"})]}),X.length===0&&n.jsx("div",{style:k.helperText,children:"Select a department to see projects"}),X.map(O=>n.jsxs("label",{style:{display:"block",fontSize:13,marginBottom:6},children:[n.jsx("input",{type:"checkbox",checked:Ae.includes(O.id),onChange:()=>le(Z=>Z.includes(O.id)?Z.filter(ke=>ke!==O.id):[...Z,O.id])})," ",O.name]},O.id||O.contextId||O.name)),A.projects&&n.jsxs("div",{style:k.errorText,children:[n.jsx(fn,{size:12}),A.projects]})]}),n.jsxs("div",{style:k.formGroup,children:[n.jsxs("label",{style:k.label,children:["Team ",n.jsx("span",{style:k.required,children:"*"})]}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(Eo,{size:18,style:k.inputIcon}),n.jsx("input",{style:k.input(A.team),type:"text",placeholder:"Enter team name",value:r.team,onChange:O=>j("team",O.target.value)})]}),A.team&&n.jsxs("div",{style:k.errorText,children:[n.jsx(fn,{size:12}),A.team]})]}),n.jsxs("div",{style:k.formGroup,children:[n.jsxs("label",{style:k.label,children:["Role ",n.jsx("span",{style:k.required,children:"*"})]}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(oc,{size:18,style:k.inputIcon}),n.jsx("select",{style:k.select(A.role),value:r.role,onChange:O=>j("role",O.target.value),children:me.map(O=>n.jsx("option",{value:O,children:O.charAt(0).toUpperCase()+O.slice(1)},O))})]}),A.role&&n.jsxs("div",{style:k.errorText,children:[n.jsx(fn,{size:12}),A.role]})]}),n.jsxs("div",{style:k.formGroup,children:[n.jsxs("label",{style:k.label,children:["Can Approve Master Plans",n.jsx("span",{style:k.infoIcon,onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),children:""})]}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(oc,{size:18,style:k.inputIcon}),n.jsxs("select",{style:k.select(!1),value:r.isApprover,onChange:O=>j("isApprover",O.target.value==="true"),children:[n.jsx("option",{value:"false",children:"No"}),n.jsx("option",{value:"true",children:"Yes"})]})]}),re&&n.jsxs("div",{style:k.infoTooltip,children:["Users marked as approvers can approve or reject master plans within their department.",n.jsx("br",{}),n.jsx("strong",{children:"This does not make them an admin."})]}),n.jsx("div",{style:k.helperText,children:"Allows user to approve or reject plans"})]}),n.jsxs("div",{style:k.formGroup,children:[n.jsx("label",{style:k.label,children:"Assigned Under"}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(oc,{size:18,style:k.inputIcon}),n.jsxs("select",{style:k.select(!1),value:r.assignedUnder,onChange:O=>j("assignedUnder",O.target.value),children:[n.jsx("option",{value:"",children:"None"}),je.map(O=>n.jsxs("option",{value:O.id,children:[O.firstName," ",O.lastName||""," (",O.role,")"]},O.id))]})]}),n.jsx("div",{style:k.helperText,children:"Optional: Assign reporting / approval line"})]}),n.jsxs("div",{style:k.formGroup,children:[n.jsx("label",{style:k.label,children:"Device Name"}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(Vs,{size:18,style:k.inputIcon}),n.jsx("input",{style:k.input(A.deviceName),type:"text",placeholder:"IHRP-WLT-XXX",value:r.deviceName,onChange:O=>j("deviceName",O.target.value)})]}),!A.deviceName&&n.jsx("div",{style:k.helperText,children:"Optional: Assign a device to this user"})]}),n.jsxs("div",{style:k.formGroup,children:[n.jsx("label",{style:k.label,children:"ManicTime Subscription"}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(Gi,{size:18,style:k.inputIcon}),n.jsxs("select",{style:k.select(!1),value:r.subscriptionId||"",onChange:O=>j("subscriptionId",O.target.value?Number(O.target.value):null),disabled:be,children:[n.jsx("option",{value:"",children:be?"Loading...":"No subscription"}),pe.map(O=>n.jsx("option",{value:O.Id,children:O.SubscriptionName},O.Id))]})]}),n.jsx("div",{style:k.helperText,children:"Optional: Link device to a ManicTime workspace"})]}),n.jsxs("div",{style:k.formGroup,children:[n.jsx("label",{style:k.label,children:"Timeline Key"}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(Vs,{size:18,style:k.inputIcon}),n.jsx("input",{style:k.input(A.timelineKey),type:"text",placeholder:"abc-123-timeline-key",value:r.timelineKey,onChange:O=>j("timelineKey",O.target.value)})]}),n.jsx("div",{style:k.helperText,children:"Optional: Timeline key for tracking activities"})]})]})]}),n.jsxs("div",{style:k.section,children:[n.jsxs("div",{style:k.sectionTitle,children:[n.jsx(ui,{size:20}),"Security"]}),n.jsxs("div",{style:k.formGrid,children:[n.jsxs("div",{style:k.formGroup,children:[n.jsxs("label",{style:k.label,children:["Password ",n.jsx("span",{style:k.required,children:"*"})]}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(ui,{size:18,style:k.inputIcon}),n.jsx("input",{style:{...k.input(A.confirmPassword),...k.passwordInput},type:f?"text":"password",placeholder:"Enter password",value:r.password,onChange:O=>j("password",O.target.value)}),n.jsx("div",{style:k.passwordToggle,onClick:()=>g(!f),children:f?n.jsx(Np,{size:18}):n.jsx(Fo,{size:18})})]}),A.password&&n.jsxs("div",{style:k.errorText,children:[n.jsx(fn,{size:12}),A.password]}),!A.password&&n.jsx("div",{style:k.helperText,children:"Must be at least 8 characters long"})]}),n.jsxs("div",{style:k.formGroup,children:[n.jsxs("label",{style:k.label,children:["Confirm Password ",n.jsx("span",{style:k.required,children:"*"})]}),n.jsxs("div",{style:k.inputWrapper,children:[n.jsx(ui,{size:18,style:k.inputIcon}),n.jsx("input",{style:k.input(A.confirmPassword),type:y?"text":"password",placeholder:"Confirm password",value:r.confirmPassword,onChange:O=>j("confirmPassword",O.target.value)}),n.jsx("div",{style:k.passwordToggle,onClick:()=>b(!y),children:y?n.jsx(Np,{size:18}):n.jsx(Fo,{size:18})})]}),A.confirmPassword&&n.jsxs("div",{style:k.errorText,children:[n.jsx(fn,{size:12}),A.confirmPassword]})]})]})]}),n.jsxs("div",{style:k.buttonGroup,children:[n.jsx("button",{type:"button",style:k.button("secondary",V==="cancel",!1),onMouseEnter:()=>D("cancel"),onMouseLeave:()=>D(null),onClick:ve,children:"Cancel"}),n.jsxs("button",{type:"submit",style:k.button("primary",V==="submit",p),onMouseEnter:()=>D("submit"),onMouseLeave:()=>D(null),disabled:p,children:[n.jsx(Oi,{size:18}),p?"Creating User...":"Create User"]})]})]})})]})},nQ=()=>{var pe,Me;const[i,e]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[t,r]=m.useState(null),[a,A]=m.useState(!1),[c,p]=m.useState(null),[u,f]=m.useState(null),[g,y]=m.useState(!1),b=m.useRef(null),H=m.useRef(null),[S,L]=m.useState({firstName:"Admin",lastName:"User",role:"admin",email:"admin@example.com",department:"Engineering"}),[Q,V]=m.useState([]),[D,te]=m.useState(!0),[J,M]=m.useState(null),N=async()=>{try{const be=await Fe("/api/notifications",{credentials:"include"});if(!be.ok)throw new Error("Failed to fetch notifications");const Ue=(await be.json()).map(me=>({id:me.Id,subject:me.Subject,content:me.Content,sentDate:me.CreatedAt,status:me.Status}));V(Ue)}catch(be){console.error("Error fetching notifications:",be),M("Failed to load notifications")}finally{te(!1)}};m.useEffect(()=>{N()},[]),m.useEffect(()=>{H.current||(H.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),b.current&&document.head.removeChild(b.current);const be=document.createElement("style");be.setAttribute("data-component","admin-alerts-background");const de=i?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return be.textContent=`
      /* More specific targeting to avoid conflicts */
      .admin-alerts-page {
        min-height: 100vh;
        background: ${de};
      }
      
      /* Target common parent containers more carefully */
      body {
        background: ${de} !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      /* Only target direct children of common containers */
      #root > div:first-child,
      .app > div:first-child,
      .main-content,
      .page-container {
        background: transparent !important;
        min-height: 100vh;
      }
      
      /* Fallback for nested containers */
      div[style*="background: white"],
      div[style*="background-color: white"],
      div[style*="background: #fff"],
      div[style*="background-color: #fff"] {
        background: transparent !important;
      }
      
      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-20px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      /* Smooth transitions for theme changes */
      * {
        transition: background-color 0.3s ease, background 0.3s ease;
      }
    `,document.head.appendChild(be),b.current=be,()=>{b.current&&document.head.contains(b.current)&&(document.head.removeChild(b.current),b.current=null),H.current&&document.querySelectorAll('[data-component="admin-alerts-background"]').length===0&&Object.assign(document.body.style,H.current)}},[i]);const X=be=>{r(be),A(!0)},Be=async be=>{try{await Fe(`/api/notifications/${be}`,{method:"DELETE",credentials:"include"}),V(de=>de.filter(Ue=>Ue.id!==be))}catch(de){console.error("Failed to delete alert:",de)}},Ae=be=>{switch(be){case"delivered":return"#10b981";case"pending":return"#f59e0b";case"failed":return"#ef4444";default:return"#6b7280"}},le=be=>{switch(be){case"delivered":return Kr;case"pending":return fn;case"failed":return c2;default:return Dy}},G=be=>new Date(be).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),se={page:{minHeight:"100vh",padding:"0",margin:"0",background:i?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease"},contentContainer:{padding:"30px",minHeight:"100vh",background:"inherit"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},backButton:{padding:"12px",borderRadius:"12px",border:"none",backgroundColor:i?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0,0,0,0.08)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"},title:{fontSize:"32px",fontWeight:"700",color:i?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},topButton:be=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:be?"rgba(59,130,246,0.1)":i?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:be?"#3b82f6":i?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:be?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:be?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:i?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:i?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:i?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:i?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},userAvatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:i?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:i?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:i?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:i?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:i?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},infoCard:{backgroundColor:i?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:i?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",gap:"16px"},infoIcon:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6"},infoContent:{flex:1},infoTitle:{fontSize:"18px",fontWeight:"600",color:i?"#e2e8f0":"#1e293b",marginBottom:"4px"},infoText:{fontSize:"14px",color:i?"#94a3b8":"#64748b"},alertsContainer:{backgroundColor:i?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:i?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(20px)"},alertItem:be=>({padding:"20px 24px",borderBottom:i?"1px solid #4b5563":"1px solid #f1f5f9",transition:"all 0.2s ease",cursor:"pointer",backgroundColor:be?"rgba(59,130,246,0.05)":"transparent",display:"flex",alignItems:"center",gap:"16px"}),alertIcon:be=>({padding:"12px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:`${Ae(be)}20`}),alertContent:{flex:1},alertSubject:{fontSize:"16px",fontWeight:"600",color:i?"#e2e8f0":"#1e293b",marginBottom:"4px"},alertDetails:{fontSize:"14px",color:i?"#94a3b8":"#64748b",marginBottom:"8px"},alertMeta:{display:"flex",gap:"16px",alignItems:"center",fontSize:"12px",color:i?"#94a3b8":"#64748b"},statusChip:be=>({padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",backgroundColor:`${Ae(be)}20`,color:Ae(be),display:"flex",alignItems:"center",gap:"4px"}),alertActions:{display:"flex",gap:"8px"},actionButton:(be,de)=>({padding:"8px",borderRadius:"8px",border:"none",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",transform:de?"scale(1.1)":"scale(1)",...be==="view"&&{backgroundColor:de?"rgba(59,130,246,0.1)":"transparent",color:"#3b82f6"},...be==="delete"&&{backgroundColor:de?"rgba(239,68,68,0.1)":"transparent",color:"#ef4444"}}),modal:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,backdropFilter:"blur(4px)"},modalContent:{backgroundColor:i?"rgba(55,65,81,0.95)":"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"32px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",border:i?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(20px)",animation:"modalSlideIn 0.3s ease-out"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:i?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)"},modalTitle:{fontSize:"20px",fontWeight:"700",color:i?"#f1f5f9":"#1e293b"},modalBody:{lineHeight:"1.6",color:i?"#e2e8f0":"#374151"},closeButton:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:i?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease"}};return n.jsx("div",{className:"admin-alerts-page",style:se.page,children:n.jsxs("div",{style:se.contentContainer,children:[n.jsxs("div",{style:se.header,children:[n.jsxs("div",{style:se.headerLeft,children:[n.jsx("button",{style:se.backButton,onClick:()=>window.history.back(),className:"floating",children:n.jsx(wi,{size:20})}),n.jsx("h1",{style:se.title,children:"My Notifications"})]}),n.jsx("div",{style:se.headerRight,children:n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:se.topButton(u==="profile"),onMouseEnter:()=>{f("profile"),y(!0)},onMouseLeave:()=>{f(null)},onClick:()=>{window.location.href="/adminprofile"},children:n.jsx(Nt,{size:20})}),g&&S&&n.jsxs("div",{style:se.profileTooltip,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[n.jsx("div",{style:se.tooltipArrow}),n.jsxs("div",{style:se.userInfo,children:[n.jsxs("div",{style:se.userAvatar,children:[(pe=S.firstName)==null?void 0:pe[0],(Me=S.lastName)==null?void 0:Me[0]]}),n.jsxs("div",{style:se.userDetails,children:[n.jsxs("div",{style:se.userName,children:[S.firstName," ",S.lastName]}),n.jsxs("div",{style:se.userRole,children:[S.role==="admin"?"Admin":"Member","  ",S.department]})]})]}),n.jsxs("div",{style:se.userStats,children:[n.jsxs("div",{style:se.tooltipStatItem,children:[n.jsx("div",{style:se.tooltipStatNumber,children:"32"}),n.jsx("div",{style:se.tooltipStatLabel,children:"Hours"})]}),n.jsxs("div",{style:se.tooltipStatItem,children:[n.jsx("div",{style:se.tooltipStatNumber,children:"3"}),n.jsx("div",{style:se.tooltipStatLabel,children:"Projects"})]}),n.jsxs("div",{style:se.tooltipStatItem,children:[n.jsx("div",{style:se.tooltipStatNumber,children:"80%"}),n.jsx("div",{style:se.tooltipStatLabel,children:"Capacity"})]})]}),n.jsx("button",{style:se.themeToggle,onClick:()=>e(!i),children:i?" Light Mode":" Dark Mode"})]})]})})]}),n.jsxs("div",{style:se.infoCard,children:[n.jsx("div",{style:se.infoIcon,children:n.jsx(hc,{size:24})}),n.jsxs("div",{style:se.infoContent,children:[n.jsx("div",{style:se.infoTitle,children:"Your Notifications"}),n.jsx("div",{style:se.infoText,children:"Messages sent to you from the MaxCap system"})]})]}),n.jsxs("div",{style:se.alertsContainer,children:[D&&n.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#64748b"},children:"Loading notifications"}),J&&n.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#ef4444"},children:J}),!D&&!J&&Q.length===0&&n.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#64748b"},children:"No notifications yet "}),!D&&!J&&Q.map(be=>{const de=le(be.status);return n.jsxs("div",{style:se.alertItem(c===`alert-${be.id}`),onMouseEnter:()=>p(`alert-${be.id}`),onMouseLeave:()=>p(null),children:[n.jsx("div",{style:se.alertIcon(be.status),children:n.jsx(hc,{size:20,color:Ae(be.status)})}),n.jsxs("div",{style:se.alertContent,children:[n.jsx("div",{style:se.alertSubject,children:be.subject}),n.jsx("div",{style:se.alertDetails,children:"From: MaxCap System"}),n.jsxs("div",{style:se.alertMeta,children:[n.jsx("span",{children:G(be.sentDate)}),n.jsxs("span",{style:se.statusChip(be.status),children:[n.jsx(de,{size:12}),be.status]})]})]}),n.jsxs("div",{style:se.alertActions,children:[n.jsx("button",{style:se.actionButton("view",u===`view-${be.id}`),onMouseEnter:()=>f(`view-${be.id}`),onMouseLeave:()=>f(null),onClick:()=>X(be),children:n.jsx(Fo,{size:16})}),n.jsx("button",{style:se.actionButton("delete",u===`delete-${be.id}`),onMouseEnter:()=>f(`delete-${be.id}`),onMouseLeave:()=>f(null),onClick:()=>Be(be.id),children:n.jsx(ar,{size:16})})]})]},be.id)})]}),a&&t&&n.jsx("div",{style:se.modal,onClick:()=>A(!1),children:n.jsxs("div",{style:se.modalContent,onClick:be=>be.stopPropagation(),children:[n.jsxs("div",{style:se.modalHeader,children:[n.jsx("div",{style:se.modalTitle,children:t.subject}),n.jsx("button",{style:se.closeButton,onClick:()=>A(!1),children:""})]}),n.jsxs("div",{style:se.modalBody,children:[n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("strong",{children:"From:"})," MaxCap System"]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("strong",{children:"Sent:"})," ",G(t.sentDate)]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("strong",{children:"Status:"}),n.jsx("span",{style:{...se.statusChip(t.status),marginLeft:"8px"},children:t.status})]}),n.jsx("div",{style:{padding:"20px",backgroundColor:i?"rgba(30,41,59,0.5)":"rgba(248,250,252,0.8)",borderRadius:"12px",borderLeft:`4px solid ${Ae(t.status)}`},children:t.content})]})]})})]})})},rQ=()=>{var se,pe,Me,be;const{collapsed:i}=hd(),[e,t]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[r,a]=m.useState(null),[A,c]=m.useState(null),[p,u]=m.useState(!1),[f,g]=m.useState(null),[y,b]=m.useState(!0),[H,S]=m.useState(null),[L,Q]=m.useState(!1),[V,D]=m.useState({}),[te,J]=m.useState([]),[M,N]=m.useState({weeklyHours:0,capacityUtilization:0,projectCount:0}),X=m.useRef(null),Be=m.useRef(null);m.useEffect(()=>{f&&(async()=>{try{const Ue=await Fe("/actuals",{credentials:"include"});if(Ue.ok){const me=await Ue.json();J(me)}}catch(Ue){console.error("Error fetching actuals:",Ue)}})()},[f]),m.useEffect(()=>{f&&(async()=>{try{const Ue=await Fe("/actuals/stats",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Ue.ok){const me=await Ue.json();N(me)}else console.error("Failed to fetch stats")}catch(Ue){console.error("Error fetching stats:",Ue)}})()},[f]),m.useEffect(()=>{(async()=>{try{const Ue=await Fe("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!Ue.ok){if(Ue.status===401){window.location.href="/login";return}throw new Error("Failed to fetch user profile")}const me=await Ue.json(),F=await Fe(`/users/${me.id}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(F.ok){const re=await F.json();g(re),D(re)}else{const re={firstName:me.firstName,lastName:me.lastName,email:me.email,role:me.role,department:me.department,team:"Not specified",project:"Not specified",phoneNumber:"Not specified",dateOfBirth:null,dateJoined:null};g(re),D(re)}b(!1)}catch(Ue){console.error("Error fetching profile:",Ue),S(Ue.message),b(!1)}})()},[]),m.useEffect(()=>{Be.current||(Be.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),X.current&&document.head.removeChild(X.current);const de=document.createElement("style");de.setAttribute("data-component","admin-profile-background");const Ue=e?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return de.textContent=`
            @keyframes slideIn {
                from {
                    opacity: 0;
                    transform: translateY(-10px) scale(0.95);
                }
                to {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
            }
            
            @keyframes float {
                0%, 100% {
                    transform: translateY(0px);
                }
                50% {
                    transform: translateY(-6px);
                }
            }
            
            @keyframes pulse {
                0%, 100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.5;
                }
            }
            
            @keyframes shimmer {
                0% {
                    background-position: -1000px 0;
                }
                100% {
                    background-position: 1000px 0;
                }
            }
            
            .floating {
                animation: float 3s ease-in-out infinite;
            }
            
            .pulse {
                animation: pulse 2s ease-in-out infinite;
            }
            
            .shimmer {
                animation: shimmer 3s linear infinite;
                background: linear-gradient(
                    90deg,
                    transparent 0%,
                    rgba(59,130,246,0.1) 50%,
                    transparent 100%
                );
                background-size: 1000px 100%;
            }
            
            body {
                background: ${Ue} !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            * {
                transition: background-color 0.3s ease, background 0.3s ease;
            }
        `,document.head.appendChild(de),X.current=de,()=>{X.current&&document.head.contains(X.current)&&(document.head.removeChild(X.current),X.current=null)}},[e]);const Ae=de=>de?new Date(de).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}):"Not specified",le=()=>{const de=!e;t(de),u(!1);try{localStorage.setItem("darkMode",de.toString())}catch{console.log("Dark mode preference cannot be saved in this environment")}},G={page:{minHeight:"100vh",padding:"30px 60px",background:e?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease",position:"relative"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},backButton:de=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:de?"rgba(59,130,246,0.1)":e?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:de?"#3b82f6":e?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:de?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:de?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),title:{fontSize:"32px",fontWeight:"700",color:e?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},topButton:de=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:de?"rgba(59,130,246,0.1)":e?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:de?"#3b82f6":e?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:de?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:de?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:e?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:e?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:e?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:e?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},userAvatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:e?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:e?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:e?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:e?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:e?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},container:{width:"100%",maxWidth:"2000px",margin:"0 auto"},card:de=>({backgroundColor:e?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"40px",marginBottom:"28px",boxShadow:de?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:de?"translateY(-8px) scale(1.01)":"translateY(0) scale(1)",border:e?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.03) 0%, transparent 70%)",opacity:0,transition:"opacity 0.4s ease",pointerEvents:"none"},floatingIcon:(de="#3b82f6")=>({position:"absolute",top:"20px",right:"20px",opacity:.1,fontSize:"48px",color:de}),profileHeader:{display:"flex",alignItems:"center",gap:"32px",marginBottom:"32px",paddingBottom:"32px",borderBottom:e?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)",position:"relative"},largeAvatar:{width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"700",fontSize:"42px",boxShadow:"0 12px 35px rgba(59,130,246,0.4)",border:"4px solid rgba(255,255,255,0.2)",position:"relative"},avatarRing:{position:"absolute",inset:"-8px",borderRadius:"50%",border:"2px solid rgba(59,130,246,0.2)",animation:"pulse 3s ease-in-out infinite"},profileInfo:{flex:1},profileName:{fontSize:"36px",fontWeight:"700",color:e?"#f1f5f9":"#1e293b",marginBottom:"8px",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},profileEmail:{fontSize:"16px",color:e?"#94a3b8":"#64748b",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},roleChip:{padding:"8px 20px",borderRadius:"24px",fontSize:"14px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",backgroundColor:(f==null?void 0:f.role)==="admin"?"#fef3c7":"#dbeafe",color:(f==null?void 0:f.role)==="admin"?"#92400e":"#1e40af",display:"inline-flex",alignItems:"center",gap:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px",marginBottom:"28px"},statBox:de=>({backgroundColor:e?"rgba(30,41,59,0.5)":"rgba(248,250,252,0.8)",borderRadius:"16px",padding:"32px",textAlign:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",transform:de?"translateY(-4px) scale(1.03)":"translateY(0) scale(1)",boxShadow:de?"0 12px 24px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",border:e?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",position:"relative",overflow:"hidden"}),statIcon:{width:"48px",height:"48px",margin:"0 auto 12px",borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"#3b82f6"},statValue:{fontSize:"32px",fontWeight:"800",color:e?"#e2e8f0":"#1e293b",marginBottom:"4px"},statLabel:{fontSize:"13px",fontWeight:"600",color:e?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},detailsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"24px"},detailItem:de=>({display:"flex",alignItems:"center",gap:"16px",padding:"20px",borderRadius:"16px",backgroundColor:e?"rgba(30,41,59,0.5)":"rgba(248,250,252,0.8)",border:e?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",transition:"all 0.3s ease",transform:de?"translateX(4px)":"translateX(0)",boxShadow:de?"0 4px 12px rgba(59,130,246,0.1)":"none"}),detailIcon:{padding:"14px",borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"48px",minHeight:"48px"},detailContent:{flex:1},detailLabel:{fontSize:"12px",fontWeight:"600",color:e?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"6px"},detailValue:{fontSize:"16px",fontWeight:"600",color:e?"#e2e8f0":"#1e293b"},sectionTitle:{fontSize:"20px",fontWeight:"700",color:e?"#e2e8f0":"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px"},editButton:de=>({padding:"10px 20px",borderRadius:"10px",border:"none",backgroundColor:de?"#ef4444":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",position:"absolute",top:"28px",right:"28px"}),loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",fontSize:"18px",color:e?"#e2e8f0":"#64748b"},errorContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"60vh",gap:"16px"},errorText:{fontSize:"18px",color:"#ef4444",textAlign:"center"},retryButton:{padding:"12px 24px",borderRadius:"8px",border:"none",backgroundColor:"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"}};return y?n.jsx("div",{style:G.page,children:n.jsx("div",{style:G.loadingContainer,children:n.jsx("div",{className:"pulse",children:"Loading profile..."})})}):H?n.jsx("div",{style:G.page,children:n.jsxs("div",{style:G.errorContainer,children:[n.jsxs("div",{style:G.errorText,children:["Failed to load profile: ",H]}),n.jsx("button",{style:G.retryButton,onClick:()=>window.location.reload(),children:"Retry"})]})}):f?n.jsx("div",{style:G.page,children:n.jsxs("div",{style:G.container,children:[n.jsxs("div",{style:G.header,children:[n.jsxs("div",{style:G.headerLeft,children:[n.jsx("button",{style:G.backButton(r==="back"),onClick:()=>window.history.back(),onMouseEnter:()=>a("back"),onMouseLeave:()=>a(null),className:"floating",children:n.jsx(wi,{size:20})}),n.jsx("h1",{style:G.title,children:"My Profile"})]}),n.jsxs("div",{style:G.headerRight,children:[n.jsxs("button",{style:G.topButton(r==="alerts"),onMouseEnter:()=>a("alerts"),onMouseLeave:()=>a(null),onClick:()=>{window.location.href="/adminalerts"},children:[n.jsx(Wn,{size:20}),n.jsx("div",{style:G.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:{...G.topButton(!0),backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6"},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:n.jsx(Nt,{size:20})}),p&&f&&n.jsxs("div",{style:G.profileTooltip,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[n.jsx("div",{style:G.tooltipArrow}),n.jsxs("div",{style:G.userInfo,children:[n.jsxs("div",{style:G.userAvatar,children:[(se=f.firstName)==null?void 0:se[0],(pe=f.lastName)==null?void 0:pe[0]]}),n.jsxs("div",{style:G.userDetails,children:[n.jsxs("div",{style:G.userName,children:[f.firstName," ",f.lastName]}),n.jsxs("div",{style:G.userRole,children:[f.role==="admin"?"Admin":"Member","  ",f.department]})]})]}),n.jsxs("div",{style:G.userStats,children:[n.jsxs("div",{style:G.tooltipStatItem,children:[n.jsx("div",{style:G.tooltipStatNumber,children:te.reduce((de,Ue)=>de+parseFloat(Ue.Hours||0),0).toFixed(1)}),n.jsx("div",{style:G.tooltipStatLabel,children:"Hours"})]}),n.jsxs("div",{style:G.tooltipStatItem,children:[n.jsx("div",{style:G.tooltipStatNumber,children:te.filter(de=>de.Category==="Project").length}),n.jsx("div",{style:G.tooltipStatLabel,children:"Projects"})]}),n.jsxs("div",{style:G.tooltipStatItem,children:[n.jsxs("div",{style:G.tooltipStatNumber,children:[M.capacityUtilization,"%"]}),n.jsx("div",{style:G.tooltipStatLabel,children:"Capacity"})]})]}),n.jsx("button",{style:G.themeToggle,onClick:le,children:e?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsxs("div",{style:G.card(A==="main"),onMouseEnter:()=>c("main"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:G.cardGlow}),n.jsx("div",{style:G.floatingIcon(),children:n.jsx(Nt,{})}),n.jsxs("div",{style:G.profileHeader,children:[n.jsxs("div",{style:G.largeAvatar,className:"floating",children:[n.jsx("div",{style:G.avatarRing}),(Me=f.firstName)==null?void 0:Me[0],(be=f.lastName)==null?void 0:be[0]]}),n.jsxs("div",{style:G.profileInfo,children:[n.jsxs("div",{style:G.profileName,children:[f.firstName," ",f.lastName]}),n.jsxs("div",{style:G.profileEmail,children:[n.jsx(hc,{size:16}),f.email]}),n.jsxs("div",{style:G.roleChip,children:[n.jsx(yi,{size:16}),f.role==="admin"?"Administrator":"Member"]})]})]}),n.jsxs("div",{style:G.statsGrid,children:[n.jsxs("div",{style:G.statBox(A==="stat-1"),onMouseEnter:()=>c("stat-1"),onMouseLeave:()=>c(null),children:[n.jsx("div",{className:"shimmer",style:{position:"absolute",inset:0,opacity:A==="stat-1"?1:0}}),n.jsx("div",{style:G.statIcon,children:n.jsx(Xi,{size:24})}),n.jsxs("div",{style:G.statValue,children:[M.weeklyHours,"h"]}),n.jsx("div",{style:G.statLabel,children:"Hours This Week"})]}),n.jsxs("div",{style:G.statBox(A==="stat-2"),onMouseEnter:()=>c("stat-2"),onMouseLeave:()=>c(null),children:[n.jsx("div",{className:"shimmer",style:{position:"absolute",inset:0,opacity:A==="stat-2"?1:0}}),n.jsx("div",{style:G.statIcon,children:n.jsx(Vs,{size:24})}),n.jsx("div",{style:G.statValue,children:M.projectHours>0?Math.ceil(M.projectHours/40):0}),n.jsx("div",{style:G.statLabel,children:"Active Projects"})]}),n.jsxs("div",{style:G.statBox(A==="stat-3"),onMouseEnter:()=>c("stat-3"),onMouseLeave:()=>c(null),children:[n.jsx("div",{className:"shimmer",style:{position:"absolute",inset:0,opacity:A==="stat-3"?1:0}}),n.jsx("div",{style:G.statIcon,children:n.jsx(vA,{size:24})}),n.jsxs("div",{style:G.statValue,children:[M.capacityUtilization,"%"]}),n.jsx("div",{style:G.statLabel,children:"Capacity Usage"})]})]})]}),n.jsxs("div",{style:G.card(A==="info"),onMouseEnter:()=>c("info"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:G.cardGlow}),n.jsx("div",{style:G.floatingIcon("#10b981"),children:n.jsx(Gi,{})}),n.jsxs("div",{style:G.sectionTitle,children:[n.jsx(Gi,{size:24}),"Personal Information"]}),n.jsxs("div",{style:G.detailsGrid,children:[n.jsxs("div",{style:G.detailItem(A==="detail-1"),onMouseEnter:()=>c("detail-1"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:G.detailIcon,children:n.jsx(Gi,{size:20})}),n.jsxs("div",{style:G.detailContent,children:[n.jsx("div",{style:G.detailLabel,children:"Department"}),n.jsx("div",{style:G.detailValue,children:f.department||"Not specified"})]})]}),n.jsxs("div",{style:G.detailItem(A==="detail-2"),onMouseEnter:()=>c("detail-2"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:G.detailIcon,children:n.jsx(Nt,{size:20})}),n.jsxs("div",{style:G.detailContent,children:[n.jsx("div",{style:G.detailLabel,children:"Team"}),n.jsx("div",{style:G.detailValue,children:f.team||"Not specified"})]})]}),n.jsxs("div",{style:G.detailItem(A==="detail-3"),onMouseEnter:()=>c("detail-3"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:G.detailIcon,children:n.jsx(Hy,{size:20})}),n.jsxs("div",{style:G.detailContent,children:[n.jsx("div",{style:G.detailLabel,children:"Phone Number"}),n.jsx("div",{style:G.detailValue,children:f.phoneNumber||"Not specified"})]})]}),n.jsxs("div",{style:G.detailItem(A==="detail-4"),onMouseEnter:()=>c("detail-4"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:G.detailIcon,children:n.jsx(To,{size:20})}),n.jsxs("div",{style:G.detailContent,children:[n.jsx("div",{style:G.detailLabel,children:"Date Joined"}),n.jsx("div",{style:G.detailValue,children:Ae(f.dateJoined)})]})]}),n.jsxs("div",{style:G.detailItem(A==="detail-5"),onMouseEnter:()=>c("detail-5"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:G.detailIcon,children:n.jsx(Vs,{size:20})}),n.jsxs("div",{style:G.detailContent,children:[n.jsx("div",{style:G.detailLabel,children:"Current Project"}),n.jsx("div",{style:G.detailValue,children:f.project||"Not specified"})]})]}),n.jsxs("div",{style:G.detailItem(A==="detail-6"),onMouseEnter:()=>c("detail-6"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:G.detailIcon,children:n.jsx(Py,{size:20})}),n.jsxs("div",{style:G.detailContent,children:[n.jsx("div",{style:G.detailLabel,children:"Location"}),n.jsx("div",{style:G.detailValue,children:"Singapore"})]})]})]})]})]})}):null};function oQ(){const{instance:i,accounts:e}=Vv(),t=m.useRef(!1),[r,a]=m.useState("checking"),[A,c]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}});m.useEffect(()=>{if(t.current){console.log(" Already processed");return}console.log(" AuthRedirect mounted"),console.log(" Current URL:",window.location.href),console.log(" Has hash:",window.location.hash?"YES":"NO"),console.log(" Hash value:",window.location.hash),console.log(" Accounts:",(e==null?void 0:e.length)||0),(async()=>{try{if(a("processing"),console.log(" Calling handleRedirectPromise()..."),t.current)return;t.current=!0;const H=await i.handleRedirectPromise();if(H){console.log(" Got response from Microsoft!"),console.log(" Email:",H.account.username),console.log(" Access token:",H.accessToken?"YES":"NO"),await p(H.account,H.accessToken);return}if(e&&e.length>0){console.log(" Using cached account");const S=e[0];i.setActiveAccount(S);try{const L=await i.acquireTokenSilent({scopes:["openid","profile","email","User.Read"],account:S});console.log(" Token acquired from cache"),await p(S,L.accessToken);return}catch(L){console.error(" Token acquisition error:",L),console.log(" Redirecting to Microsoft for fresh login..."),await i.loginRedirect({scopes:["openid","profile","email","User.Read"]});return}}console.warn(" No response and no accounts - redirecting to login"),setTimeout(()=>{window.location.href="/"},2e3)}catch(H){console.error(" Error in handleAuth:",H),setTimeout(()=>{window.location.href="/"},2e3)}})()},[i,e]);const p=async(b,H)=>{try{a("authenticating"),console.log(" Sending to backend..."),console.log(" User:",b.username);const S=await Fe("/login/microsoft",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`}});if(console.log(" Backend response:",S.status),!S.ok){const D=await S.text();console.error(" Backend error:",D),alert(`Backend login failed: ${S.status}`),window.location.href="/";return}const L=await S.json();console.log(" Backend login successful!"),console.log(" User role:",L.role),a("verifying"),console.log(" Waiting 1.5s for cookie to be set...");let Q=!1;for(let D=0;D<3;D++){if((await Fe("/user/profile",{credentials:"include"})).ok){Q=!0;break}await new Promise(J=>setTimeout(J,500))}if(!Q)throw new Error("Cookie not ready");console.log(" Testing authentication...");const V=await Fe("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});console.log(" Authentication verified!"),a("redirecting"),window.location.replace("/admindashboard")}catch(S){if(S.name==="AbortError"){console.warn(" Fetch aborted due to redirect");return}console.error(" Error in processLogin:",S),alert("Login failed. Please try again.")}},u=()=>r==="redirecting"?n.jsx("span",{style:{lineHeight:0,display:"block"},children:n.jsx(Kr,{size:64,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"success-icon"})}):n.jsx("span",{style:{lineHeight:0,display:"block"},children:n.jsx(b2,{size:64,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"floating-icon"})}),f=()=>{switch(r){case"checking":return"Authenticating...";case"processing":return"Processing...";case"authenticating":return"Securing Session...";case"verifying":return"Verifying...";case"redirecting":return"Success!";default:return"Loading..."}},g=()=>{switch(r){case"redirecting":return"Redirecting to your dashboard";default:return"Please wait while we log you in"}},y={page:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:A?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',position:"relative",overflow:"hidden",transition:"all 0.3s ease"},backgroundOrbs:{position:"absolute",width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"},orb:(b,H,S,L)=>({position:"absolute",top:b,left:H,width:S,height:S,borderRadius:"50%",background:A?"radial-gradient(circle, rgba(59,130,246,0.15) 0%, transparent 70%)":"radial-gradient(circle, rgba(59,130,246,0.1) 0%, transparent 70%)",animation:`float ${6+L}s ease-in-out infinite`,animationDelay:`${L}s`,filter:"blur(40px)"}),container:{position:"relative",zIndex:10,textAlign:"center",maxWidth:"600px",padding:"0 20px"},card:{paddingTop:"100px"},cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.05) 0%, transparent 70%)",pointerEvents:"none"},iconContainer:{display:"flex",justifyContent:"center",marginBottom:"-40px",position:"relative",zIndex:20},iconWrapper:{width:"160px",height:"160px",borderRadius:"50%",background:A?"linear-gradient(135deg, rgba(59,130,246,0.2) 0%, rgba(37,99,235,0.2) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.15) 0%, rgba(37,99,235,0.15) 100%)",display:"flex",justifyContent:"center",alignItems:"center",color:"#3b82f6",border:A?"3px solid rgba(59,130,246,0.3)":"3px solid rgba(59,130,246,0.2)",position:"relative",overflow:"hidden",animation:"glow 2s ease-in-out infinite",isolation:"isolate"},iconGlow:{position:"absolute",inset:"-30px",borderRadius:"50%",background:A?"radial-gradient(circle, rgba(59,130,246,0.45), transparent 70%)":"radial-gradient(circle, rgba(59,130,246,0.35), transparent 70%)",filter:"blur(30px)",zIndex:0,pointerEvents:"none"},iconRing:{position:"absolute",inset:"-8px",borderRadius:"50%",border:"2px solid rgba(59,130,246,0.2)",animation:"pulse-ring 2s ease-in-out infinite"},title:{fontSize:"36px",fontWeight:"700",color:A?"#f1f5f9":"#1e293b",marginBottom:"16px",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},subtitle:{fontSize:"20px",fontWeight:"600",color:"#3b82f6",marginBottom:"12px"},description:{fontSize:"15px",color:A?"#94a3b8":"#64748b",marginBottom:"50px",lineHeight:"1.6"},loadingDots:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"40px"},dot:b=>({width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#3b82f6",animation:`bounce 1.4s ease-in-out ${b}s infinite`,boxShadow:"0 4px 12px rgba(59,130,246,0.4)"}),consoleNote:{fontSize:"12px",color:A?"#64748b":"#94a3b8",fontStyle:"italic"}};return n.jsxs("div",{style:y.page,children:[n.jsxs("div",{style:y.backgroundOrbs,children:[n.jsx("div",{style:y.orb("10%","10%","400px",0)}),n.jsx("div",{style:y.orb("60%","70%","350px",1)}),n.jsx("div",{style:y.orb("30%","80%","300px",2)})]}),n.jsxs("div",{style:y.container,children:[n.jsx("div",{style:y.iconContainer,children:n.jsxs("div",{style:y.iconWrapper,className:"floating",children:[n.jsx("div",{style:y.iconGlow}),n.jsx("div",{style:y.iconRing}),u()]})}),n.jsxs("div",{style:y.card,children:[n.jsx("div",{style:y.cardGlow}),n.jsx("div",{style:y.title,children:"Processing Microsoft Login"}),n.jsx("div",{style:y.subtitle,children:f()}),n.jsx("div",{style:y.description,children:g()}),n.jsxs("div",{style:y.loadingDots,children:[n.jsx("div",{style:y.dot(0)}),n.jsx("div",{style:y.dot(.2)}),n.jsx("div",{style:y.dot(.4)})]}),n.jsx("div",{style:y.consoleNote,children:"Press F12 to view detailed authentication logs"})]})]}),n.jsx("style",{children:`
        @keyframes float {
          0%, 100% {
            transform: translateY(0px) translateX(0px) rotate(0deg);
          }
          33% {
            transform: translateY(-20px) translateX(10px) rotate(5deg);
          }
          66% {
            transform: translateY(10px) translateX(-10px) rotate(-5deg);
          }
        }
        
        @keyframes pulse-ring {
          0%, 100% {
            opacity: 0.3;
            transform: scale(1);
          }
          50% {
            opacity: 0.6;
            transform: scale(1.15);
          }
        }
        
        @keyframes scale-up {
          0% {
            transform: scale(0.5);
            opacity: 0;
          }
          50% {
            transform: scale(1.1);
          }
          100% {
            transform: scale(1);
            opacity: 1;
          }
        }
        
        @keyframes bounce {
          0%, 100% {
            transform: translateY(0px);
          }
          50% {
            transform: translateY(-20px);
          }
        }
        
        @keyframes glow {
          0%, 100% {
            box-shadow: 0 15px 40px rgba(59,130,246,0.4);
          }
          50% {
            box-shadow: 0 15px 60px rgba(59,130,246,0.7);
          }
        }
        
        .floating {
          animation: float 4s ease-in-out infinite;
        }
        
        .floating-icon {
          animation: float 3s ease-in-out infinite, glow 2s ease-in-out infinite;
        }
        
        .success-icon {
          animation: scale-up 0.6s ease-out;
          color: #10b981 !important;
        }
        
        * {
          transition: background-color 0.3s ease, background 0.3s ease;
        }

        .floating-icon svg,
.success-icon svg,
.floating-icon,
.success-icon {
  background: none !important;
  background-color: transparent !important;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

/* Target the SVG elements directly */
svg {
  background: transparent !important;
  border: none !important;
}

/* Remove any rect elements that might be creating the square */
svg rect {
  display: none !important;
}

.floating-icon,
.success-icon {
  line-height: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  z-index: 10;
}
      `})]})}const iQ=()=>{const i=["muhammad.hasan@ihrp.sg","jumana.haseen@ihrp.sg"],[e,t]=m.useState(null),[r,a]=m.useState(!0),[A,c]=m.useState(null),[p,u]=m.useState(null),[f,g]=m.useState("contexts"),[y,b]=m.useState([]),[H,S]=m.useState(!1),[L,Q]=m.useState(!1),[V,D]=m.useState(null),[te,J]=m.useState({}),[M,N]=m.useState({subscriptionName:"",workspaceId:"",clientId:"",clientSecret:"",baseUrl:"https://cloud.manictime.com"}),[X,Be]=m.useState(!1),[Ae,le]=m.useState(null),[G,se]=m.useState(null),[pe,Me]=m.useState(null),[be,de]=m.useState(!1),[Ue,me]=m.useState(null),[F,re]=m.useState("website"),[P,oe]=m.useState({aiContext:!0,websites:!0}),[je,U]=m.useState({domainId:"",name:"",purpose:"",aiContext:"",projectType:"Project"}),[B,j]=m.useState(!1),[_,ve]=m.useState([{value:"",description:""}]),[k,O]=m.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!0}});m.useEffect(()=>{ke(),Z(),at()},[]),m.useEffect(()=>{j(!1),ve([{value:"",description:""}])},[Ae==null?void 0:Ae.id]);const Z=async()=>{try{const v=await Fe("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(v.ok){const he=await v.json();u(he)}}catch(v){console.error("Failed to fetch user data:",v)}},ke=async()=>{try{const v=await Fe("/api/ai/admin/structure",{credentials:"include"});if(!v.ok)throw new Error("Failed to load admin AI structure");const he=await v.json();t(he.domains||[])}catch(v){c(v.message)}finally{a(!1)}},at=async()=>{S(!0);try{const v=await Fe("/api/manictime-admin/subscriptions",{credentials:"include"});if(v.ok){const he=await v.json();b(he)}}catch(v){console.error("Failed to fetch subscriptions:",v)}finally{S(!1)}},T=async()=>{if(!je.domainId){alert("Please select a department");return}if(!je.name.trim()){alert("Please enter a context name");return}try{await Fe("/api/ai/contexts",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(je)}),Be(!1),U({domainId:"",name:"",purpose:"",aiContext:"",projectType:"Project"}),ke()}catch(v){console.error("Failed to create context:",v),alert("Failed to create context. Please try again.")}},ge=()=>{ve([..._,{value:"",description:""}])},He=(v,he,Ke)=>{const nt=[..._];nt[v][he]=Ke,ve(nt)},ze=async()=>{if(!Ae)return;const v=(Ae.resources||[]).map(Ke=>Ke.value),he=_.filter(Ke=>Ke.value.trim()&&!v.includes(Ke.value.trim()));if(he.length===0){alert("Add at least one resource");return}try{for(const Ke of he)await Fe("/api/ai/context-resources",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({contextId:Ae.id,resourceType:F,identifier:Ke.value,description:Ke.description})});ve([{value:"",description:""}]),j(!1),re("website"),ke()}catch(Ke){console.error("Failed to save resources:",Ke),alert("Failed to save resources. Please try again.")}},mt=()=>{const v=!k;O(v),de(!1);try{localStorage.setItem("darkMode",v)}catch(he){console.error("Failed to save theme preference:",he)}},tt=v=>{oe(he=>({...he,[v]:!he[v]}))},Se=async()=>{if(!M.subscriptionName||!M.workspaceId||!M.clientId||!M.clientSecret){alert("Please fill in all required fields");return}try{(await Fe("/api/manictime-admin/subscriptions",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).ok&&(Q(!1),N({subscriptionName:"",workspaceId:"",clientId:"",clientSecret:"",baseUrl:"https://cloud.manictime.com"}),at())}catch(v){console.error("Failed to create subscription:",v),alert("Failed to create subscription")}},ie=async()=>{if(V)try{(await Fe(`/api/manictime-admin/subscriptions/${V.Id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})).ok&&(D(null),at())}catch(v){console.error("Failed to update subscription:",v),alert("Failed to update subscription")}},dt=async v=>{if(confirm("Are you sure? This will affect all users using this subscription."))try{(await Fe(`/api/manictime-admin/subscriptions/${v}`,{method:"DELETE",credentials:"include"})).ok&&at()}catch(he){console.error("Failed to delete subscription:",he),alert("Failed to delete subscription")}},ht=v=>{J(he=>({...he,[v]:!he[v]})),te[v]||setTimeout(()=>{J(he=>({...he,[v]:!1}))},1e4)},R={page:{minHeight:"100vh",padding:"32px",background:k?"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #f1f5f9 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease",position:"relative",overflow:"hidden"},pageGlow:{position:"fixed",top:0,left:0,right:0,bottom:0,background:k?"radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.08) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.08) 0%, transparent 50%)":"radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.03) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.03) 0%, transparent 50%)",pointerEvents:"none",zIndex:0},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"32px",position:"relative",zIndex:10},header:{fontSize:"28px",fontWeight:"700",background:k?"linear-gradient(135deg, #a78bfa 0%, #6366f1 100%)":"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",display:"flex",alignItems:"center",gap:"12px"},headerIcon:{animation:"pulse 2s ease-in-out infinite",filter:"drop-shadow(0 0 8px rgba(139, 92, 246, 0.6))"},subtitle:{fontSize:"14px",color:k?"#94a3b8":"#64748b",marginTop:"8px",fontWeight:"500",letterSpacing:"0.5px"},headerRight:{display:"flex",alignItems:"center",gap:"16px",position:"relative"},addButton:v=>({padding:"12px 24px",borderRadius:"12px",border:"none",background:v?"linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%)":"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",color:"#fff",cursor:"pointer",transition:"all 0.3s ease",boxShadow:v?"0 8px 25px rgba(139,92,246,0.3)":"0 4px 12px rgba(139,92,246,0.2)",transform:v?"translateY(-2px) scale(1.05)":"translateY(0)",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"}),profileButton:v=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:v?"rgba(139,92,246,0.15)":k?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:v?"#8b5cf6":k?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s ease",boxShadow:v?"0 8px 25px rgba(139,92,246,0.2)":"0 4px 12px rgba(0,0,0,0.08)",transform:v?"translateY(-2px) scale(1.05)":"translateY(0)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),profileTooltip:{position:"fixed",top:"80px",right:"32px",backgroundColor:k?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:k?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:999999,pointerEvents:"auto",animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:k?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:k?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px",boxShadow:"0 4px 12px rgba(139,92,246,0.3)"},userName:{fontSize:"14px",fontWeight:"600",color:k?"#e2e8f0":"#1e293b",marginBottom:"2px"},userRole:{fontSize:"12px",color:k?"#94a3b8":"#64748b"},userStats:{borderTop:k?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b"},tooltipStatLabel:{fontSize:"10px",color:k?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(139,92,246,0.1)",color:"#8b5cf6",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px",width:"100%",transition:"all 0.2s ease"},contentContainer:{display:"grid",gridTemplateColumns:"320px 1fr",gap:"28px",position:"relative",zIndex:10},panel:v=>({background:k?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.7)",backdropFilter:"blur(20px)",borderRadius:"20px",padding:"28px",border:k?"1px solid rgba(139,92,246,0.2)":"1px solid rgba(139,92,246,0.1)",boxShadow:v?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(139,92,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:v?"translateY(-4px)":"translateY(0)",position:"relative",overflow:"visible"}),panelGlow:{position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, transparent, rgba(139,92,246,0.5), transparent)",opacity:.5},panelTitle:{display:"flex",alignItems:"center",gap:"10px",fontSize:"18px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b",marginBottom:"20px",paddingBottom:"16px",borderBottom:k?"2px solid rgba(139,92,246,0.2)":"2px solid rgba(139,92,246,0.1)"},typeHeader:{fontSize:"13px",fontWeight:"700",color:k?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"1px",marginTop:"16px",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},contextCard:(v,he)=>({background:v?k?"rgba(139,92,246,0.15)":"rgba(139,92,246,0.08)":he?k?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)":"transparent",borderRadius:"12px",padding:"16px",marginBottom:"10px",border:v?k?"1px solid rgba(139,92,246,0.4)":"1px solid rgba(139,92,246,0.3)":k?"1px solid rgba(51,65,85,0.3)":"1px solid rgba(226,232,240,0.5)",cursor:"pointer",transition:"all 0.3s ease",transform:he?"translateX(4px)":"translateX(0)",boxShadow:v?"0 4px 12px rgba(139,92,246,0.2)":"none"}),contextTitle:{fontWeight:"600",fontSize:"14px",color:k?"#e2e8f0":"#1e293b",marginBottom:"4px",display:"flex",alignItems:"center",gap:"6px"},contextSubtitle:{fontSize:"11px",color:k?"#94a3b8":"#64748b",display:"flex",alignItems:"center",gap:"4px",marginTop:"4px"},muted:{fontSize:"12px",color:k?"#94a3b8":"#64748b",lineHeight:"1.4"},sectionHeader:(v,he)=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",marginTop:"16px",marginBottom:"12px",background:he?k?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)":k?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.5)",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",border:k?"1px solid rgba(139,92,246,0.2)":"1px solid rgba(139,92,246,0.1)"}),sectionTitle:{fontSize:"16px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b",display:"flex",alignItems:"center",gap:"8px"},sectionContent:v=>({maxHeight:v?"2000px":"0",overflow:"hidden",transition:"max-height 0.3s ease",paddingTop:v?"8px":"0"}),button:(v,he="primary")=>({marginTop:"12px",padding:"12px 20px",...{primary:{background:v?"linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%)":"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",color:"#fff"},secondary:{background:v?k?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.15)":k?"rgba(51,65,85,0.6)":"rgba(248,250,252,0.7)",color:k?"#e2e8f0":"#1e293b"}}[he],border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",transition:"all 0.3s ease",transform:v?"translateY(-2px)":"translateY(0)",boxShadow:v?"0 8px 20px rgba(139,92,246,0.3)":"0 4px 12px rgba(139,92,246,0.2)",width:"100%"}),input:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:k?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",background:k?"rgba(30,41,59,0.5)":"rgba(255,255,255,0.8)",color:k?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",transition:"all 0.2s ease",marginBottom:"12px",fontFamily:'"Montserrat", sans-serif'},select:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:k?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",background:k?"rgba(30,41,59,0.5)":"rgba(255,255,255,0.8)",color:k?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",transition:"all 0.2s ease",marginBottom:"12px",fontFamily:'"Montserrat", sans-serif',cursor:"pointer"},textarea:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:k?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",background:k?"rgba(30,41,59,0.5)":"rgba(255,255,255,0.8)",color:k?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",transition:"all 0.2s ease",marginBottom:"12px",fontFamily:'"Montserrat", sans-serif',resize:"vertical",minHeight:"80px"},tag:v=>({background:k?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.1)",padding:"8px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",color:"#8b5cf6",marginRight:"8px",marginBottom:"8px",display:"inline-flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",transform:v?"scale(1.05)":"scale(1)",border:k?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)"}),deleteButton:v=>({background:"transparent",border:"none",color:v?"#dc2626":"#ef4444",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease",display:"flex",alignItems:"center",transform:v?"scale(1.1)":"scale(1)"}),websiteInput:{display:"flex",gap:"8px",marginBottom:"8px",alignItems:"center"},websiteAddButton:v=>({padding:"12px",background:v?k?"rgba(139,92,246,0.3)":"rgba(139,92,246,0.2)":k?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.1)",border:"none",borderRadius:"8px",color:"#8b5cf6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",transform:v?"scale(1.05)":"scale(1)"}),modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,animation:"fadeIn 0.2s ease"},modalContent:{background:k?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"20px",padding:"32px",maxWidth:"500px",width:"90%",border:k?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",animation:"slideUp 0.3s ease",position:"relative"},modalTitle:{fontSize:"24px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px"},modalClose:v=>({position:"absolute",top:"20px",right:"20px",background:"transparent",border:"none",color:v?"#ef4444":k?"#94a3b8":"#64748b",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),label:{fontSize:"12px",fontWeight:"600",color:k?"#94a3b8":"#64748b",marginBottom:"6px",display:"block"},emptyState:{textAlign:"center",padding:"40px 20px",color:k?"#94a3b8":"#64748b"},loadingState:{textAlign:"center",padding:"60px 20px",color:k?"#94a3b8":"#64748b",fontSize:"16px"},tabSwitcher:{display:"flex",gap:"8px",padding:"4px",background:k?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.6)",borderRadius:"12px",backdropFilter:"blur(10px)",border:k?"1px solid rgba(139,92,246,0.2)":"1px solid rgba(139,92,246,0.1)"},tab:(v,he)=>({padding:"10px 20px",borderRadius:"8px",border:"none",background:v?"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)":he?k?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.1)":"transparent",color:v?"#fff":k?"#e2e8f0":"#1e293b",cursor:"pointer",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",transform:he?"scale(1.05)":"scale(1)"})};if(typeof document<"u"&&!document.getElementById("secret-animations")){const v=document.createElement("style");v.id="secret-animations",v.innerHTML=`
            @keyframes pulse {
                0%, 100% { opacity: 1; transform: scale(1); }
                50% { opacity: 0.8; transform: scale(1.05); }
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            @keyframes slideUp {
                from { 
                    opacity: 0; 
                    transform: translateY(20px);
                }
                to { 
                    opacity: 1; 
                    transform: translateY(0);
                }
            }
            .input-focus:focus, select:focus {
                border-color: ${k?"rgba(139,92,246,0.6)":"rgba(139,92,246,0.4)"} !important;
                box-shadow: 0 0 0 3px rgba(139,92,246,0.1) !important;
            }
        `,document.head.appendChild(v)}if(r)return n.jsxs("div",{style:R.page,children:[n.jsx("div",{style:R.pageGlow}),n.jsxs("div",{style:R.loadingState,children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600"},children:"Accessing Secret Departments..."})]})]});if(!(p&&i.includes(p.email)))return n.jsxs("div",{style:R.page,children:[n.jsx("div",{style:R.pageGlow}),n.jsxs("div",{style:R.emptyState,children:[n.jsx("div",{style:{fontSize:"64px",marginBottom:"24px"},children:""}),n.jsx("div",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"12px",color:k?"#e2e8f0":"#1e293b"},children:"Private Access Only"}),n.jsxs("p",{style:{...R.muted,maxWidth:"400px",margin:"0 auto"},children:["This department is restricted to authorized personnel only. Your email (",n.jsx("strong",{children:(p==null?void 0:p.email)||"Unknown"}),") does not have permission to view this page."]}),n.jsx("button",{onClick:()=>window.location.href="/admindashboard",style:{...R.button(G==="back"),width:"auto",marginTop:"24px",padding:"12px 32px"},onMouseEnter:()=>se("back"),onMouseLeave:()=>se(null),children:"Return to Dashboard"})]})]});if(A)return n.jsxs("div",{style:R.page,children:[n.jsx("div",{style:R.pageGlow}),n.jsxs("div",{style:R.emptyState,children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Access Denied"}),n.jsxs("div",{children:["Error: ",A]})]})]});const Tt={};e==null||e.forEach(v=>{var he;Tt[v.name]||(Tt[v.name]={id:v.id,name:v.name,projects:[],operations:[]}),(he=v.contexts)==null||he.forEach(Ke=>{const nt={...Ke,domainName:v.name,domainId:v.id};Ke.projectType==="Operations"?Tt[v.name].operations.push(nt):Tt[v.name].projects.push(nt)})});const I=(e==null?void 0:e.reduce((v,he)=>{var Ke;return v+(((Ke=he.contexts)==null?void 0:Ke.length)||0)},0))||0;return n.jsxs("div",{style:R.page,children:[n.jsx("div",{style:R.pageGlow}),n.jsxs("div",{style:R.headerRow,children:[n.jsxs("div",{children:[n.jsxs("h1",{style:R.header,children:[n.jsx("span",{style:R.headerIcon,children:""}),f==="contexts"?"Contextual Resources":"ManicTime Subscriptions"]}),n.jsxs("div",{style:R.subtitle,children:[n.jsx(zr,{size:14,style:{display:"inline",marginRight:"6px"}}),f==="contexts"?"AI Context Management System":"Workspace Credential Management"]})]}),n.jsxs("div",{style:R.tabSwitcher,children:[n.jsxs("button",{style:R.tab(f==="contexts",G==="tab-contexts"),onMouseEnter:()=>se("tab-contexts"),onMouseLeave:()=>se(null),onClick:()=>g("contexts"),children:[n.jsx(Rm,{size:16}),"Contexts"]}),n.jsxs("button",{style:R.tab(f==="subscriptions",G==="tab-subs"),onMouseEnter:()=>se("tab-subs"),onMouseLeave:()=>se(null),onClick:()=>g("subscriptions"),children:[n.jsx(Bo,{size:16}),"ManicTime"]})]}),n.jsxs("div",{style:R.headerRight,children:[f==="contexts"?n.jsxs("button",{style:R.addButton(G==="add-context"),onMouseEnter:()=>se("add-context"),onMouseLeave:()=>se(null),onClick:()=>Be(!0),children:[n.jsx(In,{size:18}),"New Context"]}):n.jsxs("button",{style:R.addButton(G==="add-subscription"),onMouseEnter:()=>se("add-subscription"),onMouseLeave:()=>se(null),onClick:()=>Q(!0),children:[n.jsx(In,{size:18}),"New Subscription"]}),n.jsx("div",{style:{position:"relative",zIndex:1e5},children:n.jsx("button",{style:R.profileButton(pe==="profile"),onMouseEnter:v=>{Me("profile");const he=v.currentTarget.getBoundingClientRect();me({top:he.bottom+12,right:window.innerWidth-he.right}),de(!0)},onMouseLeave:()=>Me(null),children:n.jsx(Nt,{size:20})})})]})]}),f==="contexts"?n.jsxs("div",{style:R.contentContainer,children:[n.jsxs("div",{style:R.panel(pe==="left"),onMouseEnter:()=>Me("left"),onMouseLeave:()=>Me(null),children:[n.jsx("div",{style:R.panelGlow}),n.jsxs("h3",{style:R.panelTitle,children:[n.jsx(Rm,{size:20}),"All Contexts (",I,")"]}),I===0&&n.jsxs("div",{style:R.emptyState,children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),n.jsx("p",{style:R.muted,children:"No contexts created yet"}),n.jsx("p",{style:{...R.muted,marginTop:"8px"},children:'Click "New Context" to get started'})]}),Object.values(Tt).map(v=>n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("div",{style:{fontSize:"14px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(yi,{size:16,style:{color:"#8b5cf6"}}),v.name]}),v.projects.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:R.typeHeader,children:[n.jsx(Vs,{size:12}),"Projects"]}),v.projects.map(he=>n.jsxs("div",{style:R.contextCard((Ae==null?void 0:Ae.id)===he.id,G===`ctx-${he.id}`),onClick:()=>le(he),onMouseEnter:()=>se(`ctx-${he.id}`),onMouseLeave:()=>se(null),children:[n.jsxs("div",{style:R.contextTitle,children:[n.jsx(Bo,{size:14}),he.name]}),n.jsx("div",{style:R.muted,children:he.purpose})]},`ctx-${he.id}`))]}),v.operations.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:R.typeHeader,children:[n.jsx(Qm,{size:12}),"Operations"]}),v.operations.map(he=>n.jsxs("div",{style:R.contextCard((Ae==null?void 0:Ae.id)===he.id,G===`ctx-${he.id}`),onClick:()=>le(he),onMouseEnter:()=>se(`ctx-${he.id}`),onMouseLeave:()=>se(null),children:[n.jsxs("div",{style:R.contextTitle,children:[n.jsx(Bo,{size:14}),he.name]}),n.jsx("div",{style:R.muted,children:he.purpose})]},`ctx-${he.id}`))]})]},`domain-${v.id}`))]}),n.jsxs("div",{style:R.panel(pe==="right"),onMouseEnter:()=>Me("right"),onMouseLeave:()=>Me(null),children:[n.jsx("div",{style:R.panelGlow}),!Ae&&n.jsxs("div",{style:R.emptyState,children:[n.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Select a context to view details"}),n.jsx("p",{style:R.muted,children:"Choose a project context from the left panel to manage its settings"})]}),Ae&&n.jsxs(n.Fragment,{children:[n.jsxs("h2",{style:{fontSize:"24px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b",marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(zr,{size:24,style:{color:"#8b5cf6"}}),Ae.name]}),n.jsx("p",{style:{...R.muted,marginBottom:"8px"},children:Ae.purpose}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",backgroundColor:k?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.1)",border:k?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",fontSize:"11px",fontWeight:"600",color:"#8b5cf6"},children:[n.jsx(yi,{size:10}),Ae.domainName]}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",backgroundColor:Ae.projectType==="Operations"?k?"rgba(245,158,11,0.2)":"rgba(245,158,11,0.1)":k?"rgba(16,185,129,0.2)":"rgba(16,185,129,0.1)",border:Ae.projectType==="Operations"?"1px solid rgba(245,158,11,0.3)":"1px solid rgba(16,185,129,0.3)",fontSize:"11px",fontWeight:"600",color:Ae.projectType==="Operations"?"#f59e0b":"#10b981"},children:[Ae.projectType==="Operations"?n.jsx(Qm,{size:10}):n.jsx(Vs,{size:10}),Ae.projectType||"Project"]})]}),n.jsxs("div",{style:R.sectionHeader(P.aiContext,G==="section-ai"),onClick:()=>tt("aiContext"),onMouseEnter:()=>se("section-ai"),onMouseLeave:()=>se(null),children:[n.jsxs("div",{style:R.sectionTitle,children:[n.jsx(ui,{size:16}),"AI Context"]}),P.aiContext?n.jsx(jo,{size:20}):n.jsx(Hp,{size:20})]}),n.jsx("div",{style:R.sectionContent(P.aiContext),children:n.jsx("p",{style:{...R.muted,padding:"16px",background:k?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)",borderRadius:"10px",border:k?"1px solid rgba(139,92,246,0.2)":"1px solid rgba(139,92,246,0.1)",lineHeight:"1.6"},children:Ae.aiContext})}),n.jsxs("div",{style:R.sectionHeader(P.websites,G==="section-web"),onClick:()=>tt("websites"),onMouseEnter:()=>se("section-web"),onMouseLeave:()=>se(null),children:[n.jsxs("div",{style:R.sectionTitle,children:[n.jsx(cp,{size:16}),"Linked Websites (",(Ae.resources||[]).length,")"]}),P.websites?n.jsx(jo,{size:20}):n.jsx(Hp,{size:20})]}),n.jsxs("div",{style:R.sectionContent(P.websites),children:[!B&&n.jsxs("button",{style:R.button(G==="add-website","secondary"),onMouseEnter:()=>se("add-website"),onMouseLeave:()=>se(null),onClick:()=>j(!0),children:[n.jsx(In,{size:16}),"Add Website"]}),B&&n.jsxs("div",{style:{marginTop:"12px",marginBottom:"16px"},children:[n.jsx("label",{style:R.label,children:"Resource Type"}),n.jsxs("select",{className:"input-focus",style:{...R.select,marginBottom:"12px"},value:F,onChange:v=>re(v.target.value),children:[n.jsx("option",{value:"website",children:"Website / URL"}),n.jsx("option",{value:"application",children:"Application / Software"}),n.jsx("option",{value:"file_pattern",children:"File / Project Pattern"})]}),n.jsxs("div",{style:{...R.muted,marginBottom:"12px",padding:"8px 12px",background:k?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)",borderRadius:"8px",fontSize:"11px"},children:[F==="website"&&' Example: "Vite + React - Google Chrome" or "localhost:3000"',F==="application"&&' Example: "Visual Studio Code" or "Code" or "Code.exe"',F==="file_pattern"&&' Example: "MaxCap" or "MyProject" (matches anywhere in activity)']}),_.map((v,he)=>n.jsxs("div",{style:R.websiteInput,children:[n.jsx("input",{className:"input-focus",style:{...R.input,flex:2,marginBottom:0},placeholder:F==="website"?"Website title or URL":F==="application"?"Application name":"File or project pattern",value:v.value,onChange:Ke=>He(he,"value",Ke.target.value)}),n.jsx("input",{className:"input-focus",style:{...R.input,flex:2,marginBottom:0},placeholder:"Description (optional)",value:v.description,onChange:Ke=>He(he,"description",Ke.target.value)}),n.jsx("button",{style:R.websiteAddButton(G===`add-row-${he}`),onMouseEnter:()=>se(`add-row-${he}`),onMouseLeave:()=>se(null),onClick:ge,children:n.jsx(In,{size:16})})]},`resource-input-${he}`)),n.jsxs("button",{style:R.button(G==="save-resources"),onMouseEnter:()=>se("save-resources"),onMouseLeave:()=>se(null),onClick:ze,children:[n.jsx(Oi,{size:16}),"Save Resources"]})]}),n.jsxs("div",{style:{marginTop:"16px"},children:[(Ae.resources||[]).length===0&&n.jsx("p",{style:R.muted,children:"No websites linked yet"}),(Ae.resources||[]).map(v=>n.jsxs("div",{style:R.tag(G===`tag-${v.id}`),onMouseEnter:()=>se(`tag-${v.id}`),onMouseLeave:()=>se(null),children:[v.type==="website"&&n.jsx(cp,{size:12}),v.type==="application"&&n.jsx(Bo,{size:12}),v.type==="file_pattern"&&n.jsx(Fo,{size:12}),n.jsx("span",{children:v.value}),v.description&&n.jsxs("span",{style:{fontSize:"10px",opacity:.7,marginLeft:"4px"},children:["(",v.description,")"]}),n.jsx("button",{onClick:async()=>{await Fe(`/api/ai/context-resources/${v.id}`,{method:"DELETE",credentials:"include"}),ke()},style:R.deleteButton(G===`delete-${v.id}`),onMouseEnter:()=>se(`delete-${v.id}`),onMouseLeave:()=>se(null),title:"Remove resource",children:n.jsx(ar,{size:12})})]},`resource-${v.id}`))]})]})]})]})]}):n.jsxs("div",{style:R.contentContainer,children:[n.jsxs("div",{style:R.panel(pe==="sub-left"),onMouseEnter:()=>Me("sub-left"),onMouseLeave:()=>Me(null),children:[n.jsx("div",{style:R.panelGlow}),n.jsxs("h3",{style:R.panelTitle,children:[n.jsx(Bo,{size:20}),"All Subscriptions (",y.length,")"]}),H?n.jsxs("div",{style:R.emptyState,children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),n.jsx("p",{style:R.muted,children:"Loading subscriptions..."})]}):y.length===0?n.jsxs("div",{style:R.emptyState,children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),n.jsx("p",{style:R.muted,children:"No subscriptions configured"}),n.jsx("p",{style:{...R.muted,marginTop:"8px"},children:'Click "New Subscription" to get started'})]}):y.map(v=>n.jsxs("div",{style:R.contextCard((V==null?void 0:V.Id)===v.Id,G===`sub-${v.Id}`),onClick:()=>D(v),onMouseEnter:()=>se(`sub-${v.Id}`),onMouseLeave:()=>se(null),children:[n.jsxs("div",{style:R.contextTitle,children:[n.jsx(Bo,{size:14,style:{color:v.IsActive?"#10b981":"#94a3b8"}}),v.SubscriptionName]}),n.jsxs("div",{style:R.contextSubtitle,children:[n.jsx(cp,{size:10}),"WS: ",v.WorkspaceId]}),!v.IsActive&&n.jsx("div",{style:{fontSize:"10px",color:"#ef4444",marginTop:"4px",fontWeight:"600"},children:" INACTIVE"})]},v.Id))]}),n.jsxs("div",{style:R.panel(pe==="sub-right"),onMouseEnter:()=>Me("sub-right"),onMouseLeave:()=>Me(null),children:[n.jsx("div",{style:R.panelGlow}),V?n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("h2",{style:{fontSize:"24px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b",marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(Bo,{size:24,style:{color:"#8b5cf6"}}),V.SubscriptionName]}),n.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",backgroundColor:V.IsActive?k?"rgba(16,185,129,0.2)":"rgba(16,185,129,0.1)":k?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",border:V.IsActive?"1px solid rgba(16,185,129,0.3)":"1px solid rgba(239,68,68,0.3)",fontSize:"11px",fontWeight:"600",color:V.IsActive?"#10b981":"#ef4444"},children:V.IsActive?" Active":" Inactive"})]}),n.jsx("div",{style:R.sectionHeader(!0,G==="section-config"),onMouseEnter:()=>se("section-config"),onMouseLeave:()=>se(null),children:n.jsxs("div",{style:R.sectionTitle,children:[n.jsx(ui,{size:16}),"Configuration"]})}),n.jsxs("div",{style:{marginTop:"16px"},children:[n.jsx("label",{style:R.label,children:"Subscription Name"}),n.jsx("input",{className:"input-focus",style:R.input,value:V.SubscriptionName,onChange:v=>D({...V,SubscriptionName:v.target.value}),placeholder:"Main Workspace"}),n.jsx("label",{style:R.label,children:"Workspace ID"}),n.jsx("input",{className:"input-focus",style:{...R.input,fontFamily:"monospace",fontSize:"13px"},value:V.WorkspaceId,onChange:v=>D({...V,WorkspaceId:v.target.value}),placeholder:"0yd5t2"}),n.jsx("label",{style:R.label,children:"Client ID"}),n.jsx("input",{className:"input-focus",style:{...R.input,fontFamily:"monospace",fontSize:"13px"},value:V.ClientId,onChange:v=>D({...V,ClientId:v.target.value}),placeholder:"sKPuHCvF263IgHs84ZZPHVokj7mVHzBk"}),n.jsxs("label",{style:R.label,children:["Client Secret",n.jsx("span",{style:{marginLeft:"8px",fontSize:"10px",color:"#ef4444",fontWeight:"700"},children:" SENSITIVE"})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("input",{className:"input-focus",style:{...R.input,fontFamily:"monospace",fontSize:te[V.Id]?"13px":"20px",letterSpacing:te[V.Id]?"0":"4px",paddingRight:"48px"},type:te[V.Id]?"text":"password",value:V.ClientSecret,onChange:v=>D({...V,ClientSecret:v.target.value}),placeholder:""}),n.jsx("button",{type:"button",onClick:()=>ht(V.Id),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",color:k?"#94a3b8":"#64748b",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.2s ease"},onMouseEnter:v=>v.currentTarget.style.color="#8b5cf6",onMouseLeave:v=>v.currentTarget.style.color=k?"#94a3b8":"#64748b",children:te[V.Id]?n.jsx(Fo,{size:18}):n.jsx(ui,{size:18})})]}),te[V.Id]&&n.jsx("div",{style:{fontSize:"11px",color:"#f59e0b",marginTop:"-8px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"4px"},children:" Secret visible (auto-hiding in 10s)"}),n.jsx("label",{style:R.label,children:"Base URL"}),n.jsx("input",{className:"input-focus",style:{...R.input,fontFamily:"monospace",fontSize:"13px"},value:V.BaseUrl,onChange:v=>D({...V,BaseUrl:v.target.value}),placeholder:"https://cloud.manictime.com"}),n.jsx("label",{style:R.label,children:"Status"}),n.jsxs("select",{className:"input-focus",style:R.select,value:V.IsActive?"true":"false",onChange:v=>D({...V,IsActive:v.target.value==="true"}),children:[n.jsx("option",{value:"true",children:" Active"}),n.jsx("option",{value:"false",children:" Inactive"})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px"},children:[n.jsxs("button",{style:R.button(G==="save-sub"),onMouseEnter:()=>se("save-sub"),onMouseLeave:()=>se(null),onClick:ie,children:[n.jsx(Oi,{size:16}),"Save Changes"]}),n.jsxs("button",{style:{...R.button(G==="delete-sub","secondary"),background:G==="delete-sub"?"linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)":k?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",color:G==="delete-sub"?"#fff":"#ef4444",border:"1px solid rgba(239,68,68,0.3)"},onMouseEnter:()=>se("delete-sub"),onMouseLeave:()=>se(null),onClick:()=>dt(V.Id),children:[n.jsx(ar,{size:16}),"Delete"]})]})]})]}):n.jsxs("div",{style:R.emptyState,children:[n.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Select a subscription to view details"}),n.jsx("p",{style:R.muted,children:"Choose a subscription from the left panel to manage its configuration"})]})]})]}),X&&n.jsx("div",{style:R.modal,onClick:()=>Be(!1),children:n.jsxs("div",{style:R.modalContent,onClick:v=>v.stopPropagation(),children:[n.jsx("button",{style:R.modalClose(G==="close"),onMouseEnter:()=>se("close"),onMouseLeave:()=>se(null),onClick:()=>Be(!1),children:n.jsx(mr,{size:20})}),n.jsxs("h3",{style:R.modalTitle,children:[n.jsx(zr,{size:24}),"Create New Context"]}),n.jsx("label",{style:R.label,children:"Department *"}),n.jsxs("select",{className:"input-focus",style:R.select,value:je.domainId,onChange:v=>U({...je,domainId:v.target.value}),children:[n.jsx("option",{value:"",children:"Select a department..."}),e==null?void 0:e.map(v=>n.jsx("option",{value:v.id,children:v.name},`domain-option-${v.id}`))]}),n.jsx("label",{style:R.label,children:"Project Type *"}),n.jsxs("select",{className:"input-focus",style:R.select,value:je.projectType,onChange:v=>U({...je,projectType:v.target.value}),children:[n.jsx("option",{value:"Project",children:"Project"}),n.jsx("option",{value:"Operations",children:"Operations"})]}),n.jsx("label",{style:R.label,children:"Context Name *"}),n.jsx("input",{className:"input-focus",style:R.input,placeholder:"e.g., Project Alpha, Marketing Campaign",value:je.name,onChange:v=>U({...je,name:v.target.value})}),n.jsx("label",{style:R.label,children:"Purpose"}),n.jsx("textarea",{className:"input-focus",style:R.textarea,placeholder:"Brief description of this context",value:je.purpose,onChange:v=>U({...je,purpose:v.target.value})}),n.jsx("label",{style:R.label,children:"AI Context / Instructions"}),n.jsx("textarea",{className:"input-focus",style:R.textarea,placeholder:"Provide context and instructions for AI",value:je.aiContext,onChange:v=>U({...je,aiContext:v.target.value})}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx("button",{style:R.button(G==="cancel","secondary"),onMouseEnter:()=>se("cancel"),onMouseLeave:()=>se(null),onClick:()=>Be(!1),children:"Cancel"}),n.jsxs("button",{style:R.button(G==="create"),onMouseEnter:()=>se("create"),onMouseLeave:()=>se(null),onClick:T,children:[n.jsx(Oi,{size:16}),"Create Context"]})]})]})}),L&&n.jsx("div",{style:R.modal,onClick:()=>Q(!1),children:n.jsxs("div",{style:R.modalContent,onClick:v=>v.stopPropagation(),children:[n.jsx("button",{style:R.modalClose(G==="close-sub"),onMouseEnter:()=>se("close-sub"),onMouseLeave:()=>se(null),onClick:()=>Q(!1),children:n.jsx(mr,{size:20})}),n.jsxs("h3",{style:R.modalTitle,children:[n.jsx(Bo,{size:24}),"Add New Subscription"]}),n.jsx("label",{style:R.label,children:"Subscription Name *"}),n.jsx("input",{className:"input-focus",style:R.input,placeholder:"Main Workspace",value:M.subscriptionName,onChange:v=>N({...M,subscriptionName:v.target.value})}),n.jsx("label",{style:R.label,children:"Workspace ID *"}),n.jsx("input",{className:"input-focus",style:{...R.input,fontFamily:"monospace",fontSize:"13px"},placeholder:"0yd5t2",value:M.workspaceId,onChange:v=>N({...M,workspaceId:v.target.value})}),n.jsx("label",{style:R.label,children:"Client ID *"}),n.jsx("input",{className:"input-focus",style:{...R.input,fontFamily:"monospace",fontSize:"13px"},placeholder:"sKPuHCvF263IgHs84ZZPHVokj7mVHzBk",value:M.clientId,onChange:v=>N({...M,clientId:v.target.value})}),n.jsxs("label",{style:R.label,children:["Client Secret *",n.jsx("span",{style:{marginLeft:"8px",fontSize:"10px",color:"#ef4444"},children:" SENSITIVE"})]}),n.jsx("input",{className:"input-focus",style:{...R.input,fontFamily:"monospace",fontSize:"13px"},type:"password",placeholder:"",value:M.clientSecret,onChange:v=>N({...M,clientSecret:v.target.value})}),n.jsx("label",{style:R.label,children:"Base URL *"}),n.jsx("input",{className:"input-focus",style:{...R.input,fontFamily:"monospace",fontSize:"13px"},placeholder:"https://cloud.manictime.com",value:M.baseUrl,onChange:v=>N({...M,baseUrl:v.target.value})}),n.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[n.jsx("button",{style:R.button(G==="cancel-sub","secondary"),onMouseEnter:()=>se("cancel-sub"),onMouseLeave:()=>se(null),onClick:()=>Q(!1),children:"Cancel"}),n.jsxs("button",{style:R.button(G==="create-sub"),onMouseEnter:()=>se("create-sub"),onMouseLeave:()=>se(null),onClick:Se,children:[n.jsx(Oi,{size:16}),"Create Subscription"]})]})]})}),be&&Ue&&n.jsxs("div",{style:{...R.profileTooltip,top:Ue.top,right:Ue.right,zIndex:2147483647},onMouseEnter:()=>de(!0),onMouseLeave:()=>de(!1),children:[n.jsx("div",{style:R.tooltipArrow}),n.jsxs("div",{style:R.userInfo,children:[n.jsx("div",{style:R.avatar,children:p?`${p.firstName[0]}${p.lastName[0]}`:"U"}),n.jsxs("div",{children:[n.jsx("div",{style:R.userName,children:p?`${p.firstName} ${p.lastName}`:"Loading..."}),n.jsx("div",{style:R.userRole,children:p?`${p.role}  ${p.department}`:"Loading..."})]})]}),n.jsxs("div",{style:R.userStats,children:[n.jsxs("div",{style:R.tooltipStatItem,children:[n.jsx("div",{style:R.tooltipStatNumber,children:(e==null?void 0:e.length)||0}),n.jsx("div",{style:R.tooltipStatLabel,children:"Domains"})]}),n.jsxs("div",{style:R.tooltipStatItem,children:[n.jsx("div",{style:R.tooltipStatNumber,children:I}),n.jsx("div",{style:R.tooltipStatLabel,children:"Contexts"})]}),n.jsxs("div",{style:R.tooltipStatItem,children:[n.jsx("div",{style:R.tooltipStatNumber,children:Object.values(Tt).reduce((v,he)=>v+he.projects.length,0)}),n.jsx("div",{style:R.tooltipStatLabel,children:"Projects"})]})]}),n.jsx("button",{style:R.themeToggle,onClick:mt,children:k?" Light Mode":" Dark Mode"})]})]})},sQ=()=>n.jsx("div",{children:n.jsx(d4,{children:n.jsxs(LB,{children:[n.jsx(tn,{path:"/",element:n.jsx(A4,{})}),n.jsx(tn,{path:"/forgot-password",element:n.jsx(l4,{})}),n.jsx(tn,{path:"/auth",element:n.jsx(oQ,{})}),n.jsx(tn,{path:"/admindashboard",element:n.jsx(Bn,{children:n.jsx(f4,{})})}),n.jsx(tn,{path:"/adminteamcapacity",element:n.jsx(Bn,{children:n.jsx(m4,{})})}),n.jsx(tn,{path:"/adminutilization",element:n.jsx(Bn,{children:n.jsx(x4,{})})}),n.jsx(tn,{path:"/adminactuals",element:n.jsx(Bn,{children:n.jsx(y4,{})})}),n.jsx(tn,{path:"/adminviewlogs",element:n.jsx(Bn,{children:n.jsx(b4,{})})}),n.jsx(tn,{path:"/adminviewplan",element:n.jsx(Bn,{children:n.jsx(GU,{})})}),n.jsx(tn,{path:"/adminindividualplan",element:n.jsx(Bn,{children:n.jsx(VU,{})})}),n.jsx(tn,{path:"/adminapprovals",element:n.jsx(Bn,{children:n.jsx($U,{})})}),n.jsx(tn,{path:"/adminaddplan",element:n.jsx(Bn,{children:n.jsx(YU,{})})}),n.jsx(tn,{path:"/adminaddindividualplan",element:n.jsx(Bn,{children:n.jsx(JU,{})})}),n.jsx(tn,{path:"/admineditplan",element:n.jsx(Bn,{children:n.jsx(XU,{})})}),n.jsx(tn,{path:"/admineditindividualplan",element:n.jsx(Bn,{children:n.jsx(qU,{})})}),n.jsx(tn,{path:"/adminreports",element:n.jsx(Bn,{children:n.jsx(ZU,{})})}),n.jsx(tn,{path:"/users",element:n.jsx(Bn,{children:n.jsx(eQ,{})})}),n.jsx(tn,{path:"/addusers",element:n.jsx(Bn,{children:n.jsx(tQ,{})})}),n.jsx(tn,{path:"/adminalerts",element:n.jsx(Bn,{children:n.jsx(nQ,{})})}),n.jsx(tn,{path:"/adminprofile",element:n.jsx(Bn,{children:n.jsx(rQ,{})})}),n.jsx(tn,{path:"/secret",element:n.jsx(Bn,{children:n.jsx(iQ,{})})})]})})}),qw="https://maxcap.azurewebsites.net/auth",aQ={auth:{clientId:"2f33b445-b2d8-42fd-a207-cb167a23bc98",authority:"https://login.microsoftonline.com/7dae6b7e-a024-4264-bf0b-f8cc2bc79204",redirectUri:qw,navigateToLoginRequestUrl:!1},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},wy=new Lg(aQ);function AQ(){const[i,e]=m.useState(!1);return m.useEffect(()=>{console.log(" Clearing old MSAL cache..."),Object.keys(localStorage).forEach(t=>{t.includes("msal")&&!t.includes("sidebar")&&localStorage.removeItem(t)}),wy.initialize().then(()=>{console.log(" MSAL fully initialized"),console.log(" Redirect URI:",qw),e(!0)}).catch(t=>{console.error(" MSAL initialization failed:",t)})},[]),i?n.jsx(m.StrictMode,{children:n.jsx(s4,{instance:wy,children:n.jsx(HB,{children:n.jsx(sQ,{})})})}):n.jsx("div",{children:"Loading authentication"})}KC.createRoot(document.getElementById("root")).render(n.jsx(AQ,{}));
