function Yv(o,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in o)){const A=Object.getOwnPropertyDescriptor(n,a);A&&Object.defineProperty(o,a,A.get?A:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const A of a)if(A.type==="childList")for(const c of A.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const A={};return a.integrity&&(A.integrity=a.integrity),a.referrerPolicy&&(A.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?A.credentials="include":a.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function n(a){if(a.ep)return;a.ep=!0;const A=r(a);fetch(a.href,A)}})();function Jv(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Ip={exports:{}},cA={},Ep={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um;function Xv(){if(Um)return Pt;Um=1;var o=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(E){return E===null||typeof E!="object"?null:(E=y&&E[y]||E["@@iterator"],typeof E=="function"?E:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,Q={};function S(E,D,ie){this.props=E,this.context=D,this.refs=Q,this.updater=ie||R}S.prototype.isReactComponent={},S.prototype.setState=function(E,D){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,D,"setState")},S.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function N(){}N.prototype=S.prototype;function M(E,D,ie){this.props=E,this.context=D,this.refs=Q,this.updater=ie||R}var Ie=M.prototype=new N;Ie.constructor=M,C(Ie,S.prototype),Ie.isPureReactComponent=!0;var fe=Array.isArray,F=Object.prototype.hasOwnProperty,ae={current:null},ee={key:!0,ref:!0,__self:!0,__source:!0};function Re(E,D,ie){var L,j={},de=null,Oe=null;if(D!=null)for(L in D.ref!==void 0&&(Oe=D.ref),D.key!==void 0&&(de=""+D.key),D)F.call(D,L)&&!ee.hasOwnProperty(L)&&(j[L]=D[L]);var Ge=arguments.length-2;if(Ge===1)j.children=ie;else if(1<Ge){for(var Ve=Array(Ge),ke=0;ke<Ge;ke++)Ve[ke]=arguments[ke+2];j.children=Ve}if(E&&E.defaultProps)for(L in Ge=E.defaultProps,Ge)j[L]===void 0&&(j[L]=Ge[L]);return{$$typeof:o,type:E,key:de,ref:Oe,props:j,_owner:ae.current}}function se(E,D){return{$$typeof:o,type:E.type,key:D,ref:E.ref,props:E.props,_owner:E._owner}}function Z(E){return typeof E=="object"&&E!==null&&E.$$typeof===o}function ue(E){var D={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(ie){return D[ie]})}var pe=/\/+/g;function we(E,D){return typeof E=="object"&&E!==null&&E.key!=null?ue(""+E.key):D.toString(36)}function Pe(E,D,ie,L,j){var de=typeof E;(de==="undefined"||de==="boolean")&&(E=null);var Oe=!1;if(E===null)Oe=!0;else switch(de){case"string":case"number":Oe=!0;break;case"object":switch(E.$$typeof){case o:case e:Oe=!0}}if(Oe)return Oe=E,j=j(Oe),E=L===""?"."+we(Oe,0):L,fe(j)?(ie="",E!=null&&(ie=E.replace(pe,"$&/")+"/"),Pe(j,D,ie,"",function(ke){return ke})):j!=null&&(Z(j)&&(j=se(j,ie+(!j.key||Oe&&Oe.key===j.key?"":(""+j.key).replace(pe,"$&/")+"/")+E)),D.push(j)),1;if(Oe=0,L=L===""?".":L+":",fe(E))for(var Ge=0;Ge<E.length;Ge++){de=E[Ge];var Ve=L+we(de,Ge);Oe+=Pe(de,D,ie,Ve,j)}else if(Ve=b(E),typeof Ve=="function")for(E=Ve.call(E),Ge=0;!(de=E.next()).done;)de=de.value,Ve=L+we(de,Ge++),Oe+=Pe(de,D,ie,Ve,j);else if(de==="object")throw D=String(E),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return Oe}function re(E,D,ie){if(E==null)return E;var L=[],j=0;return Pe(E,L,"","",function(de){return D.call(ie,de,j++)}),L}function Ee(E){if(E._status===-1){var D=E._result;D=D(),D.then(function(ie){(E._status===0||E._status===-1)&&(E._status=1,E._result=ie)},function(ie){(E._status===0||E._status===-1)&&(E._status=2,E._result=ie)}),E._status===-1&&(E._status=0,E._result=D)}if(E._status===1)return E._result.default;throw E._result}var k={current:null},ge={transition:null},_={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:ge,ReactCurrentOwner:ae};function G(){throw Error("act(...) is not supported in production builds of React.")}return Pt.Children={map:re,forEach:function(E,D,ie){re(E,function(){D.apply(this,arguments)},ie)},count:function(E){var D=0;return re(E,function(){D++}),D},toArray:function(E){return re(E,function(D){return D})||[]},only:function(E){if(!Z(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Pt.Component=S,Pt.Fragment=r,Pt.Profiler=a,Pt.PureComponent=M,Pt.StrictMode=n,Pt.Suspense=d,Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_,Pt.act=G,Pt.cloneElement=function(E,D,ie){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var L=C({},E.props),j=E.key,de=E.ref,Oe=E._owner;if(D!=null){if(D.ref!==void 0&&(de=D.ref,Oe=ae.current),D.key!==void 0&&(j=""+D.key),E.type&&E.type.defaultProps)var Ge=E.type.defaultProps;for(Ve in D)F.call(D,Ve)&&!ee.hasOwnProperty(Ve)&&(L[Ve]=D[Ve]===void 0&&Ge!==void 0?Ge[Ve]:D[Ve])}var Ve=arguments.length-2;if(Ve===1)L.children=ie;else if(1<Ve){Ge=Array(Ve);for(var ke=0;ke<Ve;ke++)Ge[ke]=arguments[ke+2];L.children=Ge}return{$$typeof:o,type:E.type,key:j,ref:de,props:L,_owner:Oe}},Pt.createContext=function(E){return E={$$typeof:c,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:A,_context:E},E.Consumer=E},Pt.createElement=Re,Pt.createFactory=function(E){var D=Re.bind(null,E);return D.type=E,D},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(E){return{$$typeof:p,render:E}},Pt.isValidElement=Z,Pt.lazy=function(E){return{$$typeof:g,_payload:{_status:-1,_result:E},_init:Ee}},Pt.memo=function(E,D){return{$$typeof:m,type:E,compare:D===void 0?null:D}},Pt.startTransition=function(E){var D=ge.transition;ge.transition={};try{E()}finally{ge.transition=D}},Pt.unstable_act=G,Pt.useCallback=function(E,D){return k.current.useCallback(E,D)},Pt.useContext=function(E){return k.current.useContext(E)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(E){return k.current.useDeferredValue(E)},Pt.useEffect=function(E,D){return k.current.useEffect(E,D)},Pt.useId=function(){return k.current.useId()},Pt.useImperativeHandle=function(E,D,ie){return k.current.useImperativeHandle(E,D,ie)},Pt.useInsertionEffect=function(E,D){return k.current.useInsertionEffect(E,D)},Pt.useLayoutEffect=function(E,D){return k.current.useLayoutEffect(E,D)},Pt.useMemo=function(E,D){return k.current.useMemo(E,D)},Pt.useReducer=function(E,D,ie){return k.current.useReducer(E,D,ie)},Pt.useRef=function(E){return k.current.useRef(E)},Pt.useState=function(E){return k.current.useState(E)},Pt.useSyncExternalStore=function(E,D,ie){return k.current.useSyncExternalStore(E,D,ie)},Pt.useTransition=function(){return k.current.useTransition()},Pt.version="18.3.1",Pt}var Qm;function Zg(){return Qm||(Qm=1,Ep.exports=Xv()),Ep.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm;function qv(){if(Rm)return cA;Rm=1;var o=Zg(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A={key:!0,ref:!0,__self:!0,__source:!0};function c(p,d,m){var g,y={},b=null,R=null;m!==void 0&&(b=""+m),d.key!==void 0&&(b=""+d.key),d.ref!==void 0&&(R=d.ref);for(g in d)n.call(d,g)&&!A.hasOwnProperty(g)&&(y[g]=d[g]);if(p&&p.defaultProps)for(g in d=p.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:p,key:b,ref:R,props:y,_owner:a.current}}return cA.Fragment=r,cA.jsx=c,cA.jsxs=c,cA}var Mm;function Zv(){return Mm||(Mm=1,Ip.exports=qv()),Ip.exports}var t=Zv(),h=Zg();const bo=Jv(h),eC=Yv({__proto__:null,default:bo},[h]);var Xl={},kp={exports:{}},jn={},jp={exports:{}},Tp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm;function tC(){return Lm||(Lm=1,function(o){function e(ge,_){var G=ge.length;ge.push(_);e:for(;0<G;){var E=G-1>>>1,D=ge[E];if(0<a(D,_))ge[E]=_,ge[G]=D,G=E;else break e}}function r(ge){return ge.length===0?null:ge[0]}function n(ge){if(ge.length===0)return null;var _=ge[0],G=ge.pop();if(G!==_){ge[0]=G;e:for(var E=0,D=ge.length,ie=D>>>1;E<ie;){var L=2*(E+1)-1,j=ge[L],de=L+1,Oe=ge[de];if(0>a(j,G))de<D&&0>a(Oe,j)?(ge[E]=Oe,ge[de]=G,E=de):(ge[E]=j,ge[L]=G,E=L);else if(de<D&&0>a(Oe,G))ge[E]=Oe,ge[de]=G,E=de;else break e}}return _}function a(ge,_){var G=ge.sortIndex-_.sortIndex;return G!==0?G:ge.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;o.unstable_now=function(){return A.now()}}else{var c=Date,p=c.now();o.unstable_now=function(){return c.now()-p}}var d=[],m=[],g=1,y=null,b=3,R=!1,C=!1,Q=!1,S=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ie(ge){for(var _=r(m);_!==null;){if(_.callback===null)n(m);else if(_.startTime<=ge)n(m),_.sortIndex=_.expirationTime,e(d,_);else break;_=r(m)}}function fe(ge){if(Q=!1,Ie(ge),!C)if(r(d)!==null)C=!0,Ee(F);else{var _=r(m);_!==null&&k(fe,_.startTime-ge)}}function F(ge,_){C=!1,Q&&(Q=!1,N(Re),Re=-1),R=!0;var G=b;try{for(Ie(_),y=r(d);y!==null&&(!(y.expirationTime>_)||ge&&!ue());){var E=y.callback;if(typeof E=="function"){y.callback=null,b=y.priorityLevel;var D=E(y.expirationTime<=_);_=o.unstable_now(),typeof D=="function"?y.callback=D:y===r(d)&&n(d),Ie(_)}else n(d);y=r(d)}if(y!==null)var ie=!0;else{var L=r(m);L!==null&&k(fe,L.startTime-_),ie=!1}return ie}finally{y=null,b=G,R=!1}}var ae=!1,ee=null,Re=-1,se=5,Z=-1;function ue(){return!(o.unstable_now()-Z<se)}function pe(){if(ee!==null){var ge=o.unstable_now();Z=ge;var _=!0;try{_=ee(!0,ge)}finally{_?we():(ae=!1,ee=null)}}else ae=!1}var we;if(typeof M=="function")we=function(){M(pe)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,re=Pe.port2;Pe.port1.onmessage=pe,we=function(){re.postMessage(null)}}else we=function(){S(pe,0)};function Ee(ge){ee=ge,ae||(ae=!0,we())}function k(ge,_){Re=S(function(){ge(o.unstable_now())},_)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(ge){ge.callback=null},o.unstable_continueExecution=function(){C||R||(C=!0,Ee(F))},o.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<ge?Math.floor(1e3/ge):5},o.unstable_getCurrentPriorityLevel=function(){return b},o.unstable_getFirstCallbackNode=function(){return r(d)},o.unstable_next=function(ge){switch(b){case 1:case 2:case 3:var _=3;break;default:_=b}var G=b;b=_;try{return ge()}finally{b=G}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(ge,_){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var G=b;b=ge;try{return _()}finally{b=G}},o.unstable_scheduleCallback=function(ge,_,G){var E=o.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?E+G:E):G=E,ge){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=G+D,ge={id:g++,callback:_,priorityLevel:ge,startTime:G,expirationTime:D,sortIndex:-1},G>E?(ge.sortIndex=G,e(m,ge),r(d)===null&&ge===r(m)&&(Q?(N(Re),Re=-1):Q=!0,k(fe,G-E))):(ge.sortIndex=D,e(d,ge),C||R||(C=!0,Ee(F))),ge},o.unstable_shouldYield=ue,o.unstable_wrapCallback=function(ge){var _=b;return function(){var G=b;b=_;try{return ge.apply(this,arguments)}finally{b=G}}}}(Tp)),Tp}var Dm;function rC(){return Dm||(Dm=1,jp.exports=tC()),jp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function nC(){if(Pm)return jn;Pm=1;var o=Zg(),e=rC();function r(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function A(i,s){c(i,s),c(i+"Capture",s)}function c(i,s){for(a[i]=s,i=0;i<s.length;i++)n.add(s[i])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function b(i){return d.call(y,i)?!0:d.call(g,i)?!1:m.test(i)?y[i]=!0:(g[i]=!0,!1)}function R(i,s,l,u){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return u?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function C(i,s,l,u){if(s===null||typeof s>"u"||R(i,s,l,u))return!0;if(u)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Q(i,s,l,u,f,x,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=u,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=i,this.type=s,this.sanitizeURL=x,this.removeEmptyString=v}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){S[i]=new Q(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];S[s]=new Q(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){S[i]=new Q(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){S[i]=new Q(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){S[i]=new Q(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){S[i]=new Q(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){S[i]=new Q(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){S[i]=new Q(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){S[i]=new Q(i,5,!1,i.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function M(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(N,M);S[s]=new Q(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(N,M);S[s]=new Q(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(N,M);S[s]=new Q(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){S[i]=new Q(i,1,!1,i.toLowerCase(),null,!1,!1)}),S.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){S[i]=new Q(i,1,!1,i.toLowerCase(),null,!0,!0)});function Ie(i,s,l,u){var f=S.hasOwnProperty(s)?S[s]:null;(f!==null?f.type!==0:u||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(C(s,l,f,u)&&(l=null),u||f===null?b(s)&&(l===null?i.removeAttribute(s):i.setAttribute(s,""+l)):f.mustUseProperty?i[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,u=f.attributeNamespace,l===null?i.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,u?i.setAttributeNS(u,s,l):i.setAttribute(s,l))))}var fe=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),ae=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),Re=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),ue=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),Ee=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),ge=Symbol.iterator;function _(i){return i===null||typeof i!="object"?null:(i=ge&&i[ge]||i["@@iterator"],typeof i=="function"?i:null)}var G=Object.assign,E;function D(i){if(E===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);E=s&&s[1]||""}return`
`+E+i}var ie=!1;function L(i,s){if(!i||ie)return"";ie=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Ue){var u=Ue}Reflect.construct(i,[],s)}else{try{s.call()}catch(Ue){u=Ue}i.call(s.prototype)}else{try{throw Error()}catch(Ue){u=Ue}i()}}catch(Ue){if(Ue&&u&&typeof Ue.stack=="string"){for(var f=Ue.stack.split(`
`),x=u.stack.split(`
`),v=f.length-1,W=x.length-1;1<=v&&0<=W&&f[v]!==x[W];)W--;for(;1<=v&&0<=W;v--,W--)if(f[v]!==x[W]){if(v!==1||W!==1)do if(v--,W--,0>W||f[v]!==x[W]){var oe=`
`+f[v].replace(" at new "," at ");return i.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",i.displayName)),oe}while(1<=v&&0<=W);break}}}finally{ie=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?D(i):""}function j(i){switch(i.tag){case 5:return D(i.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return i=L(i.type,!1),i;case 11:return i=L(i.type.render,!1),i;case 1:return i=L(i.type,!0),i;default:return""}}function de(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ee:return"Fragment";case ae:return"Portal";case se:return"Profiler";case Re:return"StrictMode";case we:return"Suspense";case Pe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case ue:return(i.displayName||"Context")+".Consumer";case Z:return(i._context.displayName||"Context")+".Provider";case pe:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case re:return s=i.displayName||null,s!==null?s:de(i.type)||"Memo";case Ee:s=i._payload,i=i._init;try{return de(i(s))}catch{}}return null}function Oe(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(s);case 8:return s===Re?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ge(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ve(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ke(i){var s=Ve(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,x=l.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){u=""+v,x.call(this,v)}}),Object.defineProperty(i,s,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Be(i){i._valueTracker||(i._valueTracker=ke(i))}function nt(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return i&&(u=Ve(i)?i.checked?"true":"false":i.value),i=u,i!==l?(s.setValue(i),!0):!1}function yt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function q(i,s){var l=s.checked;return G({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function lt(i,s){var l=s.defaultValue==null?"":s.defaultValue,u=s.checked!=null?s.checked:s.defaultChecked;l=Ge(s.value!=null?s.value:l),i._wrapperState={initialChecked:u,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ye(i,s){s=s.checked,s!=null&&Ie(i,"checked",s,!1)}function ze(i,s){ye(i,s);var l=Ge(s.value),u=s.type;if(l!=null)u==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(u==="submit"||u==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?Ne(i,s.type,l):s.hasOwnProperty("defaultValue")&&Ne(i,s.type,Ge(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function dt(i,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var u=s.type;if(!(u!=="submit"&&u!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,l||s===i.value||(i.value=s),i.defaultValue=s}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function Ne(i,s,l){(s!=="number"||yt(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var B=Array.isArray;function U(i,s,l,u){if(i=i.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<i.length;l++)f=s.hasOwnProperty("$"+i[l].value),i[l].selected!==f&&(i[l].selected=f),f&&u&&(i[l].defaultSelected=!0)}else{for(l=""+Ge(l),s=null,f=0;f<i.length;f++){if(i[f].value===l){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function Ae(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(r(91));return G({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Y(i,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(r(92));if(B(l)){if(1<l.length)throw Error(r(93));l=l[0]}s=l}s==null&&(s=""),l=s}i._wrapperState={initialValue:Ge(l)}}function V(i,s){var l=Ge(s.value),u=Ge(s.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),s.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),u!=null&&(i.defaultValue=""+u)}function ve(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function me(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function T(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?me(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var wt,w=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,u,f){MSApp.execUnsafeLocalFunction(function(){return i(s,l,u,f)})}:i}(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(wt=wt||document.createElement("div"),wt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=wt.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function ce(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var Ce={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H=["Webkit","ms","Moz","O"];Object.keys(Ce).forEach(function(i){H.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),Ce[s]=Ce[i]})});function P(i,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Ce.hasOwnProperty(i)&&Ce[i]?(""+s).trim():s+"px"}function z(i,s){i=i.style;for(var l in s)if(s.hasOwnProperty(l)){var u=l.indexOf("--")===0,f=P(l,s[l],u);l==="float"&&(l="cssFloat"),u?i.setProperty(l,f):i[l]=f}}var xe=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Me(i,s){if(s){if(xe[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(r(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(r(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(r(61))}if(s.style!=null&&typeof s.style!="object")throw Error(r(62))}}function O(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qt=null;function tt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var zt=null,ir=null,Yt=null;function vr(i){if(i=Ya(i)){if(typeof zt!="function")throw Error(r(280));var s=i.stateNode;s&&(s=ul(s),zt(i.stateNode,i.type,s))}}function Tr(i){ir?Yt?Yt.push(i):Yt=[i]:ir=i}function J(){if(ir){var i=ir,s=Yt;if(Yt=ir=null,vr(i),s)for(i=0;i<s.length;i++)vr(s[i])}}function be(i,s){return i(s)}function De(){}var K=!1;function qe(i,s,l){if(K)return i(s,l);K=!0;try{return be(i,s,l)}finally{K=!1,(ir!==null||Yt!==null)&&(De(),J())}}function Ct(i,s){var l=i.stateNode;if(l===null)return null;var u=ul(l);if(u===null)return null;l=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,s,typeof l));return l}var Lt=!1;if(p)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch{Lt=!1}function Bt(i,s,l,u,f,x,v,W,oe){var Ue=Array.prototype.slice.call(arguments,3);try{s.apply(l,Ue)}catch(Ye){this.onError(Ye)}}var X=!1,$=null,Ze=!1,ft=null,ne={onError:function(i){X=!0,$=i}};function Le(i,s,l,u,f,x,v,W,oe){X=!1,$=null,Bt.apply(ne,arguments)}function Fe(i,s,l,u,f,x,v,W,oe){if(Le.apply(this,arguments),X){if(X){var Ue=$;X=!1,$=null}else throw Error(r(198));Ze||(Ze=!0,ft=Ue)}}function rt(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function bt(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function gt(i){if(rt(i)!==i)throw Error(r(188))}function Ot(i){var s=i.alternate;if(!s){if(s=rt(i),s===null)throw Error(r(188));return s!==i?null:i}for(var l=i,u=s;;){var f=l.return;if(f===null)break;var x=f.alternate;if(x===null){if(u=f.return,u!==null){l=u;continue}break}if(f.child===x.child){for(x=f.child;x;){if(x===l)return gt(f),i;if(x===u)return gt(f),s;x=x.sibling}throw Error(r(188))}if(l.return!==u.return)l=f,u=x;else{for(var v=!1,W=f.child;W;){if(W===l){v=!0,l=f,u=x;break}if(W===u){v=!0,u=f,l=x;break}W=W.sibling}if(!v){for(W=x.child;W;){if(W===l){v=!0,l=x,u=f;break}if(W===u){v=!0,u=x,l=f;break}W=W.sibling}if(!v)throw Error(r(189))}}if(l.alternate!==u)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:s}function Dr(i){return i=Ot(i),i!==null?yr(i):null}function yr(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=yr(i);if(s!==null)return s;i=i.sibling}return null}var cr=e.unstable_scheduleCallback,Po=e.unstable_cancelCallback,Wi=e.unstable_shouldYield,No=e.unstable_requestPaint,sr=e.unstable_now,ii=e.unstable_getCurrentPriorityLevel,Qa=e.unstable_ImmediatePriority,XA=e.unstable_UserBlockingPriority,ao=e.unstable_NormalPriority,qA=e.unstable_LowPriority,ks=e.unstable_IdlePriority,js=null,Fr=null;function Ts(i){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(js,i,void 0,(i.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:ZA,Xd=Math.log,qd=Math.LN2;function ZA(i){return i>>>=0,i===0?32:31-(Xd(i)/qd|0)|0}var Gi=64,Fs=4194304;function $i(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Vi(i,s){var l=i.pendingLanes;if(l===0)return 0;var u=0,f=i.suspendedLanes,x=i.pingedLanes,v=l&268435455;if(v!==0){var W=v&~f;W!==0?u=$i(W):(x&=v,x!==0&&(u=$i(x)))}else v=l&~f,v!==0?u=$i(v):x!==0&&(u=$i(x));if(u===0)return 0;if(s!==0&&s!==u&&(s&f)===0&&(f=u&-u,x=s&-s,f>=x||f===16&&(x&4194240)!==0))return s;if((u&4)!==0&&(u|=l&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=u;0<s;)l=31-Mn(s),f=1<<l,u|=i[l],s&=~f;return u}function Zd(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eu(i,s){for(var l=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,x=i.pendingLanes;0<x;){var v=31-Mn(x),W=1<<v,oe=f[v];oe===-1?((W&l)===0||(W&u)!==0)&&(f[v]=Zd(W,s)):oe<=s&&(i.expiredLanes|=W),x&=~W}}function Us(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Qe(){var i=Gi;return Gi<<=1,(Gi&4194240)===0&&(Gi=64),i}function Qs(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function si(i,s,l){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-Mn(s),i[s]=l}function el(i,s){var l=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var u=i.eventTimes;for(i=i.expirationTimes;0<l;){var f=31-Mn(l),x=1<<f;s[f]=0,u[f]=-1,i[f]=-1,l&=~x}}function Rs(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var u=31-Mn(l),f=1<<u;f&s|i[u]&s&&(i[u]|=s),l&=~f}}var Kt=0;function Ra(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ma,I,te,He,We,Et=!1,Wt=[],ct=null,st=null,Nt=null,Zt=new Map,qr=new Map,Zr=[],mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(i,s){switch(i){case"focusin":case"focusout":ct=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Zt.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":qr.delete(s.pointerId)}}function dr(i,s,l,u,f,x){return i===null||i.nativeEvent!==x?(i={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:x,targetContainers:[f]},s!==null&&(s=Ya(s),s!==null&&I(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function Wn(i,s,l,u,f){switch(s){case"focusin":return ct=dr(ct,i,s,l,u,f),!0;case"dragenter":return st=dr(st,i,s,l,u,f),!0;case"mouseover":return Nt=dr(Nt,i,s,l,u,f),!0;case"pointerover":var x=f.pointerId;return Zt.set(x,dr(Zt.get(x)||null,i,s,l,u,f)),!0;case"gotpointercapture":return x=f.pointerId,qr.set(x,dr(qr.get(x)||null,i,s,l,u,f)),!0}return!1}function Gn(i){var s=qi(i.target);if(s!==null){var l=rt(s);if(l!==null){if(s=l.tag,s===13){if(s=bt(l),s!==null){i.blockedOn=s,We(i.priority,function(){te(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Yi(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=Ji(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var u=new l.constructor(l.type,l);Qt=u,l.target.dispatchEvent(u),Qt=null}else return s=Ya(l),s!==null&&I(s),i.blockedOn=l,!1;s.shift()}return!0}function Mt(i,s,l){Yi(i)&&l.delete(s)}function rr(){Et=!1,ct!==null&&Yi(ct)&&(ct=null),st!==null&&Yi(st)&&(st=null),Nt!==null&&Yi(Nt)&&(Nt=null),Zt.forEach(Mt),qr.forEach(Mt)}function Gt(i,s){i.blockedOn===s&&(i.blockedOn=null,Et||(Et=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rr)))}function hr(i){function s(f){return Gt(f,i)}if(0<Wt.length){Gt(Wt[0],i);for(var l=1;l<Wt.length;l++){var u=Wt[l];u.blockedOn===i&&(u.blockedOn=null)}}for(ct!==null&&Gt(ct,i),st!==null&&Gt(st,i),Nt!==null&&Gt(Nt,i),Zt.forEach(s),qr.forEach(s),l=0;l<Zr.length;l++)u=Zr[l],u.blockedOn===i&&(u.blockedOn=null);for(;0<Zr.length&&(l=Zr[0],l.blockedOn===null);)Gn(l),l.blockedOn===null&&Zr.shift()}var mn=fe.ReactCurrentBatchConfig,$n=!0;function La(i,s,l,u){var f=Kt,x=mn.transition;mn.transition=null;try{Kt=1,Ho(i,s,l,u)}finally{Kt=f,mn.transition=x}}function Da(i,s,l,u){var f=Kt,x=mn.transition;mn.transition=null;try{Kt=4,Ho(i,s,l,u)}finally{Kt=f,mn.transition=x}}function Ho(i,s,l,u){if($n){var f=Ji(i,s,l,u);if(f===null)fu(i,s,u,ai,l),Rt(i,u);else if(Wn(f,i,s,l,u))u.stopPropagation();else if(Rt(i,u),s&4&&-1<mt.indexOf(i)){for(;f!==null;){var x=Ya(f);if(x!==null&&Ma(x),x=Ji(i,s,l,u),x===null&&fu(i,s,u,ai,l),x===f)break;f=x}f!==null&&u.stopPropagation()}else fu(i,s,u,null,l)}}var ai=null;function Ji(i,s,l,u){if(ai=null,i=tt(u),i=qi(i),i!==null)if(s=rt(i),s===null)i=null;else if(l=s.tag,l===13){if(i=bt(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return ai=i,null}function Ai(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ii()){case Qa:return 1;case XA:return 4;case ao:case qA:return 16;case ks:return 536870912;default:return 16}default:return 16}}var So=null,Xi=null,tl=null;function yf(){if(tl)return tl;var i,s=Xi,l=s.length,u,f="value"in So?So.value:So.textContent,x=f.length;for(i=0;i<l&&s[i]===f[i];i++);var v=l-i;for(u=1;u<=v&&s[l-u]===f[x-u];u++);return tl=f.slice(i,1<u?1-u:void 0)}function rl(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function nl(){return!0}function bf(){return!1}function Ln(i){function s(l,u,f,x,v){this._reactName=l,this._targetInst=f,this.type=u,this.nativeEvent=x,this.target=v,this.currentTarget=null;for(var W in i)i.hasOwnProperty(W)&&(l=i[W],this[W]=l?l(x):x[W]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?nl:bf,this.isPropagationStopped=bf,this}return G(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=nl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=nl)},persist:function(){},isPersistent:nl}),s}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tu=Ln(Ms),Pa=G({},Ms,{view:0,detail:0}),v2=Ln(Pa),ru,nu,Na,ol=G({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Na&&(Na&&i.type==="mousemove"?(ru=i.screenX-Na.screenX,nu=i.screenY-Na.screenY):nu=ru=0,Na=i),ru)},movementY:function(i){return"movementY"in i?i.movementY:nu}}),wf=Ln(ol),C2=G({},ol,{dataTransfer:0}),B2=Ln(C2),S2=G({},Pa,{relatedTarget:0}),ou=Ln(S2),I2=G({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),E2=Ln(I2),k2=G({},Ms,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),j2=Ln(k2),T2=G({},Ms,{data:0}),vf=Ln(T2),F2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R2(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Q2[i])?!!s[i]:!1}function iu(){return R2}var M2=G({},Pa,{key:function(i){if(i.key){var s=F2[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=rl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?U2[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iu,charCode:function(i){return i.type==="keypress"?rl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?rl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),L2=Ln(M2),D2=G({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cf=Ln(D2),P2=G({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iu}),N2=Ln(P2),H2=G({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),O2=Ln(H2),_2=G({},ol,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),z2=Ln(_2),K2=[9,13,27,32],su=p&&"CompositionEvent"in window,Ha=null;p&&"documentMode"in document&&(Ha=document.documentMode);var W2=p&&"TextEvent"in window&&!Ha,Bf=p&&(!su||Ha&&8<Ha&&11>=Ha),Sf=" ",If=!1;function Ef(i,s){switch(i){case"keyup":return K2.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kf(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ls=!1;function G2(i,s){switch(i){case"compositionend":return kf(s);case"keypress":return s.which!==32?null:(If=!0,Sf);case"textInput":return i=s.data,i===Sf&&If?null:i;default:return null}}function $2(i,s){if(Ls)return i==="compositionend"||!su&&Ef(i,s)?(i=yf(),tl=Xi=So=null,Ls=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Bf&&s.locale!=="ko"?null:s.data;default:return null}}var V2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!V2[i.type]:s==="textarea"}function Tf(i,s,l,u){Tr(u),s=ll(s,"onChange"),0<s.length&&(l=new tu("onChange","change",null,l,u),i.push({event:l,listeners:s}))}var Oa=null,_a=null;function Y2(i){Vf(i,0)}function il(i){var s=Os(i);if(nt(s))return i}function J2(i,s){if(i==="change")return s}var Ff=!1;if(p){var au;if(p){var Au="oninput"in document;if(!Au){var Uf=document.createElement("div");Uf.setAttribute("oninput","return;"),Au=typeof Uf.oninput=="function"}au=Au}else au=!1;Ff=au&&(!document.documentMode||9<document.documentMode)}function Qf(){Oa&&(Oa.detachEvent("onpropertychange",Rf),_a=Oa=null)}function Rf(i){if(i.propertyName==="value"&&il(_a)){var s=[];Tf(s,_a,i,tt(i)),qe(Y2,s)}}function X2(i,s,l){i==="focusin"?(Qf(),Oa=s,_a=l,Oa.attachEvent("onpropertychange",Rf)):i==="focusout"&&Qf()}function q2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return il(_a)}function Z2(i,s){if(i==="click")return il(s)}function ev(i,s){if(i==="input"||i==="change")return il(s)}function tv(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Ao=typeof Object.is=="function"?Object.is:tv;function za(i,s){if(Ao(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var f=l[u];if(!d.call(s,f)||!Ao(i[f],s[f]))return!1}return!0}function Mf(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Lf(i,s){var l=Mf(i);i=0;for(var u;l;){if(l.nodeType===3){if(u=i+l.textContent.length,i<=s&&u>=s)return{node:l,offset:s-i};i=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Mf(l)}}function Df(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Df(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Pf(){for(var i=window,s=yt();s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=yt(i.document)}return s}function lu(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function rv(i){var s=Pf(),l=i.focusedElem,u=i.selectionRange;if(s!==l&&l&&l.ownerDocument&&Df(l.ownerDocument.documentElement,l)){if(u!==null&&lu(l)){if(s=u.start,i=u.end,i===void 0&&(i=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(i,l.value.length);else if(i=(s=l.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var f=l.textContent.length,x=Math.min(u.start,f);u=u.end===void 0?x:Math.min(u.end,f),!i.extend&&x>u&&(f=u,u=x,x=f),f=Lf(l,x);var v=Lf(l,u);f&&v&&(i.rangeCount!==1||i.anchorNode!==f.node||i.anchorOffset!==f.offset||i.focusNode!==v.node||i.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),i.removeAllRanges(),x>u?(i.addRange(s),i.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),i.addRange(s)))}}for(s=[],i=l;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)i=s[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var nv=p&&"documentMode"in document&&11>=document.documentMode,Ds=null,cu=null,Ka=null,du=!1;function Nf(i,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;du||Ds==null||Ds!==yt(u)||(u=Ds,"selectionStart"in u&&lu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ka&&za(Ka,u)||(Ka=u,u=ll(cu,"onSelect"),0<u.length&&(s=new tu("onSelect","select",null,s,l),i.push({event:s,listeners:u}),s.target=Ds)))}function sl(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var Ps={animationend:sl("Animation","AnimationEnd"),animationiteration:sl("Animation","AnimationIteration"),animationstart:sl("Animation","AnimationStart"),transitionend:sl("Transition","TransitionEnd")},uu={},Hf={};p&&(Hf=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function al(i){if(uu[i])return uu[i];if(!Ps[i])return i;var s=Ps[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in Hf)return uu[i]=s[l];return i}var Of=al("animationend"),_f=al("animationiteration"),zf=al("animationstart"),Kf=al("transitionend"),Wf=new Map,Gf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(i,s){Wf.set(i,s),A(s,[i])}for(var pu=0;pu<Gf.length;pu++){var gu=Gf[pu],ov=gu.toLowerCase(),iv=gu[0].toUpperCase()+gu.slice(1);li(ov,"on"+iv)}li(Of,"onAnimationEnd"),li(_f,"onAnimationIteration"),li(zf,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(Kf,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),A("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),A("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),A("onBeforeInput",["compositionend","keypress","textInput","paste"]),A("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),A("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),A("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wa));function $f(i,s,l){var u=i.type||"unknown-event";i.currentTarget=l,Fe(u,s,void 0,i),i.currentTarget=null}function Vf(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var u=i[l],f=u.event;u=u.listeners;e:{var x=void 0;if(s)for(var v=u.length-1;0<=v;v--){var W=u[v],oe=W.instance,Ue=W.currentTarget;if(W=W.listener,oe!==x&&f.isPropagationStopped())break e;$f(f,W,Ue),x=oe}else for(v=0;v<u.length;v++){if(W=u[v],oe=W.instance,Ue=W.currentTarget,W=W.listener,oe!==x&&f.isPropagationStopped())break e;$f(f,W,Ue),x=oe}}}if(Ze)throw i=ft,Ze=!1,ft=null,i}function ur(i,s){var l=s[vu];l===void 0&&(l=s[vu]=new Set);var u=i+"__bubble";l.has(u)||(Yf(s,i,2,!1),l.add(u))}function hu(i,s,l){var u=0;s&&(u|=4),Yf(l,i,u,s)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Ga(i){if(!i[Al]){i[Al]=!0,n.forEach(function(l){l!=="selectionchange"&&(sv.has(l)||hu(l,!1,i),hu(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Al]||(s[Al]=!0,hu("selectionchange",!1,s))}}function Yf(i,s,l,u){switch(Ai(s)){case 1:var f=La;break;case 4:f=Da;break;default:f=Ho}l=f.bind(null,s,l,i),f=void 0,!Lt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,l,{capture:!0,passive:f}):i.addEventListener(s,l,!0):f!==void 0?i.addEventListener(s,l,{passive:f}):i.addEventListener(s,l,!1)}function fu(i,s,l,u,f){var x=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var W=u.stateNode.containerInfo;if(W===f||W.nodeType===8&&W.parentNode===f)break;if(v===4)for(v=u.return;v!==null;){var oe=v.tag;if((oe===3||oe===4)&&(oe=v.stateNode.containerInfo,oe===f||oe.nodeType===8&&oe.parentNode===f))return;v=v.return}for(;W!==null;){if(v=qi(W),v===null)return;if(oe=v.tag,oe===5||oe===6){u=x=v;continue e}W=W.parentNode}}u=u.return}qe(function(){var Ue=x,Ye=tt(l),Je=[];e:{var $e=Wf.get(i);if($e!==void 0){var at=tu,ht=i;switch(i){case"keypress":if(rl(l)===0)break e;case"keydown":case"keyup":at=L2;break;case"focusin":ht="focus",at=ou;break;case"focusout":ht="blur",at=ou;break;case"beforeblur":case"afterblur":at=ou;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=wf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=B2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=N2;break;case Of:case _f:case zf:at=E2;break;case Kf:at=O2;break;case"scroll":at=v2;break;case"wheel":at=z2;break;case"copy":case"cut":case"paste":at=j2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Cf}var xt=(s&4)!==0,Ir=!xt&&i==="scroll",Se=xt?$e!==null?$e+"Capture":null:$e;xt=[];for(var he=Ue,je;he!==null;){je=he;var et=je.stateNode;if(je.tag===5&&et!==null&&(je=et,Se!==null&&(et=Ct(he,Se),et!=null&&xt.push($a(he,et,je)))),Ir)break;he=he.return}0<xt.length&&($e=new at($e,ht,null,l,Ye),Je.push({event:$e,listeners:xt}))}}if((s&7)===0){e:{if($e=i==="mouseover"||i==="pointerover",at=i==="mouseout"||i==="pointerout",$e&&l!==Qt&&(ht=l.relatedTarget||l.fromElement)&&(qi(ht)||ht[Oo]))break e;if((at||$e)&&($e=Ye.window===Ye?Ye:($e=Ye.ownerDocument)?$e.defaultView||$e.parentWindow:window,at?(ht=l.relatedTarget||l.toElement,at=Ue,ht=ht?qi(ht):null,ht!==null&&(Ir=rt(ht),ht!==Ir||ht.tag!==5&&ht.tag!==6)&&(ht=null)):(at=null,ht=Ue),at!==ht)){if(xt=wf,et="onMouseLeave",Se="onMouseEnter",he="mouse",(i==="pointerout"||i==="pointerover")&&(xt=Cf,et="onPointerLeave",Se="onPointerEnter",he="pointer"),Ir=at==null?$e:Os(at),je=ht==null?$e:Os(ht),$e=new xt(et,he+"leave",at,l,Ye),$e.target=Ir,$e.relatedTarget=je,et=null,qi(Ye)===Ue&&(xt=new xt(Se,he+"enter",ht,l,Ye),xt.target=je,xt.relatedTarget=Ir,et=xt),Ir=et,at&&ht)t:{for(xt=at,Se=ht,he=0,je=xt;je;je=Ns(je))he++;for(je=0,et=Se;et;et=Ns(et))je++;for(;0<he-je;)xt=Ns(xt),he--;for(;0<je-he;)Se=Ns(Se),je--;for(;he--;){if(xt===Se||Se!==null&&xt===Se.alternate)break t;xt=Ns(xt),Se=Ns(Se)}xt=null}else xt=null;at!==null&&Jf(Je,$e,at,xt,!1),ht!==null&&Ir!==null&&Jf(Je,Ir,ht,xt,!0)}}e:{if($e=Ue?Os(Ue):window,at=$e.nodeName&&$e.nodeName.toLowerCase(),at==="select"||at==="input"&&$e.type==="file")var vt=J2;else if(jf($e))if(Ff)vt=ev;else{vt=q2;var kt=X2}else(at=$e.nodeName)&&at.toLowerCase()==="input"&&($e.type==="checkbox"||$e.type==="radio")&&(vt=Z2);if(vt&&(vt=vt(i,Ue))){Tf(Je,vt,l,Ye);break e}kt&&kt(i,$e,Ue),i==="focusout"&&(kt=$e._wrapperState)&&kt.controlled&&$e.type==="number"&&Ne($e,"number",$e.value)}switch(kt=Ue?Os(Ue):window,i){case"focusin":(jf(kt)||kt.contentEditable==="true")&&(Ds=kt,cu=Ue,Ka=null);break;case"focusout":Ka=cu=Ds=null;break;case"mousedown":du=!0;break;case"contextmenu":case"mouseup":case"dragend":du=!1,Nf(Je,l,Ye);break;case"selectionchange":if(nv)break;case"keydown":case"keyup":Nf(Je,l,Ye)}var jt;if(su)e:{switch(i){case"compositionstart":var Ft="onCompositionStart";break e;case"compositionend":Ft="onCompositionEnd";break e;case"compositionupdate":Ft="onCompositionUpdate";break e}Ft=void 0}else Ls?Ef(i,l)&&(Ft="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ft="onCompositionStart");Ft&&(Bf&&l.locale!=="ko"&&(Ls||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&Ls&&(jt=yf()):(So=Ye,Xi="value"in So?So.value:So.textContent,Ls=!0)),kt=ll(Ue,Ft),0<kt.length&&(Ft=new vf(Ft,i,null,l,Ye),Je.push({event:Ft,listeners:kt}),jt?Ft.data=jt:(jt=kf(l),jt!==null&&(Ft.data=jt)))),(jt=W2?G2(i,l):$2(i,l))&&(Ue=ll(Ue,"onBeforeInput"),0<Ue.length&&(Ye=new vf("onBeforeInput","beforeinput",null,l,Ye),Je.push({event:Ye,listeners:Ue}),Ye.data=jt))}Vf(Je,s)})}function $a(i,s,l){return{instance:i,listener:s,currentTarget:l}}function ll(i,s){for(var l=s+"Capture",u=[];i!==null;){var f=i,x=f.stateNode;f.tag===5&&x!==null&&(f=x,x=Ct(i,l),x!=null&&u.unshift($a(i,x,f)),x=Ct(i,s),x!=null&&u.push($a(i,x,f))),i=i.return}return u}function Ns(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Jf(i,s,l,u,f){for(var x=s._reactName,v=[];l!==null&&l!==u;){var W=l,oe=W.alternate,Ue=W.stateNode;if(oe!==null&&oe===u)break;W.tag===5&&Ue!==null&&(W=Ue,f?(oe=Ct(l,x),oe!=null&&v.unshift($a(l,oe,W))):f||(oe=Ct(l,x),oe!=null&&v.push($a(l,oe,W)))),l=l.return}v.length!==0&&i.push({event:s,listeners:v})}var av=/\r\n?/g,Av=/\u0000|\uFFFD/g;function Xf(i){return(typeof i=="string"?i:""+i).replace(av,`
`).replace(Av,"")}function cl(i,s,l){if(s=Xf(s),Xf(i)!==s&&l)throw Error(r(425))}function dl(){}var mu=null,xu=null;function yu(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var bu=typeof setTimeout=="function"?setTimeout:void 0,lv=typeof clearTimeout=="function"?clearTimeout:void 0,qf=typeof Promise=="function"?Promise:void 0,cv=typeof queueMicrotask=="function"?queueMicrotask:typeof qf<"u"?function(i){return qf.resolve(null).then(i).catch(dv)}:bu;function dv(i){setTimeout(function(){throw i})}function wu(i,s){var l=s,u=0;do{var f=l.nextSibling;if(i.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(u===0){i.removeChild(f),hr(s);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=f}while(l);hr(s)}function ci(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function Zf(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return i;s--}else l==="/$"&&s++}i=i.previousSibling}return null}var Hs=Math.random().toString(36).slice(2),Io="__reactFiber$"+Hs,Va="__reactProps$"+Hs,Oo="__reactContainer$"+Hs,vu="__reactEvents$"+Hs,uv="__reactListeners$"+Hs,pv="__reactHandles$"+Hs;function qi(i){var s=i[Io];if(s)return s;for(var l=i.parentNode;l;){if(s=l[Oo]||l[Io]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=Zf(i);i!==null;){if(l=i[Io])return l;i=Zf(i)}return s}i=l,l=i.parentNode}return null}function Ya(i){return i=i[Io]||i[Oo],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Os(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(r(33))}function ul(i){return i[Va]||null}var Cu=[],_s=-1;function di(i){return{current:i}}function pr(i){0>_s||(i.current=Cu[_s],Cu[_s]=null,_s--)}function Ar(i,s){_s++,Cu[_s]=i.current,i.current=s}var ui={},ln=di(ui),Bn=di(!1),Zi=ui;function zs(i,s){var l=i.type.contextTypes;if(!l)return ui;var u=i.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===s)return u.__reactInternalMemoizedMaskedChildContext;var f={},x;for(x in l)f[x]=s[x];return u&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=f),f}function Sn(i){return i=i.childContextTypes,i!=null}function pl(){pr(Bn),pr(ln)}function e0(i,s,l){if(ln.current!==ui)throw Error(r(168));Ar(ln,s),Ar(Bn,l)}function t0(i,s,l){var u=i.stateNode;if(s=s.childContextTypes,typeof u.getChildContext!="function")return l;u=u.getChildContext();for(var f in u)if(!(f in s))throw Error(r(108,Oe(i)||"Unknown",f));return G({},l,u)}function gl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ui,Zi=ln.current,Ar(ln,i),Ar(Bn,Bn.current),!0}function r0(i,s,l){var u=i.stateNode;if(!u)throw Error(r(169));l?(i=t0(i,s,Zi),u.__reactInternalMemoizedMergedChildContext=i,pr(Bn),pr(ln),Ar(ln,i)):pr(Bn),Ar(Bn,l)}var _o=null,hl=!1,Bu=!1;function n0(i){_o===null?_o=[i]:_o.push(i)}function gv(i){hl=!0,n0(i)}function pi(){if(!Bu&&_o!==null){Bu=!0;var i=0,s=Kt;try{var l=_o;for(Kt=1;i<l.length;i++){var u=l[i];do u=u(!0);while(u!==null)}_o=null,hl=!1}catch(f){throw _o!==null&&(_o=_o.slice(i+1)),cr(Qa,pi),f}finally{Kt=s,Bu=!1}}return null}var Ks=[],Ws=0,fl=null,ml=0,Vn=[],Yn=0,es=null,zo=1,Ko="";function ts(i,s){Ks[Ws++]=ml,Ks[Ws++]=fl,fl=i,ml=s}function o0(i,s,l){Vn[Yn++]=zo,Vn[Yn++]=Ko,Vn[Yn++]=es,es=i;var u=zo;i=Ko;var f=32-Mn(u)-1;u&=~(1<<f),l+=1;var x=32-Mn(s)+f;if(30<x){var v=f-f%5;x=(u&(1<<v)-1).toString(32),u>>=v,f-=v,zo=1<<32-Mn(s)+f|l<<f|u,Ko=x+i}else zo=1<<x|l<<f|u,Ko=i}function Su(i){i.return!==null&&(ts(i,1),o0(i,1,0))}function Iu(i){for(;i===fl;)fl=Ks[--Ws],Ks[Ws]=null,ml=Ks[--Ws],Ks[Ws]=null;for(;i===es;)es=Vn[--Yn],Vn[Yn]=null,Ko=Vn[--Yn],Vn[Yn]=null,zo=Vn[--Yn],Vn[Yn]=null}var Dn=null,Pn=null,fr=!1,lo=null;function i0(i,s){var l=Zn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=i,s=i.deletions,s===null?(i.deletions=[l],i.flags|=16):s.push(l)}function s0(i,s){switch(i.tag){case 5:var l=i.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,Dn=i,Pn=ci(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,Dn=i,Pn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=es!==null?{id:zo,overflow:Ko}:null,i.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Zn(18,null,null,0),l.stateNode=s,l.return=i,i.child=l,Dn=i,Pn=null,!0):!1;default:return!1}}function Eu(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ku(i){if(fr){var s=Pn;if(s){var l=s;if(!s0(i,s)){if(Eu(i))throw Error(r(418));s=ci(l.nextSibling);var u=Dn;s&&s0(i,s)?i0(u,l):(i.flags=i.flags&-4097|2,fr=!1,Dn=i)}}else{if(Eu(i))throw Error(r(418));i.flags=i.flags&-4097|2,fr=!1,Dn=i}}}function a0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Dn=i}function xl(i){if(i!==Dn)return!1;if(!fr)return a0(i),fr=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!yu(i.type,i.memoizedProps)),s&&(s=Pn)){if(Eu(i))throw A0(),Error(r(418));for(;s;)i0(i,s),s=ci(s.nextSibling)}if(a0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(s===0){Pn=ci(i.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}i=i.nextSibling}Pn=null}}else Pn=Dn?ci(i.stateNode.nextSibling):null;return!0}function A0(){for(var i=Pn;i;)i=ci(i.nextSibling)}function Gs(){Pn=Dn=null,fr=!1}function ju(i){lo===null?lo=[i]:lo.push(i)}var hv=fe.ReactCurrentBatchConfig;function Ja(i,s,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(r(309));var u=l.stateNode}if(!u)throw Error(r(147,i));var f=u,x=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===x?s.ref:(s=function(v){var W=f.refs;v===null?delete W[x]:W[x]=v},s._stringRef=x,s)}if(typeof i!="string")throw Error(r(284));if(!l._owner)throw Error(r(290,i))}return i}function yl(i,s){throw i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function l0(i){var s=i._init;return s(i._payload)}function c0(i){function s(Se,he){if(i){var je=Se.deletions;je===null?(Se.deletions=[he],Se.flags|=16):je.push(he)}}function l(Se,he){if(!i)return null;for(;he!==null;)s(Se,he),he=he.sibling;return null}function u(Se,he){for(Se=new Map;he!==null;)he.key!==null?Se.set(he.key,he):Se.set(he.index,he),he=he.sibling;return Se}function f(Se,he){return Se=wi(Se,he),Se.index=0,Se.sibling=null,Se}function x(Se,he,je){return Se.index=je,i?(je=Se.alternate,je!==null?(je=je.index,je<he?(Se.flags|=2,he):je):(Se.flags|=2,he)):(Se.flags|=1048576,he)}function v(Se){return i&&Se.alternate===null&&(Se.flags|=2),Se}function W(Se,he,je,et){return he===null||he.tag!==6?(he=bp(je,Se.mode,et),he.return=Se,he):(he=f(he,je),he.return=Se,he)}function oe(Se,he,je,et){var vt=je.type;return vt===ee?Ye(Se,he,je.props.children,et,je.key):he!==null&&(he.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===Ee&&l0(vt)===he.type)?(et=f(he,je.props),et.ref=Ja(Se,he,je),et.return=Se,et):(et=zl(je.type,je.key,je.props,null,Se.mode,et),et.ref=Ja(Se,he,je),et.return=Se,et)}function Ue(Se,he,je,et){return he===null||he.tag!==4||he.stateNode.containerInfo!==je.containerInfo||he.stateNode.implementation!==je.implementation?(he=wp(je,Se.mode,et),he.return=Se,he):(he=f(he,je.children||[]),he.return=Se,he)}function Ye(Se,he,je,et,vt){return he===null||he.tag!==7?(he=ls(je,Se.mode,et,vt),he.return=Se,he):(he=f(he,je),he.return=Se,he)}function Je(Se,he,je){if(typeof he=="string"&&he!==""||typeof he=="number")return he=bp(""+he,Se.mode,je),he.return=Se,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case F:return je=zl(he.type,he.key,he.props,null,Se.mode,je),je.ref=Ja(Se,null,he),je.return=Se,je;case ae:return he=wp(he,Se.mode,je),he.return=Se,he;case Ee:var et=he._init;return Je(Se,et(he._payload),je)}if(B(he)||_(he))return he=ls(he,Se.mode,je,null),he.return=Se,he;yl(Se,he)}return null}function $e(Se,he,je,et){var vt=he!==null?he.key:null;if(typeof je=="string"&&je!==""||typeof je=="number")return vt!==null?null:W(Se,he,""+je,et);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case F:return je.key===vt?oe(Se,he,je,et):null;case ae:return je.key===vt?Ue(Se,he,je,et):null;case Ee:return vt=je._init,$e(Se,he,vt(je._payload),et)}if(B(je)||_(je))return vt!==null?null:Ye(Se,he,je,et,null);yl(Se,je)}return null}function at(Se,he,je,et,vt){if(typeof et=="string"&&et!==""||typeof et=="number")return Se=Se.get(je)||null,W(he,Se,""+et,vt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case F:return Se=Se.get(et.key===null?je:et.key)||null,oe(he,Se,et,vt);case ae:return Se=Se.get(et.key===null?je:et.key)||null,Ue(he,Se,et,vt);case Ee:var kt=et._init;return at(Se,he,je,kt(et._payload),vt)}if(B(et)||_(et))return Se=Se.get(je)||null,Ye(he,Se,et,vt,null);yl(he,et)}return null}function ht(Se,he,je,et){for(var vt=null,kt=null,jt=he,Ft=he=0,$r=null;jt!==null&&Ft<je.length;Ft++){jt.index>Ft?($r=jt,jt=null):$r=jt.sibling;var $t=$e(Se,jt,je[Ft],et);if($t===null){jt===null&&(jt=$r);break}i&&jt&&$t.alternate===null&&s(Se,jt),he=x($t,he,Ft),kt===null?vt=$t:kt.sibling=$t,kt=$t,jt=$r}if(Ft===je.length)return l(Se,jt),fr&&ts(Se,Ft),vt;if(jt===null){for(;Ft<je.length;Ft++)jt=Je(Se,je[Ft],et),jt!==null&&(he=x(jt,he,Ft),kt===null?vt=jt:kt.sibling=jt,kt=jt);return fr&&ts(Se,Ft),vt}for(jt=u(Se,jt);Ft<je.length;Ft++)$r=at(jt,Se,Ft,je[Ft],et),$r!==null&&(i&&$r.alternate!==null&&jt.delete($r.key===null?Ft:$r.key),he=x($r,he,Ft),kt===null?vt=$r:kt.sibling=$r,kt=$r);return i&&jt.forEach(function(vi){return s(Se,vi)}),fr&&ts(Se,Ft),vt}function xt(Se,he,je,et){var vt=_(je);if(typeof vt!="function")throw Error(r(150));if(je=vt.call(je),je==null)throw Error(r(151));for(var kt=vt=null,jt=he,Ft=he=0,$r=null,$t=je.next();jt!==null&&!$t.done;Ft++,$t=je.next()){jt.index>Ft?($r=jt,jt=null):$r=jt.sibling;var vi=$e(Se,jt,$t.value,et);if(vi===null){jt===null&&(jt=$r);break}i&&jt&&vi.alternate===null&&s(Se,jt),he=x(vi,he,Ft),kt===null?vt=vi:kt.sibling=vi,kt=vi,jt=$r}if($t.done)return l(Se,jt),fr&&ts(Se,Ft),vt;if(jt===null){for(;!$t.done;Ft++,$t=je.next())$t=Je(Se,$t.value,et),$t!==null&&(he=x($t,he,Ft),kt===null?vt=$t:kt.sibling=$t,kt=$t);return fr&&ts(Se,Ft),vt}for(jt=u(Se,jt);!$t.done;Ft++,$t=je.next())$t=at(jt,Se,Ft,$t.value,et),$t!==null&&(i&&$t.alternate!==null&&jt.delete($t.key===null?Ft:$t.key),he=x($t,he,Ft),kt===null?vt=$t:kt.sibling=$t,kt=$t);return i&&jt.forEach(function(Vv){return s(Se,Vv)}),fr&&ts(Se,Ft),vt}function Ir(Se,he,je,et){if(typeof je=="object"&&je!==null&&je.type===ee&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case F:e:{for(var vt=je.key,kt=he;kt!==null;){if(kt.key===vt){if(vt=je.type,vt===ee){if(kt.tag===7){l(Se,kt.sibling),he=f(kt,je.props.children),he.return=Se,Se=he;break e}}else if(kt.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===Ee&&l0(vt)===kt.type){l(Se,kt.sibling),he=f(kt,je.props),he.ref=Ja(Se,kt,je),he.return=Se,Se=he;break e}l(Se,kt);break}else s(Se,kt);kt=kt.sibling}je.type===ee?(he=ls(je.props.children,Se.mode,et,je.key),he.return=Se,Se=he):(et=zl(je.type,je.key,je.props,null,Se.mode,et),et.ref=Ja(Se,he,je),et.return=Se,Se=et)}return v(Se);case ae:e:{for(kt=je.key;he!==null;){if(he.key===kt)if(he.tag===4&&he.stateNode.containerInfo===je.containerInfo&&he.stateNode.implementation===je.implementation){l(Se,he.sibling),he=f(he,je.children||[]),he.return=Se,Se=he;break e}else{l(Se,he);break}else s(Se,he);he=he.sibling}he=wp(je,Se.mode,et),he.return=Se,Se=he}return v(Se);case Ee:return kt=je._init,Ir(Se,he,kt(je._payload),et)}if(B(je))return ht(Se,he,je,et);if(_(je))return xt(Se,he,je,et);yl(Se,je)}return typeof je=="string"&&je!==""||typeof je=="number"?(je=""+je,he!==null&&he.tag===6?(l(Se,he.sibling),he=f(he,je),he.return=Se,Se=he):(l(Se,he),he=bp(je,Se.mode,et),he.return=Se,Se=he),v(Se)):l(Se,he)}return Ir}var $s=c0(!0),d0=c0(!1),bl=di(null),wl=null,Vs=null,Tu=null;function Fu(){Tu=Vs=wl=null}function Uu(i){var s=bl.current;pr(bl),i._currentValue=s}function Qu(i,s,l){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===l)break;i=i.return}}function Ys(i,s){wl=i,Tu=Vs=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&s)!==0&&(In=!0),i.firstContext=null)}function Jn(i){var s=i._currentValue;if(Tu!==i)if(i={context:i,memoizedValue:s,next:null},Vs===null){if(wl===null)throw Error(r(308));Vs=i,wl.dependencies={lanes:0,firstContext:i}}else Vs=Vs.next=i;return s}var rs=null;function Ru(i){rs===null?rs=[i]:rs.push(i)}function u0(i,s,l,u){var f=s.interleaved;return f===null?(l.next=l,Ru(s)):(l.next=f.next,f.next=l),s.interleaved=l,Wo(i,u)}function Wo(i,s){i.lanes|=s;var l=i.alternate;for(l!==null&&(l.lanes|=s),l=i,i=i.return;i!==null;)i.childLanes|=s,l=i.alternate,l!==null&&(l.childLanes|=s),l=i,i=i.return;return l.tag===3?l.stateNode:null}var gi=!1;function Mu(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p0(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Go(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function hi(i,s,l){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(_t&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,Wo(i,l)}return f=u.interleaved,f===null?(s.next=s,Ru(u)):(s.next=f.next,f.next=s),u.interleaved=s,Wo(i,l)}function vl(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var u=s.lanes;u&=i.pendingLanes,l|=u,s.lanes=l,Rs(i,l)}}function g0(i,s){var l=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var f=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var v={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};x===null?f=x=v:x=x.next=v,l=l.next}while(l!==null);x===null?f=x=s:x=x.next=s}else f=x=s;l={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:x,shared:u.shared,effects:u.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}function Cl(i,s,l,u){var f=i.updateQueue;gi=!1;var x=f.firstBaseUpdate,v=f.lastBaseUpdate,W=f.shared.pending;if(W!==null){f.shared.pending=null;var oe=W,Ue=oe.next;oe.next=null,v===null?x=Ue:v.next=Ue,v=oe;var Ye=i.alternate;Ye!==null&&(Ye=Ye.updateQueue,W=Ye.lastBaseUpdate,W!==v&&(W===null?Ye.firstBaseUpdate=Ue:W.next=Ue,Ye.lastBaseUpdate=oe))}if(x!==null){var Je=f.baseState;v=0,Ye=Ue=oe=null,W=x;do{var $e=W.lane,at=W.eventTime;if((u&$e)===$e){Ye!==null&&(Ye=Ye.next={eventTime:at,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var ht=i,xt=W;switch($e=s,at=l,xt.tag){case 1:if(ht=xt.payload,typeof ht=="function"){Je=ht.call(at,Je,$e);break e}Je=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=xt.payload,$e=typeof ht=="function"?ht.call(at,Je,$e):ht,$e==null)break e;Je=G({},Je,$e);break e;case 2:gi=!0}}W.callback!==null&&W.lane!==0&&(i.flags|=64,$e=f.effects,$e===null?f.effects=[W]:$e.push(W))}else at={eventTime:at,lane:$e,tag:W.tag,payload:W.payload,callback:W.callback,next:null},Ye===null?(Ue=Ye=at,oe=Je):Ye=Ye.next=at,v|=$e;if(W=W.next,W===null){if(W=f.shared.pending,W===null)break;$e=W,W=$e.next,$e.next=null,f.lastBaseUpdate=$e,f.shared.pending=null}}while(!0);if(Ye===null&&(oe=Je),f.baseState=oe,f.firstBaseUpdate=Ue,f.lastBaseUpdate=Ye,s=f.shared.interleaved,s!==null){f=s;do v|=f.lane,f=f.next;while(f!==s)}else x===null&&(f.shared.lanes=0);is|=v,i.lanes=v,i.memoizedState=Je}}function h0(i,s,l){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var u=i[s],f=u.callback;if(f!==null){if(u.callback=null,u=l,typeof f!="function")throw Error(r(191,f));f.call(u)}}}var Xa={},Eo=di(Xa),qa=di(Xa),Za=di(Xa);function ns(i){if(i===Xa)throw Error(r(174));return i}function Lu(i,s){switch(Ar(Za,s),Ar(qa,i),Ar(Eo,Xa),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:T(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=T(s,i)}pr(Eo),Ar(Eo,s)}function Js(){pr(Eo),pr(qa),pr(Za)}function f0(i){ns(Za.current);var s=ns(Eo.current),l=T(s,i.type);s!==l&&(Ar(qa,i),Ar(Eo,l))}function Du(i){qa.current===i&&(pr(Eo),pr(qa))}var br=di(0);function Bl(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Pu=[];function Nu(){for(var i=0;i<Pu.length;i++)Pu[i]._workInProgressVersionPrimary=null;Pu.length=0}var Sl=fe.ReactCurrentDispatcher,Hu=fe.ReactCurrentBatchConfig,os=0,wr=null,Pr=null,Wr=null,Il=!1,eA=!1,tA=0,fv=0;function cn(){throw Error(r(321))}function Ou(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!Ao(i[l],s[l]))return!1;return!0}function _u(i,s,l,u,f,x){if(os=x,wr=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Sl.current=i===null||i.memoizedState===null?bv:wv,i=l(u,f),eA){x=0;do{if(eA=!1,tA=0,25<=x)throw Error(r(301));x+=1,Wr=Pr=null,s.updateQueue=null,Sl.current=vv,i=l(u,f)}while(eA)}if(Sl.current=jl,s=Pr!==null&&Pr.next!==null,os=0,Wr=Pr=wr=null,Il=!1,s)throw Error(r(300));return i}function zu(){var i=tA!==0;return tA=0,i}function ko(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?wr.memoizedState=Wr=i:Wr=Wr.next=i,Wr}function Xn(){if(Pr===null){var i=wr.alternate;i=i!==null?i.memoizedState:null}else i=Pr.next;var s=Wr===null?wr.memoizedState:Wr.next;if(s!==null)Wr=s,Pr=i;else{if(i===null)throw Error(r(310));Pr=i,i={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},Wr===null?wr.memoizedState=Wr=i:Wr=Wr.next=i}return Wr}function rA(i,s){return typeof s=="function"?s(i):s}function Ku(i){var s=Xn(),l=s.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var u=Pr,f=u.baseQueue,x=l.pending;if(x!==null){if(f!==null){var v=f.next;f.next=x.next,x.next=v}u.baseQueue=f=x,l.pending=null}if(f!==null){x=f.next,u=u.baseState;var W=v=null,oe=null,Ue=x;do{var Ye=Ue.lane;if((os&Ye)===Ye)oe!==null&&(oe=oe.next={lane:0,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),u=Ue.hasEagerState?Ue.eagerState:i(u,Ue.action);else{var Je={lane:Ye,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null};oe===null?(W=oe=Je,v=u):oe=oe.next=Je,wr.lanes|=Ye,is|=Ye}Ue=Ue.next}while(Ue!==null&&Ue!==x);oe===null?v=u:oe.next=W,Ao(u,s.memoizedState)||(In=!0),s.memoizedState=u,s.baseState=v,s.baseQueue=oe,l.lastRenderedState=u}if(i=l.interleaved,i!==null){f=i;do x=f.lane,wr.lanes|=x,is|=x,f=f.next;while(f!==i)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Wu(i){var s=Xn(),l=s.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var u=l.dispatch,f=l.pending,x=s.memoizedState;if(f!==null){l.pending=null;var v=f=f.next;do x=i(x,v.action),v=v.next;while(v!==f);Ao(x,s.memoizedState)||(In=!0),s.memoizedState=x,s.baseQueue===null&&(s.baseState=x),l.lastRenderedState=x}return[x,u]}function m0(){}function x0(i,s){var l=wr,u=Xn(),f=s(),x=!Ao(u.memoizedState,f);if(x&&(u.memoizedState=f,In=!0),u=u.queue,Gu(w0.bind(null,l,u,i),[i]),u.getSnapshot!==s||x||Wr!==null&&Wr.memoizedState.tag&1){if(l.flags|=2048,nA(9,b0.bind(null,l,u,f,s),void 0,null),Gr===null)throw Error(r(349));(os&30)!==0||y0(l,s,f)}return f}function y0(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=wr.updateQueue,s===null?(s={lastEffect:null,stores:null},wr.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function b0(i,s,l,u){s.value=l,s.getSnapshot=u,v0(s)&&C0(i)}function w0(i,s,l){return l(function(){v0(s)&&C0(i)})}function v0(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!Ao(i,l)}catch{return!0}}function C0(i){var s=Wo(i,1);s!==null&&go(s,i,1,-1)}function B0(i){var s=ko();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rA,lastRenderedState:i},s.queue=i,i=i.dispatch=yv.bind(null,wr,i),[s.memoizedState,i]}function nA(i,s,l,u){return i={tag:i,create:s,destroy:l,deps:u,next:null},s=wr.updateQueue,s===null?(s={lastEffect:null,stores:null},wr.updateQueue=s,s.lastEffect=i.next=i):(l=s.lastEffect,l===null?s.lastEffect=i.next=i:(u=l.next,l.next=i,i.next=u,s.lastEffect=i)),i}function S0(){return Xn().memoizedState}function El(i,s,l,u){var f=ko();wr.flags|=i,f.memoizedState=nA(1|s,l,void 0,u===void 0?null:u)}function kl(i,s,l,u){var f=Xn();u=u===void 0?null:u;var x=void 0;if(Pr!==null){var v=Pr.memoizedState;if(x=v.destroy,u!==null&&Ou(u,v.deps)){f.memoizedState=nA(s,l,x,u);return}}wr.flags|=i,f.memoizedState=nA(1|s,l,x,u)}function I0(i,s){return El(8390656,8,i,s)}function Gu(i,s){return kl(2048,8,i,s)}function E0(i,s){return kl(4,2,i,s)}function k0(i,s){return kl(4,4,i,s)}function j0(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function T0(i,s,l){return l=l!=null?l.concat([i]):null,kl(4,4,j0.bind(null,s,i),l)}function $u(){}function F0(i,s){var l=Xn();s=s===void 0?null:s;var u=l.memoizedState;return u!==null&&s!==null&&Ou(s,u[1])?u[0]:(l.memoizedState=[i,s],i)}function U0(i,s){var l=Xn();s=s===void 0?null:s;var u=l.memoizedState;return u!==null&&s!==null&&Ou(s,u[1])?u[0]:(i=i(),l.memoizedState=[i,s],i)}function Q0(i,s,l){return(os&21)===0?(i.baseState&&(i.baseState=!1,In=!0),i.memoizedState=l):(Ao(l,s)||(l=Qe(),wr.lanes|=l,is|=l,i.baseState=!0),s)}function mv(i,s){var l=Kt;Kt=l!==0&&4>l?l:4,i(!0);var u=Hu.transition;Hu.transition={};try{i(!1),s()}finally{Kt=l,Hu.transition=u}}function R0(){return Xn().memoizedState}function xv(i,s,l){var u=yi(i);if(l={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null},M0(i))L0(s,l);else if(l=u0(i,s,l,u),l!==null){var f=yn();go(l,i,u,f),D0(l,s,u)}}function yv(i,s,l){var u=yi(i),f={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null};if(M0(i))L0(s,f);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=s.lastRenderedReducer,x!==null))try{var v=s.lastRenderedState,W=x(v,l);if(f.hasEagerState=!0,f.eagerState=W,Ao(W,v)){var oe=s.interleaved;oe===null?(f.next=f,Ru(s)):(f.next=oe.next,oe.next=f),s.interleaved=f;return}}catch{}finally{}l=u0(i,s,f,u),l!==null&&(f=yn(),go(l,i,u,f),D0(l,s,u))}}function M0(i){var s=i.alternate;return i===wr||s!==null&&s===wr}function L0(i,s){eA=Il=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function D0(i,s,l){if((l&4194240)!==0){var u=s.lanes;u&=i.pendingLanes,l|=u,s.lanes=l,Rs(i,l)}}var jl={readContext:Jn,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},bv={readContext:Jn,useCallback:function(i,s){return ko().memoizedState=[i,s===void 0?null:s],i},useContext:Jn,useEffect:I0,useImperativeHandle:function(i,s,l){return l=l!=null?l.concat([i]):null,El(4194308,4,j0.bind(null,s,i),l)},useLayoutEffect:function(i,s){return El(4194308,4,i,s)},useInsertionEffect:function(i,s){return El(4,2,i,s)},useMemo:function(i,s){var l=ko();return s=s===void 0?null:s,i=i(),l.memoizedState=[i,s],i},useReducer:function(i,s,l){var u=ko();return s=l!==void 0?l(s):s,u.memoizedState=u.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},u.queue=i,i=i.dispatch=xv.bind(null,wr,i),[u.memoizedState,i]},useRef:function(i){var s=ko();return i={current:i},s.memoizedState=i},useState:B0,useDebugValue:$u,useDeferredValue:function(i){return ko().memoizedState=i},useTransition:function(){var i=B0(!1),s=i[0];return i=mv.bind(null,i[1]),ko().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,l){var u=wr,f=ko();if(fr){if(l===void 0)throw Error(r(407));l=l()}else{if(l=s(),Gr===null)throw Error(r(349));(os&30)!==0||y0(u,s,l)}f.memoizedState=l;var x={value:l,getSnapshot:s};return f.queue=x,I0(w0.bind(null,u,x,i),[i]),u.flags|=2048,nA(9,b0.bind(null,u,x,l,s),void 0,null),l},useId:function(){var i=ko(),s=Gr.identifierPrefix;if(fr){var l=Ko,u=zo;l=(u&~(1<<32-Mn(u)-1)).toString(32)+l,s=":"+s+"R"+l,l=tA++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=fv++,s=":"+s+"r"+l.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},wv={readContext:Jn,useCallback:F0,useContext:Jn,useEffect:Gu,useImperativeHandle:T0,useInsertionEffect:E0,useLayoutEffect:k0,useMemo:U0,useReducer:Ku,useRef:S0,useState:function(){return Ku(rA)},useDebugValue:$u,useDeferredValue:function(i){var s=Xn();return Q0(s,Pr.memoizedState,i)},useTransition:function(){var i=Ku(rA)[0],s=Xn().memoizedState;return[i,s]},useMutableSource:m0,useSyncExternalStore:x0,useId:R0,unstable_isNewReconciler:!1},vv={readContext:Jn,useCallback:F0,useContext:Jn,useEffect:Gu,useImperativeHandle:T0,useInsertionEffect:E0,useLayoutEffect:k0,useMemo:U0,useReducer:Wu,useRef:S0,useState:function(){return Wu(rA)},useDebugValue:$u,useDeferredValue:function(i){var s=Xn();return Pr===null?s.memoizedState=i:Q0(s,Pr.memoizedState,i)},useTransition:function(){var i=Wu(rA)[0],s=Xn().memoizedState;return[i,s]},useMutableSource:m0,useSyncExternalStore:x0,useId:R0,unstable_isNewReconciler:!1};function co(i,s){if(i&&i.defaultProps){s=G({},s),i=i.defaultProps;for(var l in i)s[l]===void 0&&(s[l]=i[l]);return s}return s}function Vu(i,s,l,u){s=i.memoizedState,l=l(u,s),l=l==null?s:G({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Tl={isMounted:function(i){return(i=i._reactInternals)?rt(i)===i:!1},enqueueSetState:function(i,s,l){i=i._reactInternals;var u=yn(),f=yi(i),x=Go(u,f);x.payload=s,l!=null&&(x.callback=l),s=hi(i,x,f),s!==null&&(go(s,i,f,u),vl(s,i,f))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var u=yn(),f=yi(i),x=Go(u,f);x.tag=1,x.payload=s,l!=null&&(x.callback=l),s=hi(i,x,f),s!==null&&(go(s,i,f,u),vl(s,i,f))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=yn(),u=yi(i),f=Go(l,u);f.tag=2,s!=null&&(f.callback=s),s=hi(i,f,u),s!==null&&(go(s,i,u,l),vl(s,i,u))}};function P0(i,s,l,u,f,x,v){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,x,v):s.prototype&&s.prototype.isPureReactComponent?!za(l,u)||!za(f,x):!0}function N0(i,s,l){var u=!1,f=ui,x=s.contextType;return typeof x=="object"&&x!==null?x=Jn(x):(f=Sn(s)?Zi:ln.current,u=s.contextTypes,x=(u=u!=null)?zs(i,f):ui),s=new s(l,x),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Tl,i.stateNode=s,s._reactInternals=i,u&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=f,i.__reactInternalMemoizedMaskedChildContext=x),s}function H0(i,s,l,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==i&&Tl.enqueueReplaceState(s,s.state,null)}function Yu(i,s,l,u){var f=i.stateNode;f.props=l,f.state=i.memoizedState,f.refs={},Mu(i);var x=s.contextType;typeof x=="object"&&x!==null?f.context=Jn(x):(x=Sn(s)?Zi:ln.current,f.context=zs(i,x)),f.state=i.memoizedState,x=s.getDerivedStateFromProps,typeof x=="function"&&(Vu(i,s,x,l),f.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Tl.enqueueReplaceState(f,f.state,null),Cl(i,l,f,u),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308)}function Xs(i,s){try{var l="",u=s;do l+=j(u),u=u.return;while(u);var f=l}catch(x){f=`
Error generating stack: `+x.message+`
`+x.stack}return{value:i,source:s,stack:f,digest:null}}function Ju(i,s,l){return{value:i,source:null,stack:l??null,digest:s??null}}function Xu(i,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var Cv=typeof WeakMap=="function"?WeakMap:Map;function O0(i,s,l){l=Go(-1,l),l.tag=3,l.payload={element:null};var u=s.value;return l.callback=function(){Dl||(Dl=!0,up=u),Xu(i,s)},l}function _0(i,s,l){l=Go(-1,l),l.tag=3;var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=s.value;l.payload=function(){return u(f)},l.callback=function(){Xu(i,s)}}var x=i.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){Xu(i,s),typeof u!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),l}function z0(i,s,l){var u=i.pingCache;if(u===null){u=i.pingCache=new Cv;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(l)||(f.add(l),i=Dv.bind(null,i,s,l),s.then(i,i))}function K0(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function W0(i,s,l,u,f){return(i.mode&1)===0?(i===s?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Go(-1,1),s.tag=2,hi(l,s,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=f,i)}var Bv=fe.ReactCurrentOwner,In=!1;function xn(i,s,l,u){s.child=i===null?d0(s,null,l,u):$s(s,i.child,l,u)}function G0(i,s,l,u,f){l=l.render;var x=s.ref;return Ys(s,f),u=_u(i,s,l,u,x,f),l=zu(),i!==null&&!In?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~f,$o(i,s,f)):(fr&&l&&Su(s),s.flags|=1,xn(i,s,u,f),s.child)}function $0(i,s,l,u,f){if(i===null){var x=l.type;return typeof x=="function"&&!yp(x)&&x.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=x,V0(i,s,x,u,f)):(i=zl(l.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(x=i.child,(i.lanes&f)===0){var v=x.memoizedProps;if(l=l.compare,l=l!==null?l:za,l(v,u)&&i.ref===s.ref)return $o(i,s,f)}return s.flags|=1,i=wi(x,u),i.ref=s.ref,i.return=s,s.child=i}function V0(i,s,l,u,f){if(i!==null){var x=i.memoizedProps;if(za(x,u)&&i.ref===s.ref)if(In=!1,s.pendingProps=u=x,(i.lanes&f)!==0)(i.flags&131072)!==0&&(In=!0);else return s.lanes=i.lanes,$o(i,s,f)}return qu(i,s,l,u,f)}function Y0(i,s,l){var u=s.pendingProps,f=u.children,x=i!==null?i.memoizedState:null;if(u.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar(Zs,Nn),Nn|=l;else{if((l&1073741824)===0)return i=x!==null?x.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,Ar(Zs,Nn),Nn|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=x!==null?x.baseLanes:l,Ar(Zs,Nn),Nn|=u}else x!==null?(u=x.baseLanes|l,s.memoizedState=null):u=l,Ar(Zs,Nn),Nn|=u;return xn(i,s,f,l),s.child}function J0(i,s){var l=s.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function qu(i,s,l,u,f){var x=Sn(l)?Zi:ln.current;return x=zs(s,x),Ys(s,f),l=_u(i,s,l,u,x,f),u=zu(),i!==null&&!In?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~f,$o(i,s,f)):(fr&&u&&Su(s),s.flags|=1,xn(i,s,l,f),s.child)}function X0(i,s,l,u,f){if(Sn(l)){var x=!0;gl(s)}else x=!1;if(Ys(s,f),s.stateNode===null)Ul(i,s),N0(s,l,u),Yu(s,l,u,f),u=!0;else if(i===null){var v=s.stateNode,W=s.memoizedProps;v.props=W;var oe=v.context,Ue=l.contextType;typeof Ue=="object"&&Ue!==null?Ue=Jn(Ue):(Ue=Sn(l)?Zi:ln.current,Ue=zs(s,Ue));var Ye=l.getDerivedStateFromProps,Je=typeof Ye=="function"||typeof v.getSnapshotBeforeUpdate=="function";Je||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(W!==u||oe!==Ue)&&H0(s,v,u,Ue),gi=!1;var $e=s.memoizedState;v.state=$e,Cl(s,u,v,f),oe=s.memoizedState,W!==u||$e!==oe||Bn.current||gi?(typeof Ye=="function"&&(Vu(s,l,Ye,u),oe=s.memoizedState),(W=gi||P0(s,l,W,u,$e,oe,Ue))?(Je||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=oe),v.props=u,v.state=oe,v.context=Ue,u=W):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{v=s.stateNode,p0(i,s),W=s.memoizedProps,Ue=s.type===s.elementType?W:co(s.type,W),v.props=Ue,Je=s.pendingProps,$e=v.context,oe=l.contextType,typeof oe=="object"&&oe!==null?oe=Jn(oe):(oe=Sn(l)?Zi:ln.current,oe=zs(s,oe));var at=l.getDerivedStateFromProps;(Ye=typeof at=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(W!==Je||$e!==oe)&&H0(s,v,u,oe),gi=!1,$e=s.memoizedState,v.state=$e,Cl(s,u,v,f);var ht=s.memoizedState;W!==Je||$e!==ht||Bn.current||gi?(typeof at=="function"&&(Vu(s,l,at,u),ht=s.memoizedState),(Ue=gi||P0(s,l,Ue,u,$e,ht,oe)||!1)?(Ye||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,ht,oe),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,ht,oe)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||W===i.memoizedProps&&$e===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&$e===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ht),v.props=u,v.state=ht,v.context=oe,u=Ue):(typeof v.componentDidUpdate!="function"||W===i.memoizedProps&&$e===i.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&$e===i.memoizedState||(s.flags|=1024),u=!1)}return Zu(i,s,l,u,x,f)}function Zu(i,s,l,u,f,x){J0(i,s);var v=(s.flags&128)!==0;if(!u&&!v)return f&&r0(s,l,!1),$o(i,s,x);u=s.stateNode,Bv.current=s;var W=v&&typeof l.getDerivedStateFromError!="function"?null:u.render();return s.flags|=1,i!==null&&v?(s.child=$s(s,i.child,null,x),s.child=$s(s,null,W,x)):xn(i,s,W,x),s.memoizedState=u.state,f&&r0(s,l,!0),s.child}function q0(i){var s=i.stateNode;s.pendingContext?e0(i,s.pendingContext,s.pendingContext!==s.context):s.context&&e0(i,s.context,!1),Lu(i,s.containerInfo)}function Z0(i,s,l,u,f){return Gs(),ju(f),s.flags|=256,xn(i,s,l,u),s.child}var ep={dehydrated:null,treeContext:null,retryLane:0};function tp(i){return{baseLanes:i,cachePool:null,transitions:null}}function em(i,s,l){var u=s.pendingProps,f=br.current,x=!1,v=(s.flags&128)!==0,W;if((W=v)||(W=i!==null&&i.memoizedState===null?!1:(f&2)!==0),W?(x=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(f|=1),Ar(br,f&1),i===null)return ku(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((s.mode&1)===0?s.lanes=1:i.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(v=u.children,i=u.fallback,x?(u=s.mode,x=s.child,v={mode:"hidden",children:v},(u&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=v):x=Kl(v,u,0,null),i=ls(i,u,l,null),x.return=s,i.return=s,x.sibling=i,s.child=x,s.child.memoizedState=tp(l),s.memoizedState=ep,i):rp(s,v));if(f=i.memoizedState,f!==null&&(W=f.dehydrated,W!==null))return Sv(i,s,v,u,W,f,l);if(x){x=u.fallback,v=s.mode,f=i.child,W=f.sibling;var oe={mode:"hidden",children:u.children};return(v&1)===0&&s.child!==f?(u=s.child,u.childLanes=0,u.pendingProps=oe,s.deletions=null):(u=wi(f,oe),u.subtreeFlags=f.subtreeFlags&14680064),W!==null?x=wi(W,x):(x=ls(x,v,l,null),x.flags|=2),x.return=s,u.return=s,u.sibling=x,s.child=u,u=x,x=s.child,v=i.child.memoizedState,v=v===null?tp(l):{baseLanes:v.baseLanes|l,cachePool:null,transitions:v.transitions},x.memoizedState=v,x.childLanes=i.childLanes&~l,s.memoizedState=ep,u}return x=i.child,i=x.sibling,u=wi(x,{mode:"visible",children:u.children}),(s.mode&1)===0&&(u.lanes=l),u.return=s,u.sibling=null,i!==null&&(l=s.deletions,l===null?(s.deletions=[i],s.flags|=16):l.push(i)),s.child=u,s.memoizedState=null,u}function rp(i,s){return s=Kl({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function Fl(i,s,l,u){return u!==null&&ju(u),$s(s,i.child,null,l),i=rp(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Sv(i,s,l,u,f,x,v){if(l)return s.flags&256?(s.flags&=-257,u=Ju(Error(r(422))),Fl(i,s,v,u)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(x=u.fallback,f=s.mode,u=Kl({mode:"visible",children:u.children},f,0,null),x=ls(x,f,v,null),x.flags|=2,u.return=s,x.return=s,u.sibling=x,s.child=u,(s.mode&1)!==0&&$s(s,i.child,null,v),s.child.memoizedState=tp(v),s.memoizedState=ep,x);if((s.mode&1)===0)return Fl(i,s,v,null);if(f.data==="$!"){if(u=f.nextSibling&&f.nextSibling.dataset,u)var W=u.dgst;return u=W,x=Error(r(419)),u=Ju(x,u,void 0),Fl(i,s,v,u)}if(W=(v&i.childLanes)!==0,In||W){if(u=Gr,u!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(u.suspendedLanes|v))!==0?0:f,f!==0&&f!==x.retryLane&&(x.retryLane=f,Wo(i,f),go(u,i,f,-1))}return xp(),u=Ju(Error(r(421))),Fl(i,s,v,u)}return f.data==="$?"?(s.flags|=128,s.child=i.child,s=Pv.bind(null,i),f._reactRetry=s,null):(i=x.treeContext,Pn=ci(f.nextSibling),Dn=s,fr=!0,lo=null,i!==null&&(Vn[Yn++]=zo,Vn[Yn++]=Ko,Vn[Yn++]=es,zo=i.id,Ko=i.overflow,es=s),s=rp(s,u.children),s.flags|=4096,s)}function tm(i,s,l){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Qu(i.return,s,l)}function np(i,s,l,u,f){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:f}:(x.isBackwards=s,x.rendering=null,x.renderingStartTime=0,x.last=u,x.tail=l,x.tailMode=f)}function rm(i,s,l){var u=s.pendingProps,f=u.revealOrder,x=u.tail;if(xn(i,s,u.children,l),u=br.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&tm(i,l,s);else if(i.tag===19)tm(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}if(Ar(br,u),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)i=l.alternate,i!==null&&Bl(i)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),np(s,!1,f,l,x);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&Bl(i)===null){s.child=f;break}i=f.sibling,f.sibling=l,l=f,f=i}np(s,!0,l,null,x);break;case"together":np(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ul(i,s){(s.mode&1)===0&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function $o(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),is|=s.lanes,(l&s.childLanes)===0)return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,l=wi(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=wi(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function Iv(i,s,l){switch(s.tag){case 3:q0(s),Gs();break;case 5:f0(s);break;case 1:Sn(s.type)&&gl(s);break;case 4:Lu(s,s.stateNode.containerInfo);break;case 10:var u=s.type._context,f=s.memoizedProps.value;Ar(bl,u._currentValue),u._currentValue=f;break;case 13:if(u=s.memoizedState,u!==null)return u.dehydrated!==null?(Ar(br,br.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?em(i,s,l):(Ar(br,br.current&1),i=$o(i,s,l),i!==null?i.sibling:null);Ar(br,br.current&1);break;case 19:if(u=(l&s.childLanes)!==0,(i.flags&128)!==0){if(u)return rm(i,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ar(br,br.current),u)break;return null;case 22:case 23:return s.lanes=0,Y0(i,s,l)}return $o(i,s,l)}var nm,op,om,im;nm=function(i,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},op=function(){},om=function(i,s,l,u){var f=i.memoizedProps;if(f!==u){i=s.stateNode,ns(Eo.current);var x=null;switch(l){case"input":f=q(i,f),u=q(i,u),x=[];break;case"select":f=G({},f,{value:void 0}),u=G({},u,{value:void 0}),x=[];break;case"textarea":f=Ae(i,f),u=Ae(i,u),x=[];break;default:typeof f.onClick!="function"&&typeof u.onClick=="function"&&(i.onclick=dl)}Me(l,u);var v;l=null;for(Ue in f)if(!u.hasOwnProperty(Ue)&&f.hasOwnProperty(Ue)&&f[Ue]!=null)if(Ue==="style"){var W=f[Ue];for(v in W)W.hasOwnProperty(v)&&(l||(l={}),l[v]="")}else Ue!=="dangerouslySetInnerHTML"&&Ue!=="children"&&Ue!=="suppressContentEditableWarning"&&Ue!=="suppressHydrationWarning"&&Ue!=="autoFocus"&&(a.hasOwnProperty(Ue)?x||(x=[]):(x=x||[]).push(Ue,null));for(Ue in u){var oe=u[Ue];if(W=f!=null?f[Ue]:void 0,u.hasOwnProperty(Ue)&&oe!==W&&(oe!=null||W!=null))if(Ue==="style")if(W){for(v in W)!W.hasOwnProperty(v)||oe&&oe.hasOwnProperty(v)||(l||(l={}),l[v]="");for(v in oe)oe.hasOwnProperty(v)&&W[v]!==oe[v]&&(l||(l={}),l[v]=oe[v])}else l||(x||(x=[]),x.push(Ue,l)),l=oe;else Ue==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,W=W?W.__html:void 0,oe!=null&&W!==oe&&(x=x||[]).push(Ue,oe)):Ue==="children"?typeof oe!="string"&&typeof oe!="number"||(x=x||[]).push(Ue,""+oe):Ue!=="suppressContentEditableWarning"&&Ue!=="suppressHydrationWarning"&&(a.hasOwnProperty(Ue)?(oe!=null&&Ue==="onScroll"&&ur("scroll",i),x||W===oe||(x=[])):(x=x||[]).push(Ue,oe))}l&&(x=x||[]).push("style",l);var Ue=x;(s.updateQueue=Ue)&&(s.flags|=4)}},im=function(i,s,l,u){l!==u&&(s.flags|=4)};function oA(i,s){if(!fr)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function dn(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,u=0;if(s)for(var f=i.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags&14680064,u|=f.flags&14680064,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=l,s}function Ev(i,s,l){var u=s.pendingProps;switch(Iu(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(s),null;case 1:return Sn(s.type)&&pl(),dn(s),null;case 3:return u=s.stateNode,Js(),pr(Bn),pr(ln),Nu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(xl(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,lo!==null&&(hp(lo),lo=null))),op(i,s),dn(s),null;case 5:Du(s);var f=ns(Za.current);if(l=s.type,i!==null&&s.stateNode!=null)om(i,s,l,u,f),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!u){if(s.stateNode===null)throw Error(r(166));return dn(s),null}if(i=ns(Eo.current),xl(s)){u=s.stateNode,l=s.type;var x=s.memoizedProps;switch(u[Io]=s,u[Va]=x,i=(s.mode&1)!==0,l){case"dialog":ur("cancel",u),ur("close",u);break;case"iframe":case"object":case"embed":ur("load",u);break;case"video":case"audio":for(f=0;f<Wa.length;f++)ur(Wa[f],u);break;case"source":ur("error",u);break;case"img":case"image":case"link":ur("error",u),ur("load",u);break;case"details":ur("toggle",u);break;case"input":lt(u,x),ur("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!x.multiple},ur("invalid",u);break;case"textarea":Y(u,x),ur("invalid",u)}Me(l,x),f=null;for(var v in x)if(x.hasOwnProperty(v)){var W=x[v];v==="children"?typeof W=="string"?u.textContent!==W&&(x.suppressHydrationWarning!==!0&&cl(u.textContent,W,i),f=["children",W]):typeof W=="number"&&u.textContent!==""+W&&(x.suppressHydrationWarning!==!0&&cl(u.textContent,W,i),f=["children",""+W]):a.hasOwnProperty(v)&&W!=null&&v==="onScroll"&&ur("scroll",u)}switch(l){case"input":Be(u),dt(u,x,!0);break;case"textarea":Be(u),ve(u);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(u.onclick=dl)}u=f,s.updateQueue=u,u!==null&&(s.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=me(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=v.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof u.is=="string"?i=v.createElement(l,{is:u.is}):(i=v.createElement(l),l==="select"&&(v=i,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):i=v.createElementNS(i,l),i[Io]=s,i[Va]=u,nm(i,s,!1,!1),s.stateNode=i;e:{switch(v=O(l,u),l){case"dialog":ur("cancel",i),ur("close",i),f=u;break;case"iframe":case"object":case"embed":ur("load",i),f=u;break;case"video":case"audio":for(f=0;f<Wa.length;f++)ur(Wa[f],i);f=u;break;case"source":ur("error",i),f=u;break;case"img":case"image":case"link":ur("error",i),ur("load",i),f=u;break;case"details":ur("toggle",i),f=u;break;case"input":lt(i,u),f=q(i,u),ur("invalid",i);break;case"option":f=u;break;case"select":i._wrapperState={wasMultiple:!!u.multiple},f=G({},u,{value:void 0}),ur("invalid",i);break;case"textarea":Y(i,u),f=Ae(i,u),ur("invalid",i);break;default:f=u}Me(l,f),W=f;for(x in W)if(W.hasOwnProperty(x)){var oe=W[x];x==="style"?z(i,oe):x==="dangerouslySetInnerHTML"?(oe=oe?oe.__html:void 0,oe!=null&&w(i,oe)):x==="children"?typeof oe=="string"?(l!=="textarea"||oe!=="")&&ce(i,oe):typeof oe=="number"&&ce(i,""+oe):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(a.hasOwnProperty(x)?oe!=null&&x==="onScroll"&&ur("scroll",i):oe!=null&&Ie(i,x,oe,v))}switch(l){case"input":Be(i),dt(i,u,!1);break;case"textarea":Be(i),ve(i);break;case"option":u.value!=null&&i.setAttribute("value",""+Ge(u.value));break;case"select":i.multiple=!!u.multiple,x=u.value,x!=null?U(i,!!u.multiple,x,!1):u.defaultValue!=null&&U(i,!!u.multiple,u.defaultValue,!0);break;default:typeof f.onClick=="function"&&(i.onclick=dl)}switch(l){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return dn(s),null;case 6:if(i&&s.stateNode!=null)im(i,s,i.memoizedProps,u);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(l=ns(Za.current),ns(Eo.current),xl(s)){if(u=s.stateNode,l=s.memoizedProps,u[Io]=s,(x=u.nodeValue!==l)&&(i=Dn,i!==null))switch(i.tag){case 3:cl(u.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&cl(u.nodeValue,l,(i.mode&1)!==0)}x&&(s.flags|=4)}else u=(l.nodeType===9?l:l.ownerDocument).createTextNode(u),u[Io]=s,s.stateNode=u}return dn(s),null;case 13:if(pr(br),u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(fr&&Pn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)A0(),Gs(),s.flags|=98560,x=!1;else if(x=xl(s),u!==null&&u.dehydrated!==null){if(i===null){if(!x)throw Error(r(318));if(x=s.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[Io]=s}else Gs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dn(s),x=!1}else lo!==null&&(hp(lo),lo=null),x=!0;if(!x)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(u=u!==null,u!==(i!==null&&i.memoizedState!==null)&&u&&(s.child.flags|=8192,(s.mode&1)!==0&&(i===null||(br.current&1)!==0?Nr===0&&(Nr=3):xp())),s.updateQueue!==null&&(s.flags|=4),dn(s),null);case 4:return Js(),op(i,s),i===null&&Ga(s.stateNode.containerInfo),dn(s),null;case 10:return Uu(s.type._context),dn(s),null;case 17:return Sn(s.type)&&pl(),dn(s),null;case 19:if(pr(br),x=s.memoizedState,x===null)return dn(s),null;if(u=(s.flags&128)!==0,v=x.rendering,v===null)if(u)oA(x,!1);else{if(Nr!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(v=Bl(i),v!==null){for(s.flags|=128,oA(x,!1),u=v.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),s.subtreeFlags=0,u=l,l=s.child;l!==null;)x=l,i=u,x.flags&=14680066,v=x.alternate,v===null?(x.childLanes=0,x.lanes=i,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=v.childLanes,x.lanes=v.lanes,x.child=v.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=v.memoizedProps,x.memoizedState=v.memoizedState,x.updateQueue=v.updateQueue,x.type=v.type,i=v.dependencies,x.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Ar(br,br.current&1|2),s.child}i=i.sibling}x.tail!==null&&sr()>ea&&(s.flags|=128,u=!0,oA(x,!1),s.lanes=4194304)}else{if(!u)if(i=Bl(v),i!==null){if(s.flags|=128,u=!0,l=i.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),oA(x,!0),x.tail===null&&x.tailMode==="hidden"&&!v.alternate&&!fr)return dn(s),null}else 2*sr()-x.renderingStartTime>ea&&l!==1073741824&&(s.flags|=128,u=!0,oA(x,!1),s.lanes=4194304);x.isBackwards?(v.sibling=s.child,s.child=v):(l=x.last,l!==null?l.sibling=v:s.child=v,x.last=v)}return x.tail!==null?(s=x.tail,x.rendering=s,x.tail=s.sibling,x.renderingStartTime=sr(),s.sibling=null,l=br.current,Ar(br,u?l&1|2:l&1),s):(dn(s),null);case 22:case 23:return mp(),u=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==u&&(s.flags|=8192),u&&(s.mode&1)!==0?(Nn&1073741824)!==0&&(dn(s),s.subtreeFlags&6&&(s.flags|=8192)):dn(s),null;case 24:return null;case 25:return null}throw Error(r(156,s.tag))}function kv(i,s){switch(Iu(s),s.tag){case 1:return Sn(s.type)&&pl(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Js(),pr(Bn),pr(ln),Nu(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 5:return Du(s),null;case 13:if(pr(br),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Gs()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return pr(br),null;case 4:return Js(),null;case 10:return Uu(s.type._context),null;case 22:case 23:return mp(),null;case 24:return null;default:return null}}var Ql=!1,un=!1,jv=typeof WeakSet=="function"?WeakSet:Set,ut=null;function qs(i,s){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(u){Cr(i,s,u)}else l.current=null}function ip(i,s,l){try{l()}catch(u){Cr(i,s,u)}}var sm=!1;function Tv(i,s){if(mu=$n,i=Pf(),lu(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var f=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break e}var v=0,W=-1,oe=-1,Ue=0,Ye=0,Je=i,$e=null;t:for(;;){for(var at;Je!==l||f!==0&&Je.nodeType!==3||(W=v+f),Je!==x||u!==0&&Je.nodeType!==3||(oe=v+u),Je.nodeType===3&&(v+=Je.nodeValue.length),(at=Je.firstChild)!==null;)$e=Je,Je=at;for(;;){if(Je===i)break t;if($e===l&&++Ue===f&&(W=v),$e===x&&++Ye===u&&(oe=v),(at=Je.nextSibling)!==null)break;Je=$e,$e=Je.parentNode}Je=at}l=W===-1||oe===-1?null:{start:W,end:oe}}else l=null}l=l||{start:0,end:0}}else l=null;for(xu={focusedElem:i,selectionRange:l},$n=!1,ut=s;ut!==null;)if(s=ut,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,ut=i;else for(;ut!==null;){s=ut;try{var ht=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ht!==null){var xt=ht.memoizedProps,Ir=ht.memoizedState,Se=s.stateNode,he=Se.getSnapshotBeforeUpdate(s.elementType===s.type?xt:co(s.type,xt),Ir);Se.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var je=s.stateNode.containerInfo;je.nodeType===1?je.textContent="":je.nodeType===9&&je.documentElement&&je.removeChild(je.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(et){Cr(s,s.return,et)}if(i=s.sibling,i!==null){i.return=s.return,ut=i;break}ut=s.return}return ht=sm,sm=!1,ht}function iA(i,s,l){var u=s.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&i)===i){var x=f.destroy;f.destroy=void 0,x!==void 0&&ip(s,l,x)}f=f.next}while(f!==u)}}function Rl(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&i)===i){var u=l.create;l.destroy=u()}l=l.next}while(l!==s)}}function sp(i){var s=i.ref;if(s!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof s=="function"?s(i):s.current=i}}function am(i){var s=i.alternate;s!==null&&(i.alternate=null,am(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[Io],delete s[Va],delete s[vu],delete s[uv],delete s[pv])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Am(i){return i.tag===5||i.tag===3||i.tag===4}function lm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Am(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ap(i,s,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(i,s):l.insertBefore(i,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(i,l)):(s=l,s.appendChild(i)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=dl));else if(u!==4&&(i=i.child,i!==null))for(ap(i,s,l),i=i.sibling;i!==null;)ap(i,s,l),i=i.sibling}function Ap(i,s,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(u!==4&&(i=i.child,i!==null))for(Ap(i,s,l),i=i.sibling;i!==null;)Ap(i,s,l),i=i.sibling}var en=null,uo=!1;function fi(i,s,l){for(l=l.child;l!==null;)cm(i,s,l),l=l.sibling}function cm(i,s,l){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(js,l)}catch{}switch(l.tag){case 5:un||qs(l,s);case 6:var u=en,f=uo;en=null,fi(i,s,l),en=u,uo=f,en!==null&&(uo?(i=en,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):en.removeChild(l.stateNode));break;case 18:en!==null&&(uo?(i=en,l=l.stateNode,i.nodeType===8?wu(i.parentNode,l):i.nodeType===1&&wu(i,l),hr(i)):wu(en,l.stateNode));break;case 4:u=en,f=uo,en=l.stateNode.containerInfo,uo=!0,fi(i,s,l),en=u,uo=f;break;case 0:case 11:case 14:case 15:if(!un&&(u=l.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){f=u=u.next;do{var x=f,v=x.destroy;x=x.tag,v!==void 0&&((x&2)!==0||(x&4)!==0)&&ip(l,s,v),f=f.next}while(f!==u)}fi(i,s,l);break;case 1:if(!un&&(qs(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=l.memoizedProps,u.state=l.memoizedState,u.componentWillUnmount()}catch(W){Cr(l,s,W)}fi(i,s,l);break;case 21:fi(i,s,l);break;case 22:l.mode&1?(un=(u=un)||l.memoizedState!==null,fi(i,s,l),un=u):fi(i,s,l);break;default:fi(i,s,l)}}function dm(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new jv),s.forEach(function(u){var f=Nv.bind(null,i,u);l.has(u)||(l.add(u),u.then(f,f))})}}function po(i,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var f=l[u];try{var x=i,v=s,W=v;e:for(;W!==null;){switch(W.tag){case 5:en=W.stateNode,uo=!1;break e;case 3:en=W.stateNode.containerInfo,uo=!0;break e;case 4:en=W.stateNode.containerInfo,uo=!0;break e}W=W.return}if(en===null)throw Error(r(160));cm(x,v,f),en=null,uo=!1;var oe=f.alternate;oe!==null&&(oe.return=null),f.return=null}catch(Ue){Cr(f,s,Ue)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)um(s,i),s=s.sibling}function um(i,s){var l=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(po(s,i),jo(i),u&4){try{iA(3,i,i.return),Rl(3,i)}catch(xt){Cr(i,i.return,xt)}try{iA(5,i,i.return)}catch(xt){Cr(i,i.return,xt)}}break;case 1:po(s,i),jo(i),u&512&&l!==null&&qs(l,l.return);break;case 5:if(po(s,i),jo(i),u&512&&l!==null&&qs(l,l.return),i.flags&32){var f=i.stateNode;try{ce(f,"")}catch(xt){Cr(i,i.return,xt)}}if(u&4&&(f=i.stateNode,f!=null)){var x=i.memoizedProps,v=l!==null?l.memoizedProps:x,W=i.type,oe=i.updateQueue;if(i.updateQueue=null,oe!==null)try{W==="input"&&x.type==="radio"&&x.name!=null&&ye(f,x),O(W,v);var Ue=O(W,x);for(v=0;v<oe.length;v+=2){var Ye=oe[v],Je=oe[v+1];Ye==="style"?z(f,Je):Ye==="dangerouslySetInnerHTML"?w(f,Je):Ye==="children"?ce(f,Je):Ie(f,Ye,Je,Ue)}switch(W){case"input":ze(f,x);break;case"textarea":V(f,x);break;case"select":var $e=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!x.multiple;var at=x.value;at!=null?U(f,!!x.multiple,at,!1):$e!==!!x.multiple&&(x.defaultValue!=null?U(f,!!x.multiple,x.defaultValue,!0):U(f,!!x.multiple,x.multiple?[]:"",!1))}f[Va]=x}catch(xt){Cr(i,i.return,xt)}}break;case 6:if(po(s,i),jo(i),u&4){if(i.stateNode===null)throw Error(r(162));f=i.stateNode,x=i.memoizedProps;try{f.nodeValue=x}catch(xt){Cr(i,i.return,xt)}}break;case 3:if(po(s,i),jo(i),u&4&&l!==null&&l.memoizedState.isDehydrated)try{hr(s.containerInfo)}catch(xt){Cr(i,i.return,xt)}break;case 4:po(s,i),jo(i);break;case 13:po(s,i),jo(i),f=i.child,f.flags&8192&&(x=f.memoizedState!==null,f.stateNode.isHidden=x,!x||f.alternate!==null&&f.alternate.memoizedState!==null||(dp=sr())),u&4&&dm(i);break;case 22:if(Ye=l!==null&&l.memoizedState!==null,i.mode&1?(un=(Ue=un)||Ye,po(s,i),un=Ue):po(s,i),jo(i),u&8192){if(Ue=i.memoizedState!==null,(i.stateNode.isHidden=Ue)&&!Ye&&(i.mode&1)!==0)for(ut=i,Ye=i.child;Ye!==null;){for(Je=ut=Ye;ut!==null;){switch($e=ut,at=$e.child,$e.tag){case 0:case 11:case 14:case 15:iA(4,$e,$e.return);break;case 1:qs($e,$e.return);var ht=$e.stateNode;if(typeof ht.componentWillUnmount=="function"){u=$e,l=$e.return;try{s=u,ht.props=s.memoizedProps,ht.state=s.memoizedState,ht.componentWillUnmount()}catch(xt){Cr(u,l,xt)}}break;case 5:qs($e,$e.return);break;case 22:if($e.memoizedState!==null){hm(Je);continue}}at!==null?(at.return=$e,ut=at):hm(Je)}Ye=Ye.sibling}e:for(Ye=null,Je=i;;){if(Je.tag===5){if(Ye===null){Ye=Je;try{f=Je.stateNode,Ue?(x=f.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(W=Je.stateNode,oe=Je.memoizedProps.style,v=oe!=null&&oe.hasOwnProperty("display")?oe.display:null,W.style.display=P("display",v))}catch(xt){Cr(i,i.return,xt)}}}else if(Je.tag===6){if(Ye===null)try{Je.stateNode.nodeValue=Ue?"":Je.memoizedProps}catch(xt){Cr(i,i.return,xt)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===i)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===i)break e;for(;Je.sibling===null;){if(Je.return===null||Je.return===i)break e;Ye===Je&&(Ye=null),Je=Je.return}Ye===Je&&(Ye=null),Je.sibling.return=Je.return,Je=Je.sibling}}break;case 19:po(s,i),jo(i),u&4&&dm(i);break;case 21:break;default:po(s,i),jo(i)}}function jo(i){var s=i.flags;if(s&2){try{e:{for(var l=i.return;l!==null;){if(Am(l)){var u=l;break e}l=l.return}throw Error(r(160))}switch(u.tag){case 5:var f=u.stateNode;u.flags&32&&(ce(f,""),u.flags&=-33);var x=lm(i);Ap(i,x,f);break;case 3:case 4:var v=u.stateNode.containerInfo,W=lm(i);ap(i,W,v);break;default:throw Error(r(161))}}catch(oe){Cr(i,i.return,oe)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Fv(i,s,l){ut=i,pm(i)}function pm(i,s,l){for(var u=(i.mode&1)!==0;ut!==null;){var f=ut,x=f.child;if(f.tag===22&&u){var v=f.memoizedState!==null||Ql;if(!v){var W=f.alternate,oe=W!==null&&W.memoizedState!==null||un;W=Ql;var Ue=un;if(Ql=v,(un=oe)&&!Ue)for(ut=f;ut!==null;)v=ut,oe=v.child,v.tag===22&&v.memoizedState!==null?fm(f):oe!==null?(oe.return=v,ut=oe):fm(f);for(;x!==null;)ut=x,pm(x),x=x.sibling;ut=f,Ql=W,un=Ue}gm(i)}else(f.subtreeFlags&8772)!==0&&x!==null?(x.return=f,ut=x):gm(i)}}function gm(i){for(;ut!==null;){var s=ut;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:un||Rl(5,s);break;case 1:var u=s.stateNode;if(s.flags&4&&!un)if(l===null)u.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:co(s.type,l.memoizedProps);u.componentDidUpdate(f,l.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var x=s.updateQueue;x!==null&&h0(s,x,u);break;case 3:var v=s.updateQueue;if(v!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}h0(s,v,l)}break;case 5:var W=s.stateNode;if(l===null&&s.flags&4){l=W;var oe=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":oe.autoFocus&&l.focus();break;case"img":oe.src&&(l.src=oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Ue=s.alternate;if(Ue!==null){var Ye=Ue.memoizedState;if(Ye!==null){var Je=Ye.dehydrated;Je!==null&&hr(Je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}un||s.flags&512&&sp(s)}catch($e){Cr(s,s.return,$e)}}if(s===i){ut=null;break}if(l=s.sibling,l!==null){l.return=s.return,ut=l;break}ut=s.return}}function hm(i){for(;ut!==null;){var s=ut;if(s===i){ut=null;break}var l=s.sibling;if(l!==null){l.return=s.return,ut=l;break}ut=s.return}}function fm(i){for(;ut!==null;){var s=ut;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Rl(4,s)}catch(oe){Cr(s,l,oe)}break;case 1:var u=s.stateNode;if(typeof u.componentDidMount=="function"){var f=s.return;try{u.componentDidMount()}catch(oe){Cr(s,f,oe)}}var x=s.return;try{sp(s)}catch(oe){Cr(s,x,oe)}break;case 5:var v=s.return;try{sp(s)}catch(oe){Cr(s,v,oe)}}}catch(oe){Cr(s,s.return,oe)}if(s===i){ut=null;break}var W=s.sibling;if(W!==null){W.return=s.return,ut=W;break}ut=s.return}}var Uv=Math.ceil,Ml=fe.ReactCurrentDispatcher,lp=fe.ReactCurrentOwner,qn=fe.ReactCurrentBatchConfig,_t=0,Gr=null,Ur=null,tn=0,Nn=0,Zs=di(0),Nr=0,sA=null,is=0,Ll=0,cp=0,aA=null,En=null,dp=0,ea=1/0,Vo=null,Dl=!1,up=null,mi=null,Pl=!1,xi=null,Nl=0,AA=0,pp=null,Hl=-1,Ol=0;function yn(){return(_t&6)!==0?sr():Hl!==-1?Hl:Hl=sr()}function yi(i){return(i.mode&1)===0?1:(_t&2)!==0&&tn!==0?tn&-tn:hv.transition!==null?(Ol===0&&(Ol=Qe()),Ol):(i=Kt,i!==0||(i=window.event,i=i===void 0?16:Ai(i.type)),i)}function go(i,s,l,u){if(50<AA)throw AA=0,pp=null,Error(r(185));si(i,l,u),((_t&2)===0||i!==Gr)&&(i===Gr&&((_t&2)===0&&(Ll|=l),Nr===4&&bi(i,tn)),kn(i,u),l===1&&_t===0&&(s.mode&1)===0&&(ea=sr()+500,hl&&pi()))}function kn(i,s){var l=i.callbackNode;eu(i,s);var u=Vi(i,i===Gr?tn:0);if(u===0)l!==null&&Po(l),i.callbackNode=null,i.callbackPriority=0;else if(s=u&-u,i.callbackPriority!==s){if(l!=null&&Po(l),s===1)i.tag===0?gv(xm.bind(null,i)):n0(xm.bind(null,i)),cv(function(){(_t&6)===0&&pi()}),l=null;else{switch(Ra(u)){case 1:l=Qa;break;case 4:l=XA;break;case 16:l=ao;break;case 536870912:l=ks;break;default:l=ao}l=Im(l,mm.bind(null,i))}i.callbackPriority=s,i.callbackNode=l}}function mm(i,s){if(Hl=-1,Ol=0,(_t&6)!==0)throw Error(r(327));var l=i.callbackNode;if(ta()&&i.callbackNode!==l)return null;var u=Vi(i,i===Gr?tn:0);if(u===0)return null;if((u&30)!==0||(u&i.expiredLanes)!==0||s)s=_l(i,u);else{s=u;var f=_t;_t|=2;var x=bm();(Gr!==i||tn!==s)&&(Vo=null,ea=sr()+500,as(i,s));do try{Mv();break}catch(W){ym(i,W)}while(!0);Fu(),Ml.current=x,_t=f,Ur!==null?s=0:(Gr=null,tn=0,s=Nr)}if(s!==0){if(s===2&&(f=Us(i),f!==0&&(u=f,s=gp(i,f))),s===1)throw l=sA,as(i,0),bi(i,u),kn(i,sr()),l;if(s===6)bi(i,u);else{if(f=i.current.alternate,(u&30)===0&&!Qv(f)&&(s=_l(i,u),s===2&&(x=Us(i),x!==0&&(u=x,s=gp(i,x))),s===1))throw l=sA,as(i,0),bi(i,u),kn(i,sr()),l;switch(i.finishedWork=f,i.finishedLanes=u,s){case 0:case 1:throw Error(r(345));case 2:As(i,En,Vo);break;case 3:if(bi(i,u),(u&130023424)===u&&(s=dp+500-sr(),10<s)){if(Vi(i,0)!==0)break;if(f=i.suspendedLanes,(f&u)!==u){yn(),i.pingedLanes|=i.suspendedLanes&f;break}i.timeoutHandle=bu(As.bind(null,i,En,Vo),s);break}As(i,En,Vo);break;case 4:if(bi(i,u),(u&4194240)===u)break;for(s=i.eventTimes,f=-1;0<u;){var v=31-Mn(u);x=1<<v,v=s[v],v>f&&(f=v),u&=~x}if(u=f,u=sr()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Uv(u/1960))-u,10<u){i.timeoutHandle=bu(As.bind(null,i,En,Vo),u);break}As(i,En,Vo);break;case 5:As(i,En,Vo);break;default:throw Error(r(329))}}}return kn(i,sr()),i.callbackNode===l?mm.bind(null,i):null}function gp(i,s){var l=aA;return i.current.memoizedState.isDehydrated&&(as(i,s).flags|=256),i=_l(i,s),i!==2&&(s=En,En=l,s!==null&&hp(s)),i}function hp(i){En===null?En=i:En.push.apply(En,i)}function Qv(i){for(var s=i;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var u=0;u<l.length;u++){var f=l[u],x=f.getSnapshot;f=f.value;try{if(!Ao(x(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function bi(i,s){for(s&=~cp,s&=~Ll,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var l=31-Mn(s),u=1<<l;i[l]=-1,s&=~u}}function xm(i){if((_t&6)!==0)throw Error(r(327));ta();var s=Vi(i,0);if((s&1)===0)return kn(i,sr()),null;var l=_l(i,s);if(i.tag!==0&&l===2){var u=Us(i);u!==0&&(s=u,l=gp(i,u))}if(l===1)throw l=sA,as(i,0),bi(i,s),kn(i,sr()),l;if(l===6)throw Error(r(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,As(i,En,Vo),kn(i,sr()),null}function fp(i,s){var l=_t;_t|=1;try{return i(s)}finally{_t=l,_t===0&&(ea=sr()+500,hl&&pi())}}function ss(i){xi!==null&&xi.tag===0&&(_t&6)===0&&ta();var s=_t;_t|=1;var l=qn.transition,u=Kt;try{if(qn.transition=null,Kt=1,i)return i()}finally{Kt=u,qn.transition=l,_t=s,(_t&6)===0&&pi()}}function mp(){Nn=Zs.current,pr(Zs)}function as(i,s){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,lv(l)),Ur!==null)for(l=Ur.return;l!==null;){var u=l;switch(Iu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&pl();break;case 3:Js(),pr(Bn),pr(ln),Nu();break;case 5:Du(u);break;case 4:Js();break;case 13:pr(br);break;case 19:pr(br);break;case 10:Uu(u.type._context);break;case 22:case 23:mp()}l=l.return}if(Gr=i,Ur=i=wi(i.current,null),tn=Nn=s,Nr=0,sA=null,cp=Ll=is=0,En=aA=null,rs!==null){for(s=0;s<rs.length;s++)if(l=rs[s],u=l.interleaved,u!==null){l.interleaved=null;var f=u.next,x=l.pending;if(x!==null){var v=x.next;x.next=f,u.next=v}l.pending=u}rs=null}return i}function ym(i,s){do{var l=Ur;try{if(Fu(),Sl.current=jl,Il){for(var u=wr.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Il=!1}if(os=0,Wr=Pr=wr=null,eA=!1,tA=0,lp.current=null,l===null||l.return===null){Nr=1,sA=s,Ur=null;break}e:{var x=i,v=l.return,W=l,oe=s;if(s=tn,W.flags|=32768,oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Ue=oe,Ye=W,Je=Ye.tag;if((Ye.mode&1)===0&&(Je===0||Je===11||Je===15)){var $e=Ye.alternate;$e?(Ye.updateQueue=$e.updateQueue,Ye.memoizedState=$e.memoizedState,Ye.lanes=$e.lanes):(Ye.updateQueue=null,Ye.memoizedState=null)}var at=K0(v);if(at!==null){at.flags&=-257,W0(at,v,W,x,s),at.mode&1&&z0(x,Ue,s),s=at,oe=Ue;var ht=s.updateQueue;if(ht===null){var xt=new Set;xt.add(oe),s.updateQueue=xt}else ht.add(oe);break e}else{if((s&1)===0){z0(x,Ue,s),xp();break e}oe=Error(r(426))}}else if(fr&&W.mode&1){var Ir=K0(v);if(Ir!==null){(Ir.flags&65536)===0&&(Ir.flags|=256),W0(Ir,v,W,x,s),ju(Xs(oe,W));break e}}x=oe=Xs(oe,W),Nr!==4&&(Nr=2),aA===null?aA=[x]:aA.push(x),x=v;do{switch(x.tag){case 3:x.flags|=65536,s&=-s,x.lanes|=s;var Se=O0(x,oe,s);g0(x,Se);break e;case 1:W=oe;var he=x.type,je=x.stateNode;if((x.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||je!==null&&typeof je.componentDidCatch=="function"&&(mi===null||!mi.has(je)))){x.flags|=65536,s&=-s,x.lanes|=s;var et=_0(x,W,s);g0(x,et);break e}}x=x.return}while(x!==null)}vm(l)}catch(vt){s=vt,Ur===l&&l!==null&&(Ur=l=l.return);continue}break}while(!0)}function bm(){var i=Ml.current;return Ml.current=jl,i===null?jl:i}function xp(){(Nr===0||Nr===3||Nr===2)&&(Nr=4),Gr===null||(is&268435455)===0&&(Ll&268435455)===0||bi(Gr,tn)}function _l(i,s){var l=_t;_t|=2;var u=bm();(Gr!==i||tn!==s)&&(Vo=null,as(i,s));do try{Rv();break}catch(f){ym(i,f)}while(!0);if(Fu(),_t=l,Ml.current=u,Ur!==null)throw Error(r(261));return Gr=null,tn=0,Nr}function Rv(){for(;Ur!==null;)wm(Ur)}function Mv(){for(;Ur!==null&&!Wi();)wm(Ur)}function wm(i){var s=Sm(i.alternate,i,Nn);i.memoizedProps=i.pendingProps,s===null?vm(i):Ur=s,lp.current=null}function vm(i){var s=i;do{var l=s.alternate;if(i=s.return,(s.flags&32768)===0){if(l=Ev(l,s,Nn),l!==null){Ur=l;return}}else{if(l=kv(l,s),l!==null){l.flags&=32767,Ur=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Nr=6,Ur=null;return}}if(s=s.sibling,s!==null){Ur=s;return}Ur=s=i}while(s!==null);Nr===0&&(Nr=5)}function As(i,s,l){var u=Kt,f=qn.transition;try{qn.transition=null,Kt=1,Lv(i,s,l,u)}finally{qn.transition=f,Kt=u}return null}function Lv(i,s,l,u){do ta();while(xi!==null);if((_t&6)!==0)throw Error(r(327));l=i.finishedWork;var f=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0;var x=l.lanes|l.childLanes;if(el(i,x),i===Gr&&(Ur=Gr=null,tn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Pl||(Pl=!0,Im(ao,function(){return ta(),null})),x=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||x){x=qn.transition,qn.transition=null;var v=Kt;Kt=1;var W=_t;_t|=4,lp.current=null,Tv(i,l),um(l,i),rv(xu),$n=!!mu,xu=mu=null,i.current=l,Fv(l),No(),_t=W,Kt=v,qn.transition=x}else i.current=l;if(Pl&&(Pl=!1,xi=i,Nl=f),x=i.pendingLanes,x===0&&(mi=null),Ts(l.stateNode),kn(i,sr()),s!==null)for(u=i.onRecoverableError,l=0;l<s.length;l++)f=s[l],u(f.value,{componentStack:f.stack,digest:f.digest});if(Dl)throw Dl=!1,i=up,up=null,i;return(Nl&1)!==0&&i.tag!==0&&ta(),x=i.pendingLanes,(x&1)!==0?i===pp?AA++:(AA=0,pp=i):AA=0,pi(),null}function ta(){if(xi!==null){var i=Ra(Nl),s=qn.transition,l=Kt;try{if(qn.transition=null,Kt=16>i?16:i,xi===null)var u=!1;else{if(i=xi,xi=null,Nl=0,(_t&6)!==0)throw Error(r(331));var f=_t;for(_t|=4,ut=i.current;ut!==null;){var x=ut,v=x.child;if((ut.flags&16)!==0){var W=x.deletions;if(W!==null){for(var oe=0;oe<W.length;oe++){var Ue=W[oe];for(ut=Ue;ut!==null;){var Ye=ut;switch(Ye.tag){case 0:case 11:case 15:iA(8,Ye,x)}var Je=Ye.child;if(Je!==null)Je.return=Ye,ut=Je;else for(;ut!==null;){Ye=ut;var $e=Ye.sibling,at=Ye.return;if(am(Ye),Ye===Ue){ut=null;break}if($e!==null){$e.return=at,ut=$e;break}ut=at}}}var ht=x.alternate;if(ht!==null){var xt=ht.child;if(xt!==null){ht.child=null;do{var Ir=xt.sibling;xt.sibling=null,xt=Ir}while(xt!==null)}}ut=x}}if((x.subtreeFlags&2064)!==0&&v!==null)v.return=x,ut=v;else e:for(;ut!==null;){if(x=ut,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:iA(9,x,x.return)}var Se=x.sibling;if(Se!==null){Se.return=x.return,ut=Se;break e}ut=x.return}}var he=i.current;for(ut=he;ut!==null;){v=ut;var je=v.child;if((v.subtreeFlags&2064)!==0&&je!==null)je.return=v,ut=je;else e:for(v=he;ut!==null;){if(W=ut,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:Rl(9,W)}}catch(vt){Cr(W,W.return,vt)}if(W===v){ut=null;break e}var et=W.sibling;if(et!==null){et.return=W.return,ut=et;break e}ut=W.return}}if(_t=f,pi(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(js,i)}catch{}u=!0}return u}finally{Kt=l,qn.transition=s}}return!1}function Cm(i,s,l){s=Xs(l,s),s=O0(i,s,1),i=hi(i,s,1),s=yn(),i!==null&&(si(i,1,s),kn(i,s))}function Cr(i,s,l){if(i.tag===3)Cm(i,i,l);else for(;s!==null;){if(s.tag===3){Cm(s,i,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(mi===null||!mi.has(u))){i=Xs(l,i),i=_0(s,i,1),s=hi(s,i,1),i=yn(),s!==null&&(si(s,1,i),kn(s,i));break}}s=s.return}}function Dv(i,s,l){var u=i.pingCache;u!==null&&u.delete(s),s=yn(),i.pingedLanes|=i.suspendedLanes&l,Gr===i&&(tn&l)===l&&(Nr===4||Nr===3&&(tn&130023424)===tn&&500>sr()-dp?as(i,0):cp|=l),kn(i,s)}function Bm(i,s){s===0&&((i.mode&1)===0?s=1:(s=Fs,Fs<<=1,(Fs&130023424)===0&&(Fs=4194304)));var l=yn();i=Wo(i,s),i!==null&&(si(i,s,l),kn(i,l))}function Pv(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),Bm(i,l)}function Nv(i,s){var l=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(l=f.retryLane);break;case 19:u=i.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(s),Bm(i,l)}var Sm;Sm=function(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps||Bn.current)In=!0;else{if((i.lanes&l)===0&&(s.flags&128)===0)return In=!1,Iv(i,s,l);In=(i.flags&131072)!==0}else In=!1,fr&&(s.flags&1048576)!==0&&o0(s,ml,s.index);switch(s.lanes=0,s.tag){case 2:var u=s.type;Ul(i,s),i=s.pendingProps;var f=zs(s,ln.current);Ys(s,l),f=_u(null,s,u,i,f,l);var x=zu();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Sn(u)?(x=!0,gl(s)):x=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Mu(s),f.updater=Tl,s.stateNode=f,f._reactInternals=s,Yu(s,u,i,l),s=Zu(null,s,u,!0,x,l)):(s.tag=0,fr&&x&&Su(s),xn(null,s,f,l),s=s.child),s;case 16:u=s.elementType;e:{switch(Ul(i,s),i=s.pendingProps,f=u._init,u=f(u._payload),s.type=u,f=s.tag=Ov(u),i=co(u,i),f){case 0:s=qu(null,s,u,i,l);break e;case 1:s=X0(null,s,u,i,l);break e;case 11:s=G0(null,s,u,i,l);break e;case 14:s=$0(null,s,u,co(u.type,i),l);break e}throw Error(r(306,u,""))}return s;case 0:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:co(u,f),qu(i,s,u,f,l);case 1:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:co(u,f),X0(i,s,u,f,l);case 3:e:{if(q0(s),i===null)throw Error(r(387));u=s.pendingProps,x=s.memoizedState,f=x.element,p0(i,s),Cl(s,u,null,l);var v=s.memoizedState;if(u=v.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=x,s.memoizedState=x,s.flags&256){f=Xs(Error(r(423)),s),s=Z0(i,s,u,l,f);break e}else if(u!==f){f=Xs(Error(r(424)),s),s=Z0(i,s,u,l,f);break e}else for(Pn=ci(s.stateNode.containerInfo.firstChild),Dn=s,fr=!0,lo=null,l=d0(s,null,u,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Gs(),u===f){s=$o(i,s,l);break e}xn(i,s,u,l)}s=s.child}return s;case 5:return f0(s),i===null&&ku(s),u=s.type,f=s.pendingProps,x=i!==null?i.memoizedProps:null,v=f.children,yu(u,f)?v=null:x!==null&&yu(u,x)&&(s.flags|=32),J0(i,s),xn(i,s,v,l),s.child;case 6:return i===null&&ku(s),null;case 13:return em(i,s,l);case 4:return Lu(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=$s(s,null,u,l):xn(i,s,u,l),s.child;case 11:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:co(u,f),G0(i,s,u,f,l);case 7:return xn(i,s,s.pendingProps,l),s.child;case 8:return xn(i,s,s.pendingProps.children,l),s.child;case 12:return xn(i,s,s.pendingProps.children,l),s.child;case 10:e:{if(u=s.type._context,f=s.pendingProps,x=s.memoizedProps,v=f.value,Ar(bl,u._currentValue),u._currentValue=v,x!==null)if(Ao(x.value,v)){if(x.children===f.children&&!Bn.current){s=$o(i,s,l);break e}}else for(x=s.child,x!==null&&(x.return=s);x!==null;){var W=x.dependencies;if(W!==null){v=x.child;for(var oe=W.firstContext;oe!==null;){if(oe.context===u){if(x.tag===1){oe=Go(-1,l&-l),oe.tag=2;var Ue=x.updateQueue;if(Ue!==null){Ue=Ue.shared;var Ye=Ue.pending;Ye===null?oe.next=oe:(oe.next=Ye.next,Ye.next=oe),Ue.pending=oe}}x.lanes|=l,oe=x.alternate,oe!==null&&(oe.lanes|=l),Qu(x.return,l,s),W.lanes|=l;break}oe=oe.next}}else if(x.tag===10)v=x.type===s.type?null:x.child;else if(x.tag===18){if(v=x.return,v===null)throw Error(r(341));v.lanes|=l,W=v.alternate,W!==null&&(W.lanes|=l),Qu(v,l,s),v=x.sibling}else v=x.child;if(v!==null)v.return=x;else for(v=x;v!==null;){if(v===s){v=null;break}if(x=v.sibling,x!==null){x.return=v.return,v=x;break}v=v.return}x=v}xn(i,s,f.children,l),s=s.child}return s;case 9:return f=s.type,u=s.pendingProps.children,Ys(s,l),f=Jn(f),u=u(f),s.flags|=1,xn(i,s,u,l),s.child;case 14:return u=s.type,f=co(u,s.pendingProps),f=co(u.type,f),$0(i,s,u,f,l);case 15:return V0(i,s,s.type,s.pendingProps,l);case 17:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:co(u,f),Ul(i,s),s.tag=1,Sn(u)?(i=!0,gl(s)):i=!1,Ys(s,l),N0(s,u,f),Yu(s,u,f,l),Zu(null,s,u,!0,i,l);case 19:return rm(i,s,l);case 22:return Y0(i,s,l)}throw Error(r(156,s.tag))};function Im(i,s){return cr(i,s)}function Hv(i,s,l,u){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(i,s,l,u){return new Hv(i,s,l,u)}function yp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ov(i){if(typeof i=="function")return yp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===pe)return 11;if(i===re)return 14}return 2}function wi(i,s){var l=i.alternate;return l===null?(l=Zn(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function zl(i,s,l,u,f,x){var v=2;if(u=i,typeof i=="function")yp(i)&&(v=1);else if(typeof i=="string")v=5;else e:switch(i){case ee:return ls(l.children,f,x,s);case Re:v=8,f|=8;break;case se:return i=Zn(12,l,s,f|2),i.elementType=se,i.lanes=x,i;case we:return i=Zn(13,l,s,f),i.elementType=we,i.lanes=x,i;case Pe:return i=Zn(19,l,s,f),i.elementType=Pe,i.lanes=x,i;case k:return Kl(l,f,x,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Z:v=10;break e;case ue:v=9;break e;case pe:v=11;break e;case re:v=14;break e;case Ee:v=16,u=null;break e}throw Error(r(130,i==null?i:typeof i,""))}return s=Zn(v,l,s,f),s.elementType=i,s.type=u,s.lanes=x,s}function ls(i,s,l,u){return i=Zn(7,i,u,s),i.lanes=l,i}function Kl(i,s,l,u){return i=Zn(22,i,u,s),i.elementType=k,i.lanes=l,i.stateNode={isHidden:!1},i}function bp(i,s,l){return i=Zn(6,i,null,s),i.lanes=l,i}function wp(i,s,l){return s=Zn(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function _v(i,s,l,u,f){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qs(0),this.expirationTimes=Qs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qs(0),this.identifierPrefix=u,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function vp(i,s,l,u,f,x,v,W,oe){return i=new _v(i,s,l,W,oe),s===1?(s=1,x===!0&&(s|=8)):s=0,x=Zn(3,null,null,s),i.current=x,x.stateNode=i,x.memoizedState={element:u,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mu(x),i}function zv(i,s,l){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:u==null?null:""+u,children:i,containerInfo:s,implementation:l}}function Em(i){if(!i)return ui;i=i._reactInternals;e:{if(rt(i)!==i||i.tag!==1)throw Error(r(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Sn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(r(171))}if(i.tag===1){var l=i.type;if(Sn(l))return t0(i,l,s)}return s}function km(i,s,l,u,f,x,v,W,oe){return i=vp(l,u,!0,i,f,x,v,W,oe),i.context=Em(null),l=i.current,u=yn(),f=yi(l),x=Go(u,f),x.callback=s??null,hi(l,x,f),i.current.lanes=f,si(i,f,u),kn(i,u),i}function Wl(i,s,l,u){var f=s.current,x=yn(),v=yi(f);return l=Em(l),s.context===null?s.context=l:s.pendingContext=l,s=Go(x,v),s.payload={element:i},u=u===void 0?null:u,u!==null&&(s.callback=u),i=hi(f,s,v),i!==null&&(go(i,f,v,x),vl(i,f,v)),v}function Gl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function jm(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function Cp(i,s){jm(i,s),(i=i.alternate)&&jm(i,s)}function Kv(){return null}var Tm=typeof reportError=="function"?reportError:function(i){console.error(i)};function Bp(i){this._internalRoot=i}$l.prototype.render=Bp.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));Wl(i,s,null,null)},$l.prototype.unmount=Bp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;ss(function(){Wl(null,i,null,null)}),s[Oo]=null}};function $l(i){this._internalRoot=i}$l.prototype.unstable_scheduleHydration=function(i){if(i){var s=He();i={blockedOn:null,target:i,priority:s};for(var l=0;l<Zr.length&&s!==0&&s<Zr[l].priority;l++);Zr.splice(l,0,i),l===0&&Gn(i)}};function Sp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Vl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Fm(){}function Wv(i,s,l,u,f){if(f){if(typeof u=="function"){var x=u;u=function(){var Ue=Gl(v);x.call(Ue)}}var v=km(s,u,i,0,null,!1,!1,"",Fm);return i._reactRootContainer=v,i[Oo]=v.current,Ga(i.nodeType===8?i.parentNode:i),ss(),v}for(;f=i.lastChild;)i.removeChild(f);if(typeof u=="function"){var W=u;u=function(){var Ue=Gl(oe);W.call(Ue)}}var oe=vp(i,0,!1,null,null,!1,!1,"",Fm);return i._reactRootContainer=oe,i[Oo]=oe.current,Ga(i.nodeType===8?i.parentNode:i),ss(function(){Wl(s,oe,l,u)}),oe}function Yl(i,s,l,u,f){var x=l._reactRootContainer;if(x){var v=x;if(typeof f=="function"){var W=f;f=function(){var oe=Gl(v);W.call(oe)}}Wl(s,v,i,f)}else v=Wv(l,s,i,f,u);return Gl(v)}Ma=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var l=$i(s.pendingLanes);l!==0&&(Rs(s,l|1),kn(s,sr()),(_t&6)===0&&(ea=sr()+500,pi()))}break;case 13:ss(function(){var u=Wo(i,1);if(u!==null){var f=yn();go(u,i,1,f)}}),Cp(i,1)}},I=function(i){if(i.tag===13){var s=Wo(i,134217728);if(s!==null){var l=yn();go(s,i,134217728,l)}Cp(i,134217728)}},te=function(i){if(i.tag===13){var s=yi(i),l=Wo(i,s);if(l!==null){var u=yn();go(l,i,s,u)}Cp(i,s)}},He=function(){return Kt},We=function(i,s){var l=Kt;try{return Kt=i,s()}finally{Kt=l}},zt=function(i,s,l){switch(s){case"input":if(ze(i,l),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==i&&u.form===i.form){var f=ul(u);if(!f)throw Error(r(90));nt(u),ze(u,f)}}}break;case"textarea":V(i,l);break;case"select":s=l.value,s!=null&&U(i,!!l.multiple,s,!1)}},be=fp,De=ss;var Gv={usingClientEntryPoint:!1,Events:[Ya,Os,ul,Tr,J,fp]},lA={findFiberByHostInstance:qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$v={bundleType:lA.bundleType,version:lA.version,rendererPackageName:lA.rendererPackageName,rendererConfig:lA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fe.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Dr(i),i===null?null:i.stateNode},findFiberByHostInstance:lA.findFiberByHostInstance||Kv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jl.isDisabled&&Jl.supportsFiber)try{js=Jl.inject($v),Fr=Jl}catch{}}return jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gv,jn.createPortal=function(i,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sp(s))throw Error(r(200));return zv(i,s,null,l)},jn.createRoot=function(i,s){if(!Sp(i))throw Error(r(299));var l=!1,u="",f=Tm;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=vp(i,1,!1,null,null,l,!1,u,f),i[Oo]=s.current,Ga(i.nodeType===8?i.parentNode:i),new Bp(s)},jn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=Dr(s),i=i===null?null:i.stateNode,i},jn.flushSync=function(i){return ss(i)},jn.hydrate=function(i,s,l){if(!Vl(s))throw Error(r(200));return Yl(null,i,s,!0,l)},jn.hydrateRoot=function(i,s,l){if(!Sp(i))throw Error(r(405));var u=l!=null&&l.hydratedSources||null,f=!1,x="",v=Tm;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),s=km(s,null,i,1,l??null,f,!1,x,v),i[Oo]=s.current,Ga(i),u)for(i=0;i<u.length;i++)l=u[i],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new $l(s)},jn.render=function(i,s,l){if(!Vl(s))throw Error(r(200));return Yl(null,i,s,!1,l)},jn.unmountComponentAtNode=function(i){if(!Vl(i))throw Error(r(40));return i._reactRootContainer?(ss(function(){Yl(null,null,i,!1,function(){i._reactRootContainer=null,i[Oo]=null})}),!0):!1},jn.unstable_batchedUpdates=fp,jn.unstable_renderSubtreeIntoContainer=function(i,s,l,u){if(!Vl(l))throw Error(r(200));if(i==null||i._reactInternals===void 0)throw Error(r(38));return Yl(i,s,l,!1,u)},jn.version="18.3.1-next-f1338f8080-20240426",jn}var Nm;function zy(){if(Nm)return kp.exports;Nm=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),kp.exports=nC(),kp.exports}var Hm;function oC(){if(Hm)return Xl;Hm=1;var o=zy();return Xl.createRoot=o.createRoot,Xl.hydrateRoot=o.hydrateRoot,Xl}var iC=oC();zy();/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function RA(){return RA=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(o[n]=r[n])}return o},RA.apply(this,arguments)}var Ti;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(Ti||(Ti={}));const Om="popstate";function sC(o){o===void 0&&(o={});function e(n,a){let{pathname:A,search:c,hash:p}=n.location;return dg("",{pathname:A,search:c,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Wy(a)}return AC(e,r,null,o)}function Kr(o,e){if(o===!1||o===null||typeof o>"u")throw new Error(e)}function Ky(o,e){if(!o){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aC(){return Math.random().toString(36).substr(2,8)}function _m(o,e){return{usr:o.state,key:o.key,idx:e}}function dg(o,e,r,n){return r===void 0&&(r=null),RA({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof e=="string"?Sa(e):e,{state:r,key:e&&e.key||n||aC()})}function Wy(o){let{pathname:e="/",search:r="",hash:n=""}=o;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Sa(o){let e={};if(o){let r=o.indexOf("#");r>=0&&(e.hash=o.substr(r),o=o.substr(0,r));let n=o.indexOf("?");n>=0&&(e.search=o.substr(n),o=o.substr(0,n)),o&&(e.pathname=o)}return e}function AC(o,e,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:A=!1}=n,c=a.history,p=Ti.Pop,d=null,m=g();m==null&&(m=0,c.replaceState(RA({},c.state,{idx:m}),""));function g(){return(c.state||{idx:null}).idx}function y(){p=Ti.Pop;let S=g(),N=S==null?null:S-m;m=S,d&&d({action:p,location:Q.location,delta:N})}function b(S,N){p=Ti.Push;let M=dg(Q.location,S,N);m=g()+1;let Ie=_m(M,m),fe=Q.createHref(M);try{c.pushState(Ie,"",fe)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;a.location.assign(fe)}A&&d&&d({action:p,location:Q.location,delta:1})}function R(S,N){p=Ti.Replace;let M=dg(Q.location,S,N);m=g();let Ie=_m(M,m),fe=Q.createHref(M);c.replaceState(Ie,"",fe),A&&d&&d({action:p,location:Q.location,delta:0})}function C(S){let N=a.location.origin!=="null"?a.location.origin:a.location.href,M=typeof S=="string"?S:Wy(S);return M=M.replace(/ $/,"%20"),Kr(N,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,N)}let Q={get action(){return p},get location(){return o(a,c)},listen(S){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Om,y),d=S,()=>{a.removeEventListener(Om,y),d=null}},createHref(S){return e(a,S)},createURL:C,encodeLocation(S){let N=C(S);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:b,replace:R,go(S){return c.go(S)}};return Q}var zm;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(zm||(zm={}));function lC(o,e,r){return r===void 0&&(r="/"),cC(o,e,r)}function cC(o,e,r,n){let a=typeof e=="string"?Sa(e):e,A=Vy(a.pathname||"/",r);if(A==null)return null;let c=Gy(o);dC(c);let p=null;for(let d=0;p==null&&d<c.length;++d){let m=CC(A);p=bC(c[d],m)}return p}function Gy(o,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(A,c,p)=>{let d={relativePath:p===void 0?A.path||"":p,caseSensitive:A.caseSensitive===!0,childrenIndex:c,route:A};d.relativePath.startsWith("/")&&(Kr(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let m=hs([n,d.relativePath]),g=r.concat(d);A.children&&A.children.length>0&&(Kr(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Gy(A.children,e,g,m)),!(A.path==null&&!A.index)&&e.push({path:m,score:xC(m,A.index),routesMeta:g})};return o.forEach((A,c)=>{var p;if(A.path===""||!((p=A.path)!=null&&p.includes("?")))a(A,c);else for(let d of $y(A.path))a(A,c,d)}),e}function $y(o){let e=o.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),A=r.replace(/\?$/,"");if(n.length===0)return a?[A,""]:[A];let c=$y(n.join("/")),p=[];return p.push(...c.map(d=>d===""?A:[A,d].join("/"))),a&&p.push(...c),p.map(d=>o.startsWith("/")&&d===""?"/":d)}function dC(o){o.sort((e,r)=>e.score!==r.score?r.score-e.score:yC(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const uC=/^:[\w-]+$/,pC=3,gC=2,hC=1,fC=10,mC=-2,Km=o=>o==="*";function xC(o,e){let r=o.split("/"),n=r.length;return r.some(Km)&&(n+=mC),e&&(n+=gC),r.filter(a=>!Km(a)).reduce((a,A)=>a+(uC.test(A)?pC:A===""?hC:fC),n)}function yC(o,e){return o.length===e.length&&o.slice(0,-1).every((n,a)=>n===e[a])?o[o.length-1]-e[e.length-1]:0}function bC(o,e,r){let{routesMeta:n}=o,a={},A="/",c=[];for(let p=0;p<n.length;++p){let d=n[p],m=p===n.length-1,g=A==="/"?e:e.slice(A.length)||"/",y=wC({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},g),b=d.route;if(!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:hs([A,y.pathname]),pathnameBase:jC(hs([A,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(A=hs([A,y.pathnameBase]))}return c}function wC(o,e){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[r,n]=vC(o.path,o.caseSensitive,o.end),a=e.match(r);if(!a)return null;let A=a[0],c=A.replace(/(.)\/+$/,"$1"),p=a.slice(1);return{params:n.reduce((m,g,y)=>{let{paramName:b,isOptional:R}=g;if(b==="*"){let Q=p[y]||"";c=A.slice(0,A.length-Q.length).replace(/(.)\/+$/,"$1")}const C=p[y];return R&&!C?m[b]=void 0:m[b]=(C||"").replace(/%2F/g,"/"),m},{}),pathname:A,pathnameBase:c,pattern:o}}function vC(o,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Ky(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let n=[],a="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,p,d)=>(n.push({paramName:p,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(n.push({paramName:"*"}),a+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":o!==""&&o!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function CC(o){try{return o.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ky(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),o}}function Vy(o,e){if(e==="/")return o;if(!o.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=o.charAt(r);return n&&n!=="/"?null:o.slice(r)||"/"}function BC(o,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:a=""}=typeof o=="string"?Sa(o):o;return{pathname:r?r.startsWith("/")?r:SC(r,e):e,search:TC(n),hash:FC(a)}}function SC(o,e){let r=e.replace(/\/+$/,"").split("/");return o.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Fp(o,e,r,n){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IC(o){return o.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function EC(o,e){let r=IC(o);return e?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function kC(o,e,r,n){n===void 0&&(n=!1);let a;typeof o=="string"?a=Sa(o):(a=RA({},o),Kr(!a.pathname||!a.pathname.includes("?"),Fp("?","pathname","search",a)),Kr(!a.pathname||!a.pathname.includes("#"),Fp("#","pathname","hash",a)),Kr(!a.search||!a.search.includes("#"),Fp("#","search","hash",a)));let A=o===""||a.pathname==="",c=A?"/":a.pathname,p;if(c==null)p=r;else{let y=e.length-1;if(!n&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}p=y>=0?e[y]:"/"}let d=BC(a,p),m=c&&c!=="/"&&c.endsWith("/"),g=(A||c===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||g)&&(d.pathname+="/"),d}const hs=o=>o.join("/").replace(/\/\/+/g,"/"),jC=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),TC=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,FC=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function UC(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const Yy=["post","put","patch","delete"];new Set(Yy);const QC=["get",...Yy];new Set(QC);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function MA(){return MA=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(o[n]=r[n])}return o},MA.apply(this,arguments)}const eh=h.createContext(null),RC=h.createContext(null),md=h.createContext(null),xd=h.createContext(null),Ia=h.createContext({outlet:null,matches:[],isDataRoute:!1}),Jy=h.createContext(null);function yd(){return h.useContext(xd)!=null}function Xy(){return yd()||Kr(!1),h.useContext(xd).location}function qy(o){h.useContext(md).static||h.useLayoutEffect(o)}function MC(){let{isDataRoute:o}=h.useContext(Ia);return o?VC():LC()}function LC(){yd()||Kr(!1);let o=h.useContext(eh),{basename:e,future:r,navigator:n}=h.useContext(md),{matches:a}=h.useContext(Ia),{pathname:A}=Xy(),c=JSON.stringify(EC(a,r.v7_relativeSplatPath)),p=h.useRef(!1);return qy(()=>{p.current=!0}),h.useCallback(function(m,g){if(g===void 0&&(g={}),!p.current)return;if(typeof m=="number"){n.go(m);return}let y=kC(m,JSON.parse(c),A,g.relative==="path");o==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:hs([e,y.pathname])),(g.replace?n.replace:n.push)(y,g.state,g)},[e,n,c,A,o])}function DC(o,e){return PC(o,e)}function PC(o,e,r,n){yd()||Kr(!1);let{navigator:a}=h.useContext(md),{matches:A}=h.useContext(Ia),c=A[A.length-1],p=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let m=Xy(),g;if(e){var y;let S=typeof e=="string"?Sa(e):e;d==="/"||(y=S.pathname)!=null&&y.startsWith(d)||Kr(!1),g=S}else g=m;let b=g.pathname||"/",R=b;if(d!=="/"){let S=d.replace(/^\//,"").split("/");R="/"+b.replace(/^\//,"").split("/").slice(S.length).join("/")}let C=lC(o,{pathname:R}),Q=zC(C&&C.map(S=>Object.assign({},S,{params:Object.assign({},p,S.params),pathname:hs([d,a.encodeLocation?a.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?d:hs([d,a.encodeLocation?a.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),A,r,n);return e&&Q?h.createElement(xd.Provider,{value:{location:MA({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Ti.Pop}},Q):Q}function NC(){let o=$C(),e=UC(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),r=o instanceof Error?o.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},e),r?h.createElement("pre",{style:a},r):null,null)}const HC=h.createElement(NC,null);class OC extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?h.createElement(Ia.Provider,{value:this.props.routeContext},h.createElement(Jy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _C(o){let{routeContext:e,match:r,children:n}=o,a=h.useContext(eh);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),h.createElement(Ia.Provider,{value:e},n)}function zC(o,e,r,n){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),o==null){var A;if(!r)return null;if(r.errors)o=r.matches;else if((A=n)!=null&&A.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)o=r.matches;else return null}let c=o,p=(a=r)==null?void 0:a.errors;if(p!=null){let g=c.findIndex(y=>y.route.id&&(p==null?void 0:p[y.route.id])!==void 0);g>=0||Kr(!1),c=c.slice(0,Math.min(c.length,g+1))}let d=!1,m=-1;if(r&&n&&n.v7_partialHydration)for(let g=0;g<c.length;g++){let y=c[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=g),y.route.id){let{loaderData:b,errors:R}=r,C=y.route.loader&&b[y.route.id]===void 0&&(!R||R[y.route.id]===void 0);if(y.route.lazy||C){d=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((g,y,b)=>{let R,C=!1,Q=null,S=null;r&&(R=p&&y.route.id?p[y.route.id]:void 0,Q=y.route.errorElement||HC,d&&(m<0&&b===0?(YC("route-fallback"),C=!0,S=null):m===b&&(C=!0,S=y.route.hydrateFallbackElement||null)));let N=e.concat(c.slice(0,b+1)),M=()=>{let Ie;return R?Ie=Q:C?Ie=S:y.route.Component?Ie=h.createElement(y.route.Component,null):y.route.element?Ie=y.route.element:Ie=g,h.createElement(_C,{match:y,routeContext:{outlet:g,matches:N,isDataRoute:r!=null},children:Ie})};return r&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?h.createElement(OC,{location:r.location,revalidation:r.revalidation,component:Q,error:R,children:M(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):M()},null)}var Zy=function(o){return o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o}(Zy||{}),eb=function(o){return o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o}(eb||{});function KC(o){let e=h.useContext(eh);return e||Kr(!1),e}function WC(o){let e=h.useContext(RC);return e||Kr(!1),e}function GC(o){let e=h.useContext(Ia);return e||Kr(!1),e}function tb(o){let e=GC(),r=e.matches[e.matches.length-1];return r.route.id||Kr(!1),r.route.id}function $C(){var o;let e=h.useContext(Jy),r=WC(),n=tb();return e!==void 0?e:(o=r.errors)==null?void 0:o[n]}function VC(){let{router:o}=KC(Zy.UseNavigateStable),e=tb(eb.UseNavigateStable),r=h.useRef(!1);return qy(()=>{r.current=!0}),h.useCallback(function(a,A){A===void 0&&(A={}),r.current&&(typeof a=="number"?o.navigate(a):o.navigate(a,MA({fromRouteId:e},A)))},[o,e])}const Wm={};function YC(o,e,r){Wm[o]||(Wm[o]=!0)}function Br(o){Kr(!1)}function JC(o){let{basename:e="/",children:r=null,location:n,navigationType:a=Ti.Pop,navigator:A,static:c=!1,future:p}=o;yd()&&Kr(!1);let d=e.replace(/^\/*/,"/"),m=h.useMemo(()=>({basename:d,navigator:A,static:c,future:MA({v7_relativeSplatPath:!1},p)}),[d,p,A,c]);typeof n=="string"&&(n=Sa(n));let{pathname:g="/",search:y="",hash:b="",state:R=null,key:C="default"}=n,Q=h.useMemo(()=>{let S=Vy(g,d);return S==null?null:{location:{pathname:S,search:y,hash:b,state:R,key:C},navigationType:a}},[d,g,y,b,R,C,a]);return Q==null?null:h.createElement(md.Provider,{value:m},h.createElement(xd.Provider,{children:r,value:Q}))}function XC(o){let{children:e,location:r}=o;return DC(ug(e),r)}new Promise(()=>{});function ug(o,e){e===void 0&&(e=[]);let r=[];return h.Children.forEach(o,(n,a)=>{if(!h.isValidElement(n))return;let A=[...e,a];if(n.type===h.Fragment){r.push.apply(r,ug(n.props.children,A));return}n.type!==Br&&Kr(!1),!n.props.index||!n.props.children||Kr(!1);let c={id:n.props.id||A.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=ug(n.props.children,A)),r.push(c)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const qC="6";try{window.__reactRouterVersion=qC}catch{}const ZC="startTransition",Gm=eC[ZC];function eB(o){let{basename:e,children:r,future:n,window:a}=o,A=h.useRef();A.current==null&&(A.current=sC({window:a,v5Compat:!0}));let c=A.current,[p,d]=h.useState({action:c.action,location:c.location}),{v7_startTransition:m}=n||{},g=h.useCallback(y=>{m&&Gm?Gm(()=>d(y)):d(y)},[d,m]);return h.useLayoutEffect(()=>c.listen(g),[c,g]),h.createElement(JC,{basename:e,children:r,location:p.location,navigationType:p.action,navigator:c,future:n})}var $m;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmit="useSubmit",o.UseSubmitFetcher="useSubmitFetcher",o.UseFetcher="useFetcher",o.useViewTransitionState="useViewTransitionState"})($m||($m={}));var Vm;(function(o){o.UseFetcher="useFetcher",o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(Vm||(Vm={}));const tB=({animationPhase:o})=>{h.useEffect(()=>{const r=document.createElement("style");return r.textContent=`
      @keyframes hourglassFlip {
  0% { transform: rotate(0deg) scale(1); }
  50% { transform: rotate(-90deg) scale(1.1); }
  100% { transform: rotate(-180deg) scale(1); }
}
      
      @keyframes particleFloat {
        0%, 100% { transform: translateY(0) scale(1); opacity: 0.6; }
        50% { transform: translateY(-20px) scale(1.2); opacity: 1; }
      }
      
      @keyframes ripple {
        0% { transform: scale(0); opacity: 1; }
        100% { transform: scale(4); opacity: 0; }
      }

      FIND (in keyframes section):
javascript@keyframes shimmerText {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

@keyframes twinklePulse {
  0%, 100% {
    text-shadow: 0 4px 30px rgba(59, 130, 246, 0.6),
                 0 0 20px rgba(59, 130, 246, 0.4);
  }
  50% {
    text-shadow: 0 4px 40px rgba(59, 130, 246, 0.9),
                 0 0 40px rgba(59, 130, 246, 0.7),
                 0 0 60px rgba(59, 130, 246, 0.5);
  }
}

    `,document.head.appendChild(r),()=>document.head.contains(r)&&document.head.removeChild(r)},[]);const e={root:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)",zIndex:9999,clipPath:o==="revealing"||o==="done"?"circle(0% at 50% 50%)":"circle(150% at 50% 50%)",transition:"clip-path 0.9s cubic-bezier(0.85, 0, 0.15, 1)",pointerEvents:o==="done"?"none":"all"},blob1:{position:"absolute",width:"600px",height:"600px",background:"radial-gradient(circle, rgba(59, 130, 246, 0.4) 0%, transparent 70%)",borderRadius:"50%",top:"-200px",left:"-200px",filter:"blur(60px)",animation:"particleFloat 4s ease-in-out infinite"},blob2:{position:"absolute",width:"500px",height:"500px",background:"radial-gradient(circle, rgba(168, 85, 247, 0.3) 0%, transparent 70%)",borderRadius:"50%",bottom:"-150px",right:"-150px",filter:"blur(60px)",animation:"particleFloat 5s ease-in-out infinite",animationDelay:"1s"},rippleContainer:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",opacity:o==="revealing"?1:0,transition:"opacity 0.3s ease"},ripple:r=>({position:"absolute",width:"200px",height:"200px",border:"3px solid rgba(59, 130, 246, 0.5)",borderRadius:"50%",animation:"ripple 1.5s ease-out",animationDelay:`${r}s`}),logoContainer:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",gap:"30px",transform:o==="revealing"?"scale(0.8)":"scale(1)",opacity:o==="revealing"?0:1,transition:"all 0.6s cubic-bezier(0.85, 0, 0.15, 1)"},hourglassWrapper:{position:"relative",width:"120px",height:"120px",display:"flex",alignItems:"center",justifyContent:"center"},hourglass:{height:"100px",width:"auto",filter:"drop-shadow(0 10px 40px rgba(59, 130, 246, 0.8))",animation:o==="flipping"?"hourglassFlip 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55)":"none",transform:o==="flipping"||o==="revealing"?"rotate(180deg)":"rotate(0deg)",transition:o!=="flipping"?"transform 0.1s ease":"none"},text:{fontSize:"42px",fontWeight:700,background:"linear-gradient(90deg, #ffffff 0%, #60a5fa 25%, #93c5fd 50%, #60a5fa 75%, #ffffff 100%)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:"0px",textShadow:"0 4px 30px rgba(59, 130, 246, 0.6)",fontFamily:'"Montserrat", sans-serif',opacity:o==="initial"?0:1,transform:o==="initial"?"translateY(20px)":"translateY(0)",transition:"all 0.6s ease-out 0.3s",animation:"shimmerText 3s ease-in-out infinite, twinklePulse 2s ease-in-out infinite"},loadingBar:{width:"200px",height:"3px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"10px",overflow:"hidden",marginTop:"10px",opacity:o==="initial"?0:1,transition:"opacity 0.4s ease-out 0.4s"},loadingBarFill:{height:"100%",background:"linear-gradient(90deg, #3b82f6, #60a5fa, #93c5fd)",borderRadius:"10px",width:o==="initial"?"0%":o==="flipping"?"50%":"100%",transition:"width 0.8s cubic-bezier(0.65, 0, 0.35, 1)",boxShadow:"0 0 20px rgba(59, 130, 246, 0.8)"}};return t.jsxs("div",{style:e.root,children:[t.jsx("div",{style:e.blob1}),t.jsx("div",{style:e.blob2}),t.jsxs("div",{style:e.rippleContainer,children:[t.jsx("div",{style:e.ripple(0)}),t.jsx("div",{style:e.ripple(.15)}),t.jsx("div",{style:e.ripple(.3)})]}),t.jsxs("div",{style:e.logoContainer,children:[t.jsx("div",{style:e.hourglassWrapper,children:t.jsx("img",{src:"/images/maxcap.png",alt:"MAXCAP",style:e.hourglass})}),t.jsx("div",{style:e.text,children:"MAXCAP"}),t.jsx("div",{style:e.loadingBar,children:t.jsx("div",{style:e.loadingBarFill})})]})]})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nB=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),Ym=o=>{const e=nB(o);return e.charAt(0).toUpperCase()+e.slice(1)},rb=(...o)=>o.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),oB=o=>{for(const e in o)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=h.forwardRef(({color:o="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:A,iconNode:c,...p},d)=>h.createElement("svg",{ref:d,...iB,width:e,height:e,stroke:o,strokeWidth:n?Number(r)*24/Number(e):r,className:rb("lucide",a),...!A&&!oB(p)&&{"aria-hidden":"true"},...p},[...c.map(([m,g])=>h.createElement(m,g)),...Array.isArray(A)?A:[A]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(o,e)=>{const r=h.forwardRef(({className:n,...a},A)=>h.createElement(sB,{ref:A,iconNode:e,className:rb(`lucide-${rB(Ym(o))}`,`lucide-${o}`,n),...a}));return r.displayName=Ym(o),r};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],GA=St("activity",aB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ki=St("arrow-left",AB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Xr=St("bell",lB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],wa=St("briefcase",cB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],fs=St("building",dB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],wo=St("calendar",uB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],gB=St("chart-column",pB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pg=St("check",hB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Mo=St("chevron-down",fB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],nb=St("chevron-left",mB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Nc=St("chevron-right",xB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],io=St("circle-alert",yB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],so=St("circle-check-big",bB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],vB=St("circle-plus",wB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],BB=St("circle-x",CB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],bs=St("clock",SB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],Jm=St("cog",IB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ob=St("download",EB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gg=St("eye-off",kB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ri=St("eye",jB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FB=St("file-text",TB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],QB=St("fingerprint",UB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],ib=St("folder-open",RB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],th=St("funnel",MB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Up=St("globe",LB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ql=St("history",DB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],sb=St("info",PB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Xm=St("layers",NB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],OB=St("layout-dashboard",HB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Mi=St("lock",_B);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],KB=St("log-out",zB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Hc=St("mail",WB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ab=St("map-pin",GB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],VB=St("menu",$B);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],qm=St("pen-line",YB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ab=St("phone",JB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Sr=St("plus",XB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],LA=St("refresh-cw",qB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ki=St("save",ZB);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],$A=St("search",e5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ws=St("shield",t5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],yo=St("sparkles",r5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ms=St("square-pen",n5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],lb=St("target",o5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Kn=St("trash-2",i5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],a5=St("trending-down",s5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],bd=St("trending-up",A5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Rr=St("triangle-alert",l5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],jc=St("user-check",c5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],qt=St("user",d5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Un=St("users",u5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M18 11c-1.5 0-2.5.5-3 2",key:"1fod00"}],["path",{d:"M4 6a2 2 0 0 0-2 2v4a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V8a2 2 0 0 0-2-2h-3a8 8 0 0 0-5 2 8 8 0 0 0-5-2z",key:"d70hit"}],["path",{d:"M6 11c1.5 0 2.5.5 3 2",key:"136fht"}]],g5=St("venetian-mask",p5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],f5=St("video",h5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gr=St("x",m5);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],qo=St("zap",x5);/*! @azure/msal-common v15.13.2 2025-11-19 */const Ke={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Fi={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},ps={GET:"GET",POST:"POST"},Ea=[Ke.OPENID_SCOPE,Ke.PROFILE_SCOPE,Ke.OFFLINE_ACCESS_SCOPE],Zm=[...Ea,Ke.EMAIL_SCOPE],vn={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},ex={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Li={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Zl={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},an={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},rh={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},wd={QUERY:"query",FRAGMENT:"fragment"},y5={QUERY:"query"},cb={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},ec={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},DA={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},on={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},nh="appmetadata",b5="client_info",Oc="1",_c={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},On={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},rn={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},tr={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},SA={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},tx={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},ra={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Qp={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},ds={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},w5={Pop:"pop"},db=300;/*! @azure/msal-common v15.13.2 2025-11-19 */const zc="unexpected_error",v5="post_request_failed";/*! @azure/msal-common v15.13.2 2025-11-19 */const rx={[zc]:"Unexpected error in authentication.",[v5]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class nr extends Error{constructor(e,r,n){const a=r?`${e}: ${r}`:e;super(a),Object.setPrototypeOf(this,nr.prototype),this.errorCode=e||Ke.EMPTY_STRING,this.errorMessage=r||Ke.EMPTY_STRING,this.subError=n||Ke.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function hg(o,e){return new nr(o,e?`${rx[o]} ${e}`:rx[o])}/*! @azure/msal-common v15.13.2 2025-11-19 */const oh="client_info_decoding_error",ub="client_info_empty_error",ih="token_parsing_error",pb="null_or_empty_token",Zo="endpoints_resolution_error",gb="network_error",hb="openid_config_error",fb="hash_not_deserialized",va="invalid_state",mb="state_mismatch",fg="state_not_found",xb="nonce_mismatch",sh="auth_time_not_found",yb="max_age_transpired",C5="multiple_matching_tokens",B5="multiple_matching_accounts",bb="multiple_matching_appMetadata",wb="request_cannot_be_made",vb="cannot_remove_empty_scope",Cb="cannot_append_scopeset",mg="empty_input_scopeset",S5="device_code_polling_cancelled",I5="device_code_expired",E5="device_code_unknown_error",ah="no_account_in_silent_request",Bb="invalid_cache_record",Ah="invalid_cache_environment",xg="no_account_found",yg="no_crypto_object",k5="unexpected_credential_type",j5="invalid_assertion",T5="invalid_client_credential",Di="token_refresh_required",F5="user_timeout_reached",Sb="token_claims_cnf_required_for_signedjwt",Ib="authorization_code_missing_from_server_response",Eb="binding_key_not_removed",kb="end_session_endpoint_not_supported",lh="key_id_missing",U5="no_network_connectivity",Q5="user_canceled",R5="missing_tenant_id_error",Dt="method_not_implemented",M5="nested_app_auth_bridge_disabled",L5="platform_broker_error";/*! @azure/msal-common v15.13.2 2025-11-19 */const nx={[oh]:"The client info could not be parsed/decoded correctly",[ub]:"The client info was empty",[ih]:"Token cannot be parsed",[pb]:"The token is null or empty",[Zo]:"Endpoints cannot be resolved",[gb]:"Network request failed",[hb]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[fb]:"The hash parameters could not be deserialized",[va]:"State was not the expected format",[mb]:"State mismatch error",[fg]:"State not found",[xb]:"Nonce mismatch error",[sh]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[yb]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[C5]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[B5]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[bb]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[wb]:"Token request cannot be made without authorization code or refresh token.",[vb]:"Cannot remove null or empty scope from ScopeSet",[Cb]:"Cannot append ScopeSet",[mg]:"Empty input ScopeSet cannot be processed",[S5]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[I5]:"Device code is expired.",[E5]:"Device code stopped polling for unknown reasons.",[ah]:"Please pass an account object, silent flow is not supported without account information",[Bb]:"Cache record object was null or undefined.",[Ah]:"Invalid environment when attempting to create cache entry",[xg]:"No account found in cache for given key.",[yg]:"No crypto object detected.",[k5]:"Unexpected credential type.",[j5]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[T5]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Di]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[F5]:"User defined timeout for device code polling reached",[Sb]:"Cannot generate a POP jwt if the token_claims are not populated",[Ib]:"Server response does not contain an authorization code to proceed",[Eb]:"Could not remove the credential's binding key from storage.",[kb]:"The provided authority does not support logout",[lh]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[U5]:"No network connectivity. Check your internet connection.",[Q5]:"User cancelled the flow.",[R5]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Dt]:"This method has not been implemented",[M5]:"The nested app auth bridge is disabled",[L5]:"An error occurred in the native broker. See the platformBrokerError property for details."};class ch extends nr{constructor(e,r){super(e,r?`${nx[e]}: ${r}`:nx[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,ch.prototype)}}function Xe(o,e){return new ch(o,e)}/*! @azure/msal-common v15.13.2 2025-11-19 */const Kc={createNewGuid:()=>{throw Xe(Dt)},base64Decode:()=>{throw Xe(Dt)},base64Encode:()=>{throw Xe(Dt)},base64UrlEncode:()=>{throw Xe(Dt)},encodeKid:()=>{throw Xe(Dt)},async getPublicKeyThumbprint(){throw Xe(Dt)},async removeTokenBindingKey(){throw Xe(Dt)},async clearKeystore(){throw Xe(Dt)},async signJwt(){throw Xe(Dt)},async hashString(){throw Xe(Dt)}};/*! @azure/msal-common v15.13.2 2025-11-19 */var xr;(function(o){o[o.Error=0]="Error",o[o.Warning=1]="Warning",o[o.Info=2]="Info",o[o.Verbose=3]="Verbose",o[o.Trace=4]="Trace"})(xr||(xr={}));let ka=class bg{constructor(e,r,n){this.level=xr.Info;const a=()=>{},A=e||bg.createDefaultLoggerOptions();this.localCallback=A.loggerCallback||a,this.piiLoggingEnabled=A.piiLoggingEnabled||!1,this.level=typeof A.logLevel=="number"?A.logLevel:xr.Info,this.correlationId=A.correlationId||Ke.EMPTY_STRING,this.packageName=r||Ke.EMPTY_STRING,this.packageVersion=n||Ke.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xr.Info}}clone(e,r,n){return new bg({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;const A=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${xr[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,A,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:xr.Error,containsPii:!1,correlationId:r||Ke.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:xr.Error,containsPii:!0,correlationId:r||Ke.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:xr.Warning,containsPii:!1,correlationId:r||Ke.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:xr.Warning,containsPii:!0,correlationId:r||Ke.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:xr.Info,containsPii:!1,correlationId:r||Ke.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:xr.Info,containsPii:!0,correlationId:r||Ke.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:xr.Verbose,containsPii:!1,correlationId:r||Ke.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:xr.Verbose,containsPii:!0,correlationId:r||Ke.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:xr.Trace,containsPii:!1,correlationId:r||Ke.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:xr.Trace,containsPii:!0,correlationId:r||Ke.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};/*! @azure/msal-common v15.13.2 2025-11-19 */const jb="@azure/msal-common",dh="15.13.2";/*! @azure/msal-common v15.13.2 2025-11-19 */const uh={None:"none"};/*! @azure/msal-common v15.13.2 2025-11-19 */const Tb="redirect_uri_empty",D5="claims_request_parsing_error",Fb="authority_uri_insecure",fA="url_parse_error",Ub="empty_url_error",Qb="empty_input_scopes_error",ph="invalid_claims",Rb="token_request_empty",Mb="logout_request_empty",P5="invalid_code_challenge_method",gh="pkce_params_missing",hh="invalid_cloud_discovery_metadata",Lb="invalid_authority_metadata",Db="untrusted_authority",vd="missing_ssh_jwk",Pb="missing_ssh_kid",N5="missing_nonce_authentication_header",H5="invalid_authentication_header",Nb="cannot_set_OIDCOptions",Hb="cannot_allow_platform_broker",Ob="authority_mismatch",_b="invalid_request_method_for_EAR",zb="invalid_authorize_post_body_parameters";/*! @azure/msal-common v15.13.2 2025-11-19 */const O5={[Tb]:"A redirect URI is required for all calls, and none has been set.",[D5]:"Could not parse the given claims request object.",[Fb]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[fA]:"URL could not be parsed into appropriate segments.",[Ub]:"URL was empty or null.",[Qb]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[ph]:"Given claims parameter must be a stringified JSON object.",[Rb]:"Token request was empty and not found in cache.",[Mb]:"The logout request was null or undefined.",[P5]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[gh]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[hh]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Lb]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Db]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[vd]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Pb]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[N5]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[H5]:"Invalid authentication header provided",[Nb]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Hb]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Ob]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[zb]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[_b]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class fh extends nr{constructor(e){super(e,O5[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,fh.prototype)}}function ar(o){return new fh(o)}/*! @azure/msal-common v15.13.2 2025-11-19 */class _n{static isEmptyObj(e){if(e)try{const r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){const r={},n=e.split("&"),a=A=>decodeURIComponent(A.replace(/\+/g," "));return n.forEach(A=>{if(A.trim()){const[c,p]=A.split(/=(.+)/g,2);c&&p&&(r[a(c)]=a(p))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class zr{constructor(e){const r=e?_n.trimArrayEntries([...e]):[],n=r?_n.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw ar(Qb);this.scopes=new Set,n.forEach(a=>this.scopes.add(a))}static fromString(e){const n=(e||Ke.EMPTY_STRING).split(" ");return new zr(n)}static createSearchScopes(e){const r=e&&e.length>0?e:[...Ea],n=new zr(r);return n.containsOnlyOIDCScopes()?n.removeScope(Ke.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}containsScope(e){const r=this.printScopesLowerCase().split(" "),n=new zr(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return Zm.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw Xe(Cb)}}removeScope(e){if(!e)throw Xe(vb);this.scopes.delete(e.trim())}removeOIDCScopes(){Zm.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Xe(mg);const r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw Xe(mg);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const r=this.unionScopeSets(e),n=e.getScopeCount(),a=this.getScopeCount();return r.size<a+n}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):Ke.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.13.2 2025-11-19 */function Wc(o,e){if(!o)throw Xe(ub);try{const r=e(o);return JSON.parse(r)}catch{throw Xe(oh)}}function ga(o){if(!o)throw Xe(oh);const e=o.split(DA.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Ke.EMPTY_STRING:e[1]}}/*! @azure/msal-common v15.13.2 2025-11-19 */function ox(o,e){return!!o&&!!e&&o===e.split(".")[1]}function Cd(o,e,r,n){if(n){const{oid:a,sub:A,tid:c,name:p,tfp:d,acr:m,preferred_username:g,upn:y,login_hint:b}=n,R=c||d||m||"";return{tenantId:R,localAccountId:a||A||"",name:p,username:g||y||"",loginHint:b,isHomeTenant:ox(R,o)}}else return{tenantId:r,localAccountId:e,username:"",isHomeTenant:ox(r,o)}}function mh(o,e,r,n){let a=o;if(e){const{isHomeTenant:A,...c}=e;a={...o,...c}}if(r){const{isHomeTenant:A,...c}=Cd(o.homeAccountId,o.localAccountId,o.tenantId,r);return a={...a,...c,idTokenClaims:r,idToken:n},a}return a}/*! @azure/msal-common v15.13.2 2025-11-19 */const mo={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.13.2 2025-11-19 */function xh(o){return o&&(o.tid||o.tfp||o.acr)||null}/*! @azure/msal-common v15.13.2 2025-11-19 */const Qn={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.13.2 2025-11-19 */class jr{static getAccountInfo(e){return{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,loginHint:e.loginHint,name:e.name,nativeAccountId:e.nativeAccountId,authorityType:e.authorityType,tenantProfiles:new Map((e.tenantProfiles||[]).map(r=>[r.tenantId,r])),dataBoundary:e.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,r,n){var m,g,y,b,R,C,Q;const a=new jr;r.authorityType===mo.Adfs?a.authorityType=ec.ADFS_ACCOUNT_TYPE:r.protocolMode===Qn.OIDC?a.authorityType=ec.GENERIC_ACCOUNT_TYPE:a.authorityType=ec.MSSTS_ACCOUNT_TYPE;let A;e.clientInfo&&n&&(A=Wc(e.clientInfo,n),A.xms_tdbr&&(a.dataBoundary=A.xms_tdbr==="EU"?"EU":"None")),a.clientInfo=e.clientInfo,a.homeAccountId=e.homeAccountId,a.nativeAccountId=e.nativeAccountId;const c=e.environment||r&&r.getPreferredCache();if(!c)throw Xe(Ah);a.environment=c,a.realm=(A==null?void 0:A.utid)||xh(e.idTokenClaims)||"",a.localAccountId=(A==null?void 0:A.uid)||((m=e.idTokenClaims)==null?void 0:m.oid)||((g=e.idTokenClaims)==null?void 0:g.sub)||"";const p=((y=e.idTokenClaims)==null?void 0:y.preferred_username)||((b=e.idTokenClaims)==null?void 0:b.upn),d=(R=e.idTokenClaims)!=null&&R.emails?e.idTokenClaims.emails[0]:null;if(a.username=p||d||"",a.loginHint=(C=e.idTokenClaims)==null?void 0:C.login_hint,a.name=((Q=e.idTokenClaims)==null?void 0:Q.name)||"",a.cloudGraphHostName=e.cloudGraphHostName,a.msGraphHost=e.msGraphHost,e.tenantProfiles)a.tenantProfiles=e.tenantProfiles;else{const S=Cd(e.homeAccountId,a.localAccountId,a.realm,e.idTokenClaims);a.tenantProfiles=[S]}return a}static createFromAccountInfo(e,r,n){var A;const a=new jr;return a.authorityType=e.authorityType||ec.GENERIC_ACCOUNT_TYPE,a.homeAccountId=e.homeAccountId,a.localAccountId=e.localAccountId,a.nativeAccountId=e.nativeAccountId,a.realm=e.tenantId,a.environment=e.environment,a.username=e.username,a.name=e.name,a.loginHint=e.loginHint,a.cloudGraphHostName=r,a.msGraphHost=n,a.tenantProfiles=Array.from(((A=e.tenantProfiles)==null?void 0:A.values())||[]),a.dataBoundary=e.dataBoundary,a}static generateHomeAccountId(e,r,n,a,A){if(!(r===mo.Adfs||r===mo.Dsts)){if(e)try{const c=Wc(e,a.base64Decode);if(c.uid&&c.utid)return`${c.uid}.${c.utid}`}catch{}n.warning("No client info in response")}return(A==null?void 0:A.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let a=!0;if(n){const A=e.idTokenClaims||{},c=r.idTokenClaims||{};a=A.iat===c.iat&&A.nonce===c.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.loginHint===r.loginHint&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&a}}/*! @azure/msal-common v15.13.2 2025-11-19 */function Qo(o,e){const r=_5(o);try{const n=e(r);return JSON.parse(n)}catch{throw Xe(ih)}}function Ro(o){if(!o.signin_state)return!1;const e=["kmsi","dvc_dmjd"];return o.signin_state.some(n=>e.includes(n.trim().toLowerCase()))}function _5(o){if(!o)throw Xe(pb);const r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(o);if(!r||r.length<4)throw Xe(ih);return r[2]}function Kb(o,e){if(e===0||Date.now()-3e5>o+e)throw Xe(yb)}/*! @azure/msal-common v15.13.2 2025-11-19 */function ix(o){if(!o)return o;let e=o.toLowerCase();return _n.endsWith(e,"?")?e=e.slice(0,-1):_n.endsWith(e,"?/")&&(e=e.slice(0,-2)),_n.endsWith(e,"/")||(e+="/"),e}function Wb(o){return o.startsWith("#/")?o.substring(2):o.startsWith("#")||o.startsWith("?")?o.substring(1):o}function Gc(o){if(!o||o.indexOf("=")<0)return null;try{const e=Wb(o),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw Xe(fb)}return null}function PA(o,e=!0,r){const n=new Array;return o.forEach((a,A)=>{!e&&r&&A in r?n.push(`${A}=${a}`):n.push(`${A}=${encodeURIComponent(a)}`)}),n.join("&")}function sx(o){if(!o)return o;const e=o.split("#")[0];try{const r=new URL(e),n=r.origin+r.pathname+r.search;return ix(n)}catch{return ix(e)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class Vt{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw ar(Ub);e.includes("#")||(this._urlString=Vt.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return _n.endsWith(r,"?")?r=r.slice(0,-1):_n.endsWith(r,"?/")&&(r=r.slice(0,-2)),_n.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw ar(fA)}if(!e.HostNameAndPort||!e.PathSegments)throw ar(fA);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw ar(Fb)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return Vt.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===Li.COMMON||n[0]===Li.ORGANIZATIONS)&&(n[0]=e),Vt.constructAuthorityUriFromObject(r)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw ar(fA);const n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]};let a=n.AbsolutePath.split("/");return a=a.filter(A=>A&&A.length>0),n.PathSegments=a,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){const r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw ar(fA);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===Ke.FORWARD_SLASH){const a=new Vt(r).getUrlComponents();return a.Protocol+"//"+a.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Vt(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Gc(e)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const Gb={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},ax=Gb.endpointMetadata,yh=Gb.instanceDiscoveryMetadata,$b=new Set;yh.metadata.forEach(o=>{o.aliases.forEach(e=>{$b.add(e)})});function z5(o,e){var a;let r;const n=o.canonicalAuthority;if(n){const A=new Vt(n).getUrlComponents().HostNameAndPort;r=Ax(A,(a=o.cloudDiscoveryMetadata)==null?void 0:a.metadata,On.CONFIG,e)||Ax(A,yh.metadata,On.HARDCODED_VALUES,e)||o.knownAuthorities}return r||[]}function Ax(o,e,r,n){if(n==null||n.trace(`getAliasesFromMetadata called with source: ${r}`),o&&e){const a=$c(e,o);if(a)return n==null||n.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),a.aliases;n==null||n.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}function K5(o){return $c(yh.metadata,o)}function $c(o,e){for(let r=0;r<o.length;r++){const n=o[r];if(n.aliases.includes(e))return n}return null}/*! @azure/msal-common v15.13.2 2025-11-19 */const Vc="cache_quota_exceeded",bh="cache_error_unknown";/*! @azure/msal-common v15.13.2 2025-11-19 */const Rp={[Vc]:"Exceeded cache storage capacity.",[bh]:"Unexpected error occurred when using cache storage."};class ha extends nr{constructor(e,r){const n=r||(Rp[e]?Rp[e]:Rp[bh]);super(`${e}: ${n}`),Object.setPrototypeOf(this,ha.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}function wg(o){return o instanceof Error?o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED"||o.message.includes("exceeded the quota")?new ha(Vc):new ha(o.name,o.message):new ha(bh)}/*! @azure/msal-common v15.13.2 2025-11-19 */class vg{constructor(e,r,n,a,A){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(jb,dh),this.staticAuthorityOptions=A,this.performanceClient=a}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){if(Object.keys(e).length===0||Object.values(e).every(a=>!a))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const n=this.getAllAccounts(e,r);return n.length>1?n.sort(A=>A.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){const n=this.getAccountsFilteredBy(e,r);return n.length>0?jr.getAccountInfo(n[0]):null}buildTenantProfiles(e,r,n){return e.flatMap(a=>this.getTenantProfilesFromAccountEntity(a,r,n==null?void 0:n.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,a,A){let c=null,p;if(A&&!this.tenantProfileMatchesFilter(n,A))return null;const d=this.getIdToken(e,a,r,n.tenantId);return d&&(p=Qo(d.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(p,A))?null:(c=mh(e,n,p,d==null?void 0:d.secret),c)}getTenantProfilesFromAccountEntity(e,r,n,a){const A=jr.getAccountInfo(e);let c=A.tenantProfiles||new Map;const p=this.getTokenKeys();if(n){const m=c.get(n);if(m)c=new Map([[n,m]]);else return[]}const d=[];return c.forEach(m=>{const g=this.getTenantedAccountInfoByFilter(A,p,m,r,a);g&&d.push(g)}),d}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n,a){var A;if(!e)throw Xe(Bb);try{e.account&&await this.setAccount(e.account,r,n),e.idToken&&(a==null?void 0:a.idToken)!==!1&&await this.setIdTokenCredential(e.idToken,r,n),e.accessToken&&(a==null?void 0:a.accessToken)!==!1&&await this.saveAccessToken(e.accessToken,r,n),e.refreshToken&&(a==null?void 0:a.refreshToken)!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r,n),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(c){throw(A=this.commonLogger)==null||A.error("CacheManager.saveCacheRecord: failed"),c instanceof nr?c:wg(c)}}async saveAccessToken(e,r,n){const a={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},A=this.getTokenKeys(),c=zr.fromString(e.target);A.accessToken.forEach(p=>{if(!this.accessTokenKeyMatchesFilter(p,a,!1))return;const d=this.getAccessTokenCredential(p,r);d&&this.credentialMatchesFilter(d,a)&&zr.fromString(d.target).intersectingScopeSets(c)&&this.removeAccessToken(p,r)}),await this.setAccessTokenCredential(e,r,n)}getAccountsFilteredBy(e,r){const n=this.getAccountKeys(),a=[];return n.forEach(A=>{var m;const c=this.getAccount(A,r);if(!c||e.homeAccountId&&!this.matchHomeAccountId(c,e.homeAccountId)||e.username&&!this.matchUsername(c.username,e.username)||e.environment&&!this.matchEnvironment(c,e.environment)||e.realm&&!this.matchRealm(c,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(c,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(c,e.authorityType))return;const p={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},d=(m=c.tenantProfiles)==null?void 0:m.filter(g=>this.tenantProfileMatchesFilter(g,p));d&&d.length===0||a.push(c)}),a}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===on.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===tr.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){const r=this.getKeys(),n={};return r.forEach(a=>{if(!this.isAppMetadata(a))return;const A=this.getAppMetadata(a);A&&(e.environment&&!this.matchEnvironment(A,e.environment)||e.clientId&&!this.matchClientId(A,e.clientId)||(n[a]=A))}),n}getAuthorityMetadataByAlias(e){const r=this.getAuthorityMetadataKeys();let n=null;return r.forEach(a=>{if(!this.isAuthorityMetadata(a)||a.indexOf(this.clientId)===-1)return;const A=this.getAuthorityMetadata(a);A&&A.aliases.indexOf(e)!==-1&&(n=A)}),n}removeAllAccounts(e){this.getAllAccounts({},e).forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){this.removeAccountContext(e,r);const n=this.getAccountKeys(),a=A=>A.includes(e.homeAccountId)&&A.includes(e.environment);n.filter(a).forEach(A=>{this.removeItem(A,r),this.performanceClient.incrementFields({accountsRemoved:1},r)})}removeAccountContext(e,r){const n=this.getTokenKeys(),a=A=>A.includes(e.homeAccountId)&&A.includes(e.environment);n.idToken.filter(a).forEach(A=>{this.removeIdToken(A,r)}),n.accessToken.filter(a).forEach(A=>{this.removeAccessToken(A,r)}),n.refreshToken.filter(a).forEach(A=>{this.removeRefreshToken(A,r)})}removeAccessToken(e,r){const n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==on.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==tr.POP)return;const a=n.keyId;a&&this.cryptoImpl.removeTokenBindingKey(a).catch(()=>{var A;this.commonLogger.error(`Failed to remove token binding key ${a}`,r),(A=this.performanceClient)==null||A.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}getIdToken(e,r,n,a,A){this.commonLogger.trace("CacheManager - getIdToken called");const c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:on.ID_TOKEN,clientId:this.clientId,realm:a},p=this.getIdTokensByFilter(c,r,n),d=p.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(d>1){let m=p;if(!a){const g=new Map;p.forEach((b,R)=>{b.realm===e.tenantId&&g.set(R,b)});const y=g.size;if(y<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),p.values().next().value;if(y===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),g.values().next().value;m=g}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),m.forEach((g,y)=>{this.removeIdToken(y,r)}),A&&r&&A.addFields({multiMatchedID:p.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),p.values().next().value}getIdTokensByFilter(e,r,n){const a=n&&n.idToken||this.getTokenKeys().idToken,A=new Map;return a.forEach(c=>{if(!this.idTokenKeyMatchesFilter(c,{clientId:this.clientId,...e}))return;const p=this.getIdTokenCredential(c,r);p&&this.credentialMatchesFilter(p,e)&&A.set(c,p)}),A}idTokenKeyMatchesFilter(e,r){const n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,a){const A=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",A);const c=zr.createSearchScopes(r.scopes),p=r.authenticationScheme||tr.BEARER,d=p.toLowerCase()!==tr.BEARER.toLowerCase()?on.ACCESS_TOKEN_WITH_AUTH_SCHEME:on.ACCESS_TOKEN,m={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:d,clientId:this.clientId,realm:a||e.tenantId,target:c,tokenType:p,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},g=n&&n.accessToken||this.getTokenKeys().accessToken,y=[];g.forEach(R=>{if(this.accessTokenKeyMatchesFilter(R,m,!0)){const C=this.getAccessTokenCredential(R,A);C&&this.credentialMatchesFilter(C,m)&&y.push(C)}});const b=y.length;return b<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",A),null):b>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",A),y.forEach(R=>{this.removeAccessToken(this.generateCredentialKey(R),A)}),this.performanceClient.addFields({multiMatchedAT:y.length},A),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",A),y[0])}accessTokenKeyMatchesFilter(e,r,n){const a=e.toLowerCase();if(r.clientId&&a.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&a.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&a.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&a.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){const A=r.target.asArray();for(let c=0;c<A.length;c++){if(n&&!a.includes(A[c].toLowerCase()))return!1;if(!n&&a.includes(A[c].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){const n=this.getTokenKeys(),a=[];return n.accessToken.forEach(A=>{if(!this.accessTokenKeyMatchesFilter(A,e,!0))return;const c=this.getAccessTokenCredential(A,r);c&&this.credentialMatchesFilter(c,e)&&a.push(c)}),a}getRefreshToken(e,r,n,a,A){this.commonLogger.trace("CacheManager - getRefreshToken called");const c=r?Oc:void 0,p={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:on.REFRESH_TOKEN,clientId:this.clientId,familyId:c},d=a&&a.refreshToken||this.getTokenKeys().refreshToken,m=[];d.forEach(y=>{if(this.refreshTokenKeyMatchesFilter(y,p)){const b=this.getRefreshTokenCredential(y,n);b&&this.credentialMatchesFilter(b,p)&&m.push(b)}});const g=m.length;return g<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(g>1&&A&&n&&A.addFields({multiMatchedRT:g},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),m[0])}refreshTokenKeyMatchesFilter(e,r){const n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),a=Object.keys(n).map(c=>n[c]),A=a.length;if(A<1)return null;if(A>1)throw Xe(bb);return a[0]}isAppMetadataFOCI(e){const r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===Oc)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){const n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){var n;return r.toLowerCase()===((n=e.name)==null?void 0:n.toLowerCase())}matchUsername(e,r){return!!(e&&typeof e=="string"&&(r==null?void 0:r.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){const a=z5(this.staticAuthorityOptions,this.commonLogger);if(a.includes(r)&&a.includes(e.environment))return!0}const n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){var n;return((n=e.realm)==null?void 0:n.toLowerCase())===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==on.ACCESS_TOKEN&&e.credentialType!==on.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:zr.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(nh)!==-1}isAuthorityMetadata(e){return e.indexOf(_c.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${_c.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(const n in r)e[n]=r[n];return e}}class W5 extends vg{async setAccount(){throw Xe(Dt)}getAccount(){throw Xe(Dt)}async setIdTokenCredential(){throw Xe(Dt)}getIdTokenCredential(){throw Xe(Dt)}async setAccessTokenCredential(){throw Xe(Dt)}getAccessTokenCredential(){throw Xe(Dt)}async setRefreshTokenCredential(){throw Xe(Dt)}getRefreshTokenCredential(){throw Xe(Dt)}setAppMetadata(){throw Xe(Dt)}getAppMetadata(){throw Xe(Dt)}setServerTelemetry(){throw Xe(Dt)}getServerTelemetry(){throw Xe(Dt)}setAuthorityMetadata(){throw Xe(Dt)}getAuthorityMetadata(){throw Xe(Dt)}getAuthorityMetadataKeys(){throw Xe(Dt)}setThrottlingCache(){throw Xe(Dt)}getThrottlingCache(){throw Xe(Dt)}removeItem(){throw Xe(Dt)}getKeys(){throw Xe(Dt)}getAccountKeys(){throw Xe(Dt)}getTokenKeys(){throw Xe(Dt)}generateCredentialKey(){throw Xe(Dt)}generateAccountKey(){throw Xe(Dt)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const le={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},G5={InProgress:1};/*! @azure/msal-common v15.13.2 2025-11-19 */class lx{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class Vb{generateId(){return"callback-id"}startMeasurement(e,r){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:G5.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new lx}}startPerformanceMeasurement(){return new lx}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v15.13.2 2025-11-19 */const Yb={tokenRenewalOffsetSeconds:db,preventCorsPreflight:!1},$5={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xr.Info,correlationId:Ke.EMPTY_STRING},V5={claimsBasedCachingEnabled:!1},Y5={async sendGetRequestAsync(){throw Xe(Dt)},async sendPostRequestAsync(){throw Xe(Dt)}},J5={sku:Ke.SKU,version:dh,cpu:Ke.EMPTY_STRING,os:Ke.EMPTY_STRING},X5={clientSecret:Ke.EMPTY_STRING,clientAssertion:void 0},q5={azureCloudInstance:uh.None,tenant:`${Ke.DEFAULT_COMMON_TENANT}`},Z5={application:{appName:"",appVersion:""}};function eS({authOptions:o,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:a,networkInterface:A,cryptoInterface:c,clientCredentials:p,libraryInfo:d,telemetry:m,serverTelemetryManager:g,persistencePlugin:y,serializableCache:b}){const R={...$5,...r};return{authOptions:tS(o),systemOptions:{...Yb,...e},loggerOptions:R,cacheOptions:{...V5,...n},storageInterface:a||new W5(o.clientId,Kc,new ka(R),new Vb),networkInterface:A||Y5,cryptoInterface:c||Kc,clientCredentials:p||X5,libraryInfo:{...J5,...d},telemetry:{...Z5,...m},serverTelemetryManager:g||null,persistencePlugin:y||null,serializableCache:b||null}}function tS(o){return{clientCapabilities:[],azureCloudOptions:q5,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...o}}function Jb(o){return o.authOptions.authority.options.protocolMode===Qn.OIDC}/*! @azure/msal-common v15.13.2 2025-11-19 */const xo={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.13.2 2025-11-19 */const vs="client_id",Xb="redirect_uri",rS="response_type",nS="response_mode",oS="grant_type",iS="claims",sS="scope",aS="refresh_token",AS="state",lS="nonce",cS="prompt",dS="code",uS="code_challenge",pS="code_challenge_method",gS="code_verifier",hS="client-request-id",fS="x-client-SKU",mS="x-client-VER",xS="x-client-OS",yS="x-client-CPU",bS="x-client-current-telemetry",wS="x-client-last-telemetry",vS="x-ms-lib-capability",CS="x-app-name",BS="x-app-ver",SS="post_logout_redirect_uri",IS="id_token_hint",ES="client_secret",kS="client_assertion",jS="client_assertion_type",qb="token_type",Zb="req_cnf",cx="return_spa_code",TS="nativebroker",FS="logout_hint",US="sid",QS="login_hint",RS="domain_hint",MS="x-client-xtra-sku",Yc="brk_client_id",Jc="brk_redirect_uri",Cg="instance_aware",LS="ear_jwk",DS="ear_jwe_crypto";/*! @azure/msal-common v15.13.2 2025-11-19 */function Bd(o,e,r){if(!e)return;const n=o.get(vs);n&&o.has(Yc)&&(r==null||r.addFields({embeddedClientId:n,embeddedRedirectUri:o.get(Xb)},e))}function wh(o,e){o.set(rS,e)}function PS(o,e){o.set(nS,e||y5.QUERY)}function NS(o){o.set(TS,"1")}function vh(o,e,r=!0,n=Ea){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");const a=r?[...e||[],...n]:e||[],A=new zr(a);o.set(sS,A.printScopes())}function Ch(o,e){o.set(vs,e)}function Bh(o,e){o.set(Xb,e)}function HS(o,e){o.set(SS,e)}function OS(o,e){o.set(IS,e)}function _S(o,e){o.set(RS,e)}function tc(o,e){o.set(QS,e)}function Xc(o,e){o.set(vn.CCS_HEADER,`UPN:${e}`)}function IA(o,e){o.set(vn.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function dx(o,e){o.set(US,e)}function Sh(o,e,r){const n=VS(e,r);try{JSON.parse(n)}catch{throw ar(ph)}o.set(iS,n)}function Ih(o,e){o.set(hS,e)}function Eh(o,e){o.set(fS,e.sku),o.set(mS,e.version),e.os&&o.set(xS,e.os),e.cpu&&o.set(yS,e.cpu)}function kh(o,e){e!=null&&e.appName&&o.set(CS,e.appName),e!=null&&e.appVersion&&o.set(BS,e.appVersion)}function zS(o,e){o.set(cS,e)}function e1(o,e){e&&o.set(AS,e)}function KS(o,e){o.set(lS,e)}function jh(o,e,r){if(e&&r)o.set(uS,e),o.set(pS,r);else throw ar(gh)}function WS(o,e){o.set(dS,e)}function GS(o,e){o.set(aS,e)}function $S(o,e){o.set(gS,e)}function t1(o,e){o.set(ES,e)}function r1(o,e){e&&o.set(kS,e)}function n1(o,e){e&&o.set(jS,e)}function o1(o,e){o.set(oS,e)}function Th(o){o.set(b5,"1")}function i1(o){o.has(Cg)||o.set(Cg,"true")}function Pi(o,e){Object.entries(e).forEach(([r,n])=>{!o.has(r)&&n&&o.set(r,n)})}function VS(o,e){let r;if(!o)r={};else try{r=JSON.parse(o)}catch{throw ar(ph)}return e&&e.length>0&&(r.hasOwnProperty(Zl.ACCESS_TOKEN)||(r[Zl.ACCESS_TOKEN]={}),r[Zl.ACCESS_TOKEN][Zl.XMS_CC]={values:e}),JSON.stringify(r)}function Fh(o,e){e&&(o.set(qb,tr.POP),o.set(Zb,e))}function s1(o,e){e&&(o.set(qb,tr.SSH),o.set(Zb,e))}function a1(o,e){o.set(bS,e.generateCurrentRequestHeaderValue()),o.set(wS,e.generateLastRequestHeaderValue())}function A1(o){o.set(vS,SA.X_MS_LIB_CAPABILITY_VALUE)}function YS(o,e){o.set(FS,e)}function Sd(o,e,r){o.has(Yc)||o.set(Yc,e),o.has(Jc)||o.set(Jc,r)}function JS(o,e){o.set(LS,encodeURIComponent(e)),o.set(DS,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function XS(o,e){Object.entries(e).forEach(([r,n])=>{n&&o.set(r,n)})}/*! @azure/msal-common v15.13.2 2025-11-19 */function qS(o){return o.hasOwnProperty("authorization_endpoint")&&o.hasOwnProperty("token_endpoint")&&o.hasOwnProperty("issuer")&&o.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.13.2 2025-11-19 */function ZS(o){return o.hasOwnProperty("tenant_discovery_endpoint")&&o.hasOwnProperty("metadata")}/*! @azure/msal-common v15.13.2 2025-11-19 */function e4(o){return o.hasOwnProperty("error")&&o.hasOwnProperty("error_description")}/*! @azure/msal-common v15.13.2 2025-11-19 */const zn=(o,e,r,n,a)=>(...A)=>{r.trace(`Executing function ${e}`);const c=n==null?void 0:n.startMeasurement(e,a);if(a){const p=e+"CallCount";n==null||n.incrementFields({[p]:1},a)}try{const p=o(...A);return c==null||c.end({success:!0}),r.trace(`Returning result from ${e}`),p}catch(p){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(p))}catch{r.trace("Unable to print error message.")}throw c==null||c.end({success:!1},p),p}},_e=(o,e,r,n,a)=>(...A)=>{r.trace(`Executing function ${e}`);const c=n==null?void 0:n.startMeasurement(e,a);if(a){const p=e+"CallCount";n==null||n.incrementFields({[p]:1},a)}return n==null||n.setPreQueueTime(e,a),o(...A).then(p=>(r.trace(`Returning result from ${e}`),c==null||c.end({success:!0}),p)).catch(p=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(p))}catch{r.trace("Unable to print error message.")}throw c==null||c.end({success:!1},p),p})};/*! @azure/msal-common v15.13.2 2025-11-19 */class Id{constructor(e,r,n,a){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=a}async detectRegion(e,r){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(le.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=ra.ENVIRONMENT_VARIABLE;else{const A=Id.IMDS_OPTIONS;try{const c=await _e(this.getRegionFromIMDS.bind(this),le.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Ke.IMDS_VERSION,A);if(c.status===Fi.SUCCESS&&(n=c.body,r.region_source=ra.IMDS),c.status===Fi.BAD_REQUEST){const p=await _e(this.getCurrentVersion.bind(this),le.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(A);if(!p)return r.region_source=ra.FAILED_AUTO_DETECTION,null;const d=await _e(this.getRegionFromIMDS.bind(this),le.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(p,A);d.status===Fi.SUCCESS&&(n=d.body,r.region_source=ra.IMDS)}}catch{return r.region_source=ra.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=ra.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){var n;return(n=this.performanceClient)==null||n.addQueueMeasurement(le.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Ke.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,Ke.IMDS_TIMEOUT)}async getCurrentVersion(e){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(le.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const n=await this.networkInterface.sendGetRequestAsync(`${Ke.IMDS_ENDPOINT}?format=json`,e);return n.status===Fi.BAD_REQUEST&&n.body&&n.body["newest-versions"]&&n.body["newest-versions"].length>0?n.body["newest-versions"][0]:null}catch{return null}}}Id.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.13.2 2025-11-19 */function Rn(){return Math.round(new Date().getTime()/1e3)}function ux(o){return o.getTime()/1e3}function fa(o){return o?new Date(Number(o)*1e3):new Date}function qc(o,e){const r=Number(o)||0;return Rn()+e>r}function px(o,e){const r=Number(o)+e*24*60*60*1e3;return Date.now()>r}function t4(o){return Number(o)>Rn()}/*! @azure/msal-common v15.13.2 2025-11-19 */function Ed(o,e,r,n,a){return{credentialType:on.ID_TOKEN,homeAccountId:o,environment:e,clientId:n,secret:r,realm:a,lastUpdatedAt:Date.now().toString()}}function kd(o,e,r,n,a,A,c,p,d,m,g,y,b,R,C){var S,N;const Q={homeAccountId:o,credentialType:on.ACCESS_TOKEN,secret:r,cachedAt:Rn().toString(),expiresOn:c.toString(),extendedExpiresOn:p.toString(),environment:e,clientId:n,realm:a,target:A,tokenType:g||tr.BEARER,lastUpdatedAt:Date.now().toString()};if(y&&(Q.userAssertionHash=y),m&&(Q.refreshOn=m.toString()),R&&(Q.requestedClaims=R,Q.requestedClaimsHash=C),((S=Q.tokenType)==null?void 0:S.toLowerCase())!==tr.BEARER.toLowerCase())switch(Q.credentialType=on.ACCESS_TOKEN_WITH_AUTH_SCHEME,Q.tokenType){case tr.POP:const M=Qo(r,d);if(!((N=M==null?void 0:M.cnf)!=null&&N.kid))throw Xe(Sb);Q.keyId=M.cnf.kid;break;case tr.SSH:Q.keyId=b}return Q}function l1(o,e,r,n,a,A,c){const p={credentialType:on.REFRESH_TOKEN,homeAccountId:o,environment:e,clientId:n,secret:r,lastUpdatedAt:Date.now().toString()};return A&&(p.userAssertionHash=A),a&&(p.familyId=a),c&&(p.expiresOn=c.toString()),p}function jd(o){return o.hasOwnProperty("homeAccountId")&&o.hasOwnProperty("environment")&&o.hasOwnProperty("credentialType")&&o.hasOwnProperty("clientId")&&o.hasOwnProperty("secret")}function gx(o){return o?jd(o)&&o.hasOwnProperty("realm")&&o.hasOwnProperty("target")&&(o.credentialType===on.ACCESS_TOKEN||o.credentialType===on.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function r4(o){return o?jd(o)&&o.hasOwnProperty("realm")&&o.credentialType===on.ID_TOKEN:!1}function hx(o){return o?jd(o)&&o.credentialType===on.REFRESH_TOKEN:!1}function n4(o,e){const r=o.indexOf(rn.CACHE_KEY)===0;let n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}function o4(o,e){let r=!1;o&&(r=o.indexOf(SA.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}function i4({environment:o,clientId:e}){return[nh,o,e].join(DA.CACHE_KEY_SEPARATOR).toLowerCase()}function s4(o,e){return e?o.indexOf(nh)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function a4(o,e){return e?o.indexOf(_c.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function fx(){return Rn()+_c.REFRESH_TIME_SECONDS}function rc(o,e,r){o.authorization_endpoint=e.authorization_endpoint,o.token_endpoint=e.token_endpoint,o.end_session_endpoint=e.end_session_endpoint,o.issuer=e.issuer,o.endpointsFromNetwork=r,o.jwks_uri=e.jwks_uri}function Mp(o,e,r){o.aliases=e.aliases,o.preferred_cache=e.preferred_cache,o.preferred_network=e.preferred_network,o.aliasesFromNetwork=r}function mx(o){return o.expiresAt<=Rn()}/*! @azure/msal-common v15.13.2 2025-11-19 */class hn{constructor(e,r,n,a,A,c,p,d){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=a,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=A,this.performanceClient=p,this.correlationId=c,this.managedIdentity=d||!1,this.regionDiscovery=new Id(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Ke.CIAM_AUTH_URL))return mo.Ciam;const r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case Ke.ADFS:return mo.Adfs;case Ke.DSTS:return mo.Dsts}return mo.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Vt(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Xe(Zo)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Xe(Zo)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Xe(Zo)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Xe(kb);return this.replacePath(this.metadata.end_session_endpoint)}else throw Xe(Zo)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Xe(Zo)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Xe(Zo)}canReplaceTenant(e){return e.PathSegments.length===1&&!hn.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===mo.Default&&this.protocolMode!==Qn.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e;const a=new Vt(this.metadata.canonical_authority).getUrlComponents(),A=a.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((p,d)=>{let m=A[d];if(d===0&&this.canReplaceTenant(a)){const g=new Vt(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];m!==g&&(this.logger.verbose(`Replacing tenant domain name ${m} with id ${g}`),m=g)}p!==m&&(r=r.replace(`/${m}/`,`/${p}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===mo.Adfs||this.protocolMode===Qn.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var a,A;(a=this.performanceClient)==null||a.addQueueMeasurement(le.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),r=await _e(this.updateCloudDiscoveryMetadata.bind(this),le.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const n=await _e(this.updateEndpointMetadata.bind(this),le.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),(A=this.performanceClient)==null||A.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:fx(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==On.CACHE&&(n==null?void 0:n.source)!==On.CACHE&&(e.expiresAt=fx(),e.canonical_authority=this.canonicalAuthority);const a=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(a,e),this.metadata=e}async updateEndpointMetadata(e){var a,A,c;(a=this.performanceClient)==null||a.addQueueMeasurement(le.AuthorityUpdateEndpointMetadata,this.correlationId);const r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===On.HARDCODED_VALUES&&(A=this.authorityOptions.azureRegionConfiguration)!=null&&A.azureRegion&&r.metadata){const p=await _e(this.updateMetadataWithRegionalInformation.bind(this),le.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);rc(e,p,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await _e(this.getEndpointMetadataFromNetwork.bind(this),le.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return(c=this.authorityOptions.azureRegionConfiguration)!=null&&c.azureRegion&&(n=await _e(this.updateMetadataWithRegionalInformation.bind(this),le.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),rc(e,n,!0),On.NETWORK;throw Xe(hb,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),rc(e,r,!1),{source:On.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const a=this.getEndpointMetadataFromHardcodedValues();if(a)return rc(e,a,!1),{source:On.HARDCODED_VALUES,metadata:a};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const n=mx(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:On.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Vt(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ar(Lb)}return null}async getEndpointMetadataFromNetwork(){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(le.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{const a=await this.networkInterface.sendGetRequestAsync(r,e);return qS(a.body)?a.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(a){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${a}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in ax?ax[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var n,a,A;(n=this.performanceClient)==null||n.addQueueMeasurement(le.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const r=(a=this.authorityOptions.azureRegionConfiguration)==null?void 0:a.azureRegion;if(r){if(r!==Ke.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Qp.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,hn.replaceWithRegionalInformation(e,r);const c=await _e(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),le.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((A=this.authorityOptions.azureRegionConfiguration)==null?void 0:A.environmentRegion,this.regionDiscoveryMetadata);if(c)return this.regionDiscoveryMetadata.region_outcome=Qp.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=c,hn.replaceWithRegionalInformation(e,c);this.regionDiscoveryMetadata.region_outcome=Qp.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(le.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;const n=await _e(this.getCloudDiscoveryMetadataFromNetwork.bind(this),le.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return Mp(e,n,!0),On.NETWORK;throw ar(Db)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Ke.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Ke.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Ke.NOT_APPLICABLE}`);const r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Mp(e,r,!1),On.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const a=K5(this.hostnameAndPort);if(a)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Mp(e,a,!1),On.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const n=mx(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),On.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===mo.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),hn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=$c(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ar(hh)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),hn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(le.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${Ke.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={};let n=null;try{const A=await this.networkInterface.sendGetRequestAsync(e,r);let c,p;if(ZS(A.body))c=A.body,p=c.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${c.tenant_discovery_endpoint}`);else if(e4(A.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${A.status}`),c=A.body,c.error===Ke.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${c.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${c.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),p=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=$c(p,this.hostnameAndPort)}catch(A){if(A instanceof nr)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${A.errorCode}
Error Description: ${A.errorMessage}`);else{const c=A;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${c.name}
Error Description: ${c.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=hn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&Vt.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==uh.None){const a=r.tenant?r.tenant:Ke.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${a}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Ke.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Xe(Zo)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return $b.has(e)}static isPublicCloudAuthority(e){return Ke.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){const a=new Vt(e);a.validateAsUri();const A=a.getUrlComponents();let c=`${r}.${A.HostNameAndPort}`;this.isPublicCloudAuthority(A.HostNameAndPort)&&(c=`${r}.${Ke.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const p=Vt.constructAuthorityUriFromObject({...a.getUrlComponents(),HostNameAndPort:c}).urlString;return n?`${p}?${n}`:p}static replaceWithRegionalInformation(e,r){const n={...e};return n.authorization_endpoint=hn.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=hn.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=hn.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e;const a=new Vt(e).getUrlComponents();if(a.PathSegments.length===0&&a.HostNameAndPort.endsWith(Ke.CIAM_AUTH_URL)){const A=a.HostNameAndPort.split(".")[0];r=`${r}${A}${Ke.AAD_TENANT_DOMAIN_SUFFIX}`}return r}}hn.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Li.COMMON,Li.CONSUMERS,Li.ORGANIZATIONS]);function A4(o){var a;const n=(a=new Vt(o).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:a.toLowerCase();switch(n){case Li.COMMON:case Li.ORGANIZATIONS:case Li.CONSUMERS:return;default:return n}}function c1(o){return o.endsWith(Ke.FORWARD_SLASH)?o:`${o}${Ke.FORWARD_SLASH}`}function l4(o){const e=o.cloudDiscoveryMetadata;let r;if(e)try{r=JSON.parse(e)}catch{throw ar(hh)}return{canonicalAuthority:o.authority?c1(o.authority):void 0,knownAuthorities:o.knownAuthorities,cloudDiscoveryMetadata:r}}/*! @azure/msal-common v15.13.2 2025-11-19 */async function d1(o,e,r,n,a,A,c){c==null||c.addQueueMeasurement(le.AuthorityFactoryCreateDiscoveredInstance,A);const p=hn.transformCIAMAuthority(c1(o)),d=new hn(p,e,r,n,a,A,c);try{return await _e(d.resolveEndpointsAsync.bind(d),le.AuthorityResolveEndpointsAsync,a,c,A)(),d}catch{throw Xe(Zo)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class Es extends nr{constructor(e,r,n,a,A){super(e,r,n),this.name="ServerError",this.errorNo=a,this.status=A,Object.setPrototypeOf(this,Es.prototype)}}/*! @azure/msal-common v15.13.2 2025-11-19 */function Td(o,e,r){var n;return{clientId:o,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||((n=e.tokenBodyParameters)==null?void 0:n.clientId)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class Fo{static generateThrottlingStorageKey(e){return`${SA.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){var c;const a=Fo.generateThrottlingStorageKey(r),A=e.getThrottlingCache(a);if(A){if(A.throttleTime<Date.now()){e.removeItem(a,n);return}throw new Es(((c=A.errorCodes)==null?void 0:c.join(" "))||Ke.EMPTY_STRING,A.errorMessage,A.subError)}}static postProcess(e,r,n,a){if(Fo.checkResponseStatus(n)||Fo.checkResponseForRetryAfter(n)){const A={throttleTime:Fo.calculateThrottleTime(parseInt(n.headers[vn.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(Fo.generateThrottlingStorageKey(r),A,a)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(vn.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||SA.DEFAULT_THROTTLE_TIME_SECONDS),n+SA.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,a){const A=Td(r,n,a),c=this.generateThrottlingStorageKey(A);e.removeItem(c,n.correlationId)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class Fd extends nr{constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,Fd.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}}function mA(o,e,r,n){return o.errorMessage=`${o.errorMessage}, additionalErrorInfo: error.name:${n==null?void 0:n.name}, error.message:${n==null?void 0:n.message}`,new Fd(o,e,r)}/*! @azure/msal-common v15.13.2 2025-11-19 */class Uh{constructor(e,r){this.config=eS(e),this.logger=new ka(this.config.loggerOptions,jb,dh),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){const r={};if(r[vn.CONTENT_TYPE]=Ke.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case xo.HOME_ACCOUNT_ID:try{const n=ga(e.credential);r[vn.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case xo.UPN:r[vn.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,a,A,c){var d;c&&((d=this.performanceClient)==null||d.addQueueMeasurement(c,A));const p=await this.sendPostRequest(a,e,{body:r,headers:n},A);return this.config.serverTelemetryManager&&p.status<500&&p.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),p}async sendPostRequest(e,r,n,a){var c,p,d;Fo.preProcess(this.cacheManager,e,a);let A;try{A=await _e(this.networkClient.sendPostRequestAsync.bind(this.networkClient),le.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,a)(r,n);const m=A.headers||{};(p=this.performanceClient)==null||p.addFields({refreshTokenSize:((c=A.body.refresh_token)==null?void 0:c.length)||0,httpVerToken:m[vn.X_MS_HTTP_VERSION]||"",requestId:m[vn.X_MS_REQUEST_ID]||""},a)}catch(m){if(m instanceof Fd){const g=m.responseHeaders;throw g&&((d=this.performanceClient)==null||d.addFields({httpVerToken:g[vn.X_MS_HTTP_VERSION]||"",requestId:g[vn.X_MS_REQUEST_ID]||"",contentTypeHeader:g[vn.CONTENT_TYPE]||void 0,contentLengthHeader:g[vn.CONTENT_LENGTH]||void 0,httpStatus:m.httpStatus},a)),m.error}throw m instanceof nr?m:Xe(gb)}return Fo.postProcess(this.cacheManager,e,A,a),A}async updateAuthority(e,r){var A;(A=this.performanceClient)==null||A.addQueueMeasurement(le.UpdateTokenEndpointAuthority,r);const n=`https://${e}/${this.authority.tenant}/`,a=await d1(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=a}createTokenQueryParameters(e){const r=new Map;return e.embeddedClientId&&Sd(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Pi(r,e.tokenQueryParameters),Ih(r,e.correlationId),Bd(r,e.correlationId,this.performanceClient),PA(r)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const Zc="no_tokens_found",u1="native_account_unavailable",Qh="refresh_token_expired",Rh="ux_not_allowed",c4="interaction_required",d4="consent_required",u4="login_required",Ud="bad_token";/*! @azure/msal-common v15.13.2 2025-11-19 */const xx=[c4,d4,u4,Ud,Rh],p4=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],g4={[Zc]:"No refresh token found in the cache. Please sign-in.",[u1]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Qh]:"Refresh token has expired.",[Ud]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[Rh]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class vo extends nr{constructor(e,r,n,a,A,c,p,d){super(e,r,n),Object.setPrototypeOf(this,vo.prototype),this.timestamp=a||Ke.EMPTY_STRING,this.traceId=A||Ke.EMPTY_STRING,this.correlationId=c||Ke.EMPTY_STRING,this.claims=p||Ke.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=d}}function p1(o,e,r){const n=!!o&&xx.indexOf(o)>-1,a=!!r&&p4.indexOf(r)>-1,A=!!e&&xx.some(c=>e.indexOf(c)>-1);return n||A||a}function ed(o){return new vo(o,g4[o])}/*! @azure/msal-common v15.13.2 2025-11-19 */class ja{static setRequestState(e,r,n){const a=ja.generateLibraryState(e,n);return r?`${a}${Ke.RESOURCE_DELIM}${r}`:a}static generateLibraryState(e,r){if(!e)throw Xe(yg);const n={id:e.createNewGuid()};r&&(n.meta=r);const a=JSON.stringify(n);return e.base64Encode(a)}static parseRequestState(e,r){if(!e)throw Xe(yg);if(!r)throw Xe(va);try{const n=r.split(Ke.RESOURCE_DELIM),a=n[0],A=n.length>1?n.slice(1).join(Ke.RESOURCE_DELIM):Ke.EMPTY_STRING,c=e.base64Decode(a),p=JSON.parse(c);return{userRequestState:A||Ke.EMPTY_STRING,libraryState:p}}catch{throw Xe(va)}}}/*! @azure/msal-common v15.13.2 2025-11-19 */const h4={SW:"sw"};class Ca{constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){var A;(A=this.performanceClient)==null||A.addQueueMeasurement(le.PopTokenGenerateCnf,e.correlationId);const n=await _e(this.generateKid.bind(this),le.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),a=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:a}}async generateKid(e){var n;return(n=this.performanceClient)==null||n.addQueueMeasurement(le.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:h4.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,a){const{resourceRequestMethod:A,resourceRequestUri:c,shrClaims:p,shrNonce:d,shrOptions:m}=n,g=c?new Vt(c):void 0,y=g==null?void 0:g.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:Rn(),m:A==null?void 0:A.toUpperCase(),u:y==null?void 0:y.HostNameAndPort,nonce:d||this.cryptoUtils.createNewGuid(),p:y==null?void 0:y.AbsolutePath,q:y!=null&&y.QueryString?[[],y.QueryString]:void 0,client_claims:p||void 0,...a},r,m,n.correlationId)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class f4{constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.13.2 2025-11-19 */class Cs{constructor(e,r,n,a,A,c,p){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=a,this.serializableCache=A,this.persistencePlugin=c,this.performanceClient=p}validateTokenResponse(e,r){var n;if(e.error||e.error_description||e.suberror){const a=`Error(s): ${e.error_codes||Ke.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Ke.NOT_AVAILABLE} - Description: ${e.error_description||Ke.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Ke.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Ke.NOT_AVAILABLE}`,A=(n=e.error_codes)!=null&&n.length?e.error_codes[0]:void 0,c=new Es(e.error,a,e.suberror,A,e.status);if(r&&e.status&&e.status>=Fi.SERVER_ERROR_RANGE_START&&e.status<=Fi.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${c}`);return}else if(r&&e.status&&e.status>=Fi.CLIENT_ERROR_RANGE_START&&e.status<=Fi.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${c}`);return}throw p1(e.error,e.error_description,e.suberror)?new vo(e.error,e.error_description,e.suberror,e.timestamp||Ke.EMPTY_STRING,e.trace_id||Ke.EMPTY_STRING,e.correlation_id||Ke.EMPTY_STRING,e.claims||Ke.EMPTY_STRING,A):c}}async handleServerTokenResponse(e,r,n,a,A,c,p,d,m){var C;(C=this.performanceClient)==null||C.addQueueMeasurement(le.HandleServerTokenResponse,e.correlation_id);let g;if(e.id_token){if(g=Qo(e.id_token||Ke.EMPTY_STRING,this.cryptoObj.base64Decode),A&&A.nonce&&g.nonce!==A.nonce)throw Xe(xb);if(a.maxAge||a.maxAge===0){const Q=g.auth_time;if(!Q)throw Xe(sh);Kb(Q,a.maxAge)}}this.homeAccountIdentifier=jr.generateHomeAccountId(e.client_info||Ke.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,g);let y;A&&A.state&&(y=ja.parseRequestState(this.cryptoObj,A.state)),e.key_id=e.key_id||a.sshKid||void 0;const b=this.generateCacheRecord(e,r,n,a,g,c,A);let R;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),R=new f4(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(R)),p&&!d&&b.account){const Q=this.cacheStorage.generateAccountKey(jr.getAccountInfo(b.account));if(!this.cacheStorage.getAccount(Q,a.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Cs.generateAuthenticationResult(this.cryptoObj,r,b,!1,a,g,y,void 0,m)}await this.cacheStorage.saveCacheRecord(b,a.correlationId,Ro(g||{}),a.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&R&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(R))}return Cs.generateAuthenticationResult(this.cryptoObj,r,b,!1,a,g,y,e,m)}generateCacheRecord(e,r,n,a,A,c,p){const d=r.getPreferredCache();if(!d)throw Xe(Ah);const m=xh(A);let g,y;e.id_token&&A&&(g=Ed(this.homeAccountIdentifier,d,e.id_token,this.clientId,m||""),y=Mh(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,a.correlationId,A,e.client_info,d,m,p,void 0,this.logger));let b=null;if(e.access_token){const Q=e.scope?zr.fromString(e.scope):new zr(a.scopes||[]),S=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,N=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,M=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,Ie=n+S,fe=Ie+N,F=M&&M>0?n+M:void 0;b=kd(this.homeAccountIdentifier,d,e.access_token,this.clientId,m||r.tenant||"",Q.printScopes(),Ie,fe,this.cryptoObj.base64Decode,F,e.token_type,c,e.key_id,a.claims,a.requestedClaimsHash)}let R=null;if(e.refresh_token){let Q;if(e.refresh_token_expires_in){const S=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;Q=n+S}R=l1(this.homeAccountIdentifier,d,e.refresh_token,this.clientId,e.foci,c,Q)}let C=null;return e.foci&&(C={clientId:this.clientId,environment:d,familyId:e.foci}),{account:y,idToken:g,accessToken:b,refreshToken:R,appMetadata:C}}static async generateAuthenticationResult(e,r,n,a,A,c,p,d,m){var Ie,fe,F,ae,ee;let g=Ke.EMPTY_STRING,y=[],b=null,R,C,Q=Ke.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===tr.POP&&!A.popKid){const Re=new Ca(e),{secret:se,keyId:Z}=n.accessToken;if(!Z)throw Xe(lh);g=await Re.signPopToken(se,Z,A)}else g=n.accessToken.secret;y=zr.fromString(n.accessToken.target).asArray(),b=fa(n.accessToken.expiresOn),R=fa(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(C=fa(n.accessToken.refreshOn))}n.appMetadata&&(Q=n.appMetadata.familyId===Oc?Oc:"");const S=(c==null?void 0:c.oid)||(c==null?void 0:c.sub)||"",N=(c==null?void 0:c.tid)||"";d!=null&&d.spa_accountid&&n.account&&(n.account.nativeAccountId=d==null?void 0:d.spa_accountid);const M=n.account?mh(jr.getAccountInfo(n.account),void 0,c,(Ie=n.idToken)==null?void 0:Ie.secret):null;return{authority:r.canonicalAuthority,uniqueId:S,tenantId:N,scopes:y,account:M,idToken:((fe=n==null?void 0:n.idToken)==null?void 0:fe.secret)||"",idTokenClaims:c||{},accessToken:g,fromCache:a,expiresOn:b,extExpiresOn:R,refreshOn:C,correlationId:A.correlationId,requestId:m||Ke.EMPTY_STRING,familyId:Q,tokenType:((F=n.accessToken)==null?void 0:F.tokenType)||Ke.EMPTY_STRING,state:p?p.userRequestState:Ke.EMPTY_STRING,cloudGraphHostName:((ae=n.account)==null?void 0:ae.cloudGraphHostName)||Ke.EMPTY_STRING,msGraphHost:((ee=n.account)==null?void 0:ee.msGraphHost)||Ke.EMPTY_STRING,code:d==null?void 0:d.spa_code,fromNativeBroker:!1}}}function Mh(o,e,r,n,a,A,c,p,d,m,g,y){y==null||y.verbose("setCachedAccount called");const R=o.getAccountKeys().find(M=>M.startsWith(r));let C=null;R&&(C=o.getAccount(R,a));const Q=C||jr.createAccount({homeAccountId:r,idTokenClaims:A,clientInfo:c,environment:p,cloudGraphHostName:m==null?void 0:m.cloud_graph_host_name,msGraphHost:m==null?void 0:m.msgraph_host,nativeAccountId:g},e,n),S=Q.tenantProfiles||[],N=d||Q.realm;if(N&&!S.find(M=>M.tenantId===N)){const M=Cd(r,Q.localAccountId,N,A);S.push(M)}return Q.tenantProfiles=S,Q}/*! @azure/msal-common v15.13.2 2025-11-19 */async function g1(o,e,r){return typeof o=="string"?o:o({clientId:e,tokenEndpoint:r})}/*! @azure/msal-common v15.13.2 2025-11-19 */class h1 extends Uh{constructor(e,r){var n;super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=(n=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:n.defaultScopes}async acquireToken(e,r){var p,d;if((p=this.performanceClient)==null||p.addQueueMeasurement(le.AuthClientAcquireToken,e.correlationId),!e.code)throw Xe(wb);const n=Rn(),a=await _e(this.executeTokenRequest.bind(this),le.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),A=(d=a.headers)==null?void 0:d[vn.X_MS_REQUEST_ID],c=new Cs(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return c.validateTokenResponse(a.body),_e(c.handleServerTokenResponse.bind(c),le.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(a.body,this.authority,n,e,r,void 0,void 0,void 0,A)}getLogoutUri(e){if(!e)throw ar(Mb);const r=this.createLogoutUrlQueryString(e);return Vt.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){var m;(m=this.performanceClient)==null||m.addQueueMeasurement(le.AuthClientExecuteTokenRequest,r.correlationId);const n=this.createTokenQueryParameters(r),a=Vt.appendQueryString(e.tokenEndpoint,n),A=await _e(this.createTokenRequestBody.bind(this),le.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r);let c;if(r.clientInfo)try{const g=Wc(r.clientInfo,this.cryptoUtils.base64Decode);c={credential:`${g.uid}${DA.CLIENT_INFO_SEPARATOR}${g.utid}`,type:xo.HOME_ACCOUNT_ID}}catch(g){this.logger.verbose("Could not parse client info for CCS Header: "+g)}const p=this.createTokenRequestHeaders(c||r.ccsCredential),d=Td(this.config.authOptions.clientId,r);return _e(this.executePostToTokenEndpoint.bind(this),le.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(a,A,p,d,r.correlationId,le.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var a,A;(a=this.performanceClient)==null||a.addQueueMeasurement(le.AuthClientCreateTokenRequestBody,e.correlationId);const r=new Map;if(Ch(r,e.embeddedClientId||((A=e.tokenBodyParameters)==null?void 0:A[vs])||this.config.authOptions.clientId),this.includeRedirectUri)Bh(r,e.redirectUri);else if(!e.redirectUri)throw ar(Tb);if(vh(r,e.scopes,!0,this.oidcDefaultScopes),WS(r,e.code),Eh(r,this.config.libraryInfo),kh(r,this.config.telemetry.application),A1(r),this.serverTelemetryManager&&!Jb(this.config)&&a1(r,this.serverTelemetryManager),e.codeVerifier&&$S(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&t1(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const c=this.config.clientCredentials.clientAssertion;r1(r,await g1(c.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),n1(r,c.assertionType)}if(o1(r,cb.AUTHORIZATION_CODE_GRANT),Th(r),e.authenticationScheme===tr.POP){const c=new Ca(this.cryptoUtils,this.performanceClient);let p;e.popKid?p=this.cryptoUtils.encodeKid(e.popKid):p=(await _e(c.generateCnf.bind(c),le.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Fh(r,p)}else if(e.authenticationScheme===tr.SSH)if(e.sshJwk)s1(r,e.sshJwk);else throw ar(vd);(!_n.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Sh(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{const c=Wc(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${c.uid}${DA.CLIENT_INFO_SEPARATOR}${c.utid}`,type:xo.HOME_ACCOUNT_ID}}catch(c){this.logger.verbose("Could not parse client info for CCS Header: "+c)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case xo.HOME_ACCOUNT_ID:try{const c=ga(n.credential);IA(r,c)}catch(c){this.logger.verbose("Could not parse home account ID for CCS Header: "+c)}break;case xo.UPN:Xc(r,n.credential);break}return e.embeddedClientId&&Sd(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Pi(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[cx])&&Pi(r,{[cx]:"1"}),Bd(r,e.correlationId,this.performanceClient),PA(r)}createLogoutUrlQueryString(e){const r=new Map;return e.postLogoutRedirectUri&&HS(r,e.postLogoutRedirectUri),e.correlationId&&Ih(r,e.correlationId),e.idTokenHint&&OS(r,e.idTokenHint),e.state&&e1(r,e.state),e.logoutHint&&YS(r,e.logoutHint),e.extraQueryParameters&&Pi(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&i1(r),PA(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const m4=300;class x4 extends Uh{constructor(e,r){super(e,r)}async acquireToken(e){var c,p;(c=this.performanceClient)==null||c.addQueueMeasurement(le.RefreshTokenClientAcquireToken,e.correlationId);const r=Rn(),n=await _e(this.executeTokenRequest.bind(this),le.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),a=(p=n.headers)==null?void 0:p[vn.X_MS_REQUEST_ID],A=new Cs(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return A.validateTokenResponse(n.body),_e(A.handleServerTokenResponse.bind(A),le.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,a)}async acquireTokenByRefreshToken(e){var n;if(!e)throw ar(Rb);if((n=this.performanceClient)==null||n.addQueueMeasurement(le.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Xe(ah);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await _e(this.acquireTokenWithCachedRefreshToken.bind(this),le.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(a){const A=a instanceof vo&&a.errorCode===Zc,c=a instanceof Es&&a.errorCode===tx.INVALID_GRANT_ERROR&&a.subError===tx.CLIENT_MISMATCH_ERROR;if(A||c)return _e(this.acquireTokenWithCachedRefreshToken.bind(this),le.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw a}return _e(this.acquireTokenWithCachedRefreshToken.bind(this),le.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){var A,c,p;(A=this.performanceClient)==null||A.addQueueMeasurement(le.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const n=zn(this.cacheManager.getRefreshToken.bind(this.cacheManager),le.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!n)throw ed(Zc);if(n.expiresOn&&qc(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||m4))throw(c=this.performanceClient)==null||c.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),ed(Qh);const a={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||tr.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:xo.HOME_ACCOUNT_ID}};try{return await _e(this.acquireToken.bind(this),le.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(a)}catch(d){if(d instanceof vo&&((p=this.performanceClient)==null||p.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),d.subError===Ud)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const m=this.cacheManager.generateCredentialKey(n);this.cacheManager.removeRefreshToken(m,e.correlationId)}throw d}}async executeTokenRequest(e,r){var d;(d=this.performanceClient)==null||d.addQueueMeasurement(le.RefreshTokenClientExecuteTokenRequest,e.correlationId);const n=this.createTokenQueryParameters(e),a=Vt.appendQueryString(r.tokenEndpoint,n),A=await _e(this.createTokenRequestBody.bind(this),le.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),c=this.createTokenRequestHeaders(e.ccsCredential),p=Td(this.config.authOptions.clientId,e);return _e(this.executePostToTokenEndpoint.bind(this),le.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(a,A,c,p,e.correlationId,le.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var n,a,A;(n=this.performanceClient)==null||n.addQueueMeasurement(le.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const r=new Map;if(Ch(r,e.embeddedClientId||((a=e.tokenBodyParameters)==null?void 0:a[vs])||this.config.authOptions.clientId),e.redirectUri&&Bh(r,e.redirectUri),vh(r,e.scopes,!0,(A=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:A.defaultScopes),o1(r,cb.REFRESH_TOKEN_GRANT),Th(r),Eh(r,this.config.libraryInfo),kh(r,this.config.telemetry.application),A1(r),this.serverTelemetryManager&&!Jb(this.config)&&a1(r,this.serverTelemetryManager),GS(r,e.refreshToken),this.config.clientCredentials.clientSecret&&t1(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const c=this.config.clientCredentials.clientAssertion;r1(r,await g1(c.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),n1(r,c.assertionType)}if(e.authenticationScheme===tr.POP){const c=new Ca(this.cryptoUtils,this.performanceClient);let p;e.popKid?p=this.cryptoUtils.encodeKid(e.popKid):p=(await _e(c.generateCnf.bind(c),le.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Fh(r,p)}else if(e.authenticationScheme===tr.SSH)if(e.sshJwk)s1(r,e.sshJwk);else throw ar(vd);if((!_n.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Sh(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case xo.HOME_ACCOUNT_ID:try{const c=ga(e.ccsCredential.credential);IA(r,c)}catch(c){this.logger.verbose("Could not parse home account ID for CCS Header: "+c)}break;case xo.UPN:Xc(r,e.ccsCredential.credential);break}return e.embeddedClientId&&Sd(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Pi(r,e.tokenBodyParameters),Bd(r,e.correlationId,this.performanceClient),PA(r)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class y4 extends Uh{constructor(e,r){super(e,r)}async acquireCachedToken(e){var d;(d=this.performanceClient)==null||d.addQueueMeasurement(le.SilentFlowClientAcquireCachedToken,e.correlationId);let r=ds.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!_n.isEmptyObj(e.claims))throw this.setCacheOutcome(ds.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Xe(Di);if(!e.account)throw Xe(ah);const n=e.account.tenantId||A4(e.authority),a=this.cacheManager.getTokenKeys(),A=this.cacheManager.getAccessToken(e.account,e,a,n);if(A){if(t4(A.cachedAt)||qc(A.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(ds.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Xe(Di);A.refreshOn&&qc(A.refreshOn,0)&&(r=ds.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(ds.NO_CACHED_ACCESS_TOKEN,e.correlationId),Xe(Di);const c=e.authority||this.authority.getPreferredCache(),p={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:A,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,a,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(c)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await _e(this.generateResultFromCacheRecord.bind(this),le.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(p,e),r]}setCacheOutcome(e,r){var n,a;(n=this.serverTelemetryManager)==null||n.setCacheOutcome(e),(a=this.performanceClient)==null||a.addFields({cacheOutcome:e},r),e!==ds.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(le.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=Qo(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){const A=n==null?void 0:n.auth_time;if(!A)throw Xe(sh);Kb(A,r.maxAge)}return Cs.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const b4={sendGetRequestAsync:()=>Promise.reject(Xe(Dt)),sendPostRequestAsync:()=>Promise.reject(Xe(Dt))};/*! @azure/msal-common v15.13.2 2025-11-19 */function w4(o,e,r,n){var p,d;const a=e.correlationId,A=new Map;Ch(A,e.embeddedClientId||((p=e.extraQueryParameters)==null?void 0:p[vs])||o.clientId);const c=[...e.scopes||[],...e.extraScopesToConsent||[]];if(vh(A,c,!0,(d=o.authority.options.OIDCOptions)==null?void 0:d.defaultScopes),Bh(A,e.redirectUri),Ih(A,a),PS(A,e.responseMode),Th(A),e.prompt&&(zS(A,e.prompt),n==null||n.addFields({prompt:e.prompt},a)),e.domainHint&&(_S(A,e.domainHint),n==null||n.addFields({domainHintFromRequest:!0},a)),e.prompt!==an.SELECT_ACCOUNT)if(e.sid&&e.prompt===an.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),dx(A,e.sid),n==null||n.addFields({sidFromRequest:!0},a);else if(e.account){const m=B4(e.account);let g=S4(e.account);if(g&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),g=null),g){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),tc(A,g),n==null||n.addFields({loginHintFromClaim:!0},a);try{const y=ga(e.account.homeAccountId);IA(A,y)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(m&&e.prompt===an.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),dx(A,m),n==null||n.addFields({sidFromClaim:!0},a);try{const y=ga(e.account.homeAccountId);IA(A,y)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),tc(A,e.loginHint),Xc(A,e.loginHint),n==null||n.addFields({loginHintFromRequest:!0},a);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),tc(A,e.account.username),n==null||n.addFields({loginHintFromUpn:!0},a);try{const y=ga(e.account.homeAccountId);IA(A,y)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),tc(A,e.loginHint),Xc(A,e.loginHint),n==null||n.addFields({loginHintFromRequest:!0},a));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&KS(A,e.nonce),e.state&&e1(A,e.state),(e.claims||o.clientCapabilities&&o.clientCapabilities.length>0)&&Sh(A,e.claims,o.clientCapabilities),e.embeddedClientId&&Sd(A,o.clientId,o.redirectUri),o.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(Cg))&&i1(A),A}function Lh(o,e,r,n){const a=PA(e,r,n);return Vt.appendQueryString(o.authorizationEndpoint,a)}function v4(o,e){if(f1(o,e),!o.code)throw Xe(Ib);return o}function f1(o,e){if(!o.state||!e)throw o.state?Xe(fg,"Cached State"):Xe(fg,"Server State");let r,n;try{r=decodeURIComponent(o.state)}catch{throw Xe(va,o.state)}try{n=decodeURIComponent(e)}catch{throw Xe(va,o.state)}if(r!==n)throw Xe(mb);if(o.error||o.error_description||o.suberror){const a=C4(o);throw p1(o.error,o.error_description,o.suberror)?new vo(o.error||"",o.error_description,o.suberror,o.timestamp||"",o.trace_id||"",o.correlation_id||"",o.claims||"",a):new Es(o.error||"",o.error_description,o.suberror,a)}}function C4(o){var n,a;const e="code=",r=(n=o.error_uri)==null?void 0:n.lastIndexOf(e);return r&&r>=0?(a=o.error_uri)==null?void 0:a.substring(r+e.length):void 0}function B4(o){var e;return((e=o.idTokenClaims)==null?void 0:e.sid)||null}function S4(o){var e;return o.loginHint||((e=o.idTokenClaims)==null?void 0:e.login_hint)||null}/*! @azure/msal-common v15.13.2 2025-11-19 */const yx=",",m1="|";function I4(o){const{skus:e,libraryName:r,libraryVersion:n,extensionName:a,extensionVersion:A}=o,c=new Map([[0,[r,n]],[2,[a,A]]]);let p=[];if(e!=null&&e.length){if(p=e.split(yx),p.length<4)return e}else p=Array.from({length:4},()=>m1);return c.forEach((d,m)=>{var g,y;d.length===2&&((g=d[0])!=null&&g.length)&&((y=d[1])!=null&&y.length)&&E4({skuArr:p,index:m,skuName:d[0],skuVersion:d[1]})}),p.join(yx)}function E4(o){const{skuArr:e,index:r,skuName:n,skuVersion:a}=o;r>=e.length||(e[r]=[n,a].join(m1))}class NA{constructor(e,r){this.cacheOutcome=ds.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Ke.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Ke.EMPTY_STRING,this.telemetryCacheKey=rn.CACHE_KEY+DA.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${rn.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n!=null&&n.length&&r.push(`broker_error=${n}`);const a=r.join(rn.VALUE_SEPARATOR),A=this.getRegionDiscoveryFields(),c=[e,A].join(rn.VALUE_SEPARATOR);return[rn.SCHEMA_VERSION,c,a].join(rn.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),r=NA.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(rn.VALUE_SEPARATOR),a=e.errors.slice(0,r).join(rn.VALUE_SEPARATOR),A=e.errors.length,c=r<A?rn.OVERFLOW_TRUE:rn.OVERFLOW_FALSE,p=[A,c].join(rn.VALUE_SEPARATOR);return[rn.SCHEMA_VERSION,e.cacheHits,n,a,p].join(rn.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const r=this.getLastRequests();r.errors.length>=rn.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof nr?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(rn.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),r=NA.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const a={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,a=0;const A=e.errors.length;for(r=0;r<A;r++){const c=e.failedRequests[2*r]||Ke.EMPTY_STRING,p=e.failedRequests[2*r+1]||Ke.EMPTY_STRING,d=e.errors[r]||Ke.EMPTY_STRING;if(a+=c.toString().length+p.toString().length+d.length+3,a<rn.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Ke.EMPTY_STRING),e.push(this.regionSource||Ke.EMPTY_STRING),e.push(this.regionOutcome||Ke.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return I4(e)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const x1="missing_kid_error",y1="missing_alg_error";/*! @azure/msal-common v15.13.2 2025-11-19 */const k4={[x1]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[y1]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Dh extends nr{constructor(e,r){super(e,r),this.name="JoseHeaderError",Object.setPrototypeOf(this,Dh.prototype)}}function bx(o){return new Dh(o,k4[o])}/*! @azure/msal-common v15.13.2 2025-11-19 */class Ph{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw bx(x1);if(!e.alg)throw bx(y1);const r=new Ph({typ:e.typ||w5.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(r)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const Nh="pkce_not_created",Hh="ear_jwk_empty",b1="ear_jwe_empty",Bg="crypto_nonexistent",Qd="empty_navigate_uri",w1="hash_empty_error",Oh="no_state_in_hash",v1="hash_does_not_contain_known_properties",C1="unable_to_parse_state",B1="state_interaction_type_mismatch",S1="interaction_in_progress",I1="popup_window_error",E1="empty_window_error",HA="user_cancelled",j4="monitor_popup_timeout",k1="monitor_window_timeout",j1="redirect_in_iframe",T1="block_iframe_reload",F1="block_nested_popups",T4="iframe_closed_prematurely",Rd="silent_logout_unsupported",U1="no_account_error",F4="silent_prompt_value_error",Q1="no_token_request_cache_error",R1="unable_to_parse_token_request_cache_error",U4="auth_request_not_set_error",Q4="invalid_cache_type",Md="non_browser_environment",la="database_not_open",td="no_network_connectivity",M1="post_request_failed",L1="get_request_failed",Sg="failed_to_parse_response",D1="unable_to_load_token",_h="crypto_key_not_found",P1="auth_code_required",N1="auth_code_or_nativeAccountId_required",H1="spa_code_and_nativeAccountId_present",zh="database_unavailable",O1="unable_to_acquire_token_from_native_platform",_1="native_handshake_timeout",z1="native_extension_not_installed",Kh="native_connection_not_established",EA="uninitialized_public_client_application",K1="native_prompt_not_supported",W1="invalid_base64_string",G1="invalid_pop_token_request",$1="failed_to_build_headers",V1="failed_to_parse_headers",Tc="failed_to_decrypt_ear_response",rd="timed_out";/*! @azure/msal-browser v4.26.2 2025-11-19 */const Yo="For more visit: aka.ms/msaljs/browser-errors",R4={[Nh]:"The PKCE code challenge and verifier could not be generated.",[Hh]:"No EAR encryption key provided. This is unexpected.",[b1]:"Server response does not contain ear_jwe property. This is unexpected.",[Bg]:"The crypto object or function is not available.",[Qd]:"Navigation URI is empty. Please check stack trace for more info.",[w1]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Yo}`,[Oh]:"Hash does not contain state. Please verify that the request originated from msal.",[v1]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Yo}`,[C1]:"Unable to parse state. Please verify that the request originated from msal.",[B1]:"Hash contains state but the interaction type does not match the caller.",[S1]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Yo}`,[I1]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[E1]:"window.open returned null or undefined window object.",[HA]:"User cancelled the flow.",[j4]:`Token acquisition in popup failed due to timeout.  ${Yo}`,[k1]:`Token acquisition in iframe failed due to timeout.  ${Yo}`,[j1]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[T1]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Yo}`,[F1]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[T4]:"The iframe being monitored was closed prematurely.",[Rd]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[U1]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[F4]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Q1]:"No token request found in cache.",[R1]:"The cached token request could not be parsed.",[U4]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Q4]:"Invalid cache type",[Md]:"Login and token requests are not supported in non-browser environments.",[la]:"Database is not open!",[td]:"No network connectivity. Check your internet connection.",[M1]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[L1]:"Network request failed. Please check the network trace to determine root cause.",[Sg]:"Failed to parse network response. Check network trace.",[D1]:"Error loading token to cache.",[_h]:"Cryptographic Key or Keypair not found in browser storage.",[P1]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[N1]:"An authorization code or nativeAccountId must be provided to this flow.",[H1]:"Request cannot contain both spa code and native account id.",[zh]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[O1]:`Unable to acquire token from native platform.  ${Yo}`,[_1]:"Timed out while attempting to establish connection to browser extension",[z1]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Kh]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Yo}`,[EA]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Yo}`,[K1]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[W1]:"Invalid base64 encoded string.",[G1]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[$1]:"Failed to build request headers object.",[V1]:"Failed to parse response headers",[Tc]:"Failed to decrypt ear response",[rd]:"The request timed out."};class VA extends nr{constructor(e,r){super(e,R4[e],r),Object.setPrototypeOf(this,VA.prototype),this.name="BrowserAuthError"}}function it(o,e){return new VA(o,e)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const Fn={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},to={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},dA={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Jr={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},wx={GET:"GET",POST:"POST"},ji={SIGNIN:"signin",SIGNOUT:"signout"},Mr={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},nc={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Xt={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var It;(function(o){o.Redirect="redirect",o.Popup="popup",o.Silent="silent",o.None="none"})(It||(It={}));const Or={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},vx={scopes:Ea},Y1="jwk",M4={React:"@azure/msal-react"},Ig="msal.db",L4=1,D4=`${Ig}.keys`,bn={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},P4=[bn.Default,bn.Skip,bn.RefreshTokenAndNetwork];/*! @azure/msal-browser v4.26.2 2025-11-19 */function oc(o){return encodeURIComponent(OA(o).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function _i(o){return J1(o).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function OA(o){return J1(new TextEncoder().encode(o))}function J1(o){const e=Array.from(o,r=>String.fromCodePoint(r)).join("");return btoa(e)}/*! @azure/msal-browser v4.26.2 2025-11-19 */function Cn(o){return new TextDecoder().decode(Ni(o))}function Ni(o){let e=o.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw it(W1)}const r=atob(e);return Uint8Array.from(r,n=>n.codePointAt(0)||0)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const N4="RSASSA-PKCS1-v1_5",Ta="AES-GCM",X1="HKDF",Wh="SHA-256",H4=2048,O4=new Uint8Array([1,0,1]),Cx="0123456789abcdef",Bx=new Uint32Array(1),Gh="raw",q1="encrypt",$h="decrypt",_4="deriveKey",z4="crypto_subtle_undefined",Vh={name:N4,hash:Wh,modulusLength:H4,publicExponent:O4};function K4(o){if(!window)throw it(Md);if(!window.crypto)throw it(Bg);if(!o&&!window.crypto.subtle)throw it(Bg,z4)}async function Z1(o,e,r){e==null||e.addQueueMeasurement(le.Sha256Digest,r);const a=new TextEncoder().encode(o);return window.crypto.subtle.digest(Wh,a)}function W4(o){return window.crypto.getRandomValues(o)}function Lp(){return window.crypto.getRandomValues(Bx),Bx[0]}function Co(){const o=Date.now(),e=Lp()*1024+(Lp()&1023),r=new Uint8Array(16),n=Math.trunc(e/2**30),a=e&2**30-1,A=Lp();r[0]=o/2**40,r[1]=o/2**32,r[2]=o/2**24,r[3]=o/2**16,r[4]=o/2**8,r[5]=o,r[6]=112|n>>>8,r[7]=n,r[8]=128|a>>>24,r[9]=a>>>16,r[10]=a>>>8,r[11]=a,r[12]=A>>>24,r[13]=A>>>16,r[14]=A>>>8,r[15]=A;let c="";for(let p=0;p<r.length;p++)c+=Cx.charAt(r[p]>>>4),c+=Cx.charAt(r[p]&15),(p===3||p===5||p===7||p===9)&&(c+="-");return c}async function G4(o,e){return window.crypto.subtle.generateKey(Vh,o,e)}async function Dp(o){return window.crypto.subtle.exportKey(Y1,o)}async function $4(o,e,r){return window.crypto.subtle.importKey(Y1,o,Vh,e,r)}async function V4(o,e){return window.crypto.subtle.sign(Vh,o,e)}async function Yh(){const o=await ew(),r={alg:"dir",kty:"oct",k:_i(new Uint8Array(o))};return OA(JSON.stringify(r))}async function Y4(o){const e=Cn(o),n=JSON.parse(e).k,a=Ni(n);return window.crypto.subtle.importKey(Gh,a,Ta,!1,[$h])}async function J4(o,e){const r=e.split(".");if(r.length!==5)throw it(Tc,"jwe_length");const n=await Y4(o).catch(()=>{throw it(Tc,"import_key")});try{const a=new TextEncoder().encode(r[0]),A=Ni(r[2]),c=Ni(r[3]),p=Ni(r[4]),d=p.byteLength*8,m=new Uint8Array(c.length+p.length);m.set(c),m.set(p,c.length);const g=await window.crypto.subtle.decrypt({name:Ta,iv:A,tagLength:d,additionalData:a},n,m);return new TextDecoder().decode(g)}catch{throw it(Tc,"decrypt")}}async function ew(){const o=await window.crypto.subtle.generateKey({name:Ta,length:256},!0,[q1,$h]);return window.crypto.subtle.exportKey(Gh,o)}async function Sx(o){return window.crypto.subtle.importKey(Gh,o,X1,!1,[_4])}async function tw(o,e,r){return window.crypto.subtle.deriveKey({name:X1,salt:e,hash:Wh,info:new TextEncoder().encode(r)},o,{name:Ta,length:256},!1,[q1,$h])}async function X4(o,e,r){const n=new TextEncoder().encode(e),a=window.crypto.getRandomValues(new Uint8Array(16)),A=await tw(o,a,r),c=await window.crypto.subtle.encrypt({name:Ta,iv:new Uint8Array(12)},A,n);return{data:_i(new Uint8Array(c)),nonce:_i(a)}}async function Ix(o,e,r,n){const a=Ni(n),A=await tw(o,Ni(e),r),c=await window.crypto.subtle.decrypt({name:Ta,iv:new Uint8Array(12)},A,a);return new TextDecoder().decode(c)}async function rw(o){const e=await Z1(o),r=new Uint8Array(e);return _i(r)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const Ld="storage_not_supported",Hr="stubbed_public_client_application_called",Jh="in_mem_redirect_unavailable";/*! @azure/msal-browser v4.26.2 2025-11-19 */const Fc={[Ld]:"Given storage configuration option was not supported.",[Hr]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Jh]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};Fc[Ld],Fc[Hr],Fc[Jh];class Xh extends nr{constructor(e,r){super(e,r),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Xh.prototype)}}function Qr(o){return new Xh(o,Fc[o])}/*! @azure/msal-browser v4.26.2 2025-11-19 */function nw(o){o.location.hash="",typeof o.history.replaceState=="function"&&o.history.replaceState(null,"",`${o.location.origin}${o.location.pathname}${o.location.search}`)}function q4(o){const e=o.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function qh(){return window.parent!==window}function Z4(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Fn.POPUP_NAME_PREFIX}.`)===0}function ei(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function eI(){const e=new Vt(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function tI(){if(Vt.hashContainsKnownProperties(window.location.hash)&&qh())throw it(T1)}function rI(o){if(qh()&&!o)throw it(j1)}function nI(){if(Z4())throw it(F1)}function ow(){if(typeof window>"u")throw it(Md)}function iw(o){if(!o)throw it(EA)}function Zh(o){ow(),tI(),nI(),iw(o)}function Ex(o,e){if(Zh(o),rI(e.system.allowRedirectInIframe),e.cache.cacheLocation===Jr.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw Qr(Jh)}function sw(o){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(o).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function oI(){return Co()}/*! @azure/msal-browser v4.26.2 2025-11-19 */class nd{navigateInternal(e,r){return nd.defaultNavigateWindow(e,r)}navigateExternal(e,r){return nd.defaultNavigateWindow(e,r)}static defaultNavigateWindow(e,r){return r.noHistory?window.location.replace(e):window.location.assign(e),new Promise((n,a)=>{setTimeout(()=>{a(it(rd,"failed_to_redirect"))},r.timeout)})}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class iI{async sendGetRequestAsync(e,r){let n,a={},A=0;const c=kx(r);try{n=await fetch(e,{method:wx.GET,headers:c})}catch(p){throw mA(it(window.navigator.onLine?L1:td),void 0,void 0,p)}a=jx(n.headers);try{return A=n.status,{headers:a,body:await n.json(),status:A}}catch(p){throw mA(it(Sg),A,a,p)}}async sendPostRequestAsync(e,r){const n=r&&r.body||"",a=kx(r);let A,c=0,p={};try{A=await fetch(e,{method:wx.POST,headers:a,body:n})}catch(d){throw mA(it(window.navigator.onLine?M1:td),void 0,void 0,d)}p=jx(A.headers);try{return c=A.status,{headers:p,body:await A.json(),status:c}}catch(d){throw mA(it(Sg),c,p,d)}}}function kx(o){try{const e=new Headers;if(!(o&&o.headers))return e;const r=o.headers;return Object.entries(r).forEach(([n,a])=>{e.append(n,a)}),e}catch(e){throw mA(it($1),void 0,void 0,e)}}function jx(o){try{const e={};return o.forEach((r,n)=>{e[n]=r}),e}catch{throw it(V1)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const sI=6e4,Eg=1e4,aI=3e4,aw=2e3;function AI({auth:o,cache:e,system:r,telemetry:n},a){const A={clientId:Ke.EMPTY_STRING,authority:`${Ke.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:Ke.EMPTY_STRING,authorityMetadata:Ke.EMPTY_STRING,redirectUri:typeof window<"u"?ei():"",postLogoutRedirectUri:Ke.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Qn.AAD,OIDCOptions:{serverResponseType:wd.FRAGMENT,defaultScopes:[Ke.OPENID_SCOPE,Ke.PROFILE_SCOPE,Ke.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:uh.None,tenant:Ke.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},c={cacheLocation:Jr.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:Jr.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===Jr.LocalStorage),claimsBasedCachingEnabled:!1},p={loggerCallback:()=>{},logLevel:xr.Info,piiLoggingEnabled:!1},m={...{...Yb,loggerOptions:p,networkClient:a?new iI:b4,navigationClient:new nd,loadFrameTimeout:0,windowHashTimeout:(r==null?void 0:r.loadFrameTimeout)||sI,iframeHashTimeout:(r==null?void 0:r.loadFrameTimeout)||Eg,navigateFrameWait:0,redirectNavigationTimeout:aI,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(r==null?void 0:r.nativeBrokerHandshakeTimeout)||aw,pollIntervalMilliseconds:Fn.DEFAULT_POLL_INTERVAL_MS},...r,loggerOptions:(r==null?void 0:r.loggerOptions)||p},g={application:{appName:Ke.EMPTY_STRING,appVersion:Ke.EMPTY_STRING},client:new Vb};if((o==null?void 0:o.protocolMode)!==Qn.OIDC&&(o!=null&&o.OIDCOptions)&&new ka(m.loggerOptions).warning(JSON.stringify(ar(Nb))),o!=null&&o.protocolMode&&o.protocolMode===Qn.OIDC&&(m!=null&&m.allowPlatformBroker))throw ar(Hb);return{auth:{...A,...o,OIDCOptions:{...A.OIDCOptions,...o==null?void 0:o.OIDCOptions}},cache:{...c,...e},system:m,telemetry:{...g,...n}}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const lI="@azure/msal-browser",Bs="4.26.2";/*! @azure/msal-browser v4.26.2 2025-11-19 */const sn="msal",ef="browser",Tx="|",pn=2,Uc=2,cI=`${sn}.${ef}.log.level`,dI=`${sn}.${ef}.log.pii`,uI=`${sn}.${ef}.platform.auth.dom`,Fx=`${sn}.version`,Ux="account.keys",Qx="token.keys";function ma(o=Uc){return o<1?`${sn}.${Ux}`:`${sn}.${o}.${Ux}`}function xa(o,e=pn){return e<1?`${sn}.${Qx}.${o}`:`${sn}.${e}.${Qx}.${o}`}/*! @azure/msal-browser v4.26.2 2025-11-19 */class tf{static loggerCallback(e,r){switch(e){case xr.Error:console.error(r);return;case xr.Info:console.info(r);return;case xr.Verbose:console.debug(r);return;case xr.Warning:console.warn(r);return;default:console.log(r);return}}constructor(e){var d;this.browserEnvironment=typeof window<"u",this.config=AI(e,this.browserEnvironment);let r;try{r=window[Jr.SessionStorage]}catch{}const n=r==null?void 0:r.getItem(cI),a=(d=r==null?void 0:r.getItem(dI))==null?void 0:d.toLowerCase(),A=a==="true"?!0:a==="false"?!1:void 0,c={...this.config.system.loggerOptions},p=n&&Object.keys(xr).includes(n)?xr[n]:void 0;p&&(c.loggerCallback=tf.loggerCallback,c.logLevel=p),A!==void 0&&(c.piiLoggingEnabled=A),this.logger=new ka(c,lI,Bs),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Ss extends tf{getModuleName(){return Ss.MODULE_NAME}getId(){return Ss.ID}async initialize(){return this.available=typeof window<"u",this.available}}Ss.MODULE_NAME="";Ss.ID="StandardOperatingContext";/*! @azure/msal-browser v4.26.2 2025-11-19 */class pI{constructor(){this.dbName=Ig,this.version=L4,this.tableName=D4,this.dbOpen=!1}async open(){return new Promise((e,r)=>{const n=window.indexedDB.open(this.dbName,this.version);n.addEventListener("upgradeneeded",a=>{a.target.result.createObjectStore(this.tableName)}),n.addEventListener("success",a=>{const A=a;this.db=A.target.result,this.dbOpen=!0,e()}),n.addEventListener("error",()=>r(it(zh)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((r,n)=>{if(!this.db)return n(it(la));const c=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);c.addEventListener("success",p=>{const d=p;this.closeConnection(),r(d.target.result)}),c.addEventListener("error",p=>{this.closeConnection(),n(p)})})}async setItem(e,r){return await this.validateDbIsOpen(),new Promise((n,a)=>{if(!this.db)return a(it(la));const p=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(r,e);p.addEventListener("success",()=>{this.closeConnection(),n()}),p.addEventListener("error",d=>{this.closeConnection(),a(d)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((r,n)=>{if(!this.db)return n(it(la));const c=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);c.addEventListener("success",()=>{this.closeConnection(),r()}),c.addEventListener("error",p=>{this.closeConnection(),n(p)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,r)=>{if(!this.db)return r(it(la));const A=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();A.addEventListener("success",c=>{const p=c;this.closeConnection(),e(p.target.result)}),A.addEventListener("error",c=>{this.closeConnection(),r(c)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((r,n)=>{if(!this.db)return n(it(la));const c=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);c.addEventListener("success",p=>{const d=p;this.closeConnection(),r(d.target.result===1)}),c.addEventListener("error",p=>{this.closeConnection(),n(p)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,r)=>{const n=window.indexedDB.deleteDatabase(Ig),a=setTimeout(()=>r(!1),200);n.addEventListener("success",()=>(clearTimeout(a),e(!0))),n.addEventListener("blocked",()=>(clearTimeout(a),e(!0))),n.addEventListener("error",()=>(clearTimeout(a),r(!1)))})}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Dd{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,r){this.cache.set(e,r)}async setUserData(e,r){this.setItem(e,r)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((r,n)=>{e.push(n)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class gI{constructor(e){this.inMemoryCache=new Dd,this.indexedDBCache=new pI,this.logger=e}handleDatabaseAccessError(e){if(e instanceof VA&&e.errorCode===zh)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const r=this.inMemoryCache.getItem(e);if(!r)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(n){this.handleDatabaseAccessError(n)}return r}async setItem(e,r){this.inMemoryCache.setItem(e,r);try{await this.indexedDBCache.setItem(e,r)}catch(n){this.handleDatabaseAccessError(n)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(r){this.handleDatabaseAccessError(r)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(r){this.handleDatabaseAccessError(r)}return e}async containsKey(e){const r=this.inMemoryCache.containsKey(e);if(!r)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(n){this.handleDatabaseAccessError(n)}return r}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class ni{constructor(e,r,n){this.logger=e,K4(n??!1),this.cache=new gI(this.logger),this.performanceClient=r}createNewGuid(){return Co()}base64Encode(e){return OA(e)}base64Decode(e){return Cn(e)}base64UrlEncode(e){return oc(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var g;const r=(g=this.performanceClient)==null?void 0:g.startMeasurement(le.CryptoOptsGetPublicKeyThumbprint,e.correlationId),n=await G4(ni.EXTRACTABLE,ni.POP_KEY_USAGES),a=await Dp(n.publicKey),A={e:a.e,kty:a.kty,n:a.n},c=Rx(A),p=await this.hashString(c),d=await Dp(n.privateKey),m=await $4(d,!1,["sign"]);return await this.cache.setItem(p,{privateKey:m,publicKey:n.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),r&&r.end({success:!0}),p}async removeTokenBindingKey(e){if(await this.cache.removeItem(e),await this.cache.containsKey(e))throw Xe(Eb)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,r,n,a){var Ie;const A=(Ie=this.performanceClient)==null?void 0:Ie.startMeasurement(le.CryptoOptsSignJwt,a),c=await this.cache.getItem(r);if(!c)throw it(_h);const p=await Dp(c.publicKey),d=Rx(p),m=oc(JSON.stringify({kid:r})),g=Ph.getShrHeaderString({...n==null?void 0:n.header,alg:p.alg,kid:m}),y=oc(g);e.cnf={jwk:JSON.parse(d)};const b=oc(JSON.stringify(e)),R=`${y}.${b}`,Q=new TextEncoder().encode(R),S=await V4(c.privateKey,Q),N=_i(new Uint8Array(S)),M=`${R}.${N}`;return A&&A.end({success:!0}),M}async hashString(e){return rw(e)}}ni.POP_KEY_USAGES=["sign","verify"];ni.EXTRACTABLE=!0;function Rx(o){return JSON.stringify(o,Object.keys(o).sort())}/*! @azure/msal-browser v4.26.2 2025-11-19 */const hI=24*60*60*1e3,kg={Lax:"Lax",None:"None"};class Aw{initialize(){return Promise.resolve()}getItem(e){const r=`${encodeURIComponent(e)}`,n=document.cookie.split(";");for(let a=0;a<n.length;a++){const A=n[a],[c,...p]=decodeURIComponent(A).trim().split("="),d=p.join("=");if(c===r)return d}return""}getUserData(){throw Xe(Dt)}setItem(e,r,n,a=!0,A=kg.Lax){let c=`${encodeURIComponent(e)}=${encodeURIComponent(r)};path=/;SameSite=${A};`;if(n){const p=fI(n);c+=`expires=${p};`}(a||A===kg.None)&&(c+="Secure;"),document.cookie=c}async setUserData(){return Promise.reject(Xe(Dt))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),r=[];return e.forEach(n=>{const a=decodeURIComponent(n).trim().split("=");r.push(a[0])}),r}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function fI(o){const e=new Date;return new Date(e.getTime()+o*hI).toUTCString()}/*! @azure/msal-browser v4.26.2 2025-11-19 */function Ii(o,e){const r=o.getItem(ma(e));return r?JSON.parse(r):[]}function fo(o,e,r){const n=e.getItem(xa(o,r));if(n){const a=JSON.parse(n);if(a&&a.hasOwnProperty("idToken")&&a.hasOwnProperty("accessToken")&&a.hasOwnProperty("refreshToken"))return a}return{idToken:[],accessToken:[],refreshToken:[]}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function Qc(o){return o.hasOwnProperty("id")&&o.hasOwnProperty("nonce")&&o.hasOwnProperty("data")}/*! @azure/msal-browser v4.26.2 2025-11-19 */const Mx="msal.cache.encryption",mI="msal.broadcast.cache";class xI{constructor(e,r,n){if(!window.localStorage)throw Qr(Ld);this.memoryStorage=new Dd,this.initialized=!1,this.clientId=e,this.logger=r,this.performanceClient=n,this.broadcast=new BroadcastChannel(mI)}async initialize(e){const r=new Aw,n=r.getItem(Mx);let a={key:"",id:""};if(n)try{a=JSON.parse(n)}catch{}if(a.key&&a.id){const A=zn(Ni,le.Base64Decode,this.logger,this.performanceClient,e)(a.key);this.encryptionCookie={id:a.id,key:await _e(Sx,le.GenerateHKDF,this.logger,this.performanceClient,e)(A)}}else{const A=Co(),c=await _e(ew,le.GenerateBaseKey,this.logger,this.performanceClient,e)(),p=zn(_i,le.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(c));this.encryptionCookie={id:A,key:await _e(Sx,le.GenerateHKDF,this.logger,this.performanceClient,e)(c)};const d={id:A,key:p};r.setItem(Mx,JSON.stringify(d),0,!0,kg.None)}await _e(this.importExistingCache.bind(this),le.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw it(EA);return this.memoryStorage.getItem(e)}async decryptData(e,r,n){if(!this.initialized||!this.encryptionCookie)throw it(EA);if(r.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},n),null;const a=await _e(Ix,le.Decrypt,this.logger,this.performanceClient,n)(this.encryptionCookie.key,r.nonce,this.getContext(e),r.data);if(!a)return null;try{return{...JSON.parse(a),lastUpdatedAt:r.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},n),null}}setItem(e,r){window.localStorage.setItem(e,r)}async setUserData(e,r,n,a,A){if(!this.initialized||!this.encryptionCookie)throw it(EA);if(A)this.setItem(e,r);else{const{data:c,nonce:p}=await _e(X4,le.Encrypt,this.logger,this.performanceClient,n)(this.encryptionCookie.key,r,this.getContext(e)),d={id:this.encryptionCookie.id,nonce:p,data:c,lastUpdatedAt:a};this.setItem(e,JSON.stringify(d))}this.memoryStorage.setItem(e,r),this.broadcast.postMessage({key:e,value:r,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),Ii(this).forEach(n=>this.removeItem(n));const r=fo(this.clientId,this);r.idToken.forEach(n=>this.removeItem(n)),r.accessToken.forEach(n=>this.removeItem(n)),r.refreshToken.forEach(n=>this.removeItem(n)),this.getKeys().forEach(n=>{(n.startsWith(sn)||n.indexOf(this.clientId)!==-1)&&this.removeItem(n)})}async importExistingCache(e){if(!this.encryptionCookie)return;let r=Ii(this);r=await this.importArray(r,e),r.length?this.setItem(ma(),JSON.stringify(r)):this.removeItem(ma());const n=fo(this.clientId,this);n.idToken=await this.importArray(n.idToken,e),n.accessToken=await this.importArray(n.accessToken,e),n.refreshToken=await this.importArray(n.refreshToken,e),n.idToken.length||n.accessToken.length||n.refreshToken.length?this.setItem(xa(this.clientId),JSON.stringify(n)):this.removeItem(xa(this.clientId))}async getItemFromEncryptedCache(e,r){if(!this.encryptionCookie)return null;const n=this.getItem(e);if(!n)return null;let a;try{a=JSON.parse(n)}catch{return null}return Qc(a)?a.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},r),_e(Ix,le.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,a.nonce,this.getContext(e),a.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},r),n)}async importArray(e,r){const n=[],a=[];return e.forEach(A=>{const c=this.getItemFromEncryptedCache(A,r).then(p=>{p?(this.memoryStorage.setItem(A,p),n.push(A)):this.removeItem(A)});a.push(c)}),await Promise.all(a),n}getContext(e){let r="";return e.includes(this.clientId)&&(r=this.clientId),r}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const r=this.performanceClient.startMeasurement(le.LocalStorageUpdated);r.add({isBackground:!0});const{key:n,value:a,context:A}=e.data;if(!n){this.logger.error("Broadcast event missing key"),r.end({success:!1,errorCode:"noKey"});return}if(A&&A!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${A}`),r.end({success:!1,errorCode:"contextMismatch"});return}a?(this.memoryStorage.setItem(n,a),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(n),this.logger.verbose("Removed item from internal cache")),r.end({success:!0})}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class yI{constructor(){if(!window.sessionStorage)throw Qr(Ld)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,r){window.sessionStorage.setItem(e,r)}async setUserData(e,r){this.setItem(e,r)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const pt={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};/*! @azure/msal-browser v4.26.2 2025-11-19 */function Ci(o,e){const r=o.indexOf(e);r>-1&&o.splice(r,1)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class jg extends vg{constructor(e,r,n,a,A,c,p){super(e,n,a,A,p),this.cacheConfig=r,this.logger=a,this.internalStorage=new Dd,this.browserStorage=Lx(e,r.cacheLocation,a,A),this.temporaryCacheStorage=Lx(e,r.temporaryCacheLocation,a,A),this.cookieStorage=new Aw,this.eventHandler=c}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){let r=Ii(this.browserStorage),n=fo(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:r.length,preMigrateATCount:n.accessToken.length,preMigrateITCount:n.idToken.length,preMigrateRTCount:n.refreshToken.length},e);for(let A=0;A<Uc;A++){const c=A;await this.removeStaleAccounts(A,c,e)}for(let A=0;A<pn;A++){const c=A;await this.migrateIdTokens(A,c,e)}const a=this.getKMSIValues();for(let A=0;A<pn;A++)await this.migrateAccessTokens(A,a,e),await this.migrateRefreshTokens(A,a,e);r=Ii(this.browserStorage),n=fo(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:r.length,postMigrateATCount:n.accessToken.length,postMigrateITCount:n.idToken.length,postMigrateRTCount:n.refreshToken.length},e)}async updateOldEntry(e,r){const n=this.browserStorage.getItem(e),a=this.validateAndParseJson(n||"");if(!a)return this.browserStorage.removeItem(e),null;if(!a.lastUpdatedAt)a.lastUpdatedAt=Date.now().toString(),this.setItem(e,JSON.stringify(a),r);else if(px(a.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},r),null;const A=Qc(a)?await this.browserStorage.decryptData(e,a,r):a;return!A||!jd(A)?(this.performanceClient.incrementFields({invalidCacheCount:1},r),null):(gx(A)||hx(A))&&A.expiresOn&&qc(A.expiresOn,db)?(this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},r),null):A}async removeStaleAccounts(e,r,n){const a=Ii(this.browserStorage,e);if(a.length!==0){for(const A of[...a]){this.performanceClient.incrementFields({oldAcntCount:1},n);const c=this.browserStorage.getItem(A),p=this.validateAndParseJson(c||"");if(!p){Ci(a,A);continue}if(p.lastUpdatedAt)px(p.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(A,p,r,n),Ci(a,A));else{p.lastUpdatedAt=Date.now().toString(),this.setItem(A,JSON.stringify(p),n);continue}}this.setAccountKeys(a,n,e)}}async removeAccountOldSchema(e,r,n,a){const A=Qc(r)?await this.browserStorage.decryptData(e,r,a):r,c=A==null?void 0:A.homeAccountId;if(c){const p=this.getTokenKeys(n);[...p.idToken].filter(d=>d.includes(c)).forEach(d=>{this.browserStorage.removeItem(d),Ci(p.idToken,d)}),[...p.accessToken].filter(d=>d.includes(c)).forEach(d=>{this.browserStorage.removeItem(d),Ci(p.accessToken,d)}),[...p.refreshToken].filter(d=>d.includes(c)).forEach(d=>{this.browserStorage.removeItem(d),Ci(p.refreshToken,d)}),this.setTokenKeys(p,a,n)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},a),this.browserStorage.removeItem(e)}getKMSIValues(){const e={},r=this.getTokenKeys().idToken;for(const n of r){const a=this.browserStorage.getUserData(n);if(a){const A=JSON.parse(a),c=Qo(A.secret,Cn);c&&(e[A.homeAccountId]=Ro(c))}}return e}async migrateIdTokens(e,r,n){const a=fo(this.clientId,this.browserStorage,e);if(a.idToken.length===0)return;const A=fo(this.clientId,this.browserStorage,pn),c=Ii(this.browserStorage),p=Ii(this.browserStorage,r);for(const d of[...a.idToken]){this.performanceClient.incrementFields({oldITCount:1},n);const m=await this.updateOldEntry(d,n);if(!m){Ci(a.idToken,d);continue}const g=c.find(M=>M.includes(m.homeAccountId)),y=p.find(M=>M.includes(m.homeAccountId));let b=null;if(g)b=this.getAccount(g,n);else if(y){const M=this.browserStorage.getItem(y),Ie=this.validateAndParseJson(M||"");b=Ie&&Qc(Ie)?await this.browserStorage.decryptData(y,Ie,n):Ie}if(!b){this.performanceClient.incrementFields({skipITMigrateCount:1},n);continue}const R=Qo(m.secret,Cn),C=this.generateCredentialKey(m),Q=this.getIdTokenCredential(C,n),S=Object.keys(R).includes("signin_state"),N=Q&&Object.keys(Qo(Q.secret,Cn)||{}).includes("signin_state");if(!Q||m.lastUpdatedAt>Q.lastUpdatedAt&&(S||!N)){const M=b.tenantProfiles||[],Ie=xh(R)||b.realm;if(Ie&&!M.find(ae=>ae.tenantId===Ie)){const ae=Cd(b.homeAccountId,b.localAccountId,Ie,R);M.push(ae)}b.tenantProfiles=M;const fe=this.generateAccountKey(jr.getAccountInfo(b)),F=Ro(R);await this.setUserData(fe,JSON.stringify(b),n,b.lastUpdatedAt,F),c.includes(fe)||c.push(fe),await this.setUserData(C,JSON.stringify(m),n,m.lastUpdatedAt,F),this.performanceClient.incrementFields({migratedITCount:1},n),A.idToken.push(C)}}this.setTokenKeys(a,n,e),this.setTokenKeys(A,n),this.setAccountKeys(c,n)}async migrateAccessTokens(e,r,n){const a=fo(this.clientId,this.browserStorage,e);if(a.accessToken.length===0)return;const A=fo(this.clientId,this.browserStorage,pn);for(const c of[...a.accessToken]){this.performanceClient.incrementFields({oldATCount:1},n);const p=await this.updateOldEntry(c,n);if(!p){Ci(a.accessToken,c);continue}if(!Object.keys(r).includes(p.homeAccountId)){this.performanceClient.incrementFields({skipATMigrateCount:1},n);continue}const d=this.generateCredentialKey(p),m=r[p.homeAccountId];if(!A.accessToken.includes(d))await this.setUserData(d,JSON.stringify(p),n,p.lastUpdatedAt,m),this.performanceClient.incrementFields({migratedATCount:1},n),A.accessToken.push(d);else{const g=this.getAccessTokenCredential(d,n);(!g||p.lastUpdatedAt>g.lastUpdatedAt)&&(await this.setUserData(d,JSON.stringify(p),n,p.lastUpdatedAt,m),this.performanceClient.incrementFields({migratedATCount:1},n))}}this.setTokenKeys(a,n,e),this.setTokenKeys(A,n)}async migrateRefreshTokens(e,r,n){const a=fo(this.clientId,this.browserStorage,e);if(a.refreshToken.length===0)return;const A=fo(this.clientId,this.browserStorage,pn);for(const c of[...a.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},n);const p=await this.updateOldEntry(c,n);if(!p){Ci(a.refreshToken,c);continue}if(!Object.keys(r).includes(p.homeAccountId)){this.performanceClient.incrementFields({skipRTMigrateCount:1},n);continue}const d=this.generateCredentialKey(p),m=r[p.homeAccountId];if(!A.refreshToken.includes(d))await this.setUserData(d,JSON.stringify(p),n,p.lastUpdatedAt,m),this.performanceClient.incrementFields({migratedRTCount:1},n),A.refreshToken.push(d);else{const g=this.getRefreshTokenCredential(d,n);(!g||p.lastUpdatedAt>g.lastUpdatedAt)&&(await this.setUserData(d,JSON.stringify(p),n,p.lastUpdatedAt,m),this.performanceClient.incrementFields({migratedRTCount:1},n))}}this.setTokenKeys(a,n,e),this.setTokenKeys(A,n)}trackVersionChanges(e){const r=this.browserStorage.getItem(Fx);r&&(this.logger.info(`MSAL.js was last initialized by version: ${r}`),this.performanceClient.addFields({previousLibraryVersion:r},e)),r!==Bs&&this.setItem(Fx,Bs,e)}validateAndParseJson(e){if(!e)return null;try{const r=JSON.parse(e);return r&&typeof r=="object"?r:null}catch{return null}}setItem(e,r,n){const a=new Array(pn+1).fill(0),A=[],c=20;for(let p=0;p<=c;p++)try{if(this.browserStorage.setItem(e,r),p>0)for(let d=0;d<=pn;d++){const m=a.slice(0,d).reduce((y,b)=>y+b,0);if(m>=p)break;const g=p>m+a[d]?m+a[d]:p;p>m&&a[d]>0&&this.removeAccessTokenKeys(A.slice(m,g),n,d)}break}catch(d){const m=wg(d);if(m.errorCode===Vc&&p<c){if(!A.length)for(let g=0;g<=pn;g++)if(e===xa(this.clientId,g)){const y=JSON.parse(r).accessToken;A.push(...y),a[g]=y.length}else{const y=this.getTokenKeys(g).accessToken;A.push(...y),a[g]=y.length}if(A.length<=p)throw m;this.removeAccessToken(A[p],n,!1)}else throw m}}async setUserData(e,r,n,a,A){const c=new Array(pn+1).fill(0),p=[],d=20;for(let m=0;m<=d;m++)try{if(await _e(this.browserStorage.setUserData.bind(this.browserStorage),le.SetUserData,this.logger,this.performanceClient)(e,r,n,a,A),m>0)for(let g=0;g<=pn;g++){const y=c.slice(0,g).reduce((R,C)=>R+C,0);if(y>=m)break;const b=m>y+c[g]?y+c[g]:m;m>y&&c[g]>0&&this.removeAccessTokenKeys(p.slice(y,b),n,g)}break}catch(g){const y=wg(g);if(y.errorCode===Vc&&m<d){if(!p.length)for(let b=0;b<=pn;b++){const R=this.getTokenKeys(b).accessToken;p.push(...R),c[b]=R.length}if(p.length<=m)throw y;this.removeAccessToken(p[m],n,!1)}else throw y}}getAccount(e,r){this.logger.trace("BrowserCacheManager.getAccount called");const n=this.browserStorage.getUserData(e);if(!n)return this.removeAccountKeyFromMap(e,r),null;const a=this.validateAndParseJson(n);return!a||!jr.isAccountEntity(a)?null:vg.toObject(new jr,a)}async setAccount(e,r,n){this.logger.trace("BrowserCacheManager.setAccount called");const a=this.generateAccountKey(jr.getAccountInfo(e)),A=Date.now().toString();e.lastUpdatedAt=A,await this.setUserData(a,JSON.stringify(e),r,A,n);const c=this.addAccountKeyToMap(a,r);this.performanceClient.addFields({kmsi:n},r),this.cacheConfig.cacheLocation===Jr.LocalStorage&&c&&this.eventHandler.emitEvent(pt.ACCOUNT_ADDED,void 0,jr.getAccountInfo(e))}getAccountKeys(){return Ii(this.browserStorage)}setAccountKeys(e,r,n=Uc){e.length===0?this.removeItem(ma(n)):this.setItem(ma(n),JSON.stringify(e),r)}addAccountKeyToMap(e,r){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const n=this.getAccountKeys();return n.indexOf(e)===-1?(n.push(e),this.setItem(ma(),JSON.stringify(n),r),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,r){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const n=this.getAccountKeys(),a=n.indexOf(e);a>-1?(n.splice(a,1),this.setAccountKeys(n,r),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,r){const n=this.getActiveAccount(r);(n==null?void 0:n.homeAccountId)===e.homeAccountId&&(n==null?void 0:n.environment)===e.environment&&this.setActiveAccount(null,r),super.removeAccount(e,r),this.removeAccountKeyFromMap(this.generateAccountKey(e),r),this.browserStorage.getKeys().forEach(a=>{a.includes(e.homeAccountId)&&a.includes(e.environment)&&this.browserStorage.removeItem(a)}),this.cacheConfig.cacheLocation===Jr.LocalStorage&&this.eventHandler.emitEvent(pt.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,r){super.removeIdToken(e,r);const n=this.getTokenKeys(),a=n.idToken.indexOf(e);a>-1&&(this.logger.info("idToken removed from tokenKeys map"),n.idToken.splice(a,1),this.setTokenKeys(n,r))}removeAccessToken(e,r,n=!0){super.removeAccessToken(e,r),n&&this.removeAccessTokenKeys([e],r)}removeAccessTokenKeys(e,r,n=pn){this.logger.trace("removeAccessTokenKey called");const a=this.getTokenKeys(n);let A=0;if(e.forEach(c=>{const p=a.accessToken.indexOf(c);p>-1&&(a.accessToken.splice(p,1),A++)}),A>0){this.logger.info(`removed ${A} accessToken keys from tokenKeys map`),this.setTokenKeys(a,r,n);return}}removeRefreshToken(e,r){super.removeRefreshToken(e,r);const n=this.getTokenKeys(),a=n.refreshToken.indexOf(e);a>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),n.refreshToken.splice(a,1),this.setTokenKeys(n,r))}getTokenKeys(e=pn){return fo(this.clientId,this.browserStorage,e)}setTokenKeys(e,r,n=pn){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(xa(this.clientId,n));return}else this.setItem(xa(this.clientId,n),JSON.stringify(e),r)}getIdTokenCredential(e,r){const n=this.browserStorage.getUserData(e);if(!n)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,r),null;const a=this.validateAndParseJson(n);return!a||!r4(a)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),a)}async setIdTokenCredential(e,r,n){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const a=this.generateCredentialKey(e),A=Date.now().toString();e.lastUpdatedAt=A,await this.setUserData(a,JSON.stringify(e),r,A,n);const c=this.getTokenKeys();c.idToken.indexOf(a)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),c.idToken.push(a),this.setTokenKeys(c,r))}getAccessTokenCredential(e,r){const n=this.browserStorage.getUserData(e);if(!n)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],r),null;const a=this.validateAndParseJson(n);return!a||!gx(a)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),a)}async setAccessTokenCredential(e,r,n){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const a=this.generateCredentialKey(e),A=Date.now().toString();e.lastUpdatedAt=A,await this.setUserData(a,JSON.stringify(e),r,A,n);const c=this.getTokenKeys(),p=c.accessToken.indexOf(a);p!==-1&&c.accessToken.splice(p,1),this.logger.trace(`access token ${p===-1?"added to":"updated in"} map`),c.accessToken.push(a),this.setTokenKeys(c,r)}getRefreshTokenCredential(e,r){const n=this.browserStorage.getUserData(e);if(!n)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,r),null;const a=this.validateAndParseJson(n);return!a||!hx(a)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),a)}async setRefreshTokenCredential(e,r,n){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const a=this.generateCredentialKey(e),A=Date.now().toString();e.lastUpdatedAt=A,await this.setUserData(a,JSON.stringify(e),r,A,n);const c=this.getTokenKeys();c.refreshToken.indexOf(a)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),c.refreshToken.push(a),this.setTokenKeys(c,r))}getAppMetadata(e){const r=this.browserStorage.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(r);return!n||!s4(e,n)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),n)}setAppMetadata(e,r){this.logger.trace("BrowserCacheManager.setAppMetadata called");const n=i4(e);this.setItem(n,JSON.stringify(e),r)}getServerTelemetry(e){const r=this.browserStorage.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const n=this.validateAndParseJson(r);return!n||!n4(e,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),n)}setServerTelemetry(e,r,n){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(r),n)}getAuthorityMetadata(e){const r=this.internalStorage.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(r);return n&&a4(e,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),n):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(r=>this.isAuthorityMetadata(r))}setWrapperMetadata(e,r){this.internalStorage.setItem(nc.WRAPPER_SKU,e),this.internalStorage.setItem(nc.WRAPPER_VER,r)}getWrapperMetadata(){const e=this.internalStorage.getItem(nc.WRAPPER_SKU)||Ke.EMPTY_STRING,r=this.internalStorage.getItem(nc.WRAPPER_VER)||Ke.EMPTY_STRING;return[e,r]}setAuthorityMetadata(e,r){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(r))}getActiveAccount(e){const r=this.generateCacheKey(ex.ACTIVE_ACCOUNT_FILTERS),n=this.browserStorage.getItem(r);if(!n)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const a=this.validateAndParseJson(n);return a?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:a.homeAccountId,localAccountId:a.localAccountId,tenantId:a.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,r){const n=this.generateCacheKey(ex.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");const a={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:Rn().toString()};this.setItem(n,JSON.stringify(a),r)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(n);this.eventHandler.emitEvent(pt.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){const r=this.browserStorage.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const n=this.validateAndParseJson(r);return!n||!o4(e,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),n)}setThrottlingCache(e,r,n){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(r),n)}getTemporaryCache(e,r){const n=r?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const A=this.cookieStorage.getItem(n);if(A)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),A}const a=this.temporaryCacheStorage.getItem(n);if(!a){if(this.cacheConfig.cacheLocation===Jr.LocalStorage){const A=this.browserStorage.getItem(n);if(A)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),A}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),a}setTemporaryCache(e,r,n){const a=n?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(a,r),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(a,r,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(r=>{(r.indexOf(sn)!==-1||r.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(r)}),this.browserStorage.getKeys().forEach(r=>{(r.indexOf(sn)!==-1||r.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(r)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(le.ClearTokensAndKeysWithClaims,e);const r=this.getTokenKeys();let n=0;r.accessToken.forEach(a=>{const A=this.getAccessTokenCredential(a,e);A!=null&&A.requestedClaimsHash&&a.includes(A.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(a,e),n++)}),n>0&&this.logger.warning(`${n} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return _n.startsWith(e,sn)?e:`${sn}.${this.clientId}.${e}`}generateCredentialKey(e){const r=e.credentialType===on.REFRESH_TOKEN&&e.familyId||e.clientId,n=e.tokenType&&e.tokenType.toLowerCase()!==tr.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${sn}.${pn}`,e.homeAccountId,e.environment,e.credentialType,r,e.realm||"",e.target||"",e.requestedClaimsHash||"",n].join(Tx).toLowerCase()}generateAccountKey(e){const r=e.homeAccountId.split(".")[1];return[`${sn}.${Uc}`,e.homeAccountId,e.environment,r||e.tenantId||""].join(Tx).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Mr.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Mr.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Mr.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Mr.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Mr.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,r){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const n=OA(JSON.stringify(e));if(this.setTemporaryCache(Mr.REQUEST_PARAMS,n,!0),r){const a=OA(r);this.setTemporaryCache(Mr.VERIFIER,a,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(Mr.REQUEST_PARAMS,!0);if(!e)throw it(Q1);const r=this.getTemporaryCache(Mr.VERIFIER,!0);let n,a="";try{n=JSON.parse(Cn(e)),r&&(a=Cn(r))}catch(A){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${A}`),it(R1)}return[n,a]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Mr.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const r=this.validateAndParseJson(e);return r||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var n;const r=(n=this.getInteractionInProgress())==null?void 0:n.clientId;return e?r===this.clientId:!!r}getInteractionInProgress(){const e=`${sn}.${Mr.INTERACTION_STATUS_KEY}`,r=this.getTemporaryCache(e,!1);try{return r?JSON.parse(r):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),nw(window),null}}setInteractionInProgress(e,r=ji.SIGNIN){var a;const n=`${sn}.${Mr.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw it(S1);this.setTemporaryCache(n,JSON.stringify({clientId:this.clientId,type:r}),!1)}else!e&&((a=this.getInteractionInProgress())==null?void 0:a.clientId)===this.clientId&&this.removeTemporaryItem(n)}async hydrateCache(e,r){var p,d,m;const n=Ed((p=e.account)==null?void 0:p.homeAccountId,(d=e.account)==null?void 0:d.environment,e.idToken,this.clientId,e.tenantId);let a;r.claims&&(a=await this.cryptoImpl.hashString(r.claims));const A=kd((m=e.account)==null?void 0:m.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?ux(e.expiresOn):0,e.extExpiresOn?ux(e.extExpiresOn):0,Cn,void 0,e.tokenType,void 0,r.sshKid,r.claims,a),c={idToken:n,accessToken:A};return this.saveCacheRecord(c,e.correlationId,Ro(Qo(e.idToken,Cn)))}async saveCacheRecord(e,r,n,a){try{await super.saveCacheRecord(e,r,n,a)}catch(A){if(A instanceof ha&&this.performanceClient&&r)try{const c=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:c.refreshToken.length,cacheIdCount:c.idToken.length,cacheAtCount:c.accessToken.length},r)}catch{}throw A}}}function Lx(o,e,r,n){try{switch(e){case Jr.LocalStorage:return new xI(o,r,n);case Jr.SessionStorage:return new yI;case Jr.MemoryStorage:default:break}}catch(a){r.error(a)}return new Dd}const bI=(o,e,r,n)=>{const a={cacheLocation:Jr.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Jr.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new jg(o,a,Kc,e,r,n)};/*! @azure/msal-browser v4.26.2 2025-11-19 */function wI(o,e,r,n,a){return o.verbose("getAllAccounts called"),r?e.getAllAccounts(a||{},n):[]}function vI(o,e,r,n){const a=r.getAccountInfoFilteredBy(o,n);return a?(e.verbose("getAccount: Account matching provided filter found, returning"),a):(e.verbose("getAccount: No matching account found, returning null"),null)}function CI(o,e,r,n){if(e.trace("getAccountByUsername called"),!o)return e.warning("getAccountByUsername: No username provided"),null;const a=r.getAccountInfoFilteredBy({username:o},n);return a?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${o}`),a):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function BI(o,e,r,n){if(e.trace("getAccountByHomeId called"),!o)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const a=r.getAccountInfoFilteredBy({homeAccountId:o},n);return a?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${o}`),a):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function SI(o,e,r,n){if(e.trace("getAccountByLocalId called"),!o)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const a=r.getAccountInfoFilteredBy({localAccountId:o},n);return a?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${o}`),a):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function II(o,e,r){e.setActiveAccount(o,r)}function EI(o,e){return o.getActiveAccount(e)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const kI="msal.broadcast.event";class jI{constructor(e){this.eventCallbacks=new Map,this.logger=e||new ka({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(kI)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,r,n){if(typeof window<"u"){const a=n||oI();return this.eventCallbacks.has(a)?(this.logger.error(`Event callback with id: ${a} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(a,[e,r||[]]),this.logger.verbose(`Event callback registered with id: ${a}`),a)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,r,n,a){var c;const A={eventType:e,interactionType:r||null,payload:n||null,error:a||null,timestamp:Date.now()};switch(e){case pt.ACCOUNT_ADDED:case pt.ACCOUNT_REMOVED:case pt.ACTIVE_ACCOUNT_CHANGED:(c=this.broadcastChannel)==null||c.postMessage(A);break;default:this.invokeCallbacks(A);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([r,n],a)=>{(n.length===0||n.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${a}: ${e.eventType}`),r.apply(null,[e]))})}invokeCrossTabCallbacks(e){const r=e.data;this.invokeCallbacks(r)}subscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class lw{constructor(e,r,n,a,A,c,p,d,m){this.config=e,this.browserStorage=r,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=A,this.navigationClient=c,this.platformAuthProvider=d,this.correlationId=m||Co(),this.logger=a.clone(Fn.MSAL_SKU,Bs,this.correlationId),this.performanceClient=p}async clearCacheOnLogout(e,r){if(r)try{this.browserStorage.removeAccount(r,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const r=e||this.config.auth.redirectUri;return Vt.getAbsoluteUrl(r,ei())}initializeServerTelemetryManager(e,r){this.logger.verbose("initializeServerTelemetryManager called");const n={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:r||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new NA(n,this.browserStorage)}async getDiscoveredAuthority(e){const{account:r}=e,n=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(le.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const a={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},A=e.requestAuthority||this.config.auth.authority,c=n!=null&&n.length?n==="true":this.config.auth.instanceAware,p=r&&c?this.config.auth.authority.replace(Vt.getDomainFromUrl(A),r.environment):A,d=hn.generateAuthority(p,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),m=await _e(d1,le.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(d,this.config.system.networkClient,this.browserStorage,a,this.logger,this.correlationId,this.performanceClient);if(r&&!m.isAlias(r.environment))throw ar(Ob);return m}}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function rf(o,e,r,n){r.addQueueMeasurement(le.InitializeBaseRequest,o.correlationId);const a=o.authority||e.auth.authority,A=[...o&&o.scopes||[]],c={...o,correlationId:o.correlationId,authority:a,scopes:A};if(!c.authenticationScheme)c.authenticationScheme=tr.BEARER,n.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(c.authenticationScheme===tr.SSH){if(!o.sshJwk)throw ar(vd);if(!o.sshKid)throw ar(Pb)}n.verbose(`Authentication Scheme set to "${c.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&o.claims&&!_n.isEmptyObj(o.claims)&&(c.requestedClaimsHash=await rw(o.claims)),c}async function TI(o,e,r,n,a){n.addQueueMeasurement(le.InitializeSilentRequest,o.correlationId);const A=await _e(rf,le.InitializeBaseRequest,a,n,o.correlationId)(o,r,n,a);return{...o,...A,account:e,forceRefresh:o.forceRefresh||!1}}function cw(o,e){let r;const n=o.httpMethod;if(e===Qn.EAR){if(r=n||ps.POST,r!==ps.POST)throw ar(_b)}else r=n||ps.GET;if(o.authorizePostBodyParameters&&r!==ps.POST)throw ar(zb);return r}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Fa extends lw{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const r={correlationId:this.correlationId||Co(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const n=this.getLogoutHintFromIdTokenClaims(e.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),r.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",r.correlationId),r.postLogoutRedirectUri=Vt.getAbsoluteUrl(e.postLogoutRedirectUri,ei())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",r.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",r.correlationId),r.postLogoutRedirectUri=Vt.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,ei())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",r.correlationId),r.postLogoutRedirectUri=Vt.getAbsoluteUrl(ei(),ei())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",r.correlationId),r}getLogoutHintFromIdTokenClaims(e){const r=e.idTokenClaims;if(r){if(r.login_hint)return r.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(le.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const r=await _e(this.getClientConfiguration.bind(this),le.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new h1(r,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:r,requestAuthority:n,requestAzureCloudOptions:a,requestExtraQueryParameters:A,account:c}=e;this.performanceClient.addQueueMeasurement(le.StandardInteractionClientGetClientConfiguration,this.correlationId);const p=e.authority||await _e(this.getDiscoveredAuthority.bind(this),le.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:n,requestAzureCloudOptions:a,requestExtraQueryParameters:A,account:c}),d=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:p,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:d.loggerCallback,piiLoggingEnabled:d.piiLoggingEnabled,logLevel:d.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:r,libraryInfo:{sku:Fn.MSAL_SKU,version:Bs,cpu:Ke.EMPTY_STRING,os:Ke.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,r){this.performanceClient.addQueueMeasurement(le.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const n=this.getRedirectUri(e.redirectUri),a={interactionType:r},A=ja.setRequestState(this.browserCrypto,e&&e.state||Ke.EMPTY_STRING,a),p={...await _e(rf,le.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:n,state:A,nonce:e.nonce||Co(),responseMode:this.config.auth.OIDCOptions.serverResponseType},d={...p,httpMethod:cw(p,this.config.auth.protocolMode)};if(e.loginHint||e.sid)return d;const m=e.account||this.browserStorage.getActiveAccount(this.correlationId);return m&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${m.homeAccountId}`,this.correlationId),d.account=m),d}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function FI(o,e){if(!e)return null;try{return ja.parseRequestState(o,e).libraryState.meta}catch{throw Xe(va)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function kA(o,e,r){const n=Gc(o);if(!n)throw Wb(o)?(r.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),r.errorPii(`The ${e} detected is: ${o}`),it(v1)):(r.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),it(w1));return n}function UI(o,e,r){if(!o.state)throw it(Oh);const n=FI(e,o.state);if(!n)throw it(C1);if(n.interactionType!==r)throw it(B1)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class dw{constructor(e,r,n,a,A){this.authModule=e,this.browserStorage=r,this.authCodeRequest=n,this.logger=a,this.performanceClient=A}async handleCodeResponse(e,r){this.performanceClient.addQueueMeasurement(le.HandleCodeResponse,r.correlationId);let n;try{n=v4(e,r.state)}catch(a){throw a instanceof Es&&a.subError===HA?it(HA):a}return _e(this.handleCodeResponseFromServer.bind(this),le.HandleCodeResponseFromServer,this.logger,this.performanceClient,r.correlationId)(n,r)}async handleCodeResponseFromServer(e,r,n=!0){if(this.performanceClient.addQueueMeasurement(le.HandleCodeResponseFromServer,r.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await _e(this.authModule.updateAuthority.bind(this.authModule),le.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,r.correlationId)(e.cloud_instance_host_name,r.correlationId),n&&(e.nonce=r.nonce||void 0),e.state=r.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const A=this.createCcsCredentials(r);A&&(this.authCodeRequest.ccsCredential=A)}return await _e(this.authModule.acquireToken.bind(this.authModule),le.AuthClientAcquireToken,this.logger,this.performanceClient,r.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:xo.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:xo.UPN}:null}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const QI="ContentError",RI="PageException",uw="user_switch";/*! @azure/msal-browser v4.26.2 2025-11-19 */const MI="USER_INTERACTION_REQUIRED",LI="USER_CANCEL",DI="NO_NETWORK",PI="DISABLED",NI="ACCOUNT_UNAVAILABLE",HI="UX_NOT_ALLOWED";/*! @azure/msal-browser v4.26.2 2025-11-19 */const OI=-2147186943,_I={[uw]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Uo extends nr{constructor(e,r,n){super(e,r),Object.setPrototypeOf(this,Uo.prototype),this.name="NativeAuthError",this.ext=n}}function ca(o){if(o.ext&&o.ext.status&&o.ext.status===PI||o.ext&&o.ext.error&&o.ext.error===OI)return!0;switch(o.errorCode){case QI:case RI:return!0;default:return!1}}function od(o,e,r){if(r&&r.status)switch(r.status){case NI:return ed(u1);case MI:return new vo(o,e);case LI:return it(HA);case DI:return it(td);case HI:return ed(Rh)}return new Uo(o,_I[o]||e,r)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class pw extends Fa{async acquireToken(e){this.performanceClient.addQueueMeasurement(le.SilentCacheClientAcquireToken,e.correlationId);const r=this.initializeServerTelemetryManager(Xt.acquireTokenSilent_silentFlow),n=await _e(this.getClientConfiguration.bind(this),le.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),a=new y4(n,this.performanceClient);this.logger.verbose("Silent auth client created");try{const c=(await _e(a.acquireCachedToken.bind(a),le.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),c}catch(A){throw A instanceof VA&&A.errorCode===_h&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),A}}logout(e){this.logger.verbose("logoutRedirect called");const r=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(r.correlationId,r==null?void 0:r.account)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Rc extends lw{constructor(e,r,n,a,A,c,p,d,m,g,y,b){super(e,r,n,a,A,c,d,m,b),this.apiId=p,this.accountId=g,this.platformAuthProvider=m,this.nativeStorageManager=y,this.silentCacheClient=new pw(e,this.nativeStorageManager,n,a,A,c,d,m,b);const R=this.platformAuthProvider.getExtensionName();this.skus=NA.makeExtraSkuString({libraryName:Fn.MSAL_SKU,libraryVersion:Bs,extensionName:R,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[MS]:this.skus}}async acquireToken(e,r){this.performanceClient.addQueueMeasurement(le.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const n=this.performanceClient.startMeasurement(le.NativeInteractionClientAcquireToken,this.correlationId),a=Rn(),A=this.initializeServerTelemetryManager(this.apiId);try{const c=await this.initializeNativeRequest(e);try{const d=await this.acquireTokensFromCache(this.accountId,c);return n.end({success:!0,isNativeBroker:!1,fromCache:!0}),d}catch(d){if(r===bn.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),n.end({success:!1,brokerErrorCode:"cache_request_failed"}),d;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const p=await this.platformAuthProvider.sendMessage(c);return await this.handleNativeResponse(p,c,a).then(d=>(n.end({success:!0,isNativeBroker:!0,requestId:d.requestId}),A.clearNativeBrokerErrorCode(),d)).catch(d=>{throw n.end({success:!1,errorCode:d.errorCode,subErrorCode:d.subError}),d})}catch(c){throw c instanceof Uo&&A.setNativeBrokerErrorCode(c.errorCode),n.end({success:!1}),c}}createSilentCacheRequest(e,r){return{authority:e.authority,correlationId:this.correlationId,scopes:zr.fromString(e.scope).asArray(),account:r,forceRefresh:!1}}async acquireTokensFromCache(e,r){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Xe(xg);const n=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!n)throw Xe(xg);try{const a=this.createSilentCacheRequest(r,n),A=await this.silentCacheClient.acquireToken(a),c={...n,idTokenClaims:A==null?void 0:A.idTokenClaims,idToken:A==null?void 0:A.idToken};return{...A,account:c}}catch(a){throw a}}async acquireTokenRedirect(e,r){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...n}=e;delete n.onRedirectNavigate;const a=await this.initializeNativeRequest(n);try{await this.platformAuthProvider.sendMessage(a)}catch(p){if(p instanceof Uo&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(p.errorCode),ca(p)))throw p}this.browserStorage.setTemporaryCache(Mr.NATIVE_REQUEST,JSON.stringify(a),!0);const A={apiId:Xt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);r.end({success:!0}),await this.navigationClient.navigateExternal(c,A)}async handleRedirectPromise(e,r){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const n=this.browserStorage.getCachedNativeRequest();if(!n)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&r&&(e==null||e.addFields({errorCode:"no_cached_request"},r)),null;const{prompt:a,...A}=n;a&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Mr.NATIVE_REQUEST));const c=Rn();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const p=await this.platformAuthProvider.sendMessage(A),d=await this.handleNativeResponse(p,A,c);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),d}catch(p){throw p}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,r,n){var g,y;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const a=Qo(e.id_token,Cn),A=this.createHomeAccountIdentifier(e,a),c=(g=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:r.accountId},this.correlationId))==null?void 0:g.homeAccountId;if((y=r.extraParameters)!=null&&y.child_client_id&&e.account.id!==r.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(A!==c&&e.account.id!==r.accountId)throw od(uw);const p=await this.getDiscoveredAuthority({requestAuthority:r.authority}),d=Mh(this.browserStorage,p,A,Cn,this.correlationId,a,e.client_info,void 0,a.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const m=await this.generateAuthenticationResult(e,r,a,d,p.canonicalAuthority,n);return await this.cacheAccount(d,this.correlationId,Ro(a)),await this.cacheNativeTokens(e,r,A,a,e.access_token,m.tenantId,n),m}createHomeAccountIdentifier(e,r){return jr.generateHomeAccountId(e.client_info||Ke.EMPTY_STRING,mo.Default,this.logger,this.browserCrypto,r)}generateScopes(e,r){return r?zr.fromString(r):zr.fromString(e)}async generatePopAccessToken(e,r){if(r.tokenType===tr.POP&&r.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const n=new Ca(this.browserCrypto),a={resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,shrNonce:r.shrNonce};if(!r.keyId)throw Xe(lh);return n.signPopToken(e.access_token,r.keyId,a)}else return e.access_token}async generateAuthenticationResult(e,r,n,a,A,c){const p=this.addTelemetryFromNativeResponse(e.properties.MATS),d=this.generateScopes(r.scope,e.scope),m=e.account.properties||{},g=m.UID||n.oid||n.sub||Ke.EMPTY_STRING,y=m.TenantId||n.tid||Ke.EMPTY_STRING,b=mh(jr.getAccountInfo(a),void 0,n,e.id_token);b.nativeAccountId!==e.account.id&&(b.nativeAccountId=e.account.id);const R=await this.generatePopAccessToken(e,r),C=r.tokenType===tr.POP?tr.POP:tr.BEARER;return{authority:A,uniqueId:g,tenantId:y,scopes:d.asArray(),account:b,idToken:e.id_token,idTokenClaims:n,accessToken:R,fromCache:p?this.isResponseFromCache(p):!1,expiresOn:fa(c+e.expires_in),tokenType:C,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,r,n){await this.browserStorage.setAccount(e,this.correlationId,n),this.browserStorage.removeAccountContext(jr.getAccountInfo(e),r)}cacheNativeTokens(e,r,n,a,A,c,p){const d=Ed(n,r.authority,e.id_token||"",r.clientId,a.tid||""),m=r.tokenType===tr.POP?Ke.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,g=p+m,y=this.generateScopes(e.scope,r.scope),b=kd(n,r.authority,A,r.clientId,a.tid||c,y.printScopes(),g,0,Cn,void 0,r.tokenType,void 0,r.keyId),R={idToken:d,accessToken:b};return this.nativeStorageManager.saveCacheRecord(R,this.correlationId,Ro(a),r.storeInCache)}getExpiresInValue(e,r){return e===tr.POP?Ke.SHR_NONCE_VALIDITY:(typeof r=="string"?parseInt(r,10):r)||0}addTelemetryFromNativeResponse(e){const r=this.getMATSFromResponse(e);return r?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:r.broker_version,matsAccountJoinOnStart:r.account_join_on_start,matsAccountJoinOnEnd:r.account_join_on_end,matsDeviceJoin:r.device_join,matsPromptBehavior:r.prompt_behavior,matsApiErrorCode:r.api_error_code,matsUiVisible:r.ui_visible,matsSilentCode:r.silent_code,matsSilentBiSubCode:r.silent_bi_sub_code,matsSilentMessage:r.silent_message,matsSilentStatus:r.silent_status,matsHttpStatus:r.http_status,matsHttpEventCount:r.http_event_count},this.correlationId),r):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const r=await this.getCanonicalAuthority(e),{scopes:n,...a}=e,A=new zr(n||[]);A.appendScopes(Ea);const c={...a,accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scope:A.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(c.signPopToken&&e.popKid)throw it(G1);if(this.handleExtraBrokerParams(c),c.extraParameters=c.extraParameters||{},c.extraParameters.telemetry=to.MATS_TELEMETRY,e.authenticationScheme===tr.POP){const p={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},d=new Ca(this.browserCrypto);let m;if(c.keyId)m=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:c.keyId})),c.signPopToken=!1;else{const g=await _e(d.generateCnf.bind(d),le.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(p,this.logger);m=g.reqCnfString,c.keyId=g.kid,c.signPopToken=!0}c.reqCnf=m}return this.addRequestSKUs(c),c}async getCanonicalAuthority(e){const r=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:r,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const n=new Vt(r);return n.validateAsUri(),n}getPrompt(e){switch(this.apiId){case Xt.ssoSilent:case Xt.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),an.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case an.NONE:case an.CONSENT:case an.LOGIN:case an.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),it(K1)}}handleExtraBrokerParams(e){var A;const r=e.extraParameters&&e.extraParameters.hasOwnProperty(Yc)&&e.extraParameters.hasOwnProperty(Jc)&&e.extraParameters.hasOwnProperty(vs);if(!e.embeddedClientId&&!r)return;let n="";const a=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,n=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[Jc],n=e.extraParameters[vs]),e.extraParameters={child_client_id:n,child_redirect_uri:a},(A=this.performanceClient)==null||A.addFields({embeddedClientId:n,embeddedRedirectUri:a},this.correlationId)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function nf(o,e,r,n,a){const A=w4({...o.auth,authority:e},r,n,a);if(Eh(A,{sku:Fn.MSAL_SKU,version:Bs,os:"",cpu:""}),o.auth.protocolMode!==Qn.OIDC&&kh(A,o.telemetry.application),r.platformBroker&&(NS(A),a.addFields({isPlatformAuthorizeRequest:!0},r.correlationId),r.authenticationScheme===tr.POP)){const c=new ni(n,a),p=new Ca(c);let d;r.popKid?d=c.encodeKid(r.popKid):d=(await _e(p.generateCnf.bind(p),le.PopTokenGenerateCnf,n,a,r.correlationId)(r,n)).reqCnfString,Fh(A,d)}return Bd(A,r.correlationId,a),A}async function of(o,e,r,n,a){if(!r.codeChallenge)throw ar(gh);const A=await _e(nf,le.GetStandardParams,n,a,r.correlationId)(o,e,r,n,a);return wh(A,rh.CODE),jh(A,r.codeChallenge,Ke.S256_CODE_CHALLENGE_METHOD),Pi(A,r.extraQueryParameters||{}),Lh(e,A,o.auth.encodeExtraQueryParams,r.extraQueryParameters)}async function sf(o,e,r,n,a,A){if(!n.earJwk)throw it(Hh);const c=await nf(e,r,n,a,A);wh(c,rh.IDTOKEN_TOKEN_REFRESHTOKEN),JS(c,n.earJwk),jh(c,n.codeChallenge,Ke.S256_CODE_CHALLENGE_METHOD);const p=new Map;Pi(p,n.extraQueryParameters||{});const d=Lh(r,p,e.auth.encodeExtraQueryParams,n.extraQueryParameters);return gw(o,d,c)}async function af(o,e,r,n,a,A){const c=await nf(e,r,n,a,A);wh(c,rh.CODE),jh(c,n.codeChallenge,n.codeChallengeMethod||Ke.S256_CODE_CHALLENGE_METHOD),XS(c,n.authorizePostBodyParameters||{});const p=new Map;Pi(p,n.extraQueryParameters||{});const d=Lh(r,p,e.auth.encodeExtraQueryParams,n.extraQueryParameters);return gw(o,d,c)}function gw(o,e,r){const n=o.createElement("form");return n.method="post",n.action=e,r.forEach((a,A)=>{const c=o.createElement("input");c.hidden=!0,c.name=A,c.value=a,n.appendChild(c)}),o.body.appendChild(n),n}async function hw(o,e,r,n,a,A,c,p,d,m){if(p.verbose("Account id found, calling WAM for token"),!m)throw it(Kh);const g=new ni(p,d),y=new Rc(n,a,g,p,c,n.system.navigationClient,r,d,m,e,A,o.correlationId),{userRequestState:b}=ja.parseRequestState(g,o.state);return _e(y.acquireToken.bind(y),le.NativeInteractionClientAcquireToken,p,d,o.correlationId)({...o,state:b,prompt:void 0})}async function ya(o,e,r,n,a,A,c,p,d,m,g,y){if(Fo.removeThrottle(c,a.auth.clientId,o),e.accountId)return _e(hw,le.HandleResponsePlatformBroker,m,g,o.correlationId)(o,e.accountId,n,a,c,p,d,m,g,y);const b={...o,code:e.code||"",codeVerifier:r},R=new dw(A,c,b,m,g);return await _e(R.handleCodeResponse.bind(R),le.HandleCodeResponse,m,g,o.correlationId)(e,o)}async function Af(o,e,r,n,a,A,c,p,d,m,g){if(Fo.removeThrottle(A,n.auth.clientId,o),f1(e,o.state),!e.ear_jwe)throw it(b1);if(!o.earJwk)throw it(Hh);const y=JSON.parse(await _e(J4,le.DecryptEarResponse,d,m,o.correlationId)(o.earJwk,e.ear_jwe));if(y.accountId)return _e(hw,le.HandleResponsePlatformBroker,d,m,o.correlationId)(o,y.accountId,r,n,A,c,p,d,m,g);const b=new Cs(n.auth.clientId,A,new ni(d,m),d,null,null,m);b.validateTokenResponse(y);const R={code:"",state:o.state,nonce:o.nonce,client_info:y.client_info,cloud_graph_host_name:y.cloud_graph_host_name,cloud_instance_host_name:y.cloud_instance_host_name,cloud_instance_name:y.cloud_instance_name,msgraph_host:y.msgraph_host};return await _e(b.handleServerTokenResponse.bind(b),le.HandleServerTokenResponse,d,m,o.correlationId)(y,a,Rn(),o,R,void 0,void 0,void 0,void 0)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const zI=32;async function Is(o,e,r){o.addQueueMeasurement(le.GeneratePkceCodes,r);const n=zn(KI,le.GenerateCodeVerifier,e,o,r)(o,e,r),a=await _e(WI,le.GenerateCodeChallengeFromVerifier,e,o,r)(n,o,e,r);return{verifier:n,challenge:a}}function KI(o,e,r){try{const n=new Uint8Array(zI);return zn(W4,le.GetRandomValues,e,o,r)(n),_i(n)}catch{throw it(Nh)}}async function WI(o,e,r,n){e.addQueueMeasurement(le.GenerateCodeChallengeFromVerifier,n);try{const a=await _e(Z1,le.Sha256Digest,r,e,n)(o,e,n);return _i(new Uint8Array(a))}catch{throw it(Nh)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class id{constructor(e,r,n,a){this.logger=e,this.handshakeTimeoutMs=r,this.extensionId=a,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement(le.NativeMessageHandlerHandshake),this.platformAuthType=to.PLATFORM_EXTENSION_PROVIDER}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const r={method:dA.GetToken,request:e},n={channel:to.CHANNEL_ID,extensionId:this.extensionId,responseId:Co(),body:r};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(n)}`),this.messageChannel.port1.postMessage(n);const a=await new Promise((c,p)=>{this.resolvers.set(n.responseId,{resolve:c,reject:p})});return this.validatePlatformBrokerResponse(a)}static async createProvider(e,r,n){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const a=new id(e,r,n,to.PREFERRED_EXTENSION_ID);return await a.sendHandshakeRequest(),a}catch{const A=new id(e,r,n);return await A.sendHandshakeRequest(),A}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:to.CHANNEL_ID,extensionId:this.extensionId,responseId:Co(),body:{method:dA.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=r=>{this.onChannelMessage(r)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((r,n)=>{this.handshakeResolvers.set(e.responseId,{resolve:r,reject:n}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),n(it(_1)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const r=e.data;if(!(!r.channel||r.channel!==to.CHANNEL_ID)&&!(r.extensionId&&r.extensionId!==this.extensionId)&&r.body.method===dA.HandshakeRequest){const n=this.handshakeResolvers.get(r.responseId);if(!n){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${r.responseId}`);return}this.logger.verbose(r.extensionId?`Extension with id: ${r.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),n.reject(it(z1))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const r=e.data,n=this.resolvers.get(r.responseId),a=this.handshakeResolvers.get(r.responseId);try{const A=r.body.method;if(A===dA.Response){if(!n)return;const c=r.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(c)}`),c.status!=="Success")n.reject(od(c.code,c.description,c.ext));else if(c.result)c.result.code&&c.result.description?n.reject(od(c.result.code,c.result.description,c.result.ext)):n.resolve(c.result);else throw hg(zc,"Event does not contain result.");this.resolvers.delete(r.responseId)}else if(A===dA.HandshakeResponse){if(!a){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${r.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=r.extensionId,this.extensionVersion=r.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),a.resolve(),this.handshakeResolvers.delete(r.responseId)}}catch(A){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${A}`),this.logger.errorPii(`Unable to parse ${e}`),n?n.reject(A):a&&a.reject(A)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw hg(zc,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){var e;return this.getExtensionId()===to.PREFERRED_EXTENSION_ID?"chrome":(e=this.getExtensionId())!=null&&e.length?"unknown":void 0}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class lf{constructor(e,r,n){this.logger=e,this.performanceClient=r,this.correlationId=n,this.platformAuthType=to.PLATFORM_DOM_PROVIDER}static async createProvider(e,r,n){var a;if(e.trace("PlatformAuthDOMHandler: createProvider called"),(a=window.navigator)!=null&&a.platformAuthentication){const A=await window.navigator.platformAuthentication.getSupportedContracts(to.MICROSOFT_ENTRA_BROKERID);if(A!=null&&A.includes(to.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new lf(e,r,n)}}getExtensionId(){return to.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return to.DOM_API_NAME}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const r=this.initializePlatformDOMRequest(e),n=await window.navigator.platformAuthentication.executeGetToken(r);return this.validatePlatformBrokerResponse(n)}catch(r){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),r}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:r,clientId:n,authority:a,scope:A,redirectUri:c,correlationId:p,state:d,storeInCache:m,embeddedClientId:g,extraParameters:y,...b}=e,R=this.getDOMExtraParams(b);return{accountId:r,brokerId:this.getExtensionId(),authority:a,clientId:n,correlationId:p||this.correlationId,extraParameters:{...y,...R},isSecurityTokenService:!1,redirectUri:c,scope:A,state:d,storeInCache:m,embeddedClientId:g}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const r=e;if(r.isSuccess===!1&&r.error&&r.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),od(r.error.code,r.error.description,{error:parseInt(r.error.errorCode),protocol_error:r.error.protocolError,status:r.error.status,properties:r.error.properties})}}throw hg(zc,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((a,[A,c])=>(a[A]=String(c),a),{})}}}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function GI(o,e,r,n){o.trace("getPlatformAuthProvider called",r);const a=$I();o.trace("Has client allowed platform auth via DOM API: "+a);let A;try{a&&(A=await lf.createProvider(o,e,r)),A||(o.trace("Platform auth via DOM API not available, checking for extension"),A=await id.createProvider(o,n||aw,e))}catch(c){o.trace("Platform auth not available",c)}return A}function $I(){let o;try{return o=window[Jr.SessionStorage],(o==null?void 0:o.getItem(uI))==="true"}catch{return!1}}function _A(o,e,r,n){if(e.trace("isPlatformAuthAllowed called"),!o.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!r)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(n)switch(n){case tr.BEARER:case tr.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}/*! @azure/msal-browser v4.26.2 2025-11-19 */class VI extends Fa{constructor(e,r,n,a,A,c,p,d,m,g){super(e,r,n,a,A,c,p,m,g),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=d,this.eventHandler=A}acquireToken(e,r){let n;try{if(n={popupName:this.generatePopupName(e.scopes||Ea,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,n,r);{const A={...e,httpMethod:cw(e,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),n.popup=this.openSizedPopup("about:blank",n),this.acquireTokenPopupAsync(A,n,r)}}catch(a){return Promise.reject(a)}}logout(e){try{this.logger.verbose("logoutPopup called");const r=this.initializeLogoutRequest(e),n={popupName:this.generateLogoutPopupName(r),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},a=e&&e.authority,A=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(r,n,a,A)):(this.logger.verbose("asyncPopup set to false, opening popup"),n.popup=this.openSizedPopup("about:blank",n),this.logoutPopupAsync(r,n,a,A))}catch(r){return Promise.reject(r)}}async acquireTokenPopupAsync(e,r,n){this.logger.verbose("acquireTokenPopupAsync called");const a=await _e(this.initializeAuthorizationRequest.bind(this),le.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,It.Popup);r.popup&&sw(a.authority);const A=_A(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return a.platformBroker=A,this.config.auth.protocolMode===Qn.EAR?this.executeEarFlow(a,r,n):this.executeCodeFlow(a,r,n)}async executeCodeFlow(e,r,n){var d;const a=e.correlationId,A=this.initializeServerTelemetryManager(Xt.acquireTokenPopup),c=n||await _e(Is,le.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),p={...e,codeChallenge:c.challenge};try{const m=await _e(this.createAuthCodeClient.bind(this),le.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,a)({serverTelemetryManager:A,requestAuthority:p.authority,requestAzureCloudOptions:p.azureCloudOptions,requestExtraQueryParameters:p.extraQueryParameters,account:p.account});if(p.httpMethod===ps.POST)return await this.executeCodeFlowWithPost(p,r,m,c.verifier);{const g=await _e(of,le.GetAuthCodeUrl,this.logger,this.performanceClient,a)(this.config,m.authority,p,this.logger,this.performanceClient),y=this.initiateAuthRequest(g,r);this.eventHandler.emitEvent(pt.POPUP_OPENED,It.Popup,{popupWindow:y},null);const b=await this.monitorPopupForHash(y,r.popupWindowParent),R=zn(kA,le.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(b,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await _e(ya,le.HandleResponseCode,this.logger,this.performanceClient,a)(e,R,c.verifier,Xt.acquireTokenPopup,this.config,m,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(m){throw(d=r.popup)==null||d.close(),m instanceof nr&&(m.setCorrelationId(this.correlationId),A.cacheFailedRequest(m)),m}}async executeEarFlow(e,r,n){const a=e.correlationId,A=await _e(this.getDiscoveredAuthority.bind(this),le.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),c=await _e(Yh,le.GenerateEarKey,this.logger,this.performanceClient,a)(),p=n||await _e(Is,le.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),d={...e,earJwk:c,codeChallenge:p.challenge},m=r.popup||this.openPopup("about:blank",r);(await sf(m.document,this.config,A,d,this.logger,this.performanceClient)).submit();const y=await _e(this.monitorPopupForHash.bind(this),le.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,a)(m,r.popupWindowParent),b=zn(kA,le.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(!b.ear_jwe&&b.code){const R=await _e(this.createAuthCodeClient.bind(this),le.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,a)({serverTelemetryManager:this.initializeServerTelemetryManager(Xt.acquireTokenPopup),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:A});return _e(ya,le.HandleResponseCode,this.logger,this.performanceClient,a)(d,b,p.verifier,Xt.acquireTokenPopup,this.config,R,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return _e(Af,le.HandleResponseEar,this.logger,this.performanceClient,a)(d,b,Xt.acquireTokenPopup,this.config,A,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,r,n,a){const A=e.correlationId,c=await _e(this.getDiscoveredAuthority.bind(this),le.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,A)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),p=r.popup||this.openPopup("about:blank",r);(await af(p.document,this.config,c,e,this.logger,this.performanceClient)).submit();const m=await _e(this.monitorPopupForHash.bind(this),le.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,A)(p,r.popupWindowParent),g=zn(kA,le.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(m,this.config.auth.OIDCOptions.serverResponseType,this.logger);return _e(ya,le.HandleResponseCode,this.logger,this.performanceClient,A)(e,g,a,Xt.acquireTokenPopup,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,r,n,a){var c,p,d;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(pt.LOGOUT_START,It.Popup,e);const A=this.initializeServerTelemetryManager(Xt.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,e.account);const m=await _e(this.createAuthCodeClient.bind(this),le.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:A,requestAuthority:n,account:e.account||void 0});try{m.authority.endSessionEndpoint}catch{if((c=e.account)!=null&&c.homeAccountId&&e.postLogoutRedirectUri&&m.authority.protocolMode===Qn.OIDC){if(this.eventHandler.emitEvent(pt.LOGOUT_SUCCESS,It.Popup,e),a){const b={apiId:Xt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},R=Vt.getAbsoluteUrl(a,ei());await this.navigationClient.navigateInternal(R,b)}(p=r.popup)==null||p.close();return}}const g=m.getLogoutUri(e);this.eventHandler.emitEvent(pt.LOGOUT_SUCCESS,It.Popup,e);const y=this.openPopup(g,r);if(this.eventHandler.emitEvent(pt.POPUP_OPENED,It.Popup,{popupWindow:y},null),await this.monitorPopupForHash(y,r.popupWindowParent).catch(()=>{}),a){const b={apiId:Xt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},R=Vt.getAbsoluteUrl(a,ei());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${R}`),await this.navigationClient.navigateInternal(R,b)}else this.logger.verbose("No main window navigation requested")}catch(m){throw(d=r.popup)==null||d.close(),m instanceof nr&&(m.setCorrelationId(this.correlationId),A.cacheFailedRequest(m)),this.eventHandler.emitEvent(pt.LOGOUT_FAILURE,It.Popup,null,m),this.eventHandler.emitEvent(pt.LOGOUT_END,It.Popup),m}this.eventHandler.emitEvent(pt.LOGOUT_END,It.Popup)}initiateAuthRequest(e,r){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,r);throw this.logger.error("Navigate url is empty"),it(Qd)}monitorPopupForHash(e,r){return new Promise((n,a)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const A=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(A),a(it(HA));return}let c="";try{c=e.location.href}catch{}if(!c||c==="about:blank")return;clearInterval(A);let p="";const d=this.config.auth.OIDCOptions.serverResponseType;e&&(d===wd.QUERY?p=e.location.search:p=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),n(p)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,r)})}openPopup(e,r){try{let n;if(r.popup?(n=r.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),n.location.assign(e)):typeof r.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),n=this.openSizedPopup(e,r)),!n)throw it(E1);return n.focus&&n.focus(),this.currentWindow=n,r.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),n}catch(n){throw this.logger.error("error opening popup "+n.message),it(I1)}}openSizedPopup(e,{popupName:r,popupWindowAttributes:n,popupWindowParent:a}){var R,C,Q,S;const A=a.screenLeft?a.screenLeft:a.screenX,c=a.screenTop?a.screenTop:a.screenY,p=a.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d=a.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let m=(R=n.popupSize)==null?void 0:R.width,g=(C=n.popupSize)==null?void 0:C.height,y=(Q=n.popupPosition)==null?void 0:Q.top,b=(S=n.popupPosition)==null?void 0:S.left;return(!m||m<0||m>p)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),m=Fn.POPUP_WIDTH),(!g||g<0||g>d)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),g=Fn.POPUP_HEIGHT),(!y||y<0||y>d)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),y=Math.max(0,d/2-Fn.POPUP_HEIGHT/2+c)),(!b||b<0||b>p)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),b=Math.max(0,p/2-Fn.POPUP_WIDTH/2+A)),a.open(e,r,`width=${m}, height=${g}, top=${y}, left=${b}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,r){e.close(),r.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,r){return`${Fn.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${r}.${this.correlationId}`}generateLogoutPopupName(e){const r=e.account&&e.account.homeAccountId;return`${Fn.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${r}.${this.correlationId}`}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function YI(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const o=window.performance.getEntriesByType("navigation"),e=o.length?o[0]:void 0;return e==null?void 0:e.type}class JI extends Fa{constructor(e,r,n,a,A,c,p,d,m,g){super(e,r,n,a,A,c,p,m,g),this.nativeStorage=d}async acquireToken(e){const r=await _e(this.initializeAuthorizationRequest.bind(this),le.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,It.Redirect);r.platformBroker=_A(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const n=A=>{A.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(pt.RESTORE_FROM_BFCACHE,It.Redirect))},a=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${a}`),this.browserStorage.setTemporaryCache(Mr.ORIGIN_URI,a,!0),window.addEventListener("pageshow",n);try{this.config.auth.protocolMode===Qn.EAR?await this.executeEarFlow(r):await this.executeCodeFlow(r,e.onRedirectNavigate)}catch(A){throw A instanceof nr&&A.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",n),A}}async executeCodeFlow(e,r){const n=e.correlationId,a=this.initializeServerTelemetryManager(Xt.acquireTokenRedirect),A=await _e(Is,le.GeneratePkceCodes,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),c={...e,codeChallenge:A.challenge};this.browserStorage.cacheAuthorizeRequest(c,A.verifier);try{if(c.httpMethod===ps.POST)return await this.executeCodeFlowWithPost(c);{const p=await _e(this.createAuthCodeClient.bind(this),le.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:c.authority,requestAzureCloudOptions:c.azureCloudOptions,requestExtraQueryParameters:c.extraQueryParameters,account:c.account}),d=await _e(of,le.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,p.authority,c,this.logger,this.performanceClient);return await this.initiateAuthRequest(d,r)}}catch(p){throw p instanceof nr&&(p.setCorrelationId(this.correlationId),a.cacheFailedRequest(p)),p}}async executeEarFlow(e){const r=e.correlationId,n=await _e(this.getDiscoveredAuthority.bind(this),le.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=await _e(Yh,le.GenerateEarKey,this.logger,this.performanceClient,r)(),A=await _e(Is,le.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),c={...e,earJwk:a,codeChallenge:A.challenge};return this.browserStorage.cacheAuthorizeRequest(c,A.verifier),(await sf(document,this.config,n,c,this.logger,this.performanceClient)).submit(),new Promise((d,m)=>{setTimeout(()=>{m(it(rd,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const r=e.correlationId,n=await _e(this.getDiscoveredAuthority.bind(this),le.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(await af(document,this.config,n,e,this.logger,this.performanceClient)).submit(),new Promise((A,c)=>{setTimeout(()=>{c(it(rd,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e="",r,n,a){const A=this.initializeServerTelemetryManager(Xt.handleRedirectPromise);try{const[c,p]=this.getRedirectResponse(e||"");if(!c)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),YI()!=="back_forward"?a.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const d=this.browserStorage.getTemporaryCache(Mr.ORIGIN_URI,!0)||Ke.EMPTY_STRING,m=sx(d),g=sx(window.location.href);if(m===g&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),d.indexOf("#")>-1&&q4(d),await this.handleResponse(c,r,n,A);if(this.config.auth.navigateToLoginRequestUrl){if(!qh()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Mr.URL_HASH,p,!0);const y={apiId:Xt.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let b=!0;if(!d||d==="null"){const R=eI();this.browserStorage.setTemporaryCache(Mr.ORIGIN_URI,R,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),b=await this.navigationClient.navigateInternal(R,y)}else this.logger.verbose(`Navigating to loginRequestUrl: ${d}`),b=await this.navigationClient.navigateInternal(d,y);if(!b)return await this.handleResponse(c,r,n,A)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(c,r,n,A);return null}catch(c){throw c instanceof nr&&(c.setCorrelationId(this.correlationId),A.cacheFailedRequest(c)),c}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let r=e;r||(this.config.auth.OIDCOptions.serverResponseType===wd.QUERY?r=window.location.search:r=window.location.hash);let n=Gc(r);if(n){try{UI(n,this.browserCrypto,It.Redirect)}catch(A){return A instanceof nr&&this.logger.error(`Interaction type validation failed due to ${A.errorCode}: ${A.errorMessage}`),[null,""]}return nw(window),this.logger.verbose("Hash contains known properties, returning response hash"),[n,r]}const a=this.browserStorage.getTemporaryCache(Mr.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Mr.URL_HASH)),a&&(n=Gc(a),n)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[n,a]):[null,""]}async handleResponse(e,r,n,a){if(!e.state)throw it(Oh);if(e.ear_jwe){const p=await _e(this.getDiscoveredAuthority.bind(this),le.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r.correlationId)({requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account});return _e(Af,le.HandleResponseEar,this.logger,this.performanceClient,r.correlationId)(r,e,Xt.acquireTokenRedirect,this.config,p,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const c=await _e(this.createAuthCodeClient.bind(this),le.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:r.authority});return _e(ya,le.HandleResponseCode,this.logger,this.performanceClient,r.correlationId)(r,e,n,Xt.acquireTokenRedirect,this.config,c,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,r){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const n={apiId:Xt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=r||this.config.auth.onRedirectNavigate;if(typeof a=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),a(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(e,n);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(e,n);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),it(Qd)}async logout(e){var a;this.logger.verbose("logoutRedirect called");const r=this.initializeLogoutRequest(e),n=this.initializeServerTelemetryManager(Xt.logout);try{this.eventHandler.emitEvent(pt.LOGOUT_START,It.Redirect,e),await this.clearCacheOnLogout(this.correlationId,r.account);const A={apiId:Xt.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=await _e(this.createAuthCodeClient.bind(this),le.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(c.authority.protocolMode===Qn.OIDC)try{c.authority.endSessionEndpoint}catch{if((a=r.account)!=null&&a.homeAccountId){this.eventHandler.emitEvent(pt.LOGOUT_SUCCESS,It.Redirect,r);return}}const p=c.getLogoutUri(r);if(this.eventHandler.emitEvent(pt.LOGOUT_SUCCESS,It.Redirect,r),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(p)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,ji.SIGNOUT),await this.navigationClient.navigateExternal(p,A);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,ji.SIGNOUT),await this.navigationClient.navigateExternal(p,A);return}}catch(A){throw A instanceof nr&&(A.setCorrelationId(this.correlationId),n.cacheFailedRequest(A)),this.eventHandler.emitEvent(pt.LOGOUT_FAILURE,It.Redirect,null,A),this.eventHandler.emitEvent(pt.LOGOUT_END,It.Redirect),A}this.eventHandler.emitEvent(pt.LOGOUT_END,It.Redirect)}getRedirectStartPage(e){const r=e||window.location.href;return Vt.getAbsoluteUrl(r,ei())}}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function XI(o,e,r,n,a){if(e.addQueueMeasurement(le.SilentHandlerInitiateAuthRequest,n),!o)throw r.info("Navigate url is empty"),it(Qd);return a?_e(eE,le.SilentHandlerLoadFrame,r,e,n)(o,a,e,n):zn(tE,le.SilentHandlerLoadFrameSync,r,e,n)(o)}async function qI(o,e,r,n,a){const A=Pd();if(!A.contentDocument)throw"No document associated with iframe!";return(await af(A.contentDocument,o,e,r,n,a)).submit(),A}async function ZI(o,e,r,n,a){const A=Pd();if(!A.contentDocument)throw"No document associated with iframe!";return(await sf(A.contentDocument,o,e,r,n,a)).submit(),A}async function Dx(o,e,r,n,a,A,c){return n.addQueueMeasurement(le.SilentHandlerMonitorIframeForHash,A),new Promise((p,d)=>{e<Eg&&a.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Eg}ms). This may result in timeouts.`);const m=window.setTimeout(()=>{window.clearInterval(g),d(it(k1))},e),g=window.setInterval(()=>{let y="";const b=o.contentWindow;try{y=b?b.location.href:""}catch{}if(!y||y==="about:blank")return;let R="";b&&(c===wd.QUERY?R=b.location.search:R=b.location.hash),window.clearTimeout(m),window.clearInterval(g),p(R)},r)}).finally(()=>{zn(rE,le.RemoveHiddenIframe,a,n,A)(o)})}function eE(o,e,r,n){return r.addQueueMeasurement(le.SilentHandlerLoadFrame,n),new Promise((a,A)=>{const c=Pd();window.setTimeout(()=>{if(!c){A("Unable to load iframe");return}c.src=o,a(c)},e)})}function tE(o){const e=Pd();return e.src=o,e}function Pd(){const o=document.createElement("iframe");return o.className="msalSilentIframe",o.style.visibility="hidden",o.style.position="absolute",o.style.width=o.style.height="0",o.style.border="0",o.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),o.setAttribute("allow","local-network-access *"),document.body.appendChild(o),o}function rE(o){document.body===o.parentNode&&document.body.removeChild(o)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class nE extends Fa{constructor(e,r,n,a,A,c,p,d,m,g,y){super(e,r,n,a,A,c,d,g,y),this.apiId=p,this.nativeStorage=m}async acquireToken(e){this.performanceClient.addQueueMeasurement(le.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const r={...e};r.prompt?r.prompt!==an.NONE&&r.prompt!==an.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${r.prompt} with ${an.NONE}`),r.prompt=an.NONE):r.prompt=an.NONE;const n=await _e(this.initializeAuthorizationRequest.bind(this),le.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(r,It.Silent);return n.platformBroker=_A(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme),sw(n.authority),this.config.auth.protocolMode===Qn.EAR?this.executeEarFlow(n):this.executeCodeFlow(n)}async executeCodeFlow(e){let r;const n=this.initializeServerTelemetryManager(this.apiId);try{return r=await _e(this.createAuthCodeClient.bind(this),le.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await _e(this.silentTokenHelper.bind(this),le.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(r,e)}catch(a){if(a instanceof nr&&(a.setCorrelationId(this.correlationId),n.cacheFailedRequest(a)),!r||!(a instanceof nr)||a.errorCode!==Fn.INVALID_GRANT_ERROR)throw a;return this.performanceClient.addFields({retryError:a.errorCode},this.correlationId),await _e(this.silentTokenHelper.bind(this),le.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(r,e)}}async executeEarFlow(e){const r=e.correlationId,n=await _e(this.getDiscoveredAuthority.bind(this),le.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=await _e(Yh,le.GenerateEarKey,this.logger,this.performanceClient,r)(),A=await _e(Is,le.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),c={...e,earJwk:a,codeChallenge:A.challenge},p=await _e(ZI,le.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,n,c,this.logger,this.performanceClient),d=this.config.auth.OIDCOptions.serverResponseType,m=await _e(Dx,le.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(p,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,d),g=zn(kA,le.DeserializeResponse,this.logger,this.performanceClient,r)(m,d,this.logger);if(!g.ear_jwe&&g.code){const y=await _e(this.createAuthCodeClient.bind(this),le.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,r)({serverTelemetryManager:this.initializeServerTelemetryManager(this.apiId),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:n});return _e(ya,le.HandleResponseCode,this.logger,this.performanceClient,r)(c,g,A.verifier,this.apiId,this.config,y,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return _e(Af,le.HandleResponseEar,this.logger,this.performanceClient,r)(c,g,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(it(Rd))}async silentTokenHelper(e,r){const n=r.correlationId;this.performanceClient.addQueueMeasurement(le.SilentIframeClientTokenHelper,n);const a=await _e(Is,le.GeneratePkceCodes,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),A={...r,codeChallenge:a.challenge};let c;if(r.httpMethod===ps.POST)c=await _e(qI,le.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,n)(this.config,e.authority,A,this.logger,this.performanceClient);else{const g=await _e(of,le.GetAuthCodeUrl,this.logger,this.performanceClient,n)(this.config,e.authority,A,this.logger,this.performanceClient);c=await _e(XI,le.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,n)(g,this.performanceClient,this.logger,n,this.config.system.navigateFrameWait)}const p=this.config.auth.OIDCOptions.serverResponseType,d=await _e(Dx,le.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,n)(c,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,p),m=zn(kA,le.DeserializeResponse,this.logger,this.performanceClient,n)(d,p,this.logger);return _e(ya,le.HandleResponseCode,this.logger,this.performanceClient,n)(r,m,a.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class oE extends Fa{async acquireToken(e){this.performanceClient.addQueueMeasurement(le.SilentRefreshClientAcquireToken,e.correlationId);const r=await _e(rf,le.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),n={...e,...r};e.redirectUri&&(n.redirectUri=this.getRedirectUri(e.redirectUri));const a=this.initializeServerTelemetryManager(Xt.acquireTokenSilent_silentFlow),A=await this.createRefreshTokenClient({serverTelemetryManager:a,authorityUrl:n.authority,azureCloudOptions:n.azureCloudOptions,account:n.account});return _e(A.acquireTokenByRefreshToken.bind(A),le.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(n).catch(c=>{throw c.setCorrelationId(this.correlationId),a.cacheFailedRequest(c),c})}logout(){return Promise.reject(it(Rd))}async createRefreshTokenClient(e){const r=await _e(this.getClientConfiguration.bind(this),le.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new x4(r,this.performanceClient)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class iE{constructor(e,r,n,a){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=r,this.logger=n,this.cryptoObj=a}async loadExternalTokens(e,r,n){if(!this.isBrowserEnvironment)throw it(Md);const a=e.correlationId||Co(),A=r.id_token?Qo(r.id_token,Cn):void 0,c=Ro(A||{}),p={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},d=e.authority?new hn(hn.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,p,this.logger,e.correlationId||Co()):void 0,m=await this.loadAccount(e,n.clientInfo||r.client_info||"",a,A,d),g=await this.loadIdToken(r,m.homeAccountId,m.environment,m.realm,a,c),y=await this.loadAccessToken(e,r,m.homeAccountId,m.environment,m.realm,n,a,c),b=await this.loadRefreshToken(r,m.homeAccountId,m.environment,a,c);return this.generateAuthenticationResult(e,{account:m,idToken:g,accessToken:y,refreshToken:b},A,d)}async loadAccount(e,r,n,a,A){if(this.logger.verbose("TokenCache - loading account"),e.account){const m=jr.createFromAccountInfo(e.account);return await this.storage.setAccount(m,n,Ro(a||{})),m}else if(!A||!r&&!a)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),it(D1);const c=jr.generateHomeAccountId(r,A.authorityType,this.logger,this.cryptoObj,a),p=a==null?void 0:a.tid,d=Mh(this.storage,A,c,Cn,n,a,r,A.hostnameAndPort,p,void 0,void 0,this.logger);return await this.storage.setAccount(d,n,Ro(a||{})),d}async loadIdToken(e,r,n,a,A,c){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const p=Ed(r,n,e.id_token,this.config.auth.clientId,a);return await this.storage.setIdTokenCredential(p,A,c),p}async loadAccessToken(e,r,n,a,A,c,p,d){if(r.access_token)if(r.expires_in){if(!r.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const m=r.scope?zr.fromString(r.scope):new zr(e.scopes),g=c.expiresOn||r.expires_in+Rn(),y=c.extendedExpiresOn||(r.ext_expires_in||r.expires_in)+Rn(),b=kd(n,a,r.access_token,this.config.auth.clientId,A,m.printScopes(),g,y,Cn);return await this.storage.setAccessTokenCredential(b,p,d),b}async loadRefreshToken(e,r,n,a,A){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const c=l1(r,n,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(c,a,A),c}generateAuthenticationResult(e,r,n,a){var g,y,b;let A="",c=[],p=null,d;r!=null&&r.accessToken&&(A=r.accessToken.secret,c=zr.fromString(r.accessToken.target).asArray(),p=fa(r.accessToken.expiresOn),d=fa(r.accessToken.extendedExpiresOn));const m=r.account;return{authority:a?a.canonicalAuthority:"",uniqueId:r.account.localAccountId,tenantId:r.account.realm,scopes:c,account:jr.getAccountInfo(m),idToken:((g=r.idToken)==null?void 0:g.secret)||"",idTokenClaims:n||{},accessToken:A,fromCache:!0,expiresOn:p,correlationId:e.correlationId||"",requestId:"",extExpiresOn:d,familyId:((y=r.refreshToken)==null?void 0:y.familyId)||"",tokenType:((b=r==null?void 0:r.accessToken)==null?void 0:b.tokenType)||"",state:e.state||"",cloudGraphHostName:m.cloudGraphHostName||"",msGraphHost:m.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class sE extends h1{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class aE extends Fa{constructor(e,r,n,a,A,c,p,d,m,g){super(e,r,n,a,A,c,d,m,g),this.apiId=p}async acquireToken(e){if(!e.code)throw it(P1);const r=await _e(this.initializeAuthorizationRequest.bind(this),le.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,It.Silent),n=this.initializeServerTelemetryManager(this.apiId);try{const a={...r,code:e.code},A=await _e(this.getClientConfiguration.bind(this),le.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),c=new sE(A);this.logger.verbose("Auth code client created");const p=new dw(c,this.browserStorage,a,this.logger,this.performanceClient);return await _e(p.handleCodeResponseFromServer.bind(p),le.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},r,!1)}catch(a){throw a instanceof nr&&(a.setCorrelationId(this.correlationId),n.cacheFailedRequest(a)),a}}logout(){return Promise.reject(it(Rd))}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function AE(o,e,r){var c;const n=((c=window.msal)==null?void 0:c.clientIds)||[],a=n.length,A=n.filter(p=>p===o).length;A>1&&r.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:a,sameClientIdInstanceCount:A})}/*! @azure/msal-browser v4.26.2 2025-11-19 */function ic(o,e,r){try{Zh(o)}catch(n){throw e.end({success:!1},n,r),n}}class Nd{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new ni(this.logger,this.performanceClient):Kc,this.eventHandler=new jI(this.logger),this.browserStorage=this.isBrowserEnvironment?new jg(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,l4(this.config.auth)):bI(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const r={cacheLocation:Jr.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Jr.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new jg(this.config.auth.clientId,r,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new iE(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,r){const n=new Nd(e);return await n.initialize(r),n}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,r){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(pt.INITIALIZE_END);return}const n=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),a=this.config.system.allowPlatformBroker,A=this.performanceClient.startMeasurement(le.InitializeClientApplication,n);if(this.eventHandler.emitEvent(pt.INITIALIZE_START),!r)try{this.logMultipleInstances(A)}catch{}if(await _e(this.browserStorage.initialize.bind(this.browserStorage),le.InitializeCache,this.logger,this.performanceClient,n)(n),a)try{this.platformAuthProvider=await GI(this.logger,this.performanceClient,n,this.config.system.nativeBrokerHandshakeTimeout)}catch(c){this.logger.verbose(c)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),zn(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),le.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,n)(n)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n),this.initialized=!0,this.eventHandler.emitEvent(pt.INITIALIZE_END),A.end({allowPlatformBroker:a,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),iw(this.initialized),this.isBrowserEnvironment){const r=e||"";let n=this.redirectResponse.get(r);return typeof n>"u"?(n=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(r,n),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),n}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var d;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(((d=this.browserStorage.getInteractionInProgress())==null?void 0:d.type)===ji.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const n=this.getAllAccounts(),a=this.browserStorage.getCachedNativeRequest(),A=a&&this.platformAuthProvider&&!e;let c;this.eventHandler.emitEvent(pt.HANDLE_REDIRECT_START,It.Redirect);let p;try{if(A&&this.platformAuthProvider){c=this.performanceClient.startMeasurement(le.AcquireTokenRedirect,(a==null?void 0:a.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),c.add({isPlatformBrokerRequest:!0});const m=new Rc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Xt.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,a.accountId,this.nativeInternalStorage,a.correlationId);p=_e(m.handleRedirectPromise.bind(m),le.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,c.event.correlationId)(this.performanceClient,c.event.correlationId)}else{const[m,g]=this.browserStorage.getCachedRequest(),y=m.correlationId;c=this.performanceClient.startMeasurement(le.AcquireTokenRedirect,y),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const b=this.createRedirectClient(y);p=_e(b.handleRedirectPromise.bind(b),le.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,c.event.correlationId)(e,m,g,c)}}catch(m){throw this.browserStorage.resetRequestCache(),m}return p.then(m=>(m?(this.browserStorage.resetRequestCache(),n.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(pt.LOGIN_SUCCESS,It.Redirect,m),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_SUCCESS,It.Redirect,m),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),c.end({success:!0},void 0,m.account)):c.event.errorCode?c.end({success:!1},void 0):c.discard(),this.eventHandler.emitEvent(pt.HANDLE_REDIRECT_END,It.Redirect),m)).catch(m=>{this.browserStorage.resetRequestCache();const g=m;throw n.length>0?this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_FAILURE,It.Redirect,null,g):this.eventHandler.emitEvent(pt.LOGIN_FAILURE,It.Redirect,null,g),this.eventHandler.emitEvent(pt.HANDLE_REDIRECT_END,It.Redirect),c.end({success:!1},g),m})}async acquireTokenRedirect(e){const r=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",r);const n=this.performanceClient.startMeasurement(le.AcquireTokenPreRedirect,r);n.add({scenarioId:e.scenarioId});const a=e.onRedirectNavigate;if(a)e.onRedirectNavigate=c=>{const p=typeof a=="function"?a(c):void 0;return n.add({navigateCallbackResult:p!==!1}),n.event=n.end({success:!0},void 0,e.account)||n.event,p};else{const c=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=p=>{const d=typeof c=="function"?c(p):void 0;return n.add({navigateCallbackResult:d!==!1}),n.event=n.end({success:!0},void 0,e.account)||n.event,d}}const A=this.getAllAccounts().length>0;try{Ex(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,ji.SIGNIN),A?this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_START,It.Redirect,e):this.eventHandler.emitEvent(pt.LOGIN_START,It.Redirect,e);let c;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?c=new Rc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Xt.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,r).acquireTokenRedirect(e,n).catch(d=>{if(n.add({brokerErrorName:d.name,brokerErrorCode:d.errorCode}),d instanceof Uo&&ca(d))return this.platformAuthProvider=void 0,this.createRedirectClient(r).acquireToken(e);if(d instanceof vo)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(r).acquireToken(e);throw d}):c=this.createRedirectClient(r).acquireToken(e),await c}catch(c){throw this.browserStorage.resetRequestCache(),n.event.status===2?this.performanceClient.startMeasurement(le.AcquireTokenRedirect,r).end({success:!1},c,e.account):n.end({success:!1},c,e.account),A?this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_FAILURE,It.Redirect,null,c):this.eventHandler.emitEvent(pt.LOGIN_FAILURE,It.Redirect,null,c),c}}acquireTokenPopup(e){const r=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(le.AcquireTokenPopup,r);n.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",r),ic(this.initialized,n,e.account),this.browserStorage.setInteractionInProgress(!0,ji.SIGNIN)}catch(p){return Promise.reject(p)}const a=this.getAllAccounts();a.length>0?this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_START,It.Popup,e):this.eventHandler.emitEvent(pt.LOGIN_START,It.Popup,e);let A;const c=this.getPreGeneratedPkceCodes(r);return this.canUsePlatformBroker(e)?(n.add({isPlatformBrokerRequest:!0}),A=this.acquireTokenNative({...e,correlationId:r},Xt.acquireTokenPopup).then(p=>(n.end({success:!0},void 0,p.account),p)).catch(p=>{if(n.add({brokerErrorName:p.name,brokerErrorCode:p.errorCode}),p instanceof Uo&&ca(p))return this.platformAuthProvider=void 0,this.createPopupClient(r).acquireToken(e,c);if(p instanceof vo)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(r).acquireToken(e,c);throw p})):A=this.createPopupClient(r).acquireToken(e,c),A.then(p=>(a.length<this.getAllAccounts().length?this.eventHandler.emitEvent(pt.LOGIN_SUCCESS,It.Popup,p):this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_SUCCESS,It.Popup,p),n.end({success:!0,accessTokenSize:p.accessToken.length,idTokenSize:p.idToken.length},void 0,p.account),p)).catch(p=>(a.length>0?this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_FAILURE,It.Popup,null,p):this.eventHandler.emitEvent(pt.LOGIN_FAILURE,It.Popup,null,p),n.end({success:!1},p,e.account),Promise.reject(p))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var A,c,p;const r=this.getRequestCorrelationId(e),n={...e,prompt:e.prompt,correlationId:r};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(le.SsoSilent,r),(A=this.ssoSilentMeasurement)==null||A.add({scenarioId:e.scenarioId}),ic(this.initialized,this.ssoSilentMeasurement,e.account),(c=this.ssoSilentMeasurement)==null||c.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",r),this.eventHandler.emitEvent(pt.SSO_SILENT_START,It.Silent,n);let a;return this.canUsePlatformBroker(n)?((p=this.ssoSilentMeasurement)==null||p.add({isPlatformBrokerRequest:!0}),a=this.acquireTokenNative(n,Xt.ssoSilent).catch(d=>{var m;if((m=this.ssoSilentMeasurement)==null||m.add({brokerErrorName:d.name,brokerErrorCode:d.errorCode}),d instanceof Uo&&ca(d))return this.platformAuthProvider=void 0,this.createSilentIframeClient(n.correlationId).acquireToken(n);throw d})):a=this.createSilentIframeClient(n.correlationId).acquireToken(n),a.then(d=>{var m;return this.eventHandler.emitEvent(pt.SSO_SILENT_SUCCESS,It.Silent,d),(m=this.ssoSilentMeasurement)==null||m.end({success:!0,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length},void 0,d.account),d}).catch(d=>{var m;throw this.eventHandler.emitEvent(pt.SSO_SILENT_FAILURE,It.Silent,null,d),(m=this.ssoSilentMeasurement)==null||m.end({success:!1},d,e.account),d}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const r=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",r);const n=this.performanceClient.startMeasurement(le.AcquireTokenByCode,r);ic(this.initialized,n),this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_BY_CODE_START,It.Silent,e),n.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw it(H1);if(e.code){const a=e.code;let A=this.hybridAuthCodeResponses.get(a);return A?(this.logger.verbose("Existing acquireTokenByCode request found",r),n.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",r),A=this.acquireTokenByCodeAsync({...e,correlationId:r}).then(c=>(this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_BY_CODE_SUCCESS,It.Silent,c),this.hybridAuthCodeResponses.delete(a),n.end({success:!0,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length},void 0,c.account),c)).catch(c=>{throw this.hybridAuthCodeResponses.delete(a),this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_BY_CODE_FAILURE,It.Silent,null,c),n.end({success:!1},c),c}),this.hybridAuthCodeResponses.set(a,A)),await A}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){n.add({isPlatformBrokerRequest:!0});const a=await this.acquireTokenNative({...e,correlationId:r},Xt.acquireTokenByCode,e.nativeAccountId).catch(A=>{throw A instanceof Uo&&ca(A)&&(this.platformAuthProvider=void 0),n.add({brokerErrorName:A.name,brokerErrorCode:A.errorCode}),A});return n.end({success:!0},void 0,a.account),a}else throw it(O1);else throw it(N1)}catch(a){throw this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_BY_CODE_FAILURE,It.Silent,null,a),n.end({success:!1},a),a}}async acquireTokenByCodeAsync(e){var a;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(le.AcquireTokenByCodeAsync,e.correlationId),(a=this.acquireTokenByCodeAsyncMeasurement)==null||a.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(A=>{var c;return(c=this.acquireTokenByCodeAsyncMeasurement)==null||c.end({success:!0,fromCache:A.fromCache}),A}).catch(A=>{var c;throw(c=this.acquireTokenByCodeAsyncMeasurement)==null||c.end({success:!1},A),A}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,r){switch(this.performanceClient.addQueueMeasurement(le.AcquireTokenFromCache,e.correlationId),r){case bn.Default:case bn.AccessToken:case bn.AccessTokenAndRefreshToken:const n=this.createSilentCacheClient(e.correlationId);return _e(n.acquireToken.bind(n),le.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw Xe(Di)}}async acquireTokenByRefreshToken(e,r){switch(this.performanceClient.addQueueMeasurement(le.AcquireTokenByRefreshToken,e.correlationId),r){case bn.Default:case bn.AccessTokenAndRefreshToken:case bn.RefreshToken:case bn.RefreshTokenAndNetwork:const n=this.createSilentRefreshClient(e.correlationId);return _e(n.acquireToken.bind(n),le.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw Xe(Di)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(le.AcquireTokenBySilentIframe,e.correlationId);const r=this.createSilentIframeClient(e.correlationId);return _e(r.acquireToken.bind(r),le.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const r=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",r),this.logoutRedirect({correlationId:r,...e})}async logoutRedirect(e){const r=this.getRequestCorrelationId(e);return Ex(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,ji.SIGNOUT),this.createRedirectClient(r).logout(e)}logoutPopup(e){try{const r=this.getRequestCorrelationId(e);return Zh(this.initialized),this.browserStorage.setInteractionInProgress(!0,ji.SIGNOUT),this.createPopupClient(r).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(r){return Promise.reject(r)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const r=this.getRequestCorrelationId(e);return this.createSilentCacheClient(r).logout(e)}getAllAccounts(e){const r=this.getRequestCorrelationId();return wI(this.logger,this.browserStorage,this.isBrowserEnvironment,r,e)}getAccount(e){const r=this.getRequestCorrelationId();return vI(e,this.logger,this.browserStorage,r)}getAccountByUsername(e){const r=this.getRequestCorrelationId();return CI(e,this.logger,this.browserStorage,r)}getAccountByHomeId(e){const r=this.getRequestCorrelationId();return BI(e,this.logger,this.browserStorage,r)}getAccountByLocalId(e){const r=this.getRequestCorrelationId();return SI(e,this.logger,this.browserStorage,r)}setActiveAccount(e){const r=this.getRequestCorrelationId();II(e,this.browserStorage,r)}getActiveAccount(){const e=this.getRequestCorrelationId();return EI(this.browserStorage,e)}async hydrateCache(e,r){this.logger.verbose("hydrateCache called");const n=jr.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(n,e.correlationId,Ro(e.idTokenClaims)),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,r)):this.browserStorage.hydrateCache(e,r)}async acquireTokenNative(e,r,n,a){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw it(Kh);return new Rc(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,r,this.performanceClient,this.platformAuthProvider,n||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,a)}canUsePlatformBroker(e,r){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!_A(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case an.NONE:case an.CONSENT:case an.LOGIN:case an.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!r&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const r=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return r&&r.nativeAccountId||""}createPopupClient(e){return new VI(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new JI(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new nE(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Xt.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new pw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new oE(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new aE(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Xt.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,r){return this.eventHandler.addEventCallback(e,r)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return ow(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Jr.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Jr.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,r){this.browserStorage.setWrapperMetadata(e,r)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?Co():Ke.EMPTY_STRING}async loginRedirect(e){const r=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",r),this.acquireTokenRedirect({correlationId:r,...e||vx})}loginPopup(e){const r=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",r),this.acquireTokenPopup({correlationId:r,...e||vx})}async acquireTokenSilent(e){const r=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(le.AcquireTokenSilent,r);n.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),ic(this.initialized,n,e.account),this.logger.verbose("acquireTokenSilent called",r);const a=e.account||this.getActiveAccount();if(!a)throw it(U1);return this.acquireTokenSilentDeduped(e,a,r).then(A=>(n.end({success:!0,fromCache:A.fromCache,accessTokenSize:A.accessToken.length,idTokenSize:A.idToken.length},void 0,A.account),{...A,state:e.state,correlationId:r})).catch(A=>{throw A instanceof nr&&A.setCorrelationId(r),n.end({success:!1},A,a),A})}async acquireTokenSilentDeduped(e,r,n){const a=Td(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority},r.homeAccountId),A=JSON.stringify(a),c=this.activeSilentTokenRequests.get(A);if(typeof c>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",n),this.performanceClient.addFields({deduped:!1},n);const p=_e(this.acquireTokenSilentAsync.bind(this),le.AcquireTokenSilentAsync,this.logger,this.performanceClient,n)({...e,correlationId:n},r);return this.activeSilentTokenRequests.set(A,p),p.finally(()=>{this.activeSilentTokenRequests.delete(A)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",n),this.performanceClient.addFields({deduped:!0},n),c}async acquireTokenSilentAsync(e,r){const n=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(le.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_START,It.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",n);const a=await _e(TI,le.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,r,this.config,this.performanceClient,this.logger),A=e.cacheLookupPolicy||bn.Default;return this.acquireTokenSilentNoIframe(a,A).catch(async p=>{if(lE(p,A))if(this.activeIframeRequest)if(A!==bn.Skip){const[m,g]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${g}`,a.correlationId);const y=this.performanceClient.startMeasurement(le.AwaitConcurrentIframe,a.correlationId);y.add({awaitIframeCorrelationId:g});const b=await m;if(y.end({success:b}),b)return this.logger.verbose(`Parallel iframe request with correlationId: ${g} succeeded. Retrying cache and/or RT redemption`,a.correlationId),this.acquireTokenSilentNoIframe(a,A);throw this.logger.info(`Iframe request with correlationId: ${g} failed. Interaction is required.`),p}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",a.correlationId),_e(this.acquireTokenBySilentIframe.bind(this),le.AcquireTokenBySilentIframe,this.logger,this.performanceClient,a.correlationId)(a);else{let m;return this.activeIframeRequest=[new Promise(g=>{m=g}),a.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",a.correlationId),_e(this.acquireTokenBySilentIframe.bind(this),le.AcquireTokenBySilentIframe,this.logger,this.performanceClient,a.correlationId)(a).then(g=>(m(!0),g)).catch(g=>{throw m(!1),g}).finally(()=>{this.activeIframeRequest=void 0})}else throw p}).then(p=>(this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_SUCCESS,It.Silent,p),this.performanceClient.addFields({fromCache:p.fromCache},e.correlationId),p)).catch(p=>{throw this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_FAILURE,It.Silent,null,p),p}).finally(()=>{document.removeEventListener("visibilitychange",n)})}async acquireTokenSilentNoIframe(e,r){return _A(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,Xt.acquireTokenSilent_silentFlow,e.account.nativeAccountId,r).catch(async n=>{throw this.performanceClient.addFields({brokerErrorName:n.name,brokerErrorCode:n.errorCode},e.correlationId),n instanceof Uo&&ca(n)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,Xe(Di)):n})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),r===bn.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),_e(this.acquireTokenFromCache.bind(this),le.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,r).catch(n=>{if(r===bn.AccessToken)throw n;return this.eventHandler.emitEvent(pt.ACQUIRE_TOKEN_NETWORK_START,It.Silent,e),_e(this.acquireTokenByRefreshToken.bind(this),le.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,r)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await _e(Is,le.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const r=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${r?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!r},e),r}logMultipleInstances(e){const r=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(r),AE(r,e,this.logger)}}function lE(o,e){const r=!(o instanceof vo&&o.subError!==Ud),n=o.errorCode===Fn.INVALID_GRANT_ERROR||o.errorCode===Di,a=r&&n||o.errorCode===Zc||o.errorCode===Qh,A=P4.includes(e);return a&&A}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function cE(o,e){const r=new Ss(o);return await r.initialize(),Nd.createController(r,e)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class cf{static async createPublicClientApplication(e){const r=await cE(e);return new cf(e,r)}constructor(e,r){this.isBroker=!1,this.controller=r||new Nd(new Ss(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,r){return this.controller.addEventCallback(e,r)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,r){return this.controller.initializeWrapperLibrary(e,r)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,r){return this.controller.hydrateCache(e,r)}clearCache(e){return this.controller.clearCache(e)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const dE={initialize:()=>Promise.reject(Qr(Hr)),acquireTokenPopup:()=>Promise.reject(Qr(Hr)),acquireTokenRedirect:()=>Promise.reject(Qr(Hr)),acquireTokenSilent:()=>Promise.reject(Qr(Hr)),acquireTokenByCode:()=>Promise.reject(Qr(Hr)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(Qr(Hr)),loginPopup:()=>Promise.reject(Qr(Hr)),loginRedirect:()=>Promise.reject(Qr(Hr)),logout:()=>Promise.reject(Qr(Hr)),logoutRedirect:()=>Promise.reject(Qr(Hr)),logoutPopup:()=>Promise.reject(Qr(Hr)),ssoSilent:()=>Promise.reject(Qr(Hr)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw Qr(Hr)},getLogger:()=>{throw Qr(Hr)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw Qr(Hr)},hydrateCache:()=>Promise.reject(Qr(Hr)),clearCache:()=>Promise.reject(Qr(Hr))};/*! @azure/msal-browser v4.26.2 2025-11-19 */class uE{static getInteractionStatusFromEvent(e,r){switch(e.eventType){case pt.LOGIN_START:return Or.Login;case pt.SSO_SILENT_START:return Or.SsoSilent;case pt.ACQUIRE_TOKEN_START:if(e.interactionType===It.Redirect||e.interactionType===It.Popup)return Or.AcquireToken;break;case pt.HANDLE_REDIRECT_START:return Or.HandleRedirect;case pt.LOGOUT_START:return Or.Logout;case pt.SSO_SILENT_SUCCESS:case pt.SSO_SILENT_FAILURE:if(r&&r!==Or.SsoSilent)break;return Or.None;case pt.LOGOUT_END:if(r&&r!==Or.Logout)break;return Or.None;case pt.HANDLE_REDIRECT_END:if(r&&r!==Or.HandleRedirect)break;return Or.None;case pt.LOGIN_SUCCESS:case pt.LOGIN_FAILURE:case pt.ACQUIRE_TOKEN_SUCCESS:case pt.ACQUIRE_TOKEN_FAILURE:case pt.RESTORE_FROM_BFCACHE:if(e.interactionType===It.Redirect||e.interactionType===It.Popup){if(r&&r!==Or.Login&&r!==Or.AcquireToken)break;return Or.None}break}return null}}/*! @azure/msal-react v3.0.22 2025-11-19 */const pE={instance:dE,inProgress:Or.None,accounts:[],logger:new ka({})},df=h.createContext(pE);df.Consumer;/*! @azure/msal-react v3.0.22 2025-11-19 */function Px(o,e){if(o.length!==e.length)return!1;const r=[...e];return o.every(n=>{const a=r.shift();return!n||!a?!1:n.homeAccountId===a.homeAccountId&&n.localAccountId===a.localAccountId&&n.username===a.username})}/*! @azure/msal-react v3.0.22 2025-11-19 */const gE="@azure/msal-react",Nx="3.0.22";/*! @azure/msal-react v3.0.22 2025-11-19 */const sd={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},hE=(o,e)=>{const{type:r,payload:n}=e;let a=o.inProgress;switch(r){case sd.UNBLOCK_INPROGRESS:o.inProgress===Or.Startup&&(a=Or.None,n.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case sd.EVENT:const c=n.message,p=uE.getInteractionStatusFromEvent(c,o.inProgress);p&&(n.logger.info(`MsalProvider - ${c.eventType} results in setting inProgress from ${o.inProgress} to ${p}`),a=p);break;default:throw new Error(`Unknown action type: ${r}`)}if(a===Or.Startup)return o;const A=n.instance.getAllAccounts();return a!==o.inProgress&&!Px(A,o.accounts)?{...o,inProgress:a,accounts:A}:a!==o.inProgress?{...o,inProgress:a}:Px(A,o.accounts)?o:{...o,accounts:A}};function fE({instance:o,children:e}){h.useEffect(()=>{o.initializeWrapperLibrary(M4.React,Nx)},[o]);const r=h.useMemo(()=>o.getLogger().clone(gE,Nx),[o]),[n,a]=h.useReducer(hE,void 0,()=>({inProgress:Or.Startup,accounts:[]}));h.useEffect(()=>{const c=o.addEventCallback(p=>{a({payload:{instance:o,logger:r,message:p},type:sd.EVENT})});return r.verbose(`MsalProvider - Registered event callback with id: ${c}`),o.initialize().then(()=>{o.handleRedirectPromise().catch(()=>{}).finally(()=>{a({payload:{instance:o,logger:r},type:sd.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{c&&(r.verbose(`MsalProvider - Removing event callback ${c}`),o.removeEventCallback(c))}},[o,r]);const A={instance:o,inProgress:n.inProgress,accounts:n.accounts,logger:r};return bo.createElement(df.Provider,{value:A},e)}/*! @azure/msal-react v3.0.22 2025-11-19 */const fw=()=>h.useContext(df),Hx="https://maxcap.azurewebsites.net";async function Te(o,e={}){const r=o.startsWith("/api")?`${Hx}${o}`:`${Hx}/api${o}`,n=await fetch(r,{credentials:"include",...e,headers:{"Content-Type":"application/json",...e.headers||{}}});if(!n.ok){const a=await n.text();throw new Error(a||`API error: ${n.status}`)}return n}const mE=()=>{const{instance:o,accounts:e}=fw(),[r,n]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),a=()=>{const ie=!r;n(ie);try{localStorage.setItem("darkMode",ie.toString())}catch{console.log("LocalStorage not available")}},[A,c]=h.useState({email:"",password:""}),[p,d]=h.useState(!1),[m,g]=h.useState(!1),[y,b]=h.useState(""),[R,C]=h.useState({x:window.innerWidth/2,y:window.innerHeight/2}),Q=bo.useRef({x:window.innerWidth/2,y:window.innerHeight/2}),S=bo.useMemo(()=>Array.from({length:6}).map(()=>({top:Math.random()*100,left:Math.random()*100,delay:Math.random()*20})),[]),[N,M]=h.useState(!1),[Ie,fe]=h.useState({y:0,x:0,velocityY:0,velocityX:0,rotation:0,rotationVelocity:0,opacity:1,isFalling:!1}),[F,ae]=h.useState({y:0,x:0,velocityY:0,velocityX:0,rotation:0,rotationVelocity:0,opacity:1}),ee=1.2,Re=125,se=.6,Z=.98,ue=15,pe=()=>{if(Ie.isFalling)return;const ie=(Math.random()-.5)*8,L=(Math.random()-.5)*ue;fe({y:0,x:0,velocityY:0,velocityX:ie,rotation:0,rotationVelocity:L,opacity:1,isFalling:!0}),ae({y:0,x:0,velocityY:Math.random()*2-1,velocityX:(Math.random()-.5)*10,rotation:0,rotationVelocity:(Math.random()-.5)*20,opacity:1});let j;const de=()=>{fe(Oe=>{let Ge=Oe.velocityY+ee,Ve=Oe.velocityX*Z,ke=Oe.y+Ge,Be=Oe.x+Ve,nt=Oe.rotation+Oe.rotationVelocity,yt=Oe.rotationVelocity*.99;return ke>=Re&&(ke=Re,Ge=-Ge*se,yt*=.8,Math.abs(Ge)<.5&&Math.abs(Ve)<.1)?(setTimeout(()=>{fe(q=>({...q,opacity:0})),ae(q=>({...q,opacity:0}))},800),setTimeout(()=>{fe({y:0,x:0,velocityY:0,velocityX:0,rotation:0,rotationVelocity:0,opacity:0,isFalling:!1}),ae({y:0,x:0,velocityY:0,velocityX:0,rotation:0,rotationVelocity:0,opacity:0})},1200),setTimeout(()=>{fe(q=>({...q,opacity:1})),ae(q=>({...q,opacity:1}))},1500),cancelAnimationFrame(j),Oe):{...Oe,y:ke,x:Be,velocityY:Ge,velocityX:Ve,rotation:nt,rotationVelocity:yt}}),ae(Oe=>{let Ge=Oe.velocityY+ee,Ve=Oe.velocityX*Z,ke=Oe.y+Ge,Be=Oe.x+Ve,nt=Oe.rotation+Oe.rotationVelocity,yt=Oe.rotationVelocity*.99;return ke>=Re+10&&(ke=Re+10,Ge=-Ge*se*.7,yt*=.7),{y:ke,x:Be,velocityY:Ge,velocityX:Ve,rotation:nt,rotationVelocity:yt,opacity:Oe.opacity}}),j=requestAnimationFrame(de)};j=requestAnimationFrame(de)},[we,Pe]=h.useState(0),[re,Ee]=h.useState(!0),k=["Clarity for planning, approvals, and execution.","Designed for signal. Built to reduce guesswork.","Insight you can defend  not just display."];h.useEffect(()=>{const ie=setInterval(()=>{Ee(!1),setTimeout(()=>{Pe(L=>(L+1)%k.length),Ee(!0)},300)},3e3);return()=>clearInterval(ie)},[]),h.useEffect(()=>{const ie=L=>{Q.current={x:L.clientX,y:L.clientY}};return window.addEventListener("mousemove",ie),()=>window.removeEventListener("mousemove",ie)},[]),h.useEffect(()=>{let ie;const L=()=>{C(j=>{const de=Q.current.x-j.x,Oe=Q.current.y-j.y;return{x:j.x+de*.04,y:j.y+Oe*.04}}),ie=requestAnimationFrame(L)};return L(),()=>cancelAnimationFrame(ie)},[]),h.useEffect(()=>{console.log(" LoginForm mounted"),console.log(" MSAL instance:",o?"READY":"NOT READY"),console.log(" Accounts:",(e==null?void 0:e.length)||0),e&&e.length>0&&console.log(" Existing account found:",e[0].username)},[o,e]);const ge=ie=>{const{name:L,value:j}=ie.target;c(de=>({...de,[L]:j})),y&&b("")},_=()=>{d(!p)},G=async ie=>{ie.preventDefault(),g(!0),b("");try{const L=await Te("/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:"password",email:A.email,password:A.password})}),j=await L.json();L.ok?(console.log("Login successful! User role:",j.role),window.location.href="/admindashboard"):(L.status===401?b("Invalid email or password"):L.status===400?b(j.error||"Missing email or password"):L.status===500?b("Server error. Please try again later."):b(j.error||"Login failed"),g(!1))}catch(L){g(!1),console.error("Login error:",L),b("Login failed. Please check your connection.")}},E=async()=>{console.log(""),console.log(" Microsoft Login Button Clicked");try{if(!o){console.error(" MSAL instance not ready!"),alert("Microsoft login not ready. Please refresh and try again.");return}o.getAllAccounts().length>0&&(console.log(" Clearing cached accounts before fresh login..."),Object.keys(localStorage).forEach(j=>{j.includes("msal")&&(localStorage.removeItem(j),console.log("   Removed:",j))}),console.log(" Cache cleared! Proceeding with fresh login...")),console.log(" MSAL instance ready"),console.log(" Expected MSAL Configuration:"),console.log("   Redirect URI: /auth");const L={scopes:["openid","profile","email","User.Read","Calendars.Read"],prompt:"select_account"};console.log(" Calling instance.loginRedirect()..."),console.log(""),await o.loginRedirect(L)}catch(ie){console.error(""),console.error(" Microsoft login error:",ie),console.error(""),alert(`Microsoft login failed: ${ie.message}`)}},D={container:{minHeight:"100vh",display:"flex",fontFamily:'"Montserrat", Tahoma, Geneva, Verdana, sans-serif',overflow:"hidden",position:"relative"},leftPanel:{flex:"0 0 60%",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)",position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",overflow:"hidden"},rightPanel:{flex:"0 0 40%",backgroundColor:r?"#1e293b":"#ffffff",display:"flex",justifyContent:"center",alignItems:"center",padding:"40px",position:"relative",boxShadow:"-10px 0 40px rgba(0, 0, 0, 0.1)"},animatedBg1:{position:"absolute",width:"600px",height:"600px",background:"radial-gradient(circle, rgba(59, 130, 246, 0.2) 0%, transparent 70%)",borderRadius:"50%",top:"-250px",left:"-250px",animation:"float1 20s ease-in-out infinite",pointerEvents:"none"},animatedBg2:{position:"absolute",width:"500px",height:"500px",background:"radial-gradient(circle, rgba(168, 85, 247, 0.15) 0%, transparent 70%)",borderRadius:"50%",bottom:"-200px",right:"-200px",animation:"float2 18s ease-in-out infinite",pointerEvents:"none"},animatedBg3:{position:"absolute",width:"450px",height:"450px",background:"radial-gradient(circle, rgba(34, 211, 238, 0.12) 0%, transparent 70%)",borderRadius:"50%",top:"40%",left:"60%",animation:"float3 22s ease-in-out infinite",pointerEvents:"none"},particles:{position:"absolute",inset:0,pointerEvents:"none"},particle:ie=>({position:"absolute",width:"5px",height:"5px",background:"rgba(255, 255, 255, 0.4)",borderRadius:"50%",top:`${ie*17%100}%`,left:`${ie*23%100}%`,animation:`particle${ie%3} ${15+ie%5}s ease-in-out infinite`,animationDelay:`${ie*.5}s`}),shootingStars:{position:"absolute",inset:0,overflow:"hidden",pointerEvents:"none",zIndex:0},shootingStar:ie=>({position:"absolute",width:"200px",height:"2px",background:"linear-gradient(90deg, rgba(255,255,255,0), #00A4EF, #7FBA00, #A855F7, rgba(255,255,255,0))",opacity:0,transform:"translateX(200px) translateY(-100px) rotate(-25deg)",animation:`shootingStar ${8+ie*2}s cubic-bezier(0.4, 0, 0.2, 1) infinite`,filter:"drop-shadow(0 0 12px rgba(59,130,246,0.9))"}),logoContainer:{position:"relative",zIndex:2,display:"flex",flexDirection:"column",alignItems:"center",gap:"40px"},logoFloatWrapper:{position:"relative",animation:"floatY 4s ease-in-out infinite"},logoClickWrapper:{cursor:"pointer",willChange:"transform, opacity",transition:"opacity 0.3s ease",position:"relative",transform:`translate(${Ie.x}px, ${Ie.y}px) rotate(${Ie.rotation}deg)`,opacity:Ie.opacity},logoImage:{height:"80px",width:"auto",maxWidth:"300px",objectFit:"contain",animation:"logoClock 10s ease-in-out infinite",filter:"drop-shadow(0 8px 24px rgba(59, 130, 246, 0.4))"},circularText:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",animation:"sealRotate 40s linear infinite",pointerEvents:"none",zIndex:1},brandingText:{textAlign:"center",color:"white",marginTop:"20px"},brandingTitle:{fontSize:"48px",fontWeight:700,letterSpacing:"-0.02em",color:"#ffffff"},brandingSubtitle:{fontSize:"18px",fontWeight:"500",color:"rgba(255, 255, 255, 0.8)",transition:"opacity 0.3s ease",opacity:re?1:0,minHeight:"27px",lineHeight:"1.5"},featurePills:{display:"flex",gap:"12px",marginTop:"40px",flexWrap:"wrap",justifyContent:"center",maxWidth:"500px"},featurePill:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"50px",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",fontSize:"13px",fontWeight:"600",animation:"fadeInUp 1s ease-out"},formContainer:{width:"100%",maxWidth:"420px",background:r?"rgba(30,41,59,0.55)":"rgba(255,255,255,0.75)",backdropFilter:"blur(24px) saturate(180%)",borderRadius:"24px",padding:"48px",border:"1px solid rgba(255,255,255,0.18)",boxShadow:`
    0 30px 60px rgba(0,0,0,0.12),
    inset 0 1px 0 rgba(255,255,255,0.2)
  `,animation:"fadeInRight 0.8s ease-out"},formTitle:{fontSize:"32px",fontWeight:"bold",color:r?"#f1f5f9":"#1f2937",marginBottom:"12px"},formSubtitle:{fontSize:"15px",color:r?"#94a3b8":"#6b7280",marginBottom:"40px",lineHeight:"0.6"},inputGroup:{marginBottom:"24px"},label:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:r?"#e2e8f0":"#1f2937"},input:ie=>({width:"100%",padding:"14px 16px",borderRadius:"10px",border:ie?"2px solid #ef4444":r?"2px solid rgba(75,85,99,0.5)":"2px solid #e5e7eb",fontSize:"15px",outline:"none",boxSizing:"border-box",transition:"all 0.3s ease",backgroundColor:r?"rgba(30,41,59,0.8)":"#f9fafb",color:r?"#e2e8f0":"#1e293b",boxShadow:`
  inset 0 2px 4px rgba(0,0,0,0.08),
  0 1px 0 rgba(255,255,255,0.5)
`}),passwordContainer:{position:"relative"},passwordInput:ie=>({width:"100%",padding:"14px 50px 14px 16px",borderRadius:"10px",border:ie?"2px solid #ef4444":r?"2px solid rgba(75,85,99,0.5)":"2px solid #e5e7eb",fontSize:"15px",outline:"none",boxSizing:"border-box",transition:"all 0.3s ease",backgroundColor:r?"rgba(30,41,59,0.8)":"#f9fafb",color:r?"#e2e8f0":"#1e293b",boxShadow:`
  inset 0 2px 4px rgba(0,0,0,0.08),
  0 1px 0 rgba(255,255,255,0.5)
`}),eyeButton:{position:"absolute",top:"50%",right:"12px",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:r?"#94a3b8":"#9ca3af",padding:"8px",transition:"all 0.3s ease"},signInButton:ie=>({width:"100%",backgroundColor:ie?"#6b7280":r?"#3b82f6":"#0f172a",color:"white",padding:"16px",fontSize:"16px",fontWeight:"bold",borderRadius:"10px",border:"none",cursor:ie?"not-allowed":"pointer",marginTop:"12px",transition:"all 0.3s ease",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",transform:ie?"scale(0.98)":"scale(1)"}),loadingSpinner:{width:"18px",height:"18px",border:"2px solid #ffffff40",borderRadius:"50%",borderTopColor:"#ffffff",animation:"spin 0.6s linear infinite",marginRight:"10px"},errorMessage:{color:"#ef4444",fontSize:"14px",textAlign:"left",marginTop:"12px",padding:"12px",backgroundColor:r?"rgba(239,68,68,0.1)":"#fef2f2",borderRadius:"8px",border:r?"1px solid rgba(239,68,68,0.3)":"1px solid #fecaca",animation:"shake 0.5s ease-in-out, fadeIn 0.3s ease-out"},divider:{display:"flex",alignItems:"center",margin:"28px 0",gap:"16px"},dividerLine:{flex:1,height:"1px",background:r?"linear-gradient(to right, transparent, rgba(75,85,99,0.5), transparent)":"linear-gradient(to right, transparent, #d1d5db, transparent)"},dividerText:{fontSize:"13px",color:r?"#94a3b8":"#9ca3af",fontWeight:"500"},microsoftButtonWrapper:{position:"relative",width:"100%"},microsoftButton:{position:"relative",zIndex:1,width:"100%",backgroundColor:r?"rgba(30,41,59,0.8)":"#ffffff",color:r?"#e2e8f0":"#1e293b",padding:"14px",fontSize:"15px",fontWeight:"600",borderRadius:"10px",border:r?"2px solid rgba(75,85,99,0.5)":"2px solid #e5e7eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",transition:"all 0.3s ease"},microsoftLogo:{width:"22px",height:"22px"}};return h.useEffect(()=>{const ie=document.createElement("style");return ie.textContent=`
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            @keyframes float1 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                33% { transform: translate(120px, -120px) scale(1.1); }
                66% { transform: translate(-60px, 60px) scale(0.9); }
            }
            @keyframes float2 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                33% { transform: translate(-120px, 120px) scale(1.15); }
                66% { transform: translate(90px, -90px) scale(0.95); }
            }
            @keyframes float3 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                50% { transform: translate(-140px, 70px) scale(1.2); }
            }
            @keyframes particle0 {
                0%, 100% { transform: translateY(0) translateX(0); opacity: 0.3; }
                50% { transform: translateY(-40px) translateX(25px); opacity: 0.7; }
            }
            @keyframes particle1 {
                0%, 100% { transform: translateY(0) translateX(0); opacity: 0.2; }
                50% { transform: translateY(50px) translateX(-20px); opacity: 0.6; }
            }
            @keyframes particle2 {
                0%, 100% { transform: translateY(0) translateX(0); opacity: 0.4; }
                50% { transform: translateY(-30px) translateX(-30px); opacity: 0.8; }
            }
            @keyframes floatY {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-15px); }
            }
            @keyframes logoClock {
                0% { transform: rotate(0deg); }
                70% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            @keyframes fadeInDown {
                0% { transform: translateY(-30px); opacity: 0; }
                100% { transform: translateY(0); opacity: 1; }
            }
            @keyframes fadeInUp {
                0% { transform: translateY(30px); opacity: 0; }
                100% { transform: translateY(0); opacity: 1; }
            }
            @keyframes fadeInRight {
                0% { transform: translateX(40px); opacity: 0; }
                100% { transform: translateX(0); opacity: 1; }
            }
            @keyframes fadeIn {
                0% { opacity: 0; }
                100% { opacity: 1; }
            }
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
                20%, 40%, 60%, 80% { transform: translateX(8px); }
            }
            @keyframes shootingStar {
                0% {
                    transform: translateX(200px) translateY(-100px) rotate(-25deg);
                    opacity: 0;
                }
                15% {
                    opacity: 0.9;
                }
                100% {
                    transform: translateX(-900px) translateY(500px) rotate(-25deg);
                    opacity: 0;
                }
            }
            @keyframes sealRotate {
                from {
                    transform: translate(-50%, -50%) rotate(0deg);
                }
                to {
                    transform: translate(-50%, -50%) rotate(360deg);
                }
            }
            @keyframes microsoftGlow {
                0% { background-position: 200% 0; }
                100% { background-position: -200% 0; }
            }
            @keyframes rgbShift {
                0% { background-position: 0% center; }
                100% { background-position: 200% center; }
            }
            input:focus {
                border-color: #3b82f6 !important;
                background-color: ${r?"rgba(30,41,59,0.9)":"#ffffff"} !important;
                box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1) !important;
            }
            button:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 12px 24px rgba(0,0,0,0.18);
}
            svg text {
                font-size: 15.5px;
                font-weight: 600;
                letter-spacing: 1.2px;
                fill: rgba(255, 255, 255, 0.85);
                text-transform: uppercase;
            }
            
            @media (max-width: 1024px) {
                .split-container {
                    flex-direction: column !important;
                }
                .left-panel, .right-panel {
                    flex: 1 1 100% !important;
                    min-height: 50vh !important;
                }
            }
        `,document.head.appendChild(ie),()=>{document.head.contains(ie)&&document.head.removeChild(ie)}},[r]),t.jsxs("div",{style:D.container,className:"split-container",children:[t.jsxs("div",{style:D.leftPanel,className:"left-panel",children:[t.jsx("div",{style:D.animatedBg1}),t.jsx("div",{style:D.animatedBg2}),t.jsx("div",{style:D.animatedBg3}),t.jsx("div",{style:D.shootingStars,children:S.map((ie,L)=>t.jsx("div",{style:{...D.shootingStar(L),top:`${ie.top}%`,left:`${ie.left}%`,animationDelay:`${ie.delay}s`}},L))}),t.jsx("div",{style:D.particles,children:[...Array(15)].map((ie,L)=>t.jsx("div",{style:D.particle(L)},L))}),t.jsxs("div",{style:D.logoContainer,children:[t.jsx("div",{style:D.logoFloatWrapper,children:t.jsxs("div",{style:D.logoClickWrapper,onClick:pe,children:[t.jsxs("svg",{width:"180",height:"180",viewBox:"0 0 180 180",style:{...D.circularText,transform:`translate(calc(-50% + ${F.x}px), calc(-50% + ${F.y}px)) rotate(${F.rotation}deg)`,opacity:F.opacity},children:[t.jsx("defs",{children:t.jsx("path",{id:"circlePath",d:"M 90, 90 m -60, 0 a 60,60 0 1,1 120,0 a 60,60 0 1,1 -120,0"})}),t.jsx("text",{children:t.jsx("textPath",{href:"#circlePath",startOffset:"0%",children:"MAXCAP  MAXCAP  MAXCAP  MAXCAP "})})]}),t.jsx("img",{src:"/images/maxcap.png",alt:"Logo",style:D.logoImage})]})}),t.jsxs("div",{style:D.brandingText,children:[t.jsx("h1",{style:D.brandingTitle,children:"MAXCAP"}),t.jsx("p",{style:D.brandingSubtitle,children:k[we]})]}),t.jsxs("div",{style:D.featurePills,children:[t.jsxs("div",{style:D.featurePill,children:[t.jsx(ws,{size:16}),t.jsx("span",{children:"Enterprise Grade"})]}),t.jsxs("div",{style:{...D.featurePill,animationDelay:"0.1s"},children:[t.jsx(qo,{size:16}),t.jsx("span",{children:"Real-time Sync"})]}),t.jsxs("div",{style:{...D.featurePill,animationDelay:"0.2s"},children:[t.jsx(yo,{size:16}),t.jsx("span",{children:"AI-Powered"})]})]})]})]}),t.jsxs("div",{style:D.rightPanel,className:"right-panel",children:[t.jsx("button",{onClick:a,style:{position:"absolute",top:"24px",right:"24px",padding:"12px",borderRadius:"12px",border:"none",backgroundColor:r?"rgba(59,130,246,0.1)":"rgba(15,23,42,0.05)",color:r?"#3b82f6":"#0f172a",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},onMouseEnter:ie=>{ie.currentTarget.style.transform="scale(1.1)",ie.currentTarget.style.boxShadow="0 4px 16px rgba(59,130,246,0.2)"},onMouseLeave:ie=>{ie.currentTarget.style.transform="scale(1)",ie.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.08)"},children:r?"":""}),t.jsxs("div",{style:{...D.formContainer,transform:`
      perspective(1200px)
      rotateX(${(R.y-window.innerHeight/2)*-.004}deg)
      rotateY(${(R.x-window.innerWidth/2)*.004}deg)
    `,transition:"transform 0.15s ease-out"},children:[t.jsx("h2",{style:D.formTitle,children:"Welcome back"}),t.jsx("p",{style:D.formSubtitle,children:"Sign in to your workspace"}),t.jsxs("form",{onSubmit:G,children:[t.jsxs("div",{style:D.inputGroup,children:[t.jsx("label",{style:D.label,children:"Email Address"}),t.jsx("input",{type:"email",name:"email",value:A.email,onChange:ge,onKeyDown:ie=>ie.key==="Enter"&&G(ie),style:D.input(!!y),required:!0,disabled:m,placeholder:"Enter your email address"})]}),t.jsxs("div",{style:D.inputGroup,children:[t.jsx("label",{style:D.label,children:"Password"}),t.jsxs("div",{style:D.passwordContainer,children:[t.jsx("input",{type:p?"text":"password",name:"password",value:A.password,onChange:ge,onKeyDown:ie=>ie.key==="Enter"&&G(ie),style:D.passwordInput(!!y),required:!0,disabled:m,placeholder:"Enter your password"}),t.jsx("button",{type:"button",onClick:_,style:D.eyeButton,disabled:m,children:p?t.jsx(gg,{size:18}):t.jsx(ri,{size:18})})]})]}),y&&t.jsx("div",{style:D.errorMessage,children:y}),t.jsx("button",{type:"submit",style:D.signInButton(m),disabled:m,children:m?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:D.loadingSpinner}),"Signing In..."]}):"Sign In"})]}),t.jsxs("div",{style:D.divider,children:[t.jsx("div",{style:D.dividerLine}),t.jsx("span",{style:D.dividerText,children:"OR"}),t.jsx("div",{style:D.dividerLine})]}),t.jsxs("div",{style:D.microsoftButtonWrapper,onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),children:[N&&t.jsx("div",{style:{position:"absolute",inset:"-3px",borderRadius:"12px",background:"linear-gradient(90deg, #F25022 0%, #7FBA00 25%, #00A4EF 50%, #FFB900 75%, #F25022 100%)",backgroundSize:"300% 100%",animation:"microsoftGlow 3s linear infinite",filter:"blur(10px)",opacity:"0.7",zIndex:0}}),t.jsxs("button",{type:"button",onClick:E,style:D.microsoftButton,children:[t.jsx("img",{src:"/images/microsoft.png",alt:"Microsoft Logo",style:D.microsoftLogo}),"Sign in with Microsoft"]})]})]})]})]})},xE=()=>{const[o,e]=h.useState(!0),[r,n]=h.useState("initial");return h.useEffect(()=>{setTimeout(()=>n("flipping"),300),setTimeout(()=>n("revealing"),1100),setTimeout(()=>{n("done"),e(!1)},2e3)},[]),t.jsxs("div",{style:{position:"relative",width:"100%",height:"100vh",overflow:"hidden"},children:[t.jsx(mE,{}),o&&t.jsx(tB,{animationPhase:r})]})},yE=()=>{const[o,e]=h.useState(""),r=MC(),n=A=>{A.preventDefault(),console.log("Reset requested for:",o)},a={container:{minHeight:"100vh",background:"linear-gradient(to right, #0079D3, #00A1F1)",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:'"Segoe UI", sans-serif',padding:"20px"},formBox:{backgroundColor:"#fff",padding:"40px",borderRadius:"10px",width:"100%",maxWidth:"400px",position:"relative",boxShadow:"0 10px 30px rgba(0,0,0,0.1)"},backButton:{position:"absolute",top:"20px",left:"20px",background:"none",border:"none",color:"#0079D3",cursor:"pointer"},header:{textAlign:"center",fontSize:"20px",fontWeight:"600",marginBottom:"30px",marginTop:"10px",color:"#1f2937"},input:{width:"100%",padding:"12px 14px",borderRadius:"6px",border:"1px solid #ccc",fontSize:"15px",marginBottom:"24px",outline:"none"},button:{width:"100%",backgroundColor:"#0079D3",color:"white",padding:"12px",fontSize:"16px",fontWeight:"bold",borderRadius:"6px",border:"none",cursor:"pointer"}};return t.jsx("div",{style:a.container,children:t.jsxs("div",{style:a.formBox,children:[t.jsx("button",{onClick:()=>r("/"),style:a.backButton,children:t.jsx(Ki,{size:20})}),t.jsx("h2",{style:a.header,children:"Reset Password"}),t.jsxs("form",{onSubmit:n,children:[t.jsx("input",{type:"email",placeholder:"Email/Phone",value:o,onChange:A=>e(A.target.value),style:a.input,required:!0}),t.jsx("button",{type:"submit",style:a.button,children:"NEXT"})]})]})})},mw=h.createContext(),bE=()=>{try{const o=localStorage.getItem("sidebarCollapsed");if(o!==null)return JSON.parse(o)}catch(o){console.error("Error reading initial sidebar state from localStorage:",o)}return!1},wE=({children:o})=>{const[e,r]=h.useState(bE);h.useEffect(()=>{try{localStorage.setItem("sidebarCollapsed",JSON.stringify(e)),localStorage.getItem("sidebarCollapsed")!==JSON.stringify(e)&&localStorage.setItem("sidebarCollapsed",JSON.stringify(e))}catch(a){console.error("Error saving sidebar state to localStorage:",a)}},[e]);const n=()=>{r(a=>!a)};return t.jsx(mw.Provider,{value:{collapsed:e,toggleSidebar:n},children:o})},Hd=()=>{const o=h.useContext(mw);if(!o)throw new Error("useSidebar must be used within SidebarProvider");return o},vE=()=>{const{collapsed:o,toggleSidebar:e}=Hd(),[r,n]=h.useState(null),[a,A]=h.useState(null),[c,p]=h.useState({firstName:"",lastName:"",role:"member",email:"",department:""}),[d,m]=h.useState(!0),[g,y]=h.useState(!1),[b,R]=h.useState(window.location.pathname),[C,Q]=h.useState(!1),S=bo.useMemo(()=>Array.from({length:8}).map((Z,ue)=>({top:Math.random()*100,left:Math.random()*100,delay:Math.random()*10,duration:15+Math.random()*10,size:2+Math.random()*3})),[]),[N,M]=h.useState(!1);h.useEffect(()=>{sessionStorage.getItem("sidebarIntroPlayed")||(M(!0),sessionStorage.setItem("sidebarIntroPlayed","true"))},[]),h.useEffect(()=>{const Z=()=>{R(window.location.pathname)};return window.addEventListener("popstate",Z),()=>window.removeEventListener("popstate",Z)},[]),h.useEffect(()=>{const Z=new AbortController;let ue=!0;return(async()=>{m(!0);try{const we=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"},signal:Z.signal});if(we.ok){const Pe=await we.json();ue&&p(Pe)}else ue&&p({firstName:"User",lastName:"",role:"member",email:"",department:"General"})}catch(we){if(we.name==="AbortError"){console.log("Fetch aborted - component unmounted");return}console.error("Error fetching user data:",we),ue&&p({firstName:"User",lastName:"",role:"member",email:"",department:"General"})}finally{ue&&m(!1)}})(),()=>{ue=!1,Z.abort()}},[]);const fe=[{label:"Home",icon:t.jsx(OB,{size:22}),path:"/admindashboard",roles:["admin","member"]},{label:"Actuals",icon:t.jsx(vB,{size:22}),path:"/adminactuals",roles:["admin","member"]},{label:"Plan",icon:t.jsx(wo,{size:22}),path:"/adminviewplan",roles:["admin","member"]},{label:"Reports",icon:t.jsx(gB,{size:22}),path:"/adminreports",roles:["admin","member"]},{label:"Users",icon:t.jsx(Un,{size:22}),path:"/users",roles:["admin"]},{label:"Resources",icon:t.jsx(g5,{size:22}),path:"/secret",roles:["admin"],allowedEmails:["muhammad.hasan@ihrp.sg","jumana.haseen@ihrp.sg"]}].filter(Z=>{const ue=Z.roles.includes(c.role),pe=!Z.allowedEmails||Z.allowedEmails.includes(c.email);return ue&&pe}),F=(Z,ue)=>{if(ue&&(ue.preventDefault(),ue.stopPropagation()),C||g||d){console.log("Navigation blocked - already in progress");return}Q(!0),A(null),n(null);try{localStorage.setItem("sidebarCollapsed",JSON.stringify(o))}catch(pe){console.error("Error saving sidebar state:",pe)}setTimeout(()=>{window.location.href=Z},100)},ae=async Z=>{if(Z&&(Z.preventDefault(),Z.stopPropagation()),!g){y(!0),A(null);try{const ue=new AbortController,pe=setTimeout(()=>ue.abort(),5e3),we=await Te("/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},signal:ue.signal});clearTimeout(pe),we.ok||console.warn("Server logout failed, but proceeding with client logout");try{localStorage.clear(),sessionStorage.clear()}catch(Pe){console.error("Failed to clear storage:",Pe)}window.location.href="/"}catch(ue){ue.name==="AbortError"?console.warn("Logout request timed out, proceeding anyway"):console.error("Logout error:",ue);try{localStorage.clear(),sessionStorage.clear()}catch(pe){console.error("Failed to clear storage:",pe)}window.location.href="/"}}},ee={sidebar:{height:"100vh",width:o?"80px":"220px",background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",overflow:"hidden",position:"fixed",top:0,left:0,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"0px",paddingRight:"0px",zIndex:10,fontFamily:'"Montserrat", sans-serif',boxShadow:"2px 0 20px rgba(0, 0, 0, 0.15)",color:"white",transition:"width 0.3s ease"},animatedBg1:{position:"absolute",width:"350px",height:"350px",background:"radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, transparent 70%)",borderRadius:"50%",top:"-120px",left:"-120px",animation:N?"sidebarFloat1 20s ease-in-out infinite":"none",pointerEvents:"none",filter:"blur(40px)"},animatedBg2:{position:"absolute",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(168, 85, 247, 0.12) 0%, transparent 70%)",borderRadius:"50%",bottom:"-100px",right:"-100px",animation:"sidebarFloat2 22s ease-in-out infinite",pointerEvents:"none",filter:"blur(40px)"},animatedBg3:{position:"absolute",width:"250px",height:"250px",background:"radial-gradient(circle, rgba(34, 211, 238, 0.1) 0%, transparent 70%)",borderRadius:"50%",top:"40%",left:"50%",transform:"translateX(-50%)",animation:"sidebarFloat3 25s ease-in-out infinite",pointerEvents:"none",filter:"blur(40px)"},gradientOverlay:{position:"absolute",inset:0,background:"linear-gradient(180deg, transparent 0%, rgba(59, 130, 246, 0.03) 50%, transparent 100%)",animation:"gradientMove 8s ease-in-out infinite",pointerEvents:"none"},particlesContainer:{position:"absolute",inset:0,pointerEvents:"none",overflow:"hidden"},particle:Z=>({position:"absolute",width:`${Z.size}px`,height:`${Z.size}px`,background:"rgba(255, 255, 255, 0.3)",borderRadius:"50%",top:`${Z.top}%`,left:`${Z.left}%`,animation:`floatParticle ${Z.duration}s ease-in-out infinite`,animationDelay:`${Z.delay}s`,boxShadow:"0 0 10px rgba(255, 255, 255, 0.5)"}),logoContainer:{marginBottom:"32px",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",paddingLeft:"16px",paddingRight:"16px",position:"relative",zIndex:2,animation:N?"slideInDown 0.6s ease-out":"none"},logoWrapper:{position:"relative",animation:"logoFloat 4s ease-in-out infinite",marginTop:"12px"},logoGlow:{position:"absolute",inset:"-10px",background:"radial-gradient(circle, rgba(59, 130, 246, 0.3) 0%, transparent 70%)",borderRadius:"50%",animation:"pulse 3s ease-in-out infinite",filter:"blur(20px)",zIndex:-1},logo:{height:o?"48px":"56px",transition:"height 0.3s ease, filter 0.3s ease",filter:"brightness(1.1) drop-shadow(0 4px 12px rgba(59, 130, 246, 0.3))",position:"relative",zIndex:1},logoText:{fontSize:"13px",fontWeight:"bold",opacity:o?0:1,transition:"opacity 0.3s ease",background:"linear-gradient(90deg, #60a5fa, #a78bfa)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",animation:"shimmer 3s ease-in-out infinite",marginTop:"4px"},toggleButton:{background:"rgba(255, 255, 255, 0.1)",border:"none",color:"white",cursor:"pointer",marginBottom:"24px",paddingTop:"8px",paddingBottom:"8px",paddingLeft:"8px",paddingRight:"8px",borderRadius:"8px",transition:"all 0.3s ease",position:"relative",zIndex:2,animation:"fadeIn 0.8s ease-out 0.2s both",backdropFilter:"blur(10px)"},navItem:{display:"flex",alignItems:"center",gap:o?"4px":"16px",width:o?"56px":"calc(100% - 24px)",paddingTop:o?"12px":"14px",paddingBottom:o?"12px":"14px",paddingLeft:o?"8px":"16px",paddingRight:o?"8px":"16px",borderRadius:"12px",textDecoration:"none",color:"white",fontSize:"14px",fontWeight:"500",marginBottom:"6px",marginTop:"0px",marginLeft:"12px",marginRight:"12px",backgroundColor:"transparent",flexDirection:o?"column":"row",justifyContent:o?"center":"flex-start",textAlign:o?"center":"left",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",border:"none",cursor:"pointer",zIndex:2,backdropFilter:"blur(10px)"},activeItem:{backgroundColor:"rgba(59, 130, 246, 0.15)",borderLeft:"4px solid #3b82f6",marginLeft:o?"12px":"8px",paddingLeft:o?"8px":"12px",boxShadow:"0 4px 15px rgba(59, 130, 246, 0.2)"},hoverItem:{backgroundColor:"rgba(255, 255, 255, 0.1)",transform:"translateX(4px) scale(1.02)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},navContainer:{flex:1,width:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",paddingTop:"8px",position:"relative",zIndex:2},logoutContainer:{width:"100%",marginTop:"auto",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",zIndex:2},logoutButton:Z=>({display:"flex",alignItems:"center",gap:o?"4px":"16px",width:o?"56px":"calc(100% - 24px)",paddingTop:o?"12px":"14px",paddingBottom:o?"12px":"14px",paddingLeft:o?"8px":"16px",paddingRight:o?"8px":"16px",borderRadius:"12px",textDecoration:"none",color:Z?"#94a3b8":"#ef4444",fontSize:"14px",fontWeight:"500",marginBottom:"6px",marginTop:"0px",marginLeft:"12px",marginRight:"12px",backgroundColor:"transparent",flexDirection:o?"column":"row",justifyContent:o?"center":"flex-start",textAlign:o?"center":"left",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",border:"none",cursor:Z?"not-allowed":"pointer",backdropFilter:"blur(10px)"}),tooltip:{position:"absolute",left:"72px",top:"50%",transform:"translateY(-50%)",backgroundColor:"#374151",color:"white",paddingTop:"8px",paddingBottom:"8px",paddingLeft:"12px",paddingRight:"12px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",zIndex:1e3,opacity:a?1:0,visibility:a?"visible":"hidden",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)",pointerEvents:"none",backdropFilter:"blur(10px)"},tooltipArrow:{position:"absolute",left:"-4px",top:"50%",transform:"translateY(-50%)",width:0,height:0,borderTop:"4px solid transparent",borderBottom:"4px solid transparent",borderRight:"4px solid #374151",pointerEvents:"none"},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:"22px",transition:"transform 0.3s ease"},labelText:{marginTop:o?"4px":"0px",fontSize:o?"10px":"14px",lineHeight:"1.2",opacity:o?.9:1,transition:"all 0.3s ease"},sectionDivider:{width:"calc(100% - 24px)",height:"1px",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)",marginTop:"12px",marginBottom:"16px",marginLeft:"12px",marginRight:"12px",animation:"shimmerLine 3s ease-in-out infinite"},logoSpinner:{width:"20px",height:"20px",animation:"spin 1s linear infinite",marginRight:o?"0":"8px",filter:"brightness(1.2) drop-shadow(0 0 8px rgba(59, 130, 246, 0.6))"}},Re=(Z,ue)=>{g||(n(Z),o&&setTimeout(()=>{A(ue)},100))},se=()=>{g||(n(null),A(null))};return bo.useEffect(()=>{const Z=document.createElement("style");return Z.textContent=`
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            
            @keyframes sidebarFloat1 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                33% { transform: translate(40px, -50px) scale(1.15); }
                66% { transform: translate(-30px, 40px) scale(0.95); }
            }
            
            @keyframes sidebarFloat2 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                33% { transform: translate(-40px, 50px) scale(1.2); }
                66% { transform: translate(35px, -35px) scale(0.9); }
            }
            
            @keyframes sidebarFloat3 {
                0%, 100% { transform: translate(-50%, 0) scale(1); }
                50% { transform: translate(-50%, 30px) scale(1.25); }
            }
            
            @keyframes gradientMove {
                0%, 100% { transform: translateY(0); opacity: 0.3; }
                50% { transform: translateY(20%); opacity: 0.6; }
            }
            
            @keyframes floatParticle {
                0%, 100% { 
                    transform: translateY(0) translateX(0); 
                    opacity: 0.2; 
                }
                25% { 
                    transform: translateY(-30px) translateX(10px); 
                    opacity: 0.5; 
                }
                50% { 
                    transform: translateY(-50px) translateX(-10px); 
                    opacity: 0.8; 
                }
                75% { 
                    transform: translateY(-30px) translateX(15px); 
                    opacity: 0.5; 
                }
            }
            
            @keyframes logoFloat {
                0%, 100% { transform: translateY(0) rotate(0deg); }
                50% { transform: translateY(-3px) rotate(1deg); }
            }
            
            @keyframes pulse {
                0%, 100% { opacity: 0.3; transform: scale(1); }
                50% { opacity: 0.6; transform: scale(1.1); }
            }
            
            @keyframes shimmer {
                0% { background-position: -200% center; }
                100% { background-position: 200% center; }
            }
            
            @keyframes shimmerLine {
                0%, 100% { opacity: 0.3; }
                50% { opacity: 1; }
            }
            
            @keyframes slideInDown {
                0% { 
                    transform: translateY(-20px); 
                    opacity: 0; 
                }
                100% { 
                    transform: translateY(0); 
                    opacity: 1; 
                }
            }
            
            @keyframes fadeIn {
                0% { opacity: 0; }
                100% { opacity: 1; }
            }
        `,document.head.appendChild(Z),()=>{document.head.contains(Z)&&document.head.removeChild(Z)}},[]),t.jsxs("div",{style:ee.sidebar,children:[t.jsx("div",{style:ee.animatedBg1}),t.jsx("div",{style:ee.animatedBg2}),t.jsx("div",{style:ee.animatedBg3}),t.jsx("div",{style:ee.gradientOverlay}),t.jsx("div",{style:ee.particlesContainer,children:S.map((Z,ue)=>t.jsx("div",{style:ee.particle(Z)},ue))}),t.jsx("div",{style:ee.logoContainer,children:t.jsxs("div",{style:ee.logoWrapper,children:[t.jsx("div",{style:ee.logoGlow}),t.jsx("img",{src:"/images/maxcap.png",alt:"Logo",style:ee.logo}),!o&&t.jsx("div",{style:ee.logoText,children:"MAXCAP"})]})}),t.jsx("button",{onClick:Z=>{Z.preventDefault(),Z.stopPropagation(),A(null),e()},style:{...ee.toggleButton,backgroundColor:r==="toggle"?"rgba(255, 255, 255, 0.2)":"rgba(255, 255, 255, 0.1)"},onMouseEnter:()=>n("toggle"),onMouseLeave:()=>n(null),disabled:g,children:t.jsx(VB,{size:20})}),!d&&t.jsxs("div",{style:ee.navContainer,children:[fe.map((Z,ue)=>{const pe=Z.path==="/adminviewplan"&&(b==="/adminviewplan"||b==="/adminindividualplan"||b==="/adminapprovals"||b==="/adminaddplan"||b==="/admineditplan"||b==="/adminaddindividualplan"||b==="/admineditindividualplan")||Z.path==="/adminreports"&&(b==="/adminreports"||b==="/adminteamcapacity"||b==="/adminutilization")||Z.path==="/users"&&(b==="/users"||b==="/addusers")||Z.path==="/adminactuals"&&(b==="/adminactuals"||b==="/adminviewlogs")||b===Z.path,we=r===ue;return t.jsxs("div",{style:{position:"relative",animation:N?`fadeIn 0.5s ease-out ${ue*.1}s both`:"none"},children:[t.jsxs("button",{onClick:Pe=>F(Z.path,Pe),style:{...ee.navItem,...pe?ee.activeItem:{},...we&&!pe?ee.hoverItem:{},pointerEvents:g||C||d?"none":"auto",opacity:g||C||d?.5:1,cursor:g||C||d?"not-allowed":"pointer"},onMouseEnter:()=>Re(ue,Z.label),onMouseLeave:se,disabled:g||C||d,children:[t.jsx("div",{style:{...ee.iconContainer,transform:we?"scale(1.1) rotate(5deg)":"scale(1) rotate(0deg)"},children:Z.icon}),t.jsx("span",{style:ee.labelText,children:Z.label})]}),o&&a===Z.label&&t.jsxs("div",{style:ee.tooltip,children:[t.jsx("div",{style:ee.tooltipArrow}),Z.label]})]},ue)}),t.jsx("div",{style:ee.sectionDivider})]}),d&&t.jsx("div",{style:{...ee.navContainer,display:"flex",alignItems:"center",justifyContent:"center",opacity:.5},children:t.jsx("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.6)"},children:"Loading..."})}),C&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.3)",backdropFilter:"blur(2px)",zIndex:9998,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{style:{color:"white",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("img",{src:"/images/maxcap.png",alt:"Loading",style:{width:"24px",height:"24px",animation:"spin 1s linear infinite",filter:"brightness(1.2) drop-shadow(0 0 8px rgba(59, 130, 246, 0.6))"}}),"Navigating..."]})}),t.jsxs("div",{style:ee.logoutContainer,children:[t.jsxs("button",{onClick:Z=>ae(Z),style:{...ee.logoutButton(g),...r==="logout"&&!g?ee.hoverItem:{}},onMouseEnter:()=>Re("logout","Logout"),onMouseLeave:se,disabled:g,children:[t.jsx("div",{style:{...ee.iconContainer,transform:r==="logout"&&!g?"scale(1.1) rotate(-5deg)":"scale(1) rotate(0deg)"},children:g?t.jsx("img",{src:"/images/maxcap.png",alt:"Loading",style:ee.logoSpinner}):t.jsx(KB,{size:22})}),t.jsx("span",{style:ee.labelText,children:g?o?"Wait...":"Logging out...":"Logout"})]}),o&&a==="Logout"&&!g&&t.jsxs("div",{style:{...ee.tooltip,position:"absolute",bottom:"20px",left:"72px",top:"auto",transform:"none",pointerEvents:"none"},children:[t.jsx("div",{style:ee.tooltipArrow}),"Logout"]})]})]})},Vr=({children:o})=>{const{collapsed:e}=Hd(),[r,n]=h.useState(!0),[a,A]=h.useState(()=>{try{return localStorage.getItem("sidebarCollapsed")==="true"?"80px":"220px"}catch{return"220px"}});return h.useEffect(()=>{A(e?"80px":"220px"),n(!1)},[e]),t.jsxs("div",{style:{display:"flex",margin:0,padding:0,minHeight:"100vh"},children:[t.jsx(vE,{}),t.jsx("div",{style:{marginLeft:a,transition:r?"none":"margin-left 0.3s ease",flex:1,padding:"0",boxSizing:"border-box",minHeight:"100vh"},children:o})]})},CE=({isOpen:o,onClose:e,statusData:r,isDarkMode:n})=>{if(!o)return null;const{title:a,users:A,color:c,darkColor:p}=r,d=()=>{switch(a){case"Overworked":return t.jsx(bd,{size:24,style:{color:"#ef4444"}});case"Underutilized":return t.jsx(a5,{size:24,style:{color:"#eab308"}});case"Optimal":return t.jsx(GA,{size:24,style:{color:"#22c55e"}});default:return t.jsx(qt,{size:24})}},m=()=>{switch(a){case"Overworked":return"#ef4444";case"Underutilized":return"#eab308";case"Optimal":return"#22c55e";default:return"#3b82f6"}},g={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,animation:"fadeIn 0.3s ease-out",padding:"20px"},modal:{backgroundColor:n?"#1e293b":"#ffffff",borderRadius:"24px",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.3)",width:"90%",maxWidth:"700px",maxHeight:"85vh",overflow:"hidden",animation:"slideUp 0.3s ease-out",border:n?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)"},header:{padding:"24px 28px",borderBottom:n?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",display:"flex",justifyContent:"space-between",alignItems:"center",background:n?"linear-gradient(135deg, #334155 0%, #1e293b 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerTitle:{fontSize:"24px",fontWeight:"700",color:n?"#e2e8f0":"#1e293b"},headerSubtitle:{fontSize:"14px",color:n?"#94a3b8":"#64748b",fontWeight:"500",marginTop:"4px"},closeButton:{background:"none",border:"none",color:n?"#94a3b8":"#64748b",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},content:{padding:"24px 28px",maxHeight:"calc(85vh - 100px)",overflowY:"auto"},noUsers:{textAlign:"center",padding:"60px 20px",color:n?"#94a3b8":"#64748b"},noUsersIcon:{fontSize:"48px",marginBottom:"16px",opacity:.5},userCard:{backgroundColor:n?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",borderRadius:"16px",padding:"20px",marginBottom:"16px",borderLeft:`4px solid ${m()}`,transition:"all 0.2s ease",cursor:"pointer",position:"relative",overflow:"hidden"},userHeader:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},avatar:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:m(),display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"700",fontSize:"18px",flexShrink:0},userInfo:{flex:1},userName:{fontSize:"18px",fontWeight:"600",color:n?"#e2e8f0":"#1e293b",marginBottom:"4px"},userDepartment:{fontSize:"14px",color:n?"#94a3b8":"#64748b",display:"flex",alignItems:"center",gap:"8px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginTop:"16px",paddingTop:"16px",borderTop:n?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)"},statItem:{textAlign:"center"},statValue:{fontSize:"20px",fontWeight:"700",color:n?"#e2e8f0":"#1e293b",marginBottom:"4px"},statLabel:{fontSize:"11px",color:n?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:"600"},utilizationBar:{marginTop:"16px",height:"8px",backgroundColor:n?"rgba(51,65,85,0.5)":"rgba(226,232,240,0.5)",borderRadius:"4px",overflow:"hidden",position:"relative"},utilizationFill:Q=>({height:"100%",width:`${Math.min(Q,100)}%`,backgroundColor:m(),borderRadius:"4px",transition:"width 0.5s ease"}),categoryBreakdown:{marginTop:"12px",display:"flex",gap:"12px",fontSize:"12px",color:n?"#94a3b8":"#64748b"},categoryItem:{display:"flex",alignItems:"center",gap:"6px"},categoryDot:Q=>({width:"8px",height:"8px",borderRadius:"50%",backgroundColor:Q}),summaryCard:{backgroundColor:n?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"12px",padding:"16px",marginBottom:"20px",border:`2px solid ${m()}20`},summaryGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",textAlign:"center"},summaryItem:{display:"flex",flexDirection:"column",gap:"4px"},summaryValue:{fontSize:"24px",fontWeight:"700",color:m()},summaryLabel:{fontSize:"11px",color:n?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:"600"}},y=A.reduce((Q,S)=>Q+S.totalHours,0),b=A.length>0?(y/A.length).toFixed(1):0,R=A.length>0?(A.reduce((Q,S)=>Q+S.totalManDays,0)/A.length).toFixed(1):0,C=A.length>0?(A.reduce((Q,S)=>Q+S.utilizationPercentage,0)/A.length).toFixed(1):0;return t.jsxs(t.Fragment,{children:[t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(30px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        .user-card:hover {
          transform: translateX(4px);
          box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
      `}),t.jsx("div",{style:g.overlay,onClick:e,children:t.jsxs("div",{style:g.modal,onClick:Q=>Q.stopPropagation(),children:[t.jsxs("div",{style:g.header,children:[t.jsxs("div",{style:g.headerLeft,children:[d(),t.jsxs("div",{children:[t.jsxs("div",{style:g.headerTitle,children:[a," Users"]}),t.jsxs("div",{style:g.headerSubtitle,children:[A.length," ",A.length===1?"user":"users"," in this category"]})]})]}),t.jsx("button",{style:g.closeButton,onClick:e,onMouseEnter:Q=>Q.currentTarget.style.backgroundColor="rgba(59,130,246,0.1)",onMouseLeave:Q=>Q.currentTarget.style.backgroundColor="transparent",children:t.jsx(gr,{size:24})})]}),t.jsx("div",{style:g.content,children:A.length===0?t.jsxs("div",{style:g.noUsers,children:[t.jsx("div",{style:g.noUsersIcon,children:""}),t.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"No users in this category"}),t.jsx("div",{style:{fontSize:"14px",opacity:.8},children:"All users are in other workload categories"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:g.summaryCard,children:t.jsxs("div",{style:g.summaryGrid,children:[t.jsxs("div",{style:g.summaryItem,children:[t.jsx("div",{style:g.summaryValue,children:A.length}),t.jsx("div",{style:g.summaryLabel,children:"Users"})]}),t.jsxs("div",{style:g.summaryItem,children:[t.jsx("div",{style:g.summaryValue,children:b}),t.jsx("div",{style:g.summaryLabel,children:"Avg Hours"})]}),t.jsxs("div",{style:g.summaryItem,children:[t.jsx("div",{style:g.summaryValue,children:R}),t.jsx("div",{style:g.summaryLabel,children:"Avg Days"})]}),t.jsxs("div",{style:g.summaryItem,children:[t.jsxs("div",{style:g.summaryValue,children:[C,"%"]}),t.jsx("div",{style:g.summaryLabel,children:"Avg Capacity"})]})]})}),A.map((Q,S)=>t.jsxs("div",{className:"user-card",style:g.userCard,onMouseEnter:N=>{N.currentTarget.style.transform="translateX(4px)",N.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.15)"},onMouseLeave:N=>{N.currentTarget.style.transform="translateX(0)",N.currentTarget.style.boxShadow="none"},children:[t.jsxs("div",{style:g.userHeader,children:[t.jsxs("div",{style:g.avatar,children:[Q.firstName[0],Q.lastName[0]]}),t.jsxs("div",{style:g.userInfo,children:[t.jsxs("div",{style:g.userName,children:[Q.firstName," ",Q.lastName]}),t.jsxs("div",{style:g.userDepartment,children:[t.jsx("span",{children:Q.department}),t.jsx("span",{children:""}),t.jsx("span",{children:Q.email})]})]})]}),t.jsxs("div",{style:g.statsGrid,children:[t.jsxs("div",{style:g.statItem,children:[t.jsx("div",{style:g.statValue,children:Q.totalHours.toFixed(0)}),t.jsx("div",{style:g.statLabel,children:"Hours"})]}),t.jsxs("div",{style:g.statItem,children:[t.jsx("div",{style:g.statValue,children:Q.totalManDays.toFixed(1)}),t.jsx("div",{style:g.statLabel,children:"Man-Days"})]}),t.jsxs("div",{style:g.statItem,children:[t.jsxs("div",{style:g.statValue,children:[Q.utilizationPercentage.toFixed(1),"%"]}),t.jsx("div",{style:g.statLabel,children:"Capacity"})]})]}),t.jsx("div",{style:g.utilizationBar,children:t.jsx("div",{style:g.utilizationFill(Q.utilizationPercentage)})}),(Q.projectHours>0||Q.operationsHours>0||Q.adminHours>0)&&t.jsxs("div",{style:g.categoryBreakdown,children:[Q.projectHours>0&&t.jsxs("div",{style:g.categoryItem,children:[t.jsx("div",{style:g.categoryDot("#3b82f6")}),t.jsxs("span",{children:["Project: ",Q.projectHours.toFixed(0),"h"]})]}),Q.operationsHours>0&&t.jsxs("div",{style:g.categoryItem,children:[t.jsx("div",{style:g.categoryDot("#8b5cf6")}),t.jsxs("span",{children:["Operations: ",Q.operationsHours.toFixed(0),"h"]})]}),Q.adminHours>0&&t.jsxs("div",{style:g.categoryItem,children:[t.jsx("div",{style:g.categoryDot("#f59e0b")}),t.jsxs("span",{children:["Admin: ",Q.adminHours.toFixed(0),"h"]})]})]})]},S))]})})]})})]})},BE=({isOpen:o,onClose:e,selectedDate:r,events:n,holidays:a,isDarkMode:A})=>{if(!o)return null;const c=N=>{const M={weekday:"long",year:"numeric",month:"long",day:"numeric"};return new Date(N).toLocaleDateString("en-US",M)},p=N=>new Date(N).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),d=(N,M)=>{const Ie=new Date(M)-new Date(N),fe=Math.floor(Ie/(1e3*60*60)),F=Math.floor(Ie%(1e3*60*60)/(1e3*60));return fe>0?`${fe}h ${F}m`:`${F}m`},m=n.filter(N=>{const M=new Date(N.start.dateTime).toDateString(),Ie=new Date(r).toDateString();return M===Ie}).sort((N,M)=>new Date(N.start.dateTime)-new Date(M.start.dateTime)),g=new Date(r),y=g.getFullYear(),b=String(g.getMonth()+1).padStart(2,"0"),R=String(g.getDate()).padStart(2,"0"),C=`${y}-${b}-${R}`,Q=a==null?void 0:a.find(N=>N.date===C),S={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,animation:"fadeIn 0.3s ease-out",padding:"20px"},modal:{backgroundColor:A?"#1e293b":"#ffffff",borderRadius:"24px",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.3)",width:"90%",maxWidth:"700px",maxHeight:"85vh",overflow:"hidden",animation:"slideUp 0.3s ease-out",border:A?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)"},header:{padding:"24px 28px",borderBottom:A?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",display:"flex",justifyContent:"space-between",alignItems:"center",background:A?"linear-gradient(135deg, #334155 0%, #1e293b 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)"},headerTitle:{fontSize:"20px",fontWeight:"700",color:A?"#e2e8f0":"#1e293b",marginBottom:"4px"},headerDate:{fontSize:"14px",color:A?"#94a3b8":"#64748b",fontWeight:"500"},closeButton:{background:"none",border:"none",color:A?"#94a3b8":"#64748b",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},content:{padding:"24px 28px",maxHeight:"calc(85vh - 100px)",overflowY:"auto"},noEvents:{textAlign:"center",padding:"60px 20px",color:A?"#94a3b8":"#64748b"},noEventsIcon:{fontSize:"48px",marginBottom:"16px",opacity:.5},eventCard:{backgroundColor:A?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",borderRadius:"16px",padding:"20px",marginBottom:"16px",borderLeft:"4px solid #3b82f6",transition:"all 0.2s ease",cursor:"pointer",position:"relative",overflow:"hidden"},eventTime:{fontSize:"13px",fontWeight:"600",color:"#3b82f6",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},eventTitle:{fontSize:"16px",fontWeight:"600",color:A?"#e2e8f0":"#1e293b",marginBottom:"8px",lineHeight:"1.4"},eventDetails:{display:"flex",flexDirection:"column",gap:"6px",fontSize:"13px",color:A?"#94a3b8":"#64748b"},eventDetail:{display:"flex",alignItems:"center",gap:"8px"},eventBadge:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:A?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.1)",color:"#3b82f6",marginTop:"8px"}};return t.jsxs(t.Fragment,{children:[t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(30px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        .event-card:hover {
          transform: translateX(4px);
          box-shadow: 0 8px 20px rgba(59,130,246,0.15);
        }
      `}),t.jsx("div",{style:S.overlay,onClick:e,children:t.jsxs("div",{style:S.modal,onClick:N=>N.stopPropagation(),children:[t.jsxs("div",{style:S.header,children:[t.jsxs("div",{children:[t.jsxs("div",{style:S.headerTitle,children:[m.length+(Q?1:0)," ",m.length+(Q?1:0)===1?"Event":"Events"]}),t.jsx("div",{style:S.headerDate,children:c(r)})]}),t.jsx("button",{style:S.closeButton,onClick:e,onMouseEnter:N=>N.currentTarget.style.backgroundColor="rgba(59,130,246,0.1)",onMouseLeave:N=>N.currentTarget.style.backgroundColor="transparent",children:t.jsx(gr,{size:24})})]}),t.jsx("div",{style:S.content,children:m.length===0&&!Q?t.jsxs("div",{style:S.noEvents,children:[t.jsx("div",{style:S.noEventsIcon,children:""}),t.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"No events scheduled"}),t.jsx("div",{style:{fontSize:"14px",opacity:.8},children:"You're free this day!"})]}):t.jsxs(t.Fragment,{children:[Q&&t.jsxs("div",{className:"event-card",style:{...S.eventCard,borderLeft:"4px solid #ef4444",backgroundColor:A?"rgba(239,68,68,0.15)":"rgba(254,226,226,0.8)"},children:[t.jsxs("div",{style:{...S.eventTime,color:"#ef4444"},children:[t.jsx(wo,{size:14}),"Public Holiday"]}),t.jsxs("div",{style:S.eventTitle,children:[" ",Q.name]}),t.jsx("div",{style:S.eventDetails,children:t.jsxs("div",{style:{...S.eventBadge,backgroundColor:A?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",color:"#ef4444"},children:[t.jsx("span",{style:{fontSize:"14px"},children:""}),"Non-Working Day"]})})]}),m.map((N,M)=>{var Ie,fe,F;return t.jsxs("div",{className:"event-card",style:S.eventCard,onMouseEnter:ae=>{ae.currentTarget.style.transform="translateX(4px)",ae.currentTarget.style.boxShadow="0 8px 20px rgba(59,130,246,0.15)"},onMouseLeave:ae=>{ae.currentTarget.style.transform="translateX(0)",ae.currentTarget.style.boxShadow="none"},children:[t.jsxs("div",{style:S.eventTime,children:[t.jsx(bs,{size:14}),p(N.start.dateTime)," - ",p(N.end.dateTime),t.jsx("span",{style:{marginLeft:"auto",fontSize:"12px",opacity:.7},children:d(N.start.dateTime,N.end.dateTime)})]}),t.jsx("div",{style:S.eventTitle,children:N.subject||"Untitled Event"}),t.jsxs("div",{style:S.eventDetails,children:[((Ie=N.location)==null?void 0:Ie.displayName)&&t.jsxs("div",{style:S.eventDetail,children:[t.jsx(ab,{size:14}),N.location.displayName]}),N.isOnlineMeeting&&t.jsxs("div",{style:S.eventBadge,children:[t.jsx(f5,{size:14}),"Online Meeting"]}),((F=(fe=N.organizer)==null?void 0:fe.emailAddress)==null?void 0:F.name)&&t.jsxs("div",{style:S.eventDetail,children:[t.jsx(qt,{size:14}),"Organized by ",N.organizer.emailAddress.name]})]})]},M)})]})})]})})]})},SE=({isDarkMode:o,events:e=[],holidays:r=[],onDateClick:n})=>{const[a,A]=h.useState(new Date),[c,p]=h.useState(null),d=new Date,m=a.getMonth(),g=a.getFullYear(),y=["January","February","March","April","May","June","July","August","September","October","November","December"],b=["S","M","T","W","T","F","S"],R=new Date(g,m,1),C=new Date(g,m+1,0),Q=R.getDay(),S=C.getDate(),N=[];for(let Z=0;Z<Q;Z++)N.push(null);for(let Z=1;Z<=S;Z++)N.push(Z);const M=Z=>Z===d.getDate()&&m===d.getMonth()&&g===d.getFullYear(),Ie=()=>{A(new Date(g,m-1,1))},fe=()=>{A(new Date(g,m+1,1))},F=Z=>{if(!Z)return!1;const ue=new Date(g,m,Z).toDateString();return e.some(pe=>new Date(pe.start.dateTime).toDateString()===ue)},ae=Z=>{if(!Z)return null;const ue=g,pe=String(m+1).padStart(2,"0"),we=String(Z).padStart(2,"0"),Pe=`${ue}-${pe}-${we}`;return r.find(re=>re.date===Pe)},ee=Z=>{if(!Z)return 0;const ue=new Date(g,m,Z).toDateString();return e.filter(pe=>new Date(pe.start.dateTime).toDateString()===ue).length},Re=Z=>{if(!Z)return;const ue=new Date(g,m,Z);n(ue)},se={container:{marginTop:"24px",padding:"20px",backgroundColor:o?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",transition:"all 0.3s ease",backdropFilter:"blur(10px)",border:o?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"0 8px"},monthYear:{fontSize:"18px",fontWeight:"700",color:o?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},navButton:Z=>({background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",color:o?"#94a3b8":"#64748b",transition:"all 0.2s ease",backgroundColor:Z?"rgba(59,130,246,0.1)":"transparent",transform:Z?"scale(1.1)":"scale(1)"}),weekDays:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"12px"},weekDay:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:o?"#94a3b8":"#64748b",padding:"8px 4px",textTransform:"uppercase",transition:"all 0.3s ease"},daysGrid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},day:(Z,ue,pe,we)=>({textAlign:"center",padding:"12px 4px",fontSize:"14px",fontWeight:ue?"700":"500",color:Z?ue?o?"#ffffff":"#1e293b":o?"#e2e8f0":"#374151":"transparent",border:we?"2px solid #3b82f6":"none",backgroundColor:we?"rgba(59,130,246,0.15)":ue?"#3b82f6":pe?"rgba(59,130,246,0.1)":"transparent",borderRadius:"8px",cursor:Z?"pointer":"default",transition:"all 0.2s ease",transform:pe&&Z?"scale(1.1)":"scale(1)",boxShadow:ue?"0 4px 12px rgba(59,130,246,0.3)":"none",position:"relative"}),eventDot:{position:"absolute",bottom:"4px",left:"50%",transform:"translateX(-50%)",fontSize:"8px",color:"#3b82f6"}};return t.jsxs("div",{style:se.container,children:[t.jsxs("div",{style:se.header,children:[t.jsx("button",{onClick:Ie,style:se.navButton(c==="prev"),onMouseEnter:()=>p("prev"),onMouseLeave:()=>p(null),children:t.jsx(nb,{size:20})}),t.jsxs("div",{style:se.monthYear,children:[y[m]," ",g]}),t.jsx("button",{onClick:fe,style:se.navButton(c==="next"),onMouseEnter:()=>p("next"),onMouseLeave:()=>p(null),children:t.jsx(Nc,{size:20})})]}),t.jsx("div",{style:se.weekDays,children:b.map((Z,ue)=>t.jsx("div",{style:se.weekDay,children:Z},ue))}),t.jsx("div",{style:se.daysGrid,children:N.map((Z,ue)=>{const pe=ee(Z),we=ae(Z);return t.jsxs("div",{onClick:()=>Re(Z),style:{...se.day(Z,M(Z),c===`day-${ue}`,F(Z)),border:we?"2px solid #ef4444":void 0,backgroundColor:we?"rgba(239,68,68,0.12)":void 0},onMouseEnter:()=>Z&&p(`day-${ue}`),onMouseLeave:()=>p(null),children:[Z,we&&t.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",fontSize:"9px",fontWeight:"700",color:"#ef4444"},children:"PH"}),pe>0&&t.jsx("div",{style:se.eventDot,children:"".repeat(Math.min(pe,3))})]},ue)})})]})},Pp=({value:o,suffix:e="",duration:r=1e3})=>{const[n,a]=h.useState(0);return h.useEffect(()=>{let A=0;const c=o||0,p=c/(r/16),d=setInterval(()=>{A+=p,A>=c?(a(c),clearInterval(d)):a(Math.floor(A))},16);return()=>clearInterval(d)},[o,r]),t.jsxs(t.Fragment,{children:[n,e]})},Ox=({current:o,previous:e,timePeriod:r="week"})=>{const n=o-e,a=e>0?(n/e*100).toFixed(1):0;return n===0||!e?null:t.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:n>0?"#10b981":"#ef4444",marginTop:"4px",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[n>0?"":""," ",Math.abs(a),"%",t.jsxs("span",{style:{fontSize:"10px",opacity:.7},children:["vs last ",r]})]})},Np=()=>{const o=localStorage.getItem("darkMode")==="true";return t.jsx("div",{style:{background:o?"linear-gradient(90deg, #374151 0%, #4b5563 50%, #374151 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"16px",height:"120px",marginBottom:"20px"}})},IE=()=>{var wt,w,ce,Ce,H,P;const{collapsed:o}=Hd(),[e,r]=h.useState([]),[n,a]=h.useState("calendar"),[A,c]=h.useState("personal"),[p,d]=h.useState([]),[m,g]=h.useState(!1),[y,b]=h.useState(!1),[R,C]=h.useState(!1),[Q,S]=h.useState(!1),[N,M]=h.useState(new Date),[Ie,fe]=h.useState("week"),[F,ae]=h.useState(null),[ee,Re]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[se,Z]=h.useState(null),[ue,pe]=h.useState(!0),[we,Pe]=h.useState({weeklyHours:0,capacityUtilization:0,projectHours:0,targetHours:32}),[re,Ee]=h.useState({totalHours:0,capacityUtilization:0,leaveDays:0}),[k,ge]=h.useState(!1),[_,G]=h.useState(!1),[E,D]=h.useState(null),[ie,L]=h.useState(null),[j,de]=h.useState(!1),[Oe,Ge]=h.useState(null),[Ve,ke]=h.useState(!1),Be=h.useRef(null),nt=h.useRef(null),yt=h.useRef(null),q=h.useRef(null),[lt,ye]=h.useState({top:64,left:0}),[ze,dt]=h.useState({summary:{totalUsers:0,overworked:0,underutilized:0,optimal:0},users:[],year:new Date().getFullYear()});h.useEffect(()=>{q.current||(q.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),yt.current&&document.head.removeChild(yt.current);const z=document.createElement("style");z.setAttribute("data-component","admin-dashboard-background");const xe=ee?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return z.textContent=`
      .admin-dashboard-page {
        min-height: 100vh;
        background: ${xe};
      }
      
      body {
        background: ${xe} !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      html, body, #root {
        margin: 0 !important;
        padding: 0 !important;
        background: ${xe} !important;
      }
      
      #root > div:first-child,
      .app > div:first-child,
      .main-content,
      .page-container {
        background: transparent !important;
        min-height: 100vh;
      }
      
      div[style*="background: white"],
      div[style*="background-color: white"],
      div[style*="background: #fff"],
      div[style*="background-color: #fff"] {
        background: transparent !important;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }

      @keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-6px);
  }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      .table-row:hover {
        background-color: rgba(59,130,246,0.05) !important;
        transform: scale(1.01);
      }
      
      * {
        transition: background-color 0.3s ease, background 0.3s ease;
      }
    `,document.head.appendChild(z),yt.current=z,()=>{yt.current&&document.head.contains(yt.current)&&(document.head.removeChild(yt.current),yt.current=null),q.current&&document.querySelectorAll('[data-component="admin-dashboard-background"]').length===0&&Object.assign(document.body.style,q.current)}},[ee]),h.useEffect(()=>{(async()=>{try{console.log(" Fetching user data from /user/profile...");const xe=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" API Response status:",xe.status),xe.ok){const Me=await xe.json();console.log(" User data received:",Me),Z(Me),Me.role==="admin"?(console.log(" Admin user detected - setting status view"),a("status")):(console.log(" Member user detected - setting calendar view"),a("calendar"))}else{const Me=await xe.text();console.error(" Failed to fetch user data:",xe.status,Me),Z(null)}}catch(xe){console.error(" Error fetching user data:",xe),Z(null)}finally{pe(!1)}})()},[]),h.useEffect(()=>{(async()=>{try{const xe=new Date().getFullYear(),Me=await Te(`/actuals/holidays?year=${xe}`,{method:"GET",credentials:"include"});if(Me.ok){const O=await Me.json();d(O)}}catch(xe){console.error("Failed to fetch holidays:",xe)}})()},[]),h.useEffect(()=>{if(Be.current&&y){const z=Be.current.getBoundingClientRect();ye({top:z.bottom+4,left:z.left})}},[y]),h.useEffect(()=>{const z=xe=>{Be.current&&!Be.current.contains(xe.target)&&b(!1),nt.current&&!nt.current.contains(xe.target)&&g(!1)};return(y||m)&&document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[y,m]),h.useEffect(()=>{const z=async()=>{var xe;try{console.log(" Starting calendar fetch..."),console.log(" User data exists:",!!se),console.log(" Fetching from: /calendar/events");const Me=await Te("/calendar/events",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" Calendar response status:",Me.status),Me.ok){const O=await Me.json();console.log(" Calendar data received:",O),console.log(" Number of events:",((xe=O.events)==null?void 0:xe.length)||0),r(O.events||[])}else{const O=await Me.text();console.error(" Calendar fetch failed:",Me.status),console.error(" Error response:",O)}}catch(Me){console.error(" Calendar fetch error:",Me),console.error(" Error details:",Me.message)}};console.log(" Calendar useEffect running, userData:",se),se?(console.log(" User data available, fetching calendar..."),z()):console.log(" Waiting for user data...")},[se]),h.useEffect(()=>{se&&(async()=>{try{console.log(` Fetching user stats for period: ${Ie}`);const xe=await Te(`/actuals/stats?period=${Ie}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(xe.ok){const Me=await xe.json();console.log(" Stats received:",Me),Ee(we),Pe(Me)}else console.error(" Failed to fetch stats")}catch(xe){console.error(" Error fetching stats:",xe)}})()},[se,Ie]),h.useEffect(()=>{se&&(async()=>{if(!(!se||se.role!=="admin"))try{const xe=await Te(`/api/workload-status?period=${Ie}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(xe.ok){const Me=await xe.json();dt(Me)}}catch(xe){console.error("Error fetching workload status:",xe)}})()},[se,Ie]),h.useEffect(()=>{if(Q||Ve){const z=window.scrollY;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${z}px`,document.body.style.width="100%",()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,z)}}},[Q,Ve]);const Ne=()=>{const z=!ee;Re(z),C(!1);try{localStorage.setItem("darkMode",z.toString())}catch{console.log("Dark mode preference cannot be saved in this environment")}},B=z=>{M(z),S(!0)},U=z=>z<70?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":z<=100?"linear-gradient(135deg, #10b981 0%, #059669 100%)":z<=120?"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",Ae={page:{minHeight:"100vh",padding:"0",background:ee?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease",boxSizing:"border-box",width:"100%",overflowX:"hidden"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:ee?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},card:(z,xe)=>({backgroundColor:ee?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"28px",marginBottom:"28px",boxShadow:z?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:z?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",border:ee?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:xe==="stats"?"visible":"hidden",zIndex:xe==="stats"&&(j||ie==="leave")?50:1}),cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.03) 0%, transparent 70%)",opacity:0,transition:"opacity 0.4s ease",pointerEvents:"none"},flexRow:{display:"flex",justifyContent:"space-between",gap:"32px",flexWrap:"wrap"},statItem:z=>({flex:1,textAlign:"center",padding:"20px",borderRadius:"16px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",backgroundColor:z?"rgba(59,130,246,0.05)":"transparent",transform:z?"scale(1.05)":"scale(1)",position:"relative"}),statLabel:{fontSize:"14px",color:ee?"#94a3b8":"#64748b",marginBottom:"8px",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},statValue:z=>({fontSize:"36px",fontWeight:"800",color:ee?"#e2e8f0":"#1e293b",transition:"all 0.3s ease",transform:z?"scale(1.1)":"scale(1)",textShadow:z?"0 4px 8px rgba(30,41,59,0.3)":"none"}),statusFlex:{display:"flex",gap:"20px",flexWrap:"wrap",marginTop:"24px"},capacityValue:(z,xe)=>({fontSize:"36px",fontWeight:"800",backgroundImage:U(xe),backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",transition:"all 0.3s ease",transform:z?"scale(1.1)":"scale(1)"}),statusBox:(z,xe,Me)=>({flex:1,background:ee?`linear-gradient(135deg, ${xe} 0%, ${xe}dd 100%)`:`linear-gradient(135deg, ${z} 0%, ${z}dd 100%)`,borderRadius:"16px",padding:"24px",textAlign:"center",minWidth:"160px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",transform:Me?"translateY(-4px) scale(1.03)":"translateY(0) scale(1)",boxShadow:Me?"0 12px 24px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",border:ee?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(255,255,255,0.5)",position:"relative",overflow:"hidden"}),statusTitle:{fontSize:"16px",fontWeight:"700",marginBottom:"8px",color:ee?"#e2e8f0":"#374151",transition:"all 0.3s ease"},statusCount:{fontSize:"24px",fontWeight:"800",marginBottom:"8px",color:ee?"#f1f5f9":"#1f2937",transition:"all 0.3s ease"},statusNote:{fontSize:"12px",color:ee?"#94a3b8":"#6b7280",fontWeight:"500",transition:"all 0.3s ease"},table:{width:"100%",borderCollapse:"collapse",marginTop:"20px",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},th:{textAlign:"left",backgroundColor:ee?"#4b5563":"#f8fafc",padding:"16px 12px",fontSize:"14px",color:ee?"#e2e8f0":"#374151",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},td:{padding:"16px 12px",fontSize:"15px",color:ee?"#e2e8f0":"#1f2937",borderBottom:ee?"1px solid #4b5563":"1px solid #f1f5f9",transition:"all 0.3s ease"},tableRow:{transition:"all 0.2s ease",cursor:"pointer"},sectionOverlay:{position:"fixed",top:lt.top,left:lt.left,zIndex:999,backgroundColor:ee?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:ee?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},statusOverlay:{position:"absolute",top:"100%",left:0,zIndex:9999,backgroundColor:ee?"rgba(30,41,59,0.98)":"rgba(255,255,255,0.98)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.25)",padding:"12px 0",minWidth:"160px",border:ee?"2px solid rgba(51,65,85,0.8)":"2px solid rgba(255,255,255,0.8)",marginTop:"8px",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",pointerEvents:"auto",transition:"all 0.3s ease"},blurOption:z=>({backgroundColor:z?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:ee?"#e2e8f0":"#374151",transform:z?"translateX(4px)":"translateX(0)",borderLeft:z?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),toggleViewContainer:{fontSize:"18px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:ee?"#e2e8f0":"#1e293b"},toggleViewContainerStatic:{fontSize:"18px",fontWeight:"700",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:ee?"#e2e8f0":"#1e293b"},chevron:(z,xe)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:z||xe?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:z||xe?"#3b82f6":ee?"#94a3b8":"#64748b"}),floatingIcon:{position:"absolute",top:"20px",right:"20px",opacity:.1,fontSize:"48px",color:"#3b82f6"},topButton:z=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:z?"rgba(59,130,246,0.1)":ee?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:z?"#3b82f6":ee?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:z?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:z?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:ee?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:ee?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:ee?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:ee?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:ee?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:ee?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:ee?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:ee?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:ee?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},activityTitle:{marginBottom:"20px",fontSize:"18px",fontWeight:"700",color:ee?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},loadingSpinner:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",fontSize:"18px",color:ee?"#94a3b8":"#64748b"}},Y={container:{display:"flex",gap:"8px",padding:"4px",backgroundColor:ee?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",borderRadius:"12px",border:ee?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backdropFilter:"blur(10px)",marginBottom:"20px",width:"fit-content"},button:(z,xe)=>({padding:"10px 20px",borderRadius:"8px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:z?"#3b82f6":xe?"rgba(59,130,246,0.1)":"transparent",color:z?"#fff":ee?"#e2e8f0":"#64748b",boxShadow:z?"0 2px 8px rgba(59,130,246,0.3)":"none",transform:xe&&!z?"scale(1.05)":"scale(1)"})},V=z=>{Ge(z),ke(!0)},ve=z=>{c(z),b(!1),z==="team"?window.location.href="/adminteamcapacity":z==="utilization"&&(window.location.href="/adminutilization")},me=()=>{if(!se)return"Loading...";const z=se.firstName||"User";switch(A){case"personal":return`Welcome back, ${z}!`;case"team":return"Team Capacity Summary";case"utilization":return"Utilization Overview";default:return`Welcome back, ${z}!`}},T=(se==null?void 0:se.role)==="admin";return ue?t.jsx("div",{className:"admin-dashboard-page",style:Ae.page,children:t.jsxs("div",{style:{padding:"30px",background:"transparent",minHeight:"100vh"},children:[t.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:ee?"#f1f5f9":"#1e293b",marginBottom:"32px"},children:"Loading..."}),t.jsx(Np,{}),t.jsx(Np,{}),t.jsx(Np,{})]})}):se?t.jsxs("div",{className:"admin-dashboard-page",style:Ae.page,children:[t.jsxs("div",{style:{padding:"30px",background:"transparent",minHeight:"100vh"},children:[t.jsxs("div",{style:Ae.headerRow,children:[t.jsx("div",{style:Ae.headerLeft,children:T?t.jsx("div",{style:Ae.toggleViewContainerStatic,className:"floating",children:t.jsx("span",{style:Ae.header,children:me()})}):t.jsx("div",{style:Ae.toggleViewContainerStatic,className:"floating",children:t.jsx("span",{style:Ae.header,children:me()})})}),t.jsxs("div",{style:Ae.headerRight,children:[t.jsxs("button",{style:Ae.topButton(E==="alerts"),onMouseEnter:()=>D("alerts"),onMouseLeave:()=>D(null),onClick:()=>{window.location.href="/adminalerts"},children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:Ae.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:Ae.topButton(E==="profile"),onMouseEnter:()=>{D("profile"),C(!0)},onMouseLeave:()=>{D(null)},onClick:()=>{window.location.href="/adminprofile"},children:t.jsx(qt,{size:20})}),R&&se&&t.jsxs("div",{style:Ae.profileTooltip,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:[t.jsx("div",{style:Ae.tooltipArrow}),t.jsxs("div",{style:Ae.userInfo,children:[t.jsxs("div",{style:Ae.avatar,children:[(((wt=se.firstName)==null?void 0:wt[0])||"").toUpperCase(),(((w=se.lastName)==null?void 0:w[0])||"").toUpperCase()]}),t.jsxs("div",{style:Ae.userDetails,children:[t.jsxs("div",{style:Ae.userName,children:[se.firstName||"Unknown"," ",se.lastName||"User"]}),t.jsxs("div",{style:Ae.userRole,children:[se.role==="admin"?"Admin":"Member","  ",se.department||"N/A"]})]})]}),t.jsxs("div",{style:Ae.userStats,children:[t.jsxs("div",{style:Ae.tooltipStatItem,children:[t.jsx("div",{style:Ae.tooltipStatNumber,children:we.totalHours}),t.jsx("div",{style:Ae.tooltipStatLabel,children:"Hours"})]}),t.jsxs("div",{style:Ae.tooltipStatItem,children:[t.jsx("div",{style:Ae.tooltipStatNumber,children:we.projectHours>0?Math.ceil(we.projectHours/40):0}),t.jsx("div",{style:Ae.tooltipStatLabel,children:"Projects"})]}),t.jsxs("div",{style:Ae.tooltipStatItem,children:[t.jsxs("div",{style:Ae.tooltipStatNumber,children:[we.capacityUtilization,"%"]}),t.jsx("div",{style:Ae.tooltipStatLabel,children:"Capacity"})]})]}),t.jsx("button",{style:Ae.themeToggle,onClick:Ne,children:ee?" Light Mode":" Dark Mode"})]})]})]})]}),T&&y&&t.jsx("div",{style:Ae.sectionOverlay,onMouseDown:z=>z.stopPropagation(),onClick:z=>z.stopPropagation(),children:t.jsx("div",{children:["personal","team","utilization"].map((z,xe)=>t.jsx("div",{style:Ae.blurOption(E===`section-${xe}`),onClick:Me=>{Me.preventDefault(),Me.stopPropagation(),ve(z)},onMouseDown:Me=>{Me.preventDefault(),Me.stopPropagation()},onMouseEnter:()=>D(`section-${xe}`),onMouseLeave:()=>D(null),children:z==="personal"?"Personal Dashboard":z==="team"?"Team Capacity":"Utilization Overview"},z))})}),t.jsxs("div",{style:Y.container,children:[t.jsx("button",{style:Y.button(Ie==="week",F==="week"),onClick:()=>fe("week"),onMouseEnter:()=>ae("week"),onMouseLeave:()=>ae(null),children:"This Week"}),t.jsx("button",{style:Y.button(Ie==="month",F==="month"),onClick:()=>fe("month"),onMouseEnter:()=>ae("month"),onMouseLeave:()=>ae(null),children:"This Month"})]}),t.jsxs("div",{style:Ae.card(E==="stats","stats"),onMouseEnter:()=>D("stats"),onMouseLeave:()=>D(null),children:[t.jsx("div",{style:Ae.cardGlow}),t.jsx("div",{style:Ae.floatingIcon,children:t.jsx(bd,{})}),t.jsxs("div",{style:Ae.flexRow,children:[t.jsxs("div",{style:Ae.statItem(ie==="hours"),onMouseEnter:()=>L("hours"),onMouseLeave:()=>L(null),children:[t.jsxs("div",{style:Ae.statLabel,children:[t.jsx(bs,{size:16,style:{display:"inline",marginRight:"4px"}}),"Hours Logged ",Ie==="week"?"This Week":"This Month"]}),t.jsx("div",{style:Ae.statValue(ie==="hours"),children:t.jsx(Pp,{value:we.totalHours||0})}),t.jsx(Ox,{current:we.totalHours||0,previous:re.totalHours||0,timePeriod:Ie}),t.jsx("div",{style:{fontSize:"12px",color:ee?"#94a3b8":"#64748b",marginTop:"4px"},children:"Excludes leave/non-working hours"})]}),t.jsxs("div",{style:{...Ae.statItem(ie==="leave"),position:"relative"},onMouseEnter:()=>L("leave"),onMouseLeave:()=>L(null),children:[t.jsxs("div",{style:Ae.statLabel,children:[t.jsx(wo,{size:16,style:{display:"inline",marginRight:"4px"}}),"Leave / Holidays "]}),t.jsx("div",{style:{fontSize:"36px",fontWeight:"800",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",transition:"all 0.3s ease",transform:ie==="leave"?"scale(1.1)":"scale(1)"},children:t.jsx(Pp,{value:(we.leaveDays||0)+(we.holidayDays||0)})}),t.jsxs("div",{style:{fontSize:"12px",color:ee?"#94a3b8":"#64748b",marginTop:"4px"},children:["days ",Ie==="week"?"this week":"this month"]}),ie==="leave"&&t.jsxs("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px",background:ee?"#020617":"#ffffff",color:ee?"#e5e7eb":"#1f2937",padding:"12px",borderRadius:"10px",fontSize:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",zIndex:1e3,minWidth:"220px"},children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Leave:"})," ",we.leaveDays||0," days"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Public Holidays:"})," ",we.holidayDays||0," days"]}),((ce=we.holidaysInPeriod)==null?void 0:ce.length)>0&&t.jsxs("div",{style:{marginTop:"8px",opacity:.85},children:[t.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:"Holidays:"}),we.holidaysInPeriod.map((z,xe)=>t.jsxs("div",{children:[" ",z.name]},xe))]})]})]}),t.jsxs("div",{style:{...Ae.statItem(ie==="capacity"),position:"relative"},onMouseEnter:()=>L("capacity"),onMouseLeave:()=>L(null),children:[t.jsxs("div",{onMouseEnter:()=>de(!0),onMouseLeave:()=>de(!1),children:[t.jsxs("div",{style:Ae.statLabel,children:[t.jsx(GA,{size:16,style:{display:"inline",marginRight:"4px"}}),"Capacity Utilization "]}),t.jsx("div",{style:Ae.capacityValue(ie==="capacity",we.capacityUtilization||0),children:t.jsx(Pp,{value:we.capacityUtilization||0,suffix:"%"})}),t.jsx("div",{style:{width:"100%",height:"6px",background:ee?"#374151":"#e5e7eb",borderRadius:"3px",overflow:"hidden",marginTop:"8px"},children:t.jsx("div",{style:{width:`${Math.min(we.capacityUtilization||0,100)}%`,height:"100%",background:U(we.capacityUtilization||0),transition:"width 1s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"3px"}})}),j&&t.jsxs("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px",background:ee?"#020617":"#ffffff",color:ee?"#e5e7eb":"#1f2937",padding:"12px",borderRadius:"10px",fontSize:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",zIndex:1e3,minWidth:"220px"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{color:"#3b82f6"},children:""})," < 70%  Underutilized"]}),t.jsxs("div",{children:[t.jsx("span",{style:{color:"#10b981"},children:""})," 70100%  Optimal"]}),t.jsxs("div",{children:[t.jsx("span",{style:{color:"#f59e0b"},children:""})," 100120%  Stretched"]}),t.jsxs("div",{children:[t.jsx("span",{style:{color:"#ef4444"},children:""})," > 120%  Overloaded"]})]})]}),t.jsx(Ox,{current:we.capacityUtilization||0,previous:re.capacityUtilization||0,timePeriod:Ie}),t.jsxs("div",{style:{fontSize:"12px",color:ee?"#94a3b8":"#64748b",marginTop:"4px"},children:[we.effectiveWorkingDays>0?`Avg: ${(we.totalHours/we.effectiveWorkingDays).toFixed(1)}h/day`:"No working days","  ",we.effectiveWorkingDays||0," working days"]})]})]})]}),t.jsxs("div",{style:Ae.card(E==="status"),onMouseEnter:()=>D("status"),onMouseLeave:()=>D(null),children:[t.jsx("div",{style:Ae.cardGlow}),t.jsx("div",{style:Ae.floatingIcon,children:t.jsx(Un,{})}),t.jsxs("div",{style:{position:"relative"},children:[T?t.jsxs("div",{ref:nt,style:Ae.toggleViewContainer,onClick:()=>g(z=>!z),onMouseEnter:()=>ge(!0),onMouseLeave:()=>ge(!1),children:[n==="status"?"Status":"Mini Calendar",t.jsx(Mo,{style:Ae.chevron(m,k),size:18})]}):t.jsx("div",{style:Ae.toggleViewContainerStatic,children:"Mini Calendar"}),T&&m&&t.jsxs("div",{style:Ae.statusOverlay,onMouseDown:z=>z.stopPropagation(),children:[t.jsx("div",{style:Ae.blurOption(E==="view-0"),onMouseDown:z=>{z.preventDefault(),z.stopPropagation(),a("status"),g(!1)},onMouseEnter:()=>D("view-0"),onMouseLeave:()=>D(null),children:"Status"}),t.jsx("div",{style:Ae.blurOption(E==="view-1"),onMouseDown:z=>{z.preventDefault(),z.stopPropagation(),a("calendar"),g(!1)},onMouseEnter:()=>D("view-1"),onMouseLeave:()=>D(null),children:"Mini Calendar"})]})]}),n==="status"&&T?t.jsx("div",{style:Ae.statusFlex,children:[{title:"Overloaded",count:`${ze.summary.overworked}/${ze.summary.totalUsers}`,users:((Ce=ze.users)==null?void 0:Ce.filter(z=>z.status==="Overworked"))||[],note:"Users working over capacity",color:"#fee2e2",darkColor:"rgba(239,68,68,0.15)"},{title:"Underutilized",count:`${ze.summary.underutilized}/${ze.summary.totalUsers}`,users:((H=ze.users)==null?void 0:H.filter(z=>z.status==="Underutilized"))||[],note:"Users working under capacity",color:"#fef9c3",darkColor:"rgba(234,179,8,0.15)"},{title:"Optimal",count:`${ze.summary.optimal}/${ze.summary.totalUsers}`,users:((P=ze.users)==null?void 0:P.filter(z=>z.status==="Optimal"))||[],note:"Users working at optimal capacity",color:"#dcfce7",darkColor:"rgba(34,197,94,0.15)"}].map((z,xe)=>t.jsxs("div",{style:Ae.statusBox(z.color,z.darkColor,E===`status-${xe}`),onMouseEnter:()=>D(`status-${xe}`),onMouseLeave:()=>D(null),onClick:()=>V(z),children:[ee&&t.jsx("div",{style:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:z.title==="Overloaded"?"radial-gradient(circle, rgba(239,68,68,0.1) 0%, transparent 70%)":z.title==="Underutilized"?"radial-gradient(circle, rgba(234,179,8,0.1) 0%, transparent 70%)":"radial-gradient(circle, rgba(34,197,94,0.1) 0%, transparent 70%)",opacity:E===`status-${xe}`?1:.5,transition:"opacity 0.4s ease",pointerEvents:"none"}}),t.jsx("div",{style:Ae.statusTitle,children:z.title}),t.jsx("div",{style:Ae.statusCount,children:z.count}),t.jsx("div",{style:Ae.statusNote,children:z.note})]},`${xe}-${ee}`))},`status-cards-${ee}`):t.jsx(SE,{isDarkMode:ee,events:e,holidays:p,onDateClick:B})]}),t.jsxs("div",{style:Ae.card(E==="activity"),onMouseEnter:()=>D("activity"),onMouseLeave:()=>D(null),children:[t.jsx("div",{style:Ae.cardGlow}),t.jsx("div",{style:Ae.activityTitle,children:"Recent Activity"}),t.jsxs("table",{style:Ae.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:Ae.th,children:"Date"}),t.jsx("th",{style:Ae.th,children:"Meeting"}),t.jsx("th",{style:Ae.th,children:"Type"}),t.jsx("th",{style:Ae.th,children:"Duration"})]})}),t.jsx("tbody",{children:(()=>{const z=new Date,xe=e.filter(Me=>new Date(Me.end.dateTime)<z).sort((Me,O)=>new Date(O.start.dateTime)-new Date(Me.start.dateTime)).slice(0,10);return xe.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:"4",style:{...Ae.td,textAlign:"center",padding:"60px 20px"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.3},children:""}),t.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:ee?"#e2e8f0":"#1e293b",marginBottom:"8px"},children:"No recent meetings"}),t.jsx("div",{style:{fontSize:"14px",color:ee?"#94a3b8":"#64748b",marginBottom:"16px"},children:"Your past meetings will appear here"}),t.jsx("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"#3b82f6",color:"#fff",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>window.location.href="/calendar",onMouseEnter:Me=>Me.currentTarget.style.transform="scale(1.05)",onMouseLeave:Me=>Me.currentTarget.style.transform="scale(1)",children:"View Calendar"})]})}):xe.map((Me,O)=>{var qe,Ct;const Qt=new Date(Me.start.dateTime),tt=new Date(Me.end.dateTime),zt=Qt.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),ir=tt-Qt,Yt=Math.floor(ir/(1e3*60*60)),vr=Math.floor(ir%(1e3*60*60)/(1e3*60)),Tr=Yt>0?`${Yt}h ${vr}m`:`${vr}m`;let J="Meeting",be="",De=ee?"#94a3b8":"#64748b";Me.isOnlineMeeting?(J="Online Meeting",be="",De="#3b82f6"):(qe=Me.location)!=null&&qe.displayName&&(J="In-Person",be="",De="#10b981");const K=((Ct=Me.subject)==null?void 0:Ct.toLowerCase())||"";return(K.includes("call")||K.includes("phone"))&&(J="Call",be="",De="#8b5cf6"),t.jsxs("tr",{className:"table-row",style:{...Ae.tableRow,cursor:"pointer"},onClick:()=>{M(Qt),S(!0)},onMouseEnter:Lt=>{Lt.currentTarget.style.backgroundColor="rgba(59,130,246,0.05)",Lt.currentTarget.style.transform="scale(1.01)"},onMouseLeave:Lt=>{Lt.currentTarget.style.backgroundColor="transparent",Lt.currentTarget.style.transform="scale(1)"},children:[t.jsx("td",{style:Ae.td,children:zt}),t.jsx("td",{style:{...Ae.td,fontWeight:"600",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Me.subject||"Untitled Meeting"}),t.jsxs("td",{style:{...Ae.td,color:De,fontWeight:"600"},children:[t.jsx("span",{style:{marginRight:"6px"},children:be}),J]}),t.jsx("td",{style:Ae.td,children:Tr})]},O)})})()})]})]})]}),t.jsx(BE,{isOpen:Q,onClose:()=>S(!1),selectedDate:N,events:e,holidays:p,isDarkMode:ee}),t.jsx(CE,{isOpen:Ve,onClose:()=>ke(!1),statusData:Oe,isDarkMode:ee})]}):t.jsx("div",{className:"admin-dashboard-page",style:Ae.page,children:t.jsx("div",{style:Ae.loadingSpinner,children:t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"24px",marginBottom:"16px"},children:""}),t.jsx("div",{children:"Unable to load user profile"}),t.jsx("div",{style:{fontSize:"14px",marginTop:"8px",opacity:.7},children:"Please ensure you are logged in and try again"}),t.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"16px",padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"#3b82f6",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Retry"})]})})})},Tt=({value:o,onChange:e,options:r=[],label:n,placeholder:a="Select option...",isDarkMode:A,disabled:c=!1,searchable:p=!1,groupedOptions:d=null,allowCustom:m=!1,customPlaceholder:g="Enter custom value...",compact:y=!1,hasIcon:b=!1,variant:R="blue",clearable:C=!0})=>{const S={blue:{primary:"#3b82f6",hover:"rgba(59,130,246,0.1)",border:"rgba(59,130,246,0.3)",shadow:"rgba(59,130,246,0.1)"},purple:{primary:"#8b5cf6",hover:"rgba(139,92,246,0.1)",border:"rgba(139,92,246,0.3)",shadow:"rgba(139,92,246,0.1)"}}[R],[N,M]=h.useState(!1),[Ie,fe]=h.useState(""),[F,ae]=h.useState(null),[ee,Re]=h.useState(!1),[se,Z]=h.useState(""),[ue,pe]=h.useState(320),[we,Pe]=h.useState(!1),re=h.useRef(null),Ee=h.useRef(null);h.useEffect(()=>{const L=j=>{re.current&&!re.current.contains(j.target)&&(M(!1),fe(""))};return N&&document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[N]),h.useEffect(()=>{N&&p&&Ee.current&&Ee.current.focus()},[N,p]),h.useEffect(()=>{if(N&&re.current){const L=()=>{const j=re.current.getBoundingClientRect(),Oe=window.innerHeight-j.bottom-16,Ge=j.top-16,Ve=200,ke=400;Oe>=Ve?(Pe(!1),pe(Math.min(Oe,ke))):Ge>=Ve?(Pe(!0),pe(Math.min(Ge,ke))):Oe>Ge?(Pe(!1),pe(Math.max(Oe,Ve))):(Pe(!0),pe(Math.max(Ge,Ve)))};return L(),window.addEventListener("resize",L),window.addEventListener("scroll",L,!0),()=>{window.removeEventListener("resize",L),window.removeEventListener("scroll",L,!0)}}},[N]);const k=p?r.filter(L=>L.toLowerCase().includes(Ie.toLowerCase())):r,ge=d&&p?Object.keys(d).reduce((L,j)=>{const de=d[j].filter(Oe=>Oe.toLowerCase().includes(Ie.toLowerCase()));return de.length>0&&(L[j]=de),L},{}):d,_=L=>{e(L),M(!1),fe(""),Re(!1)},G=()=>{se.trim()&&(e(se.trim()),M(!1),Re(!1),Z(""))},E=L=>{L.stopPropagation(),e(""),Re(!1),Z("")},D=()=>ee?g:o||a,ie={container:{position:"relative",width:"100%"},label:{fontSize:"14px",fontWeight:"600",color:A?"#e2e8f0":"#374151",marginBottom:"8px",display:"block",transition:"all 0.3s ease"},select:L=>({width:"100%",padding:y?"12px 16px":"16px 20px",paddingLeft:b?"44px":y?"16px":"20px",paddingRight:o?y?"70px":"80px":y?"45px":"50px",borderRadius:"12px",border:L?`2px solid ${S.primary}`:A?y?"1px solid rgba(75,85,99,0.3)":"2px solid #4b5563":y?"1px solid rgba(226,232,240,0.5)":"2px solid #e2e8f0",fontSize:y?"14px":"16px",transition:"all 0.3s ease",backgroundColor:c?A?"#374151":"#f3f4f6":A?y?"rgba(51,65,85,0.5)":"#4b5563":"#fff",color:o?A?"#e2e8f0":"#374151":A?"#94a3b8":"#9ca3af",cursor:c?"not-allowed":"pointer",outline:"none",boxShadow:L?`0 0 0 3px ${S.shadow}`:"0 2px 4px rgba(0,0,0,0.02)",opacity:c?.6:1,userSelect:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),iconContainer:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",gap:"8px",pointerEvents:"none"},icon:L=>({color:A?"#94a3b8":"#64748b",transition:"all 0.3s ease",transform:L?"rotate(180deg)":"rotate(0deg)"}),clearButton:L=>({color:L?"#ef4444":A?"#94a3b8":"#64748b",pointerEvents:"auto",cursor:"pointer",transition:"all 0.2s ease",transform:L?"scale(1.1)":"scale(1)"}),dropdown:{position:"absolute",top:we?"auto":"calc(100% + 8px)",bottom:we?"calc(100% + 8px)":"auto",left:0,right:0,zIndex:9999,backgroundColor:A?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:we?"0 -20px 40px rgba(0,0,0,0.15)":"0 20px 40px rgba(0,0,0,0.15)",border:A?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",animation:we?"slideInUp 0.2s ease-out":"slideIn 0.2s ease-out",maxHeight:`${ue}px`,overflow:"hidden",display:"flex",flexDirection:we?"column-reverse":"column"},searchContainer:{padding:"12px",borderBottom:A?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)"},searchInput:{width:"100%",padding:"10px 12px",paddingLeft:"56px",borderRadius:"8px",border:A?"1px solid #4b5563":"1px solid #e2e8f0",fontSize:"14px",backgroundColor:A?"#374151":"#f9fafb",color:A?"#e2e8f0":"#374151",outline:"none",transition:"all 0.2s ease"},searchIcon:{position:"absolute",left:"24px",top:"50%",transform:"translateY(-50%)",color:A?"#94a3b8":"#64748b",pointerEvents:"none"},optionsList:{overflowY:"auto",overflowX:"hidden",padding:"8px",flex:1,scrollbarWidth:"thin",scrollbarColor:A?"#4b5563 #1e293b":"#cbd5e1 #f1f5f9"},option:(L,j)=>({padding:"12px 16px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:j?"600":"500",transition:"all 0.2s ease",backgroundColor:L?S.hover:"transparent",color:j?S.primary:A?"#e2e8f0":"#374151",display:"flex",alignItems:"center",justifyContent:"space-between",borderLeft:L?`3px solid ${S.primary}`:"3px solid transparent",marginBottom:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"}),groupLabel:{padding:"8px 16px",fontSize:"12px",fontWeight:"700",color:A?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginTop:"8px"},customInputContainer:{padding:"12px",borderTop:A?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)"},customInput:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:A?"1px solid #4b5563":"1px solid #e2e8f0",fontSize:"14px",backgroundColor:A?"#374151":"#fff",color:A?"#e2e8f0":"#374151",outline:"none",transition:"all 0.2s ease",marginBottom:"8px"},customButton:L=>({width:"100%",padding:"8px 12px",borderRadius:"8px",border:"none",backgroundColor:L?S.primary:S.hover,color:L?"#fff":S.primary,fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"}),noResults:{padding:"20px",textAlign:"center",color:A?"#94a3b8":"#64748b",fontSize:"14px"}};return t.jsxs(t.Fragment,{children:[t.jsx("style",{children:`
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /*  Custom Scrollbar Styles */
  .dropdown-options-list::-webkit-scrollbar {
    width: 8px;
  }
  
  .dropdown-options-list::-webkit-scrollbar-track {
    background: ${A?"#1e293b":"#f1f5f9"};
    border-radius: 4px;
  }
  
  .dropdown-options-list::-webkit-scrollbar-thumb {
    background: ${A?"#4b5563":"#cbd5e1"};
    border-radius: 4px;
  }
  
  .dropdown-options-list::-webkit-scrollbar-thumb:hover {
    background: ${A?"#6b7280":"#94a3b8"};
  }
`}),t.jsxs("div",{style:ie.container,ref:re,children:[n&&t.jsx("label",{style:ie.label,children:n}),t.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[ee?t.jsx("input",{type:"text",autoFocus:!0,value:se,placeholder:g,style:{...ie.select(!0),paddingRight:se?y?"70px":"80px":y?"45px":"50px"},onChange:L=>Z(L.target.value),onKeyDown:L=>{L.key==="Enter"&&G(),L.key==="Escape"&&(Re(!1),Z(""))},onBlur:()=>{se.trim()?G():Re(!1)}}):t.jsx("div",{onClick:()=>!c&&M(!N),style:ie.select(N),children:D()}),t.jsxs("div",{style:ie.iconContainer,children:[(o&&!c&&C||ee&&se)&&t.jsx(gr,{size:18,style:ie.clearButton(F==="clear"),onMouseEnter:()=>ae("clear"),onMouseLeave:()=>ae(null),onClick:L=>{ee?(L.stopPropagation(),Z("")):E(L)}}),t.jsx(Mo,{size:18,style:ie.icon(N)})]})]}),N&&!c&&t.jsxs("div",{style:ie.dropdown,children:[p&&t.jsx("div",{style:ie.searchContainer,children:t.jsxs("div",{style:{position:"relative"},children:[t.jsx($A,{size:16,style:ie.searchIcon}),t.jsx("input",{ref:Ee,type:"text",value:Ie,onChange:L=>fe(L.target.value),placeholder:"Search...",style:ie.searchInput})]})}),t.jsxs("div",{style:ie.optionsList,className:"dropdown-options-list",children:[d?t.jsxs(t.Fragment,{children:[Object.keys(ge||{}).length===0&&t.jsx("div",{style:ie.noResults,children:"No results found"}),Object.keys(ge||{}).map(L=>t.jsxs("div",{children:[t.jsx("div",{style:ie.groupLabel,children:L}),ge[L].map((j,de)=>t.jsxs("div",{onClick:()=>_(j),onMouseEnter:()=>ae(`${L}-${de}`),onMouseLeave:()=>ae(null),style:ie.option(F===`${L}-${de}`,o===j),children:[j,o===j&&t.jsx(pg,{size:16})]},`${L}-${de}`))]},L))]}):t.jsxs(t.Fragment,{children:[k.length===0&&t.jsx("div",{style:ie.noResults,children:"No results found"}),k.map((L,j)=>t.jsxs("div",{onClick:()=>_(L),onMouseEnter:()=>ae(j),onMouseLeave:()=>ae(null),style:ie.option(F===j,o===L),children:[L,o===L&&t.jsx(pg,{size:16})]},j))]}),m&&!ee&&t.jsx("div",{onClick:()=>{Re(!0),Z(""),M(!1)},onMouseEnter:()=>ae("custom"),onMouseLeave:()=>ae(null),style:{...ie.option(F==="custom",!1),borderTop:A?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",marginTop:"8px",color:S.primary,fontWeight:"600"},children:" Custom / Other"})]})]})]})]})},EE=()=>{const[o,e]=h.useState("All Projects"),[r,n]=h.useState("All Teams"),[a,A]=h.useState(null),[c,p]=h.useState("team"),[d,m]=h.useState(!1),[g,y]=h.useState(!1),[b,R]=h.useState("week"),[C,Q]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[S,N]=h.useState(!1),[M,Ie]=h.useState(null),[fe,F]=h.useState({top:64,left:0}),ae=h.useRef(null),[ee,Re]=h.useState([]),[se,Z]=h.useState(!1),[ue,pe]=h.useState(null),[we,Pe]=h.useState(null),[re,Ee]=h.useState({availableHours:0,assignedHours:0,assignedPercentage:0,availableCapacity:0});h.useEffect(()=>{if(ae.current&&d){const j=ae.current.getBoundingClientRect();F({top:j.bottom+4,left:j.left})}},[d]),h.useEffect(()=>{const j=de=>{ae.current&&!ae.current.contains(de.target)&&m(!1)};return d&&document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[d]),h.useEffect(()=>{we&&(async()=>{Z(!0),pe(null);try{console.log(` Fetching team capacity for ${b}...`);const de=await Te(`/api/workload-status?period=${b}`,{credentials:"include"});if(!de.ok)throw new Error("Failed to fetch team capacity");const Oe=await de.json();console.log(" Team data:",Oe);const Ge=(Oe.users||[]).filter(q=>we&&q.department===we.department),Ve=Ge.map(q=>{var lt,ye;return{name:`${q.firstName} ${q.lastName||""}`.trim(),utilization:q.utilizationPercentage||0,project:((ye=(lt=q.projects)==null?void 0:lt[0])==null?void 0:ye.name)||"Not assigned",team:q.team||"No team",department:q.department}});Re(Ve);const ke=Ge.reduce((q,lt)=>q+lt.targetHours,0),Be=Ge.reduce((q,lt)=>q+lt.totalHours,0),nt=ke>0?Math.round(Be/ke*100):0,yt=ke>0?((ke-Be)/ke*100).toFixed(1):0;Ee({availableHours:ke,assignedHours:Be,assignedPercentage:nt,availableCapacity:yt})}catch(de){console.error(" Error fetching team capacity:",de),pe(de.message)}finally{Z(!1)}})()},[b,we]),h.useEffect(()=>{(async()=>{try{const de=await Te("/user/profile",{credentials:"include"});if(de.ok){const Oe=await de.json();Pe(Oe)}}catch(de){console.error("Error fetching user profile:",de)}})()},[]);const k=["all",...new Set(ee.map(j=>j.project).filter(Boolean))],ge=["all",...new Set(ee.map(j=>j.team).filter(Boolean))],_=ee.filter(j=>(o==="All Projects"||j.project===o)&&(r==="All Teams"||j.team===r)),G=()=>{Q(!C);try{localStorage.setItem("darkMode",(!C).toString())}catch{console.log("LocalStorage not available")}y(!1)},E=j=>{p(j),m(!1),j==="reports"?window.location.href="/adminreports":j==="utilization"&&(window.location.href="/adminutilization")},D=()=>{switch(c){case"reports":return"Personal Reports";case"team":return"Team Capacity Summary";case"utilization":return"Utilization Overview";default:return"Team Capacity Summary"}},ie=(j,de)=>j?!de||de.trim()===""?j[0].toUpperCase():`${j[0]}${de[0]}`.toUpperCase():"?",L={page:{minHeight:"100vh",padding:"30px",background:C?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:C?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},toggleViewContainer:{fontSize:"18px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:C?"#e2e8f0":"#1e293b"},chevron:(j,de)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:j||de?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:j||de?"#3b82f6":C?"#94a3b8":"#64748b"}),sectionOverlay:{position:"fixed",top:fe.top,left:fe.left,zIndex:999,backgroundColor:C?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:C?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},blurOption:j=>({backgroundColor:j?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:C?"#e2e8f0":"#374151",transform:j?"translateX(4px)":"translateX(0)",borderLeft:j?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),periodToggle:{display:"flex",gap:"12px",padding:"8px",backgroundColor:C?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.6)",borderRadius:"12px",backdropFilter:"blur(10px)",border:C?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",width:"fit-content",marginBottom:"24px"},periodButton:j=>({padding:"8px 24px",borderRadius:"8px",border:"none",backgroundColor:j?"#3b82f6":"transparent",color:j?"#fff":C?"#94a3b8":"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",transform:j?"scale(1.05)":"scale(1)"}),statsRow:{display:"flex",gap:"24px",marginBottom:"32px",flexWrap:"wrap"},statCard:(j,de)=>({flex:1,minWidth:"200px",background:`linear-gradient(135deg, ${j} 0%, ${j}dd 100%)`,borderRadius:"20px",padding:"24px",color:"#fff",boxShadow:de?"0 12px 24px rgba(0,0,0,0.15)":"0 6px 16px rgba(0,0,0,0.1)",transform:de?"translateY(-4px) scale(1.02)":"translateY(0) scale(1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",border:"1px solid rgba(255,255,255,0.2)",backdropFilter:"blur(10px)"}),statLabel:{fontSize:"16px",fontWeight:"600",marginBottom:"8px",opacity:.9},statValue:{fontSize:"32px",fontWeight:"800",textShadow:"0 2px 4px rgba(0,0,0,0.2)"},mainContent:{display:"flex",gap:"32px",flexWrap:"wrap"},tableSection:{flex:"2",minWidth:"400px"},chartSection:{flex:"1",minWidth:"300px",display:"flex",flexDirection:"column",alignItems:"center"},filtersContainer:{display:"flex",gap:"16px",marginBottom:"24px",flexWrap:"wrap",alignItems:"center"},filterGroup:{display:"flex",flexDirection:"column",gap:"8px"},filterLabel:{fontSize:"14px",fontWeight:"600",color:C?"#e2e8f0":"#374151",transition:"all 0.3s ease"},filterSelect:{padding:"8px 12px",borderRadius:"8px",border:C?"2px solid rgba(75,85,99,0.3)":"2px solid rgba(226,232,240,0.5)",backgroundColor:C?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",fontSize:"14px",fontWeight:"500",color:C?"#e2e8f0":"#374151",cursor:"pointer",transition:"all 0.3s ease",minWidth:"120px",backdropFilter:"blur(10px)"},employeeTable:{backgroundColor:C?"rgba(55,65,81,0.9)":"rgba(30,41,59,0.95)",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease",backdropFilter:"blur(10px)",border:C?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.1)"},tableHeader:{backgroundColor:C?"rgba(75,85,99,0.9)":"rgba(51,65,85,0.9)",padding:"20px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},tableHeaderText:{color:"#fff",fontSize:"18px",fontWeight:"700"},tableBody:{padding:"8px 0"},employeeRow:j=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",transition:"all 0.2s ease",backgroundColor:j?"rgba(255,255,255,0.05)":"transparent",borderLeft:j?"4px solid #3b82f6":"4px solid transparent",cursor:"pointer"}),employeeName:{color:C?"#e2e8f0":"#f1f5f9",fontSize:"16px",fontWeight:"500",flex:1,transition:"all 0.3s ease"},utilizationPercent:j=>({color:j>=85?"#f59e0b":j>=80?"#10b981":"#64748b",fontSize:"16px",fontWeight:"700"}),pieChart:{width:"200px",height:"200px",borderRadius:"50%",background:`conic-gradient(${C?"#4b5563":"#1e293b"} 0deg ${re.assignedPercentage*3.6}deg, ${C?"#6b7280":"#e5e7eb"} ${re.assignedPercentage*3.6}deg 360deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",marginBottom:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"},pieChartInner:{width:"140px",height:"140px",borderRadius:"50%",backgroundColor:C?"rgba(55,65,81,0.95)":"rgba(255,255,255,0.95)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},pieChartLabel:{fontSize:"14px",fontWeight:"600",color:C?"#94a3b8":"#64748b",marginBottom:"4px",transition:"all 0.3s ease"},pieChartValue:{fontSize:"24px",fontWeight:"800",color:C?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},capacityInfo:{textAlign:"center"},freePercentage:{fontSize:"18px",fontWeight:"700",color:"#10b981",marginBottom:"8px"},capacityText:{fontSize:"16px",color:C?"#94a3b8":"#64748b",fontWeight:"500",lineHeight:"1.4",transition:"all 0.3s ease"},topButton:j=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:j?"rgba(59,130,246,0.1)":C?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:j?"#3b82f6":C?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:j?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:j?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:C?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:C?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:C?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:C?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:C?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:C?"#94a3b8":"#64748b",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"}};return h.useEffect(()=>{const j=document.createElement("style");return j.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
    `,document.head.appendChild(j),()=>document.head.removeChild(j)},[]),t.jsxs("div",{style:L.page,children:[t.jsxs("div",{style:L.headerRow,children:[t.jsx("div",{style:L.headerLeft,children:t.jsxs("div",{ref:ae,style:L.toggleViewContainer,onClick:()=>m(j=>!j),onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),className:"floating",children:[t.jsx("span",{style:L.header,children:D()}),t.jsx(Mo,{style:L.chevron(d,S),size:20})]})}),t.jsxs("div",{style:L.headerRight,children:[t.jsxs("button",{style:L.topButton(M==="alerts"),onMouseEnter:()=>Ie("alerts"),onMouseLeave:()=>Ie(null),onClick:()=>window.location.href="/adminalerts",children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:L.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:L.topButton(M==="profile"),onMouseEnter:()=>{Ie("profile"),y(!0)},onMouseLeave:()=>Ie(null),onClick:()=>window.location.href="/adminprofile",children:t.jsx(qt,{size:20})}),g&&we&&t.jsxs("div",{style:L.profileTooltip,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[t.jsx("div",{style:L.tooltipArrow}),t.jsxs("div",{style:L.userInfo,children:[t.jsx("div",{style:L.avatar,children:ie(we.firstName,we.lastName)}),t.jsxs("div",{style:L.userDetails,children:[t.jsxs("div",{style:L.userName,children:[we.firstName," ",we.lastName||""]}),t.jsxs("div",{style:L.userRole,children:[we.role==="admin"?"Admin":"Member","  ",we.department]})]})]}),t.jsx("button",{style:L.themeToggle,onClick:G,children:C?" Light Mode":" Dark Mode"})]})]})]})]}),d&&t.jsx("div",{style:L.sectionOverlay,onMouseDown:j=>j.stopPropagation(),onClick:j=>j.stopPropagation(),children:t.jsx("div",{children:["reports","team","utilization"].map((j,de)=>t.jsx("div",{style:L.blurOption(M===`section-${de}`),onClick:Oe=>{Oe.preventDefault(),Oe.stopPropagation(),E(j)},onMouseDown:Oe=>{Oe.preventDefault(),Oe.stopPropagation()},onMouseEnter:()=>Ie(`section-${de}`),onMouseLeave:()=>Ie(null),children:j==="reports"?"Personal Reports":j==="team"?"Team Capacity":"Utilization Overview"},j))})}),ue&&t.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",color:"#ef4444"},children:[t.jsx(io,{size:20}),t.jsx("span",{children:ue})]}),t.jsxs("div",{style:L.periodToggle,children:[t.jsx("button",{style:L.periodButton(b==="week"),onClick:()=>R("week"),children:"Week"}),t.jsx("button",{style:L.periodButton(b==="month"),onClick:()=>R("month"),children:"Month"})]}),t.jsxs("div",{style:L.statsRow,children:[t.jsxs("div",{style:L.statCard("#10b981",a==="available"),onMouseEnter:()=>A("available"),onMouseLeave:()=>A(null),children:[t.jsx("div",{style:L.statLabel,children:"Available Hours:"}),t.jsx("div",{style:L.statValue,children:se?"...":`${re.availableHours.toFixed(0)}h`})]}),t.jsxs("div",{style:L.statCard("#f59e0b",a==="assigned"),onMouseEnter:()=>A("assigned"),onMouseLeave:()=>A(null),children:[t.jsx("div",{style:L.statLabel,children:"Assigned Hours:"}),t.jsx("div",{style:L.statValue,children:se?"...":`${re.assignedHours.toFixed(0)}h`})]})]}),se?t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"60px",color:C?"#94a3b8":"#64748b"},children:t.jsx(LA,{size:32,style:{animation:"spin 1s linear infinite"}})}):t.jsxs("div",{style:L.mainContent,children:[t.jsxs("div",{style:L.tableSection,children:[t.jsxs("div",{style:L.filtersContainer,children:[t.jsxs("div",{style:L.filterGroup,children:[t.jsx("label",{style:L.filterLabel,children:"Filter by Project:"}),t.jsx(Tt,{value:o,onChange:j=>e(j),options:["All Projects",...k.filter(j=>j!=="all")],placeholder:"Select project...",isDarkMode:C,searchable:!1,compact:!0,clearable:!1})]}),t.jsxs("div",{style:L.filterGroup,children:[t.jsxs("label",{style:L.filterLabel,children:["Filter by Team (within ",we==null?void 0:we.department,"):"]}),t.jsx(Tt,{value:r,onChange:j=>n(j),options:["All Teams",...ge.filter(j=>j!=="all")],placeholder:"Select team...",isDarkMode:C,searchable:!1,compact:!0,clearable:!1})]})]}),t.jsxs("div",{style:L.employeeTable,children:[t.jsxs("div",{style:L.tableHeader,children:[t.jsx("span",{style:L.tableHeaderText,children:"Employee"}),t.jsx("span",{style:L.tableHeaderText,children:"Utilization (%)"})]}),t.jsx("div",{style:L.tableBody,children:_.length>0?_.map((j,de)=>t.jsxs("div",{style:L.employeeRow(a===`emp-${de}`),onMouseEnter:()=>A(`emp-${de}`),onMouseLeave:()=>A(null),children:[t.jsx("span",{style:L.employeeName,children:j.name}),t.jsxs("span",{style:L.utilizationPercent(j.utilization),children:[j.utilization,"%"]})]},de)):t.jsx("div",{style:{padding:"40px",textAlign:"center",color:C?"#94a3b8":"#64748b"},children:"No team members found"})})]})]}),t.jsxs("div",{style:L.chartSection,children:[t.jsx("div",{style:L.pieChart,children:t.jsxs("div",{style:L.pieChartInner,children:[t.jsx("div",{style:L.pieChartLabel,children:"Assigned"}),t.jsxs("div",{style:L.pieChartValue,children:[re.assignedPercentage,"%"]})]})}),t.jsxs("div",{style:L.capacityInfo,children:[t.jsxs("div",{style:L.freePercentage,children:["Free ",re.availableCapacity,"%"]}),t.jsxs("div",{style:L.capacityText,children:[re.availableCapacity,"% of team capacity",t.jsx("br",{}),"is still available"]})]})]})]})]})},kE=()=>{const[o,e]=h.useState("utilization"),[r,n]=h.useState(!1),[a,A]=h.useState(!1),[c,p]=h.useState(null),[d,m]=h.useState(null),[g,y]=h.useState("All Projects"),[b,R]=h.useState("All Teams"),[C,Q]=h.useState(!1),[S,N]=h.useState("week"),[M,Ie]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),fe=h.useRef(null),[F,ae]=h.useState({top:64,left:0}),[ee,Re]=h.useState([]),[se,Z]=h.useState(0),[ue,pe]=h.useState(!1),[we,Pe]=h.useState(null),[re,Ee]=h.useState(null);h.useEffect(()=>{if(fe.current&&r){const j=fe.current.getBoundingClientRect();ae({top:j.bottom+4,left:j.left})}},[r]),h.useEffect(()=>{const j=de=>{fe.current&&!fe.current.contains(de.target)&&n(!1)};return r&&document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[r]),h.useEffect(()=>{re&&(async()=>{pe(!0),Pe(null);try{console.log(` Fetching utilization data for ${S}...`);const de=await Te(`/api/workload-status?period=${S}`,{credentials:"include"});if(!de.ok)throw new Error("Failed to fetch team data");const Oe=await de.json();console.log(" Team workload data:",Oe),console.log(" Users array:",Oe.users);const Ge=(Oe.users||[]).filter(Be=>re&&Be.department===re.department);console.log(` Filtered to ${Ge.length} users in ${re==null?void 0:re.department} department`);const Ve=Ge.map(Be=>{var nt,yt;return console.log(" Processing user:",Be),{name:`${Be.firstName} ${Be.lastName||""}`.trim(),utilization:Be.utilizationPercentage||0,project:((yt=(nt=Be.projects)==null?void 0:nt[0])==null?void 0:yt.name)||"Not assigned",team:Be.team||"No team",department:Be.department}});console.log(" Transformed employees:",Ve),Re(Ve);const ke=Ve.length>0?Math.round(Ve.reduce((Be,nt)=>Be+nt.utilization,0)/Ve.length):0;Z(ke)}catch(de){console.error(" Error fetching utilization data:",de),Pe(de.message)}finally{pe(!1)}})()},[S,re]),h.useEffect(()=>{(async()=>{try{const de=await Te("/user/profile",{credentials:"include"});if(de.ok){const Oe=await de.json();Ee(Oe)}}catch(de){console.error("Error fetching user profile:",de)}})()},[]);const k=["all",...new Set(ee.map(j=>j.project).filter(Boolean))],ge=["all",...new Set(ee.map(j=>j.team).filter(Boolean))],_=ee.filter(j=>(g==="All Projects"||j.project===g)&&(b==="All Teams"||j.team===b)),G=()=>{Ie(!M);try{localStorage.setItem("darkMode",(!M).toString())}catch{console.log("LocalStorage not available")}Q(!1)},E=j=>{e(j),n(!1),j==="reports"?window.location.href="/adminreports":j==="team"&&(window.location.href="/adminteamcapacity")},D=()=>{switch(o){case"reports":return"Personal Reports";case"team":return"Team Capacity Summary";case"utilization":return"Utilization Overview";default:return"Utilization Overview"}},ie=(j,de)=>j?!de||de.trim()===""?j[0].toUpperCase():`${j[0]}${de[0]}`.toUpperCase():"?";h.useEffect(()=>{const j=document.createElement("style");return j.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
    `,document.head.appendChild(j),()=>document.head.removeChild(j)},[]);const L={page:{minHeight:"100vh",padding:"30px",background:M?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:M?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},toggleViewContainer:{fontSize:"18px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:M?"#e2e8f0":"#1e293b"},chevron:(j,de)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:j||de?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:j||de?"#3b82f6":M?"#94a3b8":"#64748b"}),sectionOverlay:{position:"fixed",top:F.top,left:F.left,zIndex:999,backgroundColor:M?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:M?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},blurOption:j=>({backgroundColor:j?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:M?"#e2e8f0":"#374151",transform:j?"translateX(4px)":"translateX(0)",borderLeft:j?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),mainContent:{display:"flex",gap:"32px",marginBottom:"32px",flexWrap:"wrap"},avgUtilizationCard:{flex:"0 0 300px",backgroundColor:M?"#374151":"#1e293b",borderRadius:"20px",padding:"32px",color:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease",cursor:"pointer"},avgUtilizationLabel:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",opacity:.9},avgUtilizationValue:{fontSize:"48px",fontWeight:"800",textShadow:"0 2px 4px rgba(0,0,0,0.2)"},periodToggleContainer:{flex:"1",minWidth:"400px",display:"flex",flexDirection:"column",gap:"16px"},periodToggle:{display:"flex",gap:"12px",padding:"8px",backgroundColor:M?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.6)",borderRadius:"12px",backdropFilter:"blur(10px)",border:M?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",width:"fit-content"},periodButton:j=>({padding:"8px 24px",borderRadius:"8px",border:"none",backgroundColor:j?"#3b82f6":"transparent",color:j?"#fff":M?"#94a3b8":"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",transform:j?"scale(1.05)":"scale(1)"}),summaryText:{fontSize:"16px",fontWeight:"600",color:M?"#e2e8f0":"#1e293b",marginBottom:"8px"},employeeTable:{backgroundColor:M?"#374151":"#1e293b",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"},tableHeader:{backgroundColor:M?"#4b5563":"#334155",padding:"20px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.3s ease"},tableHeaderText:{color:"#fff",fontSize:"18px",fontWeight:"700"},tableBody:{padding:"8px 0"},employeeRow:j=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",transition:"all 0.2s ease",backgroundColor:j?"rgba(255,255,255,0.05)":"transparent",borderLeft:j?"4px solid #3b82f6":"4px solid transparent",cursor:"pointer"}),employeeName:{color:M?"#e2e8f0":"#f1f5f9",fontSize:"16px",fontWeight:"500",flex:1,transition:"all 0.3s ease"},utilizationPercent:j=>({color:j>=85?"#f59e0b":j>=80?"#10b981":"#64748b",fontSize:"16px",fontWeight:"700"}),filtersContainer:{display:"flex",gap:"16px",marginBottom:"24px",flexWrap:"wrap",alignItems:"center"},filterGroup:{display:"flex",flexDirection:"column",gap:"8px"},filterLabel:{fontSize:"14px",fontWeight:"600",color:M?"#e2e8f0":"#374151",transition:"all 0.3s ease"},filterSelect:{padding:"8px 12px",borderRadius:"8px",border:M?"2px solid #4b5563":"2px solid #e5e7eb",backgroundColor:M?"#374151":"#fff",fontSize:"14px",fontWeight:"500",color:M?"#e2e8f0":"#374151",cursor:"pointer",transition:"all 0.3s ease",minWidth:"120px"},topButton:j=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:j?"rgba(59,130,246,0.1)":M?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:j?"#3b82f6":M?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:j?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:j?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:M?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:M?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:M?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:M?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:M?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:M?"#94a3b8":"#64748b",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"}};return t.jsxs("div",{style:L.page,children:[t.jsxs("div",{style:L.headerRow,children:[t.jsx("div",{style:L.headerLeft,children:t.jsxs("div",{ref:fe,style:L.toggleViewContainer,onClick:()=>n(j=>!j),onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),className:"floating",children:[t.jsx("span",{style:L.header,children:D()}),t.jsx(Mo,{style:L.chevron(r,a),size:20})]})}),t.jsxs("div",{style:L.headerRight,children:[t.jsxs("button",{style:L.topButton(c==="alerts"),onMouseEnter:()=>p("alerts"),onMouseLeave:()=>p(null),onClick:()=>window.location.href="/adminalerts",children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:L.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:L.topButton(c==="profile"),onMouseEnter:()=>{p("profile"),Q(!0)},onMouseLeave:()=>p(null),onClick:()=>window.location.href="/adminprofile",children:t.jsx(qt,{size:20})}),C&&re&&t.jsxs("div",{style:L.profileTooltip,onMouseEnter:()=>Q(!0),onMouseLeave:()=>Q(!1),children:[t.jsx("div",{style:L.tooltipArrow}),t.jsxs("div",{style:L.userInfo,children:[t.jsx("div",{style:L.avatar,children:ie(re.firstName,re.lastName)}),t.jsxs("div",{style:L.userDetails,children:[t.jsxs("div",{style:L.userName,children:[re.firstName," ",re.lastName||""]}),t.jsxs("div",{style:L.userRole,children:[re.role==="admin"?"Admin":"Member","  ",re.department]})]})]}),t.jsx("button",{style:L.themeToggle,onClick:G,children:M?" Light Mode":" Dark Mode"})]})]})]})]}),r&&t.jsx("div",{style:L.sectionOverlay,onMouseDown:j=>j.stopPropagation(),onClick:j=>j.stopPropagation(),children:t.jsx("div",{children:["reports","team","utilization"].map((j,de)=>t.jsx("div",{style:L.blurOption(c===`section-${de}`),onClick:Oe=>{Oe.preventDefault(),Oe.stopPropagation(),E(j)},onMouseDown:Oe=>{Oe.preventDefault(),Oe.stopPropagation()},onMouseEnter:()=>p(`section-${de}`),onMouseLeave:()=>p(null),children:j==="reports"?"Personal Reports":j==="team"?"Team Capacity":"Utilization Overview"},j))})}),we&&t.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",color:"#ef4444"},children:[t.jsx(io,{size:20}),t.jsx("span",{children:we})]}),ue?t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"60px",color:M?"#94a3b8":"#64748b"},children:t.jsx(LA,{size:32,style:{animation:"spin 1s linear infinite"}})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:L.mainContent,children:[t.jsxs("div",{style:L.avgUtilizationCard,onMouseEnter:()=>p("avg-util"),onMouseLeave:()=>p(null),children:[t.jsx("div",{style:L.avgUtilizationLabel,children:"Average Utilization"}),t.jsxs("div",{style:L.avgUtilizationValue,children:[se,"%"]})]}),t.jsxs("div",{style:L.periodToggleContainer,children:[t.jsxs("div",{style:L.summaryText,children:["Team utilization for this ",S==="week"?"week":"month"]}),t.jsxs("div",{style:L.periodToggle,children:[t.jsx("button",{style:L.periodButton(S==="week"),onClick:()=>N("week"),children:"Week"}),t.jsx("button",{style:L.periodButton(S==="month"),onClick:()=>N("month"),children:"Month"})]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{style:L.filtersContainer,children:[t.jsxs("div",{style:L.filterGroup,children:[t.jsx("label",{style:L.filterLabel,children:"Filter by Project:"}),t.jsx(Tt,{value:g,onChange:j=>y(j),options:["All Projects",...k.filter(j=>j!=="all")],placeholder:"Select project...",isDarkMode:M,searchable:!1,compact:!0,clearable:!1})]}),t.jsxs("div",{style:L.filterGroup,children:[t.jsxs("label",{style:L.filterLabel,children:["Filter by Team (within ",re==null?void 0:re.department,"):"]}),t.jsx(Tt,{value:b,onChange:j=>R(j),options:["All Teams",...ge.filter(j=>j!=="all")],placeholder:"Select team...",isDarkMode:M,searchable:!1,compact:!0,clearable:!1})]})]}),t.jsxs("div",{style:L.employeeTable,children:[t.jsxs("div",{style:L.tableHeader,children:[t.jsx("span",{style:L.tableHeaderText,children:"Employee"}),t.jsx("span",{style:L.tableHeaderText,children:"Utilization (%)"})]}),t.jsx("div",{style:L.tableBody,children:_.length>0?_.map((j,de)=>t.jsxs("div",{style:L.employeeRow(d===`emp-${de}`),onMouseEnter:()=>m(`emp-${de}`),onMouseLeave:()=>m(null),children:[t.jsx("span",{style:L.employeeName,children:j.name}),t.jsxs("span",{style:L.utilizationPercent(j.utilization),children:[j.utilization,"%"]})]},de)):t.jsx("div",{style:{padding:"40px",textAlign:"center",color:M?"#94a3b8":"#64748b"},children:"No team members found"})})]})]})]})]})},er=({value:o,onChange:e,label:r,isDarkMode:n,placeholder:a="Select date",disabled:A=!1,compact:c=!1})=>{const[p,d]=h.useState(!1),[m,g]=h.useState(o?new Date(o):new Date),[y,b]=h.useState(null),[R,C]=h.useState("days"),[Q,S]=h.useState(Math.floor(new Date().getFullYear()/12)*12),[N,M]=h.useState(!1),[Ie,fe]=h.useState("bottom"),F=h.useRef(null),ae=h.useRef(null),ee=o?new Date(o):null;h.useEffect(()=>{const Ne=B=>{F.current&&!F.current.contains(B.target)&&(d(!1),C("days"))};return p&&document.addEventListener("mousedown",Ne),()=>{document.removeEventListener("mousedown",Ne)}},[p]),h.useEffect(()=>{g(o?new Date(o):new Date)},[o]),h.useEffect(()=>{if(p&&F.current){const Ne=F.current.getBoundingClientRect(),U=window.innerHeight-Ne.bottom,Ae=Ne.top;U<400&&Ae>U?M(!0):M(!1)}},[p]);const Re=["January","February","March","April","May","June","July","August","September","October","November","December"],se=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Z=["S","M","T","W","T","F","S"],ue=m.getMonth(),pe=m.getFullYear(),we=new Date(pe,ue,1),Pe=new Date(pe,ue+1,0),re=we.getDay(),Ee=Pe.getDate(),k=[];for(let Ne=0;Ne<re;Ne++)k.push(null);for(let Ne=1;Ne<=Ee;Ne++)k.push(Ne);const ge=Ne=>!Ne||!ee?!1:Ne===ee.getDate()&&ue===ee.getMonth()&&pe===ee.getFullYear(),_=Ne=>{const B=new Date;return Ne===B.getDate()&&ue===B.getMonth()&&pe===B.getFullYear()},G=Ne=>{if(!Ne)return;const B=new Date(pe,ue,Ne),U=B.getFullYear(),Ae=String(B.getMonth()+1).padStart(2,"0"),Y=String(B.getDate()).padStart(2,"0");e(`${U}-${Ae}-${Y}`),d(!1),C("days")},E=Ne=>{g(new Date(pe,Ne,1)),C("days")},D=Ne=>{g(new Date(Ne,ue,1)),C("months")},ie=()=>{g(new Date(pe,ue-1,1))},L=()=>{g(new Date(pe,ue+1,1))},j=()=>{g(new Date(pe-1,ue,1))},de=()=>{g(new Date(pe+1,ue,1))},Oe=()=>{S(Q-12)},Ge=()=>{S(Q+12)},Ve=Ne=>Ne?new Date(Ne).toLocaleDateString("en-GB"):"",ke=Ne=>{Ne.stopPropagation(),e("")},Be=()=>{R==="days"?C("months"):R==="months"&&(C("years"),S(Math.floor(pe/12)*12))},nt={container:{position:"relative",width:"100%",marginBottom:c?"16px":"20px"},label:{fontSize:"14px",fontWeight:"600",color:n?"#e2e8f0":"#374151",marginBottom:"8px",display:"block",transition:"all 0.3s ease"},input:Ne=>({width:"100%",padding:c?"12px 16px":"16px 20px",paddingRight:o?c?"70px":"80px":c?"50px":"60px",borderRadius:"12px",border:Ne?"2px solid #3b82f6":n?c?"1px solid rgba(75,85,99,0.3)":"2px solid #4b5563":c?"1px solid rgba(226,232,240,0.5)":"2px solid #e2e8f0",fontSize:c?"14px":"16px",transition:"all 0.3s ease",backgroundColor:A?n?"#374151":"#f3f4f6":n?c?"rgba(51,65,85,0.5)":"#4b5563":"#fff",color:n?"#e2e8f0":"#374151",cursor:A?"not-allowed":"pointer",outline:"none",boxShadow:Ne?"0 0 0 3px rgba(59,130,246,0.1)":"0 2px 4px rgba(0,0,0,0.02)",opacity:A?.6:1,userSelect:"none",fontFamily:'"Montserrat", sans-serif'}),iconContainer:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",gap:"8px",pointerEvents:"none"},icon:{color:n?"#94a3b8":"#64748b",pointerEvents:"auto",cursor:"pointer",transition:"all 0.2s ease"},clearButton:Ne=>({color:Ne?"#ef4444":n?"#94a3b8":"#64748b",pointerEvents:"auto",cursor:"pointer",transition:"all 0.2s ease",transform:Ne?"scale(1.1)":"scale(1)"}),dropdown:Ne=>({position:"absolute",top:Ne?"auto":"calc(100% + 8px)",bottom:Ne?"calc(100% + 8px)":"auto",left:0,zIndex:9999,backgroundColor:n?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:Ne?"0 -20px 40px rgba(0,0,0,0.15)":"0 20px 40px rgba(0,0,0,0.15)",border:n?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",animation:Ne?"slideInUp 0.2s ease-out":"slideIn 0.2s ease-out",minWidth:"280px",maxWidth:"95vw",maxHeight:"400px",overflowY:"auto",overflowX:"hidden",padding:"16px"}),header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},monthYear:{fontSize:"16px",fontWeight:"700",color:n?"#e2e8f0":"#1e293b",cursor:"pointer",padding:"6px 12px",borderRadius:"8px",transition:"all 0.2s ease",userSelect:"none"},monthYearHover:{backgroundColor:"rgba(59,130,246,0.1)"},navButton:Ne=>({background:"none",border:"none",cursor:"pointer",padding:"6px",borderRadius:"6px",color:n?"#94a3b8":"#64748b",transition:"all 0.2s ease",backgroundColor:Ne?"rgba(59,130,246,0.1)":"transparent",transform:Ne?"scale(1.1)":"scale(1)",display:"flex",alignItems:"center",justifyContent:"center"}),weekDays:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},weekDay:{textAlign:"center",fontSize:"11px",fontWeight:"600",color:n?"#94a3b8":"#64748b",padding:"6px 0",textTransform:"uppercase"},daysGrid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},monthsGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"},yearsGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"},day:(Ne,B,U,Ae)=>({textAlign:"center",padding:"10px",fontSize:"14px",fontWeight:B||U?"700":"500",color:Ne?B?"#fff":U?"#3b82f6":n?"#e2e8f0":"#374151":"transparent",backgroundColor:B?"#3b82f6":U?"rgba(59,130,246,0.1)":Ae&&Ne?"rgba(59,130,246,0.05)":"transparent",borderRadius:"8px",cursor:Ne?"pointer":"default",transition:"all 0.2s ease",transform:Ae&&Ne?"scale(1.05)":"scale(1)",boxShadow:B?"0 4px 12px rgba(59,130,246,0.3)":"none"}),monthItem:(Ne,B)=>({textAlign:"center",padding:"12px",fontSize:"14px",fontWeight:Ne?"700":"500",color:Ne?"#3b82f6":n?"#e2e8f0":"#374151",backgroundColor:Ne?"rgba(59,130,246,0.1)":B?"rgba(59,130,246,0.05)":"transparent",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",transform:B?"scale(1.05)":"scale(1)"}),yearItem:(Ne,B)=>({textAlign:"center",padding:"12px",fontSize:"14px",fontWeight:Ne?"700":"500",color:Ne?"#3b82f6":n?"#e2e8f0":"#374151",backgroundColor:Ne?"rgba(59,130,246,0.1)":B?"rgba(59,130,246,0.05)":"transparent",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",transform:B?"scale(1.05)":"scale(1)"})},yt=()=>t.jsxs(t.Fragment,{children:[t.jsx("div",{style:nt.weekDays,children:Z.map((Ne,B)=>t.jsx("div",{style:nt.weekDay,children:Ne},B))}),t.jsx("div",{style:nt.daysGrid,children:k.map((Ne,B)=>t.jsx("div",{onClick:()=>G(Ne),style:nt.day(Ne,ge(Ne),_(Ne),y===`day-${B}`),onMouseEnter:()=>Ne&&b(`day-${B}`),onMouseLeave:()=>b(null),children:Ne},B))})]}),q=()=>t.jsx("div",{style:nt.monthsGrid,children:se.map((Ne,B)=>t.jsx("div",{onClick:()=>E(B),style:nt.monthItem(B===ue,y===`month-${B}`),onMouseEnter:()=>b(`month-${B}`),onMouseLeave:()=>b(null),children:Ne},B))}),lt=()=>{const Ne=[];for(let B=0;B<12;B++)Ne.push(Q+B);return t.jsx("div",{style:nt.yearsGrid,children:Ne.map(B=>t.jsx("div",{onClick:()=>D(B),style:nt.yearItem(B===pe,y===`year-${B}`),onMouseEnter:()=>b(`year-${B}`),onMouseLeave:()=>b(null),children:B},B))})},ye=()=>R==="days"?`${Re[ue]} ${pe}`:R==="months"?pe:`${Q} - ${Q+11}`,ze=()=>{R==="days"?ie():R==="months"?j():Oe()},dt=()=>{R==="days"?L():R==="months"?de():Ge()};return t.jsxs(t.Fragment,{children:[t.jsx("style",{children:`
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  input::placeholder {
  color: ${n?"#94a3b8":"#9ca3af"} !important;
  opacity: 1;
}

input::-webkit-input-placeholder {
  color: ${n?"#94a3b8":"#9ca3af"} !important;
}

input::-moz-placeholder {
  color: ${n?"#94a3b8":"#9ca3af"} !important;
}

input:-ms-input-placeholder {
  color: ${n?"#94a3b8":"#9ca3af"} !important;
}

  .datepicker-dropdown::-webkit-scrollbar {
    width: 6px;
  }

  .datepicker-dropdown::-webkit-scrollbar {
    width: 6px;
  }

  .datepicker-dropdown::-webkit-scrollbar-track {
    background: ${n?"rgba(51,65,85,0.3)":"rgba(226,232,240,0.3)"};
    border-radius: 3px;
  }

  .datepicker-dropdown::-webkit-scrollbar-thumb {
    background: ${n?"rgba(148,163,184,0.5)":"rgba(100,116,139,0.5)"};
    border-radius: 3px;
  }

  .datepicker-dropdown::-webkit-scrollbar-thumb:hover {
    background: ${n?"rgba(148,163,184,0.8)":"rgba(100,116,139,0.8)"};
  }

  .datepicker-dropdown {
    scrollbar-width: thin;
    scrollbar-color: ${n?"rgba(148,163,184,0.5) rgba(51,65,85,0.3)":"rgba(100,116,139,0.5) rgba(226,232,240,0.3)"};
  }
`}),t.jsxs("div",{style:nt.container,ref:F,children:[r&&t.jsx("label",{style:nt.label,children:r}),t.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[t.jsx("input",{type:"text",value:Ve(o),placeholder:a,readOnly:!0,disabled:A,onClick:()=>!A&&d(!p),style:nt.input(p)}),t.jsxs("div",{style:nt.iconContainer,children:[o&&!A&&t.jsx(gr,{size:18,style:nt.clearButton(y==="clear"),onMouseEnter:()=>b("clear"),onMouseLeave:()=>b(null),onClick:ke}),t.jsx(wo,{size:18,style:nt.icon})]})]}),p&&!A&&t.jsxs("div",{ref:ae,className:"datepicker-dropdown",style:nt.dropdown(N),children:[t.jsxs("div",{style:nt.header,children:[t.jsx("button",{onClick:ze,style:nt.navButton(y==="prev"),onMouseEnter:()=>b("prev"),onMouseLeave:()=>b(null),children:t.jsx(nb,{size:18})}),t.jsx("div",{style:{...nt.monthYear,...y==="header"?nt.monthYearHover:{}},onClick:Be,onMouseEnter:()=>b("header"),onMouseLeave:()=>b(null),children:ye()}),t.jsx("button",{onClick:dt,style:nt.navButton(y==="next"),onMouseEnter:()=>b("next"),onMouseLeave:()=>b(null),children:t.jsx(Nc,{size:18})})]}),R==="days"&&yt(),R==="months"&&q(),R==="years"&&lt()]})]})]})},Hp=({value:o,suffix:e="",decimals:r=0})=>{const[n,a]=h.useState(0);return h.useEffect(()=>{let A=0;const c=o||0,d=c/(1e3/16),m=setInterval(()=>{A+=d,A>=c?(a(c),clearInterval(m)):a(A)},16);return()=>clearInterval(m)},[o]),t.jsxs(t.Fragment,{children:[r>0?n.toFixed(r):Math.floor(n),e]})},jE=({isDarkMode:o})=>t.jsx("div",{style:{backgroundColor:o?"#374151":"#fff",borderRadius:"24px",padding:"40px",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",border:o?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)"},children:[1,2,3].map(e=>t.jsx("div",{style:{height:"60px",background:o?"linear-gradient(90deg, #4b5563 0%, #6b7280 50%, #4b5563 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"12px",marginBottom:"24px"}},e))}),_x=()=>t.jsx("div",{style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid #fff",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),TE=({message:o,onClose:e})=>(h.useEffect(()=>{const r=setTimeout(e,3e3);return()=>clearTimeout(r)},[e]),t.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#10b981",color:"#fff",padding:"16px 24px",borderRadius:"12px",boxShadow:"0 8px 25px rgba(16,185,129,0.3)",display:"flex",alignItems:"center",gap:"12px",zIndex:9999,animation:"slideInRight 0.3s ease-out"},children:[t.jsx("div",{style:{fontSize:"24px"},children:""}),t.jsx("div",{style:{fontWeight:"600"},children:o})]})),FE=()=>{const[o,e]=h.useState("actuals"),[r,n]=h.useState(!1),[a,A]=h.useState(!1),[c,p]=h.useState(null),[d,m]=h.useState(!1),[g,y]=h.useState("Project"),[b,R]=h.useState(!1),[C,Q]=h.useState(""),[S,N]=h.useState(!1),[M,Ie]=h.useState({startDate:null,endDate:null,project:null,hours:null}),[fe,F]=h.useState([]),[ae,ee]=h.useState([]),[Re,se]=h.useState({matching:{matchedActivities:[],totalMatchedHours:0,summary:""}}),[Z,ue]=h.useState(!1),[pe,we]=h.useState(!1),[Pe,re]=h.useState(""),[Ee,k]=h.useState(!1),[ge,_]=h.useState(""),[G,E]=h.useState(""),[D,ie]=h.useState(""),[L,j]=h.useState("0.00"),[de,Oe]=h.useState(null),[Ge,Ve]=h.useState([]),[ke]=h.useState(["L1 Operations","L2 Operations"]),[Be]=h.useState(["Annual Leave","Half-Day Leave","Hospitalization Leave","No Pay Leave","Birthday Leave","Medical Leave","Off-in-Lieu"]),[nt,yt]=h.useState([]),[q,lt]=h.useState([]),[ye,ze]=h.useState(!1),[dt,Ne]=h.useState(!0),[B,U]=h.useState(null),[Ae,Y]=h.useState([]),[V,ve]=h.useState(null),[me,T]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[wt,w]=h.useState(""),ce=()=>new Date().toISOString().split("T")[0],Ce=h.useRef(null),[H,P]=h.useState({top:64,left:0}),z=async()=>{try{const K=await Te("/user/profile",{credentials:"include"});if(K.ok){const qe=await K.json();Oe(qe);const Ct=!!(qe.deviceName&&qe.timelineKey&&qe.subscriptionId);if(N(Ct),console.log(" ManicTime Setup Status:",Ct?"READY":"NOT CONFIGURED"),console.log("  Device:",qe.deviceName||"MISSING"),console.log("  Timeline Key:",qe.timelineKey||"MISSING"),console.log("  Subscription:",qe.subscriptionId||"MISSING"),qe.assignedProjects&&qe.assignedProjects.length>0){const Lt=qe.assignedProjects.filter(Bt=>Bt.projectType==="Project").map(Bt=>Bt.name),Ut=qe.assignedProjects.filter(Bt=>Bt.projectType==="Operations").map(Bt=>Bt.name);F(Lt),ee(Ut)}}else U("Failed to fetch user profile")}catch(K){console.error("Error fetching user profile:",K),U("Error fetching user profile")}},xe=async()=>{try{const K=await Te("/actuals/capacity",{credentials:"include"});if(K.ok){const qe=await K.json();ve(qe)}}catch(K){console.error(" Error fetching capacity:",K)}};h.useEffect(()=>{console.log(" AdminActuals - isSectionOpen state changed to:",r)},[r]),h.useEffect(()=>{if(Ce.current&&r){const K=Ce.current.getBoundingClientRect();P({top:K.bottom+4,left:K.left})}},[r]),h.useEffect(()=>{const K=qe=>{Ce.current&&!Ce.current.contains(qe.target)&&n(!1)};return r&&document.addEventListener("mousedown",K),()=>{document.removeEventListener("mousedown",K)}},[r]),h.useEffect(()=>{const K=document.createElement("style");return K.textContent=`
    /* Target common parent container classes */
    body, html, #root, .app, .main-content, .page-container, .content-wrapper {
      background: ${me?"linear-gradient(135deg, #1e293b 0%, #334155 100%) !important":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%) !important"};
      margin: 0 !important;
      padding: 0 !important;
    }
    
    body > div, #root > div, .app > div {
      background: transparent !important;
    }
    
    input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  opacity: 1;
  cursor: pointer;
  background-color: ${me?"#9ca3af":"#e5e7eb"};
  border-left: 1px solid ${me?"#6b7280":"#d1d5db"};
  filter: ${me?"brightness(0.8) invert(1)":"none"};
}

input[type="number"]::-webkit-inner-spin-button:hover,
input[type="number"]::-webkit-outer-spin-button:hover {
  background-color: ${me?"#d1d5db":"#cbd5e1"};
  filter: ${me?"brightness(1) invert(1)":"none"};
}
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-6px);
      }
    }
    
    @keyframes sparkle {
      0%, 100% {
        transform: rotate(0deg) scale(1);
      }
      50% {
        transform: rotate(5deg) scale(1.1);
      }
    }

    @keyframes slideInRight {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    
    .floating {
      animation: float 3s ease-in-out infinite;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
      20%, 40%, 60%, 80% { transform: translateX(5px); }
    }
  `,document.head.appendChild(K),()=>{document.head.removeChild(K)}},[me]),h.useEffect(()=>{const K=document.createElement("style");return K.textContent=`
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .ai-card-fade {
      animation: fadeIn 0.6s ease;
    }
  `,document.head.appendChild(K),()=>document.head.removeChild(K)},[]),h.useEffect(()=>{(async()=>{Ne(!0),await Promise.all([z(),Me(),O(),Qt(),xe()]),Ne(!1)})()},[]),h.useEffect(()=>{if(D){const qe=(parseFloat(D)/8).toFixed(2);j(qe)}else j("0.00")},[D]),h.useEffect(()=>{if(g!=="Admin/Others"||!ge||!G||!Pe)return;const K=new Date(ge),qe=new Date(G);let Ct=0;for(let Ut=new Date(K);Ut<=qe;Ut.setDate(Ut.getDate()+1)){const Bt=Ut.getDay();Bt!==0&&Bt!==6&&Ct++}let Lt=0;Pe==="Half-Day Leave"?Lt=Ct*4:Lt=Ct*8,ie(Lt.toString())},[g,Pe,ge,G]),h.useEffect(()=>{tt()},[ge,G]),h.useEffect(()=>{B&&(ge||G||Pe)&&U(null)},[ge,G,Pe]),h.useEffect(()=>{B&&(ge||G||Pe)&&U(null)},[ge,G,Pe]),h.useEffect(()=>{Ie({startDate:ge?"valid":null,endDate:G?"valid":null,project:Pe?"valid":null,hours:D&&parseFloat(D)>0?"valid":null})},[ge,G,Pe,D]);const Me=async()=>{try{console.log(" Fetching projects from /plan/master...");const K=await Te("/plan/master",{credentials:"include"});if(console.log(" Response status:",K.status),K.ok){const qe=await K.json();console.log(" Raw data from API:",qe);const Ct=qe.map(Ut=>Ut.project).filter(Boolean);console.log(" Extracted project names:",Ct);const Lt=[...new Set(Ct)];console.log(" Unique projects:",Lt),Ve(Lt)}else console.error(" Failed to fetch projects, status:",K.status)}catch(K){console.error(" Error fetching projects:",K)}},O=async()=>{try{const K=await Te("/actuals",{credentials:"include"});if(K.ok){const qe=await K.json();yt(qe)}}catch(K){console.error("Error fetching actuals:",K)}},Qt=async()=>{try{const K=new Date().getFullYear(),qe=await Te(`/actuals/holidays?year=${K}`,{credentials:"include"});if(qe.ok){const Ct=await qe.json();Y(Ct),console.log(" Holidays loaded:",Ct)}}catch(K){console.error(" Error fetching holidays:",K)}},tt=async()=>{if(!(!ge||!G))try{const K=await Te(`/actuals/system?startDate=${ge}&endDate=${G}`,{credentials:"include"});if(K.ok){const qe=await K.json();lt(qe)}}catch(K){console.error(" Error fetching system actuals:",K)}},zt=K=>{console.log(" AdminActuals - handleSectionChange called with:",K),e(K),n(!1),K==="view-logs"?(console.log(" AdminActuals - Navigating to view logs page"),window.location.href="/adminviewlogs"):console.log(" AdminActuals - Staying on current page for section:",K)},ir=()=>o==="actuals"?"Actuals":"View Logs",Yt=async()=>{var X;console.log(" handleAdd called");const K=ce();if(ge>K||G>K){U(" Cannot log actuals for future dates. Please select today or earlier."),window.scrollTo({top:0,behavior:"smooth"});return}if(!ge||!G||!D){alert("Please fill in dates and hours");return}const qe=new Date(ge),Ct=new Date(G),Lt=Math.ceil((Ct-qe)/(1e3*60*60*24))+1,Ut=Lt*24,Bt=parseFloat(D);if(Bt>Ut){const $=qe.toLocaleDateString("en-GB"),Ze=Ct.toLocaleDateString("en-GB");U(` Hours Exceed Maximum Allowed!

Date Range: ${$} - ${Ze}
Total Days: ${Lt} day${Lt!==1?"s":""}
Maximum Allowed: ${Ut} hours (${Lt}  24h)
You Entered: ${Bt.toFixed(1)} hours

Please reduce your hours to ${Ut} or less.`),window.scrollTo({top:0,behavior:"smooth"});return}ze(!0),U(null);try{if(Ee&&((X=Re==null?void 0:Re.matching)!=null&&X.matchedActivities)){console.log(" Multi-project mode: Creating separate entries");const $={};Re.matching.matchedActivities.forEach(ft=>{const ne=ft.projectName;$[ne]||($[ne]=0),$[ne]+=ft.hours}),console.log(" Hours breakdown by project:",$);const Ze=Object.entries($).map(async([ft,ne])=>{const Le={category:g,project:ft,startDate:ge,endDate:G,hours:parseFloat(ne.toFixed(2))};console.log(` Creating entry for ${ft}: ${ne}h`);const Fe=await Te("/actuals",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Le)});if(!Fe.ok){const rt=await Fe.json();throw new Error(`Failed to add entry for ${ft}: ${rt.message||rt.error}`)}return Fe.json()});await Promise.all(Ze),Q(` Successfully created ${Object.keys($).length} actuals entries!`),R(!0)}else{if(!Pe){alert("Please select a project"),ze(!1);return}console.log(" Single project mode: Creating one entry");const $={category:g,project:Pe,startDate:ge,endDate:G,hours:parseFloat(D)},Ze=await Te("/actuals",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify($)});if(!Ze.ok){const ft=await Ze.json();if(Ze.status===409){U(ft.error||ft.message),window.scrollTo({top:0,behavior:"smooth"}),ze(!1);return}else throw new Error(ft.message||"Failed to add actual entry")}Q("Actual entry added successfully!"),R(!0)}re(""),_(""),E(""),ie(""),j("0.00"),se(null),k(!1),U(null),O()}catch($){console.error(" Add error:",$),U("Error adding actual entry: "+$.message),window.scrollTo({top:0,behavior:"smooth"})}finally{ze(!1)}},vr=async()=>{var K;if(!ge||!G){alert("Please select date range first");return}ue(!0),U(null);try{let qe;if(Pe?qe=[Pe]:qe=g==="Project"?fe:g==="Operations"?ae:[],!qe||qe.length===0){alert("No projects to match. Please select a project or ensure you have assigned projects."),ue(!1);return}const Ct={projectNames:qe,startDate:ge,endDate:G,category:g};console.log(" Sending match request:",Ct);const Lt=await Te("/actuals/match-activities",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ct)});if(!Lt.ok)throw new Error("Failed to match activities");const Ut=await Lt.json();se(Ut),k(!Pe),(K=Ut.matching)!=null&&K.totalMatchedHours&&ie(Ut.matching.totalMatchedHours.toString())}catch(qe){console.error(" Match activities error:",qe),U("Failed to match activities: "+qe.message),window.scrollTo({top:0,behavior:"smooth"})}finally{ue(!1)}},Tr=()=>{T(!me),m(!1)},J=()=>{switch(g){case"Project":const K=new Set(fe),qe=Ge.filter(Lt=>K.has(Lt)),Ct=Ge.filter(Lt=>!K.has(Lt));return[...qe,...Ct];case"Operations":return ae;case"Admin/Others":return Be;default:return[]}},be=()=>{switch(g){case"Project":return"Project:";case"Operations":return"Operation:";case"Admin/Others":return"Leave Type:";default:return"Select:"}},De={page:{minHeight:"100vh",padding:"30px 40px",background:me?"linear-gradient(135deg, rgba(30,41,59,0.95) 0%, rgba(15,23,42,0.95) 100%)":"linear-gradient(135deg, #f8fafc 0%, #eef2ff 60%, #e0e7ff 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease",display:"flex",flexDirection:"column"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"40px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"32px",fontWeight:"800",color:me?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},toggleViewContainer:{fontSize:"20px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:me?"#e2e8f0":"#1e293b"},chevron:(K,qe)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:K||qe?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:K||qe?"#3b82f6":"#64748b"}),sectionOverlay:{position:"fixed",top:H.top,left:H.left,zIndex:999,backgroundColor:me?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:me?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},blurOption:K=>({backgroundColor:K?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:me?"#e2e8f0":"#374151",transform:K?"translateX(4px)":"translateX(0)",borderLeft:K?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),topButton:K=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:K?"rgba(59,130,246,0.1)":me?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:K?"#3b82f6":me?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:K?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:K?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:me?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:me?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:me?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:me?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:me?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:me?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:me?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:me?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:me?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},contentArea:{display:"flex",gap:"40px",alignItems:"flex-start",width:"100%",margin:"0"},leftSection:{flex:"1 1 65%",minWidth:"600px"},rightSection:{flex:"1 1 30%",minWidth:"400px",maxWidth:"550px"},categoryTabs:{display:"flex",gap:"20px",marginBottom:"40px",justifyContent:"flex-start",flexWrap:"wrap"},categoryTab:(K,qe)=>({padding:"16px 40px",borderRadius:"50px",border:K?"2px solid #3b82f6":me?"2px solid #374151":"2px solid #e2e8f0",backgroundColor:K?"rgba(59,130,246,0.1)":qe?"rgba(59,130,246,0.05)":me?"#374151":"#fff",color:K?"#3b82f6":me?"#e2e8f0":"#64748b",fontWeight:"600",fontSize:"16px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:qe?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",boxShadow:qe?"0 8px 25px rgba(59,130,246,0.15)":"0 2px 8px rgba(0,0,0,0.05)",userSelect:"none",minWidth:"140px",textAlign:"center"}),formContainer:{backgroundColor:me?"#374151":"#fff",borderRadius:"24px",padding:"40px",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",border:me?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)",backdropFilter:"blur(10px)",width:"100%",transition:"all 0.3s ease"},formRow:{display:"flex",gap:"24px",marginBottom:"24px",alignItems:"flex-end",width:"100%"},formGroup:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},label:{fontSize:"14px",fontWeight:"600",color:me?"#e2e8f0":"#374151",marginBottom:"4px",transition:"all 0.3s ease"},input:K=>({padding:"16px 20px",borderRadius:"12px",border:K?"2px solid #3b82f6":me?"2px solid #4b5563":"2px solid #e2e8f0",fontSize:"16px",transition:"all 0.3s ease",backgroundColor:me?"#4b5563":"#fff",color:me?"#e2e8f0":"#374151",outline:"none",boxShadow:K?"0 0 0 3px rgba(59,130,246,0.1)":"0 2px 4px rgba(0,0,0,0.02)"}),select:K=>({padding:"16px 20px",borderRadius:"12px",border:K?"2px solid #3b82f6":me?"2px solid #4b5563":"2px solid #e2e8f0",fontSize:"16px",transition:"all 0.3s ease",backgroundColor:me?"#4b5563":"#fff",color:me?"#e2e8f0":"#374151",outline:"none",cursor:"pointer",boxShadow:K?"0 0 0 3px rgba(59,130,246,0.1)":"0 2px 4px rgba(0,0,0,0.02)"}),autoCalculated:{fontSize:"12px",color:me?"#94a3b8":"#64748b",fontStyle:"italic",marginTop:"4px",transition:"all 0.3s ease"},buttonRow:{display:"flex",gap:"20px",marginTop:"40px",width:"100%"},recommendButton:K=>({flex:1,padding:"20px 32px",borderRadius:"16px",border:S?"2px solid #f59e0b":"2px solid #6b7280",backgroundColor:S?K?"#f59e0b":"transparent":"#6b7280",color:S?K?"#fff":"#f59e0b":"#9ca3af",fontSize:"18px",fontWeight:"600",cursor:S?ye?"not-allowed":"pointer":"not-allowed",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",transform:!S||ye?"translateY(0) scale(1)":K?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",boxShadow:!S||ye?"none":K?"0 8px 25px rgba(245,158,11,0.25)":"0 2px 8px rgba(0,0,0,0.05)",minHeight:"60px",opacity:!S||ye?.5:1,pointerEvents:!S||ye?"none":"auto"}),addButton:K=>({flex:1,padding:"20px 32px",borderRadius:"16px",border:"2px solid #10b981",backgroundColor:K?"#10b981":"transparent",color:K?"#fff":"#10b981",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:K?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",boxShadow:K?"0 8px 25px rgba(16,185,129,0.25)":"0 2px 8px rgba(0,0,0,0.05)",minHeight:"60px"}),aiCard:{background:me?"linear-gradient(135deg, rgba(30,41,59,0.95) 0%, rgba(15,23,42,0.95) 100%)":"linear-gradient(135deg, rgba(239,246,255,0.95) 0%, rgba(224,242,254,0.95) 100%)",borderRadius:"20px",padding:"32px",border:me?"1px solid rgba(99,102,241,0.35)":"1px solid rgba(79,70,229,0.35)",boxShadow:me?"0 20px 50px rgba(99,102,241,0.15)":"0 24px 60px rgba(79,70,229,0.18)",backdropFilter:"blur(20px)",position:"relative",overflow:"hidden",minHeight:"350px"},aiCardHeader:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},aiIcon:{color:"#6366f1",animation:"sparkle 2s ease-in-out infinite"},aiDescription:{fontSize:"14px",color:me?"#cbd5e1":"#334155",lineHeight:"1.6",marginBottom:"16px"},aiTitle:{fontSize:"18px",fontWeight:"700",color:me?"#e5e7eb":"#1e293b"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},aiFeatures:{fontSize:"12px",color:me?"#e5e7eb":"#1e293b",lineHeight:"1.4"},errorMessage:{backgroundColor:me?"rgba(239,68,68,0.15)":"#fee2e2",color:me?"#fca5a5":"#dc2626",padding:"16px 20px",borderRadius:"12px",marginBottom:"20px",fontSize:"14px",border:me?"2px solid rgba(239,68,68,0.3)":"2px solid #fecaca",fontWeight:"500",lineHeight:"1.6",whiteSpace:"pre-line",boxShadow:"0 4px 12px rgba(239,68,68,0.15)"},manDaysDisplay:{fontSize:"14px",color:"#3b82f6",fontWeight:"600",marginTop:"4px"}};return t.jsxs("div",{style:De.page,children:[b&&t.jsx(TE,{message:C,onClose:()=>R(!1)}),t.jsxs("div",{style:De.headerRow,children:[t.jsx("div",{style:De.headerLeft,children:t.jsxs("div",{ref:Ce,style:De.toggleViewContainer,onClick:()=>{console.log(" AdminActuals - Header dropdown clicked, current state:",r),n(K=>!K)},onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),className:"floating",children:[t.jsx("span",{style:De.header,children:ir()}),t.jsx(Mo,{style:De.chevron(r,a),size:22})]})}),t.jsxs("div",{style:De.headerRight,children:[t.jsxs("button",{style:De.topButton(c==="alerts"),onMouseEnter:()=>p("alerts"),onMouseLeave:()=>p(null),onClick:()=>{console.log(" Alerts clicked - Navigating to alerts page"),window.location.href="/adminalerts"},children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:De.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:De.topButton(c==="profile"),onMouseEnter:()=>{p("profile"),m(!0)},onMouseLeave:()=>{p(null)},onClick:()=>{console.log(" Profile clicked - Navigating to profile page"),window.location.href="/adminprofile"},children:t.jsx(qt,{size:20})}),d&&de&&t.jsxs("div",{style:De.profileTooltip,onMouseEnter:()=>{m(!0)},onMouseLeave:()=>{m(!1)},children:[t.jsx("div",{style:De.tooltipArrow}),t.jsxs("div",{style:De.userInfo,children:[t.jsxs("div",{style:De.avatar,children:[de.firstName[0],de.lastName[0]]}),t.jsxs("div",{style:De.userDetails,children:[t.jsxs("div",{style:De.userName,children:[de.firstName," ",de.lastName]}),t.jsxs("div",{style:De.userRole,children:[de.role,"  ",de.department]})]})]}),t.jsxs("div",{style:De.userStats,children:[t.jsxs("div",{style:De.tooltipStatItem,children:[t.jsx("div",{style:De.tooltipStatNumber,children:nt.reduce((K,qe)=>K+parseFloat(qe.Hours||0),0).toFixed(1)}),t.jsx("div",{style:De.tooltipStatLabel,children:"Hours"})]}),t.jsxs("div",{style:De.tooltipStatItem,children:[t.jsx("div",{style:De.tooltipStatNumber,children:nt.filter(K=>K.Category==="Project").length}),t.jsx("div",{style:De.tooltipStatLabel,children:"Projects"})]}),t.jsxs("div",{style:De.tooltipStatItem,children:[t.jsx("div",{style:De.tooltipStatNumber,children:(V==null?void 0:V.utilizationPercentage)!==void 0?`${Number(V.utilizationPercentage).toFixed(0)}%`:"--"}),t.jsx("div",{style:De.tooltipStatLabel,children:"Capacity"})]})]}),t.jsx("button",{style:De.themeToggle,onClick:Tr,children:me?" Light Mode":" Dark Mode"})]})]})]})]}),r&&t.jsx("div",{style:De.sectionOverlay,onMouseDown:K=>{console.log(" AdminActuals - Dropdown container mousedown"),K.stopPropagation()},onClick:K=>{console.log(" AdminActuals - Dropdown container click"),K.stopPropagation()},children:t.jsx("div",{children:["actuals","view-logs"].map((K,qe)=>t.jsx("div",{style:De.blurOption(c===`section-${qe}`),onClick:Ct=>{console.log(" AdminActuals - Dropdown option clicked:",K),Ct.preventDefault(),Ct.stopPropagation(),zt(K)},onMouseDown:Ct=>{Ct.preventDefault(),Ct.stopPropagation()},onMouseEnter:()=>p(`section-${qe}`),onMouseLeave:()=>p(null),children:K==="actuals"?"Actuals":"View Logs"},K))})}),t.jsxs("div",{style:De.contentArea,children:[t.jsxs("div",{style:De.leftSection,children:[t.jsx("div",{style:De.categoryTabs,children:["Project","Operations","Admin/Others"].map(K=>t.jsx("div",{style:De.categoryTab(g===K,c===`category-${K}`),onClick:()=>{y(K),re("")},onMouseEnter:()=>p(`category-${K}`),onMouseLeave:()=>p(null),children:K},K))}),dt?t.jsx(jE,{isDarkMode:me}):t.jsxs("div",{style:De.formContainer,children:[B&&t.jsx("div",{style:De.errorMessage,children:B}),wt&&t.jsx("div",{style:{...De.errorMessage,animation:"shake 0.5s ease-in-out"},children:wt}),t.jsxs("div",{style:De.formRow,children:[t.jsx("div",{style:De.formGroup,children:t.jsx(er,{value:ge,onChange:_,label:t.jsxs("span",{children:["Start Date:",M.startDate==="valid"&&t.jsx("span",{style:{color:"#10b981",marginLeft:"8px",fontSize:"16px"},children:""})]}),isDarkMode:me,placeholder:"Select start date",max:ce()})}),t.jsx("div",{style:De.formGroup,children:t.jsx(er,{value:G,onChange:E,label:t.jsxs("span",{children:["End Date:",M.endDate==="valid"&&t.jsx("span",{style:{color:"#10b981",marginLeft:"8px",fontSize:"16px"},children:""})]}),isDarkMode:me,placeholder:"Select end date",max:ce()})})]}),t.jsx("div",{style:De.formRow,children:t.jsxs("div",{style:De.formGroup,children:[t.jsx(Tt,{value:Pe,onChange:K=>{re(K),we(!1)},label:t.jsxs("span",{children:[be(),M.project==="valid"&&t.jsx("span",{style:{color:"#10b981",marginLeft:"8px",fontSize:"16px"},children:""})]}),placeholder:fe.length>0&&g==="Project"?"Select your project...":ae.length>0&&g==="Operations"?"Select your operation...":`Select ${g.toLowerCase()}...`,isDarkMode:me,searchable:g==="Project"&&Ge.length>10,groupedOptions:g==="Project"&&fe.length>0?{"Your Assigned Projects":fe,"All Projects":Ge.filter(K=>!fe.includes(K))}:null,options:g==="Project"?fe.length===0?Ge:null:J(),allowCustom:!0,customPlaceholder:g==="Project"?"Enter custom project name":g==="Operations"?"Enter custom operation":"Enter custom leave type"}),g==="Project"&&fe.length===0&&Ge.length===0?t.jsxs("div",{style:{fontSize:"12px",color:"#ef4444",marginTop:"6px",padding:"8px 12px",backgroundColor:me?"rgba(239,68,68,0.1)":"#fee2e2",borderRadius:"8px",border:me?"1px solid rgba(239,68,68,0.3)":"1px solid #fecaca"},children:[" No projects available. Please contact your administrator to be assigned to a project, or use ",t.jsx("strong",{children:"Custom / Other"})," to enter manually."]}):g==="Project"&&fe.length===0?t.jsxs("div",{style:{fontSize:"12px",color:"#f59e0b",marginTop:"6px"},children:[" You're not assigned to any projects. Showing all available projects. Select from list or choose ",t.jsx("strong",{children:"Custom / Other"})," to enter your own."]}):t.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"6px"},children:["Select from list or choose ",t.jsx("strong",{children:"Custom / Other"})," to enter your own"]})]})}),t.jsx("div",{style:De.formRow,children:t.jsxs("div",{style:De.formGroup,children:[t.jsxs("label",{style:De.label,children:["Hours:",M.hours==="valid"&&t.jsx("span",{style:{color:"#10b981",marginLeft:"8px",fontSize:"16px"},children:""})]}),t.jsx("input",{type:"number",value:D,onChange:K=>ie(K.target.value),style:De.input(!1),disabled:g==="Admin/Others",placeholder:g==="Admin/Others"?"Auto-calculated":"Enter hours worked"}),g!=="Admin/Others"&&t.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"6px"},children:"Enter expected hours  system will adjust if capacity is exceeded"}),q.length>0&&t.jsxs("div",{style:{marginTop:"12px",padding:"14px",borderRadius:"12px",backgroundColor:me?"rgba(30,41,59,0.7)":"rgba(248,250,252,0.9)",border:me?"1px solid rgba(99,102,241,0.25)":"1px solid rgba(226,232,240,0.8)",color:me?"#e5e7eb":"#1e293b",fontSize:"12px"},children:[t.jsx("strong",{style:{color:me?"#e0e7ff":"#1e3a8a"},children:"System-detected activity (ManicTime):"}),q.slice(0,6).map((K,qe)=>t.jsxs("div",{style:{marginTop:"4px"},children:[" ",K.activityName,"  ",K.hours.toFixed(2),"h"]},qe)),q.length>6&&t.jsxs("div",{style:{fontStyle:"italic",marginTop:"4px"},children:["+ ",q.length-6," more"]})]}),g==="Admin/Others"?t.jsx("div",{style:De.autoCalculated,children:"Hours auto-calculated:  Half-Day = 4h/day  Other Leave = 8h/day (Weekends & public holidays excluded)"}):t.jsx("div",{style:De.autoCalculated,children:"(validated against remaining capacity, leave & public holidays)"}),t.jsxs("div",{style:De.manDaysDisplay,children:[" ",t.jsx(Hp,{value:parseFloat(L),decimals:2})," man-days"]})]})}),!S&&t.jsxs("div",{style:{backgroundColor:me?"rgba(239,68,68,0.15)":"#fee2e2",color:me?"#fca5a5":"#dc2626",padding:"16px 20px",borderRadius:"12px",marginBottom:"20px",fontSize:"14px",border:me?"2px solid rgba(239,68,68,0.3)":"2px solid #fecaca",fontWeight:"500",lineHeight:"1.6",display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("span",{style:{fontSize:"20px"},children:""}),t.jsxs("div",{children:[t.jsx("strong",{children:"ManicTime Not Configured"}),t.jsxs("div",{style:{fontSize:"13px",marginTop:"4px"},children:["AI Activity Matching requires ManicTime setup. Please contact your administrator to configure:",t.jsxs("ul",{style:{marginTop:"8px",marginBottom:"0",paddingLeft:"20px"},children:[t.jsx("li",{children:"Device Name"}),t.jsx("li",{children:"Timeline Key"}),t.jsx("li",{children:"ManicTime Subscription"})]})]})]})]}),t.jsxs("div",{style:De.buttonRow,children:[t.jsx("button",{style:De.recommendButton(c==="match"),onMouseEnter:()=>p("match"),onMouseLeave:()=>p(null),onClick:vr,disabled:ye||Z||!S,children:Z?t.jsxs(t.Fragment,{children:[t.jsx(_x,{}),t.jsx("span",{children:"Matching..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(yo,{size:20}),t.jsx("span",{children:"Match Activities"})]})}),t.jsx("button",{style:De.addButton(c==="add"),onMouseEnter:()=>p("add"),onMouseLeave:()=>p(null),onClick:Yt,disabled:ye,children:ye?t.jsxs(t.Fragment,{children:[t.jsx(_x,{}),t.jsx("span",{children:"Adding..."})]}):"Add"})]})]})]}),t.jsx("div",{style:De.rightSection,children:t.jsxs("div",{style:De.aiCard,className:"ai-card-fade",children:[t.jsx("div",{style:{position:"absolute",inset:0,background:me?"radial-gradient(circle at top right, rgba(99,102,241,0.18), transparent 60%)":"radial-gradient(circle at top right, rgba(59,130,246,0.18), transparent 60%)",pointerEvents:"none"}}),t.jsxs("div",{style:De.aiCardHeader,children:[t.jsx(yo,{size:20,style:De.aiIcon}),t.jsx("span",{style:De.aiTitle,children:"AI Activity Matching"})]}),Z?t.jsx("div",{style:{color:me?"#e0e7ff":"#1e3a8a",fontSize:"14px",fontWeight:"500"},children:" Analyzing your ManicTime activities..."}):Re?t.jsxs("div",{children:[t.jsx("p",{style:{fontSize:"14px",color:me?"#e5e7eb":"#1e293b",marginBottom:"12px"},children:t.jsx("strong",{children:Re.matching.summary})}),t.jsxs("div",{style:{fontSize:"16px",fontWeight:"700",color:me?"#e5e7eb":"#1e293b",marginBottom:"16px"},children:["Total Matched: ",t.jsx(Hp,{value:Re.matching.totalMatchedHours})," hours"]}),(()=>{const K={};return Re.matching.matchedActivities.forEach(qe=>{const Ct=qe.projectName||"Unassigned";K[Ct]||(K[Ct]=[]),K[Ct].push(qe)}),Object.entries(K).map(([qe,Ct])=>{const Lt=Ct.reduce((Ut,Bt)=>Ut+Bt.hours,0);return t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px",padding:"10px 14px",backgroundColor:me?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.1)",borderRadius:"10px",border:`2px solid ${me?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)"}`},children:[t.jsx(ib,{size:18,style:{color:"#3b82f6"}}),t.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:me?"#e5e7eb":"#1e293b",flex:1},children:qe}),t.jsxs("span",{style:{fontSize:"13px",fontWeight:"700",color:"#3b82f6",backgroundColor:me?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.15)",padding:"4px 10px",borderRadius:"8px"},children:[t.jsx(Hp,{value:Lt,decimals:2}),"h"]})]}),Ct.map((Ut,Bt)=>t.jsxs("div",{style:{backgroundColor:me?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.9)",borderRadius:"10px",padding:"12px 14px",marginBottom:"8px",marginLeft:"26px",border:"1px solid rgba(99,102,241,0.2)",boxShadow:"0 2px 8px rgba(99,102,241,0.06)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[t.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:me?"#e5e7eb":"#1e293b"},children:Ut.activityName}),t.jsx("span",{style:{display:"inline-block",padding:"3px 6px",borderRadius:"6px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",backgroundColor:Ut.confidence==="high"?"#10b98120":Ut.confidence==="medium"?"#f59e0b20":"#ef444420",color:Ut.confidence==="high"?"#10b981":Ut.confidence==="medium"?"#f59e0b":"#ef4444"},children:Ut.confidence})]}),t.jsxs("div",{style:{fontSize:"11px",color:me?"#cbd5e1":"#475569",marginBottom:"4px"},children:[Ut.hours," hours"]}),t.jsx("div",{style:{fontSize:"10px",color:me?"#9ca3af":"#64748b",fontStyle:"italic"},children:Ut.reason})]},Bt))]},qe)})})()]}):t.jsxs("div",{style:De.aiDescription,children:[t.jsx("strong",{children:"Two Ways to Use:"}),t.jsxs("div",{style:De.aiFeatures,children:[t.jsx("br",{}),t.jsx("strong",{children:"1. Match All Projects:"}),t.jsx("br",{})," Leave project field empty",t.jsx("br",{}),' Click "Match Activities"',t.jsx("br",{})," AI matches ALL assigned projects",t.jsx("br",{})," One-click adds all entries",t.jsx("br",{}),t.jsx("br",{}),t.jsx("strong",{children:"2. Single Project:"}),t.jsx("br",{})," Select specific project",t.jsx("br",{})," Match & add as usual"]})]})]})})]})]})},Op=({value:o,decimals:e=0})=>{const[r,n]=h.useState(0);return h.useEffect(()=>{let a=0;const A=o||0,p=A/(1e3/16),d=setInterval(()=>{a+=p,a>=A?(n(A),clearInterval(d)):n(a)},16);return()=>clearInterval(d)},[o]),t.jsx(t.Fragment,{children:e>0?r.toFixed(e):Math.floor(r)})},UE=({isDarkMode:o})=>t.jsx("div",{style:{backgroundColor:o?"#374151":"#fff",borderRadius:"20px",padding:"24px",border:o?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)"},children:[60,80,40,100].map((e,r)=>t.jsx("div",{style:{height:r===3?"60px":"20px",width:`${e}%`,background:o?"linear-gradient(90deg, #4b5563 0%, #6b7280 50%, #4b5563 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"8px",marginBottom:"12px"}},r))}),QE=()=>{const[o,e]=h.useState("view-logs"),[r,n]=h.useState(!1),[a,A]=h.useState(!1),[c,p]=h.useState(null),[d,m]=h.useState(null),[g,y]=h.useState(!1),[b,R]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[C,Q]=h.useState(""),[S,N]=h.useState(""),[M,Ie]=h.useState(""),[fe,F]=h.useState("Newest First"),[ae,ee]=h.useState([]),[Re,se]=h.useState(!1),[Z,ue]=h.useState(null),[pe,we]=h.useState({category:"",project:"",startDate:"",endDate:"",hours:""}),Pe=U=>{ue(U),we({category:U.category,project:U.project,startDate:U.date,endDate:U.dateEnd,hours:U.hours.toString()}),se(!0)},re=async()=>{const U=ce=>{const[Ce,H,P]=ce.split("/");return`${P}-${H}-${Ce}`};if(!pe.hours){alert("Please enter hours");return}const Ae=new Date().toISOString().split("T")[0],Y=U(pe.startDate),V=U(pe.endDate);if(Y>Ae||V>Ae){alert(" Cannot edit actuals for future dates. Please select today or earlier.");return}const ve=new Date(Y),me=new Date(V),T=Math.ceil((me-ve)/(1e3*60*60*24))+1,wt=T*24,w=parseFloat(pe.hours);if(w>wt){alert(` Hours Exceed Maximum Allowed!

Date Range: ${pe.startDate} - ${pe.endDate}
Total Days: ${T} day${T!==1?"s":""}
Maximum Allowed: ${wt} hours (${T}  24h)
You Entered: ${w.toFixed(1)} hours

Please reduce your hours to ${wt} or less.`);return}try{const ce=await Te(`/actuals/${Z.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:pe.category,project:pe.project,startDate:U(pe.startDate),endDate:U(pe.endDate),hours:pe.hours})});if(!ce.ok){const H=await ce.json();throw new Error(H.message||"Failed to update entry")}alert("Entry updated successfully!"),se(!1),ue(null);const Ce=await Te("/actuals",{credentials:"include"});if(Ce.ok){const H=await Ce.json();ee(H)}}catch(ce){console.error(" Edit error:",ce),alert("Error updating entry: "+ce.message)}},Ee=()=>{se(!1),ue(null),we({category:"",project:"",startDate:"",endDate:"",hours:""})},k=["Newest First","Oldest First","Most Hours","Least Hours","Project A-Z","Project Z-A"],[ge,_]=h.useState(!0),[G,E]=h.useState(null),[D,ie]=h.useState({weeklyHours:0,capacityUtilization:0,projectHours:0}),[L,j]=h.useState({firstName:"",lastName:"",role:"",email:"",department:""}),de=h.useRef(null),[Oe,Ge]=h.useState({top:64,left:0});h.useEffect(()=>{(async()=>{try{_(!0);const Ae=await Te("/actuals",{credentials:"include"});if(!Ae.ok)throw new Error("Failed to fetch actuals");const Y=await Ae.json();ee(Y),E(null)}catch(Ae){console.error("Error fetching actuals:",Ae),E(Ae.message)}finally{_(!1)}})()},[]),h.useEffect(()=>{(async()=>{try{const Ae=await Te("/user/profile",{credentials:"include"});if(!Ae.ok)throw new Error("Failed to fetch profile");const Y=await Ae.json();j(Y)}catch(Ae){console.error("Error fetching profile:",Ae)}})()},[]),h.useEffect(()=>{(async()=>{try{const Ae=await Te("/actuals/stats",{credentials:"include"});if(!Ae.ok)throw new Error("Failed to fetch stats");const Y=await Ae.json();ie(Y)}catch(Ae){console.error("Error fetching stats:",Ae)}})()},[]),h.useEffect(()=>{if(de.current&&r){const U=de.current.getBoundingClientRect();Ge({top:U.bottom+4,left:U.left})}},[r]),h.useEffect(()=>{const U=Ae=>{de.current&&!de.current.contains(Ae.target)&&n(!1)};return r&&document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[r]);const Ve=U=>{const Ae={JRET:"#3b82f6",MaxCap:"#10b981",Analytics:"#f59e0b",Training:"#8b5cf6",Research:"#ec4899",Development:"#06b6d4",default:"#64748b"};return Ae[U]||Ae.default},ke=U=>{const Ae={Project:"#3b82f6",Admin:"#10b981",Training:"#f59e0b",Meeting:"#8b5cf6",Leave:"#ef4444",default:"#64748b"};return Ae[U]||Ae.default},Be=ae.map(U=>({id:U.Id,date:new Date(U.StartDate).toLocaleDateString("en-GB"),dateEnd:new Date(U.EndDate).toLocaleDateString("en-GB"),project:U.Project||U.Category,projectColor:U.Project?Ve(U.Project):ke(U.Category),category:U.Category,hours:Number(U.Hours)||0,manDays:(parseFloat(U.Hours)/8).toFixed(2),createdAt:new Date(U.CreatedAt).toLocaleString("en-GB"),updatedAt:U.UpdatedAt?new Date(U.UpdatedAt).toLocaleString("en-GB"):null,isEdited:U.UpdatedAt&&new Date(U.UpdatedAt)>new Date(U.CreatedAt)})),nt=[...new Set(Be.map(U=>U.project).filter(Boolean))],yt=[...new Set(Be.map(U=>U.category))],lt=[...Be.filter(U=>{const Ae=M===""||U.project.toLowerCase().includes(M.toLowerCase())||U.category.toLowerCase().includes(M.toLowerCase())||U.id.toString().includes(M),Y=!C||C==="All Projects/Operations/Admin"||U.project===C,V=!S||S==="All Categories"||U.category===S;return Ae&&Y&&V})].sort((U,Ae)=>{switch({"Newest First":"newest","Oldest First":"oldest","Most Hours":"most-hours","Least Hours":"least-hours","Project A-Z":"project-az","Project Z-A":"project-za"}[fe]||"newest"){case"newest":return new Date(Ae.createdAt)-new Date(U.createdAt);case"oldest":return new Date(U.createdAt)-new Date(Ae.createdAt);case"most-hours":return Ae.hours-U.hours;case"least-hours":return U.hours-Ae.hours;case"project-az":return U.project.localeCompare(Ae.project);case"project-za":return Ae.project.localeCompare(U.project);default:return 0}}),ye=()=>{R(!b),y(!1);try{localStorage.setItem("darkMode",(!b).toString())}catch(U){console.error("Failed to save theme:",U)}},ze=U=>{e(U),n(!1),U==="actuals"&&(window.location.href="/adminactuals")},dt=()=>{const U=["ID","Project","Category","Start Date","End Date","Hours","Man-Days","Created At"],Ae=lt.map(T=>[T.id,`"${T.project}"`,T.category,T.date,T.dateEnd,T.hours.toFixed(1),T.manDays,`"${T.createdAt}"`]),Y=[U.join(","),...Ae.map(T=>T.join(","))].join(`
`),V=new Blob([Y],{type:"text/csv;charset=utf-8;"}),ve=window.URL.createObjectURL(V),me=document.createElement("a");me.href=ve,me.download=`actuals-logs-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(me),me.click(),document.body.removeChild(me),window.URL.revokeObjectURL(ve)},Ne=()=>o==="actuals"?"Actuals":"Logs";h.useEffect(()=>{const U=document.createElement("style");return U.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      @keyframes pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }
      
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      .spinning {
        animation: spin 1s linear infinite;
      }
    `,document.head.appendChild(U),()=>document.head.removeChild(U)},[]),h.useEffect(()=>{const U=document.createElement("style");return U.textContent=`
    /* Number input spinner styling */
    input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  opacity: 1;
  cursor: pointer;
  height: 40px;
  background-color: ${b?"#6b7280":"#e5e7eb"};
  border-left: 1px solid ${b?"#4b5563":"#d1d5db"};
  filter: ${b?"brightness(0.8) invert(1)":"none"};
}

input[type="number"]::-webkit-inner-spin-button:hover,
input[type="number"]::-webkit-outer-spin-button:hover {
  background-color: ${b?"#9ca3af":"#cbd5e1"};
  filter: ${b?"brightness(1) invert(1)":"none"};
}
    
    /* Firefox */
    input[type="number"] {
      -moz-appearance: textfield;
    }
  `,document.head.appendChild(U),()=>document.head.removeChild(U)},[b]);const B={page:{minHeight:"100vh",padding:"30px",background:b?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"40px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"32px",fontWeight:"800",color:b?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},toggleViewContainer:{fontSize:"20px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:b?"#e2e8f0":"#1e293b"},chevron:(U,Ae)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:U||Ae?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:U||Ae?"#3b82f6":b?"#94a3b8":"#64748b"}),sectionOverlay:{position:"fixed",top:Oe.top,left:Oe.left,zIndex:999,backgroundColor:b?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:b?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},blurOption:U=>({backgroundColor:U?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:b?"#e2e8f0":"#374151",transform:U?"translateX(4px)":"translateX(0)",borderLeft:U?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),filtersContainer:{display:"flex",gap:"20px",marginBottom:"32px",flexWrap:"wrap",alignItems:"center"},filterGroup:{display:"flex",flexDirection:"column",gap:"8px"},filterLabel:{fontSize:"14px",fontWeight:"600",color:b?"#e2e8f0":"#374151",transition:"all 0.3s ease"},filterSelect:{padding:"12px 16px",borderRadius:"12px",border:b?"2px solid #4b5563":"2px solid #e2e8f0",backgroundColor:b?"#374151":"#fff",fontSize:"14px",fontWeight:"500",color:b?"#e2e8f0":"#374151",cursor:"pointer",transition:"all 0.3s ease",minWidth:"150px",outline:"none"},statsRow:{display:"flex",gap:"20px",marginBottom:"32px",flexWrap:"wrap"},statCard:(U,Ae)=>({flex:"1",minWidth:"200px",backgroundColor:b?"#374151":"#fff",borderRadius:"16px",padding:"24px",boxShadow:Ae?"0 12px 24px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:Ae?"translateY(-4px) scale(1.02)":"translateY(0) scale(1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",border:b?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)",borderLeft:`4px solid ${U}`}),statIcon:{marginBottom:"12px",color:"#3b82f6"},statLabel:{fontSize:"14px",fontWeight:"600",color:b?"#94a3b8":"#64748b",marginBottom:"4px"},statValue:{fontSize:"24px",fontWeight:"800",color:b?"#e2e8f0":"#1e293b"},logsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:"24px"},logCard:U=>({backgroundColor:b?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:U?"0 12px 24px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:U?"translateY(-4px) scale(1.02)":"translateY(0) scale(1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",border:b?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)",position:"relative",overflow:"hidden"}),cardHeader:{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",marginBottom:"16px"},cardNumber:{fontSize:"12px",fontWeight:"700",color:b?"#94a3b8":"#64748b",backgroundColor:b?"#4b5563":"#f1f5f9",padding:"4px 8px",borderRadius:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},projectInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},projectBadge:U=>({width:"12px",height:"12px",borderRadius:"50%",backgroundColor:U,flexShrink:0}),projectName:{fontSize:"18px",fontWeight:"700",color:b?"#e2e8f0":"#1e293b"},categoryBadge:{fontSize:"12px",fontWeight:"600",color:b?"#94a3b8":"#64748b",backgroundColor:b?"#4b5563":"#f1f5f9",padding:"4px 8px",borderRadius:"6px",marginLeft:"auto"},dateInfo:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:b?"#e2e8f0":"#64748b",marginBottom:"16px"},hoursDisplay:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",padding:"16px",backgroundColor:b?"#4b5563":"#f8fafc",borderRadius:"12px"},hoursItem:{textAlign:"center",flex:1},hoursLabel:{fontSize:"12px",fontWeight:"600",color:b?"#94a3b8":"#64748b",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},hoursValue:U=>({fontSize:"20px",fontWeight:"700",color:U||"#3b82f6"}),hoursDivider:{width:"1px",height:"30px",backgroundColor:b?"#6b7280":"#d1d5db",margin:"0 16px"},createdInfo:{marginTop:"16px",padding:"12px",backgroundColor:b?"#4b556350":"#f8fafc50",borderRadius:"8px",borderLeft:`3px solid ${b?"#6b7280":"#d1d5db"}`},createdLabel:{fontSize:"12px",fontWeight:"600",color:b?"#94a3b8":"#64748b",marginBottom:"4px",display:"flex",alignItems:"center",gap:"6px"},createdText:{fontSize:"13px",color:b?"#e2e8f0":"#374151",lineHeight:"1.4"},topButton:U=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:U?"rgba(59,130,246,0.1)":b?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:U?"#3b82f6":b?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:U?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:U?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:b?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:b?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:b?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:b?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:b?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:b?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:b?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:b?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:b?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",gap:"20px"},loadingText:{fontSize:"18px",fontWeight:"600",color:b?"#94a3b8":"#64748b"},errorContainer:{backgroundColor:b?"#7f1d1d":"#fee2e2",color:b?"#fca5a5":"#991b1b",padding:"20px",borderRadius:"12px",marginBottom:"20px",border:b?"1px solid #991b1b":"1px solid #fca5a5"},emptyState:{textAlign:"center",padding:"60px 20px",color:b?"#94a3b8":"#64748b"},emptyStateIcon:{marginBottom:"16px",opacity:.5},emptyStateText:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},emptyStateSubtext:{fontSize:"14px",opacity:.8},searchContainer:{position:"relative",display:"flex",alignItems:"center",gap:"12px",backgroundColor:b?"#374151":"#fff",borderRadius:"12px",padding:"12px 16px",border:b?"2px solid #4b5563":"2px solid #e2e8f0",marginBottom:"24px",transition:"all 0.3s ease",maxWidth:"500px"},searchInput:{flex:1,border:"none",backgroundColor:"transparent",fontSize:"14px",color:b?"#e2e8f0":"#374151",outline:"none",fontFamily:'"Montserrat", sans-serif'},exportButton:U=>({padding:"12px 20px",borderRadius:"12px",border:"2px solid #10b981",backgroundColor:U?"#10b981":"transparent",color:U?"#fff":"#10b981",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"8px",transform:U?"translateY(-2px)":"translateY(0)",boxShadow:U?"0 8px 25px rgba(16,185,129,0.25)":"0 2px 8px rgba(0,0,0,0.05)",marginLeft:"auto"}),controlsRow:{display:"flex",alignItems:"flex-end",gap:"20px",marginBottom:"24px",flexWrap:"wrap"},editButton:U=>({position:"absolute",top:"16px",right:"16px",padding:"8px",borderRadius:"8px",border:"none",backgroundColor:U?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.1)",color:"#3b82f6",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",transform:U?"scale(1.1)":"scale(1)"}),editedBadge:{fontSize:"11px",fontWeight:"700",color:"#3b82f6",backgroundColor:b?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.1)",padding:"4px 8px",borderRadius:"6px",marginLeft:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},modalContent:{backgroundColor:b?"rgba(55,65,81,0.98)":"rgba(255,255,255,0.98)",borderRadius:"20px",padding:"32px",maxWidth:"500px",width:"100%",border:b?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(226,232,240,0.8)",boxShadow:"0 25px 50px rgba(0,0,0,0.25)",backdropFilter:"blur(20px)"},modalHeader:{fontSize:"24px",fontWeight:"700",color:b?"#e2e8f0":"#1e293b",marginBottom:"24px",paddingBottom:"16px",borderBottom:b?"2px solid rgba(75,85,99,0.3)":"2px solid rgba(226,232,240,0.5)"},formGroup:{marginBottom:"20px"},formLabel:{display:"block",fontSize:"14px",fontWeight:"600",color:b?"#e2e8f0":"#374151",marginBottom:"8px"},formInput:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:b?"2px solid #4b5563":"2px solid #e2e8f0",backgroundColor:b?"#374151":"#fff",color:b?"#e2e8f0":"#374151",fontSize:"14px",fontFamily:'"Montserrat", sans-serif',outline:"none",transition:"all 0.3s ease"},formActions:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"24px"},formButton:(U,Ae)=>({padding:"12px 24px",borderRadius:"12px",border:U==="primary"?"none":`2px solid ${b?"#4b5563":"#e2e8f0"}`,backgroundColor:U==="primary"?Ae?"#2563eb":"#3b82f6":Ae?b?"#4b5563":"#f1f5f9":"transparent",color:U==="primary"?"#fff":b?"#e2e8f0":"#374151",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",transform:Ae?"translateY(-2px)":"translateY(0)",boxShadow:Ae&&U==="primary"?"0 8px 25px rgba(59,130,246,0.25)":"none"})};return ge?t.jsxs("div",{style:B.page,children:[t.jsx("div",{style:B.headerRow,children:t.jsx("div",{style:B.headerLeft,children:t.jsx("div",{style:B.header,children:"Logs"})})}),t.jsx("div",{style:B.statsRow,children:[1,2,3].map(U=>t.jsx("div",{style:{flex:1,minWidth:"200px",backgroundColor:b?"#374151":"#fff",borderRadius:"16px",padding:"24px",border:b?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)"},children:t.jsx("div",{style:{height:"80px",background:b?"linear-gradient(90deg, #4b5563 0%, #6b7280 50%, #4b5563 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"8px"}})},U))}),t.jsx("div",{style:B.logsGrid,children:[1,2,3,4,5,6].map(U=>t.jsx(UE,{isDarkMode:b},U))})]}):t.jsxs("div",{style:B.page,children:[t.jsxs("div",{style:B.headerRow,children:[t.jsx("div",{style:B.headerLeft,children:t.jsxs("div",{ref:de,style:B.toggleViewContainer,onClick:()=>n(U=>!U),onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),className:"floating",children:[t.jsx("span",{style:B.header,children:Ne()}),t.jsx(Mo,{style:B.chevron(r,a),size:22})]})}),t.jsxs("div",{style:B.headerRight,children:[t.jsxs("button",{style:B.topButton(c==="alerts"),onMouseEnter:()=>p("alerts"),onMouseLeave:()=>p(null),onClick:()=>window.location.href="/adminalerts",children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:B.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:B.topButton(c==="profile"),onMouseEnter:()=>{p("profile"),y(!0)},onMouseLeave:()=>{p(null)},onClick:()=>window.location.href="/adminprofile",children:t.jsx(qt,{size:20})}),g&&t.jsxs("div",{style:B.profileTooltip,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[t.jsx("div",{style:B.tooltipArrow}),t.jsxs("div",{style:B.userInfo,children:[t.jsx("div",{style:B.avatar,children:L.firstName&&L.lastName?`${L.firstName[0]}${L.lastName[0]}`:"??"}),t.jsxs("div",{style:B.userDetails,children:[t.jsx("div",{style:B.userName,children:L.firstName&&L.lastName?`${L.firstName} ${L.lastName}`:"Loading..."}),t.jsxs("div",{style:B.userRole,children:[L.role?`${L.role.charAt(0).toUpperCase()+L.role.slice(1)}`:"User","  ",L.department||"Loading..."]})]})]}),t.jsxs("div",{style:B.userStats,children:[t.jsxs("div",{style:B.tooltipStatItem,children:[t.jsx("div",{style:B.tooltipStatNumber,children:D.totalHours||0}),t.jsx("div",{style:B.tooltipStatLabel,children:"Hours"})]}),t.jsxs("div",{style:B.tooltipStatItem,children:[t.jsx("div",{style:B.tooltipStatNumber,children:D.projectHours>0?Math.ceil(D.projectHours/40):0}),t.jsx("div",{style:B.tooltipStatLabel,children:"Projects"})]}),t.jsxs("div",{style:B.tooltipStatItem,children:[t.jsxs("div",{style:B.tooltipStatNumber,children:[D.capacityUtilization,"%"]}),t.jsx("div",{style:B.tooltipStatLabel,children:"Capacity"})]})]}),t.jsx("button",{style:B.themeToggle,onClick:ye,children:b?" Light Mode":" Dark Mode"})]})]})]})]}),r&&t.jsx("div",{style:B.sectionOverlay,onMouseDown:U=>U.stopPropagation(),onClick:U=>U.stopPropagation(),children:t.jsx("div",{children:["actuals","view-logs"].map((U,Ae)=>t.jsx("div",{style:B.blurOption(c===`section-${Ae}`),onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),ze(U)},onMouseDown:Y=>{Y.preventDefault(),Y.stopPropagation()},onMouseEnter:()=>p(`section-${Ae}`),onMouseLeave:()=>p(null),children:U==="actuals"?"Actuals":"View Logs"},U))})}),G&&t.jsxs("div",{style:B.errorContainer,children:[t.jsx("strong",{children:"Error:"})," ",G]}),t.jsxs("div",{style:B.searchContainer,children:[t.jsx($A,{size:20,style:{color:b?"#94a3b8":"#64748b"}}),t.jsx("input",{type:"text",placeholder:"Search by project, category, or ID...",value:M,onChange:U=>Ie(U.target.value),style:B.searchInput}),M&&t.jsx(gr,{size:20,onClick:()=>Ie(""),style:{cursor:"pointer",color:b?"#94a3b8":"#64748b"}})]}),t.jsxs("div",{style:B.controlsRow,children:[t.jsxs("div",{style:B.filterGroup,children:[t.jsx("label",{style:B.filterLabel,children:"Filter by Project:"}),t.jsx(Tt,{value:C,onChange:U=>Q(U),options:nt,placeholder:"All Projects/Operations/Admin",isDarkMode:b,compact:!0})]}),t.jsxs("div",{style:B.filterGroup,children:[t.jsx("label",{style:B.filterLabel,children:"Filter by Category:"}),t.jsx(Tt,{value:S,onChange:U=>N(U),options:yt,placeholder:"All Categories",isDarkMode:b,compact:!0})]}),t.jsxs("div",{style:B.filterGroup,children:[t.jsx("label",{style:B.filterLabel,children:"Sort by:"}),t.jsx(Tt,{value:fe,onChange:U=>F(U),options:k,placeholder:"Select sort order...",isDarkMode:b,searchable:!1,compact:!0})]}),t.jsxs("button",{onClick:dt,style:B.exportButton(c==="export"),onMouseEnter:()=>p("export"),onMouseLeave:()=>p(null),children:[t.jsx(ob,{size:16}),"Export CSV (",lt.length,")"]})]}),t.jsxs("div",{style:B.statsRow,children:[t.jsxs("div",{style:B.statCard("#3b82f6",c==="total"),onMouseEnter:()=>p("total"),onMouseLeave:()=>p(null),children:[t.jsx("div",{style:B.statIcon,children:t.jsx(GA,{size:24})}),t.jsx("div",{style:B.statLabel,children:"Total Entries"}),t.jsx("div",{style:B.statValue,children:t.jsx(Op,{value:lt.length})})]}),t.jsxs("div",{style:B.statCard("#10b981",c==="hours"),onMouseEnter:()=>p("hours"),onMouseLeave:()=>p(null),children:[t.jsx("div",{style:B.statIcon,children:t.jsx(bs,{size:24})}),t.jsx("div",{style:B.statLabel,children:"Total Hours"}),t.jsx("div",{style:B.statValue,children:t.jsx(Op,{value:lt.reduce((U,Ae)=>U+(Ae.hours||0),0),decimals:1})})]}),t.jsxs("div",{style:B.statCard("#f59e0b",c==="mandays"),onMouseEnter:()=>p("mandays"),onMouseLeave:()=>p(null),children:[t.jsx("div",{style:B.statIcon,children:t.jsx(bd,{size:24})}),t.jsx("div",{style:B.statLabel,children:"Total Man-Days"}),t.jsx("div",{style:B.statValue,children:t.jsx(Op,{value:lt.reduce((U,Ae)=>U+(Ae.hours||0),0)/8,decimals:2})})]})]}),lt.length===0&&!ge&&t.jsxs("div",{style:B.emptyState,children:[t.jsx("div",{style:B.emptyStateIcon,children:t.jsx(ib,{size:64})}),t.jsx("div",{style:B.emptyStateText,children:"No logs found"}),t.jsx("div",{style:B.emptyStateSubtext,children:ae.length===0?"Start tracking your actuals to see them here":"Try adjusting your filters"})]}),t.jsx("div",{style:B.logsGrid,children:lt.map((U,Ae)=>t.jsxs("div",{style:B.logCard(d===Ae),onMouseEnter:()=>m(Ae),onMouseLeave:()=>m(null),children:[t.jsx("button",{style:B.editButton(c===`edit-${U.id}`),onMouseEnter:()=>p(`edit-${U.id}`),onMouseLeave:()=>p(null),onClick:()=>Pe(U),title:"Edit entry",children:t.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),t.jsx("div",{style:B.cardHeader,children:t.jsxs("div",{style:B.cardNumber,children:["#",U.id,U.isEdited&&t.jsx("span",{style:B.editedBadge,children:"Edited by you"})]})}),t.jsxs("div",{style:B.projectInfo,children:[t.jsx("div",{style:B.projectBadge(U.projectColor)}),t.jsx("div",{style:B.projectName,children:U.project}),t.jsx("div",{style:B.categoryBadge,children:U.category})]}),t.jsxs("div",{style:B.dateInfo,children:[t.jsx(wo,{size:14}),U.date===U.dateEnd?U.date:`${U.date} - ${U.dateEnd}`]}),t.jsxs("div",{style:B.hoursDisplay,children:[t.jsxs("div",{style:B.hoursItem,children:[t.jsx("div",{style:B.hoursLabel,children:"Hours"}),t.jsx("div",{style:B.hoursValue("#3b82f6"),children:U.hours.toFixed(1)})]}),t.jsx("div",{style:B.hoursDivider}),t.jsxs("div",{style:B.hoursItem,children:[t.jsx("div",{style:B.hoursLabel,children:"Man-Days"}),t.jsx("div",{style:B.hoursValue("#10b981"),children:U.manDays})]})]}),t.jsxs("div",{style:B.createdInfo,children:[t.jsxs("div",{style:B.createdLabel,children:[t.jsx(bs,{size:14}),U.isEdited?"Edited by you":"Created"]}),t.jsx("div",{style:B.createdText,children:U.isEdited?U.updatedAt:U.createdAt})]})]},U.id))}),Re&&Z&&t.jsx("div",{style:B.modalOverlay,onClick:Ee,children:t.jsxs("div",{style:B.modalContent,onClick:U=>U.stopPropagation(),children:[t.jsxs("div",{style:B.modalHeader,children:["Edit Entry #",Z.id]}),t.jsx("div",{style:{padding:"16px",backgroundColor:b?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"12px",marginBottom:"20px",border:b?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(59,130,246,0.1)"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",fontSize:"13px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"600",color:b?"#94a3b8":"#64748b",marginBottom:"4px"},children:"Category"}),t.jsx("div",{style:{color:b?"#e2e8f0":"#1e293b",fontWeight:"500"},children:pe.category})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"600",color:b?"#94a3b8":"#64748b",marginBottom:"4px"},children:"Project"}),t.jsx("div",{style:{color:b?"#e2e8f0":"#1e293b",fontWeight:"500"},children:pe.project||"N/A"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"600",color:b?"#94a3b8":"#64748b",marginBottom:"4px"},children:"Start Date"}),t.jsx("div",{style:{color:b?"#e2e8f0":"#1e293b",fontWeight:"500"},children:pe.startDate})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"600",color:b?"#94a3b8":"#64748b",marginBottom:"4px"},children:"End Date"}),t.jsx("div",{style:{color:b?"#e2e8f0":"#1e293b",fontWeight:"500"},children:pe.endDate})]})]})}),t.jsxs("div",{style:B.formGroup,children:[t.jsx("label",{style:B.formLabel,children:"Hours (Editable)"}),t.jsx("input",{type:"number",step:"0.5",min:"0",style:{...B.formInput,fontSize:"16px",fontWeight:"600",textAlign:"center"},value:pe.hours,onChange:U=>we({...pe,hours:U.target.value}),placeholder:"Enter hours",autoFocus:!0})]}),t.jsxs("div",{style:B.formActions,children:[t.jsx("button",{style:B.formButton("secondary",c==="cancel-edit"),onMouseEnter:()=>p("cancel-edit"),onMouseLeave:()=>p(null),onClick:Ee,children:"Cancel"}),t.jsx("button",{style:B.formButton("primary",c==="confirm-edit"),onMouseEnter:()=>p("confirm-edit"),onMouseLeave:()=>p(null),onClick:re,children:"Save Changes"})]})]})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Tg=function(o,e){return Tg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},Tg(o,e)};function Bo(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Tg(o,e);function r(){this.constructor=o}o.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Fg=function(){return Fg=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(e[A]=r[A])}return e},Fg.apply(this,arguments)};function wn(o,e,r,n){function a(A){return A instanceof r?A:new r(function(c){c(A)})}return new(r||(r=Promise))(function(A,c){function p(g){try{m(n.next(g))}catch(y){c(y)}}function d(g){try{m(n.throw(g))}catch(y){c(y)}}function m(g){g.done?A(g.value):a(g.value).then(p,d)}m((n=n.apply(o,[])).next())})}function gn(o,e){var r={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},n,a,A,c;return c={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function p(m){return function(g){return d([m,g])}}function d(m){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(A=m[0]&2?a.return:m[0]?a.throw||((A=a.return)&&A.call(a),0):a.next)&&!(A=A.call(a,m[1])).done)return A;switch(a=0,A&&(m=[m[0]&2,A.value]),m[0]){case 0:case 1:A=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,a=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(A=r.trys,!(A=A.length>0&&A[A.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!A||m[1]>A[0]&&m[1]<A[3])){r.label=m[1];break}if(m[0]===6&&r.label<A[1]){r.label=A[1],A=m;break}if(A&&r.label<A[2]){r.label=A[2],r.ops.push(m);break}A[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(o,r)}catch(g){m=[6,g],a=0}finally{n=A=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function sc(o,e,r){if(arguments.length===2)for(var n=0,a=e.length,A;n<a;n++)(A||!(n in e))&&(A||(A=Array.prototype.slice.call(e,0,n)),A[n]=e[n]);return o.concat(A||e)}var oi=function(){function o(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return o.prototype.add=function(e,r,n,a){return new o(this.left+e,this.top+r,this.width+n,this.height+a)},o.fromClientRect=function(e,r){return new o(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},o.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new o(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):o.EMPTY},o.EMPTY=new o(0,0,0,0),o}(),Od=function(o,e){return oi.fromClientRect(o,e.getBoundingClientRect())},RE=function(o){var e=o.body,r=o.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new oi(0,0,n,a)},_d=function(o){for(var e=[],r=0,n=o.length;r<n;){var a=o.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var A=o.charCodeAt(r++);(A&64512)===56320?e.push(((a&1023)<<10)+(A&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},kr=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,o);var r=o.length;if(!r)return"";for(var n=[],a=-1,A="";++a<r;){var c=o[a];c<=65535?n.push(c):(c-=65536,n.push((c>>10)+55296,c%1024+56320)),(a+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},zx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ME=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ac=0;ac<zx.length;ac++)ME[zx.charCodeAt(ac)]=ac;var Kx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xA=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ac=0;Ac<Kx.length;Ac++)xA[Kx.charCodeAt(Ac)]=Ac;var LE=function(o){var e=o.length*.75,r=o.length,n,a=0,A,c,p,d;o[o.length-1]==="="&&(e--,o[o.length-2]==="="&&e--);var m=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),g=Array.isArray(m)?m:new Uint8Array(m);for(n=0;n<r;n+=4)A=xA[o.charCodeAt(n)],c=xA[o.charCodeAt(n+1)],p=xA[o.charCodeAt(n+2)],d=xA[o.charCodeAt(n+3)],g[a++]=A<<2|c>>4,g[a++]=(c&15)<<4|p>>2,g[a++]=(p&3)<<6|d&63;return m},DE=function(o){for(var e=o.length,r=[],n=0;n<e;n+=2)r.push(o[n+1]<<8|o[n]);return r},PE=function(o){for(var e=o.length,r=[],n=0;n<e;n+=4)r.push(o[n+3]<<24|o[n+2]<<16|o[n+1]<<8|o[n]);return r},xs=5,uf=11,_p=2,NE=uf-xs,xw=65536>>xs,HE=1<<xs,zp=HE-1,OE=1024>>xs,_E=xw+OE,zE=_E,KE=32,WE=zE+KE,GE=65536>>uf,$E=1<<NE,VE=$E-1,Wx=function(o,e,r){return o.slice?o.slice(e,r):new Uint16Array(Array.prototype.slice.call(o,e,r))},YE=function(o,e,r){return o.slice?o.slice(e,r):new Uint32Array(Array.prototype.slice.call(o,e,r))},JE=function(o,e){var r=LE(o),n=Array.isArray(r)?PE(r):new Uint32Array(r),a=Array.isArray(r)?DE(r):new Uint16Array(r),A=24,c=Wx(a,A/2,n[4]/2),p=n[5]===2?Wx(a,(A+n[4])/2):YE(n,Math.ceil((A+n[4])/4));return new XE(n[0],n[1],n[2],n[3],c,p)},XE=function(){function o(e,r,n,a,A,c){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=A,this.data=c}return o.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>xs],r=(r<<_p)+(e&zp),this.data[r];if(e<=65535)return r=this.index[xw+(e-55296>>xs)],r=(r<<_p)+(e&zp),this.data[r];if(e<this.highStart)return r=WE-GE+(e>>uf),r=this.index[r],r+=e>>xs&VE,r=this.index[r],r=(r<<_p)+(e&zp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},o}(),Gx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qE=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var lc=0;lc<Gx.length;lc++)qE[Gx.charCodeAt(lc)]=lc;var ZE="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",$x=50,ek=1,yw=2,bw=3,tk=4,rk=5,Vx=7,ww=8,Yx=9,Ui=10,Ug=11,Jx=12,Qg=13,nk=14,yA=15,Rg=16,cc=17,uA=18,ok=19,Xx=20,Mg=21,pA=22,Kp=23,na=24,Hn=25,bA=26,wA=27,oa=28,ik=29,us=30,sk=31,dc=32,uc=33,Lg=34,Dg=35,Pg=36,zA=37,Ng=38,Mc=39,Lc=40,Wp=41,vw=42,ak=43,Ak=[9001,65288],Cw="!",Ht="",pc="",Hg=JE(ZE),Jo=[us,Pg],Og=[ek,yw,bw,rk],Bw=[Ui,ww],qx=[wA,bA],lk=Og.concat(Bw),Zx=[Ng,Mc,Lc,Lg,Dg],ck=[yA,Qg],dk=function(o,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return o.forEach(function(A,c){var p=Hg.get(A);if(p>$x?(a.push(!0),p-=$x):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return n.push(c),r.push(Rg);if(p===tk||p===Ug){if(c===0)return n.push(c),r.push(us);var d=r[c-1];return lk.indexOf(d)===-1?(n.push(n[c-1]),r.push(d)):(n.push(c),r.push(us))}if(n.push(c),p===sk)return r.push(e==="strict"?Mg:zA);if(p===vw||p===ik)return r.push(us);if(p===ak)return A>=131072&&A<=196605||A>=196608&&A<=262141?r.push(zA):r.push(us);r.push(p)}),[n,r,a]},Gp=function(o,e,r,n){var a=n[r];if(Array.isArray(o)?o.indexOf(a)!==-1:o===a)for(var A=r;A<=n.length;){A++;var c=n[A];if(c===e)return!0;if(c!==Ui)break}if(a===Ui)for(var A=r;A>0;){A--;var p=n[A];if(Array.isArray(o)?o.indexOf(p)!==-1:o===p)for(var d=r;d<=n.length;){d++;var c=n[d];if(c===e)return!0;if(c!==Ui)break}if(p!==Ui)break}return!1},ey=function(o,e){for(var r=o;r>=0;){var n=e[r];if(n===Ui)r--;else return n}return 0},uk=function(o,e,r,n,a){if(r[n]===0)return Ht;var A=n-1;if(Array.isArray(a)&&a[A]===!0)return Ht;var c=A-1,p=A+1,d=e[A],m=c>=0?e[c]:0,g=e[p];if(d===yw&&g===bw)return Ht;if(Og.indexOf(d)!==-1)return Cw;if(Og.indexOf(g)!==-1||Bw.indexOf(g)!==-1)return Ht;if(ey(A,e)===ww)return pc;if(Hg.get(o[A])===Ug||(d===dc||d===uc)&&Hg.get(o[p])===Ug||d===Vx||g===Vx||d===Yx||[Ui,Qg,yA].indexOf(d)===-1&&g===Yx||[cc,uA,ok,na,oa].indexOf(g)!==-1||ey(A,e)===pA||Gp(Kp,pA,A,e)||Gp([cc,uA],Mg,A,e)||Gp(Jx,Jx,A,e))return Ht;if(d===Ui)return pc;if(d===Kp||g===Kp)return Ht;if(g===Rg||d===Rg)return pc;if([Qg,yA,Mg].indexOf(g)!==-1||d===nk||m===Pg&&ck.indexOf(d)!==-1||d===oa&&g===Pg||g===Xx||Jo.indexOf(g)!==-1&&d===Hn||Jo.indexOf(d)!==-1&&g===Hn||d===wA&&[zA,dc,uc].indexOf(g)!==-1||[zA,dc,uc].indexOf(d)!==-1&&g===bA||Jo.indexOf(d)!==-1&&qx.indexOf(g)!==-1||qx.indexOf(d)!==-1&&Jo.indexOf(g)!==-1||[wA,bA].indexOf(d)!==-1&&(g===Hn||[pA,yA].indexOf(g)!==-1&&e[p+1]===Hn)||[pA,yA].indexOf(d)!==-1&&g===Hn||d===Hn&&[Hn,oa,na].indexOf(g)!==-1)return Ht;if([Hn,oa,na,cc,uA].indexOf(g)!==-1)for(var y=A;y>=0;){var b=e[y];if(b===Hn)return Ht;if([oa,na].indexOf(b)!==-1)y--;else break}if([wA,bA].indexOf(g)!==-1)for(var y=[cc,uA].indexOf(d)!==-1?c:A;y>=0;){var b=e[y];if(b===Hn)return Ht;if([oa,na].indexOf(b)!==-1)y--;else break}if(Ng===d&&[Ng,Mc,Lg,Dg].indexOf(g)!==-1||[Mc,Lg].indexOf(d)!==-1&&[Mc,Lc].indexOf(g)!==-1||[Lc,Dg].indexOf(d)!==-1&&g===Lc||Zx.indexOf(d)!==-1&&[Xx,bA].indexOf(g)!==-1||Zx.indexOf(g)!==-1&&d===wA||Jo.indexOf(d)!==-1&&Jo.indexOf(g)!==-1||d===na&&Jo.indexOf(g)!==-1||Jo.concat(Hn).indexOf(d)!==-1&&g===pA&&Ak.indexOf(o[p])===-1||Jo.concat(Hn).indexOf(g)!==-1&&d===uA)return Ht;if(d===Wp&&g===Wp){for(var R=r[A],C=1;R>0&&(R--,e[R]===Wp);)C++;if(C%2!==0)return Ht}return d===dc&&g===uc?Ht:pc},pk=function(o,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=dk(o,e.lineBreak),n=r[0],a=r[1],A=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(p){return[Hn,us,vw].indexOf(p)!==-1?zA:p}));var c=e.wordBreak==="keep-all"?A.map(function(p,d){return p&&o[d]>=19968&&o[d]<=40959}):void 0;return[n,a,c]},gk=function(){function o(e,r,n,a){this.codePoints=e,this.required=r===Cw,this.start=n,this.end=a}return o.prototype.slice=function(){return kr.apply(void 0,this.codePoints.slice(this.start,this.end))},o}(),hk=function(o,e){var r=_d(o),n=pk(r,e),a=n[0],A=n[1],c=n[2],p=r.length,d=0,m=0;return{next:function(){if(m>=p)return{done:!0,value:null};for(var g=Ht;m<p&&(g=uk(r,A,a,++m,c))===Ht;);if(g!==Ht||m===p){var y=new gk(r,g,d,m);return d=m,{value:y,done:!1}}return{done:!0,value:null}}}},fk=1,mk=2,YA=4,ty=8,ad=10,ry=47,jA=92,xk=9,yk=32,gc=34,gA=61,bk=35,wk=36,vk=37,hc=39,fc=40,hA=41,Ck=95,Tn=45,Bk=33,Sk=60,Ik=62,Ek=64,kk=91,jk=93,Tk=61,Fk=123,mc=63,Uk=125,ny=124,Qk=126,Rk=128,oy=65533,$p=42,gs=43,Mk=44,Lk=58,Dk=59,KA=46,Pk=0,Nk=8,Hk=11,Ok=14,_k=31,zk=127,To=-1,Sw=48,Iw=97,Ew=101,Kk=102,Wk=117,Gk=122,kw=65,jw=69,Tw=70,$k=85,Vk=90,fn=function(o){return o>=Sw&&o<=57},Yk=function(o){return o>=55296&&o<=57343},ia=function(o){return fn(o)||o>=kw&&o<=Tw||o>=Iw&&o<=Kk},Jk=function(o){return o>=Iw&&o<=Gk},Xk=function(o){return o>=kw&&o<=Vk},qk=function(o){return Jk(o)||Xk(o)},Zk=function(o){return o>=Rk},xc=function(o){return o===ad||o===xk||o===yk},Ad=function(o){return qk(o)||Zk(o)||o===Ck},iy=function(o){return Ad(o)||fn(o)||o===Tn},ej=function(o){return o>=Pk&&o<=Nk||o===Hk||o>=Ok&&o<=_k||o===zk},Ei=function(o,e){return o!==jA?!1:e!==ad},yc=function(o,e,r){return o===Tn?Ad(e)||Ei(e,r):Ad(o)?!0:!!(o===jA&&Ei(o,e))},Vp=function(o,e,r){return o===gs||o===Tn?fn(e)?!0:e===KA&&fn(r):fn(o===KA?e:o)},tj=function(o){var e=0,r=1;(o[e]===gs||o[e]===Tn)&&(o[e]===Tn&&(r=-1),e++);for(var n=[];fn(o[e]);)n.push(o[e++]);var a=n.length?parseInt(kr.apply(void 0,n),10):0;o[e]===KA&&e++;for(var A=[];fn(o[e]);)A.push(o[e++]);var c=A.length,p=c?parseInt(kr.apply(void 0,A),10):0;(o[e]===jw||o[e]===Ew)&&e++;var d=1;(o[e]===gs||o[e]===Tn)&&(o[e]===Tn&&(d=-1),e++);for(var m=[];fn(o[e]);)m.push(o[e++]);var g=m.length?parseInt(kr.apply(void 0,m),10):0;return r*(a+p*Math.pow(10,-c))*Math.pow(10,d*g)},rj={type:2},nj={type:3},oj={type:4},ij={type:13},sj={type:8},aj={type:21},Aj={type:9},lj={type:10},cj={type:11},dj={type:12},uj={type:14},bc={type:23},pj={type:1},gj={type:25},hj={type:24},fj={type:26},mj={type:27},xj={type:28},yj={type:29},bj={type:31},_g={type:32},Fw=function(){function o(){this._value=[]}return o.prototype.write=function(e){this._value=this._value.concat(_d(e))},o.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==_g;)e.push(r),r=this.consumeToken();return e},o.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case gc:return this.consumeStringToken(gc);case bk:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(iy(r)||Ei(n,a)){var A=yc(r,n,a)?mk:fk,c=this.consumeName();return{type:5,value:c,flags:A}}break;case wk:if(this.peekCodePoint(0)===gA)return this.consumeCodePoint(),ij;break;case hc:return this.consumeStringToken(hc);case fc:return rj;case hA:return nj;case $p:if(this.peekCodePoint(0)===gA)return this.consumeCodePoint(),uj;break;case gs:if(Vp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Mk:return oj;case Tn:var p=e,d=this.peekCodePoint(0),m=this.peekCodePoint(1);if(Vp(p,d,m))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(yc(p,d,m))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(d===Tn&&m===Ik)return this.consumeCodePoint(),this.consumeCodePoint(),hj;break;case KA:if(Vp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case ry:if(this.peekCodePoint(0)===$p)for(this.consumeCodePoint();;){var g=this.consumeCodePoint();if(g===$p&&(g=this.consumeCodePoint(),g===ry))return this.consumeToken();if(g===To)return this.consumeToken()}break;case Lk:return fj;case Dk:return mj;case Sk:if(this.peekCodePoint(0)===Bk&&this.peekCodePoint(1)===Tn&&this.peekCodePoint(2)===Tn)return this.consumeCodePoint(),this.consumeCodePoint(),gj;break;case Ek:var y=this.peekCodePoint(0),b=this.peekCodePoint(1),R=this.peekCodePoint(2);if(yc(y,b,R)){var c=this.consumeName();return{type:7,value:c}}break;case kk:return xj;case jA:if(Ei(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case jk:return yj;case Tk:if(this.peekCodePoint(0)===gA)return this.consumeCodePoint(),sj;break;case Fk:return cj;case Uk:return dj;case Wk:case $k:var C=this.peekCodePoint(0),Q=this.peekCodePoint(1);return C===gs&&(ia(Q)||Q===mc)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case ny:if(this.peekCodePoint(0)===gA)return this.consumeCodePoint(),Aj;if(this.peekCodePoint(0)===ny)return this.consumeCodePoint(),aj;break;case Qk:if(this.peekCodePoint(0)===gA)return this.consumeCodePoint(),lj;break;case To:return _g}return xc(e)?(this.consumeWhiteSpace(),bj):fn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Ad(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:kr(e)}},o.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},o.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},o.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},o.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();ia(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===mc&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(kr.apply(void 0,e.map(function(d){return d===mc?Sw:d})),16),A=parseInt(kr.apply(void 0,e.map(function(d){return d===mc?Tw:d})),16);return{type:30,start:a,end:A}}var c=parseInt(kr.apply(void 0,e),16);if(this.peekCodePoint(0)===Tn&&ia(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var p=[];ia(r)&&p.length<6;)p.push(r),r=this.consumeCodePoint();var A=parseInt(kr.apply(void 0,p),16);return{type:30,start:c,end:A}}else return{type:30,start:c,end:c}},o.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===fc?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===fc?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},o.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===To)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===hc||r===gc){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===To||this.peekCodePoint(0)===hA)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),bc)}for(;;){var a=this.consumeCodePoint();if(a===To||a===hA)return{type:22,value:kr.apply(void 0,e)};if(xc(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===To||this.peekCodePoint(0)===hA?(this.consumeCodePoint(),{type:22,value:kr.apply(void 0,e)}):(this.consumeBadUrlRemnants(),bc);if(a===gc||a===hc||a===fc||ej(a))return this.consumeBadUrlRemnants(),bc;if(a===jA)if(Ei(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),bc;else e.push(a)}},o.prototype.consumeWhiteSpace=function(){for(;xc(this.peekCodePoint(0));)this.consumeCodePoint()},o.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===hA||e===To)return;Ei(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},o.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=kr.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},o.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===To||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===ad)return this._value.splice(0,n),pj;if(a===jA){var A=this._value[n+1];A!==To&&A!==void 0&&(A===ad?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):Ei(a,A)&&(r+=this.consumeStringSlice(n),r+=kr(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},o.prototype.consumeNumber=function(){var e=[],r=YA,n=this.peekCodePoint(0);for((n===gs||n===Tn)&&e.push(this.consumeCodePoint());fn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===KA&&fn(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=ty;fn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((n===jw||n===Ew)&&((a===gs||a===Tn)&&fn(A)||fn(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=ty;fn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[tj(e),r]},o.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),A=this.peekCodePoint(1),c=this.peekCodePoint(2);if(yc(a,A,c)){var p=this.consumeName();return{type:15,number:r,flags:n,unit:p}}return a===vk?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},o.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ia(e)){for(var r=kr(e);ia(this.peekCodePoint(0))&&r.length<6;)r+=kr(this.consumeCodePoint());xc(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Yk(n)||n>1114111?oy:n}return e===To?oy:e},o.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(iy(r))e+=kr(r);else if(Ei(r,this.peekCodePoint(0)))e+=kr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},o}(),Uw=function(){function o(e){this._tokens=e}return o.create=function(e){var r=new Fw;return r.write(e),new o(r.read())},o.parseValue=function(e){return o.create(e).parseComponentValue()},o.parseValues=function(e){return o.create(e).parseComponentValues()},o.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},o.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},o.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},o.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||vj(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},o.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},o.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?_g:e},o.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},o}(),JA=function(o){return o.type===15},Ua=function(o){return o.type===17},or=function(o){return o.type===20},wj=function(o){return o.type===0},zg=function(o,e){return or(o)&&o.value===e},Qw=function(o){return o.type!==31},Ba=function(o){return o.type!==31&&o.type!==4},Lo=function(o){var e=[],r=[];return o.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},vj=function(o,e){return e===11&&o.type===12||e===28&&o.type===29?!0:e===2&&o.type===3},zi=function(o){return o.type===17||o.type===15},Lr=function(o){return o.type===16||zi(o)},Rw=function(o){return o.length>1?[o[0],o[1]]:[o[0]]},An={type:17,number:0,flags:YA},pf={type:16,number:50,flags:YA},Qi={type:16,number:100,flags:YA},vA=function(o,e,r){var n=o[0],a=o[1];return[lr(n,e),lr(typeof a<"u"?a:n,r)]},lr=function(o,e){if(o.type===16)return o.number/100*e;if(JA(o))switch(o.unit){case"rem":case"em":return 16*o.number;case"px":default:return o.number}return o.number},Mw="deg",Lw="grad",Dw="rad",Pw="turn",zd={name:"angle",parse:function(o,e){if(e.type===15)switch(e.unit){case Mw:return Math.PI*e.number/180;case Lw:return Math.PI/200*e.number;case Dw:return e.number;case Pw:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Nw=function(o){return o.type===15&&(o.unit===Mw||o.unit===Lw||o.unit===Dw||o.unit===Pw)},Hw=function(o){var e=o.filter(or).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[An,An];case"to top":case"bottom":return no(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[An,Qi];case"to right":case"left":return no(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Qi,Qi];case"to bottom":case"top":return no(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Qi,An];case"to left":case"right":return no(270)}return 0},no=function(o){return Math.PI*o/180},Hi={name:"color",parse:function(o,e){if(e.type===18){var r=Cj[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(o,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),A=e.value.substring(2,3);return Ri(parseInt(n+n,16),parseInt(a+a,16),parseInt(A+A,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),A=e.value.substring(2,3),c=e.value.substring(3,4);return Ri(parseInt(n+n,16),parseInt(a+a,16),parseInt(A+A,16),parseInt(c+c,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),A=e.value.substring(4,6);return Ri(parseInt(n,16),parseInt(a,16),parseInt(A,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),A=e.value.substring(4,6),c=e.value.substring(6,8);return Ri(parseInt(n,16),parseInt(a,16),parseInt(A,16),parseInt(c,16)/255)}}if(e.type===20){var p=ti[e.value.toUpperCase()];if(typeof p<"u")return p}return ti.TRANSPARENT}},Oi=function(o){return(255&o)===0},Yr=function(o){var e=255&o,r=255&o>>8,n=255&o>>16,a=255&o>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},Ri=function(o,e,r,n){return(o<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},sy=function(o,e){if(o.type===17)return o.number;if(o.type===16){var r=e===3?1:255;return e===3?o.number/100*r:Math.round(o.number/100*r)}return 0},ay=function(o,e){var r=e.filter(Ba);if(r.length===3){var n=r.map(sy),a=n[0],A=n[1],c=n[2];return Ri(a,A,c,1)}if(r.length===4){var p=r.map(sy),a=p[0],A=p[1],c=p[2],d=p[3];return Ri(a,A,c,d)}return 0};function Yp(o,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-o)*r*6+o:r<1/2?e:r<2/3?(e-o)*6*(2/3-r)+o:o}var Ay=function(o,e){var r=e.filter(Ba),n=r[0],a=r[1],A=r[2],c=r[3],p=(n.type===17?no(n.number):zd.parse(o,n))/(Math.PI*2),d=Lr(a)?a.number/100:0,m=Lr(A)?A.number/100:0,g=typeof c<"u"&&Lr(c)?lr(c,1):1;if(d===0)return Ri(m*255,m*255,m*255,1);var y=m<=.5?m*(d+1):m+d-m*d,b=m*2-y,R=Yp(b,y,p+1/3),C=Yp(b,y,p),Q=Yp(b,y,p-1/3);return Ri(R*255,C*255,Q*255,g)},Cj={hsl:Ay,hsla:Ay,rgb:ay,rgba:ay},TA=function(o,e){return Hi.parse(o,Uw.create(e).parseComponentValue())},ti={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Bj={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(o,e){return e.map(function(r){if(or(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Sj={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Kd=function(o,e){var r=Hi.parse(o,e[0]),n=e[1];return n&&Lr(n)?{color:r,stop:n}:{color:r,stop:null}},ly=function(o,e){var r=o[0],n=o[o.length-1];r.stop===null&&(r.stop=An),n.stop===null&&(n.stop=Qi);for(var a=[],A=0,c=0;c<o.length;c++){var p=o[c].stop;if(p!==null){var d=lr(p,e);d>A?a.push(d):a.push(A),A=d}else a.push(null)}for(var m=null,c=0;c<a.length;c++){var g=a[c];if(g===null)m===null&&(m=c);else if(m!==null){for(var y=c-m,b=a[m-1],R=(g-b)/(y+1),C=1;C<=y;C++)a[m+C-1]=R*C;m=null}}return o.map(function(Q,S){var N=Q.color;return{color:N,stop:Math.max(Math.min(1,a[S]/e),0)}})},Ij=function(o,e,r){var n=e/2,a=r/2,A=lr(o[0],e)-n,c=a-lr(o[1],r);return(Math.atan2(c,A)+Math.PI*2)%(Math.PI*2)},Ej=function(o,e,r){var n=typeof o=="number"?o:Ij(o,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),A=e/2,c=r/2,p=a/2,d=Math.sin(n-Math.PI/2)*p,m=Math.cos(n-Math.PI/2)*p;return[a,A-m,A+m,c-d,c+d]},ho=function(o,e){return Math.sqrt(o*o+e*e)},cy=function(o,e,r,n,a){var A=[[0,0],[0,e],[o,0],[o,e]];return A.reduce(function(c,p){var d=p[0],m=p[1],g=ho(r-d,n-m);return(a?g<c.optimumDistance:g>c.optimumDistance)?{optimumCorner:p,optimumDistance:g}:c},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},kj=function(o,e,r,n,a){var A=0,c=0;switch(o.size){case 0:o.shape===0?A=c=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):o.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-n)),c=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(o.shape===0)A=c=Math.min(ho(e,r),ho(e,r-a),ho(e-n,r),ho(e-n,r-a));else if(o.shape===1){var p=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),d=cy(n,a,e,r,!0),m=d[0],g=d[1];A=ho(m-e,(g-r)/p),c=p*A}break;case 1:o.shape===0?A=c=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):o.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-n)),c=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(o.shape===0)A=c=Math.max(ho(e,r),ho(e,r-a),ho(e-n,r),ho(e-n,r-a));else if(o.shape===1){var p=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),y=cy(n,a,e,r,!1),m=y[0],g=y[1];A=ho(m-e,(g-r)/p),c=p*A}break}return Array.isArray(o.size)&&(A=lr(o.size[0],n),c=o.size.length===2?lr(o.size[1],a):A),[A,c]},jj=function(o,e){var r=no(180),n=[];return Lo(e).forEach(function(a,A){if(A===0){var c=a[0];if(c.type===20&&c.value==="to"){r=Hw(a);return}else if(Nw(c)){r=zd.parse(o,c);return}}var p=Kd(o,a);n.push(p)}),{angle:r,stops:n,type:1}},wc=function(o,e){var r=no(180),n=[];return Lo(e).forEach(function(a,A){if(A===0){var c=a[0];if(c.type===20&&["top","left","right","bottom"].indexOf(c.value)!==-1){r=Hw(a);return}else if(Nw(c)){r=(zd.parse(o,c)+no(270))%no(360);return}}var p=Kd(o,a);n.push(p)}),{angle:r,stops:n,type:1}},Tj=function(o,e){var r=no(180),n=[],a=1,A=0,c=3,p=[];return Lo(e).forEach(function(d,m){var g=d[0];if(m===0){if(or(g)&&g.value==="linear"){a=1;return}else if(or(g)&&g.value==="radial"){a=2;return}}if(g.type===18){if(g.name==="from"){var y=Hi.parse(o,g.values[0]);n.push({stop:An,color:y})}else if(g.name==="to"){var y=Hi.parse(o,g.values[0]);n.push({stop:Qi,color:y})}else if(g.name==="color-stop"){var b=g.values.filter(Ba);if(b.length===2){var y=Hi.parse(o,b[1]),R=b[0];Ua(R)&&n.push({stop:{type:16,number:R.number*100,flags:R.flags},color:y})}}}}),a===1?{angle:(r+no(180))%no(360),stops:n,type:a}:{size:c,shape:A,stops:n,position:p,type:a}},Ow="closest-side",_w="farthest-side",zw="closest-corner",Kw="farthest-corner",Ww="circle",Gw="ellipse",$w="cover",Vw="contain",Fj=function(o,e){var r=0,n=3,a=[],A=[];return Lo(e).forEach(function(c,p){var d=!0;if(p===0){var m=!1;d=c.reduce(function(y,b){if(m)if(or(b))switch(b.value){case"center":return A.push(pf),y;case"top":case"left":return A.push(An),y;case"right":case"bottom":return A.push(Qi),y}else(Lr(b)||zi(b))&&A.push(b);else if(or(b))switch(b.value){case Ww:return r=0,!1;case Gw:return r=1,!1;case"at":return m=!0,!1;case Ow:return n=0,!1;case $w:case _w:return n=1,!1;case Vw:case zw:return n=2,!1;case Kw:return n=3,!1}else if(zi(b)||Lr(b))return Array.isArray(n)||(n=[]),n.push(b),!1;return y},d)}if(d){var g=Kd(o,c);a.push(g)}}),{size:n,shape:r,stops:a,position:A,type:2}},vc=function(o,e){var r=0,n=3,a=[],A=[];return Lo(e).forEach(function(c,p){var d=!0;if(p===0?d=c.reduce(function(g,y){if(or(y))switch(y.value){case"center":return A.push(pf),!1;case"top":case"left":return A.push(An),!1;case"right":case"bottom":return A.push(Qi),!1}else if(Lr(y)||zi(y))return A.push(y),!1;return g},d):p===1&&(d=c.reduce(function(g,y){if(or(y))switch(y.value){case Ww:return r=0,!1;case Gw:return r=1,!1;case Vw:case Ow:return n=0,!1;case _w:return n=1,!1;case zw:return n=2,!1;case $w:case Kw:return n=3,!1}else if(zi(y)||Lr(y))return Array.isArray(n)||(n=[]),n.push(y),!1;return g},d)),d){var m=Kd(o,c);a.push(m)}}),{size:n,shape:r,stops:a,position:A,type:2}},Uj=function(o){return o.type===1},Qj=function(o){return o.type===2},gf={name:"image",parse:function(o,e){if(e.type===22){var r={url:e.value,type:0};return o.cache.addImage(e.value),r}if(e.type===18){var n=Yw[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(o,e.values)}throw new Error("Unsupported image type "+e.type)}};function Rj(o){return!(o.type===20&&o.value==="none")&&(o.type!==18||!!Yw[o.name])}var Yw={"linear-gradient":jj,"-moz-linear-gradient":wc,"-ms-linear-gradient":wc,"-o-linear-gradient":wc,"-webkit-linear-gradient":wc,"radial-gradient":Fj,"-moz-radial-gradient":vc,"-ms-radial-gradient":vc,"-o-radial-gradient":vc,"-webkit-radial-gradient":vc,"-webkit-gradient":Tj},Mj={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(o,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Ba(n)&&Rj(n)}).map(function(n){return gf.parse(o,n)})}},Lj={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(o,e){return e.map(function(r){if(or(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Dj={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(o,e){return Lo(e).map(function(r){return r.filter(Lr)}).map(Rw)}},Pj={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(o,e){return Lo(e).map(function(r){return r.filter(or).map(function(n){return n.value}).join(" ")}).map(Nj)}},Nj=function(o){switch(o){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ba;(function(o){o.AUTO="auto",o.CONTAIN="contain",o.COVER="cover"})(ba||(ba={}));var Hj={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(o,e){return Lo(e).map(function(r){return r.filter(Oj)})}},Oj=function(o){return or(o)||Lr(o)},Wd=function(o){return{name:"border-"+o+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},_j=Wd("top"),zj=Wd("right"),Kj=Wd("bottom"),Wj=Wd("left"),Gd=function(o){return{name:"border-radius-"+o,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return Rw(r.filter(Lr))}}},Gj=Gd("top-left"),$j=Gd("top-right"),Vj=Gd("bottom-right"),Yj=Gd("bottom-left"),$d=function(o){return{name:"border-"+o+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Jj=$d("top"),Xj=$d("right"),qj=$d("bottom"),Zj=$d("left"),Vd=function(o){return{name:"border-"+o+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return JA(r)?r.number:0}}},eT=Vd("top"),tT=Vd("right"),rT=Vd("bottom"),nT=Vd("left"),oT={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},iT={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(o,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},sT={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(o,e){return e.filter(or).reduce(function(r,n){return r|aT(n.value)},0)}},aT=function(o){switch(o){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},AT={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(o,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},lT={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(o,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},ld;(function(o){o.NORMAL="normal",o.STRICT="strict"})(ld||(ld={}));var cT={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(o,e){switch(e){case"strict":return ld.STRICT;case"normal":default:return ld.NORMAL}}},dT={name:"line-height",initialValue:"normal",prefix:!1,type:4},dy=function(o,e){return or(o)&&o.value==="normal"?1.2*e:o.type===17?e*o.number:Lr(o)?lr(o,e):e},uT={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(o,e){return e.type===20&&e.value==="none"?null:gf.parse(o,e)}},pT={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(o,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Kg={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(o,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Yd=function(o){return{name:"margin-"+o,initialValue:"0",prefix:!1,type:4}},gT=Yd("top"),hT=Yd("right"),fT=Yd("bottom"),mT=Yd("left"),xT={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(o,e){return e.filter(or).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},yT={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(o,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Jd=function(o){return{name:"padding-"+o,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},bT=Jd("top"),wT=Jd("right"),vT=Jd("bottom"),CT=Jd("left"),BT={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(o,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},ST={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(o,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},IT={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(o,e){return e.length===1&&zg(e[0],"none")?[]:Lo(e).map(function(r){for(var n={color:ti.TRANSPARENT,offsetX:An,offsetY:An,blur:An},a=0,A=0;A<r.length;A++){var c=r[A];zi(c)?(a===0?n.offsetX=c:a===1?n.offsetY=c:n.blur=c,a++):n.color=Hi.parse(o,c)}return n})}},ET={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(o,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},kT={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(o,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=FT[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},jT=function(o){var e=o.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},TT=function(o){var e=o.filter(function(d){return d.type===17}).map(function(d){return d.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var c=e[12],p=e[13];return e[14],e[15],e.length===16?[r,n,a,A,c,p]:null},FT={matrix:jT,matrix3d:TT},uy={type:16,number:50,flags:YA},UT=[uy,uy],QT={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(o,e){var r=e.filter(Lr);return r.length!==2?UT:[r[0],r[1]]}},RT={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(o,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},FA;(function(o){o.NORMAL="normal",o.BREAK_ALL="break-all",o.KEEP_ALL="keep-all"})(FA||(FA={}));var MT={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(o,e){switch(e){case"break-all":return FA.BREAK_ALL;case"keep-all":return FA.KEEP_ALL;case"normal":default:return FA.NORMAL}}},LT={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(o,e){if(e.type===20)return{auto:!0,order:0};if(Ua(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Jw={name:"time",parse:function(o,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},DT={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(o,e){return Ua(e)?e.number:1}},PT={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},NT={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(o,e){return e.filter(or).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},HT={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(o,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},OT={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},_T={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(o,e){if(Ua(e))return e.number;if(or(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},zT={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(o,e){return e.filter(or).map(function(r){return r.value})}},KT={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(o,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},_r=function(o,e){return(o&e)!==0},WT={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(o,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},GT={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(o,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(Qw),A=0;A<a.length;A++){var c=a[A],p=a[A+1];if(c.type===20){var d=p&&Ua(p)?p.number:1;n.push({counter:c.value,increment:d})}}return n}},$T={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(o,e){if(e.length===0)return[];for(var r=[],n=e.filter(Qw),a=0;a<n.length;a++){var A=n[a],c=n[a+1];if(or(A)&&A.value!=="none"){var p=c&&Ua(c)?c.number:0;r.push({counter:A.value,reset:p})}}return r}},VT={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(o,e){return e.filter(JA).map(function(r){return Jw.parse(o,r)})}},YT={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(o,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(wj);if(a.length%2!==0)return null;for(var A=0;A<a.length;A+=2){var c=a[A].value,p=a[A+1].value;n.push({open:c,close:p})}return n}},py=function(o,e,r){if(!o)return"";var n=o[Math.min(e,o.length-1)];return n?r?n.open:n.close:""},JT={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(o,e){return e.length===1&&zg(e[0],"none")?[]:Lo(e).map(function(r){for(var n={color:255,offsetX:An,offsetY:An,blur:An,spread:An,inset:!1},a=0,A=0;A<r.length;A++){var c=r[A];zg(c,"inset")?n.inset=!0:zi(c)?(a===0?n.offsetX=c:a===1?n.offsetY=c:a===2?n.blur=c:n.spread=c,a++):n.color=Hi.parse(o,c)}return n})}},XT={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(o,e){var r=[0,1,2],n=[];return e.filter(or).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},qT={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},ZT={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(o,e){return JA(e)?e.number:0}},eF=function(){function o(e,r){var n,a;this.animationDuration=At(e,VT,r.animationDuration),this.backgroundClip=At(e,Bj,r.backgroundClip),this.backgroundColor=At(e,Sj,r.backgroundColor),this.backgroundImage=At(e,Mj,r.backgroundImage),this.backgroundOrigin=At(e,Lj,r.backgroundOrigin),this.backgroundPosition=At(e,Dj,r.backgroundPosition),this.backgroundRepeat=At(e,Pj,r.backgroundRepeat),this.backgroundSize=At(e,Hj,r.backgroundSize),this.borderTopColor=At(e,_j,r.borderTopColor),this.borderRightColor=At(e,zj,r.borderRightColor),this.borderBottomColor=At(e,Kj,r.borderBottomColor),this.borderLeftColor=At(e,Wj,r.borderLeftColor),this.borderTopLeftRadius=At(e,Gj,r.borderTopLeftRadius),this.borderTopRightRadius=At(e,$j,r.borderTopRightRadius),this.borderBottomRightRadius=At(e,Vj,r.borderBottomRightRadius),this.borderBottomLeftRadius=At(e,Yj,r.borderBottomLeftRadius),this.borderTopStyle=At(e,Jj,r.borderTopStyle),this.borderRightStyle=At(e,Xj,r.borderRightStyle),this.borderBottomStyle=At(e,qj,r.borderBottomStyle),this.borderLeftStyle=At(e,Zj,r.borderLeftStyle),this.borderTopWidth=At(e,eT,r.borderTopWidth),this.borderRightWidth=At(e,tT,r.borderRightWidth),this.borderBottomWidth=At(e,rT,r.borderBottomWidth),this.borderLeftWidth=At(e,nT,r.borderLeftWidth),this.boxShadow=At(e,JT,r.boxShadow),this.color=At(e,oT,r.color),this.direction=At(e,iT,r.direction),this.display=At(e,sT,r.display),this.float=At(e,AT,r.cssFloat),this.fontFamily=At(e,HT,r.fontFamily),this.fontSize=At(e,OT,r.fontSize),this.fontStyle=At(e,KT,r.fontStyle),this.fontVariant=At(e,zT,r.fontVariant),this.fontWeight=At(e,_T,r.fontWeight),this.letterSpacing=At(e,lT,r.letterSpacing),this.lineBreak=At(e,cT,r.lineBreak),this.lineHeight=At(e,dT,r.lineHeight),this.listStyleImage=At(e,uT,r.listStyleImage),this.listStylePosition=At(e,pT,r.listStylePosition),this.listStyleType=At(e,Kg,r.listStyleType),this.marginTop=At(e,gT,r.marginTop),this.marginRight=At(e,hT,r.marginRight),this.marginBottom=At(e,fT,r.marginBottom),this.marginLeft=At(e,mT,r.marginLeft),this.opacity=At(e,DT,r.opacity);var A=At(e,xT,r.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=At(e,yT,r.overflowWrap),this.paddingTop=At(e,bT,r.paddingTop),this.paddingRight=At(e,wT,r.paddingRight),this.paddingBottom=At(e,vT,r.paddingBottom),this.paddingLeft=At(e,CT,r.paddingLeft),this.paintOrder=At(e,XT,r.paintOrder),this.position=At(e,ST,r.position),this.textAlign=At(e,BT,r.textAlign),this.textDecorationColor=At(e,PT,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=At(e,NT,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=At(e,IT,r.textShadow),this.textTransform=At(e,ET,r.textTransform),this.transform=At(e,kT,r.transform),this.transformOrigin=At(e,QT,r.transformOrigin),this.visibility=At(e,RT,r.visibility),this.webkitTextStrokeColor=At(e,qT,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=At(e,ZT,r.webkitTextStrokeWidth),this.wordBreak=At(e,MT,r.wordBreak),this.zIndex=At(e,LT,r.zIndex)}return o.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},o.prototype.isTransparent=function(){return Oi(this.backgroundColor)},o.prototype.isTransformed=function(){return this.transform!==null},o.prototype.isPositioned=function(){return this.position!==0},o.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},o.prototype.isFloating=function(){return this.float!==0},o.prototype.isInlineLevel=function(){return _r(this.display,4)||_r(this.display,33554432)||_r(this.display,268435456)||_r(this.display,536870912)||_r(this.display,67108864)||_r(this.display,134217728)},o}(),tF=function(){function o(e,r){this.content=At(e,WT,r.content),this.quotes=At(e,YT,r.quotes)}return o}(),gy=function(){function o(e,r){this.counterIncrement=At(e,GT,r.counterIncrement),this.counterReset=At(e,$T,r.counterReset)}return o}(),At=function(o,e,r){var n=new Fw,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var A=new Uw(n.read());switch(e.type){case 2:var c=A.parseComponentValue();return e.parse(o,or(c)?c.value:e.initialValue);case 0:return e.parse(o,A.parseComponentValue());case 1:return e.parse(o,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return zd.parse(o,A.parseComponentValue());case"color":return Hi.parse(o,A.parseComponentValue());case"image":return gf.parse(o,A.parseComponentValue());case"length":var p=A.parseComponentValue();return zi(p)?p:An;case"length-percentage":var d=A.parseComponentValue();return Lr(d)?d:An;case"time":return Jw.parse(o,A.parseComponentValue())}break}},rF="data-html2canvas-debug",nF=function(o){var e=o.getAttribute(rF);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Wg=function(o,e){var r=nF(o);return r===1||e===r},Do=function(){function o(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Wg(r,3))debugger;this.styles=new eF(e,window.getComputedStyle(r,null)),Vg(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Od(this.context,r),Wg(r,4)&&(this.flags|=16)}return o}(),oF="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",hy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",CA=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Cc=0;Cc<hy.length;Cc++)CA[hy.charCodeAt(Cc)]=Cc;var iF=function(o){var e=o.length*.75,r=o.length,n,a=0,A,c,p,d;o[o.length-1]==="="&&(e--,o[o.length-2]==="="&&e--);var m=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),g=Array.isArray(m)?m:new Uint8Array(m);for(n=0;n<r;n+=4)A=CA[o.charCodeAt(n)],c=CA[o.charCodeAt(n+1)],p=CA[o.charCodeAt(n+2)],d=CA[o.charCodeAt(n+3)],g[a++]=A<<2|c>>4,g[a++]=(c&15)<<4|p>>2,g[a++]=(p&3)<<6|d&63;return m},sF=function(o){for(var e=o.length,r=[],n=0;n<e;n+=2)r.push(o[n+1]<<8|o[n]);return r},aF=function(o){for(var e=o.length,r=[],n=0;n<e;n+=4)r.push(o[n+3]<<24|o[n+2]<<16|o[n+1]<<8|o[n]);return r},ys=5,hf=11,Jp=2,AF=hf-ys,Xw=65536>>ys,lF=1<<ys,Xp=lF-1,cF=1024>>ys,dF=Xw+cF,uF=dF,pF=32,gF=uF+pF,hF=65536>>hf,fF=1<<AF,mF=fF-1,fy=function(o,e,r){return o.slice?o.slice(e,r):new Uint16Array(Array.prototype.slice.call(o,e,r))},xF=function(o,e,r){return o.slice?o.slice(e,r):new Uint32Array(Array.prototype.slice.call(o,e,r))},yF=function(o,e){var r=iF(o),n=Array.isArray(r)?aF(r):new Uint32Array(r),a=Array.isArray(r)?sF(r):new Uint16Array(r),A=24,c=fy(a,A/2,n[4]/2),p=n[5]===2?fy(a,(A+n[4])/2):xF(n,Math.ceil((A+n[4])/4));return new bF(n[0],n[1],n[2],n[3],c,p)},bF=function(){function o(e,r,n,a,A,c){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=A,this.data=c}return o.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>ys],r=(r<<Jp)+(e&Xp),this.data[r];if(e<=65535)return r=this.index[Xw+(e-55296>>ys)],r=(r<<Jp)+(e&Xp),this.data[r];if(e<this.highStart)return r=gF-hF+(e>>hf),r=this.index[r],r+=e>>ys&mF,r=this.index[r],r=(r<<Jp)+(e&Xp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},o}(),my="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wF=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Bc=0;Bc<my.length;Bc++)wF[my.charCodeAt(Bc)]=Bc;var vF=1,qp=2,Zp=3,xy=4,yy=5,CF=7,by=8,eg=9,tg=10,wy=11,vy=12,Cy=13,By=14,rg=15,BF=function(o){for(var e=[],r=0,n=o.length;r<n;){var a=o.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var A=o.charCodeAt(r++);(A&64512)===56320?e.push(((a&1023)<<10)+(A&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},SF=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,o);var r=o.length;if(!r)return"";for(var n=[],a=-1,A="";++a<r;){var c=o[a];c<=65535?n.push(c):(c-=65536,n.push((c>>10)+55296,c%1024+56320)),(a+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},IF=yF(oF),eo="",ng="",EF=function(o){return IF.get(o)},kF=function(o,e,r){var n=r-2,a=e[n],A=e[r-1],c=e[r];if(A===qp&&c===Zp)return eo;if(A===qp||A===Zp||A===xy||c===qp||c===Zp||c===xy)return ng;if(A===by&&[by,eg,wy,vy].indexOf(c)!==-1||(A===wy||A===eg)&&(c===eg||c===tg)||(A===vy||A===tg)&&c===tg||c===Cy||c===yy||c===CF||A===vF)return eo;if(A===Cy&&c===By){for(;a===yy;)a=e[--n];if(a===By)return eo}if(A===rg&&c===rg){for(var p=0;a===rg;)p++,a=e[--n];if(p%2===0)return eo}return ng},jF=function(o){var e=BF(o),r=e.length,n=0,a=0,A=e.map(EF);return{next:function(){if(n>=r)return{done:!0,value:null};for(var c=eo;n<r&&(c=kF(e,A,++n))===eo;);if(c!==eo||n===r){var p=SF.apply(null,e.slice(a,n));return a=n,{value:p,done:!1}}return{done:!0,value:null}}}},TF=function(o){for(var e=jF(o),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},FF=function(o){var e=123;if(o.createRange){var r=o.createRange();if(r.getBoundingClientRect){var n=o.createElement("boundtest");n.style.height=e+"px",n.style.display="block",o.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),A=Math.round(a.height);if(o.body.removeChild(n),A===e)return!0}}return!1},UF=function(o){var e=o.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",o.body.appendChild(e);var r=o.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=_d(n.data).map(function(d){return kr(d)}),A=0,c={},p=a.every(function(d,m){r.setStart(n,A),r.setEnd(n,A+d.length);var g=r.getBoundingClientRect();A+=d.length;var y=g.x>c.x||g.y>c.y;return c=g,m===0?!0:y});return o.body.removeChild(e),p},QF=function(){return typeof new Image().crossOrigin<"u"},RF=function(){return typeof new XMLHttpRequest().responseType=="string"},MF=function(o){var e=new Image,r=o.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},Sy=function(o){return o[0]===0&&o[1]===255&&o[2]===0&&o[3]===255},LF=function(o){var e=o.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,A=e.toDataURL();a.src=A;var c=Gg(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),Iy(c).then(function(p){n.drawImage(p,0,0);var d=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var m=o.createElement("div");return m.style.backgroundImage="url("+A+")",m.style.height=r+"px",Sy(d)?Iy(Gg(r,r,0,0,m)):Promise.reject(!1)}).then(function(p){return n.drawImage(p,0,0),Sy(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},Gg=function(o,e,r,n,a){var A="http://www.w3.org/2000/svg",c=document.createElementNS(A,"svg"),p=document.createElementNS(A,"foreignObject");return c.setAttributeNS(null,"width",o.toString()),c.setAttributeNS(null,"height",e.toString()),p.setAttributeNS(null,"width","100%"),p.setAttributeNS(null,"height","100%"),p.setAttributeNS(null,"x",r.toString()),p.setAttributeNS(null,"y",n.toString()),p.setAttributeNS(null,"externalResourcesRequired","true"),c.appendChild(p),p.appendChild(a),c},Iy=function(o){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(o))})},nn={get SUPPORT_RANGE_BOUNDS(){var o=FF(document);return Object.defineProperty(nn,"SUPPORT_RANGE_BOUNDS",{value:o}),o},get SUPPORT_WORD_BREAKING(){var o=nn.SUPPORT_RANGE_BOUNDS&&UF(document);return Object.defineProperty(nn,"SUPPORT_WORD_BREAKING",{value:o}),o},get SUPPORT_SVG_DRAWING(){var o=MF(document);return Object.defineProperty(nn,"SUPPORT_SVG_DRAWING",{value:o}),o},get SUPPORT_FOREIGNOBJECT_DRAWING(){var o=typeof Array.from=="function"&&typeof window.fetch=="function"?LF(document):Promise.resolve(!1);return Object.defineProperty(nn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:o}),o},get SUPPORT_CORS_IMAGES(){var o=QF();return Object.defineProperty(nn,"SUPPORT_CORS_IMAGES",{value:o}),o},get SUPPORT_RESPONSE_TYPE(){var o=RF();return Object.defineProperty(nn,"SUPPORT_RESPONSE_TYPE",{value:o}),o},get SUPPORT_CORS_XHR(){var o="withCredentials"in new XMLHttpRequest;return Object.defineProperty(nn,"SUPPORT_CORS_XHR",{value:o}),o},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var o=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(nn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:o}),o}},UA=function(){function o(e,r){this.text=e,this.bounds=r}return o}(),DF=function(o,e,r,n){var a=HF(e,r),A=[],c=0;return a.forEach(function(p){if(r.textDecorationLine.length||p.trim().length>0)if(nn.SUPPORT_RANGE_BOUNDS){var d=Ey(n,c,p.length).getClientRects();if(d.length>1){var m=ff(p),g=0;m.forEach(function(b){A.push(new UA(b,oi.fromDOMRectList(o,Ey(n,g+c,b.length).getClientRects()))),g+=b.length})}else A.push(new UA(p,oi.fromDOMRectList(o,d)))}else{var y=n.splitText(p.length);A.push(new UA(p,PF(o,n))),n=y}else nn.SUPPORT_RANGE_BOUNDS||(n=n.splitText(p.length));c+=p.length}),A},PF=function(o,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var A=Od(o,n);return n.firstChild&&a.replaceChild(n.firstChild,n),A}}return oi.EMPTY},Ey=function(o,e,r){var n=o.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(o,e),a.setEnd(o,e+r),a},ff=function(o){if(nn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(o)).map(function(r){return r.segment})}return TF(o)},NF=function(o,e){if(nn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(o)).map(function(n){return n.segment})}return _F(o,e)},HF=function(o,e){return e.letterSpacing!==0?ff(o):NF(o,e)},OF=[32,160,4961,65792,65793,4153,4241],_F=function(o,e){for(var r=hk(o,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,A=function(){if(a.value){var c=a.value.slice(),p=_d(c),d="";p.forEach(function(m){OF.indexOf(m)===-1?d+=kr(m):(d.length&&n.push(d),n.push(kr(m)),d="")}),d.length&&n.push(d)}};!(a=r.next()).done;)A();return n},zF=function(){function o(e,r,n){this.text=KF(r.data,n.textTransform),this.textBounds=DF(e,this.text,n,r)}return o}(),KF=function(o,e){switch(e){case 1:return o.toLowerCase();case 3:return o.replace(WF,GF);case 2:return o.toUpperCase();default:return o}},WF=/(^|\s|:|-|\(|\))([a-z])/g,GF=function(o,e,r){return o.length>0?e+r.toUpperCase():o},qw=function(o){Bo(e,o);function e(r,n){var a=o.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(Do),Zw=function(o){Bo(e,o);function e(r,n){var a=o.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(Do),e2=function(o){Bo(e,o);function e(r,n){var a=o.call(this,r,n)||this,A=new XMLSerializer,c=Od(r,n);return n.setAttribute("width",c.width+"px"),n.setAttribute("height",c.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(Do),t2=function(o){Bo(e,o);function e(r,n){var a=o.call(this,r,n)||this;return a.value=n.value,a}return e}(Do),$g=function(o){Bo(e,o);function e(r,n){var a=o.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(Do),$F=[{type:15,flags:0,unit:"px",number:3}],VF=[{type:16,flags:0,number:50}],YF=function(o){return o.width>o.height?new oi(o.left+(o.width-o.height)/2,o.top,o.height,o.height):o.width<o.height?new oi(o.left,o.top+(o.height-o.width)/2,o.width,o.width):o},JF=function(o){var e=o.type===XF?new Array(o.value.length+1).join(""):o.value;return e.length===0?o.placeholder||"":e},cd="checkbox",dd="radio",XF="password",ky=707406591,mf=function(o){Bo(e,o);function e(r,n){var a=o.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=JF(n),(a.type===cd||a.type===dd)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=YF(a.bounds)),a.type){case cd:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=$F;break;case dd:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=VF;break}return a}return e}(Do),r2=function(o){Bo(e,o);function e(r,n){var a=o.call(this,r,n)||this,A=n.options[n.selectedIndex||0];return a.value=A&&A.text||"",a}return e}(Do),n2=function(o){Bo(e,o);function e(r,n){var a=o.call(this,r,n)||this;return a.value=n.value,a}return e}(Do),o2=function(o){Bo(e,o);function e(r,n){var a=o.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=s2(r,n.contentWindow.document.documentElement);var A=n.contentWindow.document.documentElement?TA(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):ti.TRANSPARENT,c=n.contentWindow.document.body?TA(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):ti.TRANSPARENT;a.backgroundColor=Oi(A)?Oi(c)?a.styles.backgroundColor:c:A}}catch{}return a}return e}(Do),qF=["OL","UL","MENU"],Dc=function(o,e,r,n){for(var a=e.firstChild,A=void 0;a;a=A)if(A=a.nextSibling,a2(a)&&a.data.trim().length>0)r.textNodes.push(new zF(o,a,r.styles));else if(pa(a))if(d2(a)&&a.assignedNodes)a.assignedNodes().forEach(function(p){return Dc(o,p,r,n)});else{var c=i2(o,a);c.styles.isVisible()&&(ZF(a,c,n)?c.flags|=4:eU(c.styles)&&(c.flags|=2),qF.indexOf(a.tagName)!==-1&&(c.flags|=8),r.elements.push(c),a.slot,a.shadowRoot?Dc(o,a.shadowRoot,c,n):!ud(a)&&!A2(a)&&!pd(a)&&Dc(o,a,c,n))}},i2=function(o,e){return Yg(e)?new qw(o,e):l2(e)?new Zw(o,e):A2(e)?new e2(o,e):tU(e)?new t2(o,e):rU(e)?new $g(o,e):nU(e)?new mf(o,e):pd(e)?new r2(o,e):ud(e)?new n2(o,e):c2(e)?new o2(o,e):new Do(o,e)},s2=function(o,e){var r=i2(o,e);return r.flags|=4,Dc(o,e,r,r),r},ZF=function(o,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||xf(o)&&r.styles.isTransparent()},eU=function(o){return o.isPositioned()||o.isFloating()},a2=function(o){return o.nodeType===Node.TEXT_NODE},pa=function(o){return o.nodeType===Node.ELEMENT_NODE},Vg=function(o){return pa(o)&&typeof o.style<"u"&&!Pc(o)},Pc=function(o){return typeof o.className=="object"},tU=function(o){return o.tagName==="LI"},rU=function(o){return o.tagName==="OL"},nU=function(o){return o.tagName==="INPUT"},oU=function(o){return o.tagName==="HTML"},A2=function(o){return o.tagName==="svg"},xf=function(o){return o.tagName==="BODY"},l2=function(o){return o.tagName==="CANVAS"},jy=function(o){return o.tagName==="VIDEO"},Yg=function(o){return o.tagName==="IMG"},c2=function(o){return o.tagName==="IFRAME"},Ty=function(o){return o.tagName==="STYLE"},iU=function(o){return o.tagName==="SCRIPT"},ud=function(o){return o.tagName==="TEXTAREA"},pd=function(o){return o.tagName==="SELECT"},d2=function(o){return o.tagName==="SLOT"},Fy=function(o){return o.tagName.indexOf("-")>0},sU=function(){function o(){this.counters={}}return o.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},o.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},o.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},o.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,A=!0;n!==null&&n.forEach(function(p){var d=r.counters[p.counter];d&&p.increment!==0&&(A=!1,d.length||d.push(1),d[Math.max(0,d.length-1)]+=p.increment)});var c=[];return A&&a.forEach(function(p){var d=r.counters[p.counter];c.push(p.counter),d||(d=r.counters[p.counter]=[]),d.push(p.reset)}),c},o}(),Uy={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Qy={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},aU={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},AU={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},sa=function(o,e,r,n,a,A){return o<e||o>r?WA(o,a,A.length>0):n.integers.reduce(function(c,p,d){for(;o>=p;)o-=p,c+=n.values[d];return c},"")+A},u2=function(o,e,r,n){var a="";do r||o--,a=n(o)+a,o/=e;while(o*e>=e);return a},Er=function(o,e,r,n,a){var A=r-e+1;return(o<0?"-":"")+(u2(Math.abs(o),A,n,function(c){return kr(Math.floor(c%A)+e)})+a)},cs=function(o,e,r){r===void 0&&(r=". ");var n=e.length;return u2(Math.abs(o),n,!1,function(a){return e[Math.floor(a%n)]})+r},da=1,Bi=2,Si=4,BA=8,Xo=function(o,e,r,n,a,A){if(o<-9999||o>9999)return WA(o,4,a.length>0);var c=Math.abs(o),p=a;if(c===0)return e[0]+p;for(var d=0;c>0&&d<=4;d++){var m=c%10;m===0&&_r(A,da)&&p!==""?p=e[m]+p:m>1||m===1&&d===0||m===1&&d===1&&_r(A,Bi)||m===1&&d===1&&_r(A,Si)&&o>100||m===1&&d>1&&_r(A,BA)?p=e[m]+(d>0?r[d-1]:"")+p:m===1&&d>0&&(p=r[d-1]+p),c=Math.floor(c/10)}return(o<0?n:"")+p},Ry="",My="",Ly="",og="",WA=function(o,e,r){var n=r?". ":"",a=r?"":"",A=r?", ":"",c=r?" ":"";switch(e){case 0:return""+c;case 1:return""+c;case 2:return""+c;case 5:var p=Er(o,48,57,!0,n);return p.length<4?"0"+p:p;case 4:return cs(o,"",a);case 6:return sa(o,1,3999,Uy,3,n).toLowerCase();case 7:return sa(o,1,3999,Uy,3,n);case 8:return Er(o,945,969,!1,n);case 9:return Er(o,97,122,!1,n);case 10:return Er(o,65,90,!1,n);case 11:return Er(o,1632,1641,!0,n);case 12:case 49:return sa(o,1,9999,Qy,3,n);case 35:return sa(o,1,9999,Qy,3,n).toLowerCase();case 13:return Er(o,2534,2543,!0,n);case 14:case 30:return Er(o,6112,6121,!0,n);case 15:return cs(o,"",a);case 16:return cs(o,"",a);case 17:case 48:return Xo(o,"",Ry,"",a,Bi|Si|BA);case 47:return Xo(o,"",My,"",a,da|Bi|Si|BA);case 42:return Xo(o,"",Ry,"",a,Bi|Si|BA);case 41:return Xo(o,"",My,"",a,da|Bi|Si|BA);case 26:return Xo(o,"","",Ly,a,0);case 25:return Xo(o,"","",Ly,a,da|Bi|Si);case 31:return Xo(o,"","",og,A,da|Bi|Si);case 33:return Xo(o,"","",og,A,0);case 32:return Xo(o,"","",og,A,da|Bi|Si);case 18:return Er(o,2406,2415,!0,n);case 20:return sa(o,1,19999,AU,3,n);case 21:return Er(o,2790,2799,!0,n);case 22:return Er(o,2662,2671,!0,n);case 22:return sa(o,1,10999,aU,3,n);case 23:return cs(o,"");case 24:return cs(o,"");case 27:return Er(o,3302,3311,!0,n);case 28:return cs(o,"",a);case 29:return cs(o,"",a);case 34:return Er(o,3792,3801,!0,n);case 37:return Er(o,6160,6169,!0,n);case 38:return Er(o,4160,4169,!0,n);case 39:return Er(o,2918,2927,!0,n);case 40:return Er(o,1776,1785,!0,n);case 43:return Er(o,3046,3055,!0,n);case 44:return Er(o,3174,3183,!0,n);case 45:return Er(o,3664,3673,!0,n);case 46:return Er(o,3872,3881,!0,n);case 3:default:return Er(o,48,57,!0,n)}},p2="data-html2canvas-ignore",Dy=function(){function o(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new sU,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return o.prototype.toIFrame=function(e,r){var n=this,a=lU(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,c=e.defaultView.pageYOffset,p=a.contentWindow,d=p.document,m=uU(a).then(function(){return wn(n,void 0,void 0,function(){var g,y;return gn(this,function(b){switch(b.label){case 0:return this.scrolledElements.forEach(fU),p&&(p.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(p.scrollY!==r.top||p.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(p.scrollX-r.left,p.scrollY-r.top,0,0))),g=this.options.onclone,y=this.clonedReferenceElement,typeof y>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:d.fonts&&d.fonts.ready?[4,d.fonts.ready]:[3,2];case 1:b.sent(),b.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,dU(d)]:[3,4];case 3:b.sent(),b.label=4;case 4:return typeof g=="function"?[2,Promise.resolve().then(function(){return g(d,y)}).then(function(){return a})]:[2,a]}})})});return d.open(),d.write(gU(document.doctype)+"<html></html>"),hU(this.referenceElement.ownerDocument,A,c),d.replaceChild(d.adoptNode(this.documentElement),d.documentElement),d.close(),m},o.prototype.createElementClone=function(e){if(Wg(e,2))debugger;if(l2(e))return this.createCanvasClone(e);if(jy(e))return this.createVideoClone(e);if(Ty(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return Yg(r)&&(Yg(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),Fy(r)?this.createCustomElementClone(r):r},o.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return ig(e.style,r),r},o.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(A,c){return c&&typeof c.cssText=="string"?A+c.cssText:A},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},o.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var A=e.getContext("2d"),c=a.getContext("2d");if(c)if(!this.options.allowTaint&&A)c.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var p=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(p){var d=p.getContextAttributes();(d==null?void 0:d.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}c.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},o.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},o.prototype.appendChildNode=function(e,r,n){(!pa(r)||!iU(r)&&!r.hasAttribute(p2)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!pa(r)||!Ty(r))&&e.appendChild(this.cloneNode(r,n))},o.prototype.cloneChildNodes=function(e,r,n){for(var a=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if(pa(A)&&d2(A)&&typeof A.assignedNodes=="function"){var c=A.assignedNodes();c.length&&c.forEach(function(p){return a.appendChildNode(r,p,n)})}else this.appendChildNode(r,A,n)},o.prototype.cloneNode=function(e,r){if(a2(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&pa(e)&&(Vg(e)||Pc(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var A=n.getComputedStyle(e),c=n.getComputedStyle(e,":before"),p=n.getComputedStyle(e,":after");this.referenceElement===e&&Vg(a)&&(this.clonedReferenceElement=a),xf(a)&&yU(a);var d=this.counters.parse(new gy(this.context,A)),m=this.resolvePseudoContent(e,a,c,QA.BEFORE);Fy(e)&&(r=!0),jy(e)||this.cloneChildNodes(e,a,r),m&&a.insertBefore(m,a.firstChild);var g=this.resolvePseudoContent(e,a,p,QA.AFTER);return g&&a.appendChild(g),this.counters.pop(d),(A&&(this.options.copyStyles||Pc(e))&&!c2(e)||r)&&ig(A,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(ud(e)||pd(e))&&(ud(a)||pd(a))&&(a.value=e.value),a}return e.cloneNode(!1)},o.prototype.resolvePseudoContent=function(e,r,n,a){var A=this;if(n){var c=n.content,p=r.ownerDocument;if(!(!p||!c||c==="none"||c==="-moz-alt-content"||n.display==="none")){this.counters.parse(new gy(this.context,n));var d=new tF(this.context,n),m=p.createElement("html2canvaspseudoelement");ig(n,m),d.content.forEach(function(y){if(y.type===0)m.appendChild(p.createTextNode(y.value));else if(y.type===22){var b=p.createElement("img");b.src=y.value,b.style.opacity="1",m.appendChild(b)}else if(y.type===18){if(y.name==="attr"){var R=y.values.filter(or);R.length&&m.appendChild(p.createTextNode(e.getAttribute(R[0].value)||""))}else if(y.name==="counter"){var C=y.values.filter(Ba),Q=C[0],S=C[1];if(Q&&or(Q)){var N=A.counters.getCounterValue(Q.value),M=S&&or(S)?Kg.parse(A.context,S.value):3;m.appendChild(p.createTextNode(WA(N,M,!1)))}}else if(y.name==="counters"){var Ie=y.values.filter(Ba),Q=Ie[0],fe=Ie[1],S=Ie[2];if(Q&&or(Q)){var F=A.counters.getCounterValues(Q.value),ae=S&&or(S)?Kg.parse(A.context,S.value):3,ee=fe&&fe.type===0?fe.value:"",Re=F.map(function(ue){return WA(ue,ae,!1)}).join(ee);m.appendChild(p.createTextNode(Re))}}}else if(y.type===20)switch(y.value){case"open-quote":m.appendChild(p.createTextNode(py(d.quotes,A.quoteDepth++,!0)));break;case"close-quote":m.appendChild(p.createTextNode(py(d.quotes,--A.quoteDepth,!1)));break;default:m.appendChild(p.createTextNode(y.value))}}),m.className=Jg+" "+Xg;var g=a===QA.BEFORE?" "+Jg:" "+Xg;return Pc(r)?r.className.baseValue+=g:r.className+=g,m}}},o.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},o}(),QA;(function(o){o[o.BEFORE=0]="BEFORE",o[o.AFTER=1]="AFTER"})(QA||(QA={}));var lU=function(o,e){var r=o.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(p2,"true"),o.body.appendChild(r),r},cU=function(o){return new Promise(function(e){if(o.complete){e();return}if(!o.src){e();return}o.onload=e,o.onerror=e})},dU=function(o){return Promise.all([].slice.call(o.images,0).map(cU))},uU=function(o){return new Promise(function(e,r){var n=o.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=o.onload=function(){n.onload=o.onload=null;var A=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(A),e(o))},50)}})},pU=["all","d","content"],ig=function(o,e){for(var r=o.length-1;r>=0;r--){var n=o.item(r);pU.indexOf(n)===-1&&e.style.setProperty(n,o.getPropertyValue(n))}return e},gU=function(o){var e="";return o&&(e+="<!DOCTYPE ",o.name&&(e+=o.name),o.internalSubset&&(e+=o.internalSubset),o.publicId&&(e+='"'+o.publicId+'"'),o.systemId&&(e+='"'+o.systemId+'"'),e+=">"),e},hU=function(o,e,r){o&&o.defaultView&&(e!==o.defaultView.pageXOffset||r!==o.defaultView.pageYOffset)&&o.defaultView.scrollTo(e,r)},fU=function(o){var e=o[0],r=o[1],n=o[2];e.scrollLeft=r,e.scrollTop=n},mU=":before",xU=":after",Jg="___html2canvas___pseudoelement_before",Xg="___html2canvas___pseudoelement_after",Py=`{
    content: "" !important;
    display: none !important;
}`,yU=function(o){bU(o,"."+Jg+mU+Py+`
         .`+Xg+xU+Py)},bU=function(o,e){var r=o.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,o.appendChild(n)}},g2=function(){function o(){}return o.getOrigin=function(e){var r=o._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},o.isSameOrigin=function(e){return o.getOrigin(e)===o._origin},o.setContext=function(e){o._link=e.document.createElement("a"),o._origin=o.getOrigin(e.location.href)},o._origin="about:blank",o}(),wU=function(){function o(e,r){this.context=e,this._options=r,this._cache={}}return o.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(ag(e)||SU(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},o.prototype.match=function(e){return this._cache[e]},o.prototype.loadImage=function(e){return wn(this,void 0,void 0,function(){var r,n,a,A,c=this;return gn(this,function(p){switch(p.label){case 0:return r=g2.isSameOrigin(e),n=!sg(e)&&this._options.useCORS===!0&&nn.SUPPORT_CORS_IMAGES&&!r,a=!sg(e)&&!r&&!ag(e)&&typeof this._options.proxy=="string"&&nn.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!sg(e)&&!ag(e)&&!a&&!n?[2]:(A=e,a?[4,this.proxy(A)]:[3,2]);case 1:A=p.sent(),p.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(d,m){var g=new Image;g.onload=function(){return d(g)},g.onerror=m,(IU(A)||n)&&(g.crossOrigin="anonymous"),g.src=A,g.complete===!0&&setTimeout(function(){return d(g)},500),c._options.imageTimeout>0&&setTimeout(function(){return m("Timed out ("+c._options.imageTimeout+"ms) loading image")},c._options.imageTimeout)})];case 3:return[2,p.sent()]}})})},o.prototype.has=function(e){return typeof this._cache[e]<"u"},o.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},o.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(A,c){var p=nn.SUPPORT_RESPONSE_TYPE?"blob":"text",d=new XMLHttpRequest;d.onload=function(){if(d.status===200)if(p==="text")A(d.response);else{var y=new FileReader;y.addEventListener("load",function(){return A(y.result)},!1),y.addEventListener("error",function(b){return c(b)},!1),y.readAsDataURL(d.response)}else c("Failed to proxy resource "+a+" with status code "+d.status)},d.onerror=c;var m=n.indexOf("?")>-1?"&":"?";if(d.open("GET",""+n+m+"url="+encodeURIComponent(e)+"&responseType="+p),p!=="text"&&d instanceof XMLHttpRequest&&(d.responseType=p),r._options.imageTimeout){var g=r._options.imageTimeout;d.timeout=g,d.ontimeout=function(){return c("Timed out ("+g+"ms) proxying "+a)}}d.send()})},o}(),vU=/^data:image\/svg\+xml/i,CU=/^data:image\/.*;base64,/i,BU=/^data:image\/.*/i,SU=function(o){return nn.SUPPORT_SVG_DRAWING||!EU(o)},sg=function(o){return BU.test(o)},IU=function(o){return CU.test(o)},ag=function(o){return o.substr(0,4)==="blob"},EU=function(o){return o.substr(-3).toLowerCase()==="svg"||vU.test(o)},ot=function(){function o(e,r){this.type=0,this.x=e,this.y=r}return o.prototype.add=function(e,r){return new o(this.x+e,this.y+r)},o}(),aa=function(o,e,r){return new ot(o.x+(e.x-o.x)*r,o.y+(e.y-o.y)*r)},Sc=function(){function o(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return o.prototype.subdivide=function(e,r){var n=aa(this.start,this.startControl,e),a=aa(this.startControl,this.endControl,e),A=aa(this.endControl,this.end,e),c=aa(n,a,e),p=aa(a,A,e),d=aa(c,p,e);return r?new o(this.start,n,c,d):new o(d,p,A,this.end)},o.prototype.add=function(e,r){return new o(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},o.prototype.reverse=function(){return new o(this.end,this.endControl,this.startControl,this.start)},o}(),ro=function(o){return o.type===1},kU=function(){function o(e){var r=e.styles,n=e.bounds,a=vA(r.borderTopLeftRadius,n.width,n.height),A=a[0],c=a[1],p=vA(r.borderTopRightRadius,n.width,n.height),d=p[0],m=p[1],g=vA(r.borderBottomRightRadius,n.width,n.height),y=g[0],b=g[1],R=vA(r.borderBottomLeftRadius,n.width,n.height),C=R[0],Q=R[1],S=[];S.push((A+d)/n.width),S.push((C+y)/n.width),S.push((c+Q)/n.height),S.push((m+b)/n.height);var N=Math.max.apply(Math,S);N>1&&(A/=N,c/=N,d/=N,m/=N,y/=N,b/=N,C/=N,Q/=N);var M=n.width-d,Ie=n.height-b,fe=n.width-y,F=n.height-Q,ae=r.borderTopWidth,ee=r.borderRightWidth,Re=r.borderBottomWidth,se=r.borderLeftWidth,Z=lr(r.paddingTop,e.bounds.width),ue=lr(r.paddingRight,e.bounds.width),pe=lr(r.paddingBottom,e.bounds.width),we=lr(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||c>0?mr(n.left+se/3,n.top+ae/3,A-se/3,c-ae/3,Jt.TOP_LEFT):new ot(n.left+se/3,n.top+ae/3),this.topRightBorderDoubleOuterBox=A>0||c>0?mr(n.left+M,n.top+ae/3,d-ee/3,m-ae/3,Jt.TOP_RIGHT):new ot(n.left+n.width-ee/3,n.top+ae/3),this.bottomRightBorderDoubleOuterBox=y>0||b>0?mr(n.left+fe,n.top+Ie,y-ee/3,b-Re/3,Jt.BOTTOM_RIGHT):new ot(n.left+n.width-ee/3,n.top+n.height-Re/3),this.bottomLeftBorderDoubleOuterBox=C>0||Q>0?mr(n.left+se/3,n.top+F,C-se/3,Q-Re/3,Jt.BOTTOM_LEFT):new ot(n.left+se/3,n.top+n.height-Re/3),this.topLeftBorderDoubleInnerBox=A>0||c>0?mr(n.left+se*2/3,n.top+ae*2/3,A-se*2/3,c-ae*2/3,Jt.TOP_LEFT):new ot(n.left+se*2/3,n.top+ae*2/3),this.topRightBorderDoubleInnerBox=A>0||c>0?mr(n.left+M,n.top+ae*2/3,d-ee*2/3,m-ae*2/3,Jt.TOP_RIGHT):new ot(n.left+n.width-ee*2/3,n.top+ae*2/3),this.bottomRightBorderDoubleInnerBox=y>0||b>0?mr(n.left+fe,n.top+Ie,y-ee*2/3,b-Re*2/3,Jt.BOTTOM_RIGHT):new ot(n.left+n.width-ee*2/3,n.top+n.height-Re*2/3),this.bottomLeftBorderDoubleInnerBox=C>0||Q>0?mr(n.left+se*2/3,n.top+F,C-se*2/3,Q-Re*2/3,Jt.BOTTOM_LEFT):new ot(n.left+se*2/3,n.top+n.height-Re*2/3),this.topLeftBorderStroke=A>0||c>0?mr(n.left+se/2,n.top+ae/2,A-se/2,c-ae/2,Jt.TOP_LEFT):new ot(n.left+se/2,n.top+ae/2),this.topRightBorderStroke=A>0||c>0?mr(n.left+M,n.top+ae/2,d-ee/2,m-ae/2,Jt.TOP_RIGHT):new ot(n.left+n.width-ee/2,n.top+ae/2),this.bottomRightBorderStroke=y>0||b>0?mr(n.left+fe,n.top+Ie,y-ee/2,b-Re/2,Jt.BOTTOM_RIGHT):new ot(n.left+n.width-ee/2,n.top+n.height-Re/2),this.bottomLeftBorderStroke=C>0||Q>0?mr(n.left+se/2,n.top+F,C-se/2,Q-Re/2,Jt.BOTTOM_LEFT):new ot(n.left+se/2,n.top+n.height-Re/2),this.topLeftBorderBox=A>0||c>0?mr(n.left,n.top,A,c,Jt.TOP_LEFT):new ot(n.left,n.top),this.topRightBorderBox=d>0||m>0?mr(n.left+M,n.top,d,m,Jt.TOP_RIGHT):new ot(n.left+n.width,n.top),this.bottomRightBorderBox=y>0||b>0?mr(n.left+fe,n.top+Ie,y,b,Jt.BOTTOM_RIGHT):new ot(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=C>0||Q>0?mr(n.left,n.top+F,C,Q,Jt.BOTTOM_LEFT):new ot(n.left,n.top+n.height),this.topLeftPaddingBox=A>0||c>0?mr(n.left+se,n.top+ae,Math.max(0,A-se),Math.max(0,c-ae),Jt.TOP_LEFT):new ot(n.left+se,n.top+ae),this.topRightPaddingBox=d>0||m>0?mr(n.left+Math.min(M,n.width-ee),n.top+ae,M>n.width+ee?0:Math.max(0,d-ee),Math.max(0,m-ae),Jt.TOP_RIGHT):new ot(n.left+n.width-ee,n.top+ae),this.bottomRightPaddingBox=y>0||b>0?mr(n.left+Math.min(fe,n.width-se),n.top+Math.min(Ie,n.height-Re),Math.max(0,y-ee),Math.max(0,b-Re),Jt.BOTTOM_RIGHT):new ot(n.left+n.width-ee,n.top+n.height-Re),this.bottomLeftPaddingBox=C>0||Q>0?mr(n.left+se,n.top+Math.min(F,n.height-Re),Math.max(0,C-se),Math.max(0,Q-Re),Jt.BOTTOM_LEFT):new ot(n.left+se,n.top+n.height-Re),this.topLeftContentBox=A>0||c>0?mr(n.left+se+we,n.top+ae+Z,Math.max(0,A-(se+we)),Math.max(0,c-(ae+Z)),Jt.TOP_LEFT):new ot(n.left+se+we,n.top+ae+Z),this.topRightContentBox=d>0||m>0?mr(n.left+Math.min(M,n.width+se+we),n.top+ae+Z,M>n.width+se+we?0:d-se+we,m-(ae+Z),Jt.TOP_RIGHT):new ot(n.left+n.width-(ee+ue),n.top+ae+Z),this.bottomRightContentBox=y>0||b>0?mr(n.left+Math.min(fe,n.width-(se+we)),n.top+Math.min(Ie,n.height+ae+Z),Math.max(0,y-(ee+ue)),b-(Re+pe),Jt.BOTTOM_RIGHT):new ot(n.left+n.width-(ee+ue),n.top+n.height-(Re+pe)),this.bottomLeftContentBox=C>0||Q>0?mr(n.left+se+we,n.top+F,Math.max(0,C-(se+we)),Q-(Re+pe),Jt.BOTTOM_LEFT):new ot(n.left+se+we,n.top+n.height-(Re+pe))}return o}(),Jt;(function(o){o[o.TOP_LEFT=0]="TOP_LEFT",o[o.TOP_RIGHT=1]="TOP_RIGHT",o[o.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",o[o.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Jt||(Jt={}));var mr=function(o,e,r,n,a){var A=4*((Math.sqrt(2)-1)/3),c=r*A,p=n*A,d=o+r,m=e+n;switch(a){case Jt.TOP_LEFT:return new Sc(new ot(o,m),new ot(o,m-p),new ot(d-c,e),new ot(d,e));case Jt.TOP_RIGHT:return new Sc(new ot(o,e),new ot(o+c,e),new ot(d,m-p),new ot(d,m));case Jt.BOTTOM_RIGHT:return new Sc(new ot(d,e),new ot(d,e+p),new ot(o+c,m),new ot(o,m));case Jt.BOTTOM_LEFT:default:return new Sc(new ot(d,m),new ot(d-c,m),new ot(o,e+p),new ot(o,e))}},gd=function(o){return[o.topLeftBorderBox,o.topRightBorderBox,o.bottomRightBorderBox,o.bottomLeftBorderBox]},jU=function(o){return[o.topLeftContentBox,o.topRightContentBox,o.bottomRightContentBox,o.bottomLeftContentBox]},hd=function(o){return[o.topLeftPaddingBox,o.topRightPaddingBox,o.bottomRightPaddingBox,o.bottomLeftPaddingBox]},TU=function(){function o(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return o}(),Ic=function(){function o(e,r){this.path=e,this.target=r,this.type=1}return o}(),FU=function(){function o(e){this.opacity=e,this.type=2,this.target=6}return o}(),UU=function(o){return o.type===0},h2=function(o){return o.type===1},QU=function(o){return o.type===2},Ny=function(o,e){return o.length===e.length?o.some(function(r,n){return r===e[n]}):!1},RU=function(o,e,r,n,a){return o.map(function(A,c){switch(c){case 0:return A.add(e,r);case 1:return A.add(e+n,r);case 2:return A.add(e+n,r+a);case 3:return A.add(e,r+a)}return A})},f2=function(){function o(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return o}(),m2=function(){function o(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new kU(this.container),this.container.styles.opacity<1&&this.effects.push(new FU(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new TU(n,a,A))}if(this.container.styles.overflowX!==0){var c=gd(this.curves),p=hd(this.curves);Ny(c,p)?this.effects.push(new Ic(c,6)):(this.effects.push(new Ic(c,2)),this.effects.push(new Ic(p,4)))}}return o.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var A=n.effects.filter(function(d){return!h2(d)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,A),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var c=gd(n.curves),p=hd(n.curves);Ny(c,p)||a.unshift(new Ic(p,6))}}else a.unshift.apply(a,A);n=n.parent}return a.filter(function(d){return _r(d.target,e)})},o}(),qg=function(o,e,r,n){o.container.elements.forEach(function(a){var A=_r(a.flags,4),c=_r(a.flags,2),p=new m2(a,o);_r(a.styles.display,2048)&&n.push(p);var d=_r(a.flags,8)?[]:n;if(A||c){var m=A||a.styles.isPositioned()?r:e,g=new f2(p);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var y=a.styles.zIndex.order;if(y<0){var b=0;m.negativeZIndex.some(function(C,Q){return y>C.element.container.styles.zIndex.order?(b=Q,!1):b>0}),m.negativeZIndex.splice(b,0,g)}else if(y>0){var R=0;m.positiveZIndex.some(function(C,Q){return y>=C.element.container.styles.zIndex.order?(R=Q+1,!1):R>0}),m.positiveZIndex.splice(R,0,g)}else m.zeroOrAutoZIndexOrTransformedOrOpacity.push(g)}else a.styles.isFloating()?m.nonPositionedFloats.push(g):m.nonPositionedInlineLevel.push(g);qg(p,g,A?g:r,d)}else a.styles.isInlineLevel()?e.inlineLevel.push(p):e.nonInlineLevel.push(p),qg(p,e,r,d);_r(a.flags,8)&&x2(a,d)})},x2=function(o,e){for(var r=o instanceof $g?o.start:1,n=o instanceof $g?o.reversed:!1,a=0;a<e.length;a++){var A=e[a];A.container instanceof t2&&typeof A.container.value=="number"&&A.container.value!==0&&(r=A.container.value),A.listValue=WA(r,A.container.styles.listStyleType,!0),r+=n?-1:1}},MU=function(o){var e=new m2(o,null),r=new f2(e),n=[];return qg(e,r,r,n),x2(e.container,n),r},Hy=function(o,e){switch(e){case 0:return oo(o.topLeftBorderBox,o.topLeftPaddingBox,o.topRightBorderBox,o.topRightPaddingBox);case 1:return oo(o.topRightBorderBox,o.topRightPaddingBox,o.bottomRightBorderBox,o.bottomRightPaddingBox);case 2:return oo(o.bottomRightBorderBox,o.bottomRightPaddingBox,o.bottomLeftBorderBox,o.bottomLeftPaddingBox);case 3:default:return oo(o.bottomLeftBorderBox,o.bottomLeftPaddingBox,o.topLeftBorderBox,o.topLeftPaddingBox)}},LU=function(o,e){switch(e){case 0:return oo(o.topLeftBorderBox,o.topLeftBorderDoubleOuterBox,o.topRightBorderBox,o.topRightBorderDoubleOuterBox);case 1:return oo(o.topRightBorderBox,o.topRightBorderDoubleOuterBox,o.bottomRightBorderBox,o.bottomRightBorderDoubleOuterBox);case 2:return oo(o.bottomRightBorderBox,o.bottomRightBorderDoubleOuterBox,o.bottomLeftBorderBox,o.bottomLeftBorderDoubleOuterBox);case 3:default:return oo(o.bottomLeftBorderBox,o.bottomLeftBorderDoubleOuterBox,o.topLeftBorderBox,o.topLeftBorderDoubleOuterBox)}},DU=function(o,e){switch(e){case 0:return oo(o.topLeftBorderDoubleInnerBox,o.topLeftPaddingBox,o.topRightBorderDoubleInnerBox,o.topRightPaddingBox);case 1:return oo(o.topRightBorderDoubleInnerBox,o.topRightPaddingBox,o.bottomRightBorderDoubleInnerBox,o.bottomRightPaddingBox);case 2:return oo(o.bottomRightBorderDoubleInnerBox,o.bottomRightPaddingBox,o.bottomLeftBorderDoubleInnerBox,o.bottomLeftPaddingBox);case 3:default:return oo(o.bottomLeftBorderDoubleInnerBox,o.bottomLeftPaddingBox,o.topLeftBorderDoubleInnerBox,o.topLeftPaddingBox)}},PU=function(o,e){switch(e){case 0:return Ec(o.topLeftBorderStroke,o.topRightBorderStroke);case 1:return Ec(o.topRightBorderStroke,o.bottomRightBorderStroke);case 2:return Ec(o.bottomRightBorderStroke,o.bottomLeftBorderStroke);case 3:default:return Ec(o.bottomLeftBorderStroke,o.topLeftBorderStroke)}},Ec=function(o,e){var r=[];return ro(o)?r.push(o.subdivide(.5,!1)):r.push(o),ro(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},oo=function(o,e,r,n){var a=[];return ro(o)?a.push(o.subdivide(.5,!1)):a.push(o),ro(r)?a.push(r.subdivide(.5,!0)):a.push(r),ro(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),ro(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},y2=function(o){var e=o.bounds,r=o.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},fd=function(o){var e=o.styles,r=o.bounds,n=lr(e.paddingLeft,r.width),a=lr(e.paddingRight,r.width),A=lr(e.paddingTop,r.width),c=lr(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+A+c))},NU=function(o,e){return o===0?e.bounds:o===2?fd(e):y2(e)},HU=function(o,e){return o===0?e.bounds:o===2?fd(e):y2(e)},Ag=function(o,e,r){var n=NU(ua(o.styles.backgroundOrigin,e),o),a=HU(ua(o.styles.backgroundClip,e),o),A=OU(ua(o.styles.backgroundSize,e),r,n),c=A[0],p=A[1],d=vA(ua(o.styles.backgroundPosition,e),n.width-c,n.height-p),m=_U(ua(o.styles.backgroundRepeat,e),d,A,n,a),g=Math.round(n.left+d[0]),y=Math.round(n.top+d[1]);return[m,g,y,c,p]},Aa=function(o){return or(o)&&o.value===ba.AUTO},kc=function(o){return typeof o=="number"},OU=function(o,e,r){var n=e[0],a=e[1],A=e[2],c=o[0],p=o[1];if(!c)return[0,0];if(Lr(c)&&p&&Lr(p))return[lr(c,r.width),lr(p,r.height)];var d=kc(A);if(or(c)&&(c.value===ba.CONTAIN||c.value===ba.COVER)){if(kc(A)){var m=r.width/r.height;return m<A!=(c.value===ba.COVER)?[r.width,r.width/A]:[r.height*A,r.height]}return[r.width,r.height]}var g=kc(n),y=kc(a),b=g||y;if(Aa(c)&&(!p||Aa(p))){if(g&&y)return[n,a];if(!d&&!b)return[r.width,r.height];if(b&&d){var R=g?n:a*A,C=y?a:n/A;return[R,C]}var Q=g?n:r.width,S=y?a:r.height;return[Q,S]}if(d){var N=0,M=0;return Lr(c)?N=lr(c,r.width):Lr(p)&&(M=lr(p,r.height)),Aa(c)?N=M*A:(!p||Aa(p))&&(M=N/A),[N,M]}var Ie=null,fe=null;if(Lr(c)?Ie=lr(c,r.width):p&&Lr(p)&&(fe=lr(p,r.height)),Ie!==null&&(!p||Aa(p))&&(fe=g&&y?Ie/n*a:r.height),fe!==null&&Aa(c)&&(Ie=g&&y?fe/a*n:r.width),Ie!==null&&fe!==null)return[Ie,fe];throw new Error("Unable to calculate background-size for element")},ua=function(o,e){var r=o[e];return typeof r>"u"?o[0]:r},_U=function(o,e,r,n,a){var A=e[0],c=e[1],p=r[0],d=r[1];switch(o){case 2:return[new ot(Math.round(n.left),Math.round(n.top+c)),new ot(Math.round(n.left+n.width),Math.round(n.top+c)),new ot(Math.round(n.left+n.width),Math.round(d+n.top+c)),new ot(Math.round(n.left),Math.round(d+n.top+c))];case 3:return[new ot(Math.round(n.left+A),Math.round(n.top)),new ot(Math.round(n.left+A+p),Math.round(n.top)),new ot(Math.round(n.left+A+p),Math.round(n.height+n.top)),new ot(Math.round(n.left+A),Math.round(n.height+n.top))];case 1:return[new ot(Math.round(n.left+A),Math.round(n.top+c)),new ot(Math.round(n.left+A+p),Math.round(n.top+c)),new ot(Math.round(n.left+A+p),Math.round(n.top+c+d)),new ot(Math.round(n.left+A),Math.round(n.top+c+d))];default:return[new ot(Math.round(a.left),Math.round(a.top)),new ot(Math.round(a.left+a.width),Math.round(a.top)),new ot(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ot(Math.round(a.left),Math.round(a.height+a.top))]}},zU="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Oy="Hidden Text",KU=function(){function o(e){this._data={},this._document=e}return o.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),A=this._document.createElement("span"),c=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",c.appendChild(n),a.src=zU,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=r,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode(Oy)),n.appendChild(A),n.appendChild(a);var p=a.offsetTop-A.offsetTop+2;n.removeChild(A),n.appendChild(this._document.createTextNode(Oy)),n.style.lineHeight="normal",a.style.verticalAlign="super";var d=a.offsetTop-n.offsetTop+2;return c.removeChild(n),{baseline:p,middle:d}},o.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},o}(),b2=function(){function o(e,r){this.context=e,this.options=r}return o}(),WU=1e4,GU=function(o){Bo(e,o);function e(r,n){var a=o.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new KU(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),QU(r)&&(this.ctx.globalAlpha=r.opacity),UU(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),h2(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return wn(this,void 0,void 0,function(){var n;return gn(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return wn(this,void 0,void 0,function(){return gn(this,function(n){switch(n.label){case 0:if(_r(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var A=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var c=ff(r.text);c.reduce(function(p,d){return A.ctx.fillText(d,p,r.bounds.top+a),p+A.ctx.measureText(d).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(c){return c==="normal"||c==="small-caps"}).join(""),a=XU(r.fontFamily).join(", "),A=JA(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,A,a].join(" "),a,A]},e.prototype.renderTextNode=function(r,n){return wn(this,void 0,void 0,function(){var a,A,c,p,d,m,g,y,b=this;return gn(this,function(R){return a=this.createFontStyle(n),A=a[0],c=a[1],p=a[2],this.ctx.font=A,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",d=this.fontMetrics.getMetrics(c,p),m=d.baseline,g=d.middle,y=n.paintOrder,r.textBounds.forEach(function(C){y.forEach(function(Q){switch(Q){case 0:b.ctx.fillStyle=Yr(n.color),b.renderTextWithLetterSpacing(C,n.letterSpacing,m);var S=n.textShadow;S.length&&C.text.trim().length&&(S.slice(0).reverse().forEach(function(N){b.ctx.shadowColor=Yr(N.color),b.ctx.shadowOffsetX=N.offsetX.number*b.options.scale,b.ctx.shadowOffsetY=N.offsetY.number*b.options.scale,b.ctx.shadowBlur=N.blur.number,b.renderTextWithLetterSpacing(C,n.letterSpacing,m)}),b.ctx.shadowColor="",b.ctx.shadowOffsetX=0,b.ctx.shadowOffsetY=0,b.ctx.shadowBlur=0),n.textDecorationLine.length&&(b.ctx.fillStyle=Yr(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(N){switch(N){case 1:b.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top+m),C.bounds.width,1);break;case 2:b.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top),C.bounds.width,1);break;case 3:b.ctx.fillRect(C.bounds.left,Math.ceil(C.bounds.top+g),C.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&C.text.trim().length&&(b.ctx.strokeStyle=Yr(n.webkitTextStrokeColor),b.ctx.lineWidth=n.webkitTextStrokeWidth,b.ctx.lineJoin=window.chrome?"miter":"round",b.ctx.strokeText(C.text,C.bounds.left,C.bounds.top+m)),b.ctx.strokeStyle="",b.ctx.lineWidth=0,b.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var A=fd(r),c=hd(n);this.path(c),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return wn(this,void 0,void 0,function(){var n,a,A,c,p,d,M,M,m,g,y,b,fe,R,C,F,Q,S,N,M,Ie,fe,F;return gn(this,function(ae){switch(ae.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,A=n.styles,c=0,p=n.textNodes,ae.label=1;case 1:return c<p.length?(d=p[c],[4,this.renderTextNode(d,A)]):[3,4];case 2:ae.sent(),ae.label=3;case 3:return c++,[3,1];case 4:if(!(n instanceof qw))return[3,8];ae.label=5;case 5:return ae.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return M=ae.sent(),this.renderReplacedElement(n,a,M),[3,8];case 7:return ae.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Zw&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof e2))return[3,12];ae.label=9;case 9:return ae.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return M=ae.sent(),this.renderReplacedElement(n,a,M),[3,12];case 11:return ae.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof o2&&n.tree?(m=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,m.render(n.tree)]):[3,14];case 13:g=ae.sent(),n.width&&n.height&&this.ctx.drawImage(g,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),ae.label=14;case 14:if(n instanceof mf&&(y=Math.min(n.bounds.width,n.bounds.height),n.type===cd?n.checked&&(this.ctx.save(),this.path([new ot(n.bounds.left+y*.39363,n.bounds.top+y*.79),new ot(n.bounds.left+y*.16,n.bounds.top+y*.5549),new ot(n.bounds.left+y*.27347,n.bounds.top+y*.44071),new ot(n.bounds.left+y*.39694,n.bounds.top+y*.5649),new ot(n.bounds.left+y*.72983,n.bounds.top+y*.23),new ot(n.bounds.left+y*.84,n.bounds.top+y*.34085),new ot(n.bounds.left+y*.39363,n.bounds.top+y*.79)]),this.ctx.fillStyle=Yr(ky),this.ctx.fill(),this.ctx.restore()):n.type===dd&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+y/2,n.bounds.top+y/2,y/4,0,Math.PI*2,!0),this.ctx.fillStyle=Yr(ky),this.ctx.fill(),this.ctx.restore())),$U(n)&&n.value.length){switch(b=this.createFontStyle(A),fe=b[0],R=b[1],C=this.fontMetrics.getMetrics(fe,R).baseline,this.ctx.font=fe,this.ctx.fillStyle=Yr(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=YU(n.styles.textAlign),F=fd(n),Q=0,n.styles.textAlign){case 1:Q+=F.width/2;break;case 2:Q+=F.width;break}S=F.add(Q,0,0,-F.height/2+1),this.ctx.save(),this.path([new ot(F.left,F.top),new ot(F.left+F.width,F.top),new ot(F.left+F.width,F.top+F.height),new ot(F.left,F.top+F.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new UA(n.value,S),A.letterSpacing,C),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!_r(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(N=n.styles.listStyleImage,N.type!==0)return[3,18];M=void 0,Ie=N.url,ae.label=15;case 15:return ae.trys.push([15,17,,18]),[4,this.context.cache.match(Ie)];case 16:return M=ae.sent(),this.ctx.drawImage(M,n.bounds.left-(M.width+10),n.bounds.top),[3,18];case 17:return ae.sent(),this.context.logger.error("Error loading list-style-image "+Ie),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(fe=this.createFontStyle(A)[0],this.ctx.font=fe,this.ctx.fillStyle=Yr(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",F=new oi(n.bounds.left,n.bounds.top+lr(n.styles.paddingTop,n.bounds.width),n.bounds.width,dy(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new UA(r.listValue,F),A.letterSpacing,dy(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ae.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return wn(this,void 0,void 0,function(){var n,a,N,A,c,N,p,d,N,m,g,N,y,b,N,R,C,N,Q,S,N;return gn(this,function(M){switch(M.label){case 0:if(_r(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:M.sent(),n=0,a=r.negativeZIndex,M.label=2;case 2:return n<a.length?(N=a[n],[4,this.renderStack(N)]):[3,5];case 3:M.sent(),M.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:M.sent(),A=0,c=r.nonInlineLevel,M.label=7;case 7:return A<c.length?(N=c[A],[4,this.renderNode(N)]):[3,10];case 8:M.sent(),M.label=9;case 9:return A++,[3,7];case 10:p=0,d=r.nonPositionedFloats,M.label=11;case 11:return p<d.length?(N=d[p],[4,this.renderStack(N)]):[3,14];case 12:M.sent(),M.label=13;case 13:return p++,[3,11];case 14:m=0,g=r.nonPositionedInlineLevel,M.label=15;case 15:return m<g.length?(N=g[m],[4,this.renderStack(N)]):[3,18];case 16:M.sent(),M.label=17;case 17:return m++,[3,15];case 18:y=0,b=r.inlineLevel,M.label=19;case 19:return y<b.length?(N=b[y],[4,this.renderNode(N)]):[3,22];case 20:M.sent(),M.label=21;case 21:return y++,[3,19];case 22:R=0,C=r.zeroOrAutoZIndexOrTransformedOrOpacity,M.label=23;case 23:return R<C.length?(N=C[R],[4,this.renderStack(N)]):[3,26];case 24:M.sent(),M.label=25;case 25:return R++,[3,23];case 26:Q=0,S=r.positiveZIndex,M.label=27;case 27:return Q<S.length?(N=S[Q],[4,this.renderStack(N)]):[3,30];case 28:M.sent(),M.label=29;case 29:return Q++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,A){var c=ro(a)?a.start:a;A===0?n.ctx.moveTo(c.x,c.y):n.ctx.lineTo(c.x,c.y),ro(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,A){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,A),this.ctx.fill(),this.ctx.translate(-a,-A)},e.prototype.resizeImage=function(r,n,a){var A;if(r.width===n&&r.height===a)return r;var c=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,p=c.createElement("canvas");p.width=Math.max(1,n),p.height=Math.max(1,a);var d=p.getContext("2d");return d.drawImage(r,0,0,r.width,r.height,0,0,n,a),p},e.prototype.renderBackgroundImage=function(r){return wn(this,void 0,void 0,function(){var n,a,A,c,p,d;return gn(this,function(m){switch(m.label){case 0:n=r.styles.backgroundImage.length-1,a=function(g){var y,b,R,Z,Ee,k,we,Pe,Re,C,Z,Ee,k,we,Pe,Q,S,N,M,Ie,fe,F,ae,ee,Re,se,Z,ue,pe,we,Pe,re,Ee,k,ge,_,G,E,D,ie,L,j;return gn(this,function(de){switch(de.label){case 0:if(g.type!==0)return[3,5];y=void 0,b=g.url,de.label=1;case 1:return de.trys.push([1,3,,4]),[4,A.context.cache.match(b)];case 2:return y=de.sent(),[3,4];case 3:return de.sent(),A.context.logger.error("Error loading background-image "+b),[3,4];case 4:return y&&(R=Ag(r,n,[y.width,y.height,y.width/y.height]),Z=R[0],Ee=R[1],k=R[2],we=R[3],Pe=R[4],Re=A.ctx.createPattern(A.resizeImage(y,we,Pe),"repeat"),A.renderRepeat(Z,Re,Ee,k)),[3,6];case 5:Uj(g)?(C=Ag(r,n,[null,null,null]),Z=C[0],Ee=C[1],k=C[2],we=C[3],Pe=C[4],Q=Ej(g.angle,we,Pe),S=Q[0],N=Q[1],M=Q[2],Ie=Q[3],fe=Q[4],F=document.createElement("canvas"),F.width=we,F.height=Pe,ae=F.getContext("2d"),ee=ae.createLinearGradient(N,Ie,M,fe),ly(g.stops,S).forEach(function(Oe){return ee.addColorStop(Oe.stop,Yr(Oe.color))}),ae.fillStyle=ee,ae.fillRect(0,0,we,Pe),we>0&&Pe>0&&(Re=A.ctx.createPattern(F,"repeat"),A.renderRepeat(Z,Re,Ee,k))):Qj(g)&&(se=Ag(r,n,[null,null,null]),Z=se[0],ue=se[1],pe=se[2],we=se[3],Pe=se[4],re=g.position.length===0?[pf]:g.position,Ee=lr(re[0],we),k=lr(re[re.length-1],Pe),ge=kj(g,Ee,k,we,Pe),_=ge[0],G=ge[1],_>0&&G>0&&(E=A.ctx.createRadialGradient(ue+Ee,pe+k,0,ue+Ee,pe+k,_),ly(g.stops,_*2).forEach(function(Oe){return E.addColorStop(Oe.stop,Yr(Oe.color))}),A.path(Z),A.ctx.fillStyle=E,_!==G?(D=r.bounds.left+.5*r.bounds.width,ie=r.bounds.top+.5*r.bounds.height,L=G/_,j=1/L,A.ctx.save(),A.ctx.translate(D,ie),A.ctx.transform(1,0,0,L,0,0),A.ctx.translate(-D,-ie),A.ctx.fillRect(ue,j*(pe-ie)+ie,we,Pe*j),A.ctx.restore()):A.ctx.fill())),de.label=6;case 6:return n--,[2]}})},A=this,c=0,p=r.styles.backgroundImage.slice(0).reverse(),m.label=1;case 1:return c<p.length?(d=p[c],[5,a(d)]):[3,4];case 2:m.sent(),m.label=3;case 3:return c++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return wn(this,void 0,void 0,function(){return gn(this,function(A){return this.path(Hy(a,n)),this.ctx.fillStyle=Yr(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,A){return wn(this,void 0,void 0,function(){var c,p;return gn(this,function(d){switch(d.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,A)]:[3,2];case 1:return d.sent(),[2];case 2:return c=LU(A,a),this.path(c),this.ctx.fillStyle=Yr(r),this.ctx.fill(),p=DU(A,a),this.path(p),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return wn(this,void 0,void 0,function(){var n,a,A,c,p,d,m,g,y=this;return gn(this,function(b){switch(b.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!Oi(n.backgroundColor)||n.backgroundImage.length,A=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],c=VU(ua(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(c),this.ctx.clip(),Oi(n.backgroundColor)||(this.ctx.fillStyle=Yr(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:b.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(R){y.ctx.save();var C=gd(r.curves),Q=R.inset?0:WU,S=RU(C,-Q+(R.inset?1:-1)*R.spread.number,(R.inset?1:-1)*R.spread.number,R.spread.number*(R.inset?-2:2),R.spread.number*(R.inset?-2:2));R.inset?(y.path(C),y.ctx.clip(),y.mask(S)):(y.mask(C),y.ctx.clip(),y.path(S)),y.ctx.shadowOffsetX=R.offsetX.number+Q,y.ctx.shadowOffsetY=R.offsetY.number,y.ctx.shadowColor=Yr(R.color),y.ctx.shadowBlur=R.blur.number,y.ctx.fillStyle=R.inset?Yr(R.color):"rgba(0,0,0,1)",y.ctx.fill(),y.ctx.restore()}),b.label=2;case 2:p=0,d=0,m=A,b.label=3;case 3:return d<m.length?(g=m[d],g.style!==0&&!Oi(g.color)&&g.width>0?g.style!==2?[3,5]:[4,this.renderDashedDottedBorder(g.color,g.width,p,r.curves,2)]:[3,11]):[3,13];case 4:return b.sent(),[3,11];case 5:return g.style!==3?[3,7]:[4,this.renderDashedDottedBorder(g.color,g.width,p,r.curves,3)];case 6:return b.sent(),[3,11];case 7:return g.style!==4?[3,9]:[4,this.renderDoubleBorder(g.color,g.width,p,r.curves)];case 8:return b.sent(),[3,11];case 9:return[4,this.renderSolidBorder(g.color,p,r.curves)];case 10:b.sent(),b.label=11;case 11:p++,b.label=12;case 12:return d++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,A,c){return wn(this,void 0,void 0,function(){var p,d,m,g,y,b,R,C,Q,S,N,M,Ie,fe,F,ae,F,ae;return gn(this,function(ee){return this.ctx.save(),p=PU(A,a),d=Hy(A,a),c===2&&(this.path(d),this.ctx.clip()),ro(d[0])?(m=d[0].start.x,g=d[0].start.y):(m=d[0].x,g=d[0].y),ro(d[1])?(y=d[1].end.x,b=d[1].end.y):(y=d[1].x,b=d[1].y),a===0||a===2?R=Math.abs(m-y):R=Math.abs(g-b),this.ctx.beginPath(),c===3?this.formatPath(p):this.formatPath(d.slice(0,2)),C=n<3?n*3:n*2,Q=n<3?n*2:n,c===3&&(C=n,Q=n),S=!0,R<=C*2?S=!1:R<=C*2+Q?(N=R/(2*C+Q),C*=N,Q*=N):(M=Math.floor((R+Q)/(C+Q)),Ie=(R-M*C)/(M-1),fe=(R-(M+1)*C)/M,Q=fe<=0||Math.abs(Q-Ie)<Math.abs(Q-fe)?Ie:fe),S&&(c===3?this.ctx.setLineDash([0,C+Q]):this.ctx.setLineDash([C,Q])),c===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Yr(r),this.ctx.stroke(),this.ctx.setLineDash([]),c===2&&(ro(d[0])&&(F=d[3],ae=d[0],this.ctx.beginPath(),this.formatPath([new ot(F.end.x,F.end.y),new ot(ae.start.x,ae.start.y)]),this.ctx.stroke()),ro(d[1])&&(F=d[1],ae=d[2],this.ctx.beginPath(),this.formatPath([new ot(F.end.x,F.end.y),new ot(ae.start.x,ae.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return wn(this,void 0,void 0,function(){var n;return gn(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Yr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=MU(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(b2),$U=function(o){return o instanceof n2||o instanceof r2?!0:o instanceof mf&&o.type!==dd&&o.type!==cd},VU=function(o,e){switch(o){case 0:return gd(e);case 2:return jU(e);case 1:default:return hd(e)}},YU=function(o){switch(o){case 1:return"center";case 2:return"right";case 0:default:return"left"}},JU=["-apple-system","system-ui"],XU=function(o){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?o.filter(function(e){return JU.indexOf(e)===-1}):o},qU=function(o){Bo(e,o);function e(r,n){var a=o.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return wn(this,void 0,void 0,function(){var n,a;return gn(this,function(A){switch(A.label){case 0:return n=Gg(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,ZU(n)];case 1:return a=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Yr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(b2),ZU=function(o){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(o))})},e8=function(){function o(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return o.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,sc([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},o.prototype.getTime=function(){return Date.now()-this.start},o.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,sc([this.id,this.getTime()+"ms"],e))},o.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,sc([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},o.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,sc([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},o.instances={},o}(),t8=function(){function o(e,r){var n;this.windowBounds=r,this.instanceName="#"+o.instanceCount++,this.logger=new e8({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new wU(this,e)}return o.instanceCount=1,o}(),r8=function(o,e){return e===void 0&&(e={}),n8(o,e)};typeof window<"u"&&g2.setContext(window);var n8=function(o,e){return wn(void 0,void 0,void 0,function(){var r,n,a,A,c,p,d,m,g,y,b,R,C,Q,S,N,M,Ie,fe,F,ee,ae,ee,Re,se,Z,ue,pe,we,Pe,re,Ee,k,ge,_,G,E,D,ie,L;return gn(this,function(j){switch(j.label){case 0:if(!o||typeof o!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=o.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(Re=e.allowTaint)!==null&&Re!==void 0?Re:!1,imageTimeout:(se=e.imageTimeout)!==null&&se!==void 0?se:15e3,proxy:e.proxy,useCORS:(Z=e.useCORS)!==null&&Z!==void 0?Z:!1},A=Fg({logging:(ue=e.logging)!==null&&ue!==void 0?ue:!0,cache:e.cache},a),c={windowWidth:(pe=e.windowWidth)!==null&&pe!==void 0?pe:n.innerWidth,windowHeight:(we=e.windowHeight)!==null&&we!==void 0?we:n.innerHeight,scrollX:(Pe=e.scrollX)!==null&&Pe!==void 0?Pe:n.pageXOffset,scrollY:(re=e.scrollY)!==null&&re!==void 0?re:n.pageYOffset},p=new oi(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),d=new t8(A,p),m=(Ee=e.foreignObjectRendering)!==null&&Ee!==void 0?Ee:!1,g={allowTaint:(k=e.allowTaint)!==null&&k!==void 0?k:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:m,copyStyles:m},d.logger.debug("Starting document clone with size "+p.width+"x"+p.height+" scrolled to "+-p.left+","+-p.top),y=new Dy(d,o,g),b=y.clonedReferenceElement,b?[4,y.toIFrame(r,p)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return R=j.sent(),C=xf(b)||oU(b)?RE(b.ownerDocument):Od(d,b),Q=C.width,S=C.height,N=C.left,M=C.top,Ie=o8(d,b,e.backgroundColor),fe={canvas:e.canvas,backgroundColor:Ie,scale:(_=(ge=e.scale)!==null&&ge!==void 0?ge:n.devicePixelRatio)!==null&&_!==void 0?_:1,x:((G=e.x)!==null&&G!==void 0?G:0)+N,y:((E=e.y)!==null&&E!==void 0?E:0)+M,width:(D=e.width)!==null&&D!==void 0?D:Math.ceil(Q),height:(ie=e.height)!==null&&ie!==void 0?ie:Math.ceil(S)},m?(d.logger.debug("Document cloned, using foreign object rendering"),ee=new qU(d,fe),[4,ee.render(b)]):[3,3];case 2:return F=j.sent(),[3,5];case 3:return d.logger.debug("Document cloned, element located at "+N+","+M+" with size "+Q+"x"+S+" using computed rendering"),d.logger.debug("Starting DOM parsing"),ae=s2(d,b),Ie===ae.styles.backgroundColor&&(ae.styles.backgroundColor=ti.TRANSPARENT),d.logger.debug("Starting renderer for element at "+fe.x+","+fe.y+" with size "+fe.width+"x"+fe.height),ee=new GU(d,fe),[4,ee.render(ae)];case 4:F=j.sent(),j.label=5;case 5:return(!((L=e.removeContainer)!==null&&L!==void 0)||L)&&(Dy.destroy(R)||d.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),d.logger.debug("Finished rendering"),[2,F]}})})},o8=function(o,e,r){var n=e.ownerDocument,a=n.documentElement?TA(o,getComputedStyle(n.documentElement).backgroundColor):ti.TRANSPARENT,A=n.body?TA(o,getComputedStyle(n.body).backgroundColor):ti.TRANSPARENT,c=typeof r=="string"?TA(o,r):r===null?ti.TRANSPARENT:4294967295;return e===n.documentElement?Oi(a)?Oi(A)?c:A:a:c};const i8=({isDarkMode:o})=>t.jsxs("div",{style:{backgroundColor:o?"#374151":"#fff",borderRadius:"24px",padding:"28px",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",border:o?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)",marginBottom:"28px"},children:[t.jsx("div",{style:{height:"40px",width:"300px",background:o?"linear-gradient(90deg, #4b5563 0%, #6b7280 50%, #4b5563 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"12px",marginBottom:"24px"}}),[1,2,3,4].map(e=>t.jsx("div",{style:{height:"80px",background:o?"linear-gradient(90deg, #4b5563 0%, #6b7280 50%, #4b5563 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"12px",marginBottom:"16px"}},e)),t.jsx("div",{style:{display:"flex",gap:"24px",marginTop:"24px"},children:[1,2,3,4].map(e=>t.jsx("div",{style:{height:"24px",width:"100px",background:o?"linear-gradient(90deg, #4b5563 0%, #6b7280 50%, #4b5563 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"8px"}},e))})]}),lg=({isDarkMode:o})=>t.jsxs("div",{style:{backgroundColor:o?"#374151":"#fff",borderRadius:"20px",padding:"28px",textAlign:"center",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:o?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)"},children:[t.jsx("div",{style:{height:"48px",width:"80px",margin:"0 auto 16px",background:o?"linear-gradient(90deg, #4b5563 0%, #6b7280 50%, #4b5563 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"12px"}}),t.jsx("div",{style:{height:"20px",width:"120px",margin:"0 auto",background:o?"linear-gradient(90deg, #4b5563 0%, #6b7280 50%, #4b5563 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"8px"}})]}),cg=({isDarkMode:o})=>t.jsx("div",{style:{padding:"20px"},children:[1,2,3].map(e=>t.jsx("div",{style:{height:"60px",background:o?"linear-gradient(90deg, #4b5563 0%, #6b7280 50%, #4b5563 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"12px",marginBottom:"16px"}},e))}),s8=()=>{var Qs,si,el,Rs,Kt,Ra,Ma;const[o,e]=h.useState([]),[r,n]=h.useState([]),[a,A]=h.useState(!0),[c,p]=h.useState(null),[d,m]=h.useState(!0),[g,y]=h.useState(null),[b,R]=h.useState(null),[C,Q]=h.useState([]),S=h.useRef(null),[N,M]=h.useState(!1),[Ie,fe]=h.useState(!1),[F,ae]=h.useState(!1),[ee,Re]=h.useState("Master Plan"),[se,Z]=h.useState(!1),[ue,pe]=h.useState(null),[we,Pe]=h.useState([]),[re,Ee]=h.useState(!1),[k,ge]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[_,G]=h.useState(!1),[E,D]=h.useState(null),[ie,L]=h.useState([]),[j,de]=h.useState([]),[Oe,Ge]=h.useState(!1),[Ve,ke]=h.useState(""),[Be,nt]=h.useState("editor"),[yt,q]=h.useState(!1),[lt,ye]=h.useState(null),[ze,dt]=h.useState([]),[Ne,B]=h.useState([]),[U,Ae]=h.useState(!1),[Y,V]=h.useState(null),ve=async I=>{D(I),G(!0),Ge(!0);try{const te=await Te(`/plan/master/${I.id}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});let He=[];if(te.ok){const{team:Et}=await te.json();He=Et,L(Et),console.log(" Team members loaded:",Et)}const We=await Te("/user/list",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(We.ok){const Wt=(await We.json()).users||[],ct=He.map(Nt=>Nt.userId),st=Wt.filter(Nt=>!ct.includes(Nt.userId));de(st)}}catch(te){console.error("Failed to load team data:",te),alert("Failed to load team information")}finally{Ge(!1)}},me=async()=>{if(!Ve||!Be||!E){alert("Please select a user and permission level");return}try{const I=await Te(`/plan/master/${E.id}/permissions`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:parseInt(Ve),permissionLevel:Be})});if(I.ok)await ve(E),ke(""),nt("editor"),alert(" Team member added successfully!");else{const te=await I.json();alert(`Failed to add team member: ${te.error}`)}}catch(I){console.error("Failed to add team member:",I),alert("Failed to add team member")}},T=async(I,te)=>{if(E)try{(await Te(`/plan/master/${E.id}/permissions`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:I,permissionLevel:te})})).ok?(await ve(E),alert(" Permission updated successfully!")):alert("Failed to update permission")}catch(He){console.error("Failed to update permission:",He),alert("Failed to update permission")}},wt=async I=>{if(E&&confirm("Remove this team member? They will lose access to this plan."))try{(await Te(`/plan/master/${E.id}/permissions/${I}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})).ok?(await ve(E),alert(" Team member removed successfully!")):alert("Failed to remove team member")}catch(te){console.error("Failed to remove team member:",te),alert("Failed to remove team member")}},w=async(I,te,He)=>{ye({plan:I,milestoneName:te,milestoneId:He}),q(!0),Ae(!0);try{const We=await Te(`/plan/master/${I.id}/milestone/${He}/users`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});let Et=[];if(We.ok){const{users:ct}=await We.json();Et=ct,dt(ct)}const Wt=await Te(`/plan/master/${I.id}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Wt.ok){const{team:ct}=await Wt.json(),st=Et.map(Zt=>Zt.userId),Nt=ct.filter(Zt=>!st.includes(Zt.userId));B(Nt)}}catch(We){console.error("Failed to load milestone users:",We)}finally{Ae(!1)}},ce=async I=>{if(lt)try{(await Te(`/plan/master/${lt.plan.id}/milestone/${lt.milestoneId}/users`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userIds:[I]})})).ok&&await w(lt.plan,lt.milestoneName,lt.milestoneId)}catch(te){console.error("Failed to add user:",te),alert("Failed to add user to milestone")}},Ce=async I=>{if(lt&&confirm("Remove this user from the milestone?"))try{(await Te(`/plan/master/${lt.plan.id}/milestone/${lt.milestoneId}/users/${I}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})).ok&&await w(lt.plan,lt.milestoneName,lt.milestoneId)}catch(te){console.error("Failed to remove user:",te),alert("Failed to remove user from milestone")}},[H,P]=h.useState(!1),[z,xe]=h.useState(null),[Me,O]=h.useState(""),[Qt,tt]=h.useState(()=>{try{const I=localStorage.getItem("emailsSentToday"),te=localStorage.getItem("emailsSentDate"),He=new Date().toDateString();return te!==He?(localStorage.setItem("emailsSentDate",He),localStorage.removeItem("emailsSentToday"),[]):I?JSON.parse(I):[]}catch{return[]}}),[zt,ir]=h.useState(!1),[Yt,vr]=h.useState(null),[Tr,J]=h.useState(""),be=h.useRef(null),De=h.useRef(null),K=h.useRef(null),[qe,Ct]=h.useState({}),[Lt,Ut]=h.useState(!1),[Bt,X]=h.useState({}),[$,Ze]=h.useState("timeline"),[ft,ne]=h.useState("all"),Le=I=>{if(!I)return null;if(I instanceof Date)return I;if(typeof I=="number")return new Date(I);if(I=String(I).trim(),/^\d{4}-\d{2}-\d{2}/.test(I)){const[te,He,We]=I.split("T")[0].split("-");return new Date(Number(te),Number(He)-1,Number(We))}if(/^\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}$/.test(I)){const[te,He,We]=I.split(/[\/\-]/);return new Date(Number(We),Number(He)-1,Number(te))}return console.warn(" Unrecognized date format:",I),null},Fe=I=>{if(!I.fields)return null;const te=[];return Object.entries(I.fields).forEach(([He,We])=>{He.toLowerCase()!=="status"&&He.toLowerCase()!=="lead"&&He.toLowerCase()!=="budget"&&He.toLowerCase()!=="completion"&&te.push({name:He,status:We.status||We,endDate:We.endDate?Le(We.endDate):null})}),te.length===0?null:(te.sort((He,We)=>He.endDate?We.endDate?He.endDate-We.endDate:1:-1),te[te.length-1].status)},[rt,bt]=h.useState(0),[gt,Ot]=h.useState(!1),Dr=C.length===1,yr=Dr?C[0]:null,cr=Dr?[`Viewing project: ${yr}`,`${o.filter(I=>I.project===yr).length} plans in this project`,`${o.filter(I=>{if(I.project!==yr)return!1;const te=Fe(I);return te&&!te.toLowerCase().includes("complete")}).length} active plans`,`${o.filter(I=>{if(I.project!==yr)return!1;const te=Fe(I);return te&&te.toLowerCase().includes("complete")}).length} completed plans`]:["Overview of all master plans and milestones",`${o.length} total master plans`,`${o.filter(I=>{const te=Fe(I);return te&&!te.toLowerCase().includes("complete")}).length} plans in progress`,`${o.filter(I=>{const te=Fe(I);return te&&te.toLowerCase().includes("complete")}).length} plans completed`];h.useEffect(()=>{if(gt)return;const I=setInterval(()=>{bt(te=>(te+1)%cr.length)},5e3);return()=>clearInterval(I)},[cr.length,gt]),h.useEffect(()=>{if(!document.getElementById("fade-style")){const I=document.createElement("style");I.id="fade-style",I.innerHTML=`
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(2px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes tooltipFadeIn {
        from {
          opacity: 0;
          transform: translateY(-6px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .profile-tooltip-animated {
        animation: slideIn 0.2s ease-out;
      }

      @keyframes modalBackdropFadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      
      @keyframes modalContentSlideUp {
        from {
          opacity: 0;
          transform: translateY(30px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      .modal-backdrop-animated {
        animation: modalBackdropFadeIn 0.25s ease-out;
      }
      
      .modal-content-animated {
        animation: modalContentSlideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      }

      @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
      }
    `,document.head.appendChild(I)}},[]),h.useEffect(()=>{const I=document.getElementById("scrollbar-style");I&&I.remove();const te=document.createElement("style");return te.id="scrollbar-style",te.innerHTML=k?`
      /* Dark mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #1e293b;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #475569;
        border-radius: 10px;
        border: 2px solid #1e293b;
      }

      ::-webkit-scrollbar-thumb:hover {
        background-color: #64748b;
      }

      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #475569 #1e293b;
      }
    `:`
      /* Light mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #cbd5e1;
        border-radius: 10px;
        border: 2px solid #f1f5f9;
      }

      ::-webkit-scrollbar-thumb:hover {
        background-color: #94a3b8;
      }

      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #cbd5e1 #f1f5f9;
      }
    `,document.head.appendChild(te),()=>{te.remove()}},[k]),h.useEffect(()=>{(async()=>{try{console.log(" Fetching master plans from /plan/master..."),A(!0);const te=await Te("/plan/master",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" API Response status:",te.status),te.ok){const He=await te.json();console.log(" Master plans received:",He),console.log(" Total plans fetched:",He.length),e(He),n(He)}else{const He=await te.text();console.error(" Failed to fetch master plans:",te.status,He),console.error(" Unable to load master plans. Please ensure you are logged in."),e([]),n([])}}catch(te){console.error(" Error fetching master plans:",te),console.error(" Network error. Please check your connection and try again."),e([]),n([])}finally{A(!1)}})()},[]);const Po=async()=>{try{const I=await Te("/plan/locks/active",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(I.ok){const te=await I.json();console.log(" Active locks:",te.locks);const He={};te.locks.forEach(We=>{He[We.planId]=We}),Ct(He)}}catch(I){console.error(" Failed to fetch locks:",I)}},Wi=async()=>{if(!(!c||o.length===0))try{console.log(" Fetching plan permissions..."),console.log("MasterPlans available:",o);const I={};for(const te of o)try{const He=await Te(`/plan/master/${te.id}/permission`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(He.ok){const We=await He.json();I[te.id]=We.permission||"viewer",console.log(`   Plan ${te.id}: ${I[te.id]}`)}else console.warn(`   Plan ${te.id}: Permission endpoint returned ${He.status}, using fallback`),I[te.id]="viewer"}catch(He){console.warn(`   Plan ${te.id}: Permission fetch failed, using fallback`,He.message),I[te.id]="viewer"}X(I),console.log(" Permissions loaded:",I),Object.keys(I).length===0&&console.log(" No permissions loaded - using ownership-based access control")}catch(I){console.error(" Failed to fetch permissions:",I),console.log(" Falling back to ownership-based access control")}};h.useEffect(()=>{(async()=>{try{console.log(" Fetching user data from /user/profile...");const te=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" User API Response status:",te.status),te.ok){const He=await te.json();console.log(" User data received:",He),p(He)}else{const He=await te.text();console.error(" Failed to fetch user data:",te.status,He),console.error(" Unable to load user profile. Please ensure you are logged in."),p(null)}}catch(te){console.error(" Error fetching user data:",te),console.error(" Network error. Please check your connection and try again."),p(null)}finally{m(!1)}})()},[]),h.useEffect(()=>{c&&o.length>0&&Wi()},[c,o]),h.useEffect(()=>{var Wt;if(!o.length||!Object.keys(Bt).length)return;const I=new URLSearchParams(window.location.search),te=I.get("planId"),He=I.get("milestone");if(!te||!He)return;const We=o.find(ct=>String(ct.id)===String(te));if(!We||Bt[We.id]!=="owner")return;const Et=(Wt=We.fields)==null?void 0:Wt[He];Et&&(Vi(We,He,Et.status),window.history.replaceState({},document.title,window.location.pathname))},[o,Bt]),h.useEffect(()=>{const I=async()=>{if(!c||o.length===0)return;const He=new Date;He.setHours(0,0,0,0);for(const We of o){const Et=Bt[We.id];if(Et!=="owner"&&Et!=="editor")continue;let Wt=!1;const ct={...We.fields};if(We.fields&&Object.entries(We.fields).forEach(([st,Nt])=>{st.toLowerCase()==="status"||st.toLowerCase()==="lead"||st.toLowerCase()==="budget"||st.toLowerCase()==="completion"||Nt.endDate&&Le(Nt.endDate)<He&&Nt.status!=="Completed"&&Nt.status!=="Delayed"&&(console.log(` Auto-marking ${st} as Delayed (deadline passed)`),ct[st]={...Nt,status:"Delayed"},Wt=!0)}),Wt)try{if((await Te(`/plan/master/${We.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:We.project,startDate:We.startDate,endDate:We.endDate,fields:ct})})).ok){console.log(` Auto-updated plan ${We.project} with Delayed status`);const Nt=o.map(Zt=>Zt.id===We.id?{...Zt,fields:ct}:Zt);e(Nt)}}catch(st){console.error("Failed to auto-update delayed status:",st)}}};I();const te=setInterval(I,6e4*60);return()=>clearInterval(te)},[c,o,Bt]),h.useEffect(()=>{const I=async()=>{if(!c||o.length===0)return;const He=new Date,We=He.getHours(),Et=He.getMinutes();if(We!==8||Et<30||Et>31)return;const Wt=new Date;Wt.setHours(0,0,0,0);for(const ct of o){if(Bt[ct.id]!=="owner")continue;const Nt=`${ct.id}-${Wt.toDateString()}`;if(Qt.includes(Nt))continue;const Zt=[];ct.fields&&Object.entries(ct.fields).forEach(([Rt,dr])=>{Rt.toLowerCase()!=="status"&&Rt.toLowerCase()!=="lead"&&Rt.toLowerCase()!=="budget"&&Rt.toLowerCase()!=="completion"&&Zt.push({name:Rt,status:dr})});const qr=new Date(ct.endDate);qr.setHours(0,0,0,0);const Zr=qr.getTime()===Wt.getTime(),mt=Zt.some(Rt=>{var dr;return!((dr=Rt.status)!=null&&dr.toLowerCase().includes("complete"))});if(Zr&&mt)try{console.log(` Sending deadline reminder for plan: ${ct.project}`);const Rt=await Te("/notifications/milestone-deadline",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:ct.id,projectName:ct.project,milestones:Zt,dueDate:ct.endDate,userEmail:c.email,userName:`${c.firstName} ${c.lastName}`})});if(Rt.ok){console.log(` Email sent successfully for ${ct.project}`);const dr=[...Qt,Nt];tt(dr);try{localStorage.setItem("emailsSentToday",JSON.stringify(dr))}catch(Wn){console.error("Failed to save email sent status:",Wn)}}else console.error(` Failed to send email for ${ct.project}:`,await Rt.text())}catch(Rt){console.error(` Error sending email for ${ct.project}:`,Rt)}}};I();const te=setInterval(I,6e4);return()=>clearInterval(te)},[c,o,Qt,Bt]),h.useEffect(()=>{const I=async()=>{if(!c||o.length===0||Object.keys(Bt).length===0)return;const He=new Date;He.setHours(0,0,0,0);const We=new Date(He);We.setDate(We.getDate()+7);for(const Et of o){const Wt=Bt[Et.id];Wt!=="owner"&&Wt!=="editor"||Et.fields&&Object.entries(Et.fields).forEach(async([ct,st])=>{var Zt;if(ct.toLowerCase()==="status"||ct.toLowerCase()==="lead"||ct.toLowerCase()==="budget"||ct.toLowerCase()==="completion"||!st.endDate)return;const Nt=Le(st.endDate);if(Nt.setHours(0,0,0,0),Nt.getTime()===We.getTime()){if((Zt=st.status)!=null&&Zt.toLowerCase().includes("complete"))return;const qr=`week-warning-${Et.id}-${ct}-${Nt.toDateString()}`,Zr=JSON.parse(localStorage.getItem("sentWeekWarnings")||"[]");if(Zr.includes(qr)){console.log(` Week warning already sent for ${ct}`);return}try{console.log(` Sending 1-week warning for ${ct} in ${Et.project}`),(await Te("/plan/master/milestone-week-warning",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:Et.id,projectName:Et.project,milestoneName:ct,dueDate:st.endDate,userEmail:c.email,userName:`${c.firstName} ${c.lastName}`})})).ok&&(console.log(` Week warning email sent for ${ct}`),Zr.push(qr),localStorage.setItem("sentWeekWarnings",JSON.stringify(Zr)))}catch(mt){console.error(`Failed to send week warning for ${ct}:`,mt)}}})}};I();const te=setInterval(I,6e4*60);return()=>clearInterval(te)},[c,o,Bt]),h.useEffect(()=>{let I=o;if(C.length>0&&(I=I.filter(te=>C.includes(te.project))),Tr.trim()){const te=Tr.toLowerCase();I=I.filter(He=>{var We,Et;return He.project.toLowerCase().includes(te)||((We=He.fields)==null?void 0:We.lead)&&He.fields.lead.toLowerCase().includes(te)||((Et=He.fields)==null?void 0:Et.status)&&He.fields.status.toLowerCase().includes(te)})}I=[...I].sort((te,He)=>{const We=Le(te.startDate),Et=Le(He.startDate);return We?Et?We-Et:-1:1}),n(I)},[C,Tr,o]),h.useEffect(()=>{if(console.log(" Daily reminder useEffect triggered"),!c){console.log(" userData not ready yet.");return}if(!Array.isArray(o)||o.length===0){console.log(" masterPlans not ready yet.");return}if(Object.keys(Bt).length===0)return;const I=new Date().toISOString().split("T")[0];localStorage.getItem("deadlineEmailLastRun")!==I&&(console.log(" Running Daily Milestone Deadline Check"),o.forEach(He=>{const We=Bt[He.id];if(!["owner","editor"].includes(We))return;const Et=[];He.fields&&Object.entries(He.fields).forEach(([ct,st])=>{ct.toLowerCase()!=="status"&&ct.toLowerCase()!=="lead"&&ct.toLowerCase()!=="budget"&&ct.toLowerCase()!=="completion"&&Et.push({name:ct,status:st.status,startDate:st.startDate,endDate:st.endDate})}),Et.sort((ct,st)=>ct.startDate?st.startDate?ct.startDate-st.startDate:-1:1);const Wt=new Date().toDateString();Et.forEach(ct=>{var Nt;!ct.endDate||new Date(ct.endDate).toDateString()!==Wt||(Nt=ct.status)!=null&&Nt.toLowerCase().includes("complete")||(console.log(` Sending reminder for milestone "${ct.name}" in project "${He.project}"`),Te("/plan/master/milestone-deadline",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:He.id,projectName:He.project,milestones:Et,dueDate:ct.endDate,userEmail:c.email,userName:`${c.firstName} ${c.lastName}`})}))})}),localStorage.setItem("deadlineEmailLastRun",I))},[c,o,Bt]),h.useEffect(()=>{if(se||H||zt||_||yt){const te=window.scrollY;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${te}px`,document.body.style.width="100%",()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,te)}}},[se,H,zt,_,yt]),h.useEffect(()=>{const I=te=>{K.current&&!K.current.contains(te.target)&&M(!1)};return N&&document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[N]);const No=[...new Set(o.map(I=>I.project))],sr=((Qs=c==null?void 0:c.assignedProjects)==null?void 0:Qs.filter(I=>I.projectType==="Project").map(I=>I.name))||[],ii=new Set(sr),Qa=No.filter(I=>ii.has(I)),XA=No.filter(I=>!ii.has(I)),ao={assigned:Qa,other:XA,all:No},qA=I=>{Q(te=>te.includes(I)?te.filter(He=>He!==I):[...te,I])};h.useEffect(()=>{if(o.length>0){Po();const I=setInterval(()=>{Po()},1e4);return()=>clearInterval(I)}},[o]);const ks=async(I,te)=>{Ee(!0),Z(!0),pe({id:I,name:te});try{console.log(` Fetching history for plan ${I}...`);const He=await Te(`/plan/master/${I}/history`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(He.ok){const We=await He.json();console.log(" History loaded:",We.history),Pe(We.history||[])}else console.error(" Failed to fetch history:",He.status),Pe([]),alert("Failed to load history. Please try again.")}catch(He){console.error(" Error fetching history:",He),Pe([]),alert("Network error. Please check your connection.")}finally{Ee(!1)}},js=I=>({status_changed:" Status Changed",dates_changed:" Dates Changed",milestone_added:" Milestone Added",milestone_deleted:" Milestone Deleted",project_renamed:" Project Renamed",project_dates_changed:" Project Timeline Changed"})[I]||I,Fr=I=>{const te=(I==null?void 0:I.toLowerCase())||"";return te.includes("complete")?"#3b82f6":te.includes("on track")?"#10b981":te.includes("at risk")?"#f59e0b":te.includes("delay")?"#ef4444":"#94a3b8"},Ts={all:"All Changes",status_changed:"Status Changed",dates_changed:"Dates Changed",milestone_added:"Milestone Added",milestone_deleted:"Milestone Deleted",project_renamed:"Project Renamed",project_dates_changed:"Project Timeline Changed"},Mn=I=>({status_changed:"#3b82f6",dates_changed:"#f59e0b",milestone_added:"#10b981",milestone_deleted:"#ef4444",project_renamed:"#8b5cf6",project_dates_changed:"#f59e0b"})[I]||"#94a3b8",Xd=I=>{console.log(` AdminViewPlan - Navigating to ${I} tab`),Re(I),I==="Individual Plan"?window.location.href="/adminindividualplan":I==="Approvals"&&(window.location.href="/adminapprovals")},qd=()=>{console.log(" AdminViewPlan - Creating new master plan"),window.location.href="/adminaddplan"},ZA=async I=>{const te=Bt[I.id];if(te===void 0){if(I.createdBy!==(c==null?void 0:c.id)){alert(" You can only edit plans that you created.");return}}else{if(te==="viewer"){alert(" You have view-only access to this plan. Contact the owner for edit permissions.");return}if(!te){alert(" You do not have permission to edit this plan.");return}}console.log(" AdminViewPlan - Editing plan:",I.project);const He=qe[I.id];if(He&&He.userId!==(c==null?void 0:c.id)){const We=Math.floor((new Date-new Date(He.lastActivity))/6e4);if(!window.confirm(` This plan is currently being edited by ${He.lockedBy}.

Last activity: ${We} minute(s) ago
Lock expires in: ${He.minutesRemaining} minute(s)

Do you want to take over editing? This will disconnect them.`))return;try{if(!(await Te(`/plan/lock/${I.id}/takeover`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({force:!0})})).ok){alert(" Failed to take over lock. Please try again.");return}console.log(" Lock takeover successful")}catch(Wt){console.error(" Takeover error:",Wt),alert(" Failed to take over lock. Please try again.");return}}sessionStorage.setItem("editingPlanId",I.id),sessionStorage.setItem("editingPlanData",JSON.stringify(I)),window.location.href="/admineditplan"},Gi=I=>{const te=Bt[I.id];if(te===void 0){if(I.createdBy!==(c==null?void 0:c.id)){alert(" You can only delete plans that you created.");return}}else if(te!=="owner"){alert(" Only the plan owner can delete this plan.");return}vr(I),ir(!0)},Fs=async()=>{if(Yt)try{console.log(" Deleting plan:",Yt.project,"ID:",Yt.id);const I=await Te(`/plan/master/${Yt.id}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" Delete response status:",I.status),I.ok)console.log(" Plan deleted successfully"),e(o.filter(te=>te.id!==Yt.id)),alert(`Plan "${Yt.project}" has been deleted successfully!`);else{const te=await I.text();console.error(" Failed to delete plan:",I.status,te),alert("Failed to delete plan. Please try again.")}}catch(I){console.error(" Error deleting plan:",I),alert("Failed to delete plan. Please check your connection and try again.")}finally{ir(!1),vr(null)}},$i=()=>{ir(!1),vr(null)},Vi=(I,te,He)=>{if(Bt[I.id]!=="owner"){alert(" Only the plan owner can change milestone status.");return}xe({plan:I,milestoneName:te,currentStatus:He}),O(He),P(!0)},Zd=async()=>{if(!z||!Me)return;const{plan:I,milestoneName:te}=z,He=I.fields[te];if(He!=null&&He.endDate){const We=Le(He.endDate),Et=new Date;if(Et.setHours(0,0,0,0),We<Et&&!["Completed","Delayed"].includes(Me)){alert(" After the end date, a milestone can only be marked as Delayed or Completed.");return}}try{console.log(` Updating status for ${te} to ${Me}`);const We=await Te(`/plan/master/${I.id}/status`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({milestoneName:te,newStatus:Me})});if(We.ok){console.log(" Status updated successfully"),alert("Status updated successfully!");const Et={...I.fields,[te]:{...I.fields[te],status:Me}},Wt=o.map(ct=>ct.id===I.id?{...ct,fields:Et}:ct);e(Wt),n(Wt.filter(ct=>C.length===0||C.includes(ct.project)))}else console.error("Failed to update status:",await We.text()),alert("Failed to update status. Please try again.")}catch(We){console.error("Error updating status:",We),alert("Network error. Please check your connection.")}finally{P(!1),xe(null),O("")}},eu=()=>{ge(!k),fe(!1)},Us=I=>{const te=Bt[I];if(!te)return null;const We={owner:{bg:"#3b82f6",icon:ws},editor:{bg:"#10b981",icon:ms},viewer:{bg:"#64748b",icon:ri}}[te];if(!We)return null;const Et=We.icon;return t.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",backgroundColor:We.bg+"20",border:`1px solid ${We.bg}40`,fontSize:"11px",fontWeight:"600",color:We.bg,textTransform:"uppercase",width:"fit-content",alignSelf:"flex-start"},children:[t.jsx(Et,{size:12}),te]})},Qe={page:{minHeight:"100vh",padding:"30px",background:k?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease",overflowX:"hidden"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"32px"},header:{fontSize:"28px",fontWeight:"700",color:k?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},topButton:I=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:I?"rgba(59,130,246,0.1)":k?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:I?"#3b82f6":k?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s ease",boxShadow:I?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:I?"translateY(-2px) scale(1.05)":"translateY(0)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:k?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:k?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:k?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:k?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userName:{fontSize:"14px",fontWeight:"600",color:k?"#e2e8f0":"#1e293b",marginBottom:"2px"},userRole:{fontSize:"12px",color:k?"#94a3b8":"#64748b"},userStats:{borderTop:k?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between"},selectedUserCard:{backgroundColor:k?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"12px 16px",marginBottom:"8px",border:k?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b"},tooltipStatLabel:{fontSize:"10px",color:k?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px",width:"100%"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:k?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:k?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(I,te)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",border:"none",backgroundColor:I?"#3b82f6":te?k?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:I?"#fff":k?"#e2e8f0":"#64748b",boxShadow:I?"0 4px 12px rgba(59,130,246,0.3)":"none"}),createButton:I=>({backgroundColor:I?"#f59e0b":"#fbbf24",color:"#fff",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",transform:I?"translateY(-2px)":"translateY(0)",boxShadow:I?"0 8px 25px rgba(251,191,36,0.3)":"0 4px 12px rgba(251,191,36,0.2)"}),searchInput:{width:"300px",padding:"12px 16px",borderRadius:"12px",border:k?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:k?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:k?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",backdropFilter:"blur(10px)"},filterContainer:{display:"flex",gap:"12px",alignItems:"center",marginBottom:"28px"},projectDropdown:{position:"absolute",top:"100%",left:0,backgroundColor:k?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",border:k?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",padding:"12px 0",minWidth:"250px",zIndex:1e3,marginTop:"8px",animation:"slideIn 0.2s ease-out",transformOrigin:"top left"},dropdownItem:I=>({backgroundColor:I?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease",borderRadius:"8px",margin:"0 8px",color:k?"#e2e8f0":"#374151",transform:I?"translateX(4px)":"translateX(0)",borderLeft:I?"3px solid #3b82f6":"3px solid transparent"}),checkboxItem:I=>({display:"flex",alignItems:"center",gap:"12px",padding:"12px",cursor:"pointer",borderRadius:"8px",transition:"all 0.2s ease",backgroundColor:I?"rgba(59,130,246,0.1)":"transparent"}),checkbox:I=>({width:"18px",height:"18px",borderRadius:"4px",border:I?"2px solid #3b82f6":k?"2px solid #64748b":"2px solid #cbd5e1",backgroundColor:I?"#3b82f6":"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:"700",transition:"all 0.2s ease"}),checkboxLabel:{fontSize:"14px",fontWeight:"500",color:k?"#e2e8f0":"#374151"},todayLine:{position:"absolute",top:"-50px",bottom:"0px",width:"2px",backgroundImage:"linear-gradient(to bottom, #ef4444 60%, transparent 60%)",backgroundSize:"2px 16px",backgroundRepeat:"repeat-y",zIndex:100,pointerEvents:"none"},todayLabel:{position:"absolute",top:"-35px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#ef4444",color:"#fff",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"700",whiteSpace:"nowrap",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:101},emptyState:{textAlign:"center",padding:"60px 20px",color:k?"#94a3b8":"#64748b",fontSize:"16px"},loadingState:{textAlign:"center",padding:"60px 20px",color:k?"#94a3b8":"#64748b",fontSize:"16px"},statsContainer:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"28px"},statCard:I=>({backgroundColor:k?"#374151":"#fff",borderRadius:"20px",padding:"28px",textAlign:"center",boxShadow:I?"0 20px 40px rgba(0,0,0,0.15)":"0 8px 25px rgba(0,0,0,0.08)",border:k?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",transition:"all 0.3s ease",transform:I?"translateY(-8px) scale(1.02)":"translateY(0)",cursor:"pointer",backdropFilter:"blur(10px)"}),statNumber:{fontSize:"36px",fontWeight:"800",color:k?"#e2e8f0":"#1e293b",marginBottom:"8px"},statLabel:{fontSize:"14px",color:k?"#94a3b8":"#64748b",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},deleteConfirmation:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(4px)"},deleteModal:{backgroundColor:k?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",border:k?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",maxWidth:"400px",width:"90%",textAlign:"center"},deleteModalTitle:{fontSize:"20px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b",marginBottom:"12px"},deleteModalText:{fontSize:"14px",color:k?"#94a3b8":"#64748b",marginBottom:"24px",lineHeight:"1.5"},deleteModalActions:{display:"flex",gap:"12px",justifyContent:"center"},modalButton:(I,te)=>({padding:"12px 24px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:te==="danger"?I?"#dc2626":"#ef4444":I?k?"#4b5563":"#e5e7eb":k?"#6b7280":"#f3f4f6",color:te==="danger"?"#fff":k?"#e2e8f0":"#374151",transform:I?"translateY(-1px)":"translateY(0)",boxShadow:I?"0 4px 12px rgba(0,0,0,0.15)":"none"}),statusModal:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(4px)",animation:"modalBackdropFadeIn 0.25s ease-out"},statusModalContent:{backgroundColor:k?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",border:k?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",maxWidth:"550px",width:"90%",animation:"modalContentSlideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)"},statusModalTitle:{fontSize:"20px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b",marginBottom:"8px"},statusModalSubtitle:{fontSize:"14px",color:k?"#94a3b8":"#64748b",marginBottom:"24px"},statusSelect:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:k?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:k?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:k?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",cursor:"pointer",marginBottom:"24px"},ganttContainer:{marginTop:"40px",overflowX:"auto",overflowY:"visible",position:"relative",paddingTop:"60px",paddingBottom:"30px",minHeight:"300px",maxWidth:"100%"},ganttHeader:{display:"grid",gridTemplateColumns:"200px repeat(auto-fit, minmax(80px, 1fr))",gap:"1px",marginBottom:"16px",backgroundColor:k?"#4b5563":"#f8fafc",borderRadius:"12px",padding:"16px",transition:"all 0.3s ease"},monthHeader:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:k?"#e2e8f0":"#475569",padding:"8px 4px",transition:"all 0.3s ease",borderBottom:k?"1px solid #4b5563":"1px solid #e2e8f0"},taskHeader:{fontSize:"12px",fontWeight:"600",color:k?"#e2e8f0":"#475569",padding:"8px 12px",transition:"all 0.3s ease"},ganttRow:{display:"grid",gridTemplateColumns:"200px repeat(auto-fit, minmax(80px, 1fr))",gap:"1px",marginBottom:"8px",alignItems:"center"},taskName:{fontSize:"14px",fontWeight:"500",color:k?"#e2e8f0":"#374151",padding:"12px",backgroundColor:k?"#4b5563":"#f8fafc",borderRadius:"8px",transition:"all 0.3s ease"},ganttCell:{height:"40px",position:"relative",transition:"all 0.3s ease"},ganttBar:(I,te,He,We)=>({position:"absolute",left:"0%",width:"100%",height:"24px",top:"8px",backgroundColor:I,borderRadius:"6px",opacity:We!=null&&We.toLowerCase().includes("complete")?.8:1,border:We!=null&&We.toLowerCase().includes("delay")?"2px solid #ef4444":"none",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"14px",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",transition:"all 0.3s ease"}),monthBoxOverlay:{position:"absolute",top:0,bottom:0,left:0,right:0,borderRight:k?"2px solid rgba(100,116,139,0.8)":"2px solid rgba(148,163,184,0.8)",borderLeft:"none",borderTop:"none",borderBottom:"none",pointerEvents:"none",zIndex:1},legend:{display:"flex",gap:"24px",marginTop:"20px",padding:"20px",backgroundColor:k?"#4b5563":"#f8fafc",borderRadius:"12px",transition:"all 0.3s ease"},legendItem:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",color:k?"#e2e8f0":"#475569",transition:"all 0.3s ease"},legendColor:I=>({width:"16px",height:"16px",borderRadius:"4px",backgroundColor:I,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}),projectTitle:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",position:"relative"},projectTitleLeft:{display:"flex",alignItems:"center",gap:"12px",position:"relative"},projectTitleRight:{display:"flex",alignItems:"center",gap:"8px"},projectName:{fontSize:"24px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b",transition:"all 0.3s ease",display:"flex",flexDirection:"column",gap:"4px"},projectMeta:{display:"flex",gap:"24px",fontSize:"14px",color:k?"#94a3b8":"#64748b",flexWrap:"wrap",marginBottom:"16px",transition:"all 0.3s ease"},card:I=>({backgroundColor:k?"#374151":"#fff",borderRadius:"20px",padding:"28px",marginBottom:"28px",boxShadow:I?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:I?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",border:k?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"visible"}),cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.03) 0%, transparent 70%)",opacity:0,transition:"opacity 0.4s ease",pointerEvents:"none"},actionButton:(I,te,He=!1)=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:He?k?"rgba(51,65,85,0.3)":"rgba(226,232,240,0.3)":I?te==="edit"?"rgba(59,130,246,0.1)":te==="delete"?"rgba(239,68,68,0.1)":te==="history"?"rgba(139,92,246,0.1)":"rgba(59,130,246,0.1)":k?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",color:He?k?"#475569":"#94a3b8":I?te==="edit"?"#3b82f6":te==="delete"?"#ef4444":te==="history"?"#8b5cf6":"#3b82f6":k?"#94a3b8":"#64748b",cursor:He?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",transform:I&&!He?"scale(1.1)":"scale(1)",opacity:He?.5:1}),lockBadge:(I,te)=>({position:"absolute",top:"12px",right:"12px",padding:"6px 12px",borderRadius:"8px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",backgroundColor:te?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",color:te?"#10b981":"#ef4444",border:`1px solid ${te?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,zIndex:10}),changeStatusButton:I=>({padding:"6px 12px",borderRadius:"8px",border:"none",backgroundColor:I?"rgba(16,185,129,0.15)":"rgba(16,185,129,0.1)",color:I?"#059669":"#10b981",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"600",gap:"4px",transform:I?"scale(1.05)":"scale(1)",pointerEvents:"auto"}),statusBadge:I=>{const He={Completed:{bg:"#3b82f620",text:"#3b82f6"},"On Track":{bg:"#10b98120",text:"#10b981"},"At Risk":{bg:"#f59e0b20",text:"#f59e0b"},Delayed:{bg:"#ef444420",text:"#ef4444"},"In Progress":{bg:"#10b98120",text:"#10b981"},Pending:{bg:"#10b98120",text:"#10b981"},Planning:{bg:"#10b98120",text:"#10b981"},"On Hold":{bg:"#ef444420",text:"#ef4444"},Ongoing:{bg:"#10b98120",text:"#10b981"}}[I]||{bg:"#94a3b820",text:"#94a3b8"};return{display:"inline-block",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",backgroundColor:He.bg,color:He.text}},rulerTick:{position:"absolute",bottom:0,width:"1px",height:"8px",backgroundColor:k?"#64748b":"#cbd5e1"},rulerMajorTick:{position:"absolute",bottom:0,width:"2px",height:"12px",backgroundColor:"#94a3b8"},historyModal:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(8px)",animation:"modalBackdropFadeIn 0.25s ease-out"},historyModalContent:{backgroundColor:k?"#374151":"#fff",borderRadius:"24px",padding:"32px",boxShadow:"0 25px 50px rgba(0,0,0,0.3)",border:k?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",maxWidth:"800px",width:"90%",maxHeight:"80vh",display:"flex",flexDirection:"column",animation:"modalContentSlideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)"},historyModalHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",paddingBottom:"16px",borderBottom:k?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)"},historyModalTitle:{fontSize:"24px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b",display:"flex",alignItems:"center",gap:"12px"},historyModalSubtitle:{fontSize:"14px",color:k?"#94a3b8":"#64748b",marginTop:"4px"},historyList:{flex:1,overflowY:"auto",marginBottom:"20px"},historyItem:I=>({backgroundColor:I?k?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":k?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px",border:k?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",transition:"all 0.2s ease",transform:I?"translateX(4px)":"translateX(0)"}),historyItemHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},historyChangeType:I=>({display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",backgroundColor:I+"20",color:I,border:`1px solid ${I}40`}),historyTimestamp:{fontSize:"12px",color:k?"#94a3b8":"#64748b",fontWeight:"500"},historyMilestoneName:{fontSize:"16px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b",marginBottom:"8px"},historyChangeDetails:{display:"flex",gap:"12px",alignItems:"center",fontSize:"14px",color:k?"#cbd5e1":"#475569"},historyValue:I=>({padding:"6px 12px",borderRadius:"8px",backgroundColor:I?k?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.05)":k?"rgba(16,185,129,0.1)":"rgba(16,185,129,0.05)",border:I?"1px solid rgba(239,68,68,0.3)":"1px solid rgba(16,185,129,0.3)",color:I?"#ef4444":"#10b981",fontWeight:"600",fontSize:"13px"}),historyChangedBy:{fontSize:"12px",color:k?"#94a3b8":"#64748b",marginTop:"8px",display:"flex",alignItems:"center",gap:"6px"},historyEmptyState:{textAlign:"center",padding:"60px 20px",color:k?"#94a3b8":"#64748b",fontSize:"16px"},historyLoadingState:{textAlign:"center",padding:"60px 20px",color:k?"#94a3b8":"#64748b",fontSize:"16px"},closeHistoryButton:I=>({padding:"12px 24px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:I?"#3b82f6":k?"#4b5563":"#e5e7eb",color:I?"#fff":k?"#e2e8f0":"#374151",transform:I?"translateY(-1px)":"translateY(0)",boxShadow:I?"0 4px 12px rgba(59,130,246,0.3)":"none"})};return t.jsxs("div",{style:Qe.page,children:[t.jsxs("div",{style:Qe.headerRow,children:[t.jsx("h1",{style:Qe.header,children:"Plan"}),t.jsxs("div",{style:Qe.headerRight,children:[t.jsxs("button",{style:Qe.topButton(b==="alerts"),onMouseEnter:()=>R("alerts"),onMouseLeave:()=>R(null),onClick:()=>window.location.href="/adminalerts",children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:Qe.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:Qe.topButton(b==="profile"),onMouseEnter:()=>{R("profile"),fe(!0)},onMouseLeave:()=>R(null),onClick:()=>window.location.href="/adminprofile",children:t.jsx(qt,{size:20})}),Ie&&t.jsxs("div",{className:"profile-tooltip-animated",style:Qe.profileTooltip,onMouseEnter:()=>fe(!0),onMouseLeave:()=>fe(!1),children:[t.jsx("div",{style:Qe.tooltipArrow}),t.jsxs("div",{style:Qe.userInfo,children:[t.jsx("div",{style:Qe.avatar,children:c&&`${((si=c.firstName)==null?void 0:si[0])||""}${((el=c.lastName)==null?void 0:el[0])||""}`||"U"}),t.jsxs("div",{children:[t.jsx("div",{style:Qe.userName,children:c?`${c.firstName} ${c.lastName}`:"Loading..."}),t.jsx("div",{style:Qe.userRole,children:c?`${c.role}  ${c.department}`:"Loading..."})]})]}),t.jsxs("div",{style:Qe.userStats,children:[t.jsxs("div",{style:Qe.tooltipStatItem,children:[t.jsx("div",{style:Qe.tooltipStatNumber,children:o.length}),t.jsx("div",{style:Qe.tooltipStatLabel,children:"Plans"})]}),t.jsxs("div",{style:Qe.tooltipStatItem,children:[t.jsx("div",{style:Qe.tooltipStatNumber,children:o.filter(I=>{const te=typeof I.fields=="string"?JSON.parse(I.fields):I.fields;if(!te)return!1;const He=Object.values(te).filter(We=>typeof We=="object"&&(We==null?void 0:We.status));return He.length>0&&He.some(We=>We.status!=="Completed")}).length}),t.jsx("div",{style:Qe.tooltipStatLabel,children:"In Progress"})]}),t.jsxs("div",{style:Qe.tooltipStatItem,children:[t.jsx("div",{style:Qe.tooltipStatNumber,children:o.filter(I=>{const te=typeof I.fields=="string"?JSON.parse(I.fields):I.fields;if(!te)return!1;const He=Object.values(te).filter(We=>typeof We=="object"&&(We==null?void 0:We.status));return He.length>0&&He.every(We=>We.status==="Completed")}).length}),t.jsx("div",{style:Qe.tooltipStatLabel,children:"Completed"})]})]}),t.jsx("button",{style:Qe.themeToggle,onClick:eu,children:k?" Light Mode":" Dark Mode"})]})]})]})]}),t.jsx("div",{style:Qe.tabContainer,children:["Master Plan","Individual Plan","Approvals"].map(I=>t.jsx("button",{style:Qe.tab(ee===I,g===`tab-${I}`),onMouseEnter:()=>y(`tab-${I}`),onMouseLeave:()=>y(null),onClick:()=>Xd(I),children:I},I))}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",color:k?"#e2e8f0":"#1e293b",margin:0},children:"Master Plans Timeline"}),t.jsx("div",{style:{marginTop:"6px",fontSize:"13px",fontWeight:"500",color:k?"#94a3b8":"#64748b",animation:"fadeIn 0.4s ease"},onMouseEnter:()=>Ot(!0),onMouseLeave:()=>Ot(!1),children:cr[rt]},rt)]}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[C.length===1&&r.length===1&&t.jsxs("button",{style:{...Qe.createButton(g==="history"),backgroundColor:g==="history"?"#8b5cf6":"#a78bfa"},onMouseEnter:()=>y("history"),onMouseLeave:()=>y(null),onClick:()=>ks(r[0].id,r[0].project),children:[t.jsx(ql,{size:16}),"View History"]}),t.jsxs("button",{style:Qe.createButton(g==="download"),onMouseEnter:()=>y("download"),onMouseLeave:()=>y(null),onClick:async()=>{try{const I=De.current;if(!I)return alert("Nothing to download!");const te=await r8(I,{backgroundColor:k?"#1e293b":"#ffffff",scale:2,useCORS:!0}),He=document.createElement("a");He.download=`MasterPlan_Gantt_${new Date().toISOString().split("T")[0]}.png`,He.href=te.toDataURL("image/png"),He.click()}catch(I){console.error(" Error saving Gantt chart:",I),alert("Failed to generate PNG. Try again.")}},children:[t.jsx(wo,{size:16}),"Download PNG"]}),t.jsxs("button",{style:Qe.createButton(g==="create"),onMouseEnter:()=>y("create"),onMouseLeave:()=>y(null),onClick:qd,children:[t.jsx(Sr,{size:16}),"Create a Master Plan"]})]})]}),t.jsxs("div",{style:Qe.filterContainer,children:[t.jsx("input",{type:"text",placeholder:"Search by project, lead, or status...",value:Tr,onChange:I=>J(I.target.value),style:Qe.searchInput}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 16px",borderRadius:"12px",backgroundColor:k?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",border:k?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",cursor:"pointer",backdropFilter:"blur(10px)"},onClick:()=>ae(!F),children:[t.jsx("div",{style:Qe.checkbox(F),children:F&&""}),t.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:k?"#e2e8f0":"#374151"},children:"Show Month Grid"})]}),C.length===1&&r.length===1&&t.jsxs("div",{style:{display:"flex",gap:"4px",padding:"4px",backgroundColor:k?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",border:k?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",borderRadius:"12px",backdropFilter:"blur(10px)"},children:[t.jsx("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:$==="timeline"?"#3b82f6":"transparent",color:$==="timeline"?"#fff":k?"#e2e8f0":"#64748b",boxShadow:$==="timeline"?"0 2px 8px rgba(59,130,246,0.3)":"none"},onClick:()=>Ze("timeline"),children:"Timeline"}),t.jsx("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:$==="waterfall"?"#3b82f6":"transparent",color:$==="waterfall"?"#fff":k?"#e2e8f0":"#64748b",boxShadow:$==="waterfall"?"0 2px 8px rgba(59,130,246,0.3)":"none"},onClick:()=>Ze("waterfall"),children:"Waterfall"})]}),t.jsxs("div",{style:{position:"relative"},ref:K,children:[t.jsxs("button",{style:Qe.createButton(g==="filter"),onMouseEnter:()=>y("filter"),onMouseLeave:()=>y(null),onClick:()=>M(!N),children:[t.jsx(th,{size:16}),"Filter Projects",C.length>0&&` (${C.length})`,t.jsx(Mo,{size:16})]}),N&&t.jsxs("div",{style:Qe.projectDropdown,children:[t.jsxs("div",{style:Qe.checkboxItem(g==="all"),onMouseEnter:()=>y("all"),onMouseLeave:()=>y(null),onClick:()=>Q([]),children:[t.jsx("div",{style:Qe.checkbox(C.length===0),children:C.length===0&&""}),t.jsx("span",{style:Qe.checkboxLabel,children:"All Projects"})]},"all"),t.jsx("div",{style:{height:"1px",backgroundColor:k?"rgba(75,85,99,0.5)":"rgba(226,232,240,0.8)",margin:"8px 12px"}}),ao.assigned.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{padding:"8px 20px",fontSize:"11px",fontWeight:"700",color:k?"#3b82f6":"#2563eb",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Your Assigned Projects"}),ao.assigned.map(I=>t.jsxs("div",{style:Qe.checkboxItem(g===I),onMouseEnter:()=>y(I),onMouseLeave:()=>y(null),onClick:()=>qA(I),children:[t.jsx("div",{style:Qe.checkbox(C.includes(I)),children:C.includes(I)&&""}),t.jsx("span",{style:Qe.checkboxLabel,children:I})]},I)),ao.other.length>0&&t.jsx("div",{style:{height:"1px",backgroundColor:k?"rgba(75,85,99,0.5)":"rgba(226,232,240,0.8)",margin:"8px 12px"}})]}),ao.other.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{padding:"8px 20px",fontSize:"11px",fontWeight:"700",color:k?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},children:"All Projects"}),ao.other.map(I=>t.jsxs("div",{style:Qe.checkboxItem(g===I),onMouseEnter:()=>y(I),onMouseLeave:()=>y(null),onClick:()=>qA(I),children:[t.jsx("div",{style:Qe.checkbox(C.includes(I)),children:C.includes(I)&&""}),t.jsx("span",{style:Qe.checkboxLabel,children:I})]},I))]}),ao.all.length===0&&t.jsx("div",{style:{padding:"20px",textAlign:"center",color:k?"#94a3b8":"#64748b",fontSize:"13px"},children:"No projects available"})]})]})]}),a?t.jsxs(t.Fragment,{children:[t.jsx(i8,{isDarkMode:k}),t.jsxs("div",{style:Qe.statsContainer,children:[t.jsx(lg,{isDarkMode:k}),t.jsx(lg,{isDarkMode:k}),t.jsx(lg,{isDarkMode:k})]})]}):o.length===0?t.jsxs("div",{style:Qe.emptyState,children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No master plans found"}),t.jsx("div",{children:"Create your first master plan to get started"})]}):t.jsxs("div",{ref:De,style:Qe.card(b==="gantt"),onMouseEnter:()=>R("gantt"),onMouseLeave:()=>R(null),children:[t.jsx("div",{style:Qe.cardGlow}),t.jsxs("div",{style:Qe.projectTitle,children:[t.jsx("div",{style:Qe.projectName,children:C.length===0?"Master Plan Overview":C.length===1?t.jsxs(t.Fragment,{children:[C[0],r.length===1&&Us(r[0].id)]}):`${C.length} Projects Selected`}),C.length===1&&r.length===1&&t.jsxs("div",{style:Qe.projectTitleRight,children:[t.jsx("button",{style:Qe.actionButton(g==="history-single","history"),onMouseEnter:()=>y("history-single"),onMouseLeave:()=>y(null),onClick:()=>ks(r[0].id,r[0].project),title:"View project history",children:t.jsx(ql,{size:16})}),Bt[r[0].id]!=="viewer"&&t.jsx("button",{style:Qe.actionButton(g==="edit-single","edit",Bt[r[0].id]==="viewer"),onMouseEnter:()=>y("edit-single"),onMouseLeave:()=>y(null),onClick:()=>ZA(r[0]),title:Bt[r[0].id]==="viewer"?"View-only access":"Edit this plan",disabled:Bt[r[0].id]==="viewer",children:t.jsx(ms,{size:16})}),(Bt[r[0].id]==="owner"||Bt[r[0].id]===void 0&&r[0].createdBy===(c==null?void 0:c.id))&&t.jsx("button",{style:Qe.actionButton(g==="delete-single","delete"),onMouseEnter:()=>y("delete-single"),onMouseLeave:()=>y(null),onClick:()=>Gi(r[0]),title:"Delete this plan",children:t.jsx(Kn,{size:16})})]})]}),C.length===1&&r.length===1&&t.jsxs("div",{style:Qe.projectMeta,children:[t.jsxs("span",{children:[t.jsx("strong",{children:"Start:"})," ",new Date(r[0].startDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),t.jsxs("span",{children:[t.jsx("strong",{children:"End:"})," ",new Date(r[0].endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),((Rs=r[0].fields)==null?void 0:Rs.lead)&&t.jsxs("span",{children:[t.jsx("strong",{children:"Lead:"})," ",r[0].fields.lead]}),((Kt=r[0].fields)==null?void 0:Kt.status)&&t.jsxs("span",{children:[t.jsx("strong",{children:"Status:"})," ",t.jsx("span",{style:Qe.statusBadge(r[0].fields.status),children:r[0].fields.status})]})]}),t.jsx("div",{ref:be,style:Qe.ganttContainer,children:r.length===0?t.jsxs("div",{style:Qe.emptyState,children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No projects found"}),t.jsx("div",{children:"Try adjusting your filters or search query"})]}):(()=>{const I=new Date;I.setHours(0,0,0,0);const te=[];r.forEach(mt=>{mt.startDate&&te.push(Le(mt.startDate)),mt.endDate&&te.push(Le(mt.endDate)),mt.fields&&Object.values(mt.fields).forEach(Rt=>{Rt.startDate&&te.push(Le(Rt.startDate)),Rt.endDate&&te.push(Le(Rt.endDate))})});const He=te.filter(mt=>mt&&!isNaN(mt)),We=new Date(Math.min(...He)),Et=new Date(Math.max(...He));console.log(" Timeline boundaries:",We.toLocaleDateString(),"",Et.toLocaleDateString());const Wt=Math.max(1,(Et-We)/(1e3*60*60*24));console.log(" Total timeline days:",Wt);const ct=Math.ceil((Et-We)/(1e3*60*60*24*30))+1,st=[];for(let mt=0;mt<ct;mt++){const Rt=new Date(We);Rt.setMonth(We.getMonth()+mt),st.push({label:Rt.toLocaleDateString("en-US",{month:"short",year:"numeric"}),date:new Date(Rt)})}const Nt=mt=>{for(let Rt=0;Rt<st.length;Rt++){const dr=st[Rt].date;if(mt.getFullYear()===dr.getFullYear()&&mt.getMonth()===dr.getMonth())return Rt}return-1};let Zt=-1,qr=0;for(let mt=0;mt<st.length;mt++){const Rt=new Date(st[mt].date);Rt.setDate(1),Rt.setHours(0,0,0,0);const dr=new Date(Rt.getFullYear(),Rt.getMonth()+1,0);if(dr.setHours(23,59,59,999),I>=Rt&&I<=dr){Zt=mt;const Wn=dr.getDate(),Gn=I.getDate();qr=Gn/Wn*100,console.log(" Today Line FOUND:",{monthIndex:mt,monthLabel:st[mt].label,monthStart:Rt.toLocaleDateString(),monthEnd:dr.toLocaleDateString(),todayDate:I.toLocaleDateString(),dayOfMonth:Gn,daysInMonth:Wn,percentInMonth:qr.toFixed(2)+"%"});break}}Zt===-1&&I<st[0].date&&console.log(" Today is BEFORE the timeline starts"),Zt===-1&&I>new Date(st[st.length-1].date.getFullYear(),st[st.length-1].date.getMonth()+1,0)&&console.log(" Today is AFTER the timeline ends"),console.log(" Today Line Debug:",{todayMonthIndex:Zt,todayPercentInMonth:qr.toFixed(2)+"%",todayDate:I.toLocaleDateString(),monthCount:st.length,firstMonth:st[0].label,lastMonth:st[st.length-1].label});const Zr=mt=>{const Rt=(mt==null?void 0:mt.toLowerCase())||"";return Rt.includes("complete")?"#3b82f6":Rt.includes("on track")?"#10b981":Rt.includes("at risk")?"#f59e0b":Rt.includes("delay")?"#ef4444":"#94a3b8"};return t.jsxs("div",{style:{position:"relative",minHeight:"100%"},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${st.length}, 1fr)`,gap:"0",marginBottom:"16px",backgroundColor:k?"#4b5563":"#f8fafc",borderRadius:"12px",position:"relative",gridColumnGap:"0",gridRowGap:"0"},children:[t.jsx("div",{style:Qe.taskHeader,children:"Project"}),st.map((mt,Rt)=>t.jsxs("div",{style:{...Qe.monthHeader,minWidth:0,width:"100%",position:"relative",borderBottom:k?"2px solid #4b5563":"2px solid #cbd5e1",borderRight:Rt===st.length-1?"none":F?k?"2px solid rgba(100,116,139,0.8)":"2px solid rgba(148,163,184,0.8)":"none"},children:[mt.label,[0,25,50,75,100].map((dr,Wn)=>t.jsx("div",{style:{...Wn===0||Wn===4?Qe.rulerMajorTick:Qe.rulerTick,left:`calc(${dr}% - 1px)`}},Wn))]},Rt))]}),r.map((mt,Rt)=>{var Yi;const dr=Le(mt.startDate),Wn=Le(mt.endDate),Gn=[];return mt.fields&&Object.entries(mt.fields).forEach(([Mt,rr],Gt)=>{Mt.toLowerCase()!=="status"&&Mt.toLowerCase()!=="lead"&&Mt.toLowerCase()!=="budget"&&Mt.toLowerCase()!=="completion"&&Gn.push({id:rr.id,name:Mt,status:rr.status||rr,startDate:Le(rr.startDate)||null,endDate:Le(rr.endDate)||null,color:Zr(rr.status||rr)})}),Gn.sort((Mt,rr)=>{if(!Mt.startDate&&!rr.startDate)return 0;if(!Mt.startDate)return 1;if(!rr.startDate)return-1;const Gt=Mt.startDate-rr.startDate;return Gt!==0?Gt:!Mt.endDate&&!rr.endDate?0:Mt.endDate?rr.endDate?Mt.endDate-rr.endDate:-1:1}),$==="waterfall"&&C.length===1?Gn.map((Mt,rr)=>t.jsxs("div",{style:{position:"relative",marginBottom:"8px",width:"100%",maxWidth:"100%"},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${st.length}, 1fr)`,gap:"0",alignItems:"center"},children:[t.jsx("div",{style:{...Qe.taskName,display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",minHeight:"60px",overflow:"hidden"},children:t.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[t.jsx("div",{style:{fontWeight:"700",fontSize:"13px"},children:Mt.name}),t.jsx("span",{style:{...Qe.statusBadge(Mt.status),marginTop:"4px",width:"fit-content"},children:Mt.status})]})}),st.map((Gt,hr)=>t.jsx("div",{style:{...Qe.ganttCell,position:"relative",minWidth:0,width:"100%"},children:F&&t.jsx("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:k?"rgba(75, 85, 99, 0.15)":"rgba(148, 163, 184, 0.1)",borderRadius:"8px",pointerEvents:"none",zIndex:1,margin:"1px"}})},hr))]}),Mt.startDate&&Mt.endDate&&(()=>{const Gt=Le(Mt.startDate),hr=Le(Mt.endDate);if(!Gt||!hr)return null;const mn=Nt(Gt),$n=Nt(hr);if(mn===-1||$n===-1)return null;const La=new Date(Gt.getFullYear(),Gt.getMonth()+1,0).getDate(),Da=new Date(hr.getFullYear(),hr.getMonth()+1,0).getDate(),Ho=Gt.getDate()/La*100,ai=hr.getDate()/Da*100;return t.jsx("div",{style:{position:"absolute",left:`calc(200px + ((100% - 200px) / ${st.length}) * ${mn} + ((100% - 200px) / ${st.length}) * ${Ho/100})`,width:`calc(((100% - 200px) / ${st.length}) * ${$n-mn} + ((100% - 200px) / ${st.length}) * ${(ai-Ho)/100})`,height:"24px",top:"50%",transform:"translateY(-50%)",backgroundColor:Mt.color,opacity:1,zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"10px",fontWeight:"600",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",cursor:"pointer",pointerEvents:"auto"},onMouseEnter:Ji=>{S.current&&clearTimeout(S.current);const Ai=Ji.currentTarget.getBoundingClientRect();V({x:Ai.left+Ai.width/2,y:Ai.top,plan:mt,phase:Mt,phaseStart:Gt,phaseEnd:hr})},onMouseLeave:()=>{S.current=setTimeout(()=>{V(null)},150)},children:t.jsxs("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"0 4px",fontSize:"9px",maxWidth:"100%",display:"block"},children:[Gt.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",hr.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})})})()]},`${mt.id}-waterfall-${rr}`)):t.jsxs("div",{style:{position:"relative",marginBottom:"8px"},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${st.length}, 1fr)`,gap:"0",alignItems:"center"},children:[t.jsxs("div",{style:{...Qe.taskName,display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",transition:"all 0.2s ease"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",marginBottom:"4px"},children:[t.jsx("div",{style:{fontWeight:"700"},children:mt.project}),Us(mt.id)]}),(()=>{const Mt=qe[mt.id],rr=!!Mt,Gt=(Mt==null?void 0:Mt.userId)===(c==null?void 0:c.id);return rr?t.jsxs("div",{style:{marginTop:"2px",marginBottom:"4px",fontSize:"11px",padding:"3px 6px",width:"fit-content",borderRadius:"6px",backgroundColor:Gt?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",color:Gt?"#10b981":"#ef4444",border:`1px solid ${Gt?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"}`,fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:[t.jsx(Mi,{size:10}),Gt?"You are editing":`Locked by ${Mt.lockedBy}`]}):null})(),((Yi=mt.fields)==null?void 0:Yi.status)&&t.jsx("span",{style:Qe.statusBadge(mt.fields.status),children:mt.fields.status})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"6px",marginLeft:"12px",opacity:.85},children:[t.jsx("button",{style:Qe.actionButton(!1,"history"),onClick:()=>ks(mt.id,mt.project),title:"View history",children:t.jsx(ql,{size:14})}),Bt[mt.id]!=="viewer"&&t.jsx("button",{style:Qe.actionButton(!1,"edit"),onClick:()=>ZA(mt),title:"Edit plan",children:t.jsx(ms,{size:14})}),Bt[mt.id]==="owner"&&t.jsx("button",{style:{...Qe.actionButton(!1,"users"),backgroundColor:k?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)",color:"#8b5cf6"},onClick:()=>ve(mt),title:"Manage team",children:t.jsx(Un,{size:14})}),Bt[mt.id]==="owner"&&t.jsx("button",{style:Qe.actionButton(!1,"delete"),onClick:()=>Gi(mt),title:"Delete plan",children:t.jsx(Kn,{size:14})})]})]}),st.map((Mt,rr)=>t.jsx("div",{style:{...Qe.ganttCell,position:"relative",minWidth:0,width:"100%"},children:F&&t.jsx("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:k?"rgba(75, 85, 99, 0.15)":"rgba(148, 163, 184, 0.1)",borderRadius:"8px",pointerEvents:"none",zIndex:1,margin:"1px"}})},rr))]}),t.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,height:"40px",display:"grid",gridTemplateColumns:`200px repeat(${st.length}, 1fr)`,gap:"0",pointerEvents:"none"},children:[t.jsx("div",{}),Gn.length>0?Gn.map((Mt,rr)=>{console.log(`
 ========== RENDERING PHASE ${rr+1}/${Gn.length} ==========`),console.log(` Phase Name: ${Mt.name}`);const Gt=Mt.startDate?Le(Mt.startDate):null,hr=Mt.endDate?Le(Mt.endDate):null;if(!Gt||!hr)return console.warn("Phase missing date:",Mt),null;const mn=Nt(Gt),$n=Nt(hr),La=new Date(Gt.getFullYear(),Gt.getMonth()+1,0).getDate(),Da=new Date(hr.getFullYear(),hr.getMonth()+1,0).getDate(),Ho=Gt.getDate()/La*100,ai=hr.getDate()/Da*100,Ji=`calc(
200px +
((100% - 200px) * (${mn} / ${st.length})) +
((100% - 200px) * (${Ho} / 100 / ${st.length}))
)`,Ai=`calc(
((100% - 200px) * ((${$n} - ${mn}) / ${st.length})) +
((100% - 200px) * ((${ai} - ${Ho}) / 100 / ${st.length}))
)`;return t.jsx("div",{style:{position:"absolute",left:Ji,width:Ai,height:"24px",top:"8px",transform:"translateY(83.5%)",backgroundColor:Mt.color,opacity:1,zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"10px",fontWeight:"600",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",cursor:"pointer",pointerEvents:"auto"},onMouseEnter:So=>{S.current&&clearTimeout(S.current);const Xi=So.currentTarget.getBoundingClientRect();V({x:Xi.left+Xi.width/2,y:Xi.top,plan:mt,phase:Mt,phaseStart:Gt,phaseEnd:hr})},onMouseLeave:()=>{S.current=setTimeout(()=>{V(null)},150)},children:t.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"0 4px",fontSize:"9px",letterSpacing:"-0.3px",maxWidth:"100%",display:"block"},children:Mt.name})},`${mt.id}-${rr}`)}):(()=>{var $n;const Mt=(Et-We)/864e5,rr=(dr-We)/(1e3*60*60*24),Gt=(Wn-We)/(1e3*60*60*24),hr=rr/Mt*100,mn=(Gt-rr)/Mt*100;return t.jsx("div",{style:{position:"absolute",left:`calc(200px + (100% - 200px) * ${hr/100})`,width:`calc((100% - 200px) * ${mn/100})`,height:"24px",top:"8px",backgroundColor:Zr(($n=mt.fields)==null?void 0:$n.status),display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:"600",padding:"0 8px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",pointerEvents:"auto"},children:mt.project})})()]})]},mt.id)}),t.jsxs("div",{style:Qe.legend,children:[t.jsxs("div",{style:Qe.legendItem,children:[t.jsx("div",{style:Qe.legendColor("#3b82f6")}),"Completed"]}),t.jsxs("div",{style:Qe.legendItem,children:[t.jsx("div",{style:Qe.legendColor("#10b981")}),"On Track"]}),t.jsxs("div",{style:Qe.legendItem,children:[t.jsx("div",{style:Qe.legendColor("#f59e0b")}),"At Risk"]}),t.jsxs("div",{style:Qe.legendItem,children:[t.jsx("div",{style:Qe.legendColor("#ef4444")}),"Delayed"]})]}),Zt!==-1&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"absolute",top:"0px",bottom:"80px",height:"auto",left:`calc(200px + (100% - 200px) * ${(Zt+qr/100)/st.length})`,width:"2px",backgroundImage:"linear-gradient(to bottom, #ef4444 60%, transparent 60%)",backgroundSize:"2px 16px",backgroundRepeat:"repeat-y",zIndex:100,pointerEvents:"none"}}),t.jsx("div",{style:{position:"absolute",top:"-35px",left:`calc(200px + (100% - 200px) * ${(Zt+qr/100)/st.length})`,transform:"translateX(-50%)",backgroundColor:"#ef4444",color:"#fff",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"700",whiteSpace:"nowrap",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:101},children:"Today"})]})]})})()})]}),t.jsxs("div",{style:Qe.statsContainer,children:[t.jsxs("div",{style:Qe.statCard(b==="stat1"),onMouseEnter:()=>R("stat1"),onMouseLeave:()=>R(null),children:[t.jsx("div",{style:Qe.statNumber,children:o.length}),t.jsx("div",{style:Qe.statLabel,children:"Total Master Plans"})]}),t.jsxs("div",{style:Qe.statCard(b==="stat2"),onMouseEnter:()=>R("stat2"),onMouseLeave:()=>R(null),children:[t.jsx("div",{style:Qe.statNumber,children:o.filter(I=>{const te=Fe(I);return te&&!te.toLowerCase().includes("complete")}).length}),t.jsx("div",{style:Qe.statLabel,children:"In Progress"})]}),t.jsxs("div",{style:Qe.statCard(b==="stat3"),onMouseEnter:()=>R("stat3"),onMouseLeave:()=>R(null),children:[t.jsx("div",{style:Qe.statNumber,children:o.filter(I=>{const te=Fe(I);return te&&te.toLowerCase().includes("complete")}).length}),t.jsx("div",{style:Qe.statLabel,children:"Completed"})]})]}),zt&&Yt&&t.jsx("div",{style:Qe.deleteConfirmation,children:t.jsxs("div",{style:Qe.deleteModal,children:[t.jsx("h3",{style:Qe.deleteModalTitle,children:"Delete Plan"}),t.jsxs("p",{style:Qe.deleteModalText,children:['Are you sure you want to delete "',Yt.project,'"? This action cannot be undone and will permanently remove all associated data.']}),t.jsxs("div",{style:Qe.deleteModalActions,children:[t.jsx("button",{style:Qe.modalButton(g==="cancel","cancel"),onMouseEnter:()=>y("cancel"),onMouseLeave:()=>y(null),onClick:$i,children:"Cancel"}),t.jsx("button",{style:Qe.modalButton(g==="confirm-delete","danger"),onMouseEnter:()=>y("confirm-delete"),onMouseLeave:()=>y(null),onClick:Fs,children:"Delete Plan"})]})]})}),H&&z&&t.jsx("div",{style:Qe.statusModal,children:t.jsxs("div",{style:Qe.statusModalContent,children:[t.jsx("h3",{style:Qe.statusModalTitle,children:"Change Milestone Status"}),t.jsxs("p",{style:Qe.statusModalSubtitle,children:[t.jsx("strong",{children:"Project:"})," ",z.plan.project,t.jsx("br",{}),t.jsx("strong",{children:"Milestone:"})," ",z.milestoneName]}),t.jsx("div",{style:{marginBottom:"24px"},children:t.jsx(Tt,{value:Me,onChange:I=>O(I),options:["On Track","At Risk","Completed","Delayed"],isDarkMode:k,compact:!0})}),t.jsxs("div",{style:Qe.deleteModalActions,children:[t.jsx("button",{style:Qe.modalButton(g==="cancel-status","cancel"),onMouseEnter:()=>y("cancel-status"),onMouseLeave:()=>y(null),onClick:()=>{P(!1),xe(null),O("")},children:"Cancel"}),t.jsx("button",{style:{...Qe.modalButton(g==="confirm-status","primary"),backgroundColor:g==="confirm-status"?"#2563eb":"#3b82f6"},onMouseEnter:()=>y("confirm-status"),onMouseLeave:()=>y(null),onClick:Zd,children:"Update Status "})]})]})}),se&&ue&&t.jsx("div",{style:Qe.historyModal,children:t.jsxs("div",{style:Qe.historyModalContent,children:[t.jsx("div",{style:Qe.historyModalHeader,children:t.jsxs("div",{children:[t.jsxs("div",{style:Qe.historyModalTitle,children:[t.jsx(ql,{size:24}),"Project History"]}),t.jsx("div",{style:Qe.historyModalSubtitle,children:ue.name})]})}),t.jsxs("div",{style:Qe.historyList,children:[t.jsx("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:k?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",borderRadius:"12px",border:k?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)"},children:t.jsx(Tt,{label:"Filter by Change Type",value:Ts[ft],onChange:I=>{const te=Object.keys(Ts).find(He=>Ts[He]===I);ne(te||"all")},options:Object.values(Ts),isDarkMode:k,compact:!0})}),re?t.jsx(cg,{isDarkMode:k}):we.length===0?t.jsxs("div",{style:Qe.historyEmptyState,children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No history found"}),t.jsx("div",{children:"This plan has no recorded changes yet"})]}):(()=>{const I=ft==="all"?we:we.filter(te=>te.ChangeType===ft);return I.length===0?t.jsxs("div",{style:Qe.historyEmptyState,children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No matching changes"}),t.jsx("div",{children:"Try selecting a different filter"})]}):I.map((te,He)=>t.jsxs("div",{style:Qe.historyItem(g===`history-${He}`),onMouseEnter:()=>y(`history-${He}`),onMouseLeave:()=>y(null),children:[t.jsxs("div",{style:Qe.historyItemHeader,children:[t.jsx("div",{style:Qe.historyChangeType(Mn(te.ChangeType)),children:js(te.ChangeType)}),t.jsx("div",{style:Qe.historyTimestamp,children:new Date(te.ChangedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),t.jsx("div",{style:Qe.historyMilestoneName,children:te.MilestoneName}),te.ChangeType==="status_changed"&&te.OldValue&&te.NewValue?t.jsxs("div",{style:Qe.historyChangeDetails,children:[t.jsx("span",{style:{...Qe.historyValue(!0),backgroundColor:Fr(te.OldValue)+"20",borderColor:Fr(te.OldValue)+"40",color:Fr(te.OldValue)},children:te.OldValue}),t.jsx("span",{style:{fontSize:"16px",fontWeight:"700"},children:""}),t.jsx("span",{style:{...Qe.historyValue(!1),backgroundColor:Fr(te.NewValue)+"20",borderColor:Fr(te.NewValue)+"40",color:Fr(te.NewValue)},children:te.NewValue})]}):te.OldValue&&te.NewValue?t.jsxs("div",{style:Qe.historyChangeDetails,children:[t.jsx("span",{style:Qe.historyValue(!0),children:te.OldValue}),t.jsx("span",{style:{fontSize:"16px",fontWeight:"700"},children:""}),t.jsx("span",{style:Qe.historyValue(!1),children:te.NewValue})]}):null,!te.OldValue&&te.NewValue&&t.jsx("div",{style:Qe.historyChangeDetails,children:t.jsx("span",{style:{...Qe.historyValue(!1),...te.ChangeType==="status_changed"&&{backgroundColor:Fr(te.NewValue)+"20",borderColor:Fr(te.NewValue)+"40",color:Fr(te.NewValue)}},children:te.NewValue})}),t.jsxs("div",{style:Qe.historyChangedBy,children:[t.jsx(qt,{size:12}),"Changed by: ",te.ChangedBy]}),te.Justification&&t.jsxs("div",{style:{marginTop:"12px",padding:"12px",borderRadius:"8px",backgroundColor:k?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",border:k?"1px solid rgba(59,130,246,0.3)":"1px solid rgba(59,130,246,0.2)"},children:[t.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:k?"#93c5fd":"#3b82f6",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Justification:"}),t.jsxs("div",{style:{fontSize:"13px",color:k?"#e2e8f0":"#1e293b",lineHeight:"1.5",fontStyle:"italic"},children:['"',te.Justification,'"']})]})]},te.Id||He))})()]}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:t.jsx("button",{style:Qe.closeHistoryButton(g==="close-history"),onMouseEnter:()=>y("close-history"),onMouseLeave:()=>y(null),onClick:()=>{Z(!1),pe(null),Pe([]),ne("all")},children:"Close"})})]})}),yt&&lt&&t.jsx("div",{style:Qe.statusModal,children:t.jsxs("div",{style:Qe.statusModalContent,children:[t.jsx("h3",{style:Qe.statusModalTitle,children:"Manage Milestone Users"}),t.jsxs("p",{style:Qe.statusModalSubtitle,children:[t.jsx("strong",{children:"Project:"})," ",lt.plan.project,t.jsx("br",{}),t.jsx("strong",{children:"Milestone:"})," ",lt.milestoneName]}),U?t.jsx(cg,{isDarkMode:k}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("label",{style:{fontSize:"14px",fontWeight:"600",color:k?"#d1d5db":"#374151",marginBottom:"12px",display:"block"},children:["Assigned Users (",ze.length,")"]}),ze.length===0?t.jsx("div",{style:{padding:"16px",backgroundColor:k?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"8px",textAlign:"center",color:k?"#94a3b8":"#64748b"},children:"No users assigned to this milestone"}):ze.map(I=>t.jsxs("div",{style:{...Qe.selectedUserCard,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"600",color:k?"#e2e8f0":"#1e293b",fontSize:"13px"},children:[I.firstName," ",I.lastName]}),t.jsx("div",{style:{fontSize:"11px",color:k?"#94a3b8":"#64748b"},children:I.email})]}),t.jsx("button",{style:{padding:"6px",borderRadius:"6px",border:"none",backgroundColor:g===`remove-milestone-user-${I.userId}`?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:()=>y(`remove-milestone-user-${I.userId}`),onMouseLeave:()=>y(null),onClick:()=>Ce(I.userId),children:t.jsx(gr,{size:16})})]},I.userId))]}),Ne.length>0?t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"14px",fontWeight:"600",color:k?"#d1d5db":"#374151",marginBottom:"8px",display:"block"},children:"Add Team Member to Milestone"}),t.jsx(Tt,{value:"",onChange:I=>{if(I){const te=Ne.find(He=>`${He.firstName} ${He.lastName}`===I);te&&ce(te.userId)}},options:Ne.map(I=>`${I.firstName} ${I.lastName}`),isDarkMode:k,placeholder:"Select a team member...",searchable:!0,compact:!0}),t.jsx("div",{style:{fontSize:"12px",color:k?"#94a3b8":"#64748b",marginTop:"8px",fontStyle:"italic"},children:' Only team members from "Manage Team" can be assigned to milestones'})]}):ze.length>0?t.jsx("div",{style:{padding:"12px",backgroundColor:k?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"8px",fontSize:"13px",color:k?"#93c5fd":"#3b82f6",border:k?"1px solid rgba(59,130,246,0.3)":"1px solid rgba(59,130,246,0.2)"},children:" All team members are already assigned to this milestone"}):t.jsx("div",{style:{padding:"12px",backgroundColor:k?"rgba(251,191,36,0.1)":"rgba(251,191,36,0.05)",borderRadius:"8px",fontSize:"13px",color:k?"#fbbf24":"#f59e0b",border:k?"1px solid rgba(251,191,36,0.3)":"1px solid rgba(251,191,36,0.2)"},children:' No team members available. Add team members in "Manage Team" first.'})]}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:t.jsx("button",{style:Qe.modalButton(g==="close-users","cancel"),onMouseEnter:()=>y("close-users"),onMouseLeave:()=>y(null),onClick:()=>{q(!1),ye(null),dt([]),B([])},children:"Close"})})]})}),_&&E&&t.jsx("div",{style:Qe.statusModal,children:t.jsxs("div",{style:Qe.statusModalContent,children:[t.jsx("h3",{style:Qe.statusModalTitle,children:"Manage Team & Permissions"}),t.jsxs("p",{style:Qe.statusModalSubtitle,children:[t.jsx("strong",{children:"Project:"})," ",E.project]}),Oe?t.jsx(cg,{isDarkMode:k}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("label",{style:{fontSize:"14px",fontWeight:"600",color:k?"#d1d5db":"#374151",marginBottom:"12px",display:"block"},children:["Team Members (",ie.length,")"]}),ie.length===0?t.jsx("div",{style:{padding:"16px",backgroundColor:k?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"8px",textAlign:"center",color:k?"#94a3b8":"#64748b"},children:"No team members yet"}):ie.map(I=>t.jsxs("div",{style:{...Qe.selectedUserCard,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsxs("div",{style:{fontWeight:"600",color:k?"#e2e8f0":"#1e293b",fontSize:"13px",marginBottom:"2px"},children:[I.firstName," ",I.lastName,I.permission==="owner"&&t.jsx("span",{style:{marginLeft:"8px",fontSize:"10px",padding:"2px 6px",borderRadius:"4px",backgroundColor:"#3b82f620",color:"#3b82f6",fontWeight:"700"},children:"OWNER"})]}),t.jsx("div",{style:{fontSize:"11px",color:k?"#94a3b8":"#64748b"},children:I.email})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t.jsx("div",{style:{width:"120px"},children:t.jsx(Tt,{value:I.permission,onChange:te=>T(I.userId,te),options:["owner","editor","viewer"],isDarkMode:k,compact:!0})}),t.jsx("button",{style:{padding:"6px",borderRadius:"6px",border:"none",backgroundColor:"rgba(239,68,68,0.1)",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>wt(I.userId),children:t.jsx(gr,{size:16})})]})]},I.userId))]}),j.length>0&&t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"14px",fontWeight:"600",color:k?"#d1d5db":"#374151",marginBottom:"8px",display:"block"},children:"Add Team Member"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:"8px",alignItems:"end"},children:[t.jsx(Tt,{value:Ve?((Ra=j.find(I=>I.id===parseInt(Ve)))==null?void 0:Ra.firstName)+" "+((Ma=j.find(I=>I.id===parseInt(Ve)))==null?void 0:Ma.lastName):"",onChange:I=>{const te=j.find(He=>`${He.firstName} ${He.lastName}`===I);ke(te?te.id.toString():"")},options:j.map(I=>`${I.firstName} ${I.lastName}`),isDarkMode:k,placeholder:"Select a user...",searchable:!0,compact:!0}),t.jsx(Tt,{value:Be,onChange:I=>nt(I),options:["owner","editor","viewer"],isDarkMode:k,compact:!0}),t.jsxs("button",{style:{padding:"12px 16px",borderRadius:"8px",border:"none",backgroundColor:Ve?"#3b82f6":k?"#4b5563":"#e5e7eb",color:Ve?"#fff":k?"#94a3b8":"#64748b",fontSize:"13px",fontWeight:"600",cursor:Ve?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},onClick:me,disabled:!Ve,children:[t.jsx(Sr,{size:14}),"Add"]})]})]}),t.jsxs("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:k?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"8px",fontSize:"12px",color:k?"#93c5fd":"#3b82f6",lineHeight:"1.6"},children:[t.jsx("strong",{children:"Permissions:"}),t.jsx("br",{})," ",t.jsx("strong",{children:"Owner:"})," Full control including team management",t.jsx("br",{})," ",t.jsx("strong",{children:"Editor:"})," Can edit milestones and dates",t.jsx("br",{})," ",t.jsx("strong",{children:"Viewer:"})," Read-only access"]})]}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:t.jsx("button",{style:Qe.modalButton(g==="close-team","cancel"),onMouseEnter:()=>y("close-team"),onMouseLeave:()=>y(null),onClick:()=>{G(!1),D(null),L([]),de([]),ke(""),nt("editor")},children:"Close"})})]})}),Y&&t.jsxs("div",{style:{position:"fixed",top:Math.max(12,Y.y-12),left:Y.x,transform:"translate(-50%, -100%)",backgroundColor:k?"rgba(30,41,59,0.98)":"#ffffff",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"14px 18px",minWidth:"220px",maxWidth:"320px",zIndex:9999999,boxShadow:"0 12px 32px rgba(0,0,0,0.25)",border:k?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.9)",pointerEvents:"auto"},onMouseEnter:()=>{S.current&&clearTimeout(S.current)},onMouseLeave:()=>{S.current=setTimeout(()=>{V(null)},150)},children:[t.jsx("div",{style:{fontWeight:700,marginBottom:"6px",color:k?"#f8fafc":"#1e293b"},children:Y.phase.name}),t.jsxs("div",{style:{fontSize:"11px",marginBottom:"6px",color:k?"#cbd5f5":"#475569",opacity:1},children:[Y.phaseStart.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," "," ",Y.phaseEnd.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),t.jsx("div",{style:{fontSize:"11px",fontWeight:700,color:Y.phase.color,marginBottom:"10px"},children:Y.phase.status}),Bt[Y.plan.id]==="owner"&&t.jsxs("button",{style:{...Qe.changeStatusButton(!1),width:"100%",marginBottom:"6px",backgroundColor:"#3b82f6",color:"#ffffff",border:"1px solid #2563eb",transition:"all 0.15s ease",boxSizing:"border-box",boxShadow:g==="tooltip-team"?"0 6px 16px rgba(59,130,246,0.35)":"none",transform:g==="tooltip-team"?"translateY(-1px)":"none"},onMouseEnter:()=>y("tooltip-team"),onMouseLeave:()=>y(null),onClick:I=>{I.stopPropagation(),S.current&&clearTimeout(S.current),V(null),w(Y.plan,Y.phase.name,Y.phase.id)},children:[t.jsx(Un,{size:12}),"Milestone Team"]}),Bt[Y.plan.id]==="owner"&&t.jsxs("button",{style:{...Qe.changeStatusButton(!1),width:"100%",transition:"all 0.15s ease",boxSizing:"border-box",boxShadow:g==="tooltip-status"?"0 6px 16px rgba(59,130,246,0.35)":"none",transform:g==="tooltip-status"?"translateY(-1px)":"none"},onMouseEnter:()=>y("tooltip-status"),onMouseLeave:()=>y(null),onClick:I=>{I.stopPropagation(),S.current&&clearTimeout(S.current),V(null),Vi(Y.plan,Y.phase.name,Y.phase.status)},children:[t.jsx(so,{size:12}),"Change Status"]})]})]})},a8=()=>{var Ce,H;const[o,e]=h.useState(null),[r,n]=h.useState([]),[a,A]=h.useState(!0),[c,p]=h.useState(null),[d,m]=h.useState(null),[g,y]=h.useState(!1),[b,R]=h.useState("Individual Plan");h.useRef(null);const[C,Q]=h.useState(!1),[S,N]=h.useState("my");h.useRef({});const[M,Ie]=h.useState("timeline"),fe=h.useRef(null),[F,ae]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[ee,Re]=h.useState(""),[se,Z]=h.useState("All Types"),[ue,pe]=h.useState(0),[we,Pe]=h.useState(0),re=["L1","L2"],[Ee,k]=h.useState([]),[ge,_]=h.useState(0),G=Ee.length>0,E=h.useRef(null),D=h.useRef(null),[ie,L]=h.useState({x:0,y:0});h.useRef({});const j=h.useRef(!1),[de,Oe]=h.useState(null),[Ge,Ve]=h.useState(!1),[ke,Be]=h.useState(null),[nt,yt]=h.useState(!1),[q,lt]=h.useState(null),ye=(P,z)=>{const xe=new Date(P),Me=new Date(z),O=new Date;if(O<=xe)return 0;if(O>=Me)return 100;const Qt=Me-xe,tt=O-xe;return Math.round(tt/Qt*100)},ze=P=>{if(!P)return null;if(P instanceof Date)return P;if(typeof P=="number")return new Date(P);if(P=String(P).trim(),/^\d{4}-\d{2}-\d{2}/.test(P)){const[z,xe,Me]=P.split("T")[0].split("-");return new Date(Number(z),Number(xe)-1,Number(Me))}if(/^\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}$/.test(P)){const[z,xe,Me]=P.split(/[\/\-]/);return new Date(Number(Me),Number(xe)-1,Number(z))}return console.warn(" Unrecognized date format:",P),null},dt=P=>P!=null&&P.includes("Progress")?"#10b981":P!=null&&P.includes("Complete")?"#3b82f6":P!=null&&P.includes("Risk")?"#f59e0b":"#64748b",Ne=r.map(P=>{var z,xe;return{id:P.Id,title:((z=P.Fields)==null?void 0:z.title)||"Untitled Plan",project:P.Project,projectType:P.ProjectType||"custom",status:((xe=P.Fields)==null?void 0:xe.status)||"In Progress",progress:ye(P.StartDate,P.EndDate),startDate:P.StartDate,endDate:P.EndDate,lastUpdated:P.CreatedAt?new Date(P.CreatedAt).toLocaleString():"N/A",fields:P.Fields,isWeeklyAllocation:P.isWeeklyAllocation||!1}}),B=["Your assigned projects and personal timeline",()=>`${Ne.length} active individual plans`,()=>S==="my"?"Currently viewing: My Plans":"Currently viewing: Supervised Plans"],U=Ee.map(P=>({id:P.id,title:P.project,project:P.project,projectType:P.projectType||"custom",status:P.status,progress:ye(P.startDate,P.endDate),startDate:P.startDate,endDate:P.endDate,lastUpdated:"N/A",ownerName:P.ownerName,fields:P.fields}));h.useEffect(()=>{D.current||(D.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),E.current&&document.head.removeChild(E.current);const P=document.createElement("style");P.setAttribute("data-component","admin-individual-plan-background");const z=F?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return P.textContent=`
      /* More specific targeting to avoid conflicts */
      .admin-individual-plan-page {
        min-height: 100vh;
        background: ${z};
      }
      
      /* Target common parent containers more carefully */
      body {
        background: ${z} !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      /* Only target direct children of common containers */
      #root > div:first-child,
      .app > div:first-child,
      .main-content,
      .page-container {
        background: transparent !important;
        min-height: 100vh;
      }
      
      /* Fallback for nested containers */
      div[style*="background: white"],
      div[style*="background-color: white"],
      div[style*="background: #fff"],
      div[style*="background-color: #fff"] {
        background: transparent !important;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      /* Smooth transitions for theme changes */
      * {
        transition: background-color 0.3s ease, background 0.3s ease;
      }

      @keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(2px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes shimmer {
        0% {
          background-position: -200% 0;
        }
        100% {
          background-position: 200% 0;
        }
      }
    `,document.head.appendChild(P),E.current=P,()=>{E.current&&document.head.contains(E.current)&&(document.head.removeChild(E.current),E.current=null),D.current&&document.querySelectorAll('[data-component="admin-individual-plan-background"]').length===0&&Object.assign(document.body.style,D.current)}},[F]),h.useEffect(()=>{(async()=>{try{console.log(" Fetching individual plans and weekly allocations...");const z=await Te("/plan/individual",{method:"GET",credentials:"include"});if(!z.ok)throw new Error(`Plans fetch failed: ${z.status}`);const xe=await z.json();console.log(" Plans received:",xe),n(xe);const Me=await Te("/api/weekly-allocations/all",{method:"GET",credentials:"include"});if(Me.ok){const O=await Me.json();console.log(" Weekly allocations received:",O);const Qt=Ae(O||[]);console.log(" Converted weekly plans:",Qt),n(tt=>[...tt,...Qt])}}catch(z){console.error(" Error fetching data:",z)}finally{A(!1)}})()},[]),h.useEffect(()=>{(async()=>{if(S==="supervised")try{console.log(" Fetching supervised data...");const z=await Te("/plan/individual/supervised",{method:"GET",credentials:"include"});if(z.ok){const Me=await z.json();console.log(" Supervised individual plans received:",Me),k(Me)}const xe=await Te("/api/weekly-allocations/supervised",{method:"GET",credentials:"include"});if(xe.ok){const Me=await xe.json();console.log(" Supervised weekly allocations:",Me);const O=Ae(Me||[]);k(Qt=>[...supervisedPlansData||[],...O.map(zt=>({id:zt.Id,project:zt.Project,projectType:zt.ProjectType,startDate:zt.StartDate,endDate:zt.EndDate,status:"Ongoing",fields:zt.Fields,ownerName:"Supervised User"}))])}}catch(z){console.error(" Error fetching supervised data:",z)}})()},[S]);const Ae=P=>{const z={};return P.forEach(xe=>{const Me=`${xe.ProjectName}-${xe.ProjectType}`;z[Me]||(z[Me]={Id:`weekly-${xe.ProjectName}-${Date.now()}`,Project:xe.ProjectName,ProjectType:xe.ProjectType,StartDate:xe.WeekStart,EndDate:xe.WeekEnd,CreatedAt:xe.CreatedAt,Fields:{title:`${xe.ProjectName} (Weekly Allocation)`,status:"Ongoing"},isWeeklyAllocation:!0,weeks:[]}),z[Me].weeks.push({name:`Week of ${new Date(xe.WeekStart).toLocaleDateString("en-US",{month:"short",day:"numeric"})}`,startDate:xe.WeekStart,endDate:xe.WeekEnd,status:"Ongoing",allocatedHours:xe.PlannedHours,tasks:xe.Tasks||[]});const O=new Date(xe.WeekStart),Qt=new Date(xe.WeekEnd),tt=new Date(z[Me].StartDate),zt=new Date(z[Me].EndDate);O<tt&&(z[Me].StartDate=xe.WeekStart),Qt>zt&&(z[Me].EndDate=xe.WeekEnd)}),Object.values(z).map(xe=>(xe.weeks.forEach(Me=>{xe.Fields[Me.name]={startDate:Me.startDate,endDate:Me.endDate,status:Me.status}}),xe))};h.useEffect(()=>{(async()=>{try{console.log(" Fetching user profile...");const z=await Te("/user/profile",{method:"GET",credentials:"include"});if(!z.ok)throw new Error(`Profile fetch failed: ${z.status}`);const xe=await z.json();console.log(" User data received:",xe),e(xe)}catch(z){console.error(" Error fetching user profile:",z)}})()},[]),h.useEffect(()=>{const P=async()=>{try{console.log(" Fetching master plans count...");const z=await Te("/plan/master",{method:"GET",credentials:"include"});if(z.ok){const Me=(await z.json()).filter(Qt=>Qt.createdBy===(o==null?void 0:o.id));pe(Me.length);const O=Me.filter(Qt=>Qt.approvalStatus==="Pending Approval").length;Pe(O),console.log(` Master Plans: ${Me.length}, Pending: ${O}`)}}catch(z){console.error(" Error fetching master plans count:",z)}};o!=null&&o.id&&P()},[o]),h.useEffect(()=>{const P=setInterval(()=>{_(z=>(z+1)%B.length)},5e3);return()=>clearInterval(P)},[Ne.length,S]),h.useEffect(()=>{const P="individual-plan-scrollbar-style",z=document.getElementById(P);z&&z.remove();const xe=document.createElement("style");return xe.id=P,xe.innerHTML=F?`
      /* Dark mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: #1e293b;
      }
      ::-webkit-scrollbar-thumb {
        background-color: #475569;
        border-radius: 10px;
        border: 2px solid #1e293b;
      }
      ::-webkit-scrollbar-thumb:hover {
        background-color: #64748b;
      }
      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #475569 #1e293b;
      }
    `:`
      /* Light mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }
      ::-webkit-scrollbar-thumb {
        background-color: #cbd5e1;
        border-radius: 10px;
        border: 2px solid #f1f5f9;
      }
      ::-webkit-scrollbar-thumb:hover {
        background-color: #94a3b8;
      }
      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #cbd5e1 #f1f5f9;
      }
    `,document.head.appendChild(xe),()=>{document.head.contains(xe)&&document.head.removeChild(xe)}},[F]);const Y=P=>{console.log(` AdminIndividualPlan - Navigating to ${P} tab`),P==="Master Plan"?(console.log(" Navigating to master plan page"),window.location.href="/adminviewplan"):P==="Approvals"?(console.log(" Navigating to approvals page"),window.location.href="/adminapprovals"):console.log(" Staying on individual plan page")},V=()=>{ae(!F),y(!1)},me=(S==="my"?Ne:U).filter(P=>{const z=P.title||"",xe=P.project||"",Me=z.toLowerCase().includes(ee.toLowerCase())||xe.toLowerCase().includes(ee.toLowerCase()),Qt={"All Types":"all","Master Plan":"master-plan",Operations:"operation","Custom Projects":"custom","Planned Leave":"planned-leave"}[se]||se,tt=se==="All Types"||Qt==="all"||P.projectType===Qt;return Me&&tt});me.length;const T={page:{minHeight:"100vh",padding:"30px",background:F?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:F?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},createButton:P=>({backgroundColor:P?"#059669":"#10b981",color:"#fff",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:P?"translateY(-2px)":"translateY(0)",boxShadow:P?"0 8px 25px rgba(16,185,129,0.3)":"0 4px 12px rgba(16,185,129,0.2)"}),topButton:P=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:P?"rgba(59,130,246,0.1)":F?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:P?"#3b82f6":F?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:P?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:P?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:F?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:F?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:F?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:F?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:F?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:F?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:F?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:F?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:F?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:F?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:F?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(P,z)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",outline:"none",backgroundColor:P?"#3b82f6":z?F?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:P?"#fff":F?"#e2e8f0":"#64748b",transform:z&&!P?"translateY(-1px)":"translateY(0)",boxShadow:P?"0 4px 12px rgba(59,130,246,0.3)":z&&!P?"0 2px 8px rgba(0,0,0,0.1)":"none"}),searchContainer:{position:"relative",marginBottom:"24px",maxWidth:"400px"},searchInput:{width:"100%",padding:"12px 16px 12px 44px",borderRadius:"12px",border:F?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:F?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:F?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',boxSizing:"border-box",position:"relative",zIndex:1},searchIcon:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:F?"#94a3b8":"#64748b",transition:"all 0.3s ease",zIndex:2,pointerEvents:"none"},viewModeToggle:{display:"flex",gap:"4px",padding:"4px",backgroundColor:F?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",border:F?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",borderRadius:"12px",backdropFilter:"blur(10px)",marginBottom:"24px",maxWidth:"fit-content"},viewModeButton:P=>({padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:P?"#3b82f6":"transparent",color:P?"#fff":F?"#e2e8f0":"#64748b",boxShadow:P?"0 2px 8px rgba(59,130,246,0.3)":"none"}),cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},planTitle:{fontSize:"18px",fontWeight:"700",color:F?"#e2e8f0":"#1e293b",marginBottom:"4px",transition:"all 0.3s ease"},planOwner:{fontSize:"14px",color:F?"#94a3b8":"#64748b",transition:"all 0.3s ease"},actionButtons:{display:"flex",gap:"8px"},actionButton:(P,z="#64748b")=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:P?`${z}15`:"transparent",color:P?z:F?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",transform:P?"scale(1.1)":"scale(1)"}),statusBadge:P=>({display:"inline-flex",alignItems:"center",padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",backgroundColor:`${dt(P)}20`,color:dt(P),marginBottom:"16px"}),progressLabel:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},progressText:{fontSize:"14px",fontWeight:"600",color:F?"#e2e8f0":"#374151",transition:"all 0.3s ease"},progressPercentage:P=>({fontSize:"14px",fontWeight:"700",color:getProgressColor(P)}),planStats:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",marginBottom:"16px"},statItem:{textAlign:"center",padding:"12px",backgroundColor:F?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},statNumber:{fontSize:"20px",fontWeight:"700",color:F?"#e2e8f0":"#1e293b",marginBottom:"4px",transition:"all 0.3s ease"},statLabel:{fontSize:"12px",color:F?"#94a3b8":"#64748b",fontWeight:"500",transition:"all 0.3s ease"},planFooter:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"16px",borderTop:F?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"},dateRange:{fontSize:"12px",color:F?"#94a3b8":"#64748b",transition:"all 0.3s ease"},lastUpdated:{fontSize:"12px",color:F?"#94a3b8":"#64748b",fontStyle:"italic",transition:"all 0.3s ease"},statsContainer:{display:"block",width:"100%",marginTop:"32px"},statCard:P=>({backgroundColor:F?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"28px",textAlign:"center",boxShadow:P?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",border:F?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:P?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",cursor:"pointer",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.03) 0%, transparent 70%)",opacity:0,transition:"opacity 0.4s ease",pointerEvents:"none"},statCardNumber:{fontSize:"36px",fontWeight:"800",color:F?"#e2e8f0":"#1e293b",marginBottom:"8px",transition:"all 0.3s ease"},statCardLabel:{fontSize:"14px",color:F?"#94a3b8":"#64748b",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},sectionTitle:{fontSize:"24px",fontWeight:"700",color:F?"#e2e8f0":"#1e293b",margin:0,transition:"all 0.3s ease"},sectionSubtitle:{fontSize:"14px",color:F?"#94a3b8":"#64748b",margin:"4px 0 0 0",transition:"all 0.3s ease"},planTypeBadge:P=>({display:"inline-block",padding:"4px 10px",borderRadius:"999px",fontSize:"11px",fontWeight:"700",letterSpacing:"0.5px",marginBottom:"8px",backgroundColor:P?"rgba(168,85,247,0.15)":"rgba(59,130,246,0.15)",color:P?"#a855f7":"#3b82f6"}),ganttContainer:{marginTop:"24px",overflowX:"auto",overflowY:"visible",position:"relative",zIndex:1},ganttCard:P=>({backgroundColor:F?"#374151":"#fff",borderRadius:"20px",padding:"28px",marginBottom:"28px",boxShadow:P?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:P?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",border:F?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"visible"}),taskHeader:{fontSize:"12px",fontWeight:"600",color:F?"#e2e8f0":"#475569",padding:"8px 12px",transition:"all 0.3s ease"},monthHeader:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:F?"#e2e8f0":"#475569",padding:"8px 4px",transition:"all 0.3s ease",borderBottom:F?"2px solid #4b5563":"2px solid #cbd5e1"},taskName:{fontSize:"14px",fontWeight:"500",color:F?"#e2e8f0":"#374151",padding:"12px",backgroundColor:F?"#4b5563":"#f8fafc",borderRadius:"8px",transition:"all 0.3s ease"},ganttCell:{height:"40px",position:"relative",transition:"all 0.3s ease"},legend:{display:"flex",gap:"24px",marginTop:"20px",padding:"20px",backgroundColor:F?"#4b5563":"#f8fafc",borderRadius:"12px",transition:"all 0.3s ease"},legendItem:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",color:F?"#e2e8f0":"#475569",transition:"all 0.3s ease"},legendColor:P=>({width:"16px",height:"16px",borderRadius:"4px",backgroundColor:P,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}),milestoneTooltip:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",backgroundColor:F?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)",borderRadius:"8px",padding:"12px 16px",marginBottom:"8px",maxWidth:"300px",minWidth:"200px",fontSize:"12px",fontWeight:"600",color:F?"#e2e8f0":"#1e293b",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",border:F?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",zIndex:99999,pointerEvents:"auto",whiteSpace:"normal",wordWrap:"break-word",wordBreak:"break-word"},rulerTick:{position:"absolute",bottom:0,width:"1px",height:"8px",backgroundColor:F?"#64748b":"#cbd5e1"},rulerMajorTick:{position:"absolute",bottom:0,width:"2px",height:"12px",backgroundColor:"#94a3b8"},checkbox:P=>({width:"18px",height:"18px",borderRadius:"4px",border:P?"2px solid #3b82f6":F?"2px solid #64748b":"2px solid #cbd5e1",backgroundColor:P?"#3b82f6":"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:"700",transition:"all 0.2s ease"})},wt=()=>{if(me.length===0)return t.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:F?"#94a3b8":"#64748b"},children:[t.jsx(wo,{size:48,style:{marginBottom:"16px",opacity:.5}}),t.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"600"},children:"No assignments found"}),t.jsx("p",{style:{margin:0,fontSize:"14px"},children:ee?"Try adjusting your search terms":"You have no project assignments at the moment"})]});const P=new Date;P.setHours(0,0,0,0);const z=[];me.forEach(be=>{be.startDate&&z.push(ze(be.startDate)),be.endDate&&z.push(ze(be.endDate)),be.fields&&Object.values(be.fields).forEach(De=>{De.startDate&&z.push(ze(De.startDate)),De.endDate&&z.push(ze(De.endDate))})});const xe=z.filter(be=>be&&!isNaN(be)),Me=new Date(Math.min(...xe)),O=new Date(Math.max(...xe)),Qt=Math.ceil((O-Me)/(1e3*60*60*24*30))+1,tt=[];for(let be=0;be<Qt;be++){const De=new Date(Me);De.setMonth(Me.getMonth()+be),tt.push({label:De.toLocaleDateString("en-US",{month:"short",year:"numeric"}),date:new Date(De)})}const zt=be=>{for(let De=0;De<tt.length;De++){const K=tt[De].date;if(be.getFullYear()===K.getFullYear()&&be.getMonth()===K.getMonth())return De}return-1};let ir=-1,Yt=0;for(let be=0;be<tt.length;be++){const De=new Date(tt[be].date);De.setDate(1),De.setHours(0,0,0,0);const K=new Date(De.getFullYear(),De.getMonth()+1,0);if(K.setHours(23,59,59,999),P>=De&&P<=K){ir=be;const qe=K.getDate();Yt=P.getDate()/qe*100;break}}const vr=me.filter(be=>!be.isWeeklyAllocation),Tr=me.filter(be=>be.isWeeklyAllocation),J={};return Tr.forEach(be=>{const De=be.project||be.Project,K=be.projectType||be.ProjectType,qe=`${De}-${K}`;J[qe]||(J[qe]=[]),J[qe].push(be)}),console.log(" Weekly allocations grouped:",J),t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{fontSize:"18px",fontWeight:"700",color:F?"#e2e8f0":"#1e293b",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx(wo,{size:20}),S==="my"?"My Assignments Timeline":"Supervised Assignments Timeline"]}),t.jsxs("div",{ref:fe,style:{...T.ganttCard(d==="gantt"),marginTop:"24px"},onMouseEnter:()=>m("gantt"),onMouseLeave:()=>m(null),children:[t.jsxs("div",{style:T.ganttContainer,children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${tt.length}, 1fr)`,gap:"0",marginBottom:"16px",backgroundColor:F?"#4b5563":"#f8fafc",borderRadius:"12px",position:"relative"},children:[t.jsx("div",{style:T.taskHeader,children:"Assignment"}),tt.map((be,De)=>t.jsxs("div",{style:{...T.monthHeader,minWidth:0,width:"100%",position:"relative"},children:[be.label,[0,25,50,75,100].map((K,qe)=>t.jsx("div",{style:{...qe===0||qe===4?T.rulerMajorTick:T.rulerTick,left:`calc(${K}% - 1px)`}},qe))]},De))]}),vr.map((be,De)=>{var ne,Le;const K=be.project||be.Project,qe=be.projectType||be.ProjectType,Ct=`${K}-${qe}`,Lt=J[Ct]||[];console.log(` Plan: ${K}, Weeklies: ${Lt.length}`);const Ut=[],Bt=((ne=be.fields)==null?void 0:ne.leaveType)||be.projectType==="leave";be.fields&&Object.entries(be.fields).forEach(([Fe,rt])=>{if(["title","status","leaveType","leaveReason"].includes(Fe))return;let bt,gt,Ot;if(typeof rt=="string"){const[Dr,yr]=rt.split(" - ");bt=ze(Dr),gt=ze(yr),Ot="Ongoing"}else rt!=null&&rt.startDate&&(rt!=null&&rt.endDate)&&(bt=ze(rt.startDate),gt=ze(rt.endDate),Ot=rt.status||"Ongoing");bt&&gt&&Ut.push({name:Fe,startDate:bt,endDate:gt,status:Ot,color:Bt?"#8b5cf6":Ot!=null&&Ot.toLowerCase().includes("complete")?"#3b82f6":"#10b981"})}),Ut.sort((Fe,rt)=>!Fe.startDate&&!rt.startDate?0:Fe.startDate?rt.startDate?Fe.startDate-rt.startDate:-1:1);const X=Ut.length,$=Ut.filter(Fe=>{var rt;return(rt=Fe.status)==null?void 0:rt.toLowerCase().includes("complete")}).length,Ze=X>0?Math.round($/X*100):0,ft=[];return Lt.forEach(Fe=>{Fe.fields&&Object.entries(Fe.fields).forEach(([rt,bt])=>{["title","status"].includes(rt)||bt!=null&&bt.startDate&&(bt!=null&&bt.endDate)&&ft.push({name:rt,startDate:ze(bt.startDate),endDate:ze(bt.endDate),status:bt.status||"Ongoing",allocatedHours:bt.allocatedHours||0,weeklyPlanId:Fe.Id})})}),t.jsxs(bo.Fragment,{children:[t.jsx("div",{style:{marginBottom:"4px"},children:t.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${tt.length}, 1fr)`,gap:"0",alignItems:"center"},children:[t.jsxs("div",{style:{...T.taskName,display:"flex",flexDirection:"column",minHeight:"80px",justifyContent:"center",borderLeft:"3px solid #3b82f6"},children:[t.jsx("div",{style:T.planTypeBadge(re.includes(be.project)),children:re.includes(be.project)?"OPERATION":((Le=be.projectType)==null?void 0:Le.toUpperCase())||"PROJECT"}),S==="supervised"&&t.jsx("div",{style:{display:"inline-block",padding:"4px 10px",borderRadius:"999px",fontSize:"11px",fontWeight:"700",marginBottom:"6px",backgroundColor:"rgba(239,68,68,0.15)",color:"#ef4444",width:"fit-content"},children:"READ-ONLY"}),t.jsx("div",{style:{fontWeight:"700",fontSize:"14px",marginBottom:"4px"},children:be.title}),t.jsx("div",{style:{fontSize:"11px",color:F?"#94a3b8":"#64748b",marginBottom:"6px"},children:be.project}),X>0&&t.jsxs("div",{style:{marginTop:"4px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2px"},children:[t.jsxs("span",{style:{fontSize:"10px",fontWeight:"600",color:F?"#94a3b8":"#64748b"},children:[$,"/",X]}),t.jsxs("span",{style:{fontSize:"10px",fontWeight:"700",color:Ze===100?"#10b981":"#3b82f6"},children:[Ze,"%"]})]}),t.jsx("div",{style:{height:"4px",backgroundColor:F?"rgba(51,65,85,0.5)":"rgba(226,232,240,0.8)",borderRadius:"2px",overflow:"hidden"},children:t.jsx("div",{style:{height:"100%",width:`${Ze}%`,backgroundColor:Ze===100?"#10b981":"#3b82f6",borderRadius:"2px",transition:"width 0.3s ease"}})})]}),X===0&&be.projectType==="admin"&&t.jsx("div",{style:{marginTop:"4px"},children:t.jsx("span",{style:{fontSize:"10px",fontWeight:"600",color:F?"#94a3b8":"#64748b",fontStyle:"italic"},children:"Ongoing overhead activities"})})]}),tt.map((Fe,rt)=>t.jsx("div",{style:{...T.ganttCell}},rt))]})}),Ut.length>0&&t.jsxs("div",{style:{position:"relative",marginBottom:"4px"},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${tt.length}, 1fr)`,gap:"0",alignItems:"center"},children:[t.jsxs("div",{style:{...T.taskName,paddingLeft:"32px",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"50px",backgroundColor:F?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.5)",borderLeft:"2px solid #3b82f6"},children:[t.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:F?"#e2e8f0":"#1e293b"},children:" Timeline"}),S==="my"&&t.jsx("button",{style:T.actionButton(c===`edit-${be.id}`,"#3b82f6"),onMouseEnter:()=>p(`edit-${be.id}`),onMouseLeave:()=>p(null),title:"Edit Plan",onClick:Fe=>{Fe.stopPropagation(),window.location.href=`/admineditindividualplan/${be.id}`},children:t.jsx(ms,{size:12})})]}),tt.map((Fe,rt)=>t.jsx("div",{style:{...T.ganttCell,position:"relative"}},rt))]}),t.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,height:"100%",display:"grid",gridTemplateColumns:`200px repeat(${tt.length}, 1fr)`,gap:"0",pointerEvents:"none"},children:[t.jsx("div",{}),Ut.map((Fe,rt)=>{const bt=zt(Fe.startDate),gt=zt(Fe.endDate);if(bt===-1||gt===-1)return null;const Ot=new Date(Fe.startDate.getFullYear(),Fe.startDate.getMonth()+1,0).getDate(),Dr=new Date(Fe.endDate.getFullYear(),Fe.endDate.getMonth()+1,0).getDate(),yr=Fe.startDate.getDate()/Ot*100,cr=Fe.endDate.getDate()/Dr*100,Po=`calc(200px + ((100% - 200px) / ${tt.length}) * ${bt} + ((100% - 200px) / ${tt.length}) * ${yr/100})`,Wi=`calc(((100% - 200px) / ${tt.length}) * ${gt-bt} + ((100% - 200px) / ${tt.length}) * ${(cr-yr)/100})`;return t.jsx("div",{style:{position:"absolute",left:Po,width:Wi,top:"50%",transform:"translateY(-50%)",height:"24px",backgroundColor:Fe.color,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"11px",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",cursor:"pointer",zIndex:999,pointerEvents:"auto"},onMouseEnter:No=>{const sr=No.currentTarget.getBoundingClientRect(),ii=fe.current.getBoundingClientRect();Oe({planId:be.id,milestone:Fe,barRect:sr,cardRect:ii,isTopRow:!1})},onMouseLeave:()=>{requestAnimationFrame(()=>{j.current||Oe(null)})},children:t.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"0 8px"},children:Fe.name})},rt)})]})]}),ft.length>0&&t.jsxs("div",{style:{position:"relative",marginBottom:"4px"},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${tt.length}, 1fr)`,gap:"0",alignItems:"center"},children:[t.jsxs("div",{style:{...T.taskName,paddingLeft:"32px",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"50px",backgroundColor:F?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.5)",borderLeft:"2px solid #f59e0b"},children:[t.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:F?"#e2e8f0":"#1e293b"},children:" Weekly Allocation"}),S==="my"&&t.jsx("button",{style:T.actionButton(c===`edit-weekly-${be.id}`,"#f59e0b"),onMouseEnter:()=>p(`edit-weekly-${be.id}`),onMouseLeave:()=>p(null),title:"Edit Weekly Allocation",onClick:Fe=>{Fe.stopPropagation();const rt=new URLSearchParams({projectName:be.project,projectType:be.projectType,isWeekly:"true"});window.location.href=`/admineditindividualplan?${rt.toString()}`},children:t.jsx(ms,{size:12})})]}),tt.map((Fe,rt)=>t.jsx("div",{style:{...T.ganttCell,position:"relative"}},rt))]}),t.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,height:"100%",display:"grid",gridTemplateColumns:`200px repeat(${tt.length}, 1fr)`,gap:"0",pointerEvents:"none"},children:[t.jsx("div",{}),ft.map((Fe,rt)=>{const bt=zt(Fe.startDate),gt=zt(Fe.endDate);if(bt===-1||gt===-1)return null;const Ot=new Date(Fe.startDate.getFullYear(),Fe.startDate.getMonth()+1,0).getDate(),Dr=new Date(Fe.endDate.getFullYear(),Fe.endDate.getMonth()+1,0).getDate(),yr=Fe.startDate.getDate()/Ot*100,cr=Fe.endDate.getDate()/Dr*100,Po=`calc(200px + ((100% - 200px) / ${tt.length}) * ${bt} + ((100% - 200px) / ${tt.length}) * ${yr/100})`,Wi=`calc(((100% - 200px) / ${tt.length}) * ${gt-bt} + ((100% - 200px) / ${tt.length}) * ${(cr-yr)/100})`;return t.jsx("div",{style:{position:"absolute",left:Po,width:Wi,top:"50%",transform:"translateY(-50%)",height:"20px",backgroundColor:"#f59e0b",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"9px",fontWeight:"600",boxShadow:"0 2px 8px rgba(245,158,11,0.3)",cursor:"pointer",zIndex:999,pointerEvents:"auto"},onMouseEnter:No=>{const sr=No.currentTarget.getBoundingClientRect(),ii=fe.current.getBoundingClientRect();Oe({planId:be.id,milestone:Fe,barRect:sr,cardRect:ii,isTopRow:!1,isWeekly:!0})},onMouseLeave:()=>{requestAnimationFrame(()=>{j.current||Oe(null)})},children:t.jsxs("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"0 4px"},children:[Fe.allocatedHours,"h"]})},rt)})]})]})]},be.id)}),ir!==-1&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"absolute",top:"60px",bottom:"0",left:`calc(200px + ((100% - 200px) * (${ir} / ${tt.length})) + ((100% - 200px) * (${Yt} / 100 / ${tt.length})))`,width:"2px",backgroundImage:"linear-gradient(to bottom, #ef4444 60%, transparent 60%)",backgroundSize:"2px 16px",backgroundRepeat:"repeat-y",zIndex:100,pointerEvents:"none"}}),t.jsx("div",{style:{position:"absolute",top:"8px",left:`calc(200px + ((100% - 200px) * (${ir} / ${tt.length})) + ((100% - 200px) * (${Yt} / 100 / ${tt.length})))`,transform:"translateX(-50%)",backgroundColor:"#ef4444",color:"#fff",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"700",whiteSpace:"nowrap",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:101},children:"Today"})]}),t.jsxs("div",{style:{display:"flex",gap:"20px",marginTop:"40px",padding:"12px 16px",backgroundColor:F?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"8px",justifyContent:"center"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",backgroundColor:"#10b981"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:F?"#e2e8f0":"#475569"},children:"Ongoing"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",backgroundColor:"#3b82f6"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:F?"#e2e8f0":"#475569"},children:"Completed"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",backgroundColor:"#f59e0b"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:F?"#e2e8f0":"#475569"},children:"Weekly Allocation"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",backgroundColor:"#8b5cf6"}}),t.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:F?"#e2e8f0":"#475569"},children:"Leave"})]})]})]}),de&&t.jsxs("div",{onMouseEnter:()=>{j.current=!0},onMouseLeave:()=>{j.current=!1,Oe(null)},style:{position:"absolute",left:de.barRect.left-de.cardRect.left+de.barRect.width/2,[de.isTopRow?"top":"bottom"]:de.isTopRow?de.barRect.top-de.cardRect.top-4:de.cardRect.bottom-de.barRect.bottom-4,transform:de.isTopRow?"translate(-50%, -100%)":"translate(-50%, 100%)",backgroundColor:F?"rgba(30,41,59,0.97)":"rgba(255,255,255,0.97)",backdropFilter:"blur(12px)",borderRadius:"10px",padding:"12px 16px",fontSize:"12px",fontWeight:"600",color:F?"#e2e8f0":"#1e293b",boxShadow:"0 20px 60px rgba(0,0,0,0.4)",border:F?"1px solid rgba(51,65,85,0.9)":"1px solid rgba(226,232,240,0.9)",zIndex:9999999,pointerEvents:"auto",maxWidth:"320px"},children:[t.jsx("div",{style:{fontWeight:"700",marginBottom:"4px"},children:de.milestone.name}),t.jsxs("div",{style:{fontSize:"11px",opacity:.9,marginBottom:"8px"},children:[de.milestone.startDate.toLocaleDateString()," "," ",de.milestone.endDate.toLocaleDateString()]}),de.isWeekly&&t.jsxs("div",{style:{fontSize:"11px",padding:"4px 8px",borderRadius:"6px",backgroundColor:"rgba(245,158,11,0.15)",color:"#f59e0b",marginBottom:"8px"},children:["Weekly Allocation: ",de.milestone.allocatedHours,"h"]}),S==="supervised"&&t.jsx("div",{style:{fontSize:"10px",fontWeight:"700",color:"#ef4444",backgroundColor:"rgba(239,68,68,0.15)",padding:"4px 8px",borderRadius:"999px",textAlign:"center"},children:"READ-ONLY (SUPERVISED)"}),S==="my"&&!de.isWeekly&&t.jsx("button",{style:{marginTop:"8px",width:"100%",padding:"6px 10px",borderRadius:"8px",border:"none",backgroundColor:"#3b82f6",color:"#fff",fontSize:"11px",fontWeight:"600",cursor:"pointer"},onClick:be=>{be.stopPropagation(),Be({planId:de.planId,milestoneName:de.milestone.name,currentStatus:de.milestone.status}),Ve(!0),Oe(null)},children:"Change Status"})]})]})]})},w=()=>t.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"24px"},children:[t.jsx("div",{style:{...T.searchInput,position:"relative",background:F?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",border:"none",height:"44px",flex:1}}),t.jsx("div",{style:{width:"180px",height:"44px",borderRadius:"12px",background:F?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx("div",{style:{width:"160px",height:"44px",borderRadius:"12px",background:F?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),ce=()=>t.jsxs("div",{style:{...T.ganttCard(!1),marginTop:"24px"},children:[t.jsx("div",{style:{width:"280px",height:"24px",borderRadius:"8px",marginBottom:"24px",background:F?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"200px repeat(6, 1fr)",gap:"0",marginBottom:"16px",backgroundColor:F?"#4b5563":"#f8fafc",borderRadius:"12px",padding:"12px",minHeight:"48px"},children:[t.jsx("div",{style:{background:F?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"8px",height:"20px"}}),[...Array(6)].map((P,z)=>t.jsx("div",{style:{background:F?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"8px",height:"20px",animationDelay:`${z*.1}s`}},z))]}),[...Array(4)].map((P,z)=>t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"200px repeat(6, 1fr)",gap:"0",marginBottom:"12px",alignItems:"center"},children:[t.jsxs("div",{style:{backgroundColor:F?"#4b5563":"#f8fafc",borderRadius:"12px",padding:"20px",minHeight:"80px",display:"flex",flexDirection:"column",gap:"8px"},children:[t.jsx("div",{style:{width:"80px",height:"18px",borderRadius:"999px",background:F?"linear-gradient(90deg, rgba(59,130,246,0.3) 25%, rgba(59,130,246,0.4) 50%, rgba(59,130,246,0.3) 75%)":"linear-gradient(90deg, rgba(59,130,246,0.2) 25%, rgba(59,130,246,0.3) 50%, rgba(59,130,246,0.2) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx("div",{style:{width:"140px",height:"14px",borderRadius:"6px",background:F?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx("div",{style:{width:"100px",height:"10px",borderRadius:"6px",background:F?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),[...Array(6)].map((xe,Me)=>t.jsx("div",{style:{height:"80px",position:"relative",display:"flex",alignItems:"center",padding:"0 4px"},children:(z+Me)%2===0&&t.jsx("div",{style:{width:`${60+z*15}%`,height:"24px",borderRadius:"6px",background:F?"linear-gradient(90deg, rgba(16,185,129,0.3) 25%, rgba(16,185,129,0.4) 50%, rgba(16,185,129,0.3) 75%)":"linear-gradient(90deg, rgba(16,185,129,0.2) 25%, rgba(16,185,129,0.3) 50%, rgba(16,185,129,0.2) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${(z+Me)*.1}s`}})},Me))]},z)),t.jsx("div",{style:{display:"flex",gap:"20px",marginTop:"40px",padding:"12px 16px",backgroundColor:F?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"8px",justifyContent:"center"},children:[...Array(3)].map((P,z)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",background:F?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx("div",{style:{width:"60px",height:"12px",borderRadius:"6px",background:F?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${z*.1}s`}})]},z))})]});return a?t.jsxs("div",{className:"admin-individual-plan-page",style:T.page,children:[t.jsxs("div",{style:T.headerRow,children:[t.jsx("div",{style:T.headerLeft,children:t.jsx("h1",{style:T.header,children:"Plan"})}),t.jsxs("div",{style:T.headerRight,children:[t.jsxs("button",{style:T.topButton(!1),disabled:!0,children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:T.notificationBadge})]}),t.jsx("button",{style:T.topButton(!1),disabled:!0,children:t.jsx(qt,{size:20})})]})]}),t.jsx("div",{style:T.tabContainer,children:["Master Plan","Individual Plan","Approvals"].map(P=>t.jsx("button",{style:T.tab(P==="Individual Plan",!1),disabled:!0,children:P},P))}),t.jsxs("div",{style:T.sectionHeader,children:[t.jsxs("div",{children:[t.jsxs("h2",{style:T.sectionTitle,children:["My Individual Plan",t.jsx("span",{style:{marginLeft:"12px",fontSize:"14px",fontWeight:"600",color:F?"#94a3b8":"#64748b"},children:"(...)"})]}),t.jsx("p",{style:T.sectionSubtitle,children:"Loading your assignments..."})]}),t.jsxs("button",{style:{...T.createButton(!1),opacity:.5,cursor:"not-allowed"},disabled:!0,children:[t.jsx(Sr,{size:16}),"Add New Assignment"]})]}),t.jsx(w,{}),t.jsx(ce,{})]}):t.jsxs("div",{className:"admin-individual-plan-page",style:T.page,children:[t.jsxs("div",{style:T.headerRow,children:[t.jsx("div",{style:T.headerLeft,children:t.jsx("h1",{style:T.header,children:"Plan"})}),t.jsxs("div",{style:T.headerRight,children:[t.jsxs("button",{style:T.topButton(d==="alerts"),onMouseEnter:()=>m("alerts"),onMouseLeave:()=>m(null),onClick:()=>{console.log(" Alerts clicked - Navigating to alerts page"),window.location.href="/adminalerts"},children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:T.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:T.topButton(d==="profile"),onMouseEnter:()=>{m("profile"),y(!0)},onMouseLeave:()=>{m(null)},onClick:()=>{console.log(" Profile clicked - Navigating to profile page"),window.location.href="/adminprofile"},children:t.jsx(qt,{size:20})}),g&&t.jsxs("div",{style:T.profileTooltip,onMouseEnter:()=>{y(!0)},onMouseLeave:()=>{y(!1)},children:[t.jsx("div",{style:T.tooltipArrow}),t.jsxs("div",{style:T.userInfo,children:[t.jsx("div",{style:T.avatar,children:o&&((((Ce=o.firstName)==null?void 0:Ce[0])||"")+(((H=o.lastName)==null?void 0:H[0])||"")).toUpperCase()||"U"}),t.jsxs("div",{style:T.userDetails,children:[t.jsx("div",{style:T.userName,children:o?`${o.firstName} ${o.lastName}`:"Loading..."}),t.jsx("div",{style:T.userRole,children:o?`${o.role||"User"}  ${o.department||"Department"}`:""})]})]}),t.jsxs("div",{style:T.userStats,children:[t.jsxs("div",{style:T.tooltipStatItem,children:[t.jsx("div",{style:T.tooltipStatNumber,children:Ne.length}),t.jsx("div",{style:T.tooltipStatLabel,children:"My Plans"})]}),t.jsxs("div",{style:T.tooltipStatItem,children:[t.jsx("div",{style:T.tooltipStatNumber,children:Ee.length}),t.jsx("div",{style:T.tooltipStatLabel,children:"Supervised"})]}),t.jsxs("div",{style:T.tooltipStatItem,children:[t.jsx("div",{style:T.tooltipStatNumber,children:we}),t.jsx("div",{style:T.tooltipStatLabel,children:"Pending"})]})]}),t.jsx("button",{style:T.themeToggle,onClick:V,children:F?" Light Mode":" Dark Mode"})]})]})]})]}),t.jsx("div",{style:T.tabContainer,children:["Master Plan","Individual Plan","Approvals"].map(P=>t.jsx("button",{style:T.tab(b===P,c===`tab-${P}`),onMouseEnter:()=>p(`tab-${P}`),onMouseLeave:()=>p(null),onClick:()=>Y(P),children:P},P))}),t.jsxs("div",{style:T.sectionHeader,children:[t.jsxs("div",{children:[t.jsxs("h2",{style:T.sectionTitle,children:["My Individual Plan",t.jsxs("span",{style:{marginLeft:"12px",fontSize:"14px",fontWeight:"600",color:F?"#94a3b8":"#64748b"},children:["(",Ne.length,")"]})]}),t.jsx("p",{style:{...T.sectionSubtitle,minHeight:"20px",animation:"fadeIn 0.4s ease"},children:typeof B[ge]=="function"?B[ge]():B[ge]},ge)]}),t.jsxs("button",{style:T.createButton(c==="create"),onMouseEnter:()=>p("create"),onMouseLeave:()=>p(null),onClick:()=>{window.location.href="/adminaddindividualplan"},children:[t.jsx(Sr,{size:16}),"Add New Assignment"]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",marginBottom:"24px"},children:[t.jsxs("div",{style:T.searchContainer,children:[t.jsx($A,{size:18,style:T.searchIcon}),t.jsx("input",{type:"text",placeholder:S==="my"?"Search your assignments by title or project...":"Search supervised assignments...",value:ee,onChange:P=>Re(P.target.value),style:T.searchInput})]}),t.jsx("div",{style:{...T.viewModeToggle,position:"relative",zIndex:10001},children:t.jsx(Tt,{value:se,onChange:P=>{Z(P)},options:["All Types","Master Plan","Operations","Custom Projects","Planned Leave"],placeholder:"Filter by type...",isDarkMode:F,compact:!0,searchable:!1,clearable:!1})}),me.length===1&&t.jsxs("div",{style:T.viewModeToggle,children:[t.jsx("button",{style:T.viewModeButton(M==="timeline"),onClick:()=>Ie("timeline"),children:"Timeline"}),t.jsx("button",{style:T.viewModeButton(M==="waterfall"),onClick:()=>Ie("waterfall"),children:"Waterfall"})]}),G&&t.jsxs("div",{style:T.viewModeToggle,children:[t.jsx("button",{style:T.viewModeButton(S==="my"),onClick:()=>N("my"),children:"My Plans"}),t.jsx("button",{style:T.viewModeButton(S==="supervised"),onClick:()=>N("supervised"),children:"Supervised Plans"})]})]}),wt(),Ge&&ke&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:t.jsxs("div",{style:{backgroundColor:F?"#374151":"#fff",borderRadius:"20px",padding:"32px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:F?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)"},children:[t.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:F?"#e2e8f0":"#1e293b",marginBottom:"8px"},children:ke.isOverallStatus?"Update Plan Status":"Change Milestone Status"}),t.jsx("p",{style:{fontSize:"14px",color:F?"#94a3b8":"#64748b",marginBottom:"24px"},children:ke.isOverallStatus?ke.planTitle:ke.milestoneName}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:(ke.isOverallStatus?["Completed","Ongoing"]:["Ongoing","Completed"]).map(P=>t.jsxs("button",{onClick:async()=>{try{if(ke.isOverallStatus){if(!(await Te(`/plan/individual/${ke.planId}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({...me.find(xe=>xe.id===ke.planId),fields:{...me.find(xe=>xe.id===ke.planId).fields,status:P}})})).ok)throw new Error("Failed to update plan status");n(xe=>xe.map(Me=>{if(Me.Id===ke.planId){const O={...Me.Fields,status:P};return{...Me,Fields:O}}return Me})),alert(` Plan status updated to ${P}`)}else{if(!(await Te(`/plan/individual/${ke.planId}/milestone`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({milestoneName:ke.milestoneName,status:P})})).ok)throw new Error("Failed to update milestone status");n(xe=>xe.map(Me=>{if(Me.Id===ke.planId){const O={...Me.Fields};return O[ke.milestoneName]&&(O[ke.milestoneName].status=P),{...Me,Fields:O}}return Me})),alert(` ${ke.milestoneName} status updated to ${P}`)}Ve(!1),Be(null)}catch(z){console.error(" Failed to update status:",z),alert(`Failed to update status: ${z.message}`)}},style:{padding:"16px",borderRadius:"12px",border:ke.currentStatus===P?`2px solid ${P.includes("Complete")?"#3b82f6":"#10b981"}`:F?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:ke.currentStatus===P?P.includes("Complete")?"#3b82f620":"#10b98120":F?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",color:F?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left",display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:P.includes("Complete")?"#3b82f6":"#10b981"}}),P]},P))}),t.jsx("button",{onClick:()=>{Ve(!1),Be(null)},style:{width:"100%",padding:"12px",borderRadius:"12px",border:"none",backgroundColor:F?"rgba(51,65,85,0.5)":"rgba(226,232,240,0.3)",color:F?"#e2e8f0":"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"})]})})]})},A8=()=>{var T,wt;const[o,e]=h.useState(null),[r,n]=h.useState(null),[a,A]=h.useState(!1),[c,p]=h.useState("Approvals"),[d,m]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[g,y]=h.useState(""),[b,R]=h.useState("Pending Approval"),[C,Q]=h.useState(!1),[S,N]=h.useState(null),[M,Ie]=h.useState(null),fe={"Pending Approval":"pendingApproval",Approved:"approved",Rejected:"rejected"},[F,ae]=h.useState(0),[ee,Re]=h.useState(!1),[se,Z]=h.useState(!1),[ue,pe]=h.useState([]),[we,Pe]=h.useState({pendingApproval:0,underReview:0,approved:0,rejected:0}),re={"Pending Approval":["Plans awaiting your decision",`${we.pendingApproval} plans pending approval`,"Timely reviews keep projects moving"],Approved:["Approved master plans",`${we.approved} plans approved`,"These plans are now in execution"],Rejected:["Rejected master plans",`${we.rejected} plans rejected`,"Rejected plans require revision"]},[Ee,k]=h.useState(!1),[ge,_]=h.useState(""),[G,E]=h.useState(!0),[D,ie]=h.useState(null),[L,j]=h.useState(!1),[de,Oe]=h.useState(""),[Ge,Ve]=h.useState(null),ke=h.useRef(null),Be=h.useRef(null),nt=h.useRef(null),yt=async()=>{try{const w=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(w.ok){const ce=await w.json();ie(ce)}}catch(w){console.error("Error fetching user profile:",w)}},q=async()=>{try{E(!0),console.log(" Fetching approvals...");const w=await Te("/api/approvals",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!w.ok)throw new Error("Failed to fetch approvals");const ce=await w.json();console.log(" Approvals data received:",ce),pe(ce.approvals),Pe(ce.stats),k(ce.isApprover),_(ce.userEmail)}catch(w){console.error(" Error fetching approvals:",w),alert("Failed to load approvals. Please refresh the page.")}finally{E(!1)}},lt=async(w,ce)=>{if(!Ee){alert("You are not authorized to approve plans.");return}if(confirm("Are you sure you want to approve this master plan?"))try{console.log(` Approving plan ${w}...`);const Ce=await Te(`/api/approvals/${w}/approve`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({comments:""})}),H=await Ce.json();if(!Ce.ok)throw new Error(H.message||"Failed to approve plan");console.log(" Plan approved successfully"),alert("Master plan approved successfully!"),await q()}catch(Ce){console.error(" Error approving plan:",Ce),alert(Ce.message||"Failed to approve plan. Please try again.")}},ye=(w,ce)=>{if(!Ee){alert("You are not authorized to reject plans. Only designated approvers (muhammad.hasan@ihrp.sg and jumana.haseen@ihrp.sg) can reject.");return}Ve({planId:w,currentStatus:ce}),Oe(""),j(!0)},ze=async()=>{if(!de||de.trim().length===0){alert("Please provide a reason for rejection");return}try{console.log(` Rejecting plan ${Ge.planId}...`);const w=await Te(`/api/approvals/${Ge.planId}/reject`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:de.trim()})}),ce=await w.json();if(!w.ok)throw new Error(ce.message||"Failed to reject plan");console.log(" Plan rejected successfully"),alert("Master plan rejected successfully!"),j(!1),Ve(null),Oe(""),await q()}catch(w){console.error(" Error rejecting plan:",w),alert(w.message||"Failed to reject plan. Please try again.")}};if(h.useEffect(()=>{const w=document.getElementById("scrollbar-style");w&&w.remove();const ce=document.createElement("style");return ce.id="scrollbar-style",ce.innerHTML=d?`
      /* Dark mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #1e293b;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #475569;
        border-radius: 10px;
        border: 2px solid #1e293b;
      }

      ::-webkit-scrollbar-thumb:hover {
        background-color: #64748b;
      }

      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #475569 #1e293b;
      }
    `:`
      /* Light mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #cbd5e1;
        border-radius: 10px;
        border: 2px solid #f1f5f9;
      }

      ::-webkit-scrollbar-thumb:hover {
        background-color: #94a3b8;
      }

      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #cbd5e1 #f1f5f9;
      }
    `,document.head.appendChild(ce),()=>{ce.remove()}},[d]),h.useEffect(()=>{q(),yt()},[]),h.useEffect(()=>{Be.current||(Be.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),ke.current&&document.head.removeChild(ke.current);const w=document.createElement("style");w.setAttribute("data-component","admin-approvals-background");const ce=d?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return w.textContent=`
      .admin-approvals-page {
        min-height: 100vh;
        background: ${ce};
      }
      
      body {
        background: ${ce} !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      #root > div:first-child,
      .app > div:first-child,
      .main-content,
      .page-container {
        background: transparent !important;
        min-height: 100vh;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      * {
        transition: background-color 0.3s ease, background 0.3s ease;
      }

      @keyframes shimmer {
        0% {
          background-position: -200% 0;
        }
        100% {
          background-position: 200% 0;
        }
      }
    `,document.head.appendChild(w),ke.current=w,()=>{ke.current&&document.head.contains(ke.current)&&(document.head.removeChild(ke.current),ke.current=null),Be.current&&document.querySelectorAll('[data-component="admin-approvals-background"]').length===0&&Object.assign(document.body.style,Be.current)}},[d]),h.useEffect(()=>{const w=ce=>{nt.current&&!nt.current.contains(ce.target)&&Ie(null)};return M&&document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[M]),h.useEffect(()=>{if(ee)return;const w=setInterval(()=>{ae(ce=>{const Ce=re[b]||[];return Ce.length?(ce+1)%Ce.length:0})},5e3);return()=>clearInterval(w)},[b,re,ee]),h.useEffect(()=>{ae(0)},[b]),typeof document<"u"&&!document.getElementById("fade-style")){const w=document.createElement("style");w.id="fade-style",w.innerHTML=`
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(2px); }
      to { opacity: 1; transform: translateY(0); }
    }
  `,document.head.appendChild(w)}const dt=w=>{console.log(` AdminApprovals - Navigating to ${w} tab`),w==="Master Plan"?window.location.href="/adminviewplan":w==="Individual Plan"&&(window.location.href="/adminindividualplan")},Ne=()=>{m(!d),localStorage.setItem("darkMode",!d),A(!1)},B=w=>{switch(w){case"Pending Approval":return"#ef4444";case"Under Review":return"#f59e0b";case"Approved":return"#10b981";case"Rejected":return"#6b7280";default:return"#6b7280"}},U=w=>{N(w),Z(!1),Q(!0)},Ae=()=>{Q(!1),Z(!1),N(null)},Y=ue.filter(w=>{const ce=w.title.toLowerCase().includes(g.toLowerCase())||w.createdBy.toLowerCase().includes(g.toLowerCase()),Ce=w.status===b;return ce&&Ce}),V={page:{minHeight:"100vh",padding:"30px",background:d?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:d?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},topButton:w=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:w?"rgba(59,130,246,0.1)":d?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:w?"#3b82f6":d?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:w?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:w?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:d?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:d?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:d?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:d?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:d?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:d?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:d?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:d?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:d?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:d?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(w,ce)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",outline:"none",backgroundColor:w?"#3b82f6":ce?d?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:w?"#fff":d?"#e2e8f0":"#64748b",transform:ce&&!w?"translateY(-1px)":"translateY(0)",boxShadow:w?"0 4px 12px rgba(59,130,246,0.3)":ce&&!w?"0 2px 8px rgba(0,0,0,0.1)":"none"}),approverBadge:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"12px",backgroundColor:Ee?"rgba(16,185,129,0.1)":"rgba(107,114,128,0.1)",border:`1px solid ${Ee?"rgba(16,185,129,0.3)":"rgba(107,114,128,0.3)"}`,fontSize:"13px",fontWeight:"600",color:Ee?"#10b981":"#6b7280",marginBottom:"8px"},controlsRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",gap:"16px"},searchContainer:{position:"relative",flex:1,maxWidth:"400px"},searchInput:{width:"100%",padding:"12px 16px 12px 44px",borderRadius:"12px",border:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:d?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:d?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',position:"relative",zIndex:1},searchIcon:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:d?"#94a3b8":"#64748b",transition:"all 0.3s ease",zIndex:2,pointerEvents:"none"},filterContainer:{display:"flex",gap:"8px"},filterButton:(w,ce)=>({padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:w?"#3b82f6":ce?d?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":d?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:w?"#fff":d?"#e2e8f0":"#64748b",backdropFilter:"blur(10px)"}),approvalsGrid:{display:"grid",gap:"24px",marginBottom:"32px"},approvalCard:w=>({backgroundColor:d?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"24px",boxShadow:w?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:w?"translateY(-8px) scale(1.01)":"translateY(0) scale(1)",border:d?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},cardTitle:{fontSize:"20px",fontWeight:"700",color:d?"#e2e8f0":"#1e293b",marginBottom:"4px",transition:"all 0.3s ease"},cardMeta:{fontSize:"14px",color:d?"#94a3b8":"#64748b",marginBottom:"8px"},statusBadge:w=>({display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",backgroundColor:`${B(w)}20`,color:B(w),border:`1px solid ${B(w)}30`}),cardInfo:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",marginBottom:"16px",marginTop:"16px"},infoItem:{display:"flex",flexDirection:"column",gap:"4px"},infoLabel:{fontSize:"12px",fontWeight:"600",color:d?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},infoValue:{fontSize:"14px",fontWeight:"500",color:d?"#e2e8f0":"#374151"},cardActions:{display:"flex",justifyContent:"flex-end",alignItems:"center",paddingTop:"16px",borderTop:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",gap:"8px"},actionButton:(w,ce,Ce)=>{const H={approve:{bg:"#10b981",hover:"#059669"},reject:{bg:"#ef4444",hover:"#dc2626"},view:{bg:"#3b82f6",hover:"#2563eb"}},P=H[w]||H.view;return{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"12px",fontWeight:"600",cursor:Ce?"not-allowed":"pointer",transition:"all 0.3s ease",backgroundColor:Ce?"#9ca3af":ce?P.hover:P.bg,color:"#fff",display:"flex",alignItems:"center",gap:"6px",transform:ce&&!Ce?"translateY(-1px)":"translateY(0)",boxShadow:ce&&!Ce?`0 4px 12px ${P.bg}40`:"none",opacity:Ce?.5:1}},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},modalContent:{backgroundColor:d?"rgba(55,65,81,0.95)":"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"32px",maxWidth:"500px",width:"100%",position:"relative",border:d?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",boxShadow:"0 25px 50px rgba(0,0,0,0.25)",backdropFilter:"blur(20px)"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",borderBottom:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",paddingBottom:"16px"},modalTitle:{fontSize:"24px",fontWeight:"700",color:d?"#e2e8f0":"#1e293b"},closeButton:w=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:w?"rgba(239,68,68,0.1)":"transparent",color:w?"#ef4444":d?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),textarea:{width:"100%",minHeight:"120px",padding:"12px 16px",borderRadius:"12px",border:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:d?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:d?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',resize:"vertical"},modalActions:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"24px"},statsContainer:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"24px"},statCard:w=>({backgroundColor:d?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"28px",textAlign:"center",boxShadow:w?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",border:d?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:w?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",cursor:"pointer",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),statNumber:{fontSize:"36px",fontWeight:"800",color:d?"#e2e8f0":"#1e293b",marginBottom:"8px",transition:"all 0.3s ease"},statLabel:{fontSize:"14px",color:d?"#94a3b8":"#64748b",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",color:d?"#94a3b8":"#64748b"},emptyState:{textAlign:"center",padding:"60px 20px",color:d?"#94a3b8":"#64748b"}},ve=()=>t.jsxs("div",{style:{...V.approvalCard(!1),pointerEvents:"none"},children:[t.jsxs("div",{style:V.cardHeader,children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{width:"60%",height:"24px",borderRadius:"8px",marginBottom:"8px",background:d?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx("div",{style:{width:"80%",height:"16px",borderRadius:"6px",background:d?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),t.jsx("div",{style:{width:"120px",height:"36px",borderRadius:"12px",background:d?"linear-gradient(90deg, rgba(59,130,246,0.3) 25%, rgba(59,130,246,0.4) 50%, rgba(59,130,246,0.3) 75%)":"linear-gradient(90deg, rgba(59,130,246,0.2) 25%, rgba(59,130,246,0.3) 50%, rgba(59,130,246,0.2) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),t.jsx("div",{style:V.cardInfo,children:[...Array(4)].map((w,ce)=>t.jsxs("div",{style:V.infoItem,children:[t.jsx("div",{style:{width:"60%",height:"12px",borderRadius:"4px",marginBottom:"4px",background:d?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${ce*.1}s`}}),t.jsx("div",{style:{width:"80%",height:"16px",borderRadius:"6px",background:d?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${ce*.1}s`}})]},ce))}),t.jsx("div",{style:V.cardActions,children:[...Array(2)].map((w,ce)=>t.jsx("div",{style:{width:"100px",height:"32px",borderRadius:"8px",background:d?"linear-gradient(90deg, rgba(59,130,246,0.3) 25%, rgba(59,130,246,0.4) 50%, rgba(59,130,246,0.3) 75%)":"linear-gradient(90deg, rgba(59,130,246,0.2) 25%, rgba(59,130,246,0.3) 50%, rgba(59,130,246,0.2) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${ce*.1}s`}},ce))})]}),me=()=>t.jsxs("div",{style:{...V.statCard(!1),pointerEvents:"none"},children:[t.jsx("div",{style:{width:"60px",height:"36px",borderRadius:"8px",margin:"0 auto 8px",background:d?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx("div",{style:{width:"80px",height:"14px",borderRadius:"6px",margin:"0 auto",background:d?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]});return G?t.jsxs("div",{className:"admin-approvals-page",style:V.page,children:[t.jsxs("div",{style:V.headerRow,children:[t.jsx("div",{style:V.headerLeft,children:t.jsx("h1",{style:V.header,children:"Plan"})}),t.jsxs("div",{style:V.headerRight,children:[t.jsxs("button",{style:V.topButton(!1),disabled:!0,children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:V.notificationBadge})]}),t.jsx("button",{style:V.topButton(!1),disabled:!0,children:t.jsx(qt,{size:20})})]})]}),t.jsx("div",{style:V.tabContainer,children:["Master Plan","Individual Plan","Approvals"].map(w=>t.jsx("button",{style:V.tab(w==="Approvals",!1),disabled:!0,children:w},w))}),t.jsxs("div",{style:{marginBottom:"32px"},children:[t.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",color:d?"#e2e8f0":"#1e293b",margin:0},children:"Approvals"}),t.jsx("p",{style:{fontSize:"14px",color:d?"#94a3b8":"#64748b",margin:"4px 0 12px 0"},children:"Loading approvals..."}),t.jsx("div",{style:{width:"280px",height:"40px",borderRadius:"12px",background:d?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),t.jsxs("div",{style:V.controlsRow,children:[t.jsx("div",{style:{...V.searchInput,background:d?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",border:"none",height:"44px"}}),t.jsx("div",{style:{display:"flex",gap:"8px"},children:[...Array(3)].map((w,ce)=>t.jsx("div",{style:{width:"140px",height:"36px",borderRadius:"8px",background:d?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${ce*.1}s`}},ce))})]}),t.jsx("div",{style:V.approvalsGrid,children:[...Array(3)].map((w,ce)=>t.jsx(ve,{},ce))}),t.jsx("div",{style:V.statsContainer,children:[...Array(3)].map((w,ce)=>t.jsx(me,{},ce))})]}):t.jsxs("div",{className:"admin-approvals-page",style:V.page,children:[t.jsxs("div",{style:V.headerRow,children:[t.jsx("div",{style:V.headerLeft,children:t.jsx("h1",{style:V.header,children:"Plan"})}),t.jsxs("div",{style:V.headerRight,children:[t.jsxs("button",{style:V.topButton(r==="alerts"),onMouseEnter:()=>n("alerts"),onMouseLeave:()=>n(null),onClick:()=>window.location.href="/adminalerts",children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:V.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:V.topButton(r==="profile"),onMouseEnter:()=>{n("profile"),A(!0)},onMouseLeave:()=>n(null),onClick:()=>window.location.href="/adminprofile",children:t.jsx(qt,{size:20})}),a&&D&&t.jsxs("div",{style:V.profileTooltip,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[t.jsx("div",{style:V.tooltipArrow}),t.jsxs("div",{style:V.userInfo,children:[t.jsxs("div",{style:V.avatar,children:[(((T=D.firstName)==null?void 0:T[0])||"").toUpperCase(),(((wt=D.lastName)==null?void 0:wt[0])||"").toUpperCase()]}),t.jsxs("div",{style:V.userDetails,children:[t.jsxs("div",{style:V.userName,children:[D.firstName," ",D.lastName]}),t.jsxs("div",{style:V.userRole,children:[D.role==="admin"?"Admin":"Member","  ",D.department]})]})]}),t.jsxs("div",{style:V.userStats,children:[t.jsxs("div",{style:V.tooltipStatItem,children:[t.jsx("div",{style:V.tooltipStatNumber,children:we.pendingApproval}),t.jsx("div",{style:V.tooltipStatLabel,children:"Pending"})]}),t.jsxs("div",{style:V.tooltipStatItem,children:[t.jsx("div",{style:V.tooltipStatNumber,children:we.approved}),t.jsx("div",{style:V.tooltipStatLabel,children:"Approved"})]}),t.jsxs("div",{style:V.tooltipStatItem,children:[t.jsx("div",{style:V.tooltipStatNumber,children:we.rejected}),t.jsx("div",{style:V.tooltipStatLabel,children:"Rejected"})]})]}),t.jsx("button",{style:V.themeToggle,onClick:Ne,children:d?" Light Mode":" Dark Mode"})]})]})]})]}),t.jsx("div",{style:V.tabContainer,children:["Master Plan","Individual Plan","Approvals"].map(w=>t.jsx("button",{style:V.tab(c===w,o===`tab-${w}`),onMouseEnter:()=>e(`tab-${w}`),onMouseLeave:()=>e(null),onClick:()=>dt(w),children:w},w))}),t.jsxs("div",{style:{marginBottom:"32px"},children:[t.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",color:d?"#e2e8f0":"#1e293b",margin:0},children:"Approvals"}),t.jsx("p",{style:{fontSize:"14px",color:d?"#94a3b8":"#64748b",margin:"4px 0 12px 0",animation:"fadeIn 0.4s ease",cursor:"default"},onMouseEnter:()=>Re(!0),onMouseLeave:()=>Re(!1),children:(re[b]||[])[F]},`${b}-${F}`),t.jsx("div",{style:V.approverBadge,children:Ee?t.jsxs(t.Fragment,{children:[t.jsx(jc,{size:16}),"Authorized Approver (",ge,")"]}):t.jsxs(t.Fragment,{children:[t.jsx(io,{size:16}),"View Only (",ge,")"]})})]}),t.jsxs("div",{style:V.controlsRow,children:[t.jsxs("div",{style:V.searchContainer,children:[t.jsx($A,{size:18,style:V.searchIcon}),t.jsx("input",{type:"text",placeholder:"Search approvals by title or creator...",value:g,onChange:w=>y(w.target.value),style:V.searchInput})]}),t.jsx("div",{style:V.filterContainer,children:["Pending Approval","Approved","Rejected"].map(w=>t.jsxs("button",{style:V.filterButton(b===w,o===`filter-${w}`),onMouseEnter:()=>e(`filter-${w}`),onMouseLeave:()=>e(null),onClick:()=>R(w),children:[w," (",we[fe[w]]||0,")"]},w))})]}),t.jsx("div",{style:V.approvalsGrid,children:Y.map(w=>t.jsxs("div",{style:V.approvalCard(r===`approval-${w.id}`),onMouseEnter:()=>n(`approval-${w.id}`),onMouseLeave:()=>n(null),children:[t.jsxs("div",{style:V.cardHeader,children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:V.cardTitle,children:w.title}),t.jsxs("div",{style:V.cardMeta,children:["Created by: ",w.createdBy," (",w.createdByEmail,")  ",w.department,"  ",new Date(w.createdDate).toLocaleDateString("en-GB")]})]}),t.jsx("div",{style:V.statusBadge(w.status),children:w.status})]}),t.jsxs("div",{style:V.cardInfo,children:[t.jsxs("div",{style:V.infoItem,children:[t.jsx("div",{style:V.infoLabel,children:"Start Date"}),t.jsx("div",{style:V.infoValue,children:new Date(w.startDate).toLocaleDateString("en-GB")})]}),t.jsxs("div",{style:V.infoItem,children:[t.jsx("div",{style:V.infoLabel,children:"End Date"}),t.jsx("div",{style:V.infoValue,children:new Date(w.endDate).toLocaleDateString("en-GB")})]}),t.jsxs("div",{style:V.infoItem,children:[t.jsx("div",{style:V.infoLabel,children:"Milestones"}),t.jsx("div",{style:V.infoValue,children:w.milestoneCount})]}),w.latestUpdate&&t.jsxs("div",{style:V.infoItem,children:[t.jsx("div",{style:V.infoLabel,children:w.status==="Pending Approval"?"Pending Changes":"Last Update"}),t.jsxs("div",{style:V.infoValue,children:[w.latestUpdate.changeCount," update",w.latestUpdate.changeCount>1?"s":""]})]}),w.approvedBy&&t.jsxs("div",{style:V.infoItem,children:[t.jsx("div",{style:V.infoLabel,children:"Approved By"}),t.jsxs("div",{style:V.infoValue,children:[w.approvedBy," on ",new Date(w.approvedAt).toLocaleDateString("en-GB")]})]}),w.rejectedBy&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:V.infoItem,children:[t.jsx("div",{style:V.infoLabel,children:"Rejected By"}),t.jsxs("div",{style:V.infoValue,children:[w.rejectedBy," on ",new Date(w.rejectedAt).toLocaleDateString("en-GB")]})]}),t.jsxs("div",{style:V.infoItem,children:[t.jsx("div",{style:V.infoLabel,children:"Rejection Reason"}),t.jsx("div",{style:V.infoValue,children:w.rejectionReason})]})]})]}),t.jsxs("div",{style:V.cardActions,children:[t.jsxs("button",{style:V.actionButton("view",o===`view-${w.id}`,!1),onMouseEnter:()=>e(`view-${w.id}`),onMouseLeave:()=>e(null),onClick:()=>U(w),children:[t.jsx(ri,{size:14}),"View Details"]}),w.canApprove&&w.status==="Pending Approval"&&t.jsxs("button",{style:V.actionButton("approve",o===`approve-${w.id}`,!1),onMouseEnter:()=>e(`approve-${w.id}`),onMouseLeave:()=>e(null),onClick:()=>lt(w.id,w.status),title:"Approve this plan",children:[t.jsx(pg,{size:14}),"Approve"]}),w.canReject&&w.status==="Pending Approval"&&t.jsxs("button",{style:V.actionButton("reject",o===`reject-${w.id}`,!1),onMouseEnter:()=>e(`reject-${w.id}`),onMouseLeave:()=>e(null),onClick:()=>ye(w.id,w.status),title:"Reject this plan",children:[t.jsx(gr,{size:14}),"Reject"]})]})]},w.id))}),Y.length===0&&t.jsxs("div",{style:V.emptyState,children:[t.jsx(FB,{size:48,style:{marginBottom:"16px",opacity:.5}}),t.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"600"},children:g?"No approvals found":"No approvals in this status"}),t.jsx("p",{style:{margin:0,fontSize:"14px"},children:g?"Try adjusting your search terms":`No ${b.toLowerCase()} approvals at the moment`})]}),L&&t.jsx("div",{style:V.modal,onClick:()=>j(!1),children:t.jsxs("div",{style:V.modalContent,onClick:w=>w.stopPropagation(),children:[t.jsxs("div",{style:V.modalHeader,children:[t.jsx("div",{style:V.modalTitle,children:"Reject Master Plan"}),t.jsx("button",{style:V.closeButton(o==="close-modal"),onMouseEnter:()=>e("close-modal"),onMouseLeave:()=>e(null),onClick:()=>j(!1),children:t.jsx(gr,{size:24})})]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:{fontSize:"14px",fontWeight:"600",color:d?"#d1d5db":"#374151",marginBottom:"8px",display:"block"},children:"Rejection Reason *"}),t.jsx("textarea",{style:V.textarea,value:de,onChange:w=>Oe(w.target.value),placeholder:"Please provide a detailed reason for rejection..."}),t.jsx("small",{style:{fontSize:"12px",color:d?"#94a3b8":"#64748b",display:"block",marginTop:"8px"},children:"This reason will be visible to the plan creator."})]}),t.jsxs("div",{style:V.modalActions,children:[t.jsx("button",{style:V.actionButton("view",o==="cancel-reject",!1),onMouseEnter:()=>e("cancel-reject"),onMouseLeave:()=>e(null),onClick:()=>j(!1),children:"Cancel"}),t.jsxs("button",{style:V.actionButton("reject",o==="confirm-reject",!1),onMouseEnter:()=>e("confirm-reject"),onMouseLeave:()=>e(null),onClick:ze,children:[t.jsx(gr,{size:14}),"Confirm Rejection"]})]})]})}),C&&S&&(()=>{var H,P,z;const w=((H=S.latestUpdate)==null?void 0:H.changes)||[],ce=3,Ce=se?w:w.slice(0,ce);return t.jsx("div",{style:V.modal,onClick:Ae,children:t.jsxs("div",{style:{...V.modalContent,maxWidth:"700px",maxHeight:"80vh",padding:0,display:"flex",flexDirection:"column",overflow:"hidden"},onClick:xe=>xe.stopPropagation(),children:[t.jsxs("div",{style:{...V.modalHeader,position:"sticky",top:0,zIndex:5,backgroundColor:d?"#374151":"#ffffff",borderBottom:d?"1px solid rgba(148,163,184,0.15)":"1px solid rgba(226,232,240,0.9)",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",padding:"20px 24px 16px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:V.modalTitle,children:S.title}),t.jsxs("div",{style:{fontSize:"14px",color:d?"#94a3b8":"#64748b",marginTop:"4px"},children:["Created by ",S.createdBy,"  ",S.department]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("div",{style:V.statusBadge(S.status),children:S.status}),t.jsx("button",{style:V.closeButton(o==="close"),onMouseEnter:()=>e("close"),onMouseLeave:()=>e(null),onClick:Ae,children:t.jsx(gr,{size:24})})]})]}),t.jsxs("div",{style:{padding:"24px",overflowY:"auto",flex:1},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",backgroundColor:d?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",marginBottom:"24px"},children:[t.jsxs("div",{children:[t.jsx("div",{style:V.infoLabel,children:"Start Date"}),t.jsx("div",{style:{...V.infoValue,fontSize:"15px",fontWeight:"600"},children:new Date(S.startDate).toLocaleDateString("en-GB")})]}),t.jsxs("div",{children:[t.jsx("div",{style:V.infoLabel,children:"End Date"}),t.jsx("div",{style:{...V.infoValue,fontSize:"15px",fontWeight:"600"},children:new Date(S.endDate).toLocaleDateString("en-GB")})]}),t.jsxs("div",{children:[t.jsx("div",{style:V.infoLabel,children:"Milestones"}),t.jsx("div",{style:{...V.infoValue,fontSize:"15px",fontWeight:"600"},children:S.milestoneCount})]})]}),((z=(P=S.latestUpdate)==null?void 0:P.changes)==null?void 0:z.length)>0&&t.jsxs(t.Fragment,{children:[(S.status==="Approved"||S.status==="Rejected")&&t.jsx("div",{style:{padding:"16px 20px",backgroundColor:S.status==="Approved"?d?"rgba(16,185,129,0.15)":"rgba(16,185,129,0.1)":d?"rgba(239,68,68,0.15)":"rgba(239,68,68,0.1)",borderRadius:"12px",border:`2px solid ${S.status==="Approved"?"#10b981":"#ef4444"}`,marginBottom:"24px",display:"flex",alignItems:"center",gap:"12px"},children:S.status==="Approved"?t.jsxs(t.Fragment,{children:[t.jsx(so,{size:24,style:{color:"#10b981"}}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:d?"#6ee7b7":"#059669",marginBottom:"2px"},children:"Changes Approved"}),t.jsxs("div",{style:{fontSize:"13px",color:d?"#94a3b8":"#64748b"},children:["The following changes have been approved by ",S.approvedBy]})]})]}):t.jsxs(t.Fragment,{children:[t.jsx(Rr,{size:24,style:{color:"#ef4444"}}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"16px",fontWeight:"700",color:d?"#fca5a5":"#dc2626",marginBottom:"2px"},children:"Changes Rejected"}),t.jsxs("div",{style:{fontSize:"13px",color:d?"#94a3b8":"#64748b"},children:["The following changes were rejected by ",S.rejectedBy]})]})]})}),Ce.map((xe,Me)=>t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("div",{style:{...V.infoLabel,marginBottom:"6px"},children:xe.milestone}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"16px",alignItems:"center"},children:[t.jsx("div",{style:{...V.infoValue,padding:"8px 12px",backgroundColor:d?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.05)",borderRadius:"8px",textDecoration:"line-through",opacity:.7},children:xe.oldValue||"N/A"}),t.jsx("div",{children:""}),t.jsx("div",{style:{...V.infoValue,padding:"8px 12px",backgroundColor:d?"rgba(16,185,129,0.1)":"rgba(16,185,129,0.05)",borderRadius:"8px",fontWeight:600},children:xe.newValue||"N/A"})]}),t.jsxs("div",{style:{marginTop:"8px"},children:[t.jsx("div",{style:V.infoLabel,children:"Justification"}),t.jsx("div",{style:{...V.infoValue,fontStyle:xe.justification?"normal":"italic"},children:xe.justification||"No justification provided"})]})]},Me)),w.length>ce&&t.jsx("div",{style:{textAlign:"center",marginTop:"12px"},children:t.jsx("button",{onClick:()=>Z(xe=>!xe),style:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:d?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:se?"Collapse changes":`View ${w.length-ce} more changes`})})]}),(S.approvedBy||S.rejectedBy)&&t.jsxs("div",{style:{marginTop:"24px",padding:"16px",backgroundColor:S.approvedBy?d?"rgba(16,185,129,0.1)":"rgba(16,185,129,0.05)":d?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.05)",borderRadius:"12px",border:`1px solid ${S.approvedBy?d?"rgba(16,185,129,0.3)":"rgba(16,185,129,0.2)":d?"rgba(239,68,68,0.3)":"rgba(239,68,68,0.2)"}`},children:[S.approvedBy&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{...V.infoLabel,marginBottom:"6px"},children:"Approved By"}),t.jsxs("div",{style:V.infoValue,children:[S.approvedBy," on ",new Date(S.approvedAt).toLocaleString("en-GB")]})]}),S.rejectedBy&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{...V.infoLabel,marginBottom:"6px"},children:"Rejected By"}),t.jsxs("div",{style:{...V.infoValue,marginBottom:"12px"},children:[S.rejectedBy," on ",new Date(S.rejectedAt).toLocaleString("en-GB")]}),t.jsx("div",{style:{...V.infoLabel,marginBottom:"6px"},children:"Rejection Reason"}),t.jsx("div",{style:{...V.infoValue,padding:"12px",backgroundColor:d?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",borderRadius:"8px",fontSize:"14px",lineHeight:"1.6"},children:S.rejectionReason})]})]})]})]})})})(),t.jsxs("div",{style:V.statsContainer,children:[t.jsxs("div",{style:V.statCard(r==="stat1"),onMouseEnter:()=>n("stat1"),onMouseLeave:()=>n(null),children:[t.jsx("div",{style:V.statNumber,children:we.pendingApproval}),t.jsx("div",{style:V.statLabel,children:"Pending Approval"})]}),t.jsxs("div",{style:V.statCard(r==="stat2"),onMouseEnter:()=>n("stat2"),onMouseLeave:()=>n(null),children:[t.jsx("div",{style:V.statNumber,children:we.approved}),t.jsx("div",{style:V.statLabel,children:"Approved"})]}),t.jsxs("div",{style:V.statCard(r==="stat3"),onMouseEnter:()=>n("stat3"),onMouseLeave:()=>n(null),children:[t.jsx("div",{style:V.statNumber,children:we.rejected}),t.jsx("div",{style:V.statLabel,children:"Rejected"})]})]})]})},l8=()=>{var qe,Ct,Lt,Ut,Bt;const[o,e]=h.useState(null),[r,n]=h.useState(null),[a,A]=h.useState(!1),[c,p]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[d,m]=h.useState("Master Plan"),[g,y]=h.useState(!1),[b,R]=h.useState(!1),[C,Q]=h.useState([]),[S,N]=h.useState([]),[M,Ie]=h.useState(""),[fe,F]=h.useState({}),[ae,ee]=h.useState(!1),[Re,se]=h.useState(null),[Z,ue]=h.useState(""),[pe,we]=h.useState(""),[Pe,re]=h.useState(!1),[Ee,k]=h.useState(!1),[ge,_]=h.useState({project:"",projectType:"",startDate:"",endDate:""}),[G,E]=h.useState([]),[D,ie]=h.useState("UAT"),[L,j]=h.useState("Date Range"),[de,Oe]=h.useState({reasoning:"",suggestedFields:[]}),[Ge,Ve]=h.useState(""),[ke,Be]=h.useState(null),[nt,yt]=h.useState(!0),[q,lt]=h.useState([]),[ye,ze]=h.useState([]),[dt,Ne]=h.useState(!1),[B,U]=h.useState(!1),[Ae,Y]=h.useState(null),[V,ve]=h.useState({totalPlans:0,inProgress:0,completed:0}),[me,T]=h.useState(!1);h.useRef(null),h.useRef(null),h.useEffect(()=>{const X=ge.project||ge.projectType||ge.startDate||ge.endDate||G.length>0||q.length>0||C.length>0||Ge.trim();k(X)},[ge,G,q,C,Ge]);const wt=X=>{if(!X)return"";const $=X.split("/");return $.length===3?`${$[2]}-${$[1]}-${$[0]}`:X},w=X=>{if(!X)return"";const $=X.split("-");return $.length===3?`${$[2]}/${$[1]}/${$[0]}`:X};h.useEffect(()=>{ce()},[]),h.useEffect(()=>{const X=$=>{if(Ee)return $.preventDefault(),$.returnValue="",""};return window.addEventListener("beforeunload",X),()=>window.removeEventListener("beforeunload",X)},[Ee]),h.useEffect(()=>{ke&&(async()=>{if(ke){T(!0);try{const $=await Te("/plan/master",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if($.ok){const Ze=await $.json(),ft=Ze.length,ne=Ze.filter(Fe=>{const rt=typeof Fe.fields=="string"?JSON.parse(Fe.fields):Fe.fields;if(!rt)return!1;const bt=Object.values(rt).filter(gt=>typeof gt=="object"&&(gt==null?void 0:gt.status));return bt.length>0&&bt.some(gt=>gt.status!=="Completed")}).length,Le=Ze.filter(Fe=>{const rt=typeof Fe.fields=="string"?JSON.parse(Fe.fields):Fe.fields;if(!rt)return!1;const bt=Object.values(rt).filter(gt=>typeof gt=="object"&&(gt==null?void 0:gt.status));return bt.length>0&&bt.every(gt=>gt.status==="Completed")}).length;ve({totalPlans:ft,inProgress:ne,completed:Le})}}catch($){console.error("Failed to fetch user stats:",$)}finally{T(!1)}}})()},[ke]);const ce=async()=>{try{yt(!0),console.log(" Fetching user data from /user/profile...");const X=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" API Response status:",X.status),X.ok){const $=await X.json();console.log(" User data received:",$),Be($)}else{const $=await X.text();console.error(" Failed to fetch user data:",X.status,$)}}catch(X){console.error(" Error fetching user data:",X)}finally{yt(!1)}};h.useEffect(()=>{ke&&(async()=>{if(ke){Ne(!0);try{console.log(" Fetching user list for permissions...");const $=await Te("/user/list",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if($.ok){const ne=((await $.json()).users||[]).filter(Le=>Le.id!==ke.id);console.log(` Loaded ${ne.length} available users`),ze(ne)}else console.error(" Failed to fetch user list")}catch($){console.error(" Error fetching user list:",$)}finally{Ne(!1)}}})()},[ke]),h.useEffect(()=>{ke&&(async()=>{if(ke)try{const $=await Te("/user/list",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if($.ok){const ne=((await $.json()).users||[]).filter(Le=>Le.id!==ke.id);N(ne)}}catch($){console.error("Failed to fetch users:",$)}})()},[ke]);const Ce=(X,$=!1,Ze="",ft="")=>{if($){const ne={id:`custom-${Date.now()}`,firstName:Ze.split(" ")[0]||Ze,lastName:Ze.split(" ").slice(1).join(" ")||"",email:ft,department:"External",isCustom:!0};Q([...C,ne])}else{const ne=S.find(Le=>Le.id===X);ne&&!C.find(Le=>Le.id===X)&&(Q([...C,ne]),q.find(Le=>Le.id===X)||lt([...q,{id:ne.id,name:`${ne.firstName} ${ne.lastName}`,email:ne.email,department:ne.department,permission:"viewer"}]))}Ie("")},H=X=>{Q(C.filter(Ze=>Ze.id!==X)),lt(q.filter(Ze=>Ze.id!==X));const $={...fe};Object.keys($).forEach(Ze=>{$[Ze]=$[Ze].filter(ft=>ft!==X)}),F($)},P=X=>{se(X),ee(!0)},z=(X,$)=>{const Ze=fe[X]||[];Ze.includes($)||F({...fe,[X]:[...Ze,$]})},xe=(X,$)=>{const Ze=fe[X]||[];F({...fe,[X]:Ze.filter(ft=>ft!==$)})},Me=(X,$)=>{lt(q.map(Ze=>Ze.id===X?{...Ze,permission:$}:Ze)),console.log(` Updated user ${X} permission to ${$}`)},O=X=>[...X].sort(($,Ze)=>{const ft=Fe=>{if(!Fe)return null;const[rt,bt,gt]=Fe.split("/");return new Date(gt,bt-1,rt)},ne=ft($.startDate),Le=ft(Ze.startDate);return!ne&&!Le?0:ne?Le?ne-Le:-1:1});h.useEffect(()=>{if(G.length>0&&G.some($=>$.startDate)){const $=O(G);$.some((ft,ne)=>ft.id!==G[ne].id)&&E($)}},[G.map(X=>X.startDate).join(",")]);const Qt=()=>{p(!c),A(!1)},tt=(X=" You have unsaved changes. Are you sure you want to leave?")=>Ee?window.confirm(X):!0,zt=()=>{if(!tt())return;k(!1),console.log(" Going back to plan overview");const X="/adminviewplan";window.location.href=X},ir=()=>{if(D.trim()){if(G.some(Ze=>Ze.name.toLowerCase()===D.trim().toLowerCase())){alert(` Milestone "${D.trim()}" already exists!`);return}const $={id:Date.now(),name:D.trim(),type:"Date Range",value:(G.length===0,"On Track"),startDate:"",endDate:"",required:!1};E([...G,$]),ie("")}},Yt=X=>{E(G.filter($=>$.id!==X))},vr=(X,$,Ze)=>{E(G.map(ft=>ft.id===X?{...ft,[$]:Ze}:ft))},Tr=async()=>{try{R(!0),y(!1),Oe({reasoning:"",suggestedFields:[]});const X={project:ge.project,projectType:ge.projectType,startDate:be(ge.startDate),endDate:be(ge.endDate),fields:G.reduce((ft,ne)=>(ft[ne.name]={status:ne.value,startDate:be(ne.startDate),endDate:be(ne.endDate)},ft),{}),userId:ke.id,permissions:q.map(ft=>({userId:ft.id,permissionLevel:ft.permission})),projectTeam:C.map(ft=>({userId:ft.id,firstName:ft.firstName,lastName:ft.lastName,email:ft.email,isCustom:ft.isCustom||!1})),milestoneAssignments:fe};console.log(" Sending Master Plan AI request:",X);const $=await Te("/masterplan-ai/generate",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)}),Ze=await $.json();if(console.log(" AI Response:",Ze),$.ok&&Ze.success&&Ze.masterPlan){const ft=Ze.masterPlan,ne=Ze.historicalContext;let Le=`**AI-Generated Master Plan** (Source: ${Ze.source==="ai"?"AI Analysis":"Standard Template"})

`;ne.totalRecords>0?Le+=`Based on analysis of **${ne.totalRecords} historical project records** from ${ne.projectsAnalyzed} projects in the **${Ze.department}** department.

`:Le+=`No historical data available. Generated using intelligent fallback.

`,ne.hasUserQuery&&(Le+=` Customized based on your project scope and requirements.
`),ne.webSearchUsed&&(Le+=` Enhanced with general project knowledge from web search.
`);const Fe=Object.entries(ft).map(([rt,bt])=>({name:rt,type:"Date Range",startDate:w(bt.startDate),endDate:w(bt.endDate),status:bt.status||"Planned"}));Oe({reasoning:Le,suggestedFields:Fe}),y(!0)}else alert(" AI could not generate a plan. "+(Ze.error||"Please try again."))}catch(X){console.error(" AI Recommendation error:",X),alert(" Failed to fetch AI recommendations. Please check backend connection.")}finally{R(!1)}},J=X=>{if(G.some(Le=>Le.name.toLowerCase()===X.name.toLowerCase())){alert(` Milestone "${X.name}" already exists!`);return}let Ze=X.status||"On Track";["On Track","At Risk","Completed","Delayed"].includes(Ze)||(console.warn(` Invalid status "${Ze}" from AI, converting to "On Track"`),Ze="On Track"),Ze="On Track";const ne={id:Date.now(),name:X.name,type:"Date Range",value:Ze,required:!1,startDate:X.startDate||"",endDate:X.endDate||""};E([...G,ne])},be=X=>{if(!X)return"";const[$,Ze,ft]=X.split("/");return`${ft}-${Ze}-${$}`},De=async()=>{try{if(U(!0),Y(null),!ge.project||!ge.startDate||!ge.endDate){alert("Please fill in all required fields: Project, Start Date, and End Date"),U(!1);return}const X=G.filter(gt=>!gt.startDate||!gt.endDate);if(X.length>0){alert(`Please fill in start and end dates for all milestones: ${X.map(gt=>gt.name).join(", ")}`),U(!1);return}const[$,Ze,ft]=ge.startDate.split("/"),ne=new Date(ft,Ze-1,$);for(const gt of G)if(gt.startDate){const[Ot,Dr,yr]=gt.startDate.split("/");if(new Date(yr,Dr-1,Ot)<ne){alert(` Milestone "${gt.name}" starts before the project's start date.`),U(!1);return}}const Le={};G.forEach(gt=>{Le[gt.name]={status:gt.value,startDate:be(gt.startDate),endDate:be(gt.endDate)}});const Fe={project:ge.project,projectType:ge.projectType,startDate:be(ge.startDate),endDate:be(ge.endDate),fields:Le,userId:ke.id,permissions:q.map(gt=>({userId:gt.id,permissionLevel:gt.permission}))};console.log(" Submitting master plan with permissions:",Fe);const rt=await Te("/plan/master",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)}),bt=await rt.json();rt.ok?(console.log(" Master plan created successfully:",bt),k(!1),alert(` Master plan created successfully with ${q.length} team members!`),E([]),lt([]),y(!1),Ve(""),setTimeout(()=>{const gt="/adminviewplan";window.location.href=gt},1500)):(console.error(" Failed to create master plan:",bt),Y(bt.message||"Failed to create master plan"),alert(` ${bt.message||"Failed to create master plan"}`))}catch(X){console.error(" Error submitting master plan:",X),Y("Network error. Please check your connection and try again."),alert(" Network error. Please check your connection and try again.")}finally{U(!1)}},K={page:{minHeight:"100vh",padding:"30px",background:c?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},backButton:X=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:X?"rgba(59,130,246,0.1)":c?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:X?"#3b82f6":c?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:X?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:X?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),header:{fontSize:"28px",fontWeight:"700",color:c?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},topButton:X=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:X?"rgba(59,130,246,0.1)":c?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:X?"#3b82f6":c?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:X?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:X?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:c?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:c?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:c?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:c?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:c?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:c?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:c?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(X,$)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",outline:"none",backgroundColor:X?"#3b82f6":$?c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:X?"#fff":c?"#e2e8f0":"#64748b",transform:$&&!X?"translateY(-1px)":"translateY(0)",boxShadow:X?"0 4px 12px rgba(59,130,246,0.3)":$&&!X?"0 2px 8px rgba(0,0,0,0.1)":"none"}),mainContent:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"32px",alignItems:"start"},formSection:{backgroundColor:c?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:c?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},sectionTitle:{fontSize:"24px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b",marginBottom:"24px",transition:"all 0.3s ease"},configTitle:{fontSize:"18px",fontWeight:"600",color:c?"#e2e8f0":"#1e293b",marginBottom:"20px",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},fieldGroup:{marginBottom:"20px"},fieldLabel:{fontSize:"14px",fontWeight:"600",color:c?"#d1d5db":"#374151",marginBottom:"8px",display:"block",transition:"all 0.3s ease"},input:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:c?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:c?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',cursor:"pointer"},dateInputWrapper:{position:"relative",cursor:"pointer",width:"100%"},textarea:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:c?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:c?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',resize:"vertical",minHeight:"100px"},select:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:c?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:c?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',cursor:"pointer"},addFieldSection:{marginTop:"32px",paddingTop:"24px",borderTop:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"},addFieldRow:{display:"grid",gridTemplateColumns:"1fr 150px auto",gap:"12px",alignItems:"end",marginBottom:"16px"},addButton:X=>({padding:"12px 20px",borderRadius:"12px",border:"none",backgroundColor:X?"#2563eb":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"}),customField:{backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px",transition:"all 0.3s ease"},customFieldHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},customFieldName:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#374151"},customFieldType:{fontSize:"12px",color:c?"#94a3b8":"#64748b",backgroundColor:c?"rgba(75,85,99,0.3)":"rgba(226,232,240,0.3)",padding:"4px 8px",borderRadius:"6px"},removeButton:X=>({padding:"4px",borderRadius:"6px",border:"none",backgroundColor:X?"rgba(239,68,68,0.1)":"transparent",color:X?"#ef4444":c?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),rightSidebar:{display:"flex",flexDirection:"column",gap:"20px"},aiSection:{backgroundColor:c?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:c?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},accessControlSection:{backgroundColor:c?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:c?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},aiHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},aiTitle:{fontSize:"18px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b"},aiInfoBox:{backgroundColor:c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"8px",padding:"12px",marginBottom:"16px",border:c?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(59,130,246,0.1)"},aiInfoText:{fontSize:"12px",lineHeight:"1.5",color:c?"#93c5fd":"#3b82f6",display:"flex",gap:"8px",alignItems:"flex-start"},recommendButton:X=>({width:"100%",padding:"14px 20px",borderRadius:"12px",border:"none",backgroundColor:X?"#8b5cf6":"#a855f7",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"20px"}),loadingSpinner:{animation:"spin 1s linear infinite"},aiRecommendations:{backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"16px"},aiReasoning:{fontSize:"14px",lineHeight:"1.6",color:c?"#d1d5db":"#4b5563",whiteSpace:"pre-line",marginBottom:"16px"},suggestedField:{backgroundColor:c?"rgba(75,85,99,0.3)":"rgba(255,255,255,0.8)",borderRadius:"8px",padding:"12px",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},suggestedFieldInfo:{flex:1},suggestedFieldName:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#374151",marginBottom:"2px"},suggestedFieldType:{fontSize:"12px",color:c?"#94a3b8":"#64748b"},addSuggestedButton:X=>({padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:X?"#059669":"#10b981",color:"#fff",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"}),submitButton:X=>({width:"100%",padding:"16px 24px",borderRadius:"12px",border:"none",backgroundColor:X?"#1e293b":"#334155",color:"#fff",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",marginTop:"32px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}),ownerBadge:{backgroundColor:c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"12px",padding:"12px 16px",marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",border:c?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(59,130,246,0.1)",color:c?"#e2e8f0":"#1e293b"},permissionBadge:X=>({padding:"4px 12px",borderRadius:"6px",backgroundColor:X==="owner"?"#3b82f6":X==="editor"?"#10b981":"#64748b",color:"#fff",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"}),selectedUserCard:{backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"12px 16px",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",color:c?"#e2e8f0":"#1e293b"},infoBox:{padding:"12px 16px",backgroundColor:c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"8px",fontSize:"12px",color:c?"#93c5fd":"#3b82f6",lineHeight:"1.6",border:c?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(59,130,246,0.1)",marginTop:"12px"},statusModal:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(4px)"},statusModalContent:{backgroundColor:c?"#374151":"#fff",borderRadius:"20px",padding:"32px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflowY:"auto",overflowX:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:c?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(226,232,240,0.8)",position:"relative",zIndex:1e4},statusModalTitle:{fontSize:"24px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b",marginBottom:"8px"},statusModalSubtitle:{fontSize:"14px",color:c?"#94a3b8":"#64748b",marginBottom:"24px"},modalButton:(X,$)=>({padding:"12px 24px",borderRadius:"12px",border:"none",backgroundColor:$==="cancel"?X?"rgba(239,68,68,0.15)":"rgba(239,68,68,0.1)":X?"#2563eb":"#3b82f6",color:$==="cancel"?"#ef4444":"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"})};return h.useEffect(()=>{const X=document.createElement("style");return X.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      input[type="date"]::-webkit-calendar-picker-indicator {
        cursor: pointer;
        filter: ${c?"invert(1)":"invert(0)"};
      }
    `,document.head.appendChild(X),()=>document.head.removeChild(X)},[c]),h.useEffect(()=>{const X=document.createElement("style");return X.textContent=`
    body, html, #root, .app, .main-content, .page-container, .content-wrapper {
      background: ${c?"linear-gradient(135deg, #1e293b 0%, #334155 100%) !important":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%) !important"};
      margin: 0 !important;
      padding: 0 !important;
    }
    
    body > div, #root > div, .app > div {
      background: transparent !important;
    }
  `,document.head.appendChild(X),()=>{document.head.removeChild(X)}},[c]),t.jsxs("div",{style:K.page,children:[t.jsxs("div",{style:K.headerRow,children:[t.jsxs("div",{style:K.headerLeft,children:[t.jsx("button",{style:K.backButton(o==="back"),onMouseEnter:()=>e("back"),onMouseLeave:()=>e(null),onClick:zt,children:t.jsx(Ki,{size:20})}),t.jsx("h1",{style:K.header,children:"Plan"})]}),t.jsxs("div",{style:K.headerRight,children:[t.jsxs("button",{style:K.topButton(r==="alerts"),onMouseEnter:()=>n("alerts"),onMouseLeave:()=>n(null),onClick:()=>{tt()&&(k(!1),console.log(" Alerts clicked - Navigating to alerts page"),window.location.href="/adminalerts")},children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:K.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:K.topButton(r==="profile"),onMouseEnter:()=>{n("profile"),A(!0)},onMouseLeave:()=>{n(null)},onClick:()=>{tt()&&(k(!1),console.log(" Profile clicked - Navigating to profile page"),window.location.href="/adminprofile")},children:t.jsx(qt,{size:20})}),a&&ke&&t.jsxs("div",{style:K.profileTooltip,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[t.jsx("div",{style:K.tooltipArrow}),t.jsxs("div",{style:K.userInfo,children:[t.jsxs("div",{style:K.avatar,children:[(((qe=ke.firstName)==null?void 0:qe[0])||"").toUpperCase(),(((Ct=ke.lastName)==null?void 0:Ct[0])||"").toUpperCase()]}),t.jsxs("div",{style:K.userDetails,children:[t.jsxs("div",{style:K.userName,children:[ke.firstName||"Unknown"," ",ke.lastName||"User"]}),t.jsxs("div",{style:K.userRole,children:[ke.role==="admin"?"Admin":"Member","  ",ke.department||"N/A"]})]})]}),t.jsxs("div",{style:K.userStats,children:[t.jsxs("div",{style:K.tooltipStatItem,children:[t.jsx("div",{style:K.tooltipStatNumber,children:me?"...":V.totalPlans}),t.jsx("div",{style:K.tooltipStatLabel,children:"Plans"})]}),t.jsxs("div",{style:K.tooltipStatItem,children:[t.jsx("div",{style:K.tooltipStatNumber,children:me?"...":V.inProgress}),t.jsx("div",{style:K.tooltipStatLabel,children:"In Progress"})]}),t.jsxs("div",{style:K.tooltipStatItem,children:[t.jsx("div",{style:K.tooltipStatNumber,children:me?"...":V.completed}),t.jsx("div",{style:K.tooltipStatLabel,children:"Completed"})]})]}),t.jsx("button",{style:K.themeToggle,onClick:Qt,children:c?" Light Mode":" Dark Mode"})]})]})]})]}),t.jsx("div",{style:K.tabContainer,children:t.jsx("div",{style:K.tab(!0,!1),children:"Master Plan"})}),t.jsxs("div",{style:K.mainContent,children:[t.jsxs("div",{style:K.formSection,children:[t.jsx("h2",{style:K.sectionTitle,children:"Master Plan"}),t.jsx("h3",{style:K.configTitle,children:"Configure Planning Fields"}),t.jsxs("div",{style:K.fieldGroup,children:[t.jsx("label",{style:K.fieldLabel,children:"Project"}),t.jsx("input",{type:"text",style:K.input,value:ge.project,onChange:X=>_({...ge,project:X.target.value}),placeholder:"Enter project name"})]}),t.jsxs("div",{style:K.fieldGroup,children:[t.jsx("label",{style:K.fieldLabel,children:"Project Type"}),t.jsx("input",{type:"text",style:K.input,value:ge.projectType,onChange:X=>_({...ge,projectType:X.target.value}),placeholder:"e.g., Software Development, Infrastructure, Data Analytics, Migration"})]}),t.jsx(er,{label:"Start Date",value:wt(ge.startDate),onChange:X=>_({...ge,startDate:w(X)}),isDarkMode:c,placeholder:"Select project start date",compact:!0}),t.jsx(er,{label:"End Date",value:wt(ge.endDate),onChange:X=>_({...ge,endDate:w(X)}),isDarkMode:c,placeholder:"Select project end date",compact:!0}),G.map((X,$)=>t.jsxs("div",{style:K.customField,children:[t.jsxs("div",{style:K.customFieldHeader,children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("input",{type:"text",value:X.name,onChange:Ze=>vr(X.id,"name",Ze.target.value),style:{...K.input,fontSize:"14px",fontWeight:"600",padding:"8px 12px",marginBottom:"4px",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:c?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)"},placeholder:"Milestone name"}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px"},children:t.jsx("span",{style:{marginLeft:"12px",fontSize:"11px",fontWeight:"600",padding:"4px 8px",borderRadius:"6px",backgroundColor:X.value==="Completed"?"#3b82f620":X.value==="On Track"?"#10b98120":X.value==="At Risk"?"#f59e0b20":X.value==="Delayed"?"#ef444420":"#94a3b820",color:X.value==="Completed"?"#3b82f6":X.value==="On Track"?"#10b981":X.value==="At Risk"?"#f59e0b":X.value==="Delayed"?"#ef4444":"#94a3b8"},children:X.value})}),t.jsx("div",{style:K.customFieldType,children:X.type})]}),t.jsx("button",{style:K.removeButton(o===`remove-${X.id}`),onMouseEnter:()=>e(`remove-${X.id}`),onMouseLeave:()=>e(null),onClick:()=>Yt(X.id),children:t.jsx(Kn,{size:16})})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:"40px",rowGap:"12px",marginTop:"12px"},children:[t.jsx(er,{label:"Start Date",value:wt(X.startDate||""),onChange:Ze=>vr(X.id,"startDate",w(Ze)),isDarkMode:c,placeholder:"Milestone start",compact:!0}),t.jsx(er,{label:"End Date",value:wt(X.endDate||""),onChange:Ze=>vr(X.id,"endDate",w(Ze)),isDarkMode:c,placeholder:"Milestone end",compact:!0})]}),t.jsxs("button",{style:{marginTop:"12px",padding:"10px 16px",borderRadius:"8px",border:"none",backgroundColor:o===`milestone-users-${X.id}`?"rgba(139,92,246,0.15)":"rgba(139,92,246,0.1)",color:o===`milestone-users-${X.id}`?"#7c3aed":"#8b5cf6",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",fontWeight:"600",width:"100%",justifyContent:"center"},onMouseEnter:()=>e(`milestone-users-${X.id}`),onMouseLeave:()=>e(null),onClick:()=>P(X.id),children:[t.jsx(Un,{size:14}),"Manage Users (",(fe[X.id]||[]).length," assigned)"]})]},X.id)),t.jsxs("div",{style:K.addFieldSection,children:[t.jsx("h4",{style:{...K.fieldLabel,marginBottom:"16px",fontSize:"16px"},children:"Add Milestone/Phase"}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[t.jsx("div",{style:{flex:1},children:t.jsx("input",{type:"text",style:K.input,value:D,onChange:X=>ie(X.target.value),placeholder:"Milestone name (e.g., UAT, Testing, Deployment)"})}),t.jsxs("button",{style:K.addButton(o==="add-field"),onMouseEnter:()=>e("add-field"),onMouseLeave:()=>e(null),onClick:ir,children:[t.jsx(Sr,{size:16}),"Add Milestone"]})]})]}),t.jsx("button",{style:K.submitButton(o==="submit"),onMouseEnter:()=>e("submit"),onMouseLeave:()=>e(null),onClick:De,disabled:B,children:B?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:K.loadingSpinner,children:""}),"Submitting..."]}):t.jsxs(t.Fragment,{children:[t.jsx(so,{size:20}),"Submit Master Plan"]})}),Ae&&t.jsx("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",color:"#ef4444",fontSize:"14px"},children:Ae})]}),t.jsxs("div",{style:K.rightSidebar,children:[t.jsxs("div",{style:K.aiSection,children:[t.jsxs("div",{style:K.aiHeader,children:[t.jsx(yo,{size:20,style:{color:"#a855f7"}}),t.jsx("h3",{style:K.aiTitle,children:"AI Master Plan Generator"})]}),t.jsx("div",{style:K.aiInfoBox,children:t.jsxs("div",{style:K.aiInfoText,children:[t.jsx(io,{size:16,style:{flexShrink:0,marginTop:"2px"}}),t.jsx("span",{children:"AI analyzes your department's historical project data to generate realistic timelines and milestones."})]})}),t.jsxs("div",{style:K.fieldGroup,children:[t.jsx("label",{style:K.fieldLabel,children:"Project Scope (Optional, but recommended)"}),t.jsx("textarea",{style:K.textarea,value:Ge,onChange:X=>Ve(X.target.value),placeholder:"Describe your project scope, requirements, or specific milestones you need..."})]}),t.jsx("button",{style:K.recommendButton(o==="recommend"),onMouseEnter:()=>e("recommend"),onMouseLeave:()=>e(null),onClick:Tr,disabled:b,children:b?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:K.loadingSpinner,children:""}),"Generating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(yo,{size:16}),"Generate Master Plan"]})}),g&&t.jsxs("div",{style:K.aiRecommendations,children:[t.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#374151",marginBottom:"12px"},children:"AI Analysis"}),t.jsx("div",{style:K.aiReasoning,children:de.reasoning}),t.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#374151",marginBottom:"12px"},children:"Suggested Project Phases"}),de.suggestedFields.map((X,$)=>t.jsxs("div",{style:K.suggestedField,children:[t.jsxs("div",{style:K.suggestedFieldInfo,children:[t.jsx("div",{style:K.suggestedFieldName,children:X.name}),t.jsx("div",{style:K.suggestedFieldType,children:X.startDate&&X.endDate&&t.jsxs("span",{style:{color:"#10b981"},children:[X.startDate,"  ",X.endDate]})})]}),t.jsxs("button",{style:K.addSuggestedButton(o===`add-suggested-${$}`),onMouseEnter:()=>e(`add-suggested-${$}`),onMouseLeave:()=>e(null),onClick:()=>J(X),children:[t.jsx(Sr,{size:12}),"Add"]})]},$))]}),!g&&!b&&t.jsx("div",{style:{textAlign:"center",padding:"20px",color:c?"#94a3b8":"#64748b",fontSize:"14px",lineHeight:"1.6"},children:`Fill in project details above, then click "Generate Master Plan" to get AI-powered timeline suggestions based on your department's historical data.`})]}),t.jsxs("div",{style:K.accessControlSection,children:[t.jsxs("div",{style:K.aiHeader,children:[t.jsx(Un,{size:20,style:{color:"#8b5cf6"}}),t.jsx("h3",{style:K.aiTitle,children:"Team & Access"})]}),t.jsxs("div",{style:{padding:"12px",backgroundColor:c?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)",borderRadius:"8px",fontSize:"12px",color:c?"#c4b5fd":"#8b5cf6",marginBottom:"16px",lineHeight:"1.5"},children:["Add people involved in this project. They will automatically be given ",t.jsx("strong",{children:"Viewer"})," access."]}),ke&&t.jsxs("div",{style:K.ownerBadge,children:[t.jsxs("div",{children:[t.jsxs("strong",{style:{color:c?"#e2e8f0":"#1e293b"},children:[ke.firstName," ",ke.lastName]}),t.jsx("div",{style:{fontSize:"12px",opacity:.8,color:c?"#cbd5e1":"#64748b"},children:ke.email})]}),t.jsx("span",{style:K.permissionBadge("owner"),children:"Owner"})]}),C.map(X=>t.jsxs("div",{style:K.selectedUserCard,children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"600"},children:[X.firstName," ",X.lastName]}),t.jsx("div",{style:{fontSize:"12px",opacity:.7},children:X.email})]}),t.jsx("button",{onClick:()=>H(X.id),style:{background:"transparent",border:"none",cursor:"pointer",color:"#ef4444"},children:t.jsx(gr,{size:16})})]},X.id)),t.jsx("div",{style:{marginTop:"12px"},children:t.jsx(Tt,{label:"Add Team Member",value:M?((Lt=S.find(X=>X.id===parseInt(M)))==null?void 0:Lt.firstName)+" "+((Ut=S.find(X=>X.id===parseInt(M)))==null?void 0:Ut.lastName):"",onChange:X=>{if(X){const $=S.find(Ze=>`${Ze.firstName} ${Ze.lastName}`===X);$&&Ce($.id)}},options:S.filter(X=>!C.find($=>$.id===X.id)).map(X=>`${X.firstName} ${X.lastName}`),isDarkMode:c,placeholder:"Select a user...",searchable:!0,compact:!0})}),t.jsx("hr",{style:{border:"none",borderTop:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",margin:"20px 0"}}),q.map(X=>t.jsxs("div",{style:K.selectedUserCard,children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"600"},children:X.name}),t.jsx("div",{style:{fontSize:"12px",opacity:.7},children:X.email})]}),t.jsx("div",{style:{width:"120px"},children:t.jsx(Tt,{value:X.permission,onChange:$=>Me(X.id,$),options:["owner","editor","viewer"],isDarkMode:c,compact:!0})})]},X.id)),t.jsxs("div",{style:K.infoBox,children:[t.jsx("strong",{children:"Permissions:"}),t.jsx("br",{})," Owner: Full control",t.jsx("br",{})," Editor: View & edit",t.jsx("br",{})," Viewer: View only"]})]})]})]}),ae&&Re&&t.jsx("div",{style:K.statusModal,children:t.jsxs("div",{style:K.statusModalContent,children:[t.jsx("h3",{style:K.statusModalTitle,children:"Manage Milestone Users"}),t.jsxs("p",{style:K.statusModalSubtitle,children:[t.jsx("strong",{children:"Milestone:"})," ",(Bt=G.find(X=>X.id===Re))==null?void 0:Bt.name]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("label",{style:K.fieldLabel,children:["Assigned Users (",(fe[Re]||[]).length,")"]}),(fe[Re]||[]).length===0?t.jsx("div",{style:{padding:"16px",backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"8px",textAlign:"center",color:c?"#94a3b8":"#64748b"},children:"No users assigned"}):(fe[Re]||[]).map(X=>{const $=[...C,ke].find(Ze=>Ze.id===X);return $?t.jsxs("div",{style:{...K.selectedUserCard,marginTop:"8px"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"600",color:c?"#e2e8f0":"#1e293b",fontSize:"13px"},children:[$.firstName," ",$.lastName]}),t.jsx("div",{style:{fontSize:"11px",color:c?"#94a3b8":"#64748b"},children:$.email})]}),t.jsx("button",{style:{padding:"6px",borderRadius:"6px",border:"none",backgroundColor:"rgba(239,68,68,0.1)",color:"#ef4444",cursor:"pointer"},onClick:()=>xe(Re,X),children:t.jsx(gr,{size:16})})]},X):null})]}),t.jsx("div",{children:t.jsx(Tt,{label:"Add User to Milestone",value:"",onChange:X=>{if(X===" Add External/Outsource Person")re(!0);else if(X){const $=[ke,...C].find(Ze=>`${Ze.firstName} ${Ze.lastName}`===X);$&&z(Re,$.id)}},groupedOptions:{Actions:[" Add External/Outsource Person"],"Project Team":[...ke?[ke]:[],...C].filter(X=>X&&X.firstName&&X.lastName).filter(X=>!(fe[Re]||[]).includes(X.id)).map(X=>`${X.firstName} ${X.lastName}`)},isDarkMode:c,placeholder:"Select a user...",searchable:!0,compact:!0})}),Pe&&t.jsxs("div",{style:{marginTop:"16px",padding:"16px",backgroundColor:c?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)",borderRadius:"12px",border:c?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",maxWidth:"100%",overflow:"hidden"},children:[t.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:c?"#c4b5fd":"#8b5cf6",marginBottom:"12px"},children:"Add External Person"}),t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("label",{style:K.fieldLabel,children:"Full Name"}),t.jsx("input",{type:"text",style:K.input,value:Z,onChange:X=>ue(X.target.value),placeholder:"Enter vendor/external person name"})]}),t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("label",{style:K.fieldLabel,children:"Email Address"}),t.jsx("input",{type:"email",style:K.input,value:pe,onChange:X=>we(X.target.value),placeholder:"Enter email address"})]}),t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsx("button",{style:{flex:1,padding:"10px",borderRadius:"8px",border:"none",backgroundColor:o==="add-external"?"#8b5cf6":"#a855f7",color:"#fff",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:()=>e("add-external"),onMouseLeave:()=>e(null),onClick:()=>{if(!Z.trim()||!pe.trim()){alert("Please enter both name and email");return}const X={id:`custom-${Date.now()}`,firstName:Z.split(" ")[0]||Z,lastName:Z.split(" ").slice(1).join(" ")||"",email:pe,department:"External",isCustom:!0};Q($=>[...$,X]),z(Re,X.id),ue(""),we(""),re(!1)},children:"Add Person"}),t.jsx("button",{style:{flex:1,padding:"10px",borderRadius:"8px",border:"none",backgroundColor:o==="cancel-external"?"rgba(239,68,68,0.15)":"rgba(239,68,68,0.1)",color:"#ef4444",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:()=>e("cancel-external"),onMouseLeave:()=>e(null),onClick:()=>{re(!1),ue(""),we("")},children:"Cancel"})]})]}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:t.jsx("button",{style:K.modalButton(o==="close-milestone-users","cancel"),onMouseEnter:()=>e("close-milestone-users"),onMouseLeave:()=>e(null),onClick:()=>{ee(!1),se(null)},children:"Close"})})]})})]})},c8=()=>{var me,T,wt;const[o,e]=h.useState([]),[r,n]=h.useState(null),[a,A]=h.useState(null),[c,p]=h.useState(null),[d,m]=h.useState(!1),[g,y]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[b,R]=h.useState(!1),[C,Q]=h.useState(!1),[S,N]=h.useState([]),[M,Ie]=h.useState(null),[fe,F]=h.useState(!0),ae=bo.useMemo(()=>M!=null&&M.assignedProjects?M.assignedProjects.filter(w=>w.projectType==="Operations").map(w=>w.name):[],[M]);bo.useMemo(()=>M!=null&&M.assignedProjects?M.assignedProjects.filter(w=>w.projectType==="Project").map(w=>w.name):[],[M]);const[ee,Re]=h.useState(!1),[se,Z]=h.useState(""),[ue,pe]=h.useState(""),we=42.5,Pe={STRUCTURE:"structure",WEEKLY:"weekly"},[re,Ee]=h.useState(Pe.STRUCTURE),k=re===Pe.WEEKLY,ge=re===Pe.STRUCTURE;h.useEffect(()=>{k&&(G(w=>({...w,projectType:"",project:"",customProjectName:"",leaveType:"",leaveReason:"",startDate:"",endDate:""})),ie([]),Oe([]),n(null))},[k]);const[_,G]=h.useState({project:"",projectType:"Master Plan",customProjectName:"",leaveType:"",leaveReason:"",startDate:"",endDate:"",status:"Ongoing"}),E=k?null:_.projectType,[D,ie]=h.useState([]),[L,j]=h.useState(""),[de,Oe]=h.useState([]),[Ge,Ve]=h.useState(""),[ke,Be]=h.useState({reasoning:"",suggestedFields:[]}),[nt,yt]=h.useState("");h.useEffect(()=>{const w=_.project||_.projectType||_.customProjectName||_.leaveType||_.leaveReason||_.startDate||_.endDate||D.length>0||de.length>0||se||ue||nt.trim()||b&&ke.suggestedFields.length>0;Re(w)},[_,D,de,se,ue,nt,b,ke]);const q=async()=>{try{F(!0),console.log(" Fetching user data from /user/profile...");const w=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" API Response status:",w.status),w.ok){const ce=await w.json();console.log(" User data received:",ce),Ie(ce)}else{const ce=await w.text();console.error(" Failed to fetch user data:",w.status,ce)}}catch(w){console.error(" Error fetching user data:",w)}finally{F(!1)}},lt=()=>{y(!g),m(!1)};h.useEffect(()=>{const w=ce=>{if(ee)return ce.preventDefault(),ce.returnValue="",""};return window.addEventListener("beforeunload",w),()=>window.removeEventListener("beforeunload",w)},[ee]);const ye=(w=" You have unsaved changes. Are you sure you want to leave?")=>ee?window.confirm(w):!0,ze=()=>{ye()&&(Re(!1),console.log(" Going back to individual plan overview"),window.location.href="/adminindividualplan")},dt=()=>{const w=new Date,ce=w.getDay(),Ce=ce===0?-6:1-ce,H=new Date(w);H.setDate(w.getDate()+Ce);const P=new Date(H);P.setDate(H.getDate()+4),Z(H.toISOString().split("T")[0]),pe(P.toISOString().split("T")[0])},Ne=async()=>{Q(!0);try{const w=await Te("/plan/individual-plan/ai-recommendations",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:_.project||(r==null?void 0:r.project),projectType:_.projectType,masterPlanId:(r==null?void 0:r.id)||null,startDate:_.startDate,endDate:_.endDate,userQuery:nt||void 0})});if(!w.ok)throw new Error("Failed to generate structure recommendations");const ce=await w.json();Be({reasoning:ce.reasoning,suggestedFields:ce.recommendations||[]}),R(!0)}catch(w){console.error(" Structure AI Error:",w),alert(`Failed to generate recommendations: ${w.message}`)}finally{Q(!1)}},B=async()=>{if(!se||!ue){alert("Please select a valid date range");return}Q(!0);try{const w=await Te("/api/weekly-allocations/ai-recommendations",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({weekStart:se,weekEnd:ue,userGoals:nt||void 0})});if(!w.ok){const Ce=await w.json().catch(()=>({message:"Unknown error"}));throw new Error(Ce.message||"Failed to generate weekly recommendations")}const ce=await w.json();if(console.log(" AI Response:",ce),!ce.recommendations||!Array.isArray(ce.recommendations))throw new Error("Invalid AI response format");Be({reasoning:ce.reasoning,suggestedFields:ce.recommendations.map(Ce=>({projectName:Ce.projectName,projectType:Ce.projectType,individualPlanId:Ce.individualPlanId,allocatedHours:Ce.allocatedHours||0,tasks:Array.isArray(Ce.tasks)?Ce.tasks.map(H=>typeof H=="string"?H:H.name||H.description||""):[],rationale:Ce.rationale}))}),R(!0)}catch(w){console.error(" AI Error:",w),alert(`Failed to generate recommendations: ${w.message}`)}finally{Q(!1)}},U=w=>{k||ie(ce=>[...ce,{id:Date.now(),name:w.name||w.milestoneName,startDate:w.startDate||"",endDate:w.endDate||"",status:"Ongoing"}])},Ae=async()=>{if(E==="planned-leave"){if(!_.leaveType||!_.startDate||!_.endDate){alert("Please fill in leave type, start date, and end date");return}}else if(!_.project||!_.startDate||!_.endDate){alert("Please fill in all required fields");return}const w={};E==="planned-leave"?(w.title=`Leave: ${_.leaveType}`,w.leaveType=_.leaveType,w.leaveReason=_.leaveReason||"",de.forEach(Ce=>{w[Ce.name]={startDate:Ce.startDate,endDate:Ce.endDate}})):(w.title=_.project,w.status=_.status,D.forEach(Ce=>{w[Ce.name]={status:Ce.status,startDate:Ce.startDate,endDate:Ce.endDate}}));const ce={project:E==="Planned Leave"?`Leave: ${_.leaveType}`:_.projectType==="Custom"?_.customProjectName:_.project,projectType:_.projectType,startDate:_.startDate,endDate:_.endDate,fields:w};console.log(" Submitting individual plan:",ce);try{const Ce=await Te("/plan/individual",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)}),H=await Ce.json();if(!Ce.ok)throw new Error(H.message||"Failed to create individual plan");Re(!1),alert(" Individual plan created successfully!"),window.location.href="/adminindividualplan"}catch(Ce){console.error(" Submit error:",Ce),alert("Failed to create plan: "+Ce.message)}},Y=async()=>{var ce;if(!se||!ue){alert("Please select both start and end dates for your planning period");return}if(new Date(ue)<new Date(se)){alert("End date must be after start date");return}const w=ke.suggestedFields.reduce((Ce,H)=>Ce+(H.allocatedHours||0),0);if(!(w>we&&!confirm(` Total hours (${w}h) exceeds recommended capacity (${we}h).

Do you want to continue anyway?`))){if(!((ce=ke==null?void 0:ke.suggestedFields)!=null&&ce.length)){alert("No weekly allocations to save");return}try{let Ce=null;if(ke.suggestedFields.some(xe=>xe.projectType==="admin"||xe.projectName==="Admin/Others")){const xe=await Te(`/plan/individual?project=${encodeURIComponent("Admin/Others")}&type=admin`,{method:"GET",credentials:"include"});if(xe.ok){const Me=await xe.json();Me.length>0&&(Ce=Me[0].Id,console.log(" Using existing Admin plan:",Ce))}if(!Ce){console.log(" Creating Admin/Others IndividualPlan...");const Me=new Date().getFullYear(),O=await Te("/plan/individual",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:"Admin/Others",projectType:"admin",startDate:`${Me}-01-01`,endDate:`${Me}-12-31`,fields:{title:"Admin & Overhead Activities",status:"Ongoing"}})});if(!O.ok)throw new Error("Failed to create Admin plan");const Qt=await O.json();Ce=Qt.id||Qt.Id,console.log(" Created Admin plan:",Ce)}}const P=[];for(const xe of ke.suggestedFields){if(xe.projectType==="admin"||xe.projectName==="Admin/Others")continue;const Me=[];for(const O of ke.suggestedFields){if(O.projectType==="admin"||O.projectName==="Admin/Others")continue;const Qt=await Te(`/plan/individual?project=${encodeURIComponent(O.projectName)}&type=${O.projectType}`,{method:"GET",credentials:"include"});if(Qt.ok){const tt=await Qt.json();(!Array.isArray(tt)||tt.length===0)&&Me.push(O.projectName)}else Me.push(O.projectName)}}if(P.length>0){alert(` Cannot create weekly allocation. The following projects don't have Individual Plans:

`+P.map(xe=>` ${xe}`).join(`
`)+`

Please create Individual Plans for these projects first using "Plan Structure (Timeline)" mode.`);return}const z=await Promise.all(ke.suggestedFields.map(async xe=>{let Me=null;if(xe.projectType==="admin"||xe.projectName==="Admin/Others")Me=Ce;else{const O=await Te(`/plan/individual?project=${encodeURIComponent(xe.projectName)}&type=${xe.projectType}`,{method:"GET",credentials:"include"});if(O.ok){const Qt=await O.json();Qt.length>0&&(Me=Qt[0].Id)}}return{individualPlanId:Me,projectName:xe.projectName,projectType:xe.projectType,weekStart:se,weekEnd:ue,plannedHours:xe.allocatedHours,tasks:xe.tasks,notes:xe.rationale,aiGenerated:!0}}));await Promise.all(z.map(xe=>Te("/api/weekly-allocations",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)}))),Re(!1),alert(" Weekly plan saved successfully"),window.location.href="/adminindividualplan"}catch(Ce){console.error(" Weekly save failed:",Ce),alert(`Failed to save weekly plan: ${Ce.message}`)}}};h.useEffect(()=>{const w=document.createElement("style");return w.textContent=`
      body, html, #root, .app, .main-content, .page-container, .content-wrapper {
        background: ${g?"linear-gradient(135deg, #1e293b 0%, #334155 100%) !important":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%) !important"};
        margin: 0 !important;
        padding: 0 !important;
      }
      
      body > div, #root > div, .app > div {
        background: transparent !important;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
    `,document.head.appendChild(w),()=>{document.head.removeChild(w)}},[g]);const V=async()=>{try{const w=await Te("/plan/individual",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!w.ok)throw new Error("Failed to fetch individual plans");const ce=await w.json();N(Array.isArray(ce)?ce:[])}catch(w){console.error(" Failed to load individual plans:",w),N([])}};h.useEffect(()=>{(async()=>{try{console.log(" Fetching master plans...");const ce=await Te("/plan/master",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" Master plans response status:",ce.status),!ce.ok){const H=await ce.text();throw console.error(" Failed to fetch master plans:",H),new Error("Failed to fetch master plans")}const Ce=await ce.json();console.log(" Loaded master plans:",Ce),console.log(" Number of plans:",Ce.length),e(Ce)}catch(ce){console.error(" Error fetching master plans:",ce),alert("Failed to load master plans. Please try refreshing the page.")}})(),q(),V(),dt()},[]);const ve={page:{minHeight:"100vh",padding:"30px",background:g?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},modeToggle:{display:"flex",gap:"8px",marginBottom:"24px",backgroundColor:g?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",padding:"6px",borderRadius:"14px",width:"fit-content"},activeMode:{padding:"10px 18px",borderRadius:"10px",border:"none",backgroundColor:"#3b82f6",color:"#fff",fontSize:"13px",fontWeight:"600",cursor:"pointer"},inactiveMode:{padding:"10px 18px",borderRadius:"10px",border:"none",backgroundColor:"transparent",color:g?"#e2e8f0":"#64748b",fontSize:"13px",fontWeight:"600",cursor:"pointer"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},backButton:w=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:w?"rgba(59,130,246,0.1)":g?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:w?"#3b82f6":g?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:w?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:w?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),header:{fontSize:"28px",fontWeight:"700",color:g?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},topButton:w=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:w?"rgba(59,130,246,0.1)":g?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:w?"#3b82f6":g?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:w?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:w?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:g?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:g?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:g?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:g?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:g?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:g?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:g?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:g?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:g?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:g?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(w,ce)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",outline:"none",backgroundColor:w?"#3b82f6":ce?g?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:w?"#fff":g?"#e2e8f0":"#64748b",transform:ce&&!w?"translateY(-1px)":"translateY(0)",boxShadow:w?"0 4px 12px rgba(59,130,246,0.3)":ce&&!w?"0 2px 8px rgba(0,0,0,0.1)":"none"}),mainContent:{display:"grid",gridTemplateColumns:k||E==="planned-leave"?"1fr":"1fr 400px",gap:"32px",alignItems:"start"},formSection:{backgroundColor:g?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:g?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease",position:"relative",zIndex:2},sectionTitle:{fontSize:"24px",fontWeight:"700",color:g?"#e2e8f0":"#1e293b",marginBottom:"8px",transition:"all 0.3s ease"},sectionSubtitle:{fontSize:"14px",color:g?"#94a3b8":"#64748b",marginBottom:"24px",transition:"all 0.3s ease"},projectContext:{backgroundColor:g?"rgba(51,65,85,0.3)":"rgba(59,130,246,0.05)",borderRadius:"12px",padding:"16px",marginBottom:"24px",border:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(59,130,246,0.1)"},contextTitle:{fontSize:"14px",fontWeight:"600",color:g?"#e2e8f0":"#1e293b",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},contextInfo:{fontSize:"12px",color:g?"#94a3b8":"#64748b",lineHeight:"1.5"},configTitle:{fontSize:"18px",fontWeight:"600",color:g?"#e2e8f0":"#1e293b",marginBottom:"20px",transition:"all 0.3s ease"},fieldGroup:{marginBottom:"20px"},fieldLabel:{fontSize:"14px",fontWeight:"600",color:g?"#d1d5db":"#374151",marginBottom:"8px",display:"block",transition:"all 0.3s ease"},input:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:g?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:g?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif'},select:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:g?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:g?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',cursor:"pointer"},addFieldSection:{marginTop:"32px",paddingTop:"24px",borderTop:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"},addFieldRow:{display:"grid",gridTemplateColumns:"1fr 150px auto",gap:"12px",alignItems:"end",marginBottom:"16px"},addButton:w=>({padding:"12px 20px",borderRadius:"12px",border:"none",backgroundColor:w?"#2563eb":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"}),customField:{backgroundColor:g?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px",transition:"all 0.3s ease"},customFieldHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},customFieldName:{fontSize:"14px",fontWeight:"600",color:g?"#e2e8f0":"#374151"},customFieldType:{fontSize:"12px",color:g?"#94a3b8":"#64748b",backgroundColor:g?"rgba(75,85,99,0.3)":"rgba(226,232,240,0.3)",padding:"4px 8px",borderRadius:"6px"},removeButton:w=>({padding:"4px",borderRadius:"6px",border:"none",backgroundColor:w?"rgba(239,68,68,0.1)":"transparent",color:w?"#ef4444":g?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),aiSection:{backgroundColor:g?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:g?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease",height:"fit-content",position:"sticky",top:"20px",zIndex:1},aiHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},aiTitle:{fontSize:"18px",fontWeight:"700",color:g?"#e2e8f0":"#1e293b"},recommendButton:w=>({width:"100%",padding:"14px 20px",borderRadius:"12px",border:"none",backgroundColor:w?"#8b5cf6":"#a855f7",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"20px"}),loadingSpinner:{animation:"spin 1s linear infinite"},aiRecommendations:{backgroundColor:g?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"16px"},aiReasoning:{fontSize:"14px",lineHeight:"1.6",color:g?"#d1d5db":"#4b5563",whiteSpace:"pre-line",marginBottom:"16px"},suggestedField:{backgroundColor:g?"rgba(75,85,99,0.3)":"rgba(255,255,255,0.8)",borderRadius:"8px",padding:"12px",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},suggestedFieldInfo:{flex:1},suggestedFieldName:{fontSize:"14px",fontWeight:"600",color:g?"#e2e8f0":"#374151",marginBottom:"2px"},suggestedFieldType:{fontSize:"12px",color:g?"#94a3b8":"#64748b"},addSuggestedButton:w=>({padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:w?"#059669":"#10b981",color:"#fff",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"}),submitButton:w=>({width:"100%",padding:"16px 24px",borderRadius:"12px",border:"none",backgroundColor:w?"#1e293b":"#334155",color:"#fff",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",marginTop:"32px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"})};return t.jsxs("div",{style:ve.page,children:[t.jsxs("div",{style:ve.headerRow,children:[t.jsxs("div",{style:ve.headerLeft,children:[t.jsx("button",{style:ve.backButton(a==="back"),onMouseEnter:()=>A("back"),onMouseLeave:()=>A(null),onClick:ze,children:t.jsx(Ki,{size:20})}),t.jsx("h1",{style:ve.header,children:"Plan"})]}),t.jsxs("div",{style:ve.headerRight,children:[t.jsxs("button",{style:ve.topButton(c==="alerts"),onMouseEnter:()=>p("alerts"),onMouseLeave:()=>p(null),onClick:()=>{ye()&&(console.log(" Alerts clicked - Navigating to alerts page"),window.location.href="/adminalerts")},children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:ve.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:ve.topButton(c==="profile"),onMouseEnter:()=>{p("profile"),m(!0)},onMouseLeave:()=>{p(null)},onClick:()=>{ye()&&(console.log(" Profile clicked - Navigating to profile page"),window.location.href="/adminprofile")},children:t.jsx(qt,{size:20})}),d&&M&&t.jsxs("div",{style:ve.profileTooltip,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[t.jsx("div",{style:ve.tooltipArrow}),t.jsxs("div",{style:ve.userInfo,children:[t.jsxs("div",{style:ve.avatar,children:[(((me=M.firstName)==null?void 0:me[0])||"").toUpperCase(),(((T=M.lastName)==null?void 0:T[0])||"").toUpperCase()]}),t.jsxs("div",{style:ve.userDetails,children:[t.jsxs("div",{style:ve.userName,children:[M.firstName||"Unknown"," ",M.lastName||"User"]}),t.jsxs("div",{style:ve.userRole,children:[M.role==="admin"?"Admin":"Member","  ",M.department||"N/A"]})]})]}),t.jsxs("div",{style:ve.userStats,children:[t.jsxs("div",{style:ve.tooltipStatItem,children:[t.jsx("div",{style:ve.tooltipStatNumber,children:S.length}),t.jsx("div",{style:ve.tooltipStatLabel,children:"Plans"})]}),t.jsxs("div",{style:ve.tooltipStatItem,children:[t.jsx("div",{style:ve.tooltipStatNumber,children:S.filter(w=>w.status==="Ongoing").length}),t.jsx("div",{style:ve.tooltipStatLabel,children:"Ongoing"})]}),t.jsxs("div",{style:ve.tooltipStatItem,children:[t.jsx("div",{style:ve.tooltipStatNumber,children:S.filter(w=>w.status==="Completed").length}),t.jsx("div",{style:ve.tooltipStatLabel,children:"Completed"})]})]}),t.jsx("button",{style:ve.themeToggle,onClick:lt,children:g?" Light Mode":" Dark Mode"})]})]})]})]}),t.jsxs("div",{style:ve.modeToggle,children:[t.jsx("button",{style:re===Pe.STRUCTURE?ve.activeMode:ve.inactiveMode,onClick:()=>Ee(Pe.STRUCTURE),children:"Plan Structure (Timeline)"}),t.jsx("button",{style:re===Pe.WEEKLY?ve.activeMode:ve.inactiveMode,onClick:()=>Ee(Pe.WEEKLY),children:"Plan Weekly Execution (42.5h)"})]}),t.jsxs("div",{style:ve.mainContent,children:[t.jsxs("div",{style:ve.formSection,children:[t.jsx("h2",{style:ve.sectionTitle,children:k?"Plan Weekly Execution":"Create Individual Plan"}),t.jsx("p",{style:ve.sectionSubtitle,children:k?"Plan how your 42.5 working hours are allocated across assigned projects for the selected week.":"Align your personal timeline with assigned master plan projects."}),ge&&r&&t.jsxs("div",{style:ve.projectContext,children:[t.jsxs("div",{style:ve.contextTitle,children:[t.jsx(lb,{size:16}),"Master Plan Assignment"]}),t.jsxs("div",{style:ve.contextInfo,children:[t.jsx("strong",{children:r.project}),t.jsx("br",{}),"Timeline: ",new Date(r.startDate).toLocaleDateString(),"  ",new Date(r.endDate).toLocaleDateString(),t.jsx("br",{}),Object.entries(r.fields||{}).map(([w,ce])=>t.jsxs("div",{children:[w,": ",JSON.stringify(ce)]},w))]})]}),t.jsx("h3",{style:ve.configTitle,children:"Configure Your Individual Plan"}),ge&&t.jsx(t.Fragment,{children:t.jsx("div",{style:ve.fieldGroup,children:t.jsx(Tt,{label:"Project Type",compact:!0,isDarkMode:g,value:_.projectType,options:["Master Plan","Operations","Custom","Planned Leave"],onChange:w=>{G({..._,projectType:w,project:"",customProjectName:"",leaveType:"",leaveReason:""}),n(null)}})})}),_.projectType==="Master Plan"&&t.jsxs("div",{style:ve.fieldGroup,children:[t.jsx(Tt,{label:"Select Master Plan",compact:!0,isDarkMode:g,value:_.project,searchable:!0,onChange:w=>{G({..._,project:w});const ce=o.find(Ce=>Ce.project===w);n(ce||null)},placeholder:((wt=M==null?void 0:M.assignedProjects)==null?void 0:wt.filter(w=>w.projectType==="Project").length)>0?"Select your master plan...":"No assigned master plans",groupedOptions:(()=>{var P;const w=((P=M==null?void 0:M.assignedProjects)==null?void 0:P.filter(z=>z.projectType==="Project").map(z=>z.name))||[],ce=o.filter(z=>z.approvalStatus==="Approved"),Ce=ce.filter(z=>w.includes(z.project)).map(z=>z.project),H=ce.filter(z=>!w.includes(z.project)).map(z=>z.project);return Ce.length>0?{"Your Assigned Master Plans":Ce,"Other Master Plans":H}:null})(),options:(()=>{var Ce;const w=((Ce=M==null?void 0:M.assignedProjects)==null?void 0:Ce.filter(H=>H.projectType==="Project").map(H=>H.name))||[],ce=o.filter(H=>H.approvalStatus==="Approved");return w.length===0?ce.map(H=>H.project):null})()}),(M==null?void 0:M.assignedProjects)&&Array.isArray(M.assignedProjects)&&M.assignedProjects.filter(w=>w.projectType==="Project").length===0&&t.jsx("p",{style:{fontSize:"12px",color:"#ef4444",marginTop:"8px"},children:" You have no master plans assigned. Showing all approved plans."}),o.filter(w=>w.approvalStatus==="Approved").length===0&&t.jsx("p",{style:{fontSize:"12px",color:"#ef4444",marginTop:"8px"},children:" No approved master plans available."})]}),_.projectType==="Operations"&&t.jsxs("div",{style:ve.fieldGroup,children:[t.jsx(Tt,{label:"Select Operation",compact:!0,isDarkMode:g,value:_.project,options:ae,onChange:w=>G({..._,project:w}),placeholder:ae.length>0?"Select your operation...":"No operations assigned"}),ae.length===0&&t.jsx("p",{style:{fontSize:"12px",color:"#ef4444",marginTop:"8px"},children:" You have no operations assigned."})]}),_.projectType==="Custom"&&t.jsxs("div",{style:ve.fieldGroup,children:[t.jsx("label",{style:ve.fieldLabel,children:"Custom Project Name"}),t.jsx("input",{type:"text",style:ve.input,value:_.customProjectName,onChange:w=>G({..._,customProjectName:w.target.value,project:w.target.value}),placeholder:"Enter your custom project name"})]}),E==="Planned Leave"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:ve.fieldGroup,children:t.jsx(Tt,{label:"Leave Type",compact:!0,isDarkMode:g,value:_.leaveType,options:["Annual Leave","Medical Leave","Hospitalization Leave","Childcare Leave","Compassionate Leave","No Pay Leave","Other"],onChange:w=>G({..._,leaveType:w})})}),t.jsxs("div",{style:ve.fieldGroup,children:[t.jsx("label",{style:ve.fieldLabel,children:"Reason (Optional)"}),t.jsx("textarea",{style:{...ve.input,minHeight:"80px",resize:"vertical"},value:_.leaveReason,onChange:w=>G({..._,leaveReason:w.target.value}),placeholder:"Brief description of leave reason (optional)"})]})]}),k&&t.jsxs("div",{style:ve.fieldGroup,children:[t.jsx("label",{style:ve.fieldLabel,children:"Planning Week"}),t.jsx("p",{style:{fontSize:"12px",color:g?"#94a3b8":"#64748b",marginBottom:"12px",lineHeight:"1.5"},children:" Recommended: Plan Monday-Friday for 42.5 working hours. You can also plan for custom date ranges."}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{...ve.fieldLabel,fontSize:"12px",marginBottom:"6px"},children:"Start Date"}),t.jsx(er,{value:se,compact:!0,isDarkMode:g,onChange:w=>{Z(w);const ce=new Date(w);if(ce.getDay()===1&&!ue){const Ce=new Date(ce);Ce.setDate(ce.getDate()+4),pe(Ce.toISOString().split("T")[0])}}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{...ve.fieldLabel,fontSize:"12px",marginBottom:"6px"},children:"End Date"}),t.jsx(er,{value:ue,compact:!0,isDarkMode:g,onChange:w=>pe(w)})]})]})]}),ge&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:ve.fieldGroup,children:[t.jsx("label",{style:ve.fieldLabel,children:"Start Date"}),t.jsx(er,{value:_.startDate,compact:!0,isDarkMode:g,onChange:w=>G({..._,startDate:w})})]}),t.jsxs("div",{style:ve.fieldGroup,children:[t.jsx("label",{style:ve.fieldLabel,children:"End Date"}),t.jsx(er,{value:_.endDate,compact:!0,isDarkMode:g,onChange:w=>G({..._,endDate:w})})]})]}),!k&&E==="planned-leave"&&t.jsxs(t.Fragment,{children:[de.map(w=>t.jsxs("div",{style:ve.customField,children:[t.jsxs("div",{style:ve.customFieldHeader,children:[t.jsxs("div",{children:[t.jsx("div",{style:ve.customFieldName,children:w.name}),t.jsx("div",{style:ve.customFieldType,children:"Leave Period"})]}),t.jsx("button",{style:ve.removeButton(a===`remove-period-${w.id}`),onMouseEnter:()=>A(`remove-period-${w.id}`),onMouseLeave:()=>A(null),onClick:()=>Oe(de.filter(ce=>ce.id!==w.id)),children:t.jsx(Kn,{size:16})})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"16px",alignItems:"end"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{...ve.fieldLabel,fontSize:"12px",marginBottom:"6px"},children:"Start Date"}),t.jsx(er,{value:w.startDate,compact:!0,isDarkMode:g,onChange:ce=>Oe(de.map(Ce=>Ce.id===w.id?{...Ce,startDate:ce}:Ce))})]}),t.jsx("span",{style:{color:g?"#94a3b8":"#64748b",fontSize:"14px",padding:"0 6px",textAlign:"center",display:"block"},children:"to"}),t.jsxs("div",{children:[t.jsx("label",{style:{...ve.fieldLabel,fontSize:"12px",marginBottom:"6px"},children:"End Date"}),t.jsx(er,{value:w.endDate,compact:!0,isDarkMode:g,onChange:ce=>Oe(de.map(Ce=>Ce.id===w.id?{...Ce,endDate:ce}:Ce))})]})]})]},w.id)),t.jsxs("div",{style:ve.addFieldSection,children:[t.jsx("h4",{style:{...ve.fieldLabel,fontSize:"16px",marginBottom:"16px"},children:"Add Leave Period"}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[t.jsx("input",{type:"text",style:ve.input,value:Ge,onChange:w=>Ve(w.target.value),placeholder:"Leave period name (e.g. January Leave)"}),t.jsxs("button",{style:ve.addButton(a==="add-leave"),onMouseEnter:()=>A("add-leave"),onMouseLeave:()=>A(null),onClick:()=>{Ge.trim()&&(Oe([...de,{id:Date.now(),name:Ge.trim(),startDate:"",endDate:""}]),Ve(""))},children:[t.jsx(Sr,{size:16}),"Add"]})]})]})]}),!k&&_.projectType!=="Planned Leave"&&t.jsxs(t.Fragment,{children:[D.map(w=>t.jsxs("div",{style:ve.customField,children:[t.jsxs("div",{style:ve.customFieldHeader,children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("input",{type:"text",value:w.name,onChange:ce=>ie(D.map(Ce=>Ce.id===w.id?{...Ce,name:ce.target.value}:Ce)),style:{...ve.input,fontSize:"14px",fontWeight:"600",padding:"8px 12px",marginBottom:"4px",border:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:g?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)"},placeholder:"Milestone name"}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px"},children:t.jsx("span",{style:{marginLeft:"12px",fontSize:"11px",fontWeight:"600",padding:"4px 8px",borderRadius:"6px",backgroundColor:w.status==="Completed"?"#3b82f620":"#10b98120",color:w.status==="Completed"?"#3b82f6":"#10b981"},children:w.status})}),t.jsx("div",{style:ve.customFieldType,children:"Milestone"})]}),t.jsx("button",{style:ve.removeButton(a===`remove-${w.id}`),onMouseEnter:()=>A(`remove-${w.id}`),onMouseLeave:()=>A(null),onClick:()=>ie(D.filter(ce=>ce.id!==w.id)),children:t.jsx(Kn,{size:16})})]}),t.jsx("div",{style:ve.fieldGroup,children:t.jsx(Tt,{label:"Status",compact:!0,isDarkMode:g,value:w.status,options:["Ongoing","Completed"],onChange:ce=>ie(D.map(Ce=>Ce.id===w.id?{...Ce,status:ce}:Ce))})}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"16px",alignItems:"end"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{...ve.fieldLabel,fontSize:"12px",marginBottom:"6px"},children:"Start Date"}),t.jsx(er,{value:w.startDate,compact:!0,isDarkMode:g,onChange:ce=>ie(D.map(Ce=>Ce.id===w.id?{...Ce,startDate:ce}:Ce))})]}),t.jsxs("div",{children:[t.jsx("label",{style:{...ve.fieldLabel,fontSize:"12px",marginBottom:"6px"},children:"End Date"}),t.jsx(er,{value:w.endDate,compact:!0,isDarkMode:g,onChange:ce=>ie(D.map(Ce=>Ce.id===w.id?{...Ce,endDate:ce}:Ce))})]})]})]},w.id)),t.jsxs("div",{style:ve.addFieldSection,children:[t.jsx("h4",{style:{...ve.fieldLabel,fontSize:"16px",marginBottom:"16px"},children:"Add Milestone"}),t.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[t.jsx("input",{type:"text",style:ve.input,value:L,onChange:w=>j(w.target.value),placeholder:"Milestone name (e.g. Sprint 1)"}),t.jsxs("button",{style:ve.addButton(a==="add-milestone"),onMouseEnter:()=>A("add-milestone"),onMouseLeave:()=>A(null),onClick:()=>{L.trim()&&(ie([...D,{id:Date.now(),name:L.trim(),startDate:"",endDate:"",status:"Ongoing"}]),j(""))},children:[t.jsx(Sr,{size:16}),"Add"]})]})]})]}),t.jsxs("button",{style:ve.submitButton(a==="submit"),onMouseEnter:()=>A("submit"),onMouseLeave:()=>A(null),onClick:()=>{k?Y():Ae()},children:[t.jsx(so,{size:20}),k?"Save Weekly Plan":"Create Individual Plan"]})]}),k&&S.length===0&&t.jsxs("div",{style:{backgroundColor:g?"rgba(239,68,68,0.1)":"rgba(254,226,226,0.8)",border:"2px solid #ef4444",borderRadius:"12px",padding:"16px",marginBottom:"24px",display:"flex",alignItems:"start",gap:"12px"},children:[t.jsx(io,{size:20,style:{color:"#ef4444",flexShrink:0,marginTop:"2px"}}),t.jsxs("div",{children:[t.jsx("p",{style:{margin:"0 0 8px 0",color:"#991b1b",fontSize:"14px",fontWeight:"700"},children:"No Individual Plans Found"}),t.jsx("p",{style:{margin:0,color:"#991b1b",fontSize:"13px",lineHeight:"1.5"},children:'You must create Individual Plan structures first before planning weekly execution. Switch to "Plan Structure (Timeline)" mode to create individual plans for your assigned projects.'})]})]}),(k||_.projectType!=="planned-leave")&&t.jsxs("div",{style:ve.aiSection,children:[t.jsxs("div",{style:ve.aiHeader,children:[t.jsx(yo,{size:20,style:{color:"#a855f7"}}),t.jsx("h3",{style:ve.aiTitle,children:k?"AI Weekly Planner (42.5h)":"AI Timeline Planner"})]}),t.jsxs("div",{style:ve.fieldGroup,children:[t.jsx("label",{style:ve.fieldLabel,children:"Describe Your Goals (Optional)"}),t.jsx("textarea",{style:{...ve.input,minHeight:"80px",resize:"vertical"},value:nt,onChange:w=>yt(w.target.value),placeholder:"Describe what you want to accomplish, any specific requirements, or priorities for this plan..."})]}),t.jsx("button",{style:ve.recommendButton(a==="recommend"),onMouseEnter:()=>A("recommend"),onMouseLeave:()=>A(null),onClick:k?B:Ne,disabled:C,children:C?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:ve.loadingSpinner,children:""}),"Generating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(yo,{size:16}),"Get AI Recommendations"]})}),b&&t.jsxs("div",{style:ve.aiRecommendations,children:[t.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:g?"#e2e8f0":"#374151",marginBottom:"12px"},children:"AI Analysis"}),t.jsx("div",{style:ve.aiReasoning,children:ke.reasoning}),t.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:g?"#e2e8f0":"#374151",marginBottom:"12px"},children:k?"Recommended Weekly Allocations":"Recommended Milestones"}),ke.suggestedFields.map((w,ce)=>t.jsxs("div",{style:{...ve.suggestedField,flexDirection:"column",alignItems:"stretch",padding:"16px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:ve.suggestedFieldName,children:w.projectName}),t.jsx("div",{style:ve.suggestedFieldType,children:w.projectType})]}),k&&t.jsx("button",{style:{padding:"4px",borderRadius:"6px",border:"none",backgroundColor:a===`remove-alloc-${ce}`?"rgba(239,68,68,0.1)":"transparent",color:a===`remove-alloc-${ce}`?"#ef4444":g?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:()=>A(`remove-alloc-${ce}`),onMouseLeave:()=>A(null),onClick:()=>{const Ce=ke.suggestedFields.filter((H,P)=>P!==ce);Be({...ke,suggestedFields:Ce})},title:"Remove this project",children:t.jsx(gr,{size:16})})]}),k?t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:g?"#d1d5db":"#374151",marginBottom:"6px",display:"block"},children:"Allocated Hours"}),t.jsx("input",{type:"number",min:"0",max:"42.5",step:"0.5",value:w.allocatedHours,onChange:Ce=>{const H=[...ke.suggestedFields];H[ce].allocatedHours=parseFloat(Ce.target.value)||0,Be({...ke,suggestedFields:H})},style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:g?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:g?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"600",outline:"none"}})]}):t.jsx("div",{style:ve.suggestedFieldName,children:w.name}),k&&w.tasks&&t.jsxs("div",{children:[t.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:g?"#d1d5db":"#374151",marginBottom:"6px",display:"block"},children:"Tasks"}),w.tasks.map((Ce,H)=>t.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"6px",alignItems:"center"},children:[t.jsx("input",{type:"text",value:typeof Ce=="string"?Ce:Ce.name||Ce.description||"",onChange:P=>{const z=[...ke.suggestedFields];z[ce].tasks[H]=P.target.value,Be({...ke,suggestedFields:z})},style:{flex:1,padding:"6px 10px",borderRadius:"6px",border:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:g?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:g?"#e2e8f0":"#1e293b",fontSize:"13px",outline:"none"}}),t.jsx("button",{style:{padding:"4px",borderRadius:"4px",border:"none",backgroundColor:a===`remove-task-${ce}-${H}`?"rgba(239,68,68,0.1)":"transparent",color:a===`remove-task-${ce}-${H}`?"#ef4444":g?"#94a3b8":"#64748b",cursor:"pointer",display:"flex",alignItems:"center"},onMouseEnter:()=>A(`remove-task-${ce}-${H}`),onMouseLeave:()=>A(null),onClick:()=>{const P=[...ke.suggestedFields];P[ce].tasks=P[ce].tasks.filter((z,xe)=>xe!==H),Be({...ke,suggestedFields:P})},children:t.jsx(gr,{size:14})})]},H)),t.jsxs("button",{style:{...ve.addButton(a===`add-task-${ce}`),padding:"6px 12px",fontSize:"12px",marginTop:"6px"},onMouseEnter:()=>A(`add-task-${ce}`),onMouseLeave:()=>A(null),onClick:()=>{const Ce=[...ke.suggestedFields];Ce[ce].tasks||(Ce[ce].tasks=[]),Ce[ce].tasks.push("New task"),Be({...ke,suggestedFields:Ce})},children:[t.jsx(Sr,{size:12}),"Add Task"]})]}),w.rationale&&t.jsxs("div",{style:{fontSize:"11px",color:g?"#9ca3af":"#6b7280",marginTop:"8px",fontStyle:"italic",paddingTop:"8px",borderTop:g?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:[" ",w.rationale]}),!k&&t.jsxs("button",{style:ve.addSuggestedButton(a===`add-suggested-${ce}`),onMouseEnter:()=>A(`add-suggested-${ce}`),onMouseLeave:()=>A(null),onClick:()=>U(w),children:[t.jsx(Sr,{size:12}),"Add"]})]},ce)),k&&ke.suggestedFields.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginTop:"16px",padding:"16px",borderRadius:"12px",backgroundColor:(()=>{const w=ke.suggestedFields.reduce((ce,Ce)=>ce+(Ce.allocatedHours||0),0);return w>we?"rgba(239,68,68,0.1)":w===we?"rgba(16,185,129,0.1)":g?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)"})(),border:(()=>{const w=ke.suggestedFields.reduce((ce,Ce)=>ce+(Ce.allocatedHours||0),0);return w>we?"1px solid rgba(239,68,68,0.3)":w===we?"1px solid rgba(16,185,129,0.3)":g?"1px solid rgba(59,130,246,0.3)":"1px solid rgba(59,130,246,0.2)"})()},children:[t.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:g?"#93c5fd":"#3b82f6",marginBottom:"6px"},children:"Total Allocated Hours"}),t.jsxs("div",{style:{fontSize:"28px",fontWeight:"700",color:(()=>{const w=ke.suggestedFields.reduce((ce,Ce)=>ce+(Ce.allocatedHours||0),0);return w>we?"#ef4444":w===we?"#10b981":g?"#e2e8f0":"#1e293b"})()},children:[ke.suggestedFields.reduce((w,ce)=>w+(ce.allocatedHours||0),0).toFixed(1),"h",t.jsxs("span",{style:{fontSize:"16px",color:g?"#94a3b8":"#64748b",fontWeight:"500"},children:[" "," / ",we,"h"]})]}),ke.suggestedFields.reduce((w,ce)=>w+(ce.allocatedHours||0),0)>we&&t.jsxs("div",{style:{fontSize:"11px",color:"#ef4444",marginTop:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[t.jsx(io,{size:12}),"Exceeds recommended capacity"]})]}),t.jsxs("button",{style:{...ve.submitButton(a==="save-weekly-ai"),marginTop:"16px",backgroundColor:a==="save-weekly-ai"?"#059669":"#10b981"},onMouseEnter:()=>A("save-weekly-ai"),onMouseLeave:()=>A(null),onClick:Y,children:[t.jsx(so,{size:20}),"Save Weekly Plan"]})]})]}),!b&&!C&&t.jsxs("div",{style:{textAlign:"center",padding:"20px",color:g?"#94a3b8":"#64748b",fontSize:"14px"},children:[t.jsx(yo,{size:32,style:{marginBottom:"12px",opacity:.5}}),k?"Get AI-generated weekly time allocations across all assigned projects. Standard work week is 42.5h, but you can plan for any timeframe.":"Get personalized milestone recommendations based on your historical work patterns and the selected master plan timeline."]})]})]})]})},d8=()=>{var Ze,ft;const[o,e]=h.useState(null),[r,n]=h.useState(""),[a,A]=h.useState(""),[c,p]=h.useState(""),[d,m]=h.useState({}),[g,y]=h.useState(!0),[b,R]=h.useState(!1),[C,Q]=h.useState(null),[S,N]=h.useState(null),[M,Ie]=h.useState(null),[fe,F]=h.useState(!1),[ae,ee]=h.useState({totalPlans:0,inProgress:0,completed:0}),[Re,se]=h.useState(!1),[Z,ue]=h.useState(null),[pe,we]=h.useState(!1),[Pe,re]=h.useState(null),Ee=h.useRef(null),[k,ge]=h.useState(null),[_,G]=h.useState(!0),[E,D]=h.useState([]),[ie,L]=h.useState([]),[j,de]=h.useState(!1),[Oe,Ge]=h.useState(!1),[Ve,ke]=h.useState(""),[Be,nt]=h.useState("editor"),[yt,q]=h.useState({}),[lt,ye]=h.useState(!1),[ze,dt]=h.useState(""),[Ne,B]=h.useState("On Track"),[U,Ae]=h.useState(""),[Y,V]=h.useState(""),[ve,me]=h.useState(!1),[T,wt]=h.useState(null),[w,ce]=h.useState([]),[Ce,H]=h.useState([]),[P,z]=h.useState(!1),[xe,Me]=h.useState(!1),[O,Qt]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),tt=sessionStorage.getItem("editingPlanId");h.useRef(null),h.useRef(null),h.useRef(null),h.useRef(null),h.useRef({}),h.useEffect(()=>{(async()=>{if(tt)try{const Le=await Te(`/plan/master/${tt}/permission`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Le.ok){const Fe=await Le.json();ge(Fe.permission),console.log(" User permission:",Fe.permission)}else console.warn(" Permission endpoint not available, using fallback to ownership"),ge(void 0)}catch(Le){console.error(" Error fetching permission:",Le),console.log(" Falling back to ownership-based access control"),ge(void 0)}finally{G(!1)}})()},[tt]),h.useEffect(()=>{k&&C&&(async()=>{if(!(!tt||!C))try{de(!0);const Le=await Te(`/plan/master/${tt}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Le.ok){const Fe=await Le.json();D(Fe.team||[]),console.log(" Team members loaded:",Fe.team)}}catch(Le){console.error(" Error fetching team:",Le)}finally{de(!1)}})()},[tt,k,C]),h.useEffect(()=>{k==="owner"&&C&&E&&(async()=>{if(!(k!=="owner"&&k!=="editor"))try{const Le=await Te("/user/list",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Le.ok){const rt=(await Le.json()).users.filter(bt=>bt.id!==(C==null?void 0:C.id)&&!E.some(gt=>gt.userId===bt.id));L(rt)}}catch(Le){console.error(" Error fetching users:",Le)}})()},[k,C,E]),h.useEffect(()=>{(async()=>{try{const Le=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Le.ok){const Fe=await Le.json();Q(Fe)}}catch(Le){console.error("Error fetching user data:",Le)}})()},[]),h.useEffect(()=>{C&&(async()=>{if(C){se(!0);try{const Le=await Te("/plan/master",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Le.ok){const Fe=await Le.json(),rt=Fe.length,bt=Fe.filter(Ot=>{const Dr=typeof Ot.fields=="string"?JSON.parse(Ot.fields):Ot.fields;if(!Dr)return!1;const yr=Object.values(Dr).filter(cr=>typeof cr=="object"&&(cr==null?void 0:cr.status));return yr.length>0&&yr.some(cr=>cr.status!=="Completed")}).length,gt=Fe.filter(Ot=>{const Dr=typeof Ot.fields=="string"?JSON.parse(Ot.fields):Ot.fields;if(!Dr)return!1;const yr=Object.values(Dr).filter(cr=>typeof cr=="object"&&(cr==null?void 0:cr.status));return yr.length>0&&yr.every(cr=>cr.status==="Completed")}).length;ee({totalPlans:rt,inProgress:bt,completed:gt})}}catch(Le){console.error("Failed to fetch user stats:",Le)}finally{se(!1)}}})()},[C]),h.useEffect(()=>{C&&!_&&(async()=>{if(!(!tt||!C)){if(k==="viewer"){re("You have view-only access to this plan."),y(!1);return}if(k===null){re("You do not have permission to edit this plan."),y(!1);return}try{we(!0),re(null);const Le=await Te(`/plan/lock/${tt}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(Le.ok){const Fe=await Le.json();ue(Fe.lock),console.log(" Lock acquired:",Fe.lock),Ee.current=setInterval(async()=>{try{await Te(`/plan/lock/${tt}/heartbeat`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),console.log(" Lock heartbeat sent")}catch(rt){console.error(" Heartbeat failed:",rt)}},3e4)}else{const Fe=await Le.json();if(Fe.lockedBy&&Fe.lockedBy!==`${C.firstName} ${C.lastName}`)if(window.confirm(` This plan is currently being edited by ${Fe.lockedBy}.

Do you want to take over editing? This will disconnect them.`)){const bt=await Te(`/plan/lock/${tt}/takeover`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({force:!0})});if(bt.ok){const gt=await bt.json();ue(gt.lock),console.log(" Lock takeover successful"),Ee.current=setInterval(async()=>{try{await Te(`/plan/lock/${tt}/heartbeat`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(Ot){console.error(" Heartbeat failed:",Ot)}},3e4)}else re("Failed to take over lock")}else window.location.href="/adminviewplan";else re(Fe.error||"Failed to acquire lock")}}catch(Le){console.error(" Lock acquisition error:",Le),re("Network error. Please try again.")}finally{we(!1)}}})()},[tt,C,k,_]),h.useEffect(()=>()=>{Ee.current&&clearInterval(Ee.current),tt&&Z&&Te(`/plan/lock/${tt}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then(()=>{console.log(" Lock released on unmount")}).catch(()=>{console.warn("Lock already released on unmount, safe to ignore")})},[tt,Z]),h.useEffect(()=>{(async()=>{if(!tt){alert("No plan selected for editing"),window.location.href="/adminviewplan";return}try{y(!0);const Le=await Te(`/plan/master/${tt}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Le.ok){const Fe=await Le.json();e(Fe),n(Fe.project),A(Fe.startDate.split("T")[0]),p(Fe.endDate.split("T")[0]),m(Fe.fields||{});const rt=await Te(`/plan/master/${tt}/milestone-assignments`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(rt.ok){const{assignments:bt}=await rt.json(),gt={...Fe.fields};bt.forEach(Ot=>{gt[Ot.milestoneName]&&(gt[Ot.milestoneName].id=Ot.milestoneId)}),m(gt),console.log(" Milestone IDs loaded:",gt)}else m(Fe.fields||{});console.log(" Plan data loaded:",Fe)}else alert("Failed to load plan data"),window.location.href="/adminviewplan"}catch(Le){console.error("Error fetching plan:",Le),alert("Network error. Please try again."),window.location.href="/adminviewplan"}finally{y(!1)}})()},[tt]);const zt=async()=>{if(!Ve||!Be){alert("Please select a user and permission level");return}try{const ne=await Te(`/plan/master/${tt}/permissions`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:parseInt(Ve),permissionLevel:Be})});if(ne.ok){const Le=await ne.json();console.log(" Team member added:",Le);const Fe=await Te(`/plan/master/${tt}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Fe.ok){const rt=await Fe.json();D(rt.team||[])}ke(""),nt("editor"),alert("Team member added successfully!")}else{const Le=await ne.json();alert(`Failed to add team member: ${Le.error}`)}}catch(ne){console.error(" Error adding team member:",ne),alert("Network error. Please try again.")}},ir=async(ne,Le)=>{try{if((await Te(`/plan/master/${tt}/permissions`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:ne,permissionLevel:Le})})).ok){console.log(" Permission updated");const rt=await Te(`/plan/master/${tt}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(rt.ok){const bt=await rt.json();D(bt.team||[])}alert("Permission updated successfully!")}else alert("Failed to update permission")}catch(Fe){console.error(" Error updating permission:",Fe),alert("Network error. Please try again.")}},Yt=async ne=>{if(window.confirm("Are you sure you want to remove this team member?"))try{if((await Te(`/plan/master/${tt}/permissions/${ne}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})).ok){console.log(" Team member removed");const rt=await Te(`/plan/master/${tt}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(rt.ok){const bt=await rt.json();D(bt.team||[])}alert("Team member removed successfully!")}else alert("Failed to remove team member")}catch(Fe){console.error(" Error removing team member:",Fe),alert("Network error. Please try again.")}},vr=()=>{ye(!0)},Tr=()=>{if(!ze.trim()){alert("Please enter a milestone name");return}if(d[ze.trim()]){alert("A milestone with this name already exists!");return}m({...d,[ze.trim()]:{status:Ne,startDate:U,endDate:Y}}),ye(!1),dt(""),B("On Track"),Ae(""),V("")},J=()=>{ye(!1),dt(""),B("On Track"),Ae(""),V("")},be=(ne,Le,Fe)=>{m({...d,[ne]:{...d[ne],[Le]:Fe}})},De=async(ne,Le)=>{wt({milestoneName:ne,milestoneId:Le}),me(!0),z(!0);try{const Fe=await Te(`/plan/master/${tt}/milestone/${Le}/users`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Fe.ok){const{users:rt}=await Fe.json();ce(rt);const bt=rt.map(Ot=>Ot.userId),gt=E.filter(Ot=>!bt.includes(Ot.userId));H(gt)}}catch(Fe){console.error("Failed to load milestone users:",Fe)}finally{z(!1)}},K=async ne=>{if(T)try{(await Te(`/plan/master/${tt}/milestone/${T.milestoneId}/users`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userIds:[ne]})})).ok&&(await De(T.milestoneName,T.milestoneId),alert(" User added to milestone!"))}catch(Le){console.error("Failed to add user:",Le),alert("Failed to add user to milestone")}},qe=async ne=>{if(T&&confirm("Remove this user from the milestone?"))try{(await Te(`/plan/master/${tt}/milestone/${T.milestoneId}/users/${ne}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})).ok&&(await De(T.milestoneName,T.milestoneId),alert(" User removed from milestone!"))}catch(Le){console.error("Failed to remove user:",Le),alert("Failed to remove user from milestone")}},Ct=async()=>{if(!r.trim()){alert("Please enter a project name");return}if(!a||!c){alert("Please enter start and end dates");return}if(k==="viewer"){alert(" You have view-only access. Contact the owner for edit permissions.");return}if(k===null){alert(" You do not have permission to edit this plan.");return}R(!0);try{const ne=await Te(`/plan/master/${tt}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:r,startDate:a,endDate:c,fields:d,justifications:yt,submittedBy:{firstName:C==null?void 0:C.firstName,lastName:C==null?void 0:C.lastName,email:C==null?void 0:C.email}})});if(ne.ok){if(console.log(" Plan updated successfully"),Me(!1),Z)try{await Te(`/plan/lock/${tt}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})}catch{console.warn("Lock already released or not found, safe to ignore")}alert("Plan updated successfully!"),sessionStorage.removeItem("editingPlanId"),sessionStorage.removeItem("editingPlanData"),window.location.href="/adminviewplan"}else{const Le=await ne.json();alert(`Failed to update plan: ${Le.error}`)}}catch(ne){console.error("Error updating plan:",ne),alert("Network error. Please try again.")}finally{R(!1)}},Lt=async()=>{if(Bt()){if(Me(!1),Z)try{await Te(`/plan/lock/${tt}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}),console.log(" Lock released on cancel")}catch(ne){console.error(" Failed to release lock:",ne)}sessionStorage.removeItem("editingPlanId"),sessionStorage.removeItem("editingPlanData"),window.location.href="/adminviewplan"}},Ut=()=>{Qt(!O),F(!1)};h.useEffect(()=>{if(!o)return;const ne=r!==o.project||a!==o.startDate.split("T")[0]||c!==o.endDate.split("T")[0]||JSON.stringify(d)!==JSON.stringify(o.fields)||Object.keys(yt).some(Le=>{var Fe;return(Fe=yt[Le])==null?void 0:Fe.trim()});Me(ne)},[r,a,c,d,yt,o]),h.useEffect(()=>{const ne=Le=>{if(xe)return Le.preventDefault(),Le.returnValue="",""};return window.addEventListener("beforeunload",ne),()=>window.removeEventListener("beforeunload",ne)},[xe]);const Bt=(ne=" You have unsaved changes. Are you sure you want to leave?")=>xe?window.confirm(ne):!0,X=ne=>{const Fe={owner:{bg:"#3b82f6",icon:ws,label:"Owner"},editor:{bg:"#10b981",icon:ms,label:"Editor"},viewer:{bg:"#64748b",icon:ri,label:"Viewer"}}[ne];if(!Fe)return null;const rt=Fe.icon;return t.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"8px",backgroundColor:Fe.bg+"20",border:`1px solid ${Fe.bg}40`,fontSize:"12px",fontWeight:"600",color:Fe.bg,textTransform:"uppercase"},children:[t.jsx(rt,{size:14}),Fe.label]})},$={page:{minHeight:"100vh",padding:"30px",background:O?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif'},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},backButton:ne=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:ne?"rgba(59,130,246,0.1)":O?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:ne?"#3b82f6":O?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:ne?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:ne?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),topButton:ne=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:ne?"rgba(59,130,246,0.1)":O?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:ne?"#3b82f6":O?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:ne?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:ne?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:O?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:O?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:O?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:O?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},userName:{fontSize:"14px",fontWeight:"600",color:O?"#e2e8f0":"#1e293b",marginBottom:"2px"},userRole:{fontSize:"12px",color:O?"#94a3b8":"#64748b"},userStats:{borderTop:O?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:O?"#e2e8f0":"#1e293b"},tooltipStatLabel:{fontSize:"10px",color:O?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px",width:"100%"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:O?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:O?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(ne,Le)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",border:"none",backgroundColor:ne?"#3b82f6":Le?O?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:ne?"#fff":O?"#e2e8f0":"#64748b",boxShadow:ne?"0 4px 12px rgba(59,130,246,0.3)":"none"}),mainContent:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"32px",alignItems:"start"},formSection:{backgroundColor:O?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:O?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},rightSidebar:{display:"flex",flexDirection:"column",gap:"20px"},teamSection:{backgroundColor:O?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:O?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},teamHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},teamTitle:{fontSize:"18px",fontWeight:"700",color:O?"#e2e8f0":"#1e293b"},addFieldButton:ne=>({padding:"10px 20px",borderRadius:"12px",border:O?"2px dashed rgba(59,130,246,0.5)":"2px dashed rgba(59,130,246,0.3)",backgroundColor:ne?"rgba(59,130,246,0.1)":"transparent",color:"#3b82f6",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",fontSize:"14px",fontWeight:"600",width:"100%",marginTop:"16px"}),container:{maxWidth:"1200px",margin:"0 auto"},header:{fontSize:"28px",fontWeight:"700",color:O?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"12px"},title:{fontSize:"28px",fontWeight:"700",color:O?"#f1f5f9":"#1e293b",display:"flex",alignItems:"center",gap:"12px"},lockBanner:ne=>({padding:"16px 20px",borderRadius:"12px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"12px",backgroundColor:ne==="error"?"rgba(239,68,68,0.1)":ne==="acquiring"?"rgba(251,191,36,0.1)":"rgba(16,185,129,0.1)",border:`1px solid ${ne==="error"?"rgba(239,68,68,0.3)":ne==="acquiring"?"rgba(251,191,36,0.3)":"rgba(16,185,129,0.3)"}`,color:ne==="error"?"#ef4444":ne==="acquiring"?"#f59e0b":"#10b981",fontWeight:"600",fontSize:"14px"}),card:{backgroundColor:O?"#374151":"#fff",borderRadius:"20px",padding:"32px",marginBottom:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:O?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)"},sectionTitle:{fontSize:"20px",fontWeight:"700",color:O?"#e2e8f0":"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",userSelect:"none"},formGroup:{marginBottom:"24px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:O?"#e2e8f0":"#374151",marginBottom:"8px"},input:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:O?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:O?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:O?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none"},textarea:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:O?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:O?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:O?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",fontFamily:"inherit",resize:"vertical",minHeight:"60px"},select:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:O?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:O?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:O?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",cursor:"pointer"},fieldCard:{backgroundColor:O?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"20px",marginBottom:"16px",border:O?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)"},fieldHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},fieldName:{fontSize:"16px",fontWeight:"600",color:O?"#e2e8f0":"#1e293b"},removeButton:ne=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:ne?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",color:"#ef4444",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),button:(ne,Le="primary",Fe=!1)=>({padding:"12px 24px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:Fe?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",opacity:Fe?.5:1,backgroundColor:Fe?O?"#4b5563":"#e5e7eb":Le==="primary"?ne?"#2563eb":"#3b82f6":Le==="secondary"?ne?"#f59e0b":"#fbbf24":ne?O?"#4b5563":"#e5e7eb":O?"#6b7280":"#f3f4f6",color:Le==="primary"||Le==="secondary"?"#fff":O?"#e2e8f0":"#374151",boxShadow:ne&&!Fe?"0 4px 12px rgba(0,0,0,0.15)":"none",transform:ne&&!Fe?"translateY(-1px)":"translateY(0)"}),buttonGroup:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"32px"},addFieldButton:ne=>({padding:"10px 20px",borderRadius:"12px",border:O?"2px dashed rgba(59,130,246,0.5)":"2px dashed rgba(59,130,246,0.3)",backgroundColor:ne?"rgba(59,130,246,0.1)":"transparent",color:"#3b82f6",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",fontSize:"14px",fontWeight:"600"}),dateRow:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},teamMemberCard:{backgroundColor:O?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center",border:O?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.8)"},teamMemberInfo:{display:"flex",alignItems:"center",gap:"12px",flex:1},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"14px"},memberDetails:{flex:1},memberName:{fontSize:"14px",fontWeight:"600",color:O?"#e2e8f0":"#1e293b",marginBottom:"2px"},memberEmail:{fontSize:"12px",color:O?"#94a3b8":"#64748b"},addTeamRow:{padding:"16px",backgroundColor:O?"rgba(59,130,246,0.05)":"rgba(59,130,246,0.03)",borderRadius:"12px",border:O?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(59,130,246,0.1)"},addTeamInputRow:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"12px",marginBottom:"12px"},addTeamButtonRow:{display:"flex",justifyContent:"stretch"},infoBox:{padding:"16px",borderRadius:"12px",backgroundColor:O?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",border:O?"1px solid rgba(59,130,246,0.3)":"1px solid rgba(59,130,246,0.2)",marginTop:"16px",fontSize:"13px",color:O?"#93c5fd":"#3b82f6",lineHeight:"1.6"},addMilestoneModal:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(8px)"},addMilestoneModalContent:{backgroundColor:O?"#374151":"#fff",borderRadius:"24px",padding:"32px",boxShadow:"0 25px 50px rgba(0,0,0,0.3)",border:O?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflowX:"visible",position:"relative",zIndex:1e4},modalHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",paddingBottom:"16px",borderBottom:O?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)"},modalTitle:{fontSize:"24px",fontWeight:"700",color:O?"#e2e8f0":"#1e293b",display:"flex",alignItems:"center",gap:"12px"},modalCloseButton:ne=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:ne?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",color:"#ef4444",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),modalBody:{marginBottom:"24px"},modalFooter:{display:"flex",gap:"12px",justifyContent:"flex-end",paddingTop:"20px",borderTop:O?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"}};return g||_?t.jsx("div",{style:$.page,children:t.jsx("div",{style:$.container,children:t.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:O?"#94a3b8":"#64748b",fontSize:"16px"},children:[t.jsx("div",{style:{fontSize:"24px",marginBottom:"12px"},children:""}),"Loading plan data..."]})})}):k===null?t.jsx("div",{style:$.page,children:t.jsxs("div",{style:$.container,children:[t.jsxs("div",{style:$.lockBanner("error"),children:[t.jsx(io,{size:20}),t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"700",marginBottom:"4px"},children:"Access Denied"}),t.jsx("div",{style:{fontSize:"13px",opacity:.9},children:"You do not have permission to view this plan."})]})]}),t.jsx("button",{style:$.button(!1,"default"),onClick:()=>window.location.href="/adminviewplan",children:"Back to Plans"})]})}):t.jsxs("div",{style:$.page,children:[t.jsxs("div",{style:$.headerRow,children:[t.jsxs("div",{style:$.headerLeft,children:[t.jsx("button",{style:$.backButton(S==="back"),onMouseEnter:()=>N("back"),onMouseLeave:()=>N(null),onClick:Lt,children:t.jsx(Ki,{size:20})}),t.jsxs("h1",{style:$.header,children:["Edit Master Plan",k&&X(k)]})]}),t.jsxs("div",{style:$.headerRight,children:[t.jsxs("button",{style:$.topButton(M==="alerts"),onMouseEnter:()=>Ie("alerts"),onMouseLeave:()=>Ie(null),onClick:()=>{Bt()&&(Me(!1),window.location.href="/adminalerts")},children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:$.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:$.topButton(M==="profile"),onMouseEnter:()=>{Ie("profile"),F(!0)},onMouseLeave:()=>Ie(null),onClick:()=>{Bt()&&(Me(!1),window.location.href="/adminprofile")},children:t.jsx(qt,{size:20})}),fe&&t.jsxs("div",{style:$.profileTooltip,onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),children:[t.jsx("div",{style:$.tooltipArrow}),t.jsxs("div",{style:$.userInfo,children:[t.jsx("div",{style:$.avatar,children:C?`${C.firstName[0]}${C.lastName[0]}`:"U"}),t.jsxs("div",{children:[t.jsx("div",{style:$.userName,children:C?`${C.firstName} ${C.lastName}`:"Loading..."}),t.jsx("div",{style:$.userRole,children:C?`${C.role}  ${C.department}`:"Loading..."})]})]}),t.jsxs("div",{style:$.userStats,children:[t.jsxs("div",{style:$.tooltipStatItem,children:[t.jsx("div",{style:$.tooltipStatNumber,children:Re?"...":ae.totalPlans}),t.jsx("div",{style:$.tooltipStatLabel,children:"Plans"})]}),t.jsxs("div",{style:$.tooltipStatItem,children:[t.jsx("div",{style:$.tooltipStatNumber,children:Re?"...":ae.inProgress}),t.jsx("div",{style:$.tooltipStatLabel,children:"In Progress"})]}),t.jsxs("div",{style:$.tooltipStatItem,children:[t.jsx("div",{style:$.tooltipStatNumber,children:Re?"...":ae.completed}),t.jsx("div",{style:$.tooltipStatLabel,children:"Completed"})]})]}),t.jsx("button",{style:$.themeToggle,onClick:Ut,children:O?" Light Mode":" Dark Mode"})]})]})]})]}),t.jsx("div",{style:$.tabContainer,children:t.jsx("div",{style:$.tab(!0,!1),children:"Master Plan"})}),pe&&t.jsxs("div",{style:$.lockBanner("acquiring"),children:[t.jsx(Mi,{size:20}),t.jsx("div",{children:"Acquiring edit lock..."})]}),Pe&&t.jsxs("div",{style:$.lockBanner("error"),children:[t.jsx(io,{size:20}),t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"700",marginBottom:"4px"},children:"Cannot Edit Plan"}),t.jsx("div",{style:{fontSize:"13px",opacity:.9},children:Pe})]})]}),Z&&!Pe&&t.jsxs("div",{style:$.lockBanner("success"),children:[t.jsx(so,{size:20}),t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"700",marginBottom:"4px"},children:"You have edit access"}),t.jsxs("div",{style:{fontSize:"13px",opacity:.9},children:["Your changes will be saved automatically. Lock expires in ",Z.minutesRemaining||5," minutes."]})]})]}),t.jsxs("div",{style:$.mainContent,children:[t.jsxs("div",{style:$.formSection,children:[t.jsx("h2",{style:$.sectionTitle,children:"Basic Information"}),t.jsxs("div",{style:$.formGroup,children:[t.jsx("label",{style:$.label,children:"Project Name *"}),t.jsx("input",{type:"text",value:r,onChange:ne=>n(ne.target.value),style:$.input,placeholder:"Enter project name",disabled:k==="viewer"})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t.jsx(er,{label:"Start Date *",value:a,onChange:ne=>A(ne),isDarkMode:O,placeholder:"Select start date",disabled:k==="viewer",compact:!0}),t.jsx(er,{label:"End Date *",value:c,onChange:ne=>p(ne),isDarkMode:O,placeholder:"Select end date",disabled:k==="viewer",compact:!0})]}),t.jsx("h2",{style:{...$.sectionTitle,marginTop:"32px"},children:"Milestones & Phases"}),Object.entries(d).filter(([ne])=>!["status","lead","budget","completion"].includes(ne.toLowerCase())).sort(([,ne],[,Le])=>{const Fe=ne.startDate?new Date(ne.startDate):new Date("9999-12-31"),rt=Le.startDate?new Date(Le.startDate):new Date("9999-12-31");return Fe-rt}).map(([ne,Le])=>t.jsxs("div",{style:$.fieldCard,children:[t.jsx("div",{style:$.fieldHeader,children:t.jsx("span",{style:$.fieldName,children:ne})}),t.jsxs("div",{style:$.dateRow,children:[t.jsx("div",{style:$.formGroup,children:t.jsx(Tt,{label:"Status",value:Le.status||"On Track",onChange:Fe=>be(ne,"status",Fe),options:["On Track","At Risk","Completed","Delayed"],isDarkMode:O,disabled:k==="viewer",compact:!0})}),t.jsx("div",{style:$.formGroup,children:t.jsx(er,{label:"Start Date",value:Le.startDate||"",onChange:Fe=>be(ne,"startDate",Fe),isDarkMode:O,placeholder:"Milestone start",disabled:k==="viewer",compact:!0})}),t.jsx("div",{style:$.formGroup,children:t.jsx(er,{label:"End Date",value:Le.endDate||"",onChange:Fe=>be(ne,"endDate",Fe),isDarkMode:O,placeholder:"Milestone end",disabled:k==="viewer",compact:!0})})]}),k!=="viewer"&&t.jsxs("div",{style:$.formGroup,children:[t.jsx("label",{style:$.label,children:"Justification for Changes (Optional)"}),t.jsx("textarea",{value:yt[ne]||"",onChange:Fe=>q({...yt,[ne]:Fe.target.value}),style:$.textarea,placeholder:"Optionally explain why you're making changes to this milestone...",rows:2,disabled:k==="viewer"})]}),(k==="owner"||k==="editor")&&Le.id&&t.jsxs("button",{style:{marginTop:"12px",padding:"10px 16px",borderRadius:"8px",border:"none",backgroundColor:S===`manage-users-${ne}`?"rgba(139,92,246,0.15)":"rgba(139,92,246,0.1)",color:S===`manage-users-${ne}`?"#7c3aed":"#8b5cf6",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",fontWeight:"600",width:"100%",justifyContent:"center"},onMouseEnter:()=>N(`manage-users-${ne}`),onMouseLeave:()=>N(null),onClick:()=>De(ne,Le.id),children:[t.jsx(Un,{size:14}),"Manage Milestone Users"]})]},ne)),k!=="viewer"&&t.jsxs("button",{style:$.addFieldButton(S==="add-field"),onMouseEnter:()=>N("add-field"),onMouseLeave:()=>N(null),onClick:vr,children:[t.jsx(Sr,{size:16}),"Add Milestone / Phase"]}),t.jsxs("div",{style:$.buttonGroup,children:[t.jsxs("button",{style:$.button(S==="cancel","default"),onMouseEnter:()=>N("cancel"),onMouseLeave:()=>N(null),onClick:Lt,children:[t.jsx(gr,{size:16}),"Cancel"]}),t.jsxs("button",{style:$.button(S==="save","primary",b||k==="viewer"),onMouseEnter:()=>N("save"),onMouseLeave:()=>N(null),onClick:Ct,disabled:b||k==="viewer",children:[t.jsx(so,{size:16}),b?"Saving...":"Save Changes"]})]}),k==="viewer"&&t.jsxs("div",{style:$.infoBox,children:[t.jsx(io,{size:16,style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px"}}),"You have view-only access to this plan. Contact the owner to request edit permissions."]})]}),t.jsx("div",{style:$.rightSidebar,children:t.jsxs("div",{style:$.teamSection,children:[t.jsxs("div",{style:$.teamHeader,children:[t.jsx(Un,{size:20,style:{color:"#3b82f6"}}),t.jsx("h3",{style:$.teamTitle,children:"Team & Permissions"})]}),E.filter(ne=>ne.permission==="owner").map(ne=>t.jsxs("div",{style:$.teamMemberCard,children:[t.jsxs("div",{style:$.teamMemberInfo,children:[t.jsxs("div",{style:$.avatar,children:[ne.firstName[0],ne.lastName[0]]}),t.jsxs("div",{style:$.memberDetails,children:[t.jsxs("div",{style:$.memberName,children:[ne.firstName," ",ne.lastName,ne.userId===(C==null?void 0:C.id)&&" (You)"]}),t.jsx("div",{style:$.memberEmail,children:ne.email})]})]}),X("owner")]},ne.userId)),E.filter(ne=>ne.permission!=="owner").map(ne=>t.jsxs("div",{style:$.teamMemberCard,children:[t.jsxs("div",{style:$.teamMemberInfo,children:[t.jsxs("div",{style:$.avatar,children:[ne.firstName[0],ne.lastName[0]]}),t.jsxs("div",{style:$.memberDetails,children:[t.jsxs("div",{style:$.memberName,children:[ne.firstName," ",ne.lastName,ne.userId===(C==null?void 0:C.id)&&" (You)"]}),t.jsx("div",{style:$.memberEmail,children:ne.email})]})]}),k==="owner"?t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t.jsx("div",{style:{width:"120px"},children:t.jsx(Tt,{value:ne.permission,onChange:Le=>ir(ne.userId,Le),options:["owner","editor","viewer"],isDarkMode:O,disabled:ne.permission==="owner",compact:!0})}),t.jsx("button",{style:$.removeButton(S===`remove-${ne.userId}`),onMouseEnter:()=>N(`remove-${ne.userId}`),onMouseLeave:()=>N(null),onClick:()=>Yt(ne.userId),children:t.jsx(Kn,{size:16})})]}):X(ne.permission)]},ne.userId)),(k==="owner"||k==="editor")&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:$.addTeamRow,children:[t.jsxs("div",{style:$.addTeamInputRow,children:[t.jsx("div",{style:$.formGroup,children:t.jsx(Tt,{label:"Add Team Member",value:Ve?((Ze=ie.find(ne=>ne.id===parseInt(Ve)))==null?void 0:Ze.firstName)+" "+((ft=ie.find(ne=>ne.id===parseInt(Ve)))==null?void 0:ft.lastName):"",onChange:ne=>{const Le=ie.find(Fe=>`${Fe.firstName} ${Fe.lastName}`===ne);ke(Le?Le.id.toString():"")},options:ie.map(ne=>`${ne.firstName} ${ne.lastName}`),isDarkMode:O,placeholder:"Select a user...",searchable:!0,compact:!0})}),t.jsx("div",{style:$.formGroup,children:t.jsx(Tt,{label:"Permission",value:Be,onChange:ne=>nt(ne),options:["owner","editor","viewer"],isDarkMode:O,compact:!0})})]}),t.jsx("div",{style:$.addTeamButtonRow,children:t.jsxs("button",{style:{...$.button(S==="add-member","primary",!Ve),width:"100%",justifyContent:"center"},onMouseEnter:()=>N("add-member"),onMouseLeave:()=>N(null),onClick:zt,disabled:!Ve,children:[t.jsx(Sr,{size:16}),"Add Team Member"]})})]}),t.jsxs("div",{style:$.infoBox,children:[t.jsx("strong",{children:"Permission Levels:"}),t.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Owner:"})," Full control including managing team members and permissions"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Editor:"})," Can edit milestones, dates, and status"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Viewer:"})," Can only view the plan (read-only access)"]})]}),t.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",opacity:.8},children:[" ",t.jsx("strong",{children:"Multiple owners allowed"})," - Plans can have more than one owner"]})]})]})]})})]}),lt&&t.jsx("div",{style:$.addMilestoneModal,children:t.jsxs("div",{style:$.addMilestoneModalContent,children:[t.jsxs("div",{style:$.modalHeader,children:[t.jsxs("div",{style:$.modalTitle,children:[t.jsx(Sr,{size:24,style:{color:"#3b82f6"}}),"Add New Milestone"]}),t.jsx("button",{style:$.modalCloseButton(S==="close-modal"),onMouseEnter:()=>N("close-modal"),onMouseLeave:()=>N(null),onClick:J,children:t.jsx(gr,{size:20})})]}),t.jsxs("div",{style:$.modalBody,children:[t.jsxs("div",{style:$.formGroup,children:[t.jsx("label",{style:$.label,children:"Milestone Name *"}),t.jsx("input",{type:"text",value:ze,onChange:ne=>dt(ne.target.value),style:$.input,placeholder:"e.g., Phase 1, Sprint 2, Design Review",autoFocus:!0})]}),t.jsx(Tt,{label:"Initial Status",value:Ne,onChange:ne=>B(ne),options:["On Track","At Risk","Completed","Delayed"],isDarkMode:O,compact:!0}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t.jsx(er,{label:"Start Date",value:U,onChange:ne=>Ae(ne),isDarkMode:O,placeholder:"Milestone start",compact:!0}),t.jsx(er,{label:"End Date",value:Y,onChange:ne=>V(ne),isDarkMode:O,placeholder:"Milestone end",compact:!0})]}),t.jsxs("div",{style:$.infoBox,children:[" ",t.jsx("strong",{children:"Tip:"})," You can edit the milestone details after adding it. Dates are optional but help with timeline tracking."]})]}),t.jsxs("div",{style:$.modalFooter,children:[t.jsxs("button",{style:$.button(S==="cancel-milestone","default"),onMouseEnter:()=>N("cancel-milestone"),onMouseLeave:()=>N(null),onClick:J,children:[t.jsx(gr,{size:16}),"Cancel"]}),t.jsxs("button",{style:$.button(S==="add-milestone","primary",!ze.trim()),onMouseEnter:()=>N("add-milestone"),onMouseLeave:()=>N(null),onClick:Tr,disabled:!ze.trim(),children:[t.jsx(Sr,{size:16}),"Add Milestone"]})]})]})}),ve&&T&&t.jsx("div",{style:$.addMilestoneModal,children:t.jsxs("div",{style:$.addMilestoneModalContent,children:[t.jsxs("div",{style:$.modalHeader,children:[t.jsxs("div",{style:$.modalTitle,children:[t.jsx(Un,{size:24,style:{color:"#8b5cf6"}}),"Manage Milestone Users"]}),t.jsx("button",{style:$.modalCloseButton(S==="close-users-modal"),onMouseEnter:()=>N("close-users-modal"),onMouseLeave:()=>N(null),onClick:()=>{me(!1),wt(null),ce([]),H([])},children:t.jsx(gr,{size:20})})]}),t.jsxs("div",{style:$.modalBody,children:[t.jsxs("p",{style:{fontSize:"14px",color:O?"#94a3b8":"#64748b",marginBottom:"20px"},children:[t.jsx("strong",{children:"Milestone:"})," ",T.milestoneName]}),P?t.jsx("div",{style:{textAlign:"center",padding:"20px",color:O?"#94a3b8":"#64748b"},children:"Loading users..."}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsxs("label",{style:$.label,children:["Assigned Users (",w.length,")"]}),w.length===0?t.jsx("div",{style:{padding:"16px",backgroundColor:O?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"8px",textAlign:"center",color:O?"#94a3b8":"#64748b",fontSize:"13px"},children:"No users assigned to this milestone"}):w.map(ne=>t.jsxs("div",{style:{...$.teamMemberCard,marginTop:"8px",padding:"12px"},children:[t.jsxs("div",{style:$.teamMemberInfo,children:[t.jsxs("div",{style:{...$.avatar,width:"32px",height:"32px",fontSize:"12px"},children:[ne.firstName[0],ne.lastName[0]]}),t.jsxs("div",{style:$.memberDetails,children:[t.jsxs("div",{style:$.memberName,children:[ne.firstName," ",ne.lastName]}),t.jsx("div",{style:$.memberEmail,children:ne.email})]})]}),t.jsx("button",{style:$.removeButton(S===`remove-milestone-user-${ne.userId}`),onMouseEnter:()=>N(`remove-milestone-user-${ne.userId}`),onMouseLeave:()=>N(null),onClick:()=>qe(ne.userId),children:t.jsx(gr,{size:16})})]},ne.userId))]}),Ce.length>0&&t.jsx("div",{children:t.jsx(Tt,{label:"Add User to Milestone",value:"",onChange:ne=>{if(ne){const Le=Ce.find(Fe=>`${Fe.firstName} ${Fe.lastName}`===ne);Le&&K(Le.userId)}},options:Ce.map(ne=>`${ne.firstName} ${ne.lastName}`),isDarkMode:O,placeholder:"Select a user to add...",searchable:!0,compact:!0})}),Ce.length===0&&w.length>0&&t.jsx("div",{style:$.infoBox,children:"All team members are already assigned to this milestone."})]})]}),t.jsx("div",{style:$.modalFooter,children:t.jsxs("button",{style:$.button(S==="close-users","default"),onMouseEnter:()=>N("close-users"),onMouseLeave:()=>N(null),onClick:()=>{me(!1),wt(null),ce([]),H([])},children:[t.jsx(gr,{size:16}),"Close"]})})]})})]})},u8=()=>{var U,Ae;const[o,e]=h.useState(null),[r,n]=h.useState(!1),[a,A]=h.useState(!1),[c,p]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[d,m]=h.useState(null),[g,y]=h.useState(!0),b=new URLSearchParams(window.location.search),R=b.get("isWeekly")==="true",C=b.get("projectName"),Q=b.get("projectType"),[S,N]=h.useState(()=>{if(R)return null;const Y=window.location.pathname.split("/"),V=Y[Y.length-1];return V&&!isNaN(V)?parseInt(V):null}),[M,Ie]=h.useState(R?"weekly":"structure"),[fe,F]=h.useState([]),[ae,ee]=h.useState([]),[Re,se]=h.useState(0),[Z,ue]=h.useState({assignedProject:C||"",projectType:Q||"",role:"",startDate:"",endDate:""}),[pe,we]=h.useState([]),[Pe,re]=h.useState([]),[Ee,k]=h.useState(""),ge=42.5,[_,G]=h.useState(null),[E,D]=h.useState([]),[ie,L]=h.useState([]),j=Y=>{if(!Y)return"";const V=new Date(Y);return isNaN(V.getTime())?Y:V.toISOString().split("T")[0]},de=Y=>Y?/^\d{4}-\d{2}-\d{2}/.test(Y)?Y.split("T")[0]:Y:null;h.useEffect(()=>{(async()=>{try{const V=await Te("/user/profile",{method:"GET",credentials:"include"});if(!V.ok)throw new Error("Failed to fetch user profile");const ve=await V.json();m(ve)}catch(V){console.error("Error fetching user profile:",V)}})()},[]),h.useEffect(()=>{const Y=document.createElement("style");return Y.textContent=`
    body, html, #root, .app, .main-content, .page-container, .content-wrapper {
      background: ${c?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)"} !important;
      margin: 0 !important;
      padding: 0 !important;
      font-family: "Montserrat", sans-serif !important;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
  `,document.head.appendChild(Y),()=>{document.head.removeChild(Y)}},[c]),h.useEffect(()=>{d&&(async()=>{try{const V=await Te("/plan/individual",{method:"GET",credentials:"include"});if(V.ok){const me=await V.json();F(me)}const ve=await Te("/plan/individual/supervised",{method:"GET",credentials:"include"});if(ve.ok){const me=await ve.json();ee(me)}if(d!=null&&d.id){const me=await Te("/plan/master",{method:"GET",credentials:"include"});if(me.ok){const w=(await me.json()).filter(ce=>ce.createdBy===d.id).filter(ce=>ce.approvalStatus==="Pending Approval").length;se(w)}}}catch(V){console.error("Error fetching plans:",V)}})()},[d]),h.useEffect(()=>{(async()=>{try{if(y(!0),R)console.log(` Fetching weekly allocations for ${C}...`),await Ge(C,Q);else{if(!S){alert("No plan ID provided"),window.location.href="/adminindividualplan";return}const V=await Te("/plan/individual",{method:"GET",credentials:"include"});if(!V.ok)throw new Error("Failed to fetch plans");const me=(await V.json()).find(ce=>ce.Id===S);if(!me){alert("Plan not found");return}const T=typeof me.Fields=="string"?JSON.parse(me.Fields):me.Fields;ue({assignedProject:me.Project,projectType:me.ProjectType||"custom",role:me.Role||"",startDate:j(me.StartDate),endDate:j(me.EndDate)});const wt=[];let w=1;Object.entries(T).forEach(([ce,Ce])=>{ce==="title"||ce==="status"||typeof Ce=="object"&&Ce!==null&&wt.push({id:w++,name:ce,type:"Date Range",status:Ce.status||"Ongoing",startDate:j(Ce.startDate),endDate:j(Ce.endDate)})}),we(wt),G({assignedProject:me.Project,projectType:me.ProjectType||"custom",role:me.Role||"",startDate:j(me.StartDate),endDate:j(me.EndDate)}),D(wt),await Oe(S)}y(!1)}catch(V){console.error("Error fetching plan:",V),alert("Failed to load plan"),y(!1)}})()},[S,R,C,Q]);const Oe=async Y=>{try{const V=await Te("/api/weekly-allocations/all",{method:"GET",credentials:"include"});if(!V.ok)throw new Error("Failed to fetch weekly allocations");const me=(await V.json()).filter(T=>T.IndividualPlanId===Y).map(T=>({id:T.Id,weekStart:j(T.WeekStart),weekEnd:j(T.WeekEnd),plannedHours:parseFloat(T.PlannedHours)||0,tasks:JSON.parse(T.Tasks||"[]").join(`
`),notes:T.Notes||"",status:T.Status||"Planned"}));re(me),L(me)}catch(V){console.error("Error fetching weekly allocations:",V)}},Ge=async(Y,V)=>{try{const ve=await Te("/api/weekly-allocations/all",{method:"GET",credentials:"include"});if(!ve.ok)throw new Error("Failed to fetch weekly allocations");const T=(await ve.json()).filter(wt=>wt.ProjectName===Y&&wt.ProjectType===V).map(wt=>({id:wt.Id,weekStart:j(wt.WeekStart),weekEnd:j(wt.WeekEnd),plannedHours:parseFloat(wt.PlannedHours)||0,tasks:JSON.parse(wt.Tasks||"[]").join(`
`),notes:wt.Notes||"",status:wt.Status||"Planned",individualPlanId:wt.IndividualPlanId}));console.log(` Found ${T.length} weekly allocations for ${Y}`),re(T),L(T)}catch(ve){console.error("Error fetching weekly allocations by project:",ve)}};h.useEffect(()=>{if(!_&&!R)return;const Y=JSON.stringify(Z)!==JSON.stringify(_),V=JSON.stringify(pe)!==JSON.stringify(E),ve=JSON.stringify(Pe)!==JSON.stringify(ie);A(Y||V||ve)},[Z,pe,Pe,_,E,ie,R]),h.useEffect(()=>{const Y=V=>{if(a)return V.preventDefault(),V.returnValue="",""};return window.addEventListener("beforeunload",Y),()=>window.removeEventListener("beforeunload",Y)},[a]);const Ve=(Y=" You have unsaved changes. Are you sure you want to leave?")=>a?window.confirm(Y):!0,ke=()=>{const Y=!c;p(Y);try{localStorage.setItem("darkMode",Y.toString())}catch{console.log("LocalStorage not available")}n(!1)},Be=()=>{Ve()&&(A(!1),window.location.href="/adminindividualplan")},nt=()=>{Ee.trim()&&(we([...pe,{id:Date.now(),name:Ee.trim(),type:"Date Range",status:"Ongoing",startDate:"",endDate:""}]),k(""))},yt=Y=>{we(pe.filter(V=>V.id!==Y))},q=(Y,V,ve)=>{we(pe.map(me=>me.id===Y?{...me,[V]:ve}:me))},lt=()=>{re([...Pe,{id:Date.now(),weekStart:"",weekEnd:"",plannedHours:0,tasks:"",notes:"",status:"Planned",individualPlanId:S}])},ye=Y=>{re(Pe.filter(V=>V.id!==Y))},ze=(Y,V,ve)=>{re(Pe.map(me=>me.id===Y?{...me,[V]:ve}:me))},dt=(Y,V)=>{ze(Y,"weekStart",V);const ve=new Date(V);if(ve.getDay()===1){const me=Pe.find(T=>T.id===Y);if(!(me!=null&&me.weekEnd)){const T=new Date(ve);T.setDate(ve.getDate()+4),ze(Y,"weekEnd",T.toISOString().split("T")[0])}}},Ne=async()=>{try{if(console.log("Saving plan changes..."),R){console.log(" Saving weekly-only allocations...");for(const Y of Pe){const V={individualPlanId:Y.individualPlanId,projectName:C,projectType:Q,weekStart:de(Y.weekStart),weekEnd:de(Y.weekEnd),plannedHours:Y.plannedHours,tasks:Y.tasks.split(`
`).filter(ve=>ve.trim()),notes:Y.notes,status:Y.status,aiGenerated:!1};Y.id&&typeof Y.id=="number"&&Y.id<1e9?(await Te(`/api/weekly-allocations/${Y.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})).ok||console.error(`Failed to update allocation ${Y.id}`):await Te("/api/weekly-allocations",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})}console.log(" Weekly allocations saved successfully"),A(!1),alert(" Weekly allocations saved successfully!"),window.location.href="/adminindividualplan"}else{const Y={};pe.forEach(me=>{Y[me.name]={status:me.status||"Ongoing",startDate:de(me.startDate),endDate:de(me.endDate)}});const V={project:Z.assignedProject,projectType:Z.projectType,role:Z.role,startDate:de(Z.startDate),endDate:de(Z.endDate),fields:Y};if(!(await Te(`/plan/individual/${S}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})).ok)throw new Error("Failed to update plan structure");for(const me of Pe){const T={individualPlanId:S,projectName:Z.assignedProject,projectType:Z.projectType,weekStart:de(me.weekStart),weekEnd:de(me.weekEnd),plannedHours:me.plannedHours,tasks:me.tasks.split(`
`).filter(wt=>wt.trim()),notes:me.notes,status:me.status,aiGenerated:!1};me.id&&typeof me.id=="number"&&me.id<1e9?await Te(`/api/weekly-allocations/${me.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)}):await Te(`/api/weekly-allocations/${me.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)})}console.log("Plan updated successfully"),A(!1),alert(" Individual plan and weekly allocations saved successfully!"),window.location.href="/adminindividualplan"}}catch(Y){console.error("Error saving plan:",Y),alert(` Failed to save plan: ${Y.message}`)}},B={page:{minHeight:"100vh",padding:"30px",background:c?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',animation:"slideIn 0.3s ease-out"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"32px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},title:{fontSize:"28px",fontWeight:"700",color:c?"#f1f5f9":"#1e293b",margin:0},button:Y=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:Y?"rgba(59,130,246,0.1)":c?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:Y?"#3b82f6":c?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:Y?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:Y?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",position:"relative"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:c?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:c?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:9999,animation:"slideIn 0.2s ease-out"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:c?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:c?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#1e293b",marginBottom:"2px"},userRole:{fontSize:"12px",color:c?"#94a3b8":"#64748b"},userStats:{borderTop:c?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between"},statItem:{textAlign:"center"},statNumber:{fontSize:"14px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b"},statLabel:{fontSize:"10px",color:c?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px",width:"100%",textAlign:"center"},modeToggle:{display:"flex",gap:"8px",marginBottom:"24px",backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",padding:"6px",borderRadius:"14px",width:"fit-content",backdropFilter:"blur(10px)",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},modeButton:Y=>({padding:"10px 18px",borderRadius:"10px",border:"none",backgroundColor:Y?"#3b82f6":"transparent",color:Y?"#fff":c?"#e2e8f0":"#64748b",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"6px"}),formCard:{backgroundColor:c?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"32px",boxShadow:c?"0 12px 30px rgba(0,0,0,0.35)":"0 12px 30px rgba(0,0,0,0.12)",backdropFilter:"blur(20px)",marginBottom:"24px",animation:"slideIn 0.25s ease-out",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},sectionTitle:{fontSize:"20px",fontWeight:"800",letterSpacing:"-0.3px",color:c?"#e2e8f0":"#1e293b",marginBottom:"24px"},fieldGroup:{marginBottom:"20px"},label:{fontSize:"14px",fontWeight:"600",color:c?"#d1d5db":"#374151",marginBottom:"8px",display:"block"},input:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:c?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:c?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",backdropFilter:"blur(10px)",transition:"all 0.3s ease",outline:"none",boxSizing:"border-box"},customFieldCard:{backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px"},customFieldHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},deleteButton:Y=>({padding:"4px",borderRadius:"6px",border:"none",backgroundColor:Y?"rgba(239,68,68,0.1)":"transparent",color:Y?"#ef4444":c?"#94a3b8":"#64748b",cursor:"pointer"}),addButton:Y=>({padding:"12px 20px",borderRadius:"12px",border:"none",backgroundColor:Y?"#2563eb":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transform:Y?"translateY(-2px) scale(1.05)":"translateY(0)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:Y?"0 8px 25px rgba(37,99,235,0.25)":"0 4px 12px rgba(0,0,0,0.08)"}),saveButton:Y=>({width:"100%",padding:"16px 24px",borderRadius:"12px",border:"none",backgroundColor:Y?"#059669":"#10b981",color:"#fff",fontSize:"16px",fontWeight:"700",cursor:"pointer",marginTop:"32px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transform:Y?"translateY(-2px) scale(1.05)":"translateY(0)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:Y?"0 10px 30px rgba(16,185,129,0.35)":"0 6px 18px rgba(0,0,0,0.15)"}),infoBox:{marginTop:"20px",padding:"12px 16px",borderRadius:"8px",backgroundColor:c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",fontSize:"13px",color:c?"#93c5fd":"#3b82f6"}};return g?t.jsx("div",{style:B.page,children:t.jsx("div",{style:{textAlign:"center",padding:"60px",color:c?"#94a3b8":"#64748b"},children:"Loading plan data..."})}):t.jsxs("div",{style:B.page,children:[t.jsxs("div",{style:B.header,children:[t.jsxs("div",{style:B.headerLeft,children:[t.jsx("button",{style:B.button(o==="back"),onMouseEnter:()=>e("back"),onMouseLeave:()=>e(null),onClick:Be,children:t.jsx(Ki,{size:20})}),t.jsx("h1",{style:B.title,children:R?`Edit Weekly Allocation: ${C}`:"Edit Individual Plan"})]}),t.jsxs("div",{style:B.headerRight,children:[t.jsxs("button",{style:B.button(o==="alerts"),onMouseEnter:()=>e("alerts"),onMouseLeave:()=>e(null),onClick:()=>{Ve()&&(A(!1),window.location.href="/adminalerts")},children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:B.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:B.button(o==="profile"),onMouseEnter:()=>{e("profile"),n(!0)},onMouseLeave:()=>e(null),onClick:()=>{Ve()&&(A(!1),window.location.href="/adminprofile")},children:t.jsx(qt,{size:20})}),r&&d&&t.jsxs("div",{style:B.profileTooltip,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[t.jsx("div",{style:B.tooltipArrow}),t.jsxs("div",{style:B.userInfo,children:[t.jsx("div",{style:B.avatar,children:`${((U=d.firstName)==null?void 0:U[0])||""}${((Ae=d.lastName)==null?void 0:Ae[0])||""}`.toUpperCase()}),t.jsxs("div",{style:B.userDetails,children:[t.jsxs("div",{style:B.userName,children:[d.firstName||"Unknown"," ",d.lastName||"User"]}),t.jsxs("div",{style:B.userRole,children:[d.role==="admin"?"Admin":"Member"," ",d.department||"N/A"]})]})]}),t.jsxs("div",{style:B.userStats,children:[t.jsxs("div",{style:B.statItem,children:[t.jsx("div",{style:B.statNumber,children:fe.length}),t.jsx("div",{style:B.statLabel,children:"Plans"})]}),t.jsxs("div",{style:B.statItem,children:[t.jsx("div",{style:B.statNumber,children:fe.filter(Y=>Y.status==="Ongoing").length}),t.jsx("div",{style:B.statLabel,children:"Ongoing"})]}),t.jsxs("div",{style:B.statItem,children:[t.jsx("div",{style:B.statNumber,children:fe.filter(Y=>Y.status==="Completed").length}),t.jsx("div",{style:B.statLabel,children:"Completed"})]})]}),t.jsx("button",{style:B.themeToggle,onClick:ke,children:c?" Light Mode":" Dark Mode"})]})]})]})]}),!R&&t.jsxs("div",{style:B.modeToggle,children:[t.jsxs("button",{style:B.modeButton(M==="structure"),onClick:()=>Ie("structure"),children:[t.jsx(wo,{size:16}),"Structure (Timeline)"]}),t.jsxs("button",{style:B.modeButton(M==="weekly"),onClick:()=>Ie("weekly"),children:[t.jsx(bs,{size:16}),"Weekly Execution"]})]}),!R&&M==="structure"&&t.jsxs("div",{style:B.formCard,children:[t.jsx("h3",{style:B.sectionTitle,children:"Edit Plan Structure"}),t.jsxs("div",{style:B.fieldGroup,children:[t.jsx("label",{style:B.label,children:"Project"}),t.jsx("input",{type:"text",style:{...B.input,opacity:.7,cursor:"not-allowed"},value:Z.assignedProject,disabled:!0})]}),t.jsx("div",{style:B.fieldGroup,children:t.jsx(Tt,{label:"Your Role",value:Z.role,onChange:Y=>ue({...Z,role:Y}),options:["Frontend Developer","Backend Developer","Full Stack Developer","QA Engineer","Project Manager","Designer"],allowCustom:!0,searchable:!0,isDarkMode:c,compact:!0})}),t.jsxs("div",{style:B.fieldGroup,children:[t.jsx("label",{style:B.label,children:"Start Date"}),t.jsx(er,{value:Z.startDate,onChange:Y=>ue({...Z,startDate:Y}),isDarkMode:c,compact:!0})]}),t.jsxs("div",{style:B.fieldGroup,children:[t.jsx("label",{style:B.label,children:"End Date"}),t.jsx(er,{value:Z.endDate,onChange:Y=>ue({...Z,endDate:Y}),isDarkMode:c,compact:!0})]}),t.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:c?"#d1d5db":"#374151",marginTop:"32px",marginBottom:"16px"},children:"Milestones"}),pe.map(Y=>t.jsxs("div",{style:B.customFieldCard,children:[t.jsxs("div",{style:B.customFieldHeader,children:[t.jsx("div",{style:{fontWeight:"600",color:c?"#e2e8f0":"#374151"},children:Y.name}),t.jsx("button",{style:B.deleteButton(o===`remove-${Y.id}`),onMouseEnter:()=>e(`remove-${Y.id}`),onMouseLeave:()=>e(null),onClick:()=>yt(Y.id),children:t.jsx(Kn,{size:16})})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsx(er,{value:Y.startDate,onChange:V=>q(Y.id,"startDate",V),isDarkMode:c,compact:!0}),t.jsx(er,{value:Y.endDate,onChange:V=>q(Y.id,"endDate",V),isDarkMode:c,compact:!0})]})]},Y.id)),t.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"16px"},children:[t.jsx("input",{type:"text",style:B.input,value:Ee,onChange:Y=>k(Y.target.value),placeholder:"New milestone name"}),t.jsxs("button",{style:B.addButton(o==="add-field"),onMouseEnter:()=>e("add-field"),onMouseLeave:()=>e(null),onClick:nt,children:[t.jsx(Sr,{size:16}),"Add"]})]})]}),(R||M==="weekly")&&t.jsxs("div",{style:B.formCard,children:[t.jsx("h3",{style:B.sectionTitle,children:"Edit Weekly Allocations"}),t.jsxs("p",{style:{fontSize:"14px",color:c?"#94a3b8":"#64748b",marginBottom:"24px"},children:["Manage your weekly time allocations for ",R?C:"this project",". Recommended: ",ge,"h per week."]}),Pe.map((Y,V)=>t.jsxs("div",{style:{...B.customFieldCard,padding:"20px",marginBottom:"16px"},children:[t.jsxs("div",{style:B.customFieldHeader,children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"600",color:c?"#e2e8f0":"#374151",fontSize:"15px"},children:["Week ",V+1]}),t.jsx("div",{style:{fontSize:"12px",color:c?"#94a3b8":"#64748b",marginTop:"2px"},children:Y.weekStart&&Y.weekEnd?`${new Date(Y.weekStart).toLocaleDateString()} - ${new Date(Y.weekEnd).toLocaleDateString()}`:"Dates not set"})]}),t.jsx("button",{style:B.deleteButton(o===`remove-week-${Y.id}`),onMouseEnter:()=>e(`remove-week-${Y.id}`),onMouseLeave:()=>e(null),onClick:()=>ye(Y.id),children:t.jsx(Kn,{size:16})})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{...B.label,fontSize:"12px",marginBottom:"6px"},children:"Start Date"}),t.jsx(er,{value:Y.weekStart,onChange:ve=>dt(Y.id,ve),isDarkMode:c,compact:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{...B.label,fontSize:"12px",marginBottom:"6px"},children:"End Date"}),t.jsx(er,{value:Y.weekEnd,onChange:ve=>ze(Y.id,"weekEnd",ve),isDarkMode:c,compact:!0})]})]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:{...B.label,fontSize:"12px",marginBottom:"6px"},children:"Allocated Hours"}),t.jsx("input",{type:"number",style:{...B.input,fontWeight:"600",fontSize:"16px"},value:Y.plannedHours,onChange:ve=>ze(Y.id,"plannedHours",parseFloat(ve.target.value)||0),placeholder:"0.0",min:"0",max:"80",step:"0.5"})]}),t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("label",{style:{...B.label,fontSize:"12px",marginBottom:"6px"},children:"Tasks"}),Y.tasks.split(`
`).filter(ve=>ve.trim()).map((ve,me)=>t.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"6px",alignItems:"center"},children:[t.jsx("input",{type:"text",value:ve,onChange:T=>{const wt=Y.tasks.split(`
`).filter(w=>w.trim());wt[me]=T.target.value,ze(Y.id,"tasks",wt.join(`
`))},style:{flex:1,padding:"8px 12px",borderRadius:"8px",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:c?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:c?"#e2e8f0":"#1e293b",fontSize:"13px",outline:"none"}}),t.jsx("button",{style:{padding:"6px",borderRadius:"6px",border:"none",backgroundColor:o===`remove-task-${Y.id}-${me}`?"rgba(239,68,68,0.1)":"transparent",color:o===`remove-task-${Y.id}-${me}`?"#ef4444":c?"#94a3b8":"#64748b",cursor:"pointer",display:"flex",alignItems:"center"},onMouseEnter:()=>e(`remove-task-${Y.id}-${me}`),onMouseLeave:()=>e(null),onClick:()=>{const T=Y.tasks.split(`
`).filter(wt=>wt.trim());T.splice(me,1),ze(Y.id,"tasks",T.join(`
`))},children:t.jsx(gr,{size:14})})]},me)),t.jsxs("button",{style:{...B.addButton(o===`add-task-${Y.id}`),padding:"8px 14px",fontSize:"12px",marginTop:"8px"},onMouseEnter:()=>e(`add-task-${Y.id}`),onMouseLeave:()=>e(null),onClick:()=>{const ve=Y.tasks?Y.tasks.trim():"",me=ve?`${ve}
New task`:"New task";ze(Y.id,"tasks",me)},children:[t.jsx(Sr,{size:12}),"Add Task"]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{...B.label,fontSize:"12px",marginBottom:"6px"},children:"Additional Notes (Optional)"}),t.jsx("textarea",{style:{...B.input,minHeight:"60px",resize:"vertical",fontStyle:"italic"},value:Y.notes,onChange:ve=>ze(Y.id,"notes",ve.target.value),placeholder:"Any additional context or notes..."})]})]},Y.id)),Pe.length>0&&t.jsxs("div",{style:{marginTop:"20px",marginBottom:"20px",padding:"16px",borderRadius:"12px",backgroundColor:(()=>{const V=Pe.reduce((ve,me)=>ve+(me.plannedHours||0),0)/Pe.length;return V>ge?"rgba(239,68,68,0.1)":Math.abs(V-ge)<1?"rgba(16,185,129,0.1)":c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)"})(),border:(()=>{const V=Pe.reduce((ve,me)=>ve+(me.plannedHours||0),0)/Pe.length;return V>ge?"1px solid rgba(239,68,68,0.3)":Math.abs(V-ge)<1?"1px solid rgba(16,185,129,0.3)":c?"1px solid rgba(59,130,246,0.3)":"1px solid rgba(59,130,246,0.2)"})()},children:[t.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:c?"#93c5fd":"#3b82f6",marginBottom:"8px"},children:"Summary"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b"},children:[Pe.reduce((Y,V)=>Y+(V.plannedHours||0),0).toFixed(1),"h"]}),t.jsx("div",{style:{fontSize:"11px",color:c?"#94a3b8":"#64748b"},children:"Total Hours"})]}),t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b"},children:[(Pe.reduce((Y,V)=>Y+(V.plannedHours||0),0)/Pe.length).toFixed(1),"h"]}),t.jsx("div",{style:{fontSize:"11px",color:c?"#94a3b8":"#64748b"},children:"Average per Week"})]})]})]}),t.jsxs("button",{style:B.addButton(o==="add-week"),onMouseEnter:()=>e("add-week"),onMouseLeave:()=>e(null),onClick:lt,children:[t.jsx(Sr,{size:16}),"Add Weekly Allocation"]}),t.jsxs("div",{style:B.infoBox,children:[" ",t.jsx("strong",{children:"Tip:"})," Plan Monday-Friday (",ge,"h) for standard work weeks, but you can use custom periods as needed."]})]}),t.jsxs("button",{style:B.saveButton(o==="save"),onMouseEnter:()=>e("save"),onMouseLeave:()=>e(null),onClick:Ne,children:[t.jsx(ki,{size:20}),"Save Changes"]})]})},p8=()=>{const[o,e]=h.useState(null),[r,n]=h.useState(null),[a,A]=h.useState(!1),[c,p]=h.useState(!1),[d,m]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[g,y]=h.useState("Last 30 Days"),[b,R]=h.useState("All Projects"),[C,Q]=h.useState(!1),[S,N]=h.useState([]),[M,Ie]=h.useState([]),fe=bo.useMemo(()=>{const B=S||[],U=M||[];return[...B,...U].sort((Ae,Y)=>Ae.localeCompare(Y))},[S,M]),[F,ae]=h.useState(null),[ee,Re]=h.useState(!1),[se,Z]=h.useState(null),[ue,pe]=h.useState(""),[we,Pe]=h.useState(""),[re,Ee]=h.useState({firstName:"User",lastName:"Name",role:"member",department:"Department"}),[k,ge]=h.useState("reports"),[_,G]=h.useState(!1),[E,D]=h.useState(!1),ie=h.useRef(null),[L,j]=h.useState({top:64,left:0}),de=["Today","Last 7 Days","Last 30 Days","Last 3 Months","Last 6 Months","This Year","Custom"],Oe=()=>{m(!d);try{localStorage.setItem("darkMode",(!d).toString())}catch{console.log("LocalStorage not available")}A(!1)},Ge=B=>B>=95&&B<=105?"#10b981":B>=90&&B<95?"#f59e0b":B>105?"#8b5cf6":"#ef4444",Ve=B=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:B?"rgba(59,130,246,0.1)":d?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:B?"#3b82f6":d?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:B?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:B?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}),ke=B=>({backgroundColor:d?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:B?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:B?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",border:d?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),Be=B=>{const U=new Date;U.setHours(0,0,0,0);let Ae,Y;switch(B){case"Today":Ae=Y=new Date(U);break;case"Last 7 Days":Ae=new Date(U),Ae.setDate(U.getDate()-7),Y=new Date(U);break;case"Last 30 Days":Ae=new Date(U),Ae.setDate(U.getDate()-30),Y=new Date(U);break;case"Last 3 Months":Ae=new Date(U),Ae.setMonth(U.getMonth()-3),Y=new Date(U);break;case"Last 6 Months":Ae=new Date(U),Ae.setMonth(U.getMonth()-6),Y=new Date(U);break;case"This Year":Ae=new Date(U.getFullYear(),0,1),Y=new Date(U);break;default:Ae=Y=new Date(U)}return{from:Ae.toISOString().split("T")[0],to:Y.toISOString().split("T")[0]}},nt=async()=>{Re(!0),Z(null);try{const B=g==="Custom"?{from:ue,to:we}:Be(g);if(g==="Custom"&&(!ue||!we)){Z("Please select both start and end dates for custom range"),Re(!1);return}const U=new URLSearchParams({fromDate:B.from,toDate:B.to});b&&b!=="All Projects"&&U.append("projectFilter",b),console.log("Fetching report with params:",U.toString());const Ae=await Te(`/api/reports?${U.toString()}`,{credentials:"include"});if(!Ae.ok)throw new Error("Failed to fetch report data");const Y=await Ae.json();console.log("Report data received:",Y),ae(Y)}catch(B){console.error("Error fetching report:",B),Z(B.message)}finally{Re(!1)}},yt=()=>{Q(!0),nt(),setTimeout(()=>{Q(!1)},1e3)},q=B=>{ge(B),G(!1),B==="team"?window.location.href="/adminteamcapacity":B==="utilization"&&(window.location.href="/adminutilization")},lt=()=>{switch(k){case"reports":return"Personal Reports";case"team":return"Team Capacity Summary";case"utilization":return"Utilization Overview";default:return"Personal Reports"}};h.useEffect(()=>{if(ie.current&&_){const B=ie.current.getBoundingClientRect();j({top:B.bottom+4,left:B.left})}},[_]),h.useEffect(()=>{const B=U=>{ie.current&&!ie.current.contains(U.target)&&G(!1)};return _&&document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[_]),h.useEffect(()=>{(async()=>{try{const U=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(U.ok){const Ae=await U.json();Ee(Ae);const Y=Array.isArray(Ae.assignedProjects)?Ae.assignedProjects:[],V=Y.filter(me=>me.projectType==="Project").map(me=>me.name),ve=Y.filter(me=>me.projectType==="Operations").map(me=>me.name);N(V),Ie(ve)}}catch(U){console.error("Error fetching user profile:",U)}})()},[]),h.useEffect(()=>{nt()},[]),h.useEffect(()=>{g!=="Custom"&&nt()},[g,b]),h.useEffect(()=>{const B=document.createElement("style");return B.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.8; }
      }
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      .floating {
        animation: float 3s ease-in-out infinite;
      }

      @keyframes shimmer {
        0% {
          background-position: -200% 0;
        }
        100% {
          background-position: 200% 0;
        }
      }
    `,document.head.appendChild(B),()=>document.head.removeChild(B)},[]);const ye=(B,U)=>B?!U||U.trim()===""?B[0].toUpperCase():`${B[0]}${U[0]}`.toUpperCase():"?",ze=()=>t.jsxs("div",{style:{...ke(!1),pointerEvents:"none"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[t.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:d?"linear-gradient(90deg, rgba(59,130,246,0.3) 25%, rgba(59,130,246,0.4) 50%, rgba(59,130,246,0.3) 75%)":"linear-gradient(90deg, rgba(59,130,246,0.2) 25%, rgba(59,130,246,0.3) 50%, rgba(59,130,246,0.2) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{width:"80px",height:"24px",borderRadius:"8px",marginBottom:"8px",background:d?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx("div",{style:{width:"120px",height:"14px",borderRadius:"6px",background:d?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]})]}),t.jsx("div",{style:{width:"100%",height:"6px",borderRadius:"3px",background:d?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),dt=()=>t.jsxs("div",{style:{...ke(!1),pointerEvents:"none"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginBottom:"24px"},children:[t.jsx("div",{style:{width:"220px",height:"20px",borderRadius:"8px",background:d?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"4px",background:d?"linear-gradient(90deg, rgba(16,185,129,0.3) 25%, rgba(16,185,129,0.4) 50%, rgba(16,185,129,0.3) 75%)":"linear-gradient(90deg, rgba(16,185,129,0.2) 25%, rgba(16,185,129,0.3) 50%, rgba(16,185,129,0.2) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),t.jsxs("div",{style:{height:"400px",position:"relative"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"end",justifyContent:"space-between",height:"320px",padding:"0 40px 20px 40px",borderBottom:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:[t.jsx("div",{style:{position:"absolute",left:"0",top:"0",height:"300px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[...Array(5)].map((B,U)=>t.jsx("div",{style:{width:"30px",height:"12px",borderRadius:"4px",background:d?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${U*.1}s`}},U))}),[...Array(6)].map((B,U)=>t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",flex:1},children:[t.jsx("div",{style:{display:"flex",alignItems:"end",gap:"6px",height:"280px"},children:[...Array(2)].map((Ae,Y)=>t.jsx("div",{style:{width:"24px",height:`${100+Math.random()*120}px`,borderRadius:"6px 6px 0 0",background:d?"linear-gradient(90deg, rgba(59,130,246,0.3) 25%, rgba(59,130,246,0.4) 50%, rgba(59,130,246,0.3) 75%)":"linear-gradient(90deg, rgba(59,130,246,0.2) 25%, rgba(59,130,246,0.3) 50%, rgba(59,130,246,0.2) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${(U*2+Y)*.1}s`}},Y))}),t.jsx("div",{style:{width:"40px",height:"13px",borderRadius:"6px",background:d?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${U*.1}s`}})]},U))]}),t.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"32px",marginTop:"20px",padding:"16px",backgroundColor:d?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.5)",borderRadius:"12px"},children:[...Array(2)].map((B,U)=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",background:d?"linear-gradient(90deg, rgba(59,130,246,0.3) 25%, rgba(59,130,246,0.4) 50%, rgba(59,130,246,0.3) 75%)":"linear-gradient(90deg, rgba(59,130,246,0.2) 25%, rgba(59,130,246,0.3) 50%, rgba(59,130,246,0.2) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx("div",{style:{width:"100px",height:"13px",borderRadius:"6px",background:d?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${U*.1}s`}})]},U))})]})]}),Ne=()=>t.jsxs("div",{style:{...ke(!1),pointerEvents:"none"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[t.jsx("div",{style:{width:"180px",height:"20px",borderRadius:"8px",background:d?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx("div",{style:{width:"80px",height:"32px",borderRadius:"8px",background:d?"linear-gradient(90deg, rgba(59,130,246,0.3) 25%, rgba(59,130,246,0.4) 50%, rgba(59,130,246,0.3) 75%)":"linear-gradient(90deg, rgba(59,130,246,0.2) 25%, rgba(59,130,246,0.3) 50%, rgba(59,130,246,0.2) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]}),t.jsxs("div",{style:{borderRadius:"12px",border:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",overflow:"hidden"},children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1.5fr",padding:"16px",backgroundColor:d?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",borderBottom:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:[...Array(5)].map((B,U)=>t.jsx("div",{style:{height:"14px",borderRadius:"6px",background:d?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${U*.1}s`,width:U===0?"60%":"70%",marginLeft:U===0?"0":"auto",marginRight:"auto"}},U))}),[...Array(5)].map((B,U)=>t.jsx("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1.5fr",padding:"16px",borderBottom:U<4?d?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)":"none"},children:[...Array(5)].map((Ae,Y)=>t.jsx("div",{style:{height:"14px",borderRadius:"6px",background:d?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${(U*5+Y)*.05}s`,width:Y===0?"80%":Y===1?"60%":"50%",marginLeft:Y===0?"0":"auto",marginRight:"auto"}},Y))},U))]}),t.jsxs("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:d?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("div",{style:{width:"140px",height:"14px",borderRadius:"6px",background:d?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx("div",{style:{width:"200px",height:"14px",borderRadius:"6px",background:d?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]})]});return t.jsxs("div",{style:{minHeight:"100vh",padding:"30px",background:d?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"32px",position:"relative"},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:t.jsxs("div",{ref:ie,style:{fontSize:"28px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",userSelect:"none",color:d?"#e2e8f0":"#1e293b"},onClick:()=>G(B=>!B),onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),children:[t.jsx("span",{children:lt()}),t.jsx(Mo,{size:20,style:{transition:"all 0.3s ease",transform:_||E?"rotate(-90deg)":"rotate(0deg)",color:_||E?"#3b82f6":d?"#94a3b8":"#64748b"}})]})}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[t.jsxs("button",{style:Ve(r==="alerts"),onMouseEnter:()=>n("alerts"),onMouseLeave:()=>n(null),onClick:()=>window.location.href="/adminalerts",children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"}})]}),t.jsxs("div",{style:{position:"relative",display:"flex",justifyContent:"flex-end"},children:[t.jsx("button",{style:Ve(r==="profile"),onMouseEnter:()=>{n("profile"),A(!0)},onMouseLeave:()=>n(null),onClick:()=>window.location.href="/adminprofile",children:t.jsx(qt,{size:20})}),a&&re&&t.jsxs("div",{style:{position:"absolute",top:"60px",right:"0",left:"auto",backgroundColor:d?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:d?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out"},onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[t.jsx("div",{style:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:d?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:d?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"}}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[t.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},children:ye(re.firstName,re.lastName)}),t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:d?"#e2e8f0":"#1e293b"},children:[re.firstName," ",re.lastName||""]}),t.jsxs("div",{style:{fontSize:"12px",color:d?"#94a3b8":"#64748b"},children:[re.role==="admin"?"Admin":"Member","  ",re.department]})]})]}),t.jsx("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",width:"100%"},onClick:Oe,children:d?" Light Mode":" Dark Mode"})]})]})]})]}),(re==null?void 0:re.role)==="admin"&&_&&t.jsx("div",{style:{position:"fixed",top:L.top,left:L.left,zIndex:999,backgroundColor:d?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:d?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},onMouseDown:B=>B.stopPropagation(),onClick:B=>B.stopPropagation(),children:t.jsx("div",{children:["reports","team","utilization"].map((B,U)=>t.jsx("div",{style:{backgroundColor:r===`section-${U}`?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:d?"#e2e8f0":"#374151",transform:r===`section-${U}`?"translateX(4px)":"translateX(0)",borderLeft:r===`section-${U}`?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"},onClick:Ae=>{Ae.preventDefault(),Ae.stopPropagation(),q(B)},onMouseDown:Ae=>{Ae.preventDefault(),Ae.stopPropagation()},onMouseEnter:()=>n(`section-${U}`),onMouseLeave:()=>n(null),children:B==="reports"?"Personal Reports":B==="team"?"Team Capacity":"Utilization Overview"},B))})}),se&&t.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",color:"#ef4444"},children:[t.jsx(io,{size:20}),t.jsx("span",{children:se})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",marginBottom:"32px",flexWrap:"wrap"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx(wo,{size:20,style:{color:d?"#94a3b8":"#64748b"}}),t.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:d?"#e2e8f0":"#1e293b"},children:"Date Range:"}),t.jsx(Tt,{value:g,onChange:B=>y(B),options:de,placeholder:"Select date range...",isDarkMode:d,compact:!0,clearable:!1})]}),g==="Custom"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{minWidth:"200px"},children:t.jsx(er,{value:ue,onChange:B=>pe(B),label:"From Date",isDarkMode:d,placeholder:"Select start date",compact:!0})}),t.jsx("div",{style:{minWidth:"200px"},children:t.jsx(er,{value:we,onChange:B=>Pe(B),label:"To Date",isDarkMode:d,placeholder:"Select end date",compact:!0})})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx(th,{size:20,style:{color:d?"#94a3b8":"#64748b"}}),t.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:d?"#e2e8f0":"#1e293b"},children:"Project:"}),t.jsx(Tt,{value:b,onChange:B=>R(B==="All Projects"?"All Projects":B),placeholder:S.length>0||M.length>0?{"":["All Projects"],"Your Assigned Projects":S.slice().sort((B,U)=>B.localeCompare(U)),"Your Assigned Operations":M.slice().sort((B,U)=>B.localeCompare(U))}:null,isDarkMode:d,searchable:fe.length>5,compact:!0,clearable:!1,disabled:fe.length===0,groupedOptions:{"Your Assigned Projects":S.slice().sort((B,U)=>B.localeCompare(U)),"Your Assigned Operations":M.slice().sort((B,U)=>B.localeCompare(U))}})]}),t.jsxs("button",{style:{padding:"12px 24px",borderRadius:"12px",border:"none",backgroundColor:C?"#6b7280":o==="generate"?"#2563eb":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:C?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",transform:o==="generate"&&!C?"translateY(-2px)":"translateY(0)",boxShadow:o==="generate"&&!C?"0 8px 25px rgba(59,130,246,0.3)":"0 4px 12px rgba(59,130,246,0.2)"},onMouseEnter:()=>!C&&e("generate"),onMouseLeave:()=>e(null),onClick:yt,disabled:C,children:[t.jsx(LA,{size:16,style:{animation:C?"spin 1s linear infinite":"none"}}),C?"Generating...":"Generate"]})]}),ee&&!F?t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px",marginBottom:"32px"},children:[...Array(4)].map((B,U)=>t.jsx(ze,{},U))}):t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px",marginBottom:"32px"},children:[t.jsxs("div",{style:ke(r==="stat1"),onMouseEnter:()=>n("stat1"),onMouseLeave:()=>n(null),children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[t.jsxs("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(16,185,129,0.1)",color:"#10b981",position:"relative"},children:[t.jsx(lb,{size:24}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx(sb,{size:14,style:{position:"absolute",top:"-30px",right:"-8px",cursor:"pointer",opacity:.6},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)}),c&&t.jsxs("div",{style:{position:"absolute",bottom:"40px",right:"-50px",backgroundColor:d?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"8px",boxShadow:"0 8px 16px rgba(0,0,0,0.15)",padding:"12px",minWidth:"200px",border:d?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out"},children:[t.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:d?"#e2e8f0":"#1e293b",marginBottom:"6px"},children:"Accuracy Formula:"}),t.jsx("div",{style:{fontSize:"11px",color:d?"#94a3b8":"#64748b",fontFamily:"monospace"},children:"(Actuals / Planned)  100"}),t.jsx("div",{style:{fontSize:"10px",color:d?"#94a3b8":"#64748b",marginTop:"6px",fontStyle:"italic"},children:"Optimal: 95-105%"})]})]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"24px",fontWeight:"800",color:d?"#e2e8f0":"#1e293b"},children:F?`${F.summary.accuracy}%`:ee?"...":"N/A"}),t.jsx("div",{style:{fontSize:"14px",color:d?"#94a3b8":"#64748b"},children:"Actuals vs Planned"})]})]}),t.jsx("div",{style:{width:"100%",height:"6px",backgroundColor:d?"#4b5563":"#f1f5f9",borderRadius:"3px",overflow:"hidden"},children:t.jsx("div",{style:{width:`${F?Math.min(parseFloat(F.summary.accuracy),100):0}%`,height:"100%",backgroundColor:Ge(F?parseFloat(F.summary.accuracy):0),borderRadius:"3px",transition:"width 0.8s ease"}})})]}),t.jsx("div",{style:ke(r==="stat2"),onMouseEnter:()=>n("stat2"),onMouseLeave:()=>n(null),children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[t.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6"},children:t.jsx(bs,{size:24})}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"24px",fontWeight:"800",color:d?"#e2e8f0":"#1e293b"},children:F?`${F.individualPlans.total}h`:ee?"...":"N/A"}),t.jsx("div",{style:{fontSize:"14px",color:d?"#94a3b8":"#64748b"},children:"Total Planned Hours"})]})]})}),t.jsx("div",{style:ke(r==="stat3"),onMouseEnter:()=>n("stat3"),onMouseLeave:()=>n(null),children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[t.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(245,158,11,0.1)",color:"#f59e0b"},children:t.jsx(GA,{size:24})}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"24px",fontWeight:"800",color:d?"#e2e8f0":"#1e293b"},children:F?`${F.actuals.total}h`:ee?"...":"N/A"}),t.jsx("div",{style:{fontSize:"14px",color:d?"#94a3b8":"#64748b"},children:"Total Actual Hours"})]})]})}),t.jsx("div",{style:ke(r==="stat4"),onMouseEnter:()=>n("stat4"),onMouseLeave:()=>n(null),children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[t.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(139,92,246,0.1)",color:"#8b5cf6"},children:t.jsx(Un,{size:24})}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"24px",fontWeight:"800",color:(F==null?void 0:F.summary.difference)>=0?"#10b981":"#ef4444"},children:F?`${F.summary.difference>=0?"+":""}${F.summary.difference}h`:ee?"...":"N/A"}),t.jsx("div",{style:{fontSize:"14px",color:d?"#94a3b8":"#64748b"},children:"Difference"})]})]})})]}),t.jsx("div",{style:{marginBottom:"32px"},children:t.jsxs("div",{style:ke(r==="chart"),onMouseEnter:()=>n("chart"),onMouseLeave:()=>n(null),children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[t.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:d?"#e2e8f0":"#1e293b",margin:0},children:"Capacity Utilization Overview"}),t.jsx(bd,{size:20,style:{color:"#10b981"}})]}),ee&&!F?t.jsx(dt,{}):!F||!F.capacityByMonth||F.capacityByMonth.length===0?t.jsxs("div",{style:{height:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:d?"#94a3b8":"#64748b",gap:"12px"},children:[t.jsx(io,{size:48,style:{opacity:.5}}),t.jsx("div",{style:{fontSize:"16px",fontWeight:"600"},children:"No data available"}),t.jsx("div",{style:{fontSize:"14px",opacity:.7},children:"Try adjusting your date range or project filter"})]}):t.jsxs("div",{style:{height:"400px",position:"relative"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"end",justifyContent:"space-between",height:"320px",padding:"0 40px 20px 40px",borderBottom:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",position:"relative"},children:[t.jsxs("div",{style:{position:"absolute",left:"0",top:"0",height:"300px",display:"flex",flexDirection:"column",justifyContent:"space-between",fontSize:"12px",color:d?"#94a3b8":"#64748b"},children:[t.jsx("span",{children:"200h"}),t.jsx("span",{children:"150h"}),t.jsx("span",{children:"100h"}),t.jsx("span",{children:"50h"}),t.jsx("span",{children:"0h"})]}),F.capacityByMonth.map((B,U)=>t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",flex:1,position:"relative"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"end",gap:"6px",height:"280px",position:"relative"},children:[t.jsx("div",{style:{width:"24px",height:`${B.planned/200*260}px`,backgroundColor:"#3b82f6",borderRadius:"6px 6px 0 0",transition:"all 0.5s ease",transform:r==="chart"?"scaleY(1.02)":"scaleY(1)",opacity:r==="chart"?.9:.8,position:"relative"},title:`Planned: ${B.planned}h`,children:t.jsxs("div",{style:{position:"absolute",top:"-25px",left:"50%",transform:"translateX(-50%)",fontSize:"10px",color:"#3b82f6",fontWeight:"600",whiteSpace:"nowrap"},children:[B.planned,"h"]})}),t.jsx("div",{style:{width:"24px",height:`${B.actual/200*260}px`,backgroundColor:Ge(B.efficiency),borderRadius:"6px 6px 0 0",transition:"all 0.5s ease",transform:r==="chart"?"scaleY(1.02)":"scaleY(1)",position:"relative"},title:`Actual: ${B.actual}h`,children:t.jsxs("div",{style:{position:"absolute",top:"-25px",left:"50%",transform:"translateX(-50%)",fontSize:"10px",color:Ge(B.efficiency),fontWeight:"600",whiteSpace:"nowrap"},children:[B.actual,"h"]})})]}),t.jsxs("div",{style:{position:"absolute",bottom:"30px",left:"50%",transform:"translateX(-50%)",fontSize:"11px",fontWeight:"700",color:Ge(B.efficiency),backgroundColor:d?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",padding:"4px 8px",borderRadius:"12px",border:`1px solid ${Ge(B.efficiency)}20`},children:[B.efficiency,"%"]}),t.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:d?"#94a3b8":"#64748b"},children:B.month})]},`${B.month}-${B.year}`))]}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"32px",marginTop:"20px",padding:"16px",backgroundColor:d?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.5)",borderRadius:"12px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"#3b82f6",borderRadius:"4px"}}),t.jsx("span",{style:{fontSize:"13px",color:d?"#94a3b8":"#64748b",fontWeight:"500"},children:"Planned Hours"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("div",{style:{width:"16px",height:"16px",background:"linear-gradient(90deg, #10b981 0%, #f59e0b 50%, #ef4444 100%)",borderRadius:"4px"}}),t.jsx("span",{style:{fontSize:"13px",color:d?"#94a3b8":"#64748b",fontWeight:"500"},children:"Actual Hours (Color = Efficiency)"})]})]})]})]})}),t.jsxs("div",{style:ke(r==="table"),onMouseEnter:()=>n("table"),onMouseLeave:()=>n(null),children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[t.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:d?"#e2e8f0":"#1e293b",margin:0},children:"Project Performance"}),t.jsxs("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:o==="download"?"#2563eb":"#3b82f6",color:"#fff",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease"},onMouseEnter:()=>e("download"),onMouseLeave:()=>e(null),children:[t.jsx(ob,{size:14}),"Export"]})]}),ee&&!F?t.jsx(Ne,{}):!F||!F.projectPerformance||F.projectPerformance.length===0?t.jsxs("div",{style:{padding:"60px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:d?"#94a3b8":"#64748b",gap:"12px"},children:[t.jsx(io,{size:48,style:{opacity:.5}}),t.jsx("div",{style:{fontSize:"16px",fontWeight:"600"},children:"No project data available"}),t.jsx("div",{style:{fontSize:"14px",opacity:.7},children:b?"No data found for the selected project":"No master plans found in this date range"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{overflowX:"auto",borderRadius:"12px",border:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{backgroundColor:d?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)"},children:[t.jsx("th",{style:{padding:"16px",textAlign:"left",fontSize:"14px",fontWeight:"700",color:d?"#e2e8f0":"#374151",borderBottom:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Project"}),t.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:d?"#e2e8f0":"#374151",borderBottom:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Activity Type"}),t.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:d?"#e2e8f0":"#374151",borderBottom:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Planned Hours"}),t.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:d?"#e2e8f0":"#374151",borderBottom:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Spent Hours"}),t.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:d?"#e2e8f0":"#374151",borderBottom:d?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Efficiency"})]})}),t.jsx("tbody",{children:F.projectPerformance.map((B,U)=>t.jsxs("tr",{style:{backgroundColor:o===`row-${U}`?d?"rgba(59,130,246,0.05)":"rgba(59,130,246,0.02)":"transparent",transition:"all 0.2s ease"},onMouseEnter:()=>e(`row-${U}`),onMouseLeave:()=>e(null),children:[t.jsx("td",{style:{padding:"16px",fontSize:"14px",fontWeight:"600",color:d?"#e2e8f0":"#374151",borderBottom:d?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:B.project}),t.jsx("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",color:d?"#94a3b8":"#64748b",borderBottom:d?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:t.jsx("span",{style:{padding:"4px 8px",borderRadius:"6px",backgroundColor:d?"rgba(75,85,99,0.3)":"rgba(226,232,240,0.3)",fontSize:"12px",fontWeight:"500"},children:B.activityType})}),t.jsxs("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"600",color:"#3b82f6",borderBottom:d?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:[B.plannedHours,"h"]}),t.jsxs("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"600",color:Ge(B.efficiency),borderBottom:d?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:[B.spentHours,"h"]}),t.jsx("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:Ge(B.efficiency),borderBottom:d?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[B.efficiency,"%",t.jsx("div",{style:{width:"40px",height:"4px",backgroundColor:d?"#4b5563":"#f1f5f9",borderRadius:"2px",overflow:"hidden"},children:t.jsx("div",{style:{width:`${Math.min(B.efficiency,100)}%`,height:"100%",backgroundColor:Ge(B.efficiency),borderRadius:"2px",transition:"width 0.5s ease"}})})]})})]},U))})]})}),t.jsxs("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:d?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{style:{fontSize:"14px",color:d?"#94a3b8":"#64748b"},children:["Showing ",F.projectPerformance.length," of ",F.projectPerformance.length," projects"]}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"16px",fontSize:"14px",fontWeight:"600"},children:t.jsxs("span",{style:{color:d?"#e2e8f0":"#374151"},children:["Total: ",F.projectPerformance.reduce((B,U)=>B+U.plannedHours,0).toFixed(1),"h planned, ",F.projectPerformance.reduce((B,U)=>B+U.spentHours,0).toFixed(1),"h spent"]})})]})]})]})]})},g8=()=>{var zt,ir,Yt,vr,Tr;const[o,e]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[r,n]=h.useState(""),[a,A]=h.useState("All Roles"),[c,p]=h.useState("All Departments"),[d,m]=h.useState("table"),[g,y]=h.useState(!1),[b,R]=h.useState([]),[C,Q]=h.useState(!1),[S,N]=h.useState(!1),[M,Ie]=h.useState(null),[fe,F]=h.useState(null),[ae,ee]=h.useState({}),[Re,se]=h.useState(null),[Z,ue]=h.useState(null),[pe,we]=h.useState(!1),[Pe,re]=h.useState(!1),[Ee,k]=h.useState([]),[ge,_]=h.useState(""),[G,E]=h.useState(""),[D,ie]=h.useState({}),[L,j]=h.useState([]),[de,Oe]=h.useState([]),[Ge,Ve]=h.useState(!1),[ke,Be]=h.useState({x:0,y:0}),[nt,yt]=h.useState(null),q=h.useRef(null),[lt,ye]=h.useState([]),[ze,dt]=h.useState(!1),[Ne,B]=h.useState(null),U=(J,be)=>J?!be||be.trim()===""?J[0].toUpperCase():`${J[0]}${be[0]}`.toUpperCase():"?",Ae=["DTO","P&A","PPC","Finance","A&I","Marketing"],[Y,V]=h.useState(!0);h.useEffect(()=>{(async()=>{try{const be=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(be.ok){const De=await be.json();if(De.role!=="admin"){window.location.href="/admindashboard";return}B(De)}else{window.location.href="/";return}}catch(be){console.error("Failed to verify access",be),window.location.href="/";return}finally{V(!1)}})()},[]);const ve=async()=>{we(!0),_("");try{const J=await Te("/users",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(J.ok){const be=await J.json();k(be),console.log("Users fetched successfully:",be)}else if(J.status===401)_("Authentication required. Please log in.");else{const be=await J.json();_(be.message||"Failed to fetch users")}}catch(J){console.error("Error fetching users:",J),_("Network error. Please check your connection.")}finally{we(!1)}};h.useEffect(()=>{(async()=>{dt(!0);try{const be=await Te("/api/manictime-admin/subscriptions",{credentials:"include"});if(be.ok){const De=await be.json();ye(De)}}catch(be){console.error("Error fetching subscriptions:",be)}finally{dt(!1)}})()},[]),h.useEffect(()=>{ve()},[]),h.useEffect(()=>{if(!S||!ae.department){j([]);return}Ve(!0),Te("/api/ai/admin/structure",{credentials:"include"}).then(J=>J.json()).then(J=>{var K;const be=J.domains.find(qe=>qe.name===ae.department),De=be?be.contexts:[];if(j(De),(K=fe==null?void 0:fe.projects)!=null&&K.length){const qe=fe.projects.map(Ct=>Ct.id);Oe(De.filter(Ct=>qe.includes(Ct.id)).map(Ct=>Ct.id))}else Oe([])}).finally(()=>Ve(!1))},[S,ae.department]);const me=J=>{Ie(J),Q(!0)},T=J=>{var be;F(J),ee({...J}),(be=J.projects)!=null&&be.length?Oe(J.projects.map(De=>De.id)):Oe([]),ie({}),N(!0)},wt=()=>{var be,De;const J={};return(be=ae.firstName)!=null&&be.trim()||(J.firstName="First name is required"),(De=ae.email)!=null&&De.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ae.email)||(J.email="Please enter a valid email"):J.email="Email is required",ae.department||(J.department="Department is required"),ae.phoneNumber&&!/^[689]\d{7}$/.test(ae.phoneNumber)&&(J.phoneNumber="Phone number must start with 6, 8, or 9 and be 8 digits long"),ie(J),Object.keys(J).length===0},w=async()=>{try{const J=await Te(`/users/${M}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(J.ok){const be=await J.json();k(De=>De.filter(K=>K.id!==M)),E("User deleted successfully"),setTimeout(()=>E(""),3e3),console.log("User deleted successfully:",be)}else{const be=await J.json();_(be.message||"Failed to delete user"),setTimeout(()=>_(""),5e3)}}catch(J){console.error("Error deleting user:",J),_("Network error. Please try again."),setTimeout(()=>_(""),5e3)}finally{Q(!1),Ie(null)}},ce=async()=>{if(wt())try{const J=await Te(`/users/${fe.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(J.ok){await Te(`/api/ai/context-clear/${fe.id}`,{method:"DELETE",credentials:"include"});for(const be of de)await Te("/api/ai/context-assign",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:fe.id,contextId:be})});await ve(),E("User updated successfully"),setTimeout(()=>E(""),3e3),N(!1),F(null),ee({}),ie({})}else{const be=await J.json();_(be.message||"Failed to update user"),setTimeout(()=>_(""),5e3)}}catch{_("Network error. Please try again."),setTimeout(()=>_(""),5e3)}},Ce=(J,be)=>{ee(De=>({...De,[J]:be})),D[J]&&ie(De=>({...De,[J]:""}))},H=()=>{window.location.href="/addusers"},P=Ee.filter(J=>{const be=`${J.firstName} ${J.lastName}`.toLowerCase().includes(r.toLowerCase())||J.email.toLowerCase().includes(r.toLowerCase())||J.department.toLowerCase().includes(r.toLowerCase()),De=a==="All Roles"||J.role===a,K=c==="All Departments"||J.department;return be&&De&&K}),z=(Ne==null?void 0:Ne.role)==="admin"?[{label:"Users",value:Ee.length},{label:"Admins",value:Ee.filter(J=>J.role==="admin").length},{label:"Approvers",value:Ee.filter(J=>J.isApprover).length}]:[{label:"Projects",value:Ne!=null&&Ne.project?1:0},{label:"Hours",value:(Ne==null?void 0:Ne.totalHours)??""},{label:"Capacity",value:Ne!=null&&Ne.capacity?`${Ne.capacity}%`:""}],xe=[...new Set(Ee.map(J=>J.department))],Me=[{label:"Total Users",value:Ee.length,icon:Un,color:"#3b82f6",gradient:"from-blue-500 to-blue-600"},{label:"Admins",value:Ee.filter(J=>J.role==="admin").length,icon:ws,color:"#8b5cf6",gradient:"from-purple-500 to-purple-600"},{label:"Members",value:Ee.filter(J=>J.role==="member").length,icon:qt,color:"#10b981",gradient:"from-emerald-500 to-emerald-600"},{label:"Departments",value:xe.length,icon:fs,color:"#f59e0b",gradient:"from-amber-500 to-amber-600"}],O={page:{minHeight:"100vh",padding:"30px",background:o?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"36px"},title:{fontSize:"32px",fontWeight:"700",color:o?"#f1f5f9":"#1e293b",letterSpacing:"-0.5px"},headerActions:{display:"flex",gap:"12px",alignItems:"center"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"20px",marginBottom:"32px"},statCard:(J,be)=>({position:"relative",background:o?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.8)",borderRadius:"20px",padding:"28px",border:`2px solid ${J?be.color:"transparent"}`,boxShadow:J?`0 20px 40px ${be.color}30, 0 0 0 1px ${be.color}20`:"0 4px 20px rgba(0,0,0,0.08)",backdropFilter:"blur(20px)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:J?"translateY(-8px)":"translateY(0)",cursor:"pointer",overflow:"hidden"}),statIconContainer:J=>({width:"56px",height:"56px",borderRadius:"16px",background:`linear-gradient(135deg, ${J.color} 0%, ${J.color}dd 100%)`,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px",boxShadow:`0 8px 24px ${J.color}40`}),statContent:{position:"relative",zIndex:1},statNumber:{fontSize:"40px",fontWeight:"800",color:o?"#f1f5f9":"#1e293b",lineHeight:1,marginBottom:"8px",letterSpacing:"-1px"},statLabel:{fontSize:"13px",fontWeight:"600",color:o?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},statDecoration:(J,be)=>({position:"absolute",top:"-20px",right:"-20px",width:"120px",height:"120px",borderRadius:"50%",background:`radial-gradient(circle, ${J.color}15 0%, transparent 70%)`,opacity:be?1:.5,transition:"opacity 0.4s ease"}),controlsCard:{position:"relative",background:o?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.8)",borderRadius:"20px",padding:"28px",marginBottom:"28px",border:o?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.6)",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",backdropFilter:"blur(20px)",transition:"all 0.3s ease"},controlsTop:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},searchContainer:{position:"relative",flex:1,minWidth:"320px"},searchInput:{width:"100%",padding:"16px 20px 16px 52px",borderRadius:"14px",border:o?"2px solid rgba(75,85,99,0.3)":"2px solid rgba(226,232,240,0.5)",backgroundColor:o?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.9)",color:o?"#e2e8f0":"#1e293b",fontSize:"15px",fontWeight:"500",outline:"none",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},searchIcon:{position:"absolute",left:"18px",top:"50%",transform:"translateY(-50%)",color:o?"#94a3b8":"#64748b"},filterButton:J=>({padding:"16px 24px",borderRadius:"14px",border:"none",background:J?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":o?"rgba(51,65,85,0.6)":"rgba(255,255,255,0.9)",color:J?"#fff":o?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"10px",fontWeight:"600",fontSize:"14px",boxShadow:J?"0 4px 16px rgba(59,130,246,0.3)":"0 2px 8px rgba(0,0,0,0.04)"}),tableCard:J=>({position:"relative",background:o?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.8)",borderRadius:"20px",overflow:"hidden",border:o?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.6)",boxShadow:J?"0 20px 40px rgba(0,0,0,0.12)":"0 8px 32px rgba(0,0,0,0.08)",backdropFilter:"blur(20px)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:J?"translateY(-4px)":"translateY(0)"}),table:{width:"100%",borderCollapse:"collapse"},th:{textAlign:"left",background:o?"linear-gradient(to bottom, rgba(75,85,99,0.4), rgba(55,65,81,0.6))":"linear-gradient(to bottom, rgba(248,250,252,0.9), rgba(241,245,249,0.9))",padding:"20px 28px",fontSize:"12px",fontWeight:"700",color:o?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"1px",borderBottom:o?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},td:{padding:"20px 28px",fontSize:"15px",fontWeight:"500",color:o?"#e2e8f0":"#1f2937",borderBottom:o?"1px solid rgba(75,85,99,0.2)":"1px solid rgba(241,245,249,0.8)"},tableRow:J=>({transition:"all 0.2s ease",cursor:"pointer",background:J?o?"rgba(59,130,246,0.08)":"rgba(59,130,246,0.04)":"transparent"}),avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},userName:{fontSize:"14px",fontWeight:"600",marginBottom:"4px",color:o?"#f1f5f9":"#1e293b"},userEmail:{fontSize:"13px",fontWeight:"500",color:o?"#94a3b8":"#64748b"},roleChip:J=>({padding:"6px 16px",borderRadius:"10px",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.3px",display:"inline-block",...J==="admin"&&{background:o?"linear-gradient(135deg, rgba(139,92,246,0.2) 0%, rgba(139,92,246,0.3) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",color:o?"#c4b5fd":"#92400e",boxShadow:o?"0 2px 8px rgba(139,92,246,0.3)":"0 2px 8px rgba(251,191,36,0.2)",border:o?"1px solid rgba(139,92,246,0.4)":"none"},...J==="member"&&{background:o?"linear-gradient(135deg, rgba(59,130,246,0.2) 0%, rgba(59,130,246,0.3) 100%)":"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",color:o?"#93c5fd":"#1e40af",boxShadow:o?"0 2px 8px rgba(59,130,246,0.3)":"0 2px 8px rgba(59,130,246,0.2)",border:o?"1px solid rgba(59,130,246,0.4)":"none"}}),iconButton:(J,be)=>({padding:"11px",borderRadius:"12px",border:"none",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",transform:be?"scale(1.1)":"scale(1)",...J==="edit"&&{backgroundColor:be?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.08)",color:"#3b82f6",boxShadow:be?"0 4px 12px rgba(59,130,246,0.25)":"none"},...J==="delete"&&{backgroundColor:be?"rgba(239,68,68,0.15)":"rgba(239,68,68,0.08)",color:"#ef4444",boxShadow:be?"0 4px 12px rgba(239,68,68,0.25)":"none"}}),actionButtons:{display:"flex",gap:"10px"},topButton:J=>({padding:"14px",borderRadius:"14px",border:"none",backgroundColor:J?"rgba(59,130,246,0.12)":o?"rgba(51,65,85,0.6)":"rgba(255,255,255,0.9)",color:J?"#3b82f6":o?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s ease",boxShadow:J?"0 8px 24px rgba(59,130,246,0.15)":"0 2px 8px rgba(0,0,0,0.04)",transform:J?"translateY(-2px)":"translateY(0)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}),notificationBadge:{position:"absolute",top:"10px",right:"10px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:o?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:o?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:o?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:o?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userDetails:{flex:1},userRole:{fontSize:"12px",color:o?"#94a3b8":"#64748b"},userStats:{borderTop:o?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"16px",marginTop:"12px",display:"flex",justifyContent:"space-between"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:o?"#e2e8f0":"#1e293b"},tooltipStatLabel:{fontSize:"10px",color:o?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},floatingAddButton:J=>({position:"fixed",bottom:"32px",right:"32px",width:"68px",height:"68px",borderRadius:"50%",border:"none",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",cursor:"pointer",boxShadow:J?"0 24px 48px rgba(59,130,246,0.4)":"0 12px 32px rgba(59,130,246,0.3)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:J?"translateY(-6px) scale(1.1) rotate(90deg)":"translateY(0) scale(1)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}),actionButton:(J,be)=>({padding:"14px 28px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"10px",transform:be?"translateY(-2px)":"translateY(0)",...J==="primary"&&{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",boxShadow:be?"0 12px 24px rgba(59,130,246,0.3)":"0 4px 12px rgba(59,130,246,0.2)"},...J==="secondary"&&{backgroundColor:o?"rgba(51,65,85,0.6)":"rgba(255,255,255,0.9)",color:o?"#e2e8f0":"#64748b",boxShadow:be?"0 8px 20px rgba(0,0,0,0.12)":"0 4px 12px rgba(0,0,0,0.06)"}}),modal:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,backdropFilter:"blur(8px)",animation:"fadeIn 0.3s ease-out"},modalContent:{backgroundColor:o?"#374151":"#fff",borderRadius:"24px",padding:"36px",maxWidth:"400px",width:"90%",boxShadow:"0 25px 50px rgba(0,0,0,0.3)",border:o?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(20px)",animation:"modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1)"},editModalContent:{backgroundColor:o?"#374151":"#fff",borderRadius:"24px",maxWidth:"900px",width:"90%",maxHeight:"85vh",boxShadow:"0 25px 50px rgba(0,0,0,0.3)",border:o?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(20px)",animation:"modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"column",overflow:"visible"},editModalHeader:{padding:"28px 36px 20px",borderBottom:o?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",flexShrink:0},editModalBody:{padding:"24px 36px",overflowY:"auto",flex:1},editModalFooter:{padding:"20px 36px 28px",borderTop:o?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",flexShrink:0,backgroundColor:o?"rgba(55,65,81,0.5)":"rgba(248,250,252,0.5)",backdropFilter:"blur(10px)"},modalHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},modalTitle:{fontSize:"22px",fontWeight:"700",color:o?"#f1f5f9":"#1e293b"},modalText:{color:o?"#94a3b8":"#64748b",marginBottom:"28px",lineHeight:"1.6",fontSize:"15px"},modalActions:{display:"flex",gap:"12px",justifyContent:"flex-end"},select:{padding:"12px 16px",borderRadius:"10px",border:o?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:o?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:o?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",cursor:"pointer",transition:"all 0.3s ease"},editModalGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"24px"},editInput:{width:"100%",padding:"12px 14px",borderRadius:"10px",border:o?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:o?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:o?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif'},editLabel:{fontSize:"11px",fontWeight:"600",color:o?"#94a3b8":"#64748b",marginBottom:"5px",display:"block",textTransform:"uppercase",letterSpacing:"0.5px"},errorMessage:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"#fff",padding:"18px 26px",borderRadius:"14px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"600",boxShadow:"0 12px 28px rgba(239,68,68,0.4)",zIndex:3e3,animation:"slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1)",maxWidth:"400px"},successMessage:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",padding:"18px 26px",borderRadius:"14px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"600",boxShadow:"0 12px 28px rgba(16,185,129,0.4)",zIndex:3e3,animation:"slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px",color:o?"#94a3b8":"#64748b",gap:"16px"},emptyState:{textAlign:"center",padding:"60px",color:o?"#94a3b8":"#64748b"},editErrorText:{color:"#ef4444",fontSize:"12px",marginTop:"6px",display:"flex",alignItems:"center",gap:"4px",fontWeight:"600"},commandBar:{display:"flex",alignItems:"center",gap:"12px",background:o?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.9)",borderRadius:"16px",padding:"10px 14px",border:o?"1px solid rgba(75,85,99,0.4)":"1px solid rgba(226,232,240,0.6)",boxShadow:"0 8px 24px rgba(0,0,0,0.06)",transition:"all 0.3s ease",marginBottom:"24px"},commandInput:{flex:1,border:"none",outline:"none",background:"transparent",fontSize:"15px",color:o?"#e2e8f0":"#1e293b",fontWeight:"500"},commandIcon:{color:o?"#94a3b8":"#64748b"},commandDivider:{width:"1px",height:"24px",background:o?"rgba(75,85,99,0.5)":"rgba(226,232,240,0.8)"},inlineSelect:{border:"none",background:"transparent",color:o?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",cursor:"pointer",outline:"none"},projectsTooltip:{backgroundColor:o?"rgba(30,41,59,0.98)":"rgba(255,255,255,0.98)",borderRadius:"12px",padding:"16px",boxShadow:"0 12px 32px rgba(0,0,0,0.25)",border:o?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",minWidth:"240px",maxWidth:"320px",backdropFilter:"blur(20px)",animation:"fadeIn 0.2s ease-out"},projectsTooltipHeader:{fontSize:"11px",fontWeight:"700",color:o?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",paddingBottom:"10px",borderBottom:o?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},projectItem:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 0",fontSize:"13px",color:o?"#e2e8f0":"#1e293b"},projectBullet:{color:"#6366f1",fontWeight:"700",fontSize:"18px",lineHeight:1,minWidth:"12px"},projectName:{flex:1,fontWeight:"500",lineHeight:1.3},projectType:{fontSize:"10px",padding:"3px 10px",borderRadius:"6px",backgroundColor:o?"rgba(99,102,241,0.2)":"rgba(99,102,241,0.1)",color:"#6366f1",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px",whiteSpace:"nowrap"}};if(h.useEffect(()=>{const J=document.createElement("style");return J.textContent=`
      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-30px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      @keyframes shimmer {
        0% {
          background-position: -200% 0;
        }
        100% {
          background-position: 200% 0;
        }
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      .profile-tooltip-animated {
        animation: slideIn 0.2s ease-out;
      }
    `,document.head.appendChild(J),()=>document.head.removeChild(J)},[]),Y)return t.jsx("div",{style:{...O.page,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:t.jsxs("div",{style:O.loadingContainer,children:[t.jsx(LA,{size:32,style:{animation:"spin 1s linear infinite"}}),t.jsx("div",{style:{fontSize:"16px",fontWeight:"600"},children:"Verifying access..."})]})});const Qt=({config:J})=>t.jsxs("div",{style:{...O.statCard(!1,J),pointerEvents:"none"},children:[t.jsx("div",{style:O.statDecoration(J,!1)}),t.jsxs("div",{style:O.statContent,children:[t.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:o?"linear-gradient(90deg, rgba(59,130,246,0.3) 25%, rgba(59,130,246,0.4) 50%, rgba(59,130,246,0.3) 75%)":"linear-gradient(90deg, rgba(59,130,246,0.2) 25%, rgba(59,130,246,0.3) 50%, rgba(59,130,246,0.2) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",marginBottom:"20px"}}),t.jsx("div",{style:{width:"60px",height:"40px",borderRadius:"8px",marginBottom:"8px",background:o?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx("div",{style:{width:"100px",height:"13px",borderRadius:"6px",background:o?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]})]}),tt=()=>t.jsxs("tr",{style:O.tableRow(!1),children:[t.jsx("td",{style:O.td,children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:o?"linear-gradient(90deg, rgba(59,130,246,0.3) 25%, rgba(59,130,246,0.4) 50%, rgba(59,130,246,0.3) 75%)":"linear-gradient(90deg, rgba(59,130,246,0.2) 25%, rgba(59,130,246,0.3) 50%, rgba(59,130,246,0.2) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{width:"140px",height:"14px",borderRadius:"6px",marginBottom:"6px",background:o?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx("div",{style:{width:"180px",height:"13px",borderRadius:"6px",background:o?"linear-gradient(90deg, rgba(75,85,99,0.5) 25%, rgba(100,116,139,0.5) 50%, rgba(75,85,99,0.5) 75%)":"linear-gradient(90deg, rgba(226,232,240,0.8) 25%, rgba(203,213,225,0.8) 50%, rgba(226,232,240,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]})]})}),[...Array(4)].map((J,be)=>t.jsx("td",{style:O.td,children:t.jsx("div",{style:{width:be===0?"80px":be===1?"60px":be===2?"100px":"80px",height:"14px",borderRadius:"6px",background:o?"linear-gradient(90deg, rgba(51,65,85,0.5) 25%, rgba(75,85,99,0.5) 50%, rgba(51,65,85,0.5) 75%)":"linear-gradient(90deg, rgba(241,245,249,0.8) 25%, rgba(226,232,240,0.8) 50%, rgba(241,245,249,0.8) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${be*.1}s`}})},be)),t.jsx("td",{style:O.td,children:t.jsx("div",{style:{display:"flex",gap:"10px"},children:[...Array(2)].map((J,be)=>t.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:o?"linear-gradient(90deg, rgba(59,130,246,0.3) 25%, rgba(59,130,246,0.4) 50%, rgba(59,130,246,0.3) 75%)":"linear-gradient(90deg, rgba(59,130,246,0.2) 25%, rgba(59,130,246,0.3) 50%, rgba(59,130,246,0.2) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",animationDelay:`${be*.1}s`}},be))})})]});return t.jsxs("div",{style:O.page,children:[G&&t.jsxs("div",{style:O.successMessage,children:[t.jsx(so,{size:20}),G]}),ge&&t.jsxs("div",{style:O.errorMessage,children:[t.jsx(Rr,{size:20}),ge]}),t.jsxs("div",{style:O.header,children:[t.jsx("h1",{style:O.title,children:"Users Management"}),t.jsxs("div",{style:O.headerActions,children:[t.jsxs("button",{style:O.actionButton("secondary",Z==="refresh"),onMouseEnter:()=>ue("refresh"),onMouseLeave:()=>ue(null),onClick:ve,disabled:pe,children:[t.jsx(LA,{size:16,style:{animation:pe?"spin 1s linear infinite":"none"}}),"Refresh"]}),t.jsxs("button",{style:O.topButton(Z==="alerts"),onMouseEnter:()=>ue("alerts"),onMouseLeave:()=>ue(null),onClick:()=>window.location.href="/adminalerts",children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:O.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:O.topButton(Z==="profile"),onMouseEnter:()=>{ue("profile"),re(!0)},onMouseLeave:()=>{ue(null),setTimeout(()=>{Pe||re(!1)},100)},onClick:()=>window.location.href="/adminprofile",children:t.jsx(qt,{size:20})}),Pe&&Ne&&t.jsxs("div",{style:O.profileTooltip,onMouseEnter:()=>re(!0),onMouseLeave:()=>re(!1),children:[t.jsx("div",{style:O.tooltipArrow}),t.jsxs("div",{style:O.userInfo,children:[t.jsx("div",{style:O.avatar,children:U(Ne.firstName,Ne.lastName)}),t.jsxs("div",{style:O.userDetails,children:[t.jsxs("div",{style:O.userName,children:[Ne.firstName," ",Ne.lastName||""]}),t.jsxs("div",{style:O.userRole,children:[Ne.role==="admin"?"Admin":"Member","  ",Ne.department]})]})]}),t.jsx("div",{style:O.userStats,children:z.map(J=>t.jsxs("div",{style:O.tooltipStatItem,children:[t.jsx("div",{style:O.tooltipStatNumber,children:J.value}),t.jsx("div",{style:O.tooltipStatLabel,children:J.label})]},J.label))}),t.jsx("button",{style:O.themeToggle,onClick:()=>e(!o),children:o?" Light Mode":" Dark Mode"})]})]})]})]}),pe?t.jsx("div",{style:O.statsGrid,children:Me.map((J,be)=>t.jsx(Qt,{config:J},be))}):t.jsx("div",{style:O.statsGrid,children:Me.map((J,be)=>{const De=J.icon;return t.jsxs("div",{style:O.statCard(Re===`stat${be}`,J),onMouseEnter:()=>se(`stat${be}`),onMouseLeave:()=>se(null),children:[t.jsx("div",{style:O.statDecoration(J,Re===`stat${be}`)}),t.jsxs("div",{style:O.statContent,children:[t.jsx("div",{style:O.statIconContainer(J),children:t.jsx(De,{size:28,color:"#fff",strokeWidth:2.5})}),t.jsx("div",{style:O.statNumber,children:J.value}),t.jsx("div",{style:O.statLabel,children:J.label})]})]},be)})}),t.jsxs("div",{style:O.commandBar,children:[t.jsx($A,{size:18,style:O.commandIcon}),t.jsx("input",{style:O.commandInput,placeholder:"Search users by name, email, or department",value:r,onChange:J=>n(J.target.value)}),t.jsx("div",{style:O.commandDivider}),t.jsx(th,{size:16,style:O.commandIcon}),t.jsx("div",{style:{width:"140px"},children:t.jsx(Tt,{value:a,onChange:J=>A(J),options:["All Roles","admin","member"],placeholder:"All Roles",isDarkMode:o,compact:!0,clearable:!1})}),t.jsx("div",{style:{width:"160px"},children:t.jsx(Tt,{value:c,onChange:J=>p(J),options:["All Departments",...xe],placeholder:"All Departments",isDarkMode:o,compact:!0,clearable:!1})})]}),pe?t.jsx("div",{style:O.tableCard(!1),children:t.jsxs("table",{style:O.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:O.th,children:"User"}),t.jsx("th",{style:O.th,children:"Role"}),t.jsx("th",{style:O.th,children:"Department"}),t.jsx("th",{style:O.th,children:"Supervisor"}),t.jsx("th",{style:O.th,children:"Project"}),t.jsx("th",{style:O.th,children:"Actions"})]})}),t.jsx("tbody",{children:[...Array(5)].map((J,be)=>t.jsx(tt,{},be))})]})}):P.length===0?t.jsx("div",{style:O.tableCard(!1),children:t.jsxs("div",{style:O.emptyState,children:[t.jsx(Un,{size:64,style:{marginBottom:"20px",opacity:.4}}),t.jsx("div",{style:{fontSize:"20px",fontWeight:"700",marginBottom:"10px"},children:Ee.length===0?"No users found":"No users match your filters"}),t.jsx("div",{style:{fontSize:"15px",opacity:.7},children:Ee.length===0?"Start by adding your first user":"Try adjusting your search or filter criteria"})]})}):t.jsx("div",{style:O.tableCard(Re==="table"),onMouseEnter:()=>se("table"),onMouseLeave:()=>se(null),children:t.jsxs("table",{style:O.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:O.th,children:"User"}),t.jsx("th",{style:O.th,children:"Role"}),t.jsx("th",{style:O.th,children:"Department"}),t.jsx("th",{style:O.th,children:"Supervisor"}),t.jsx("th",{style:O.th,children:"Project"}),t.jsx("th",{style:O.th,children:"Actions"})]})}),t.jsx("tbody",{children:P.map(J=>t.jsxs("tr",{style:O.tableRow(Re===`user-${J.id}`),onMouseEnter:()=>se(`user-${J.id}`),onMouseLeave:()=>se(null),children:[t.jsx("td",{style:O.td,children:t.jsxs("div",{style:O.userInfo,children:[t.jsx("div",{style:O.avatar,children:U(J.firstName,J.lastName)}),t.jsxs("div",{children:[t.jsxs("div",{style:O.userName,children:[J.firstName," ",J.lastName||""]}),t.jsx("div",{style:O.userEmail,children:J.email})]})]})}),t.jsx("td",{style:O.td,children:t.jsx("span",{style:O.roleChip(J.role),children:J.role})}),t.jsx("td",{style:O.td,children:J.department}),t.jsx("td",{style:O.td,children:Ee.find(be=>be.id===J.assignedUnder)?(()=>{const be=Ee.find(De=>De.id===J.assignedUnder);return`${be.firstName} ${be.lastName||""}`.trim()})():""}),t.jsx("td",{style:O.td,children:J.projects&&J.projects.length>0?J.projects.length===1?t.jsx("span",{children:J.projects[0].name}):t.jsxs("div",{onMouseEnter:be=>{console.log("Badge hovered for user:",J.id),q.current&&clearTimeout(q.current);const De=be.currentTarget.getBoundingClientRect(),K={x:De.left+De.width/2,y:De.bottom-32};console.log("Setting tooltip position:",K),Be(K),yt(J.id)},onMouseLeave:()=>{console.log("Badge mouse leave"),q.current=setTimeout(()=>{console.log("Hiding tooltip after delay"),yt(null)},200)},style:{cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"8px",backgroundColor:o?"rgba(99,102,241,0.1)":"rgba(99,102,241,0.08)",color:"#6366f1",fontWeight:"600",fontSize:"13px",transition:"all 0.2s ease"},children:[t.jsx(Un,{size:14}),t.jsxs("span",{children:[J.projects.length," projects"]})]}):t.jsx("span",{style:{color:o?"#64748b":"#94a3b8",fontStyle:"italic"},children:"Not assigned"})}),t.jsx("td",{style:O.td,children:t.jsxs("div",{style:O.actionButtons,children:[t.jsx("button",{style:O.iconButton("edit",Z===`edit-${J.id}`),onMouseEnter:()=>ue(`edit-${J.id}`),onMouseLeave:()=>ue(null),onClick:()=>T(J),children:t.jsx(qm,{size:16})}),t.jsx("button",{style:O.iconButton("delete",Z===`delete-${J.id}`),onMouseEnter:()=>ue(`delete-${J.id}`),onMouseLeave:()=>ue(null),onClick:()=>me(J.id),children:t.jsx(Kn,{size:16})})]})})]},J.id))})]})}),t.jsx("button",{style:O.floatingAddButton(Z==="add"),onMouseEnter:()=>ue("add"),onMouseLeave:()=>ue(null),onClick:H,children:t.jsx(Sr,{size:30})}),nt&&t.jsx("div",{style:{position:"fixed",left:`${ke.x}px`,top:`${ke.y}px`,transform:"translate(-50%, -100%)",zIndex:9999},onMouseEnter:()=>{q.current&&clearTimeout(q.current)},onMouseLeave:()=>{yt(null)},children:t.jsxs("div",{style:O.projectsTooltip,children:[t.jsxs("div",{style:O.projectsTooltipHeader,children:["Assigned Projects (",((ir=(zt=Ee.find(J=>J.id===nt))==null?void 0:zt.projects)==null?void 0:ir.length)||0,")"]}),(vr=(Yt=Ee.find(J=>J.id===nt))==null?void 0:Yt.projects)==null?void 0:vr.map((J,be)=>t.jsxs("div",{style:O.projectItem,children:[t.jsx("div",{style:O.projectBullet,children:""}),t.jsx("div",{style:O.projectName,children:J.name}),J.projectType&&t.jsx("div",{style:O.projectType,children:J.projectType})]},be))]})}),S&&fe&&t.jsx("div",{style:O.modal,onClick:()=>N(!1),children:t.jsxs("div",{style:O.editModalContent,onClick:J=>J.stopPropagation(),children:[t.jsx("div",{style:O.editModalHeader,children:t.jsxs("div",{style:O.modalHeader,children:[t.jsx(qm,{size:26,color:"#3b82f6"}),t.jsx("div",{style:O.modalTitle,children:"Edit User"})]})}),t.jsxs("div",{style:O.editModalBody,children:[t.jsxs("div",{style:O.editModalGrid,children:[t.jsxs("div",{children:[t.jsx("label",{style:O.editLabel,children:"First Name *"}),t.jsx("input",{style:O.editInput,value:ae.firstName||"",onChange:J=>Ce("firstName",J.target.value),placeholder:"First name"}),D.firstName&&t.jsxs("div",{style:O.editErrorText,children:[t.jsx(Rr,{size:12}),D.firstName]})]}),t.jsxs("div",{children:[t.jsx("label",{style:O.editLabel,children:"Last Name"}),t.jsx("input",{style:O.editInput,value:ae.lastName||"",onChange:J=>Ce("lastName",J.target.value),placeholder:"Last name (optional)"})]}),t.jsxs("div",{children:[t.jsx("label",{style:O.editLabel,children:"Email *"}),t.jsx("input",{style:O.editInput,type:"email",value:ae.email||"",onChange:J=>Ce("email",J.target.value),placeholder:"Email address"}),D.email&&t.jsxs("div",{style:O.editErrorText,children:[t.jsx(Rr,{size:12}),D.email]})]}),t.jsxs("div",{children:[t.jsx("label",{style:O.editLabel,children:"Phone"}),t.jsx("input",{style:O.editInput,type:"tel",value:ae.phoneNumber||"",onChange:J=>Ce("phoneNumber",J.target.value),placeholder:"e.g. 81234567"}),D.phoneNumber&&t.jsxs("div",{style:O.editErrorText,children:[t.jsx(Rr,{size:12}),D.phoneNumber]})]}),t.jsxs("div",{children:[t.jsx(Tt,{label:"Department *",value:ae.department||"",onChange:J=>Ce("department",J),options:Ae,placeholder:"Select Department",isDarkMode:o,compact:!0}),D.department&&t.jsxs("div",{style:O.editErrorText,children:[t.jsx(Rr,{size:12}),D.department]})]}),t.jsx("div",{children:t.jsx(Tt,{label:"Role *",value:ae.role||"",onChange:J=>Ce("role",J),options:["member","admin"],isDarkMode:o,compact:!0})}),t.jsx("div",{children:t.jsx(Tt,{label:"Can Approve Plans",value:String(ae.isApprover),onChange:J=>Ce("isApprover",J==="true"),options:["false","true"],displayMap:{false:"No",true:"Yes"},isDarkMode:o,compact:!0})}),t.jsxs("div",{children:[t.jsx("label",{style:O.editLabel,children:"Team"}),t.jsx("input",{style:O.editInput,value:ae.team||"",onChange:J=>Ce("team",J.target.value),placeholder:"Team"})]}),t.jsx("div",{children:t.jsx(Tt,{label:"Assigned Under",value:ae.assignedUnder?(()=>{const J=Ee.find(be=>be.id===ae.assignedUnder);return J?`${J.firstName} ${J.lastName||""}`.trim():""})():"",onChange:J=>{if(!J)Ce("assignedUnder",null);else{const be=Ee.find(De=>`${De.firstName} ${De.lastName||""}`.trim()===J);Ce("assignedUnder",be?be.id:null)}},options:Ee.filter(J=>J.id!==fe.id).map(J=>`${J.firstName} ${J.lastName||""}`.trim()),placeholder:"No Supervisor",searchable:!0,isDarkMode:o,compact:!0})}),t.jsxs("div",{children:[t.jsx("label",{style:O.editLabel,children:"Device Name"}),t.jsx("input",{style:O.editInput,value:ae.deviceName||"",onChange:J=>Ce("deviceName",J.target.value),placeholder:"IHRP-WLT-XXX"})]}),t.jsx("div",{children:t.jsx(Tt,{label:"ManicTime Subscription",value:ae.subscriptionId&&((Tr=lt.find(J=>J.Id===ae.subscriptionId))==null?void 0:Tr.SubscriptionName)||"",onChange:J=>{if(!J)Ce("subscriptionId",null);else{const be=lt.find(De=>De.SubscriptionName===J);Ce("subscriptionId",be?be.Id:null)}},options:lt.map(J=>J.SubscriptionName),placeholder:ze?"Loading...":"No subscription",disabled:ze,searchable:!0,isDarkMode:o,compact:!0})}),t.jsxs("div",{children:[t.jsx("label",{style:O.editLabel,children:"Timeline Key"}),t.jsx("input",{style:O.editInput,value:ae.timelineKey||"",onChange:J=>Ce("timelineKey",J.target.value),placeholder:"abc-123-timeline-key"})]})]}),t.jsxs("div",{style:{marginTop:"24px"},children:[t.jsx("label",{style:O.editLabel,children:"Projects"}),!ae.department&&t.jsx("div",{style:{fontSize:"13px",color:o?"#94a3b8":"#64748b",marginTop:"8px"},children:"Select a department to see projects"}),Ge&&t.jsx("div",{style:{fontSize:"13px",color:o?"#94a3b8":"#64748b",marginTop:"8px"},children:"Loading projects"}),t.jsx("div",{style:{marginTop:"12px",maxHeight:"200px",overflowY:"auto"},children:L.map(J=>t.jsxs("label",{style:{display:"block",fontSize:13,marginBottom:8,color:o?"#e2e8f0":"#1e293b",cursor:"pointer",padding:"6px 8px",borderRadius:"6px",transition:"background 0.2s ease"},onMouseEnter:be=>{be.currentTarget.style.background=o?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)"},onMouseLeave:be=>{be.currentTarget.style.background="transparent"},children:[t.jsx("input",{type:"checkbox",checked:de.includes(J.id),onChange:()=>Oe(be=>be.includes(J.id)?be.filter(De=>De!==J.id):[...be,J.id]),style:{marginRight:"8px"}})," ",J.name]},J.id))})]})]}),t.jsx("div",{style:O.editModalFooter,children:t.jsxs("div",{style:O.modalActions,children:[t.jsx("button",{style:O.actionButton("secondary",Z==="cancelEdit"),onMouseEnter:()=>ue("cancelEdit"),onMouseLeave:()=>ue(null),onClick:()=>{N(!1),ie({})},children:"Cancel"}),t.jsxs("button",{style:O.actionButton("primary",Z==="saveEdit"),onMouseEnter:()=>ue("saveEdit"),onMouseLeave:()=>ue(null),onClick:ce,children:[t.jsx(ki,{size:16}),"Save Changes"]})]})})]})}),C&&t.jsx("div",{style:O.modal,onClick:()=>Q(!1),children:t.jsxs("div",{style:O.modalContent,onClick:J=>J.stopPropagation(),children:[t.jsxs("div",{style:O.modalHeader,children:[t.jsx(Rr,{size:26,color:"#ef4444"}),t.jsx("div",{style:O.modalTitle,children:"Delete User"})]}),t.jsx("div",{style:O.modalText,children:"Are you sure you want to delete this user? This action cannot be undone and will permanently remove their account and all associated data."}),t.jsxs("div",{style:O.modalActions,children:[t.jsx("button",{style:O.actionButton("secondary",Z==="cancel"),onMouseEnter:()=>ue("cancel"),onMouseLeave:()=>ue(null),onClick:()=>Q(!1),children:"Cancel"}),t.jsxs("button",{style:{...O.actionButton("primary",Z==="confirm"),background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)"},onMouseEnter:()=>ue("confirm"),onMouseLeave:()=>ue(null),onClick:w,children:[t.jsx(Kn,{size:16}),"Delete User"]})]})]})})]})},h8=()=>{var lt;bo.useRef(null);const[o,e]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[r,n]=h.useState({firstName:"",lastName:"",email:"",dateOfBirth:"",phoneNumber:"",department:"",team:"",password:"",confirmPassword:"",role:"member",isApprover:!1,deviceName:"",timelineKey:"",subscriptionId:null,assignedUnder:""}),[a,A]=h.useState({}),[c,p]=h.useState(!1),[d,m]=h.useState(!1),[g,y]=h.useState(!1),[b,R]=h.useState(""),[C,Q]=h.useState(""),[S,N]=h.useState(null),[M,Ie]=h.useState(!1),[fe,F]=h.useState({firstName:"Admin",lastName:"User",role:"admin",email:"admin@example.com",department:"Engineering"}),[ae,ee]=h.useState([]),[Re,se]=h.useState([]),[Z,ue]=h.useState([]),[pe,we]=h.useState([]),[Pe,re]=h.useState(!1),[Ee,k]=h.useState(null),[ge,_]=h.useState(null),G=["DTO","P&A","PPC","Finance","A&I","Marketing"],E=["admin","member"],D=(fe==null?void 0:fe.role)==="admin"?[{label:"Users",value:Z.length},{label:"Admins",value:Z.filter(ye=>ye.role==="admin").length},{label:"Approvers",value:Z.filter(ye=>ye.isApprover).length}]:[{label:"Projects",value:fe!=null&&fe.project?1:0},{label:"Hours",value:(fe==null?void 0:fe.totalHours)??""},{label:"Capacity",value:fe!=null&&fe.capacity?`${fe.capacity}%`:""}],[ie,L]=h.useState(!1),[j,de]=h.useState(!0),Oe=(ye,ze)=>ye?!ze||ze.trim()===""?ye[0].toUpperCase():`${ye[0]}${ze[0]}`.toUpperCase():"?";h.useEffect(()=>{(async()=>{try{const ze=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ze.ok){const dt=await ze.json();if(dt.role!=="admin"){window.location.href="/admindashboard";return}F(dt)}else{window.location.href="/";return}}catch(ze){console.error("Error verifying access:",ze),window.location.href="/";return}finally{de(!1)}})()},[]);const[Ge,Ve]=h.useState([]);h.useEffect(()=>{(async()=>{re(!0);try{const ze=await Te("/api/manictime-admin/subscriptions",{credentials:"include"});if(ze.ok){const dt=await ze.json();we(dt)}}catch(ze){console.error("Error fetching subscriptions:",ze)}finally{re(!1)}})()},[]),h.useEffect(()=>{(async()=>{try{const ze=await Te("/users",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ze.ok){const dt=await ze.json();ue(dt)}}catch(ze){console.error("Error fetching users:",ze)}})()},[]),h.useEffect(()=>{(async()=>{try{const dt=await(await Te("/user/list",{credentials:"include"})).json();Ve(dt.users||[])}catch(ze){console.error("Failed to fetch assignable users",ze)}})()},[]),h.useEffect(()=>{if(!r.department){ee([]),se([]);return}Te("/api/ai/admin/structure",{credentials:"include"}).then(ye=>ye.json()).then(ye=>{const ze=ye.domains.find(dt=>dt.name===r.department);ee(ze?ze.contexts:[]),se([])})},[r.department]);const ke=()=>{const ye={};return r.firstName.trim()||(ye.firstName="First name is required"),r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(ye.email="Please enter a valid email address"):ye.email="Email is required",r.dateOfBirth?/^\d{4}-\d{2}-\d{2}$/.test(r.dateOfBirth)||(ye.dateOfBirth="Invalid date format (YYYY-MM-DD)"):ye.dateOfBirth="Date of birth is required",r.phoneNumber.trim()?/^[689]\d{7}$/.test(r.phoneNumber)||(ye.phoneNumber="Phone number must start with 6, 8, or 9 and be 8 digits long"):ye.phoneNumber="Phone number is required",r.department||(ye.department="Department is required"),Re.length===0&&(ye.projects="At least one project must be selected"),r.team.trim()||(ye.team="Team is required"),r.password?r.password.length<8&&(ye.password="Password must be at least 8 characters long"):ye.password="Password is required",r.confirmPassword?r.password!==r.confirmPassword&&(ye.confirmPassword="Passwords do not match"):ye.confirmPassword="Please confirm your password",A(ye),Object.keys(ye).length===0},Be=(ye,ze)=>{ye==="role"&&(ze=ze.toLowerCase()),n(dt=>({...dt,[ye]:ze})),a[ye]&&A(dt=>({...dt,[ye]:""}))},nt=async ye=>{if(ye.preventDefault(),!ke()){R("Please fix the errors in the form"),setTimeout(()=>R(""),5e3);return}p(!0),R(""),Q("");try{const{confirmPassword:ze,...dt}=r,Ne=await Te("/signup",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(dt)}),B=await Ne.json();if(Ne.ok){const U=B.user.id;for(const Ae of Re)await Te("/api/ai/context-assign",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:U,contextId:Ae})});Q("User created successfully! Redirecting..."),console.log("User created successfully:",B),setTimeout(()=>{window.location.href="/users"},2e3)}else R(B.message||"Failed to create user"),setTimeout(()=>R(""),5e3)}catch(ze){console.error("Error creating user:",ze),R("Network error. Please check your connection."),setTimeout(()=>R(""),5e3)}finally{p(!1)}},yt=()=>{window.location.href="/users"},q={page:{minHeight:"100vh",padding:"30px",background:o?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},backButton:ye=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:ye?"rgba(59,130,246,0.1)":o?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:ye?"#3b82f6":o?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:ye?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:ye?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),title:{fontSize:"32px",fontWeight:"700",color:o?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},topButton:ye=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:ye?"rgba(59,130,246,0.1)":o?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:ye?"#3b82f6":o?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:ye?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:ye?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:o?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:o?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:o?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:o?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center"},userAvatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"14px",marginRight:"12px"},userDetails:{flex:1},userName:{fontWeight:"600",marginBottom:"2px",color:o?"#e2e8f0":"#1e293b"},userRole:{fontSize:"12px",color:o?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:o?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",marginTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:o?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:o?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},formCard:{backgroundColor:o?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:o?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(20px)",transition:"all 0.3s ease",marginBottom:"24px"},formGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",marginBottom:"24px"},formGroup:{display:"flex",flexDirection:"column"},label:{fontSize:"12px",fontWeight:"600",color:o?"#94a3b8":"#64748b",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},required:{color:"#ef4444",fontSize:"14px"},inputWrapper:{position:"relative",display:"flex",alignItems:"center"},input:(ye,ze)=>({width:"100%",padding:"12px 16px",paddingLeft:"44px",borderRadius:"10px",border:ye?"2px solid #ef4444":ze?"2px solid #3b82f6":o?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:o?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:o?"#e2e8f0":"#1e293b",fontSize:"14px",letterSpacing:"0.1px",fontFamily:"Montserrat",outline:"none",transition:"all 0.3s ease",backdropFilter:"blur(10px)",boxShadow:ze?"0 0 0 3px rgba(59,130,246,0.1)":"0 2px 4px rgba(0,0,0,0.02)"}),passwordInput:{fontFamily:"Montserrat",fontSize:"14px",letterSpacing:"0.1px"},inputIcon:{position:"absolute",left:"14px",color:o?"#94a3b8":"#64748b",pointerEvents:"none",zIndex:5},select:ye=>({width:"100%",padding:"12px 16px",paddingLeft:"44px",borderRadius:"10px",border:ye?"2px solid #ef4444":o?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:o?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:o?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(10px)",appearance:"none",backgroundImage:`url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='${o?"%2394a3b8":"%2364748b"}' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"20px",paddingRight:"44px"}),passwordToggle:{position:"absolute",right:"14px",cursor:"pointer",color:o?"#94a3b8":"#64748b",transition:"color 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",padding:"4px"},errorText:{color:"#ef4444",fontSize:"12px",marginTop:"4px",display:"flex",alignItems:"center",gap:"4px",fontWeight:"500"},helperText:{color:o?"#94a3b8":"#64748b",fontSize:"12px",marginTop:"4px",fontStyle:"italic"},section:{marginTop:"32px",paddingTop:"32px",borderTop:o?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)"},sectionTitle:{fontSize:"18px",fontWeight:"700",color:o?"#e2e8f0":"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},buttonGroup:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"32px"},button:(ye,ze,dt)=>({padding:"12px 24px",borderRadius:"10px",border:"none",fontSize:"14px",fontWeight:"600",cursor:dt?"not-allowed":"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"8px",transform:ze&&!dt?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",opacity:dt?.6:1,...ye==="primary"&&{background:dt?o?"#4b5563":"#cbd5e1":"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"#fff",boxShadow:ze&&!dt?"0 12px 24px rgba(59,130,246,0.4)":"0 4px 12px rgba(59,130,246,0.2)"},...ye==="secondary"&&{backgroundColor:o?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:o?"#e2e8f0":"#64748b",boxShadow:ze?"0 8px 20px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",backdropFilter:"blur(10px)"}}),successMessage:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#10b981",color:"#fff",padding:"16px 24px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",boxShadow:"0 8px 25px rgba(16,185,129,0.3)",zIndex:1e3,animation:"slideIn 0.5s ease-out"},errorMessage:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#ef4444",color:"#fff",padding:"16px 24px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",boxShadow:"0 8px 25px rgba(239,68,68,0.3)",zIndex:1e3,animation:"slideIn 0.5s ease-out",maxWidth:"400px"},closeButton:{background:"none",border:"none",color:"#fff",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"auto"},infoIcon:{marginLeft:"6px",fontSize:"12px",cursor:"help",color:"#3b82f6",fontWeight:"700"},infoTooltip:{marginTop:"6px",padding:"10px 12px",backgroundColor:"rgba(59,130,246,0.08)",borderLeft:"3px solid #3b82f6",borderRadius:"6px",fontSize:"12px",color:o?"#e2e8f0":"#1e293b",lineHeight:"1.4"},dropdownStyle:{width:"100%",padding:"12px 16px",paddingLeft:"44px",borderRadius:"10px",border:o?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:o?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:o?"#e2e8f0":"#1e293b",fontSize:"14px",letterSpacing:"0.1px",fontFamily:"Montserrat",outline:"none",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},projectCheckboxContainer:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"12px"},checkboxLabel:(ye,ze)=>({display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"10px",backgroundColor:ye?o?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.08)":o?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.6)",border:ye?"2px solid #3b82f6":o?"2px solid rgba(75,85,99,0.4)":"2px solid rgba(226,232,240,0.6)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:ze?"translateX(4px)":"translateX(0)",boxShadow:ye?"0 4px 12px rgba(59,130,246,0.15)":ze?"0 4px 12px rgba(0,0,0,0.08)":"none"}),customCheckbox:ye=>({width:"22px",height:"22px",minWidth:"22px",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:ye?"#3b82f6":"transparent",border:ye?"2px solid #3b82f6":o?"2px solid rgba(148,163,184,0.5)":"2px solid rgba(100,116,139,0.4)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"}),checkboxText:ye=>({fontSize:"14px",fontWeight:ye?"600":"500",color:ye?o?"#e2e8f0":"#1e293b":o?"#94a3b8":"#64748b",transition:"all 0.3s ease",flex:1}),checkIcon:{color:"#ffffff",strokeWidth:3},projectCount:{fontSize:"11px",fontWeight:"600",padding:"4px 8px",borderRadius:"6px",backgroundColor:o?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.15)",color:"#3b82f6"}};return h.useEffect(()=>{const ye=document.createElement("style");return ye.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      input:focus, select:focus {
        border-color: #3b82f6 !important;
        box-shadow: 0 0 0 3px rgba(59,130,246,0.1) !important;
      }

      input[type="date"]::-webkit-calendar-picker-indicator {
        opacity: 0;
        display: none;
      }

      input[type="date"]::-webkit-inner-spin-button,
      input[type="date"]::-webkit-clear-button {
        display: none;
      }
    `,document.head.appendChild(ye),()=>document.head.removeChild(ye)},[]),j?t.jsx("div",{style:{...q.page,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px",color:o?"#94a3b8":"#64748b",gap:"16px"},children:[t.jsx("div",{style:{animation:"spin 1s linear infinite"},children:t.jsx(qt,{size:32})}),t.jsx("div",{style:{fontSize:"16px",fontWeight:"600"},children:"Verifying access..."})]})}):t.jsxs("div",{style:q.page,children:[C&&t.jsxs("div",{style:q.successMessage,children:[t.jsx(so,{size:20}),C]}),b&&t.jsxs("div",{style:q.errorMessage,children:[t.jsx(Rr,{size:20}),b,t.jsx("button",{style:q.closeButton,onClick:()=>R(""),children:t.jsx(gr,{size:16})})]}),t.jsxs("div",{style:q.header,children:[t.jsxs("div",{style:q.headerLeft,children:[t.jsx("button",{style:q.backButton(S==="back"),onMouseEnter:()=>N("back"),onMouseLeave:()=>N(null),onClick:yt,children:t.jsx(Ki,{size:20})}),t.jsx("h1",{style:q.title,className:"floating",children:"Add New User"})]}),t.jsxs("div",{style:q.headerRight,children:[t.jsxs("button",{style:q.topButton(S==="alerts"),onMouseEnter:()=>N("alerts"),onMouseLeave:()=>N(null),onClick:()=>{window.location.href="/adminalerts"},children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:q.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:q.topButton(S==="profile"),onMouseEnter:()=>{N("profile"),Ie(!0)},onMouseLeave:()=>{N(null)},onClick:()=>{window.location.href="/adminprofile"},children:t.jsx(qt,{size:20})}),M&&fe&&t.jsxs("div",{style:q.profileTooltip,onMouseEnter:()=>Ie(!0),onMouseLeave:()=>Ie(!1),children:[t.jsx("div",{style:q.tooltipArrow}),t.jsxs("div",{style:q.userInfo,children:[t.jsx("div",{style:q.userAvatar,children:Oe(fe.firstName,fe.lastName)}),t.jsxs("div",{style:q.userDetails,children:[t.jsxs("div",{style:q.userName,children:[fe.firstName," ",fe.lastName||""]}),t.jsxs("div",{style:q.userRole,children:[fe.role==="admin"?"Admin":"Member","  ",fe.department]})]})]}),t.jsx("div",{style:q.userStats,children:D.map(ye=>t.jsxs("div",{style:q.tooltipStatItem,children:[t.jsx("div",{style:q.tooltipStatNumber,children:ye.value}),t.jsx("div",{style:q.tooltipStatLabel,children:ye.label})]},ye.label))}),t.jsx("button",{style:q.themeToggle,onClick:()=>{e(!o);try{localStorage.setItem("darkMode",(!o).toString())}catch{console.log("LocalStorage not available")}},children:o?" Light Mode":" Dark Mode"})]})]})]})]}),t.jsx("form",{onSubmit:nt,children:t.jsxs("div",{style:q.formCard,children:[t.jsxs("div",{children:[t.jsxs("div",{style:q.sectionTitle,children:[t.jsx(qt,{size:20}),"Personal Information"]}),t.jsxs("div",{style:q.formGrid,children:[t.jsxs("div",{style:q.formGroup,children:[t.jsxs("label",{style:q.label,children:["First Name ",t.jsx("span",{style:q.required,children:"*"})]}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(qt,{size:18,style:q.inputIcon}),t.jsx("input",{style:q.input(a.firstName,ge==="firstName"),type:"text",placeholder:"Enter first name",value:r.firstName,onChange:ye=>Be("firstName",ye.target.value),onFocus:()=>_("firstName"),onBlur:()=>_(null)})]}),a.firstName&&t.jsxs("div",{style:q.errorText,children:[t.jsx(Rr,{size:12}),a.firstName]})]}),t.jsxs("div",{style:q.formGroup,children:[t.jsx("label",{style:q.label,children:"Last Name "}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(qt,{size:18,style:q.inputIcon}),t.jsx("input",{style:q.input(a.lastName,ge==="lastName"),type:"text",placeholder:"Enter last name (optional)",value:r.lastName,onChange:ye=>Be("lastName",ye.target.value),onFocus:()=>_("lastName"),onBlur:()=>_(null)})]}),a.lastName&&t.jsxs("div",{style:q.errorText,children:[t.jsx(Rr,{size:12}),a.lastName]}),!a.lastName&&t.jsx("div",{style:q.helperText,children:"Optional - leave blank if not applicable"})]}),t.jsxs("div",{style:q.formGroup,children:[t.jsxs("label",{style:q.label,children:["Email ",t.jsx("span",{style:q.required,children:"*"})]}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(Hc,{size:18,style:q.inputIcon}),t.jsx("input",{style:q.input(a.email,ge==="email"),type:"email",placeholder:"user@example.com",value:r.email,onChange:ye=>Be("email",ye.target.value),onFocus:()=>_("email"),onBlur:()=>_(null)})]}),a.email&&t.jsxs("div",{style:q.errorText,children:[t.jsx(Rr,{size:12}),a.email]})]}),t.jsxs("div",{style:q.formGroup,children:[t.jsxs("label",{style:q.label,children:["Phone Number ",t.jsx("span",{style:q.required,children:"*"})]}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(Ab,{size:18,style:q.inputIcon}),t.jsx("input",{style:q.input(a.phoneNumber,ge==="phoneNumber"),type:"tel",placeholder:"81234567",value:r.phoneNumber,onChange:ye=>Be("phoneNumber",ye.target.value),onFocus:()=>_("phoneNumber"),onBlur:()=>_(null)})]}),a.phoneNumber&&t.jsxs("div",{style:q.errorText,children:[t.jsx(Rr,{size:12}),a.phoneNumber]}),!a.phoneNumber&&t.jsx("div",{style:q.helperText,children:"Must start with 6, 8, or 9 and be 8 digits long"})]}),t.jsxs("div",{style:q.formGroup,children:[t.jsxs("label",{style:q.label,children:["Date of Birth ",t.jsx("span",{style:q.required,children:"*"})]}),t.jsx(er,{value:r.dateOfBirth,onChange:ye=>Be("dateOfBirth",ye),isDarkMode:o,placeholder:"Select date of birth",compact:!0}),a.dateOfBirth&&t.jsxs("div",{style:q.errorText,children:[t.jsx(Rr,{size:12}),a.dateOfBirth]})]})]})]}),t.jsxs("div",{style:q.section,children:[t.jsxs("div",{style:q.sectionTitle,children:[t.jsx(fs,{size:20}),"Work Information"]}),t.jsxs("div",{style:q.formGrid,children:[t.jsxs("div",{style:q.formGroup,children:[t.jsxs("label",{style:q.label,children:["Department ",t.jsx("span",{style:q.required,children:"*"})]}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(fs,{size:18,style:q.inputIcon}),t.jsx(Tt,{value:r.department,onChange:ye=>Be("department",ye),options:["",...G],placeholder:"Select Department",isDarkMode:o,hasIcon:!0,compact:!0,customStyles:{select:q.dropdownStyle}})]}),a.department&&t.jsxs("div",{style:q.errorText,children:[t.jsx(Rr,{size:12}),a.department]})]}),t.jsxs("div",{style:q.formGroup,children:[t.jsxs("label",{style:q.label,children:["Projects ",t.jsx("span",{style:q.required,children:"*"}),Re.length>0&&t.jsxs("span",{style:q.projectCount,children:[Re.length," selected"]})]}),ae.length===0&&t.jsx("div",{style:q.helperText,children:"Select a department to see projects"}),ae.length>0&&t.jsx("div",{style:q.projectCheckboxContainer,children:ae.map(ye=>{const ze=Re.includes(ye.id),dt=Ee===ye.id;return t.jsxs("label",{style:q.checkboxLabel(ze,dt),onMouseEnter:()=>k(ye.id),onMouseLeave:()=>k(null),children:[t.jsx("input",{type:"checkbox",checked:ze,onChange:()=>se(Ne=>Ne.includes(ye.id)?Ne.filter(B=>B!==ye.id):[...Ne,ye.id]),style:{display:"none"}}),t.jsx("div",{style:q.customCheckbox(ze),children:ze&&t.jsx(so,{size:16,style:q.checkIcon})}),t.jsx("span",{style:q.checkboxText(ze),children:ye.name})]},ye.id||ye.contextId||ye.name)})}),a.projects&&t.jsxs("div",{style:q.errorText,children:[t.jsx(Rr,{size:12}),a.projects]})]}),t.jsxs("div",{style:q.formGroup,children:[t.jsxs("label",{style:q.label,children:["Team ",t.jsx("span",{style:q.required,children:"*"})]}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(Un,{size:18,style:q.inputIcon}),t.jsx("input",{style:q.input(a.team,ge==="team"),type:"text",placeholder:"Enter team name",value:r.team,onChange:ye=>Be("team",ye.target.value),onFocus:()=>_("team"),onBlur:()=>_(null)})]}),a.team&&t.jsxs("div",{style:q.errorText,children:[t.jsx(Rr,{size:12}),a.team]})]}),t.jsxs("div",{style:q.formGroup,children:[t.jsxs("label",{style:q.label,children:["Role ",t.jsx("span",{style:q.required,children:"*"})]}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(jc,{size:18,style:q.inputIcon}),t.jsx(Tt,{value:r.role,onChange:ye=>Be("role",ye),options:E.map(ye=>ye.charAt(0).toUpperCase()+ye.slice(1)),placeholder:"Select Role",isDarkMode:o,hasIcon:!0,compact:!0,customStyles:{select:q.dropdownStyle}})]}),a.role&&t.jsxs("div",{style:q.errorText,children:[t.jsx(Rr,{size:12}),a.role]})]}),t.jsxs("div",{style:q.formGroup,children:[t.jsxs("label",{style:q.label,children:["Can Approve Master Plans",t.jsx("span",{style:q.infoIcon,onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1),children:""})]}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(jc,{size:18,style:q.inputIcon}),t.jsx(Tt,{value:r.isApprover?"Yes":"No",onChange:ye=>Be("isApprover",ye==="Yes"),options:["No","Yes"],placeholder:"Can approve?",isDarkMode:o,hasIcon:!0,compact:!0,customStyles:{select:q.dropdownStyle}})]}),ie&&t.jsxs("div",{style:q.infoTooltip,children:["Users marked as approvers can approve or reject master plans within their department.",t.jsx("br",{}),t.jsx("strong",{children:"This does not make them an admin."})]}),t.jsx("div",{style:q.helperText,children:"Allows user to approve or reject plans"})]}),t.jsxs("div",{style:q.formGroup,children:[t.jsx("label",{style:q.label,children:"Assigned Under"}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(jc,{size:18,style:q.inputIcon}),t.jsx(Tt,{value:r.assignedUnder?(()=>{const ye=Ge.find(ze=>ze.id===Number(r.assignedUnder));return ye?`${ye.firstName} ${ye.lastName||""} (${ye.role})`:""})():"",onChange:ye=>{if(ye==="None"||ye==="")Be("assignedUnder","");else{const ze=Ge.find(dt=>`${dt.firstName} ${dt.lastName||""} (${dt.role})`===ye);Be("assignedUnder",ze?ze.id:"")}},options:["None",...Ge.map(ye=>`${ye.firstName} ${ye.lastName||""} (${ye.role})`)],placeholder:"None",isDarkMode:o,searchable:Ge.length>5,hasIcon:!0,compact:!0,customStyles:{select:q.dropdownStyle}})]}),t.jsx("div",{style:q.helperText,children:"Optional: Assign reporting / approval line"})]}),t.jsxs("div",{style:q.formGroup,children:[t.jsx("label",{style:q.label,children:"Device Name"}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(wa,{size:18,style:q.inputIcon}),t.jsx("input",{style:q.input(a.deviceName),type:"text",placeholder:"IHRP-WLT-XXX",value:r.deviceName,onChange:ye=>Be("deviceName",ye.target.value),onFocus:()=>_("deviceName"),onBlur:()=>_(null)})]}),!a.deviceName&&t.jsx("div",{style:q.helperText,children:"Optional: Assign a device to this user"})]}),t.jsxs("div",{style:q.formGroup,children:[t.jsx("label",{style:q.label,children:"ManicTime Subscription"}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(fs,{size:18,style:q.inputIcon}),t.jsx(Tt,{value:r.subscriptionId&&((lt=pe.find(ye=>ye.Id===r.subscriptionId))==null?void 0:lt.SubscriptionName)||"",onChange:ye=>{if(ye==="No subscription"||ye==="")Be("subscriptionId",null);else{const ze=pe.find(dt=>dt.SubscriptionName===ye);Be("subscriptionId",ze?ze.Id:null)}},options:[Pe?"Loading...":"No subscription",...pe.map(ye=>ye.SubscriptionName)],placeholder:"No subscription",isDarkMode:o,disabled:Pe,hasIcon:!0,compact:!0,customStyles:{select:q.dropdownStyle}})]}),t.jsx("div",{style:q.helperText,children:"Optional: Link device to a ManicTime workspace"})]}),t.jsxs("div",{style:q.formGroup,children:[t.jsx("label",{style:q.label,children:"Timeline Key"}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(wa,{size:18,style:q.inputIcon}),t.jsx("input",{style:q.input(a.timelineKey,ge==="timelineKey"),type:"text",placeholder:"abc-123-timeline-key",value:r.timelineKey,onChange:ye=>Be("timelineKey",ye.target.value),onFocus:()=>_("timelineKey"),onBlur:()=>_(null)})]}),t.jsx("div",{style:q.helperText,children:"Optional: Timeline key for tracking activities"})]})]})]}),t.jsxs("div",{style:q.section,children:[t.jsxs("div",{style:q.sectionTitle,children:[t.jsx(Mi,{size:20}),"Security"]}),t.jsxs("div",{style:q.formGrid,children:[t.jsxs("div",{style:q.formGroup,children:[t.jsxs("label",{style:q.label,children:["Password ",t.jsx("span",{style:q.required,children:"*"})]}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(Mi,{size:18,style:q.inputIcon}),t.jsx("input",{style:{...q.input(a.password,ge==="password"),...q.passwordInput},type:d?"text":"password",placeholder:"Enter password",value:r.password,onChange:ye=>Be("password",ye.target.value),onFocus:()=>_("password"),onBlur:()=>_(null)}),t.jsx("div",{style:q.passwordToggle,onClick:()=>m(!d),children:d?t.jsx(gg,{size:18}):t.jsx(ri,{size:18})})]}),a.password&&t.jsxs("div",{style:q.errorText,children:[t.jsx(Rr,{size:12}),a.password]}),!a.password&&t.jsx("div",{style:q.helperText,children:"Must be at least 8 characters long"})]}),t.jsxs("div",{style:q.formGroup,children:[t.jsxs("label",{style:q.label,children:["Confirm Password ",t.jsx("span",{style:q.required,children:"*"})]}),t.jsxs("div",{style:q.inputWrapper,children:[t.jsx(Mi,{size:18,style:q.inputIcon}),t.jsx("input",{style:q.input(a.confirmPassword,ge==="confirmPassword"),type:g?"text":"password",placeholder:"Confirm password",value:r.confirmPassword,onChange:ye=>Be("confirmPassword",ye.target.value),onFocus:()=>_("confirmPassword"),onBlur:()=>_(null)}),t.jsx("div",{style:q.passwordToggle,onClick:()=>y(!g),children:g?t.jsx(gg,{size:18}):t.jsx(ri,{size:18})})]}),a.confirmPassword&&t.jsxs("div",{style:q.errorText,children:[t.jsx(Rr,{size:12}),a.confirmPassword]})]})]})]}),t.jsxs("div",{style:q.buttonGroup,children:[t.jsx("button",{type:"button",style:q.button("secondary",S==="cancel",!1),onMouseEnter:()=>N("cancel"),onMouseLeave:()=>N(null),onClick:yt,children:"Cancel"}),t.jsxs("button",{type:"submit",style:q.button("primary",S==="submit",c),onMouseEnter:()=>N("submit"),onMouseLeave:()=>N(null),disabled:c,children:[t.jsx(ki,{size:18}),c?"Creating User...":"Create User"]})]})]})})]})},f8=()=>{var k,ge;const[o,e]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[r,n]=h.useState(null),[a,A]=h.useState(!1),[c,p]=h.useState(null),[d,m]=h.useState(null),[g,y]=h.useState(!1),b=h.useRef(null),R=h.useRef(null),[C,Q]=h.useState(null),[S,N]=h.useState([]),[M,Ie]=h.useState([]),[fe,F]=h.useState({capacityUtilization:0}),[ae,ee]=h.useState(!0),[Re,se]=h.useState(null);h.useEffect(()=>{(async()=>{try{const G=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!G.ok){if(G.status===401){window.location.href="/login";return}throw new Error("Failed to fetch user profile")}const E=await G.json(),D=await Te(`/users/${E.id}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(D.ok){const ie=await D.json();Q(ie)}else{const ie={firstName:E.firstName,lastName:E.lastName,email:E.email,role:E.role,department:E.department};Q(ie)}}catch(G){console.error("Error fetching profile:",G)}})()},[]),h.useEffect(()=>{C&&(async()=>{try{const G=await Te("/actuals",{credentials:"include"});if(G.ok){const E=await G.json();Ie(E)}}catch(G){console.error("Error fetching actuals:",G)}})()},[C]),h.useEffect(()=>{C&&(async()=>{try{const G=await Te("/actuals/stats?period=week",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(G.ok){const E=await G.json();F(E)}}catch(G){console.error("Error fetching stats:",G)}})()},[C]);const Z=async()=>{try{const _=await Te("/api/notifications",{credentials:"include"});if(!_.ok)throw new Error("Failed to fetch notifications");const E=(await _.json()).map(D=>({id:D.Id,subject:D.Subject,content:D.Content,sentDate:D.CreatedAt,status:D.Status}));N(E)}catch(_){console.error("Error fetching notifications:",_),se("Failed to load notifications")}finally{ee(!1)}};h.useEffect(()=>{Z()},[]),h.useEffect(()=>{R.current||(R.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),b.current&&document.head.removeChild(b.current);const _=document.createElement("style");_.setAttribute("data-component","admin-alerts-background");const G=o?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return _.textContent=`
      /* More specific targeting to avoid conflicts */
      .admin-alerts-page {
        min-height: 100vh;
        background: ${G};
      }
      
      /* Target common parent containers more carefully */
      body {
        background: ${G} !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      /* Only target direct children of common containers */
      #root > div:first-child,
      .app > div:first-child,
      .main-content,
      .page-container {
        background: transparent !important;
        min-height: 100vh;
      }
      
      /* Fallback for nested containers */
      div[style*="background: white"],
      div[style*="background-color: white"],
      div[style*="background: #fff"],
      div[style*="background-color: #fff"] {
        background: transparent !important;
      }
      
      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-20px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      /* Smooth transitions for theme changes */
      * {
        transition: background-color 0.3s ease, background 0.3s ease;
      }
    `,document.head.appendChild(_),b.current=_,()=>{b.current&&document.head.contains(b.current)&&(document.head.removeChild(b.current),b.current=null),R.current&&document.querySelectorAll('[data-component="admin-alerts-background"]').length===0&&Object.assign(document.body.style,R.current)}},[o]);const ue=_=>{n(_),A(!0)},pe=async _=>{try{await Te(`/api/notifications/${_}`,{method:"DELETE",credentials:"include"}),N(G=>G.filter(E=>E.id!==_))}catch(G){console.error("Failed to delete alert:",G)}},we=_=>{switch(_){case"delivered":return"#10b981";case"pending":return"#f59e0b";case"failed":return"#ef4444";default:return"#6b7280"}},Pe=_=>{switch(_){case"delivered":return so;case"pending":return Rr;case"failed":return BB;default:return sb}},re=_=>new Date(_).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),Ee={page:{minHeight:"100vh",padding:"0",margin:"0",background:o?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease"},contentContainer:{padding:"30px",minHeight:"100vh",background:"inherit"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},backButton:{padding:"12px",borderRadius:"12px",border:"none",backgroundColor:o?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:o?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0,0,0,0.08)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"},title:{fontSize:"32px",fontWeight:"700",color:o?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},topButton:_=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:_?"rgba(59,130,246,0.1)":o?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:_?"#3b82f6":o?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:_?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:_?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:o?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:o?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:o?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:o?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},userAvatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:o?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:o?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:o?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:o?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:o?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},infoCard:{backgroundColor:o?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:o?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",gap:"16px"},infoIcon:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6"},infoContent:{flex:1},infoTitle:{fontSize:"18px",fontWeight:"600",color:o?"#e2e8f0":"#1e293b",marginBottom:"4px"},infoText:{fontSize:"14px",color:o?"#94a3b8":"#64748b"},alertsContainer:{backgroundColor:o?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:o?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(20px)"},alertItem:_=>({padding:"20px 24px",borderBottom:o?"1px solid #4b5563":"1px solid #f1f5f9",transition:"all 0.2s ease",cursor:"pointer",backgroundColor:_?"rgba(59,130,246,0.05)":"transparent",display:"flex",alignItems:"center",gap:"16px"}),alertIcon:_=>({padding:"12px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:`${we(_)}20`}),alertContent:{flex:1},alertSubject:{fontSize:"16px",fontWeight:"600",color:o?"#e2e8f0":"#1e293b",marginBottom:"4px"},alertDetails:{fontSize:"14px",color:o?"#94a3b8":"#64748b",marginBottom:"8px"},alertMeta:{display:"flex",gap:"16px",alignItems:"center",fontSize:"12px",color:o?"#94a3b8":"#64748b"},statusChip:_=>({padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",backgroundColor:`${we(_)}20`,color:we(_),display:"flex",alignItems:"center",gap:"4px"}),alertActions:{display:"flex",gap:"8px"},actionButton:(_,G)=>({padding:"8px",borderRadius:"8px",border:"none",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",transform:G?"scale(1.1)":"scale(1)",..._==="view"&&{backgroundColor:G?"rgba(59,130,246,0.1)":"transparent",color:"#3b82f6"},..._==="delete"&&{backgroundColor:G?"rgba(239,68,68,0.1)":"transparent",color:"#ef4444"}}),modal:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,backdropFilter:"blur(4px)"},modalContent:{backgroundColor:o?"rgba(55,65,81,0.95)":"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"32px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",border:o?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(20px)",animation:"modalSlideIn 0.3s ease-out"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:o?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)"},modalTitle:{fontSize:"20px",fontWeight:"700",color:o?"#f1f5f9":"#1e293b"},modalBody:{lineHeight:"1.6",color:o?"#e2e8f0":"#374151"},closeButton:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:o?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease"}};return t.jsx("div",{className:"admin-alerts-page",style:Ee.page,children:t.jsxs("div",{style:Ee.contentContainer,children:[t.jsxs("div",{style:Ee.header,children:[t.jsxs("div",{style:Ee.headerLeft,children:[t.jsx("button",{style:Ee.backButton,onClick:()=>window.history.back(),className:"floating",children:t.jsx(Ki,{size:20})}),t.jsx("h1",{style:Ee.title,children:"My Notifications"})]}),t.jsx("div",{style:Ee.headerRight,children:t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:Ee.topButton(d==="profile"),onMouseEnter:()=>{m("profile"),y(!0)},onMouseLeave:()=>{m(null)},onClick:()=>{window.location.href="/adminprofile"},children:t.jsx(qt,{size:20})}),g&&C&&t.jsxs("div",{style:Ee.profileTooltip,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[t.jsx("div",{style:Ee.tooltipArrow}),t.jsxs("div",{style:Ee.userInfo,children:[t.jsxs("div",{style:Ee.userAvatar,children:[(k=C.firstName)==null?void 0:k[0],(ge=C.lastName)==null?void 0:ge[0]]}),t.jsxs("div",{style:Ee.userDetails,children:[t.jsxs("div",{style:Ee.userName,children:[C.firstName," ",C.lastName]}),t.jsxs("div",{style:Ee.userRole,children:[C.role==="admin"?"Admin":"Member","  ",C.department]})]})]}),t.jsxs("div",{style:Ee.userStats,children:[t.jsxs("div",{style:Ee.tooltipStatItem,children:[t.jsx("div",{style:Ee.tooltipStatNumber,children:M.reduce((_,G)=>_+parseFloat(G.Hours||0),0).toFixed(1)}),t.jsx("div",{style:Ee.tooltipStatLabel,children:"Hours"})]}),t.jsxs("div",{style:Ee.tooltipStatItem,children:[t.jsx("div",{style:Ee.tooltipStatNumber,children:M.filter(_=>_.Category==="Project").length}),t.jsx("div",{style:Ee.tooltipStatLabel,children:"Projects"})]}),t.jsxs("div",{style:Ee.tooltipStatItem,children:[t.jsxs("div",{style:Ee.tooltipStatNumber,children:[fe.capacityUtilization,"%"]}),t.jsx("div",{style:Ee.tooltipStatLabel,children:"Capacity"})]})]}),t.jsx("button",{style:Ee.themeToggle,onClick:()=>e(!o),children:o?" Light Mode":" Dark Mode"})]})]})})]}),t.jsxs("div",{style:Ee.infoCard,children:[t.jsx("div",{style:Ee.infoIcon,children:t.jsx(Hc,{size:24})}),t.jsxs("div",{style:Ee.infoContent,children:[t.jsx("div",{style:Ee.infoTitle,children:"Your Notifications"}),t.jsx("div",{style:Ee.infoText,children:"Messages sent to you from the MaxCap system"})]})]}),t.jsxs("div",{style:Ee.alertsContainer,children:[ae&&t.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#64748b"},children:"Loading notifications"}),Re&&t.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#ef4444"},children:Re}),!ae&&!Re&&S.length===0&&t.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#64748b"},children:"No notifications yet "}),!ae&&!Re&&S.map(_=>{const G=Pe(_.status);return t.jsxs("div",{style:Ee.alertItem(c===`alert-${_.id}`),onMouseEnter:()=>p(`alert-${_.id}`),onMouseLeave:()=>p(null),children:[t.jsx("div",{style:Ee.alertIcon(_.status),children:t.jsx(Hc,{size:20,color:we(_.status)})}),t.jsxs("div",{style:Ee.alertContent,children:[t.jsx("div",{style:Ee.alertSubject,children:_.subject}),t.jsx("div",{style:Ee.alertDetails,children:"From: MaxCap System"}),t.jsxs("div",{style:Ee.alertMeta,children:[t.jsx("span",{children:re(_.sentDate)}),t.jsxs("span",{style:Ee.statusChip(_.status),children:[t.jsx(G,{size:12}),_.status]})]})]}),t.jsxs("div",{style:Ee.alertActions,children:[t.jsx("button",{style:Ee.actionButton("view",d===`view-${_.id}`),onMouseEnter:()=>m(`view-${_.id}`),onMouseLeave:()=>m(null),onClick:()=>ue(_),children:t.jsx(ri,{size:16})}),t.jsx("button",{style:Ee.actionButton("delete",d===`delete-${_.id}`),onMouseEnter:()=>m(`delete-${_.id}`),onMouseLeave:()=>m(null),onClick:()=>pe(_.id),children:t.jsx(Kn,{size:16})})]})]},_.id)})]}),a&&r&&t.jsx("div",{style:Ee.modal,onClick:()=>A(!1),children:t.jsxs("div",{style:Ee.modalContent,onClick:_=>_.stopPropagation(),children:[t.jsxs("div",{style:Ee.modalHeader,children:[t.jsx("div",{style:Ee.modalTitle,children:r.subject}),t.jsx("button",{style:Ee.closeButton,onClick:()=>A(!1),children:""})]}),t.jsxs("div",{style:Ee.modalBody,children:[t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("strong",{children:"From:"})," MaxCap System"]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("strong",{children:"Sent:"})," ",re(r.sentDate)]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("strong",{children:"Status:"}),t.jsx("span",{style:{...Ee.statusChip(r.status),marginLeft:"8px"},children:r.status})]}),t.jsx("div",{style:{padding:"20px",backgroundColor:o?"rgba(30,41,59,0.5)":"rgba(248,250,252,0.8)",borderRadius:"12px",borderLeft:`4px solid ${we(r.status)}`},children:r.content})]})]})})]})})},m8=()=>{var Ee,k,ge,_;const{collapsed:o}=Hd(),[e,r]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[n,a]=h.useState(null),[A,c]=h.useState(null),[p,d]=h.useState(null),[m,g]=h.useState(!1),[y,b]=h.useState(null),[R,C]=h.useState(!0),[Q,S]=h.useState(null),[N,M]=h.useState(!1),[Ie,fe]=h.useState({}),[F,ae]=h.useState([]),[ee,Re]=h.useState("week"),[se,Z]=h.useState({weeklyHours:0,capacityUtilization:0,projectCount:0,totalHours:0}),ue=h.useRef(null),pe=h.useRef(null);h.useEffect(()=>{y&&(async()=>{try{const E=await Te("/actuals",{credentials:"include"});if(E.ok){const D=await E.json();ae(D)}}catch(E){console.error("Error fetching actuals:",E)}})()},[y]),h.useEffect(()=>{y&&(async()=>{try{console.log(` Fetching user stats for period: ${ee}`);const E=await Te(`/actuals/stats?period=${ee}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(E.ok){const D=await E.json();console.log(" Stats received:",D),Z(D)}else console.error(" Failed to fetch stats")}catch(E){console.error(" Error fetching stats:",E)}})()},[y,ee]),h.useEffect(()=>{(async()=>{try{const E=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!E.ok){if(E.status===401){window.location.href="/login";return}throw new Error("Failed to fetch user profile")}const D=await E.json(),ie=await Te(`/users/${D.id}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ie.ok){const L=await ie.json();b(L),fe(L)}else{const L={firstName:D.firstName,lastName:D.lastName,email:D.email,role:D.role,department:D.department,team:"Not specified",project:"Not specified",phoneNumber:"Not specified",dateOfBirth:null,dateJoined:null};b(L),fe(L)}C(!1)}catch(E){console.error("Error fetching profile:",E),S(E.message),C(!1)}})()},[]),h.useEffect(()=>{pe.current||(pe.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),ue.current&&document.head.removeChild(ue.current);const G=document.createElement("style");G.setAttribute("data-component","admin-profile-background");const E=e?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return G.textContent=`
            @keyframes slideIn {
                from {
                    opacity: 0;
                    transform: translateY(-10px) scale(0.95);
                }
                to {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
            }
            
            @keyframes float {
                0%, 100% {
                    transform: translateY(0px);
                }
                50% {
                    transform: translateY(-6px);
                }
            }
            
            @keyframes pulse {
                0%, 100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.5;
                }
            }
            
            @keyframes shimmer {
                0% {
                    background-position: -1000px 0;
                }
                100% {
                    background-position: 1000px 0;
                }
            }
            
            .floating {
                animation: float 3s ease-in-out infinite;
            }
            
            .pulse {
                animation: pulse 2s ease-in-out infinite;
            }
            
            .shimmer {
                animation: shimmer 3s linear infinite;
                background: linear-gradient(
                    90deg,
                    transparent 0%,
                    rgba(59,130,246,0.1) 50%,
                    transparent 100%
                );
                background-size: 1000px 100%;
            }
            
            body {
                background: ${E} !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            * {
                transition: background-color 0.3s ease, background 0.3s ease;
            }
        `,document.head.appendChild(G),ue.current=G,()=>{ue.current&&document.head.contains(ue.current)&&(document.head.removeChild(ue.current),ue.current=null)}},[e]);const we=G=>G?new Date(G).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}):"Not specified",Pe=()=>{const G=!e;r(G),g(!1);try{localStorage.setItem("darkMode",G.toString())}catch{console.log("Dark mode preference cannot be saved in this environment")}},re={page:{minHeight:"100vh",padding:"30px 40px",background:e?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease",position:"relative"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},backButton:G=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:G?"rgba(59,130,246,0.1)":e?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:G?"#3b82f6":e?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:G?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:G?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),title:{fontSize:"32px",fontWeight:"700",color:e?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},topButton:G=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:G?"rgba(59,130,246,0.1)":e?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:G?"#3b82f6":e?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:G?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:G?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:e?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:e?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:e?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:e?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},userAvatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:e?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:e?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:e?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:e?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:e?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},container:{width:"100%",maxWidth:"2000px",margin:"0 auto"},card:G=>({backgroundColor:e?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"40px",marginBottom:"28px",boxShadow:G?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:G?"translateY(-8px) scale(1.01)":"translateY(0) scale(1)",border:e?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.03) 0%, transparent 70%)",opacity:0,transition:"opacity 0.4s ease",pointerEvents:"none"},floatingIcon:(G="#3b82f6")=>({position:"absolute",top:"20px",right:"20px",opacity:.1,fontSize:"48px",color:G}),profileHeader:{display:"flex",alignItems:"center",gap:"32px",marginBottom:"32px",paddingBottom:"32px",borderBottom:e?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)",position:"relative"},largeAvatar:{width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"700",fontSize:"42px",boxShadow:"0 12px 35px rgba(59,130,246,0.4)",border:"4px solid rgba(255,255,255,0.2)",position:"relative"},avatarRing:{position:"absolute",inset:"-8px",borderRadius:"50%",border:"2px solid rgba(59,130,246,0.2)",animation:"pulse 3s ease-in-out infinite"},profileInfo:{flex:1},profileName:{fontSize:"36px",fontWeight:"700",color:e?"#f1f5f9":"#1e293b",marginBottom:"8px",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},profileEmail:{fontSize:"16px",color:e?"#94a3b8":"#64748b",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},roleChip:{padding:"8px 20px",borderRadius:"24px",fontSize:"14px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",backgroundColor:(y==null?void 0:y.role)==="admin"?"#fef3c7":"#dbeafe",color:(y==null?void 0:y.role)==="admin"?"#92400e":"#1e40af",display:"inline-flex",alignItems:"center",gap:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px",marginBottom:"28px"},statBox:G=>({backgroundColor:e?"rgba(30,41,59,0.5)":"rgba(248,250,252,0.8)",borderRadius:"16px",padding:"32px",textAlign:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",transform:G?"translateY(-4px) scale(1.03)":"translateY(0) scale(1)",boxShadow:G?"0 12px 24px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",border:e?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",position:"relative",overflow:"hidden"}),statIcon:{width:"48px",height:"48px",margin:"0 auto 12px",borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"#3b82f6"},statValue:{fontSize:"32px",fontWeight:"800",color:e?"#e2e8f0":"#1e293b",marginBottom:"4px"},statLabel:{fontSize:"13px",fontWeight:"600",color:e?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},detailsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"24px"},detailItem:G=>({display:"flex",alignItems:"center",gap:"16px",padding:"20px",borderRadius:"16px",backgroundColor:e?"rgba(30,41,59,0.5)":"rgba(248,250,252,0.8)",border:e?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",transition:"all 0.3s ease",transform:G?"translateX(4px)":"translateX(0)",boxShadow:G?"0 4px 12px rgba(59,130,246,0.1)":"none"}),detailIcon:{padding:"14px",borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"48px",minHeight:"48px"},detailContent:{flex:1},detailLabel:{fontSize:"12px",fontWeight:"600",color:e?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"6px"},detailValue:{fontSize:"16px",fontWeight:"600",color:e?"#e2e8f0":"#1e293b"},sectionTitle:{fontSize:"20px",fontWeight:"700",color:e?"#e2e8f0":"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px"},editButton:G=>({padding:"10px 20px",borderRadius:"10px",border:"none",backgroundColor:G?"#ef4444":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",position:"absolute",top:"28px",right:"28px"}),loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",fontSize:"18px",color:e?"#e2e8f0":"#64748b"},errorContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"60vh",gap:"16px"},errorText:{fontSize:"18px",color:"#ef4444",textAlign:"center"},retryButton:{padding:"12px 24px",borderRadius:"8px",border:"none",backgroundColor:"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},periodToggleStyles:{container:{display:"flex",gap:"8px",padding:"4px",backgroundColor:e?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",borderRadius:"12px",border:e?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backdropFilter:"blur(10px)",marginBottom:"20px",width:"fit-content"},button:(G,E)=>({padding:"10px 20px",borderRadius:"8px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:G?"#3b82f6":E?"rgba(59,130,246,0.1)":"transparent",color:G?"#fff":e?"#e2e8f0":"#64748b",boxShadow:G?"0 2px 8px rgba(59,130,246,0.3)":"none",transform:E&&!G?"scale(1.05)":"scale(1)"})}};return R?t.jsx("div",{style:re.page,children:t.jsx("div",{style:re.loadingContainer,children:t.jsx("div",{className:"pulse",children:"Loading profile..."})})}):Q?t.jsx("div",{style:re.page,children:t.jsxs("div",{style:re.errorContainer,children:[t.jsxs("div",{style:re.errorText,children:["Failed to load profile: ",Q]}),t.jsx("button",{style:re.retryButton,onClick:()=>window.location.reload(),children:"Retry"})]})}):y?t.jsx("div",{style:re.page,children:t.jsxs("div",{style:re.container,children:[t.jsxs("div",{style:re.header,children:[t.jsxs("div",{style:re.headerLeft,children:[t.jsx("button",{style:re.backButton(n==="back"),onClick:()=>window.history.back(),onMouseEnter:()=>a("back"),onMouseLeave:()=>a(null),className:"floating",children:t.jsx(Ki,{size:20})}),t.jsx("h1",{style:re.title,children:"My Profile"})]}),t.jsxs("div",{style:re.headerRight,children:[t.jsxs("button",{style:re.topButton(n==="alerts"),onMouseEnter:()=>a("alerts"),onMouseLeave:()=>a(null),onClick:()=>{window.location.href="/adminalerts"},children:[t.jsx(Xr,{size:20}),t.jsx("div",{style:re.notificationBadge})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("button",{style:{...re.topButton(!0),backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6"},onMouseEnter:()=>g(!0),onMouseLeave:()=>{},children:t.jsx(qt,{size:20})}),m&&y&&t.jsxs("div",{style:re.profileTooltip,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[t.jsx("div",{style:re.tooltipArrow}),t.jsxs("div",{style:re.userInfo,children:[t.jsxs("div",{style:re.userAvatar,children:[(Ee=y.firstName)==null?void 0:Ee[0],(k=y.lastName)==null?void 0:k[0]]}),t.jsxs("div",{style:re.userDetails,children:[t.jsxs("div",{style:re.userName,children:[y.firstName," ",y.lastName]}),t.jsxs("div",{style:re.userRole,children:[y.role==="admin"?"Admin":"Member","  ",y.department]})]})]}),t.jsxs("div",{style:re.userStats,children:[t.jsxs("div",{style:re.tooltipStatItem,children:[t.jsx("div",{style:re.tooltipStatNumber,children:F.reduce((G,E)=>G+parseFloat(E.Hours||0),0).toFixed(1)}),t.jsx("div",{style:re.tooltipStatLabel,children:"Hours"})]}),t.jsxs("div",{style:re.tooltipStatItem,children:[t.jsx("div",{style:re.tooltipStatNumber,children:F.filter(G=>G.Category==="Project").length}),t.jsx("div",{style:re.tooltipStatLabel,children:"Projects"})]}),t.jsxs("div",{style:re.tooltipStatItem,children:[t.jsxs("div",{style:re.tooltipStatNumber,children:[se.capacityUtilization,"%"]}),t.jsx("div",{style:re.tooltipStatLabel,children:"Capacity"})]})]}),t.jsx("button",{style:re.themeToggle,onClick:Pe,children:e?" Light Mode":" Dark Mode"})]})]})]})]}),t.jsxs("div",{style:re.card(A==="main"),onMouseEnter:()=>c("main"),onMouseLeave:()=>c(null),children:[t.jsx("div",{style:re.cardGlow}),t.jsx("div",{style:re.floatingIcon(),children:t.jsx(qt,{})}),t.jsxs("div",{style:re.profileHeader,children:[t.jsxs("div",{style:re.largeAvatar,className:"floating",children:[t.jsx("div",{style:re.avatarRing}),(ge=y.firstName)==null?void 0:ge[0],(_=y.lastName)==null?void 0:_[0]]}),t.jsxs("div",{style:re.profileInfo,children:[t.jsxs("div",{style:re.profileName,children:[y.firstName," ",y.lastName]}),t.jsxs("div",{style:re.profileEmail,children:[t.jsx(Hc,{size:16}),y.email]}),t.jsxs("div",{style:re.roleChip,children:[t.jsx(ws,{size:16}),y.role==="admin"?"Administrator":"Member"]})]})]}),t.jsxs("div",{style:re.statsGrid,children:[t.jsxs("div",{style:re.statBox(A==="stat-1"),onMouseEnter:()=>c("stat-1"),onMouseLeave:()=>c(null),children:[t.jsx("div",{className:"shimmer",style:{position:"absolute",inset:0,opacity:A==="stat-1"?1:0}}),t.jsx("div",{style:re.statIcon,children:t.jsx(bs,{size:24})}),t.jsxs("div",{style:re.statValue,children:[se.totalHours||0,"h"]}),t.jsxs("div",{style:re.statLabel,children:["Hours ",ee==="week"?"This Week":"This Month"]})]}),t.jsxs("div",{style:re.statBox(A==="stat-2"),onMouseEnter:()=>c("stat-2"),onMouseLeave:()=>c(null),children:[t.jsx("div",{className:"shimmer",style:{position:"absolute",inset:0,opacity:A==="stat-2"?1:0}}),t.jsx("div",{style:re.statIcon,children:t.jsx(wa,{size:24})}),t.jsx("div",{style:re.statValue,children:se.projectHours>0?Math.ceil(se.projectHours/40):0}),t.jsx("div",{style:re.statLabel,children:"Active Projects"})]}),t.jsxs("div",{style:re.statBox(A==="stat-3"),onMouseEnter:()=>c("stat-3"),onMouseLeave:()=>c(null),children:[t.jsx("div",{className:"shimmer",style:{position:"absolute",inset:0,opacity:A==="stat-3"?1:0}}),t.jsx("div",{style:re.statIcon,children:t.jsx(GA,{size:24})}),t.jsxs("div",{style:re.statValue,children:[se.capacityUtilization,"%"]}),t.jsx("div",{style:re.statLabel,children:"Capacity Usage"})]})]})]}),t.jsxs("div",{style:re.periodToggleStyles.container,children:[t.jsx("button",{style:re.periodToggleStyles.button(ee==="week",p==="week"),onClick:()=>Re("week"),onMouseEnter:()=>d("week"),onMouseLeave:()=>d(null),children:"This Week"}),t.jsx("button",{style:re.periodToggleStyles.button(ee==="month",p==="month"),onClick:()=>Re("month"),onMouseEnter:()=>d("month"),onMouseLeave:()=>d(null),children:"This Month"})]}),t.jsxs("div",{style:re.card(A==="info"),onMouseEnter:()=>c("info"),onMouseLeave:()=>c(null),children:[t.jsx("div",{style:re.cardGlow}),t.jsx("div",{style:re.floatingIcon("#10b981"),children:t.jsx(fs,{})}),t.jsxs("div",{style:re.sectionTitle,children:[t.jsx(fs,{size:24}),"Personal Information"]}),t.jsxs("div",{style:re.detailsGrid,children:[t.jsxs("div",{style:re.detailItem(A==="detail-1"),onMouseEnter:()=>c("detail-1"),onMouseLeave:()=>c(null),children:[t.jsx("div",{style:re.detailIcon,children:t.jsx(fs,{size:20})}),t.jsxs("div",{style:re.detailContent,children:[t.jsx("div",{style:re.detailLabel,children:"Department"}),t.jsx("div",{style:re.detailValue,children:y.department||"Not specified"})]})]}),t.jsxs("div",{style:re.detailItem(A==="detail-2"),onMouseEnter:()=>c("detail-2"),onMouseLeave:()=>c(null),children:[t.jsx("div",{style:re.detailIcon,children:t.jsx(qt,{size:20})}),t.jsxs("div",{style:re.detailContent,children:[t.jsx("div",{style:re.detailLabel,children:"Team"}),t.jsx("div",{style:re.detailValue,children:y.team||"Not specified"})]})]}),t.jsxs("div",{style:re.detailItem(A==="detail-3"),onMouseEnter:()=>c("detail-3"),onMouseLeave:()=>c(null),children:[t.jsx("div",{style:re.detailIcon,children:t.jsx(Ab,{size:20})}),t.jsxs("div",{style:re.detailContent,children:[t.jsx("div",{style:re.detailLabel,children:"Phone Number"}),t.jsx("div",{style:re.detailValue,children:y.phoneNumber||"Not specified"})]})]}),t.jsxs("div",{style:re.detailItem(A==="detail-4"),onMouseEnter:()=>c("detail-4"),onMouseLeave:()=>c(null),children:[t.jsx("div",{style:re.detailIcon,children:t.jsx(wo,{size:20})}),t.jsxs("div",{style:re.detailContent,children:[t.jsx("div",{style:re.detailLabel,children:"Date Joined"}),t.jsx("div",{style:re.detailValue,children:we(y.dateJoined)})]})]}),t.jsxs("div",{style:re.detailItem(A==="detail-5"),onMouseEnter:()=>c("detail-5"),onMouseLeave:()=>c(null),children:[t.jsx("div",{style:re.detailIcon,children:t.jsx(wa,{size:20})}),t.jsxs("div",{style:re.detailContent,children:[t.jsx("div",{style:re.detailLabel,children:"Current Project"}),t.jsx("div",{style:re.detailValue,children:y.project||"Not specified"})]})]}),t.jsxs("div",{style:re.detailItem(A==="detail-6"),onMouseEnter:()=>c("detail-6"),onMouseLeave:()=>c(null),children:[t.jsx("div",{style:re.detailIcon,children:t.jsx(ab,{size:20})}),t.jsxs("div",{style:re.detailContent,children:[t.jsx("div",{style:re.detailLabel,children:"Location"}),t.jsx("div",{style:re.detailValue,children:"Singapore"})]})]})]})]})]})}):null};function x8(){const{instance:o,accounts:e}=fw(),r=h.useRef(!1),[n,a]=h.useState("checking"),[A,c]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}});h.useEffect(()=>{if(r.current){console.log(" Already processed");return}console.log(" AuthRedirect mounted"),console.log(" Current URL:",window.location.href),console.log(" Has hash:",window.location.hash?"YES":"NO"),console.log(" Hash value:",window.location.hash),console.log(" Accounts:",(e==null?void 0:e.length)||0),(async()=>{try{if(a("processing"),console.log(" Calling handleRedirectPromise()..."),r.current)return;r.current=!0;const R=await o.handleRedirectPromise();if(R){console.log(" Got response from Microsoft!"),console.log(" Email:",R.account.username),console.log(" Access token:",R.accessToken?"YES":"NO"),await p(R.account,R.accessToken);return}if(e&&e.length>0){console.log(" Using cached account");const C=e[0];o.setActiveAccount(C);try{const Q=await o.acquireTokenSilent({scopes:["openid","profile","email","User.Read"],account:C});console.log(" Token acquired from cache"),await p(C,Q.accessToken);return}catch(Q){console.error(" Token acquisition error:",Q),console.log(" Redirecting to Microsoft for fresh login..."),await o.loginRedirect({scopes:["openid","profile","email","User.Read"]});return}}console.warn(" No response and no accounts - redirecting to login"),setTimeout(()=>{window.location.href="/"},2e3)}catch(R){console.error(" Error in handleAuth:",R),setTimeout(()=>{window.location.href="/"},2e3)}})()},[o,e]);const p=async(b,R)=>{try{a("authenticating"),console.log(" Sending to backend..."),console.log(" User:",b.username);const C=await Te("/login/microsoft",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`}});if(console.log(" Backend response:",C.status),!C.ok){const M=await C.text();console.error(" Backend error:",M),alert(`Backend login failed: ${C.status}`),window.location.href="/";return}const Q=await C.json();console.log(" Backend login successful!"),console.log(" User role:",Q.role),a("verifying"),console.log(" Waiting 1.5s for cookie to be set...");let S=!1;for(let M=0;M<3;M++){if((await Te("/user/profile",{credentials:"include"})).ok){S=!0;break}await new Promise(fe=>setTimeout(fe,500))}if(!S)throw new Error("Cookie not ready");console.log(" Testing authentication...");const N=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});console.log(" Authentication verified!"),a("redirecting"),window.location.replace("/admindashboard")}catch(C){if(C.name==="AbortError"){console.warn(" Fetch aborted due to redirect");return}console.error(" Error in processLogin:",C),alert("Login failed. Please try again.")}},d=()=>n==="redirecting"?t.jsx("span",{style:{lineHeight:0,display:"block"},children:t.jsx(so,{size:64,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"success-icon"})}):t.jsx("span",{style:{lineHeight:0,display:"block"},children:t.jsx(QB,{size:64,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"floating-icon"})}),m=()=>{switch(n){case"checking":return"Authenticating...";case"processing":return"Processing...";case"authenticating":return"Securing Session...";case"verifying":return"Verifying...";case"redirecting":return"Success!";default:return"Loading..."}},g=()=>{switch(n){case"redirecting":return"Redirecting to your dashboard";default:return"Please wait while we log you in"}},y={page:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:A?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',position:"relative",overflow:"hidden",transition:"all 0.3s ease"},backgroundOrbs:{position:"absolute",width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"},orb:(b,R,C,Q)=>({position:"absolute",top:b,left:R,width:C,height:C,borderRadius:"50%",background:A?"radial-gradient(circle, rgba(59,130,246,0.15) 0%, transparent 70%)":"radial-gradient(circle, rgba(59,130,246,0.1) 0%, transparent 70%)",animation:`float ${6+Q}s ease-in-out infinite`,animationDelay:`${Q}s`,filter:"blur(40px)"}),container:{position:"relative",zIndex:10,textAlign:"center",maxWidth:"600px",padding:"0 20px"},card:{paddingTop:"100px"},cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.05) 0%, transparent 70%)",pointerEvents:"none"},iconContainer:{display:"flex",justifyContent:"center",marginBottom:"-40px",position:"relative",zIndex:20},iconWrapper:{width:"160px",height:"160px",borderRadius:"50%",background:A?"linear-gradient(135deg, rgba(59,130,246,0.2) 0%, rgba(37,99,235,0.2) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.15) 0%, rgba(37,99,235,0.15) 100%)",display:"flex",justifyContent:"center",alignItems:"center",color:"#3b82f6",border:A?"3px solid rgba(59,130,246,0.3)":"3px solid rgba(59,130,246,0.2)",position:"relative",overflow:"hidden",animation:"glow 2s ease-in-out infinite",isolation:"isolate"},iconGlow:{position:"absolute",inset:"-30px",borderRadius:"50%",background:A?"radial-gradient(circle, rgba(59,130,246,0.45), transparent 70%)":"radial-gradient(circle, rgba(59,130,246,0.35), transparent 70%)",filter:"blur(30px)",zIndex:0,pointerEvents:"none"},iconRing:{position:"absolute",inset:"-8px",borderRadius:"50%",border:"2px solid rgba(59,130,246,0.2)",animation:"pulse-ring 2s ease-in-out infinite"},title:{fontSize:"36px",fontWeight:"700",color:A?"#f1f5f9":"#1e293b",marginBottom:"16px",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},subtitle:{fontSize:"20px",fontWeight:"600",color:"#3b82f6",marginBottom:"12px"},description:{fontSize:"15px",color:A?"#94a3b8":"#64748b",marginBottom:"50px",lineHeight:"1.6"},loadingDots:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"40px"},dot:b=>({width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#3b82f6",animation:`bounce 1.4s ease-in-out ${b}s infinite`,boxShadow:"0 4px 12px rgba(59,130,246,0.4)"}),consoleNote:{fontSize:"12px",color:A?"#64748b":"#94a3b8",fontStyle:"italic"}};return t.jsxs("div",{style:y.page,children:[t.jsxs("div",{style:y.backgroundOrbs,children:[t.jsx("div",{style:y.orb("10%","10%","400px",0)}),t.jsx("div",{style:y.orb("60%","70%","350px",1)}),t.jsx("div",{style:y.orb("30%","80%","300px",2)})]}),t.jsxs("div",{style:y.container,children:[t.jsx("div",{style:y.iconContainer,children:t.jsxs("div",{style:y.iconWrapper,className:"floating",children:[t.jsx("div",{style:y.iconGlow}),t.jsx("div",{style:y.iconRing}),d()]})}),t.jsxs("div",{style:y.card,children:[t.jsx("div",{style:y.cardGlow}),t.jsx("div",{style:y.title,children:"Processing Microsoft Login"}),t.jsx("div",{style:y.subtitle,children:m()}),t.jsx("div",{style:y.description,children:g()}),t.jsxs("div",{style:y.loadingDots,children:[t.jsx("div",{style:y.dot(0)}),t.jsx("div",{style:y.dot(.2)}),t.jsx("div",{style:y.dot(.4)})]}),t.jsx("div",{style:y.consoleNote,children:"Press F12 to view detailed authentication logs"})]})]}),t.jsx("style",{children:`
        @keyframes float {
          0%, 100% {
            transform: translateY(0px) translateX(0px) rotate(0deg);
          }
          33% {
            transform: translateY(-20px) translateX(10px) rotate(5deg);
          }
          66% {
            transform: translateY(10px) translateX(-10px) rotate(-5deg);
          }
        }
        
        @keyframes pulse-ring {
          0%, 100% {
            opacity: 0.3;
            transform: scale(1);
          }
          50% {
            opacity: 0.6;
            transform: scale(1.15);
          }
        }
        
        @keyframes scale-up {
          0% {
            transform: scale(0.5);
            opacity: 0;
          }
          50% {
            transform: scale(1.1);
          }
          100% {
            transform: scale(1);
            opacity: 1;
          }
        }
        
        @keyframes bounce {
          0%, 100% {
            transform: translateY(0px);
          }
          50% {
            transform: translateY(-20px);
          }
        }
        
        @keyframes glow {
          0%, 100% {
            box-shadow: 0 15px 40px rgba(59,130,246,0.4);
          }
          50% {
            box-shadow: 0 15px 60px rgba(59,130,246,0.7);
          }
        }
        
        .floating {
          animation: float 4s ease-in-out infinite;
        }
        
        .floating-icon {
          animation: float 3s ease-in-out infinite, glow 2s ease-in-out infinite;
        }
        
        .success-icon {
          animation: scale-up 0.6s ease-out;
          color: #10b981 !important;
        }
        
        * {
          transition: background-color 0.3s ease, background 0.3s ease;
        }

        .floating-icon svg,
.success-icon svg,
.floating-icon,
.success-icon {
  background: none !important;
  background-color: transparent !important;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

/* Target the SVG elements directly */
svg {
  background: transparent !important;
  border: none !important;
}

/* Remove any rect elements that might be creating the square */
svg rect {
  display: none !important;
}

.floating-icon,
.success-icon {
  line-height: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  z-index: 10;
}
      `})]})}const y8=()=>{var Ce;const o=["muhammad.hasan@ihrp.sg","jumana.haseen@ihrp.sg"],[e,r]=h.useState(null),[n,a]=h.useState(!0),[A,c]=h.useState(null),[p,d]=h.useState(null),[m,g]=h.useState("contexts"),[y,b]=h.useState([]),[R,C]=h.useState(!1),[Q,S]=h.useState(!1),[N,M]=h.useState(null),[Ie,fe]=h.useState({}),[F,ae]=h.useState({subscriptionName:"",workspaceId:"",clientId:"",clientSecret:"",baseUrl:"https://cloud.manictime.com"}),[ee,Re]=h.useState(!1),[se,Z]=h.useState(null),[ue,pe]=h.useState(null),[we,Pe]=h.useState(null),[re,Ee]=h.useState(!1),[k,ge]=h.useState(null),[_,G]=h.useState(null),[E,D]=h.useState(""),[ie,L]=h.useState({aiContext:!0,websites:!0}),[j,de]=h.useState({domainId:"",name:"",purpose:"",aiContext:"",projectType:"Project"}),[Oe,Ge]=h.useState(!1),[Ve,ke]=h.useState([{value:"",description:"",type:"website"}]),[Be,nt]=h.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!0}});h.useEffect(()=>{q(),yt(),lt()},[]),h.useEffect(()=>{Ge(!1),ke([{value:"",description:"",type:"website"}])},[se==null?void 0:se.id]);const yt=async()=>{try{const H=await Te("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(H.ok){const P=await H.json();d(P)}}catch(H){console.error("Failed to fetch user data:",H)}},q=async()=>{try{const H=await Te("/api/ai/admin/structure",{credentials:"include"});if(!H.ok)throw new Error("Failed to load admin AI structure");const P=await H.json();r(P.domains||[])}catch(H){c(H.message)}finally{a(!1)}},lt=async()=>{C(!0);try{const H=await Te("/api/manictime-admin/subscriptions",{credentials:"include"});if(H.ok){const P=await H.json();b(P)}}catch(H){console.error("Failed to fetch subscriptions:",H)}finally{C(!1)}},ye=async()=>{if(!j.domainId){alert("Please select a department");return}if(!j.name.trim()){alert("Please enter a context name");return}try{await Te("/api/ai/contexts",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}),Re(!1),de({domainId:"",name:"",purpose:"",aiContext:"",projectType:"Project"}),q()}catch(H){console.error("Failed to create context:",H),alert("Failed to create context. Please try again.")}},ze=()=>{ke([...Ve,{value:"",description:"",type:"website"}])},dt=(H,P,z)=>{const xe=[...Ve];xe[H][P]=z,ke(xe)},Ne=async()=>{if(!se)return;const H=(se.resources||[]).map(z=>z.value),P=Ve.filter(z=>z.value.trim()&&!H.includes(z.value.trim()));if(P.length===0){alert("Add at least one resource");return}try{for(const z of P)await Te("/api/ai/context-resources",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({contextId:se.id,resourceType:z.type,identifier:z.value,description:z.description})});ke([{value:"",description:"",type:"website"}]),Ge(!1),q()}catch(z){console.error("Failed to save resources:",z),alert("Failed to save resources. Please try again.")}},B=async H=>{try{(await Te(`/api/ai/context-resources/${H}`,{method:"DELETE",credentials:"include"})).ok&&(Z(z=>({...z,resources:z.resources.filter(xe=>xe.id!==H)})),q())}catch(P){console.error("Failed to delete resource:",P),alert("Failed to delete resource. Please try again.")}},U=()=>{const H=!Be;nt(H),Ee(!1);try{localStorage.setItem("darkMode",H)}catch(P){console.error("Failed to save theme preference:",P)}},Ae=H=>{L(P=>({...P,[H]:!P[H]}))},Y=async()=>{if(!F.subscriptionName||!F.workspaceId||!F.clientId||!F.clientSecret){alert("Please fill in all required fields");return}try{(await Te("/api/manictime-admin/subscriptions",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)})).ok&&(S(!1),ae({subscriptionName:"",workspaceId:"",clientId:"",clientSecret:"",baseUrl:"https://cloud.manictime.com"}),lt())}catch(H){console.error("Failed to create subscription:",H),alert("Failed to create subscription")}},V=async()=>{if(N)try{(await Te(`/api/manictime-admin/subscriptions/${N.Id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)})).ok&&(M(null),lt())}catch(H){console.error("Failed to update subscription:",H),alert("Failed to update subscription")}},ve=async H=>{if(confirm("Are you sure? This will affect all users using this subscription."))try{(await Te(`/api/manictime-admin/subscriptions/${H}`,{method:"DELETE",credentials:"include"})).ok&&lt()}catch(P){console.error("Failed to delete subscription:",P),alert("Failed to delete subscription")}},me=H=>{fe(P=>({...P,[H]:!P[H]})),Ie[H]||setTimeout(()=>{fe(P=>({...P,[H]:!1}))},1e4)},T={page:{minHeight:"100vh",padding:"32px",background:Be?"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #f1f5f9 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease",position:"relative",overflow:"hidden"},pageGlow:{position:"fixed",top:0,left:0,right:0,bottom:0,background:Be?"radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.08) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.08) 0%, transparent 50%)":"radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.03) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.03) 0%, transparent 50%)",pointerEvents:"none",zIndex:0},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"32px",position:"relative",zIndex:10},header:{fontSize:"28px",fontWeight:"700",background:Be?"linear-gradient(135deg, #a78bfa 0%, #6366f1 100%)":"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",display:"flex",alignItems:"center",gap:"12px"},headerIcon:{animation:"pulse 2s ease-in-out infinite",filter:"drop-shadow(0 0 8px rgba(139, 92, 246, 0.6))"},subtitle:{fontSize:"14px",color:Be?"#94a3b8":"#64748b",marginTop:"8px",fontWeight:"500",letterSpacing:"0.5px"},headerRight:{display:"flex",alignItems:"center",gap:"16px",position:"relative"},addButton:H=>({padding:"12px 24px",borderRadius:"12px",border:"none",background:H?"linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%)":"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",color:"#fff",cursor:"pointer",transition:"all 0.3s ease",boxShadow:H?"0 8px 25px rgba(139,92,246,0.3)":"0 4px 12px rgba(139,92,246,0.2)",transform:H?"translateY(-2px) scale(1.05)":"translateY(0)",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"}),profileButton:H=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:H?"rgba(139,92,246,0.15)":Be?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:H?"#8b5cf6":Be?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s ease",boxShadow:H?"0 8px 25px rgba(139,92,246,0.2)":"0 4px 12px rgba(0,0,0,0.08)",transform:H?"translateY(-2px) scale(1.05)":"translateY(0)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),profileTooltip:{position:"fixed",top:"80px",right:"32px",backgroundColor:Be?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:Be?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:999999,pointerEvents:"auto",animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:Be?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:Be?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px",boxShadow:"0 4px 12px rgba(139,92,246,0.3)"},userName:{fontSize:"14px",fontWeight:"600",color:Be?"#e2e8f0":"#1e293b",marginBottom:"2px"},userRole:{fontSize:"12px",color:Be?"#94a3b8":"#64748b"},userStats:{borderTop:Be?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:Be?"#e2e8f0":"#1e293b"},tooltipStatLabel:{fontSize:"10px",color:Be?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(139,92,246,0.1)",color:"#8b5cf6",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px",width:"100%",transition:"all 0.2s ease"},contentContainer:{display:"grid",gridTemplateColumns:"320px 1fr",gap:"28px",position:"relative",zIndex:10},panel:H=>({background:Be?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.7)",backdropFilter:"blur(20px)",borderRadius:"20px",padding:"28px",border:Be?"1px solid rgba(139,92,246,0.2)":"1px solid rgba(139,92,246,0.1)",boxShadow:H?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(139,92,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:H?"translateY(-4px)":"translateY(0)",position:"relative",overflow:"visible"}),panelGlow:{position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, transparent, rgba(139,92,246,0.5), transparent)",opacity:.5},panelTitle:{display:"flex",alignItems:"center",gap:"10px",fontSize:"18px",fontWeight:"700",color:Be?"#e2e8f0":"#1e293b",marginBottom:"20px",paddingBottom:"16px",borderBottom:Be?"2px solid rgba(139,92,246,0.2)":"2px solid rgba(139,92,246,0.1)"},typeHeader:{fontSize:"13px",fontWeight:"700",color:Be?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"1px",marginTop:"16px",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},contextCard:(H,P)=>({background:H?Be?"rgba(139,92,246,0.15)":"rgba(139,92,246,0.08)":P?Be?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)":"transparent",borderRadius:"12px",padding:"16px",marginBottom:"10px",border:H?Be?"1px solid rgba(139,92,246,0.4)":"1px solid rgba(139,92,246,0.3)":Be?"1px solid rgba(51,65,85,0.3)":"1px solid rgba(226,232,240,0.5)",cursor:"pointer",transition:"all 0.3s ease",transform:P?"translateX(4px)":"translateX(0)",boxShadow:H?"0 4px 12px rgba(139,92,246,0.2)":"none"}),contextTitle:{fontWeight:"600",fontSize:"14px",color:Be?"#e2e8f0":"#1e293b",marginBottom:"4px",display:"flex",alignItems:"center",gap:"6px"},contextSubtitle:{fontSize:"11px",color:Be?"#94a3b8":"#64748b",display:"flex",alignItems:"center",gap:"4px",marginTop:"4px"},muted:{fontSize:"12px",color:Be?"#94a3b8":"#64748b",lineHeight:"1.4"},sectionHeader:(H,P)=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",marginTop:"16px",marginBottom:"12px",background:P?Be?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)":Be?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.5)",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",border:Be?"1px solid rgba(139,92,246,0.2)":"1px solid rgba(139,92,246,0.1)"}),sectionTitle:{fontSize:"16px",fontWeight:"700",color:Be?"#e2e8f0":"#1e293b",display:"flex",alignItems:"center",gap:"8px"},sectionContent:H=>({maxHeight:H?"2000px":"0",overflow:"hidden",transition:"max-height 0.3s ease",paddingTop:H?"8px":"0"}),button:(H,P="primary")=>({marginTop:"12px",padding:"12px 20px",...{primary:{background:H?"linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%)":"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",color:"#fff"},secondary:{background:H?Be?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.15)":Be?"rgba(51,65,85,0.6)":"rgba(248,250,252,0.7)",color:Be?"#e2e8f0":"#1e293b"}}[P],border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",transition:"all 0.3s ease",transform:H?"translateY(-2px)":"translateY(0)",boxShadow:H?"0 8px 20px rgba(139,92,246,0.3)":"0 4px 12px rgba(139,92,246,0.2)",width:"100%"}),input:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:Be?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",background:Be?"rgba(30,41,59,0.5)":"rgba(255,255,255,0.8)",color:Be?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",transition:"all 0.2s ease",marginBottom:"12px",fontFamily:'"Montserrat", sans-serif'},select:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:Be?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",background:Be?"rgba(30,41,59,0.5)":"rgba(255,255,255,0.8)",color:Be?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",transition:"all 0.2s ease",marginBottom:"12px",fontFamily:'"Montserrat", sans-serif',cursor:"pointer"},textarea:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:Be?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",background:Be?"rgba(30,41,59,0.5)":"rgba(255,255,255,0.8)",color:Be?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",transition:"all 0.2s ease",marginBottom:"12px",fontFamily:'"Montserrat", sans-serif',resize:"vertical",minHeight:"80px"},tag:H=>({background:Be?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.1)",padding:"8px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",color:"#8b5cf6",marginRight:"8px",marginBottom:"8px",display:"inline-flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",transform:H?"scale(1.05)":"scale(1)",border:Be?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)"}),deleteButton:H=>({background:"transparent",border:"none",color:H?"#dc2626":"#ef4444",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease",display:"flex",alignItems:"center",transform:H?"scale(1.1)":"scale(1)"}),websiteInput:{display:"flex",gap:"8px",marginBottom:"8px",alignItems:"center"},websiteAddButton:H=>({padding:"12px",background:H?Be?"rgba(139,92,246,0.3)":"rgba(139,92,246,0.2)":Be?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.1)",border:"none",borderRadius:"8px",color:"#8b5cf6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",transform:H?"scale(1.05)":"scale(1)"}),modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,animation:"fadeIn 0.2s ease"},modalContent:{background:Be?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"20px",padding:"32px",maxWidth:"500px",width:"90%",border:Be?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",animation:"slideUp 0.3s ease",position:"relative"},modalTitle:{fontSize:"24px",fontWeight:"700",color:Be?"#e2e8f0":"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px"},modalClose:H=>({position:"absolute",top:"20px",right:"20px",background:"transparent",border:"none",color:H?"#ef4444":Be?"#94a3b8":"#64748b",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),label:{fontSize:"12px",fontWeight:"600",color:Be?"#94a3b8":"#64748b",marginBottom:"6px",display:"block"},emptyState:{textAlign:"center",padding:"40px 20px",color:Be?"#94a3b8":"#64748b"},loadingState:{textAlign:"center",padding:"60px 20px",color:Be?"#94a3b8":"#64748b",fontSize:"16px"},tabSwitcher:{display:"flex",gap:"8px",padding:"4px",background:Be?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.6)",borderRadius:"12px",backdropFilter:"blur(10px)",border:Be?"1px solid rgba(139,92,246,0.2)":"1px solid rgba(139,92,246,0.1)"},tab:(H,P)=>({padding:"10px 20px",borderRadius:"8px",border:"none",background:H?"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)":P?Be?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.1)":"transparent",color:H?"#fff":Be?"#e2e8f0":"#1e293b",cursor:"pointer",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",transform:P?"scale(1.05)":"scale(1)"})};if(typeof document<"u"&&!document.getElementById("secret-animations")){const H=document.createElement("style");H.id="secret-animations",H.innerHTML=`
            @keyframes pulse {
                0%, 100% { opacity: 1; transform: scale(1); }
                50% { opacity: 0.8; transform: scale(1.05); }
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            @keyframes slideUp {
                from { 
                    opacity: 0; 
                    transform: translateY(20px);
                }
                to { 
                    opacity: 1; 
                    transform: translateY(0);
                }
            }
            .input-focus:focus, select:focus {
    border-color: ${Be?"rgba(139,92,246,0.6)":"rgba(139,92,246,0.4)"} !important;
    box-shadow: 0 0 0 3px rgba(139,92,246,0.1) !important;
}
        `,document.head.appendChild(H)}if(n)return t.jsxs("div",{style:T.page,children:[t.jsx("div",{style:T.pageGlow}),t.jsxs("div",{style:T.loadingState,children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("div",{style:{fontSize:"18px",fontWeight:"600"},children:"Accessing Secret Departments..."})]})]});if(!(p&&o.includes(p.email)))return t.jsxs("div",{style:T.page,children:[t.jsx("div",{style:T.pageGlow}),t.jsxs("div",{style:T.emptyState,children:[t.jsx("div",{style:{fontSize:"64px",marginBottom:"24px"},children:""}),t.jsx("div",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"12px",color:Be?"#e2e8f0":"#1e293b"},children:"Private Access Only"}),t.jsxs("p",{style:{...T.muted,maxWidth:"400px",margin:"0 auto"},children:["This department is restricted to authorized personnel only. Your email (",t.jsx("strong",{children:(p==null?void 0:p.email)||"Unknown"}),") does not have permission to view this page."]}),t.jsx("button",{onClick:()=>window.location.href="/admindashboard",style:{...T.button(ue==="back"),width:"auto",marginTop:"24px",padding:"12px 32px"},onMouseEnter:()=>pe("back"),onMouseLeave:()=>pe(null),children:"Return to Dashboard"})]})]});if(A)return t.jsxs("div",{style:T.page,children:[t.jsx("div",{style:T.pageGlow}),t.jsxs("div",{style:T.emptyState,children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),t.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Access Denied"}),t.jsxs("div",{children:["Error: ",A]})]})]});const w={};e==null||e.forEach(H=>{var P;w[H.name]||(w[H.name]={id:H.id,name:H.name,projects:[],operations:[]}),(P=H.contexts)==null||P.forEach(z=>{const xe={...z,domainName:H.name,domainId:H.id};z.projectType==="Operations"?w[H.name].operations.push(xe):w[H.name].projects.push(xe)})});const ce=(e==null?void 0:e.reduce((H,P)=>{var z;return H+(((z=P.contexts)==null?void 0:z.length)||0)},0))||0;return t.jsxs("div",{style:T.page,children:[t.jsx("div",{style:T.pageGlow}),t.jsxs("div",{style:T.headerRow,children:[t.jsxs("div",{children:[t.jsxs("h1",{style:T.header,children:[t.jsx("span",{style:T.headerIcon,children:""}),m==="contexts"?"Contextual Resources":"ManicTime Subscriptions"]}),t.jsxs("div",{style:T.subtitle,children:[t.jsx(yo,{size:14,style:{display:"inline",marginRight:"6px"}}),m==="contexts"?"AI Context Management System":"Workspace Credential Management"]})]}),t.jsxs("div",{style:T.tabSwitcher,children:[t.jsxs("button",{style:T.tab(m==="contexts",ue==="tab-contexts"),onMouseEnter:()=>pe("tab-contexts"),onMouseLeave:()=>pe(null),onClick:()=>g("contexts"),children:[t.jsx(Xm,{size:16}),"Contexts"]}),t.jsxs("button",{style:T.tab(m==="subscriptions",ue==="tab-subs"),onMouseEnter:()=>pe("tab-subs"),onMouseLeave:()=>pe(null),onClick:()=>g("subscriptions"),children:[t.jsx(qo,{size:16}),"ManicTime"]})]}),t.jsxs("div",{style:T.headerRight,children:[m==="contexts"?t.jsxs("button",{style:T.addButton(ue==="add-context"),onMouseEnter:()=>pe("add-context"),onMouseLeave:()=>pe(null),onClick:()=>Re(!0),children:[t.jsx(Sr,{size:18}),"New Context"]}):t.jsxs("button",{style:T.addButton(ue==="add-subscription"),onMouseEnter:()=>pe("add-subscription"),onMouseLeave:()=>pe(null),onClick:()=>S(!0),children:[t.jsx(Sr,{size:18}),"New Subscription"]}),t.jsx("div",{style:{position:"relative",zIndex:1e5},children:t.jsx("button",{style:T.profileButton(we==="profile"),onMouseEnter:H=>{Pe("profile");const P=H.currentTarget.getBoundingClientRect();ge({top:P.bottom+12,right:window.innerWidth-P.right}),Ee(!0)},onMouseLeave:()=>Pe(null),children:t.jsx(qt,{size:20})})})]})]}),m==="contexts"?t.jsxs("div",{style:T.contentContainer,children:[t.jsxs("div",{style:T.panel(we==="left"),onMouseEnter:()=>Pe("left"),onMouseLeave:()=>Pe(null),children:[t.jsx("div",{style:T.panelGlow}),t.jsxs("h3",{style:T.panelTitle,children:[t.jsx(Xm,{size:20}),"All Contexts (",ce,")"]}),ce===0&&t.jsxs("div",{style:T.emptyState,children:[t.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),t.jsx("p",{style:T.muted,children:"No contexts created yet"}),t.jsx("p",{style:{...T.muted,marginTop:"8px"},children:'Click "New Context" to get started'})]}),Object.values(w).map(H=>t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsxs("div",{style:{fontSize:"14px",fontWeight:"700",color:Be?"#e2e8f0":"#1e293b",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx(ws,{size:16,style:{color:"#8b5cf6"}}),H.name]}),H.projects.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:T.typeHeader,children:[t.jsx(wa,{size:12}),"Projects"]}),H.projects.map(P=>t.jsxs("div",{style:T.contextCard((se==null?void 0:se.id)===P.id,ue===`ctx-${P.id}`),onClick:()=>Z(P),onMouseEnter:()=>pe(`ctx-${P.id}`),onMouseLeave:()=>pe(null),children:[t.jsxs("div",{style:T.contextTitle,children:[t.jsx(qo,{size:14}),P.name]}),t.jsx("div",{style:T.muted,children:P.purpose})]},`ctx-${P.id}`))]}),H.operations.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:T.typeHeader,children:[t.jsx(Jm,{size:12}),"Operations"]}),H.operations.map(P=>t.jsxs("div",{style:T.contextCard((se==null?void 0:se.id)===P.id,ue===`ctx-${P.id}`),onClick:()=>Z(P),onMouseEnter:()=>pe(`ctx-${P.id}`),onMouseLeave:()=>pe(null),children:[t.jsxs("div",{style:T.contextTitle,children:[t.jsx(qo,{size:14}),P.name]}),t.jsx("div",{style:T.muted,children:P.purpose})]},`ctx-${P.id}`))]})]},`domain-${H.id}`))]}),t.jsxs("div",{style:T.panel(we==="right"),onMouseEnter:()=>Pe("right"),onMouseLeave:()=>Pe(null),children:[t.jsx("div",{style:T.panelGlow}),!se&&t.jsxs("div",{style:T.emptyState,children:[t.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:""}),t.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Select a context to view details"}),t.jsx("p",{style:T.muted,children:"Choose a project context from the left panel to manage its settings"})]}),se&&t.jsxs(t.Fragment,{children:[t.jsxs("h2",{style:{fontSize:"24px",fontWeight:"700",color:Be?"#e2e8f0":"#1e293b",marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx(yo,{size:24,style:{color:"#8b5cf6"}}),se.name]}),t.jsx("p",{style:{...T.muted,marginBottom:"8px"},children:se.purpose}),t.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[t.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",backgroundColor:Be?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.1)",border:Be?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",fontSize:"11px",fontWeight:"600",color:"#8b5cf6"},children:[t.jsx(ws,{size:10}),se.domainName]}),t.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",backgroundColor:se.projectType==="Operations"?Be?"rgba(245,158,11,0.2)":"rgba(245,158,11,0.1)":Be?"rgba(16,185,129,0.2)":"rgba(16,185,129,0.1)",border:se.projectType==="Operations"?"1px solid rgba(245,158,11,0.3)":"1px solid rgba(16,185,129,0.3)",fontSize:"11px",fontWeight:"600",color:se.projectType==="Operations"?"#f59e0b":"#10b981"},children:[se.projectType==="Operations"?t.jsx(Jm,{size:10}):t.jsx(wa,{size:10}),se.projectType||"Project"]})]}),t.jsxs("div",{style:T.sectionHeader(ie.aiContext,ue==="section-ai"),onClick:()=>Ae("aiContext"),onMouseEnter:()=>pe("section-ai"),onMouseLeave:()=>pe(null),children:[t.jsxs("div",{style:T.sectionTitle,children:[t.jsx(Mi,{size:16}),"AI Context"]}),ie.aiContext?t.jsx(Mo,{size:20}):t.jsx(Nc,{size:20})]}),t.jsx("div",{style:T.sectionContent(ie.aiContext),children:_===se.id?t.jsxs(t.Fragment,{children:[t.jsx("textarea",{className:"input-focus",style:T.textarea,value:E,onChange:H=>D(H.target.value),placeholder:"Provide AI context and instructions..."}),t.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[t.jsxs("button",{style:T.button(ue==="save-ai-context"),onMouseEnter:()=>pe("save-ai-context"),onMouseLeave:()=>pe(null),onClick:async()=>{try{await Te(`/api/ai/contexts/${se.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({aiContext:E})}),G(null),q()}catch(H){console.error("Failed to update AI context:",H),alert("Failed to update AI context. Please try again.")}},children:[t.jsx(ki,{size:16}),"Save"]}),t.jsx("button",{style:T.button(ue==="cancel-ai-context","secondary"),onMouseEnter:()=>pe("cancel-ai-context"),onMouseLeave:()=>pe(null),onClick:()=>{G(null),D("")},children:"Cancel"})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{style:{...T.muted,padding:"16px",background:Be?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)",borderRadius:"10px",border:Be?"1px solid rgba(139,92,246,0.2)":"1px solid rgba(139,92,246,0.1)",lineHeight:"1.6",minHeight:se.aiContext?"auto":"60px",color:se.aiContext?"inherit":Be?"#94a3b8":"#64748b",fontStyle:se.aiContext?"normal":"italic"},children:se.aiContext||"No AI context provided yet. Click edit to add instructions."}),t.jsxs("button",{style:T.button(ue==="edit-ai-context","secondary"),onMouseEnter:()=>pe("edit-ai-context"),onMouseLeave:()=>pe(null),onClick:()=>{G(se.id),D(se.aiContext||"")},children:[t.jsx(ms,{size:16}),"Edit AI Context"]})]})}),t.jsxs("div",{style:T.sectionHeader(ie.websites,ue==="section-web"),onClick:()=>Ae("websites"),onMouseEnter:()=>pe("section-web"),onMouseLeave:()=>pe(null),children:[t.jsxs("div",{style:T.sectionTitle,children:[t.jsx(Up,{size:16}),"Linked Websites (",(se.resources||[]).length,")"]}),ie.websites?t.jsx(Mo,{size:20}):t.jsx(Nc,{size:20})]}),t.jsxs("div",{style:T.sectionContent(ie.websites),children:[!Oe&&t.jsxs("button",{style:T.button(ue==="add-website","secondary"),onMouseEnter:()=>pe("add-website"),onMouseLeave:()=>pe(null),onClick:()=>Ge(!0),children:[t.jsx(Sr,{size:16}),"Add Website"]}),Oe&&t.jsxs("div",{style:{marginTop:"12px",marginBottom:"16px"},children:[Ve.map((H,P)=>t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:T.label,children:"Resource Type"}),t.jsx(Tt,{value:H.type==="website"?"Website / URL":H.type==="application"?"Application / Software":H.type==="file_pattern"?"File / Project Pattern":H.type,onChange:z=>{dt(P,"type",{"Website / URL":"website","Application / Software":"application","File / Project Pattern":"file_pattern"}[z]||z)},options:["Website / URL","Application / Software","File / Project Pattern"],placeholder:"Select resource type...",isDarkMode:Be,variant:"purple",compact:!0}),t.jsxs("div",{style:{...T.muted,marginTop:"8px",marginBottom:"12px",padding:"8px 12px",background:Be?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)",borderRadius:"8px",fontSize:"11px"},children:[H.type==="website"&&' Example: "Vite + React - Google Chrome" or "localhost:3000"',H.type==="application"&&' Example: "Visual Studio Code" or "Code" or "Code.exe"',H.type==="file_pattern"&&' Example: "MP" or "MaxCap" (matches anywhere in activity)']}),t.jsxs("div",{style:T.websiteInput,children:[t.jsx("input",{className:"input-focus",style:{...T.input,flex:2,marginBottom:0},placeholder:H.type==="website"?"Website title or URL":H.type==="application"?"Application name":"File or project pattern",value:H.value,onChange:z=>dt(P,"value",z.target.value)}),t.jsx("input",{className:"input-focus",style:{...T.input,flex:2,marginBottom:0},placeholder:"Description (optional)",value:H.description,onChange:z=>dt(P,"description",z.target.value)}),t.jsx("button",{style:T.websiteAddButton(ue===`add-row-${P}`),onMouseEnter:()=>pe(`add-row-${P}`),onMouseLeave:()=>pe(null),onClick:ze,children:t.jsx(Sr,{size:16})})]})]},`resource-input-${P}`)),t.jsxs("button",{style:T.button(ue==="save-resources"),onMouseEnter:()=>pe("save-resources"),onMouseLeave:()=>pe(null),onClick:Ne,children:[t.jsx(ki,{size:16}),"Save Resources"]})]}),t.jsxs("div",{style:{marginTop:"16px"},children:[(se.resources||[]).length===0&&t.jsx("p",{style:T.muted,children:"No websites linked yet"}),(se.resources||[]).map(H=>t.jsxs("div",{style:T.tag(ue===`tag-${H.id}`),onMouseEnter:()=>pe(`tag-${H.id}`),onMouseLeave:()=>pe(null),children:[H.type==="website"&&t.jsx(Up,{size:12}),H.type==="application"&&t.jsx(qo,{size:12}),H.type==="file_pattern"&&t.jsx(ri,{size:12}),t.jsx("span",{children:H.value}),H.description&&t.jsxs("span",{style:{fontSize:"10px",opacity:.7,marginLeft:"4px"},children:["(",H.description,")"]}),t.jsx("button",{onClick:()=>B(H.id),style:T.deleteButton(ue===`delete-${H.id}`),onMouseEnter:()=>pe(`delete-${H.id}`),onMouseLeave:()=>pe(null),title:"Remove resource",children:t.jsx(Kn,{size:12})})]},`resource-${H.id}`))]})]})]})]})]}):t.jsxs("div",{style:T.contentContainer,children:[t.jsxs("div",{style:T.panel(we==="sub-left"),onMouseEnter:()=>Pe("sub-left"),onMouseLeave:()=>Pe(null),children:[t.jsx("div",{style:T.panelGlow}),t.jsxs("h3",{style:T.panelTitle,children:[t.jsx(qo,{size:20}),"All Subscriptions (",y.length,")"]}),R?t.jsxs("div",{style:T.emptyState,children:[t.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),t.jsx("p",{style:T.muted,children:"Loading subscriptions..."})]}):y.length===0?t.jsxs("div",{style:T.emptyState,children:[t.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),t.jsx("p",{style:T.muted,children:"No subscriptions configured"}),t.jsx("p",{style:{...T.muted,marginTop:"8px"},children:'Click "New Subscription" to get started'})]}):y.map(H=>t.jsxs("div",{style:T.contextCard((N==null?void 0:N.Id)===H.Id,ue===`sub-${H.Id}`),onClick:()=>M(H),onMouseEnter:()=>pe(`sub-${H.Id}`),onMouseLeave:()=>pe(null),children:[t.jsxs("div",{style:T.contextTitle,children:[t.jsx(qo,{size:14,style:{color:H.IsActive?"#10b981":"#94a3b8"}}),H.SubscriptionName]}),t.jsxs("div",{style:T.contextSubtitle,children:[t.jsx(Up,{size:10}),"WS: ",H.WorkspaceId]}),!H.IsActive&&t.jsx("div",{style:{fontSize:"10px",color:"#ef4444",marginTop:"4px",fontWeight:"600"},children:" INACTIVE"})]},H.Id))]}),t.jsxs("div",{style:T.panel(we==="sub-right"),onMouseEnter:()=>Pe("sub-right"),onMouseLeave:()=>Pe(null),children:[t.jsx("div",{style:T.panelGlow}),N?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsxs("h2",{style:{fontSize:"24px",fontWeight:"700",color:Be?"#e2e8f0":"#1e293b",marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx(qo,{size:24,style:{color:"#8b5cf6"}}),N.SubscriptionName]}),t.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",backgroundColor:N.IsActive?Be?"rgba(16,185,129,0.2)":"rgba(16,185,129,0.1)":Be?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",border:N.IsActive?"1px solid rgba(16,185,129,0.3)":"1px solid rgba(239,68,68,0.3)",fontSize:"11px",fontWeight:"600",color:N.IsActive?"#10b981":"#ef4444"},children:N.IsActive?" Active":" Inactive"})]}),t.jsx("div",{style:T.sectionHeader(!0,ue==="section-config"),onMouseEnter:()=>pe("section-config"),onMouseLeave:()=>pe(null),children:t.jsxs("div",{style:T.sectionTitle,children:[t.jsx(Mi,{size:16}),"Configuration"]})}),t.jsxs("div",{style:{marginTop:"16px"},children:[t.jsx("label",{style:T.label,children:"Subscription Name"}),t.jsx("input",{className:"input-focus",style:T.input,value:N.SubscriptionName,onChange:H=>M({...N,SubscriptionName:H.target.value}),placeholder:"Main Workspace"}),t.jsx("label",{style:T.label,children:"Workspace ID"}),t.jsx("input",{className:"input-focus",style:{...T.input,fontFamily:"monospace",fontSize:"13px"},value:N.WorkspaceId,onChange:H=>M({...N,WorkspaceId:H.target.value}),placeholder:"0yd5t2"}),t.jsx("label",{style:T.label,children:"Client ID"}),t.jsx("input",{className:"input-focus",style:{...T.input,fontFamily:"monospace",fontSize:"13px"},value:N.ClientId,onChange:H=>M({...N,ClientId:H.target.value}),placeholder:"sKPuHCvF263IgHs84ZZPHVokj7mVHzBk"}),t.jsxs("label",{style:T.label,children:["Client Secret",t.jsx("span",{style:{marginLeft:"8px",fontSize:"10px",color:"#ef4444",fontWeight:"700"},children:" SENSITIVE"})]}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{className:"input-focus",style:{...T.input,fontFamily:"monospace",fontSize:Ie[N.Id]?"13px":"20px",letterSpacing:Ie[N.Id]?"0":"4px",paddingRight:"48px"},type:Ie[N.Id]?"text":"password",value:N.ClientSecret,onChange:H=>M({...N,ClientSecret:H.target.value}),placeholder:""}),t.jsx("button",{type:"button",onClick:()=>me(N.Id),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",color:Be?"#94a3b8":"#64748b",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.2s ease"},onMouseEnter:H=>H.currentTarget.style.color="#8b5cf6",onMouseLeave:H=>H.currentTarget.style.color=Be?"#94a3b8":"#64748b",children:Ie[N.Id]?t.jsx(ri,{size:18}):t.jsx(Mi,{size:18})})]}),Ie[N.Id]&&t.jsx("div",{style:{fontSize:"11px",color:"#f59e0b",marginTop:"-8px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"4px"},children:" Secret visible (auto-hiding in 10s)"}),t.jsx("label",{style:T.label,children:"Base URL"}),t.jsx("input",{className:"input-focus",style:{...T.input,fontFamily:"monospace",fontSize:"13px"},value:N.BaseUrl,onChange:H=>M({...N,BaseUrl:H.target.value}),placeholder:"https://cloud.manictime.com"}),t.jsx("label",{style:T.label,children:"Status"}),t.jsx(Tt,{value:N.IsActive?" Active":" Inactive",onChange:H=>M({...N,IsActive:H===" Active"}),options:[" Active"," Inactive"],placeholder:"Select status...",isDarkMode:Be,variant:"purple",compact:!0}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px"},children:[t.jsxs("button",{style:T.button(ue==="save-sub"),onMouseEnter:()=>pe("save-sub"),onMouseLeave:()=>pe(null),onClick:V,children:[t.jsx(ki,{size:16}),"Save Changes"]}),t.jsxs("button",{style:{...T.button(ue==="delete-sub","secondary"),background:ue==="delete-sub"?"linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)":Be?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",color:ue==="delete-sub"?"#fff":"#ef4444",border:"1px solid rgba(239,68,68,0.3)"},onMouseEnter:()=>pe("delete-sub"),onMouseLeave:()=>pe(null),onClick:()=>ve(N.Id),children:[t.jsx(Kn,{size:16}),"Delete"]})]})]})]}):t.jsxs("div",{style:T.emptyState,children:[t.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:""}),t.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Select a subscription to view details"}),t.jsx("p",{style:T.muted,children:"Choose a subscription from the left panel to manage its configuration"})]})]})]}),ee&&t.jsx("div",{style:T.modal,onClick:()=>Re(!1),children:t.jsxs("div",{style:T.modalContent,onClick:H=>H.stopPropagation(),children:[t.jsx("button",{style:T.modalClose(ue==="close"),onMouseEnter:()=>pe("close"),onMouseLeave:()=>pe(null),onClick:()=>Re(!1),children:t.jsx(gr,{size:20})}),t.jsxs("h3",{style:T.modalTitle,children:[t.jsx(yo,{size:24}),"Create New Context"]}),t.jsx("label",{style:T.label,children:"Department *"}),t.jsx("div",{style:{marginBottom:"12px"},children:t.jsx(Tt,{value:j.domainId&&((Ce=e==null?void 0:e.find(H=>H.id===Number(j.domainId)))==null?void 0:Ce.name)||"",onChange:H=>{const P=e==null?void 0:e.find(z=>z.name===H);de({...j,domainId:P?String(P.id):""})},options:["Select a department...",...(e==null?void 0:e.map(H=>H.name))||[]],placeholder:"Select a department...",isDarkMode:Be,variant:"purple",compact:!0})}),t.jsx("label",{style:T.label,children:"Project Type *"}),t.jsx("div",{style:{marginBottom:"12px"},children:t.jsx(Tt,{value:j.projectType,onChange:H=>de({...j,projectType:H}),options:["Project","Operations"],placeholder:"Select project type...",isDarkMode:Be,variant:"purple",compact:!0})}),t.jsx("label",{style:T.label,children:"Context Name *"}),t.jsx("input",{className:"input-focus",style:T.input,placeholder:"e.g., Project Alpha, Marketing Campaign",value:j.name,onChange:H=>de({...j,name:H.target.value})}),t.jsx("label",{style:T.label,children:"Purpose"}),t.jsx("textarea",{className:"input-focus",style:T.textarea,placeholder:"Brief description of this context",value:j.purpose,onChange:H=>de({...j,purpose:H.target.value})}),t.jsx("label",{style:T.label,children:"AI Context / Instructions"}),t.jsx("textarea",{className:"input-focus",style:T.textarea,placeholder:"Provide context and instructions for AI",value:j.aiContext,onChange:H=>de({...j,aiContext:H.target.value})}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{style:T.button(ue==="cancel","secondary"),onMouseEnter:()=>pe("cancel"),onMouseLeave:()=>pe(null),onClick:()=>Re(!1),children:"Cancel"}),t.jsxs("button",{style:T.button(ue==="create"),onMouseEnter:()=>pe("create"),onMouseLeave:()=>pe(null),onClick:ye,children:[t.jsx(ki,{size:16}),"Create Context"]})]})]})}),Q&&t.jsx("div",{style:T.modal,onClick:()=>S(!1),children:t.jsxs("div",{style:T.modalContent,onClick:H=>H.stopPropagation(),children:[t.jsx("button",{style:T.modalClose(ue==="close-sub"),onMouseEnter:()=>pe("close-sub"),onMouseLeave:()=>pe(null),onClick:()=>S(!1),children:t.jsx(gr,{size:20})}),t.jsxs("h3",{style:T.modalTitle,children:[t.jsx(qo,{size:24}),"Add New Subscription"]}),t.jsx("label",{style:T.label,children:"Subscription Name *"}),t.jsx("input",{className:"input-focus",style:T.input,placeholder:"Main Workspace",value:F.subscriptionName,onChange:H=>ae({...F,subscriptionName:H.target.value})}),t.jsx("label",{style:T.label,children:"Workspace ID *"}),t.jsx("input",{className:"input-focus",style:{...T.input,fontFamily:"monospace",fontSize:"13px"},placeholder:"0yd5t2",value:F.workspaceId,onChange:H=>ae({...F,workspaceId:H.target.value})}),t.jsx("label",{style:T.label,children:"Client ID *"}),t.jsx("input",{className:"input-focus",style:{...T.input,fontFamily:"monospace",fontSize:"13px"},placeholder:"sKPuHCvF263IgHs84ZZPHVokj7mVHzBk",value:F.clientId,onChange:H=>ae({...F,clientId:H.target.value})}),t.jsxs("label",{style:T.label,children:["Client Secret *",t.jsx("span",{style:{marginLeft:"8px",fontSize:"10px",color:"#ef4444"},children:" SENSITIVE"})]}),t.jsx("input",{className:"input-focus",style:{...T.input,fontFamily:"monospace",fontSize:"13px"},type:"password",placeholder:"",value:F.clientSecret,onChange:H=>ae({...F,clientSecret:H.target.value})}),t.jsx("label",{style:T.label,children:"Base URL *"}),t.jsx("input",{className:"input-focus",style:{...T.input,fontFamily:"monospace",fontSize:"13px"},placeholder:"https://cloud.manictime.com",value:F.baseUrl,onChange:H=>ae({...F,baseUrl:H.target.value})}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[t.jsx("button",{style:T.button(ue==="cancel-sub","secondary"),onMouseEnter:()=>pe("cancel-sub"),onMouseLeave:()=>pe(null),onClick:()=>S(!1),children:"Cancel"}),t.jsxs("button",{style:T.button(ue==="create-sub"),onMouseEnter:()=>pe("create-sub"),onMouseLeave:()=>pe(null),onClick:Y,children:[t.jsx(ki,{size:16}),"Create Subscription"]})]})]})}),re&&k&&t.jsxs("div",{style:{...T.profileTooltip,top:k.top,right:k.right,zIndex:2147483647},onMouseEnter:()=>Ee(!0),onMouseLeave:()=>Ee(!1),children:[t.jsx("div",{style:T.tooltipArrow}),t.jsxs("div",{style:T.userInfo,children:[t.jsx("div",{style:T.avatar,children:p?`${p.firstName[0]}${p.lastName[0]}`:"U"}),t.jsxs("div",{children:[t.jsx("div",{style:T.userName,children:p?`${p.firstName} ${p.lastName}`:"Loading..."}),t.jsx("div",{style:T.userRole,children:p?`${p.role}  ${p.department}`:"Loading..."})]})]}),t.jsxs("div",{style:T.userStats,children:[t.jsxs("div",{style:T.tooltipStatItem,children:[t.jsx("div",{style:T.tooltipStatNumber,children:(e==null?void 0:e.length)||0}),t.jsx("div",{style:T.tooltipStatLabel,children:"Domains"})]}),t.jsxs("div",{style:T.tooltipStatItem,children:[t.jsx("div",{style:T.tooltipStatNumber,children:ce}),t.jsx("div",{style:T.tooltipStatLabel,children:"Contexts"})]}),t.jsxs("div",{style:T.tooltipStatItem,children:[t.jsx("div",{style:T.tooltipStatNumber,children:Object.values(w).reduce((H,P)=>H+P.projects.length,0)}),t.jsx("div",{style:T.tooltipStatLabel,children:"Projects"})]})]}),t.jsx("button",{style:T.themeToggle,onClick:U,children:Be?" Light Mode":" Dark Mode"})]})]})},b8=()=>t.jsx("div",{children:t.jsx(wE,{children:t.jsxs(XC,{children:[t.jsx(Br,{path:"/",element:t.jsx(xE,{})}),t.jsx(Br,{path:"/forgot-password",element:t.jsx(yE,{})}),t.jsx(Br,{path:"/auth",element:t.jsx(x8,{})}),t.jsx(Br,{path:"/admindashboard",element:t.jsx(Vr,{children:t.jsx(IE,{})})}),t.jsx(Br,{path:"/adminteamcapacity",element:t.jsx(Vr,{children:t.jsx(EE,{})})}),t.jsx(Br,{path:"/adminutilization",element:t.jsx(Vr,{children:t.jsx(kE,{})})}),t.jsx(Br,{path:"/adminactuals",element:t.jsx(Vr,{children:t.jsx(FE,{})})}),t.jsx(Br,{path:"/adminviewlogs",element:t.jsx(Vr,{children:t.jsx(QE,{})})}),t.jsx(Br,{path:"/adminviewplan",element:t.jsx(Vr,{children:t.jsx(s8,{})})}),t.jsx(Br,{path:"/adminindividualplan",element:t.jsx(Vr,{children:t.jsx(a8,{})})}),t.jsx(Br,{path:"/adminapprovals",element:t.jsx(Vr,{children:t.jsx(A8,{})})}),t.jsx(Br,{path:"/adminaddplan",element:t.jsx(Vr,{children:t.jsx(l8,{})})}),t.jsx(Br,{path:"/adminaddindividualplan",element:t.jsx(Vr,{children:t.jsx(c8,{})})}),t.jsx(Br,{path:"/admineditplan",element:t.jsx(Vr,{children:t.jsx(d8,{})})}),t.jsx(Br,{path:"/admineditindividualplan/:id",element:t.jsx(Vr,{children:t.jsx(u8,{})})}),t.jsx(Br,{path:"/adminreports",element:t.jsx(Vr,{children:t.jsx(p8,{})})}),t.jsx(Br,{path:"/users",element:t.jsx(Vr,{children:t.jsx(g8,{})})}),t.jsx(Br,{path:"/addusers",element:t.jsx(Vr,{children:t.jsx(h8,{})})}),t.jsx(Br,{path:"/adminalerts",element:t.jsx(Vr,{children:t.jsx(f8,{})})}),t.jsx(Br,{path:"/adminprofile",element:t.jsx(Vr,{children:t.jsx(m8,{})})}),t.jsx(Br,{path:"/secret",element:t.jsx(Vr,{children:t.jsx(y8,{})})})]})})}),w2="https://maxcap.azurewebsites.net/auth",w8={auth:{clientId:"2f33b445-b2d8-42fd-a207-cb167a23bc98",authority:"https://login.microsoftonline.com/7dae6b7e-a024-4264-bf0b-f8cc2bc79204",redirectUri:w2,navigateToLoginRequestUrl:!1},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},_y=new cf(w8);function v8(){const[o,e]=h.useState(!1);return h.useEffect(()=>{console.log(" Clearing old MSAL cache..."),Object.keys(localStorage).forEach(r=>{r.includes("msal")&&!r.includes("sidebar")&&localStorage.removeItem(r)}),_y.initialize().then(()=>{console.log(" MSAL fully initialized"),console.log(" Redirect URI:",w2),e(!0)}).catch(r=>{console.error(" MSAL initialization failed:",r)})},[]),o?t.jsx(h.StrictMode,{children:t.jsx(fE,{instance:_y,children:t.jsx(eB,{children:t.jsx(b8,{})})})}):t.jsx("div",{children:"Loading authentication"})}iC.createRoot(document.getElementById("root")).render(t.jsx(v8,{}));
