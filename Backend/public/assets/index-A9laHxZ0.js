function $C(i,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in i)){const A=Object.getOwnPropertyDescriptor(r,a);A&&Object.defineProperty(i,a,A.get?A:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const A of a)if(A.type==="childList")for(const c of A.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const A={};return a.integrity&&(A.integrity=a.integrity),a.referrerPolicy&&(A.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?A.credentials="include":a.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function r(a){if(a.ep)return;a.ep=!0;const A=t(a);fetch(a.href,A)}})();function YC(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Bp={exports:{}},nA={},Sp={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function JC(){if(Tm)return Rt;Tm=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),y=Symbol.iterator;function b(I){return I===null||typeof I!="object"?null:(I=y&&I[y]||I["@@iterator"],typeof I=="function"?I:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,U={};function E(I,_,Fe){this.props=I,this.context=_,this.refs=U,this.updater=Fe||L}E.prototype.isReactComponent={},E.prototype.setState=function(I,_){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,_,"setState")},E.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function P(){}P.prototype=E.prototype;function O(I,_,Fe){this.props=I,this.context=_,this.refs=U,this.updater=Fe||L}var ve=O.prototype=new P;ve.constructor=O,S(ve,E.prototype),ve.isPureReactComponent=!0;var ce=Array.isArray,Q=Object.prototype.hasOwnProperty,V={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function le(I,_,Fe){var Y,D={},K=null,Te=null;if(_!=null)for(Y in _.ref!==void 0&&(Te=_.ref),_.key!==void 0&&(K=""+_.key),_)Q.call(_,Y)&&!Z.hasOwnProperty(Y)&&(D[Y]=_[Y]);var Ne=arguments.length-2;if(Ne===1)D.children=Fe;else if(1<Ne){for(var G=Array(Ne),W=0;W<Ne;W++)G[W]=arguments[W+2];D.children=G}if(I&&I.defaultProps)for(Y in Ne=I.defaultProps,Ne)D[Y]===void 0&&(D[Y]=Ne[Y]);return{$$typeof:i,type:I,key:K,ref:Te,props:D,_owner:V.current}}function $(I,_){return{$$typeof:i,type:I.type,key:_,ref:I.ref,props:I.props,_owner:I._owner}}function ue(I){return typeof I=="object"&&I!==null&&I.$$typeof===i}function we(I){var _={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(Fe){return _[Fe]})}var ge=/\/+/g;function te(I,_){return typeof I=="object"&&I!==null&&I.key!=null?we(""+I.key):_.toString(36)}function Me(I,_,Fe,Y,D){var K=typeof I;(K==="undefined"||K==="boolean")&&(I=null);var Te=!1;if(I===null)Te=!0;else switch(K){case"string":case"number":Te=!0;break;case"object":switch(I.$$typeof){case i:case e:Te=!0}}if(Te)return Te=I,D=D(Te),I=Y===""?"."+te(Te,0):Y,ce(D)?(Fe="",I!=null&&(Fe=I.replace(ge,"$&/")+"/"),Me(D,_,Fe,"",function(W){return W})):D!=null&&(ue(D)&&(D=$(D,Fe+(!D.key||Te&&Te.key===D.key?"":(""+D.key).replace(ge,"$&/")+"/")+I)),_.push(D)),1;if(Te=0,Y=Y===""?".":Y+":",ce(I))for(var Ne=0;Ne<I.length;Ne++){K=I[Ne];var G=Y+te(K,Ne);Te+=Me(K,_,Fe,G,D)}else if(G=b(I),typeof G=="function")for(I=G.call(I),Ne=0;!(K=I.next()).done;)K=K.value,G=Y+te(K,Ne++),Te+=Me(K,_,Fe,G,D);else if(K==="object")throw _=String(I),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return Te}function ie(I,_,Fe){if(I==null)return I;var Y=[],D=0;return Me(I,Y,"","",function(K){return _.call(Fe,K,D++)}),Y}function me(I){if(I._status===-1){var _=I._result;_=_(),_.then(function(Fe){(I._status===0||I._status===-1)&&(I._status=1,I._result=Fe)},function(Fe){(I._status===0||I._status===-1)&&(I._status=2,I._result=Fe)}),I._status===-1&&(I._status=0,I._result=_)}if(I._status===1)return I._result.default;throw I._result}var N={current:null},be={transition:null},H={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:be,ReactCurrentOwner:V};function M(){throw Error("act(...) is not supported in production builds of React.")}return Rt.Children={map:ie,forEach:function(I,_,Fe){ie(I,function(){_.apply(this,arguments)},Fe)},count:function(I){var _=0;return ie(I,function(){_++}),_},toArray:function(I){return ie(I,function(_){return _})||[]},only:function(I){if(!ue(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Rt.Component=E,Rt.Fragment=t,Rt.Profiler=a,Rt.PureComponent=O,Rt.StrictMode=r,Rt.Suspense=p,Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,Rt.act=M,Rt.cloneElement=function(I,_,Fe){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var Y=S({},I.props),D=I.key,K=I.ref,Te=I._owner;if(_!=null){if(_.ref!==void 0&&(K=_.ref,Te=V.current),_.key!==void 0&&(D=""+_.key),I.type&&I.type.defaultProps)var Ne=I.type.defaultProps;for(G in _)Q.call(_,G)&&!Z.hasOwnProperty(G)&&(Y[G]=_[G]===void 0&&Ne!==void 0?Ne[G]:_[G])}var G=arguments.length-2;if(G===1)Y.children=Fe;else if(1<G){Ne=Array(G);for(var W=0;W<G;W++)Ne[W]=arguments[W+2];Y.children=Ne}return{$$typeof:i,type:I.type,key:D,ref:K,props:Y,_owner:Te}},Rt.createContext=function(I){return I={$$typeof:c,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:A,_context:I},I.Consumer=I},Rt.createElement=le,Rt.createFactory=function(I){var _=le.bind(null,I);return _.type=I,_},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(I){return{$$typeof:u,render:I}},Rt.isValidElement=ue,Rt.lazy=function(I){return{$$typeof:h,_payload:{_status:-1,_result:I},_init:me}},Rt.memo=function(I,_){return{$$typeof:m,type:I,compare:_===void 0?null:_}},Rt.startTransition=function(I){var _=be.transition;be.transition={};try{I()}finally{be.transition=_}},Rt.unstable_act=M,Rt.useCallback=function(I,_){return N.current.useCallback(I,_)},Rt.useContext=function(I){return N.current.useContext(I)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(I){return N.current.useDeferredValue(I)},Rt.useEffect=function(I,_){return N.current.useEffect(I,_)},Rt.useId=function(){return N.current.useId()},Rt.useImperativeHandle=function(I,_,Fe){return N.current.useImperativeHandle(I,_,Fe)},Rt.useInsertionEffect=function(I,_){return N.current.useInsertionEffect(I,_)},Rt.useLayoutEffect=function(I,_){return N.current.useLayoutEffect(I,_)},Rt.useMemo=function(I,_){return N.current.useMemo(I,_)},Rt.useReducer=function(I,_,Fe){return N.current.useReducer(I,_,Fe)},Rt.useRef=function(I){return N.current.useRef(I)},Rt.useState=function(I){return N.current.useState(I)},Rt.useSyncExternalStore=function(I,_,Fe){return N.current.useSyncExternalStore(I,_,Fe)},Rt.useTransition=function(){return N.current.useTransition()},Rt.version="18.3.1",Rt}var jm;function Yh(){return jm||(jm=1,Sp.exports=JC()),Sp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm;function XC(){if(Fm)return nA;Fm=1;var i=Yh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A={key:!0,ref:!0,__self:!0,__source:!0};function c(u,p,m){var h,y={},b=null,L=null;m!==void 0&&(b=""+m),p.key!==void 0&&(b=""+p.key),p.ref!==void 0&&(L=p.ref);for(h in p)r.call(p,h)&&!A.hasOwnProperty(h)&&(y[h]=p[h]);if(u&&u.defaultProps)for(h in p=u.defaultProps,p)y[h]===void 0&&(y[h]=p[h]);return{$$typeof:e,type:u,key:b,ref:L,props:y,_owner:a.current}}return nA.Fragment=t,nA.jsx=c,nA.jsxs=c,nA}var Um;function qC(){return Um||(Um=1,Bp.exports=XC()),Bp.exports}var n=qC(),f=Yh();const ps=YC(f),ZC=$C({__proto__:null,default:ps},[f]);var Kl={},Ip={exports:{}},Br={},Ep={exports:{}},kp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qm;function eB(){return Qm||(Qm=1,function(i){function e(be,H){var M=be.length;be.push(H);e:for(;0<M;){var I=M-1>>>1,_=be[I];if(0<a(_,H))be[I]=H,be[M]=_,M=I;else break e}}function t(be){return be.length===0?null:be[0]}function r(be){if(be.length===0)return null;var H=be[0],M=be.pop();if(M!==H){be[0]=M;e:for(var I=0,_=be.length,Fe=_>>>1;I<Fe;){var Y=2*(I+1)-1,D=be[Y],K=Y+1,Te=be[K];if(0>a(D,M))K<_&&0>a(Te,D)?(be[I]=Te,be[K]=M,I=K):(be[I]=D,be[Y]=M,I=Y);else if(K<_&&0>a(Te,M))be[I]=Te,be[K]=M,I=K;else break e}}return H}function a(be,H){var M=be.sortIndex-H.sortIndex;return M!==0?M:be.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;i.unstable_now=function(){return A.now()}}else{var c=Date,u=c.now();i.unstable_now=function(){return c.now()-u}}var p=[],m=[],h=1,y=null,b=3,L=!1,S=!1,U=!1,E=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ve(be){for(var H=t(m);H!==null;){if(H.callback===null)r(m);else if(H.startTime<=be)r(m),H.sortIndex=H.expirationTime,e(p,H);else break;H=t(m)}}function ce(be){if(U=!1,ve(be),!S)if(t(p)!==null)S=!0,me(Q);else{var H=t(m);H!==null&&N(ce,H.startTime-be)}}function Q(be,H){S=!1,U&&(U=!1,P(le),le=-1),L=!0;var M=b;try{for(ve(H),y=t(p);y!==null&&(!(y.expirationTime>H)||be&&!we());){var I=y.callback;if(typeof I=="function"){y.callback=null,b=y.priorityLevel;var _=I(y.expirationTime<=H);H=i.unstable_now(),typeof _=="function"?y.callback=_:y===t(p)&&r(p),ve(H)}else r(p);y=t(p)}if(y!==null)var Fe=!0;else{var Y=t(m);Y!==null&&N(ce,Y.startTime-H),Fe=!1}return Fe}finally{y=null,b=M,L=!1}}var V=!1,Z=null,le=-1,$=5,ue=-1;function we(){return!(i.unstable_now()-ue<$)}function ge(){if(Z!==null){var be=i.unstable_now();ue=be;var H=!0;try{H=Z(!0,be)}finally{H?te():(V=!1,Z=null)}}else V=!1}var te;if(typeof O=="function")te=function(){O(ge)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,ie=Me.port2;Me.port1.onmessage=ge,te=function(){ie.postMessage(null)}}else te=function(){E(ge,0)};function me(be){Z=be,V||(V=!0,te())}function N(be,H){le=E(function(){be(i.unstable_now())},H)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(be){be.callback=null},i.unstable_continueExecution=function(){S||L||(S=!0,me(Q))},i.unstable_forceFrameRate=function(be){0>be||125<be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<be?Math.floor(1e3/be):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_getFirstCallbackNode=function(){return t(p)},i.unstable_next=function(be){switch(b){case 1:case 2:case 3:var H=3;break;default:H=b}var M=b;b=H;try{return be()}finally{b=M}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(be,H){switch(be){case 1:case 2:case 3:case 4:case 5:break;default:be=3}var M=b;b=be;try{return H()}finally{b=M}},i.unstable_scheduleCallback=function(be,H,M){var I=i.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?I+M:I):M=I,be){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=M+_,be={id:h++,callback:H,priorityLevel:be,startTime:M,expirationTime:_,sortIndex:-1},M>I?(be.sortIndex=M,e(m,be),t(p)===null&&be===t(m)&&(U?(P(le),le=-1):U=!0,N(ce,M-I))):(be.sortIndex=_,e(p,be),S||L||(S=!0,me(Q))),be},i.unstable_shouldYield=we,i.unstable_wrapCallback=function(be){var H=b;return function(){var M=b;b=H;try{return be.apply(this,arguments)}finally{b=M}}}}(kp)),kp}var Rm;function tB(){return Rm||(Rm=1,Ep.exports=eB()),Ep.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function nB(){if(Mm)return Br;Mm=1;var i=Yh(),e=tB();function t(o){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+o,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function A(o,s){c(o,s),c(o+"Capture",s)}function c(o,s){for(a[o]=s,o=0;o<s.length;o++)r.add(s[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},y={};function b(o){return p.call(y,o)?!0:p.call(h,o)?!1:m.test(o)?y[o]=!0:(h[o]=!0,!1)}function L(o,s,l,d){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,s,l,d){if(s===null||typeof s>"u"||L(o,s,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function U(o,s,l,d,g,x,C){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=o,this.type=s,this.sanitizeURL=x,this.removeEmptyString=C}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){E[o]=new U(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var s=o[0];E[s]=new U(s,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){E[o]=new U(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){E[o]=new U(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){E[o]=new U(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){E[o]=new U(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){E[o]=new U(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){E[o]=new U(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){E[o]=new U(o,5,!1,o.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function O(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var s=o.replace(P,O);E[s]=new U(s,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var s=o.replace(P,O);E[s]=new U(s,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var s=o.replace(P,O);E[s]=new U(s,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){E[o]=new U(o,1,!1,o.toLowerCase(),null,!1,!1)}),E.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){E[o]=new U(o,1,!1,o.toLowerCase(),null,!0,!0)});function ve(o,s,l,d){var g=E.hasOwnProperty(s)?E[s]:null;(g!==null?g.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(S(s,l,g,d)&&(l=null),d||g===null?b(s)&&(l===null?o.removeAttribute(s):o.setAttribute(s,""+l)):g.mustUseProperty?o[g.propertyName]=l===null?g.type===3?!1:"":l:(s=g.attributeName,d=g.attributeNamespace,l===null?o.removeAttribute(s):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,d?o.setAttributeNS(d,s,l):o.setAttribute(s,l))))}var ce=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),V=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),we=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),be=Symbol.iterator;function H(o){return o===null||typeof o!="object"?null:(o=be&&o[be]||o["@@iterator"],typeof o=="function"?o:null)}var M=Object.assign,I;function _(o){if(I===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);I=s&&s[1]||""}return`
`+I+o}var Fe=!1;function Y(o,s){if(!o||Fe)return"";Fe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Ee){var d=Ee}Reflect.construct(o,[],s)}else{try{s.call()}catch(Ee){d=Ee}o.call(s.prototype)}else{try{throw Error()}catch(Ee){d=Ee}o()}}catch(Ee){if(Ee&&d&&typeof Ee.stack=="string"){for(var g=Ee.stack.split(`
`),x=d.stack.split(`
`),C=g.length-1,z=x.length-1;1<=C&&0<=z&&g[C]!==x[z];)z--;for(;1<=C&&0<=z;C--,z--)if(g[C]!==x[z]){if(C!==1||z!==1)do if(C--,z--,0>z||g[C]!==x[z]){var q=`
`+g[C].replace(" at new "," at ");return o.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",o.displayName)),q}while(1<=C&&0<=z);break}}}finally{Fe=!1,Error.prepareStackTrace=l}return(o=o?o.displayName||o.name:"")?_(o):""}function D(o){switch(o.tag){case 5:return _(o.type);case 16:return _("Lazy");case 13:return _("Suspense");case 19:return _("SuspenseList");case 0:case 2:case 15:return o=Y(o.type,!1),o;case 11:return o=Y(o.type.render,!1),o;case 1:return o=Y(o.type,!0),o;default:return""}}function K(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case Z:return"Fragment";case V:return"Portal";case $:return"Profiler";case le:return"StrictMode";case te:return"Suspense";case Me:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case we:return(o.displayName||"Context")+".Consumer";case ue:return(o._context.displayName||"Context")+".Provider";case ge:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ie:return s=o.displayName||null,s!==null?s:K(o.type)||"Memo";case me:s=o._payload,o=o._init;try{return K(o(s))}catch{}}return null}function Te(o){var s=o.type;switch(o.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=s.render,o=o.displayName||o.name||"",s.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(s);case 8:return s===le?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ne(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function G(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function W(o){var s=G(o)?"checked":"value",l=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),d=""+o[s];if(!o.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,x=l.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return g.call(this)},set:function(C){d=""+C,x.call(this,C)}}),Object.defineProperty(o,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function j(o){o._valueTracker||(o._valueTracker=W(o))}function F(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return o&&(d=G(o)?o.checked?"true":"false":o.value),o=d,o!==l?(s.setValue(o),!0):!1}function Xe(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function B(o,s){var l=s.checked;return M({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??o._wrapperState.initialChecked})}function ee(o,s){var l=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;l=Ne(s.value!=null?s.value:l),o._wrapperState={initialChecked:d,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Pe(o,s){s=s.checked,s!=null&&ve(o,"checked",s,!1)}function $e(o,s){Pe(o,s);var l=Ne(s.value),d=s.type;if(l!=null)d==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+l):o.value!==""+l&&(o.value=""+l);else if(d==="submit"||d==="reset"){o.removeAttribute("value");return}s.hasOwnProperty("value")?pt(o,s.type,l):s.hasOwnProperty("defaultValue")&&pt(o,s.type,Ne(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(o.defaultChecked=!!s.defaultChecked)}function kt(o,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+o._wrapperState.initialValue,l||s===o.value||(o.value=s),o.defaultValue=s}l=o.name,l!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,l!==""&&(o.name=l)}function pt(o,s,l){(s!=="number"||Xe(o.ownerDocument)!==o)&&(l==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+l&&(o.defaultValue=""+l))}var Ut=Array.isArray;function Lt(o,s,l,d){if(o=o.options,s){s={};for(var g=0;g<l.length;g++)s["$"+l[g]]=!0;for(l=0;l<o.length;l++)g=s.hasOwnProperty("$"+o[l].value),o[l].selected!==g&&(o[l].selected=g),g&&d&&(o[l].defaultSelected=!0)}else{for(l=""+Ne(l),s=null,g=0;g<o.length;g++){if(o[g].value===l){o[g].selected=!0,d&&(o[g].defaultSelected=!0);return}s!==null||o[g].disabled||(s=o[g])}s!==null&&(s.selected=!0)}}function se(o,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return M({},s,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Tt(o,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(Ut(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}o._wrapperState={initialValue:Ne(l)}}function ne(o,s){var l=Ne(s.value),d=Ne(s.defaultValue);l!=null&&(l=""+l,l!==o.value&&(o.value=l),s.defaultValue==null&&o.defaultValue!==l&&(o.defaultValue=l)),d!=null&&(o.defaultValue=""+d)}function fe(o){var s=o.textContent;s===o._wrapperState.initialValue&&s!==""&&s!==null&&(o.value=s)}function Qe(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function w(o,s){return o==null||o==="http://www.w3.org/1999/xhtml"?Qe(s):o==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var qe,ft=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,d,g){MSApp.execUnsafeLocalFunction(function(){return o(s,l,d,g)})}:o}(function(o,s){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=s;else{for(qe=qe||document.createElement("div"),qe.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=qe.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;s.firstChild;)o.appendChild(s.firstChild)}});function Et(o,s){if(s){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=s;return}}o.textContent=s}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R=["Webkit","ms","Moz","O"];Object.keys(pe).forEach(function(o){R.forEach(function(s){s=s+o.charAt(0).toUpperCase()+o.substring(1),pe[s]=pe[o]})});function Ce(o,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||pe.hasOwnProperty(o)&&pe[o]?(""+s).trim():s+"px"}function re(o,s){o=o.style;for(var l in s)if(s.hasOwnProperty(l)){var d=l.indexOf("--")===0,g=Ce(l,s[l],d);l==="float"&&(l="cssFloat"),d?o.setProperty(l,g):o[l]=g}}var xe=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ze(o,s){if(s){if(xe[o]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function J(o,s){if(o.indexOf("-")===-1)return typeof s.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qt=null;function He(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var bn=null,at=null,k=null;function v(o){if(o=_a(o)){if(typeof bn!="function")throw Error(t(280));var s=o.stateNode;s&&(s=il(s),bn(o.stateNode,o.type,s))}}function Ae(o){at?k?k.push(o):k=[o]:at=o}function Ue(){if(at){var o=at,s=k;if(k=at=null,v(o),s)for(o=0;o<s.length;o++)v(s[o])}}function et(o,s){return o(s)}function Ke(){}var yt=!1;function It(o,s,l){if(yt)return o(s,l);yt=!0;try{return et(o,s,l)}finally{yt=!1,(at!==null||k!==null)&&(Ke(),Ue())}}function tt(o,s){var l=o.stateNode;if(l===null)return null;var d=il(l);if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var st=!1;if(u)try{var ye={};Object.defineProperty(ye,"passive",{get:function(){st=!0}}),window.addEventListener("test",ye,ye),window.removeEventListener("test",ye,ye)}catch{st=!1}function ae(o,s,l,d,g,x,C,z,q){var Ee=Array.prototype.slice.call(arguments,3);try{s.apply(l,Ee)}catch(Oe){this.onError(Oe)}}var ze=!1,Ye=null,Qt=!1,$t=null,wn={onError:function(o){ze=!0,Ye=o}};function jt(o,s,l,d,g,x,C,z,q){ze=!1,Ye=null,ae.apply(wn,arguments)}function Hn(o,s,l,d,g,x,C,z,q){if(jt.apply(this,arguments),ze){if(ze){var Ee=Ye;ze=!1,Ye=null}else throw Error(t(198));Qt||(Qt=!0,$t=Ee)}}function vn(o){var s=o,l=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(l=s.return),o=s.return;while(o)}return s.tag===3?l:null}function an(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function Hi(o){if(vn(o)!==o)throw Error(t(188))}function OA(o){var s=o.alternate;if(!s){if(s=vn(o),s===null)throw Error(t(188));return s!==o?null:o}for(var l=o,d=s;;){var g=l.return;if(g===null)break;var x=g.alternate;if(x===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===x.child){for(x=g.child;x;){if(x===l)return Hi(g),o;if(x===d)return Hi(g),s;x=x.sibling}throw Error(t(188))}if(l.return!==d.return)l=g,d=x;else{for(var C=!1,z=g.child;z;){if(z===l){C=!0,l=g,d=x;break}if(z===d){C=!0,d=g,l=x;break}z=z.sibling}if(!C){for(z=x.child;z;){if(z===l){C=!0,l=x,d=g;break}if(z===d){C=!0,d=x,l=g;break}z=z.sibling}if(!C)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?o:s}function Ba(o){return o=OA(o),o!==null?Ni(o):null}function Ni(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var s=Ni(o);if(s!==null)return s;o=o.sibling}return null}var ws=e.unstable_scheduleCallback,Sa=e.unstable_cancelCallback,Kd=e.unstable_shouldYield,Wd=e.unstable_requestPaint,un=e.unstable_now,Ia=e.unstable_getCurrentPriorityLevel,Ea=e.unstable_ImmediatePriority,zA=e.unstable_UserBlockingPriority,vs=e.unstable_NormalPriority,Gd=e.unstable_LowPriority,ka=e.unstable_IdlePriority,_i=null,Hr=null;function Vd(o){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(_i,o,void 0,(o.current.flags&128)===128)}catch{}}var xr=Math.clz32?Math.clz32:KA,$d=Math.log,Yd=Math.LN2;function KA(o){return o>>>=0,o===0?32:31-($d(o)/Yd|0)|0}var Ie=64,Oi=4194304;function Xo(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function zi(o,s){var l=o.pendingLanes;if(l===0)return 0;var d=0,g=o.suspendedLanes,x=o.pingedLanes,C=l&268435455;if(C!==0){var z=C&~g;z!==0?d=Xo(z):(x&=C,x!==0&&(d=Xo(x)))}else C=l&~g,C!==0?d=Xo(C):x!==0&&(d=Xo(x));if(d===0)return 0;if(s!==0&&s!==d&&(s&g)===0&&(g=d&-d,x=s&-s,g>=x||g===16&&(x&4194240)!==0))return s;if((d&4)!==0&&(d|=l&16),s=o.entangledLanes,s!==0)for(o=o.entanglements,s&=d;0<s;)l=31-xr(s),g=1<<l,d|=o[l],s&=~g;return d}function WA(o,s){switch(o){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T(o,s){for(var l=o.suspendedLanes,d=o.pingedLanes,g=o.expirationTimes,x=o.pendingLanes;0<x;){var C=31-xr(x),z=1<<C,q=g[C];q===-1?((z&l)===0||(z&d)!==0)&&(g[C]=WA(z,s)):q<=s&&(o.expiredLanes|=z),x&=~z}}function de(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function je(){var o=Ie;return Ie<<=1,(Ie&4194240)===0&&(Ie=64),o}function De(o){for(var s=[],l=0;31>l;l++)s.push(o);return s}function vt(o,s,l){o.pendingLanes|=s,s!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,s=31-xr(s),o[s]=l}function Ot(o,s){var l=o.pendingLanes&~s;o.pendingLanes=s,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=s,o.mutableReadLanes&=s,o.entangledLanes&=s,s=o.entanglements;var d=o.eventTimes;for(o=o.expirationTimes;0<l;){var g=31-xr(l),x=1<<g;s[g]=0,d[g]=-1,o[g]=-1,l&=~x}}function ht(o,s){var l=o.entangledLanes|=s;for(o=o.entanglements;l;){var d=31-xr(l),g=1<<d;g&s|o[d]&s&&(o[d]|=s),l&=~g}}var Ve=0;function Wt(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var fn,cr,Xr,dt,St,pn=!1,dr=[],Nn=null,qr=null,Ct=null,_t=new Map,Pt=new Map,Zt=[],mo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xo(o,s){switch(o){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":_t.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(s.pointerId)}}function Fo(o,s,l,d,g,x){return o===null||o.nativeEvent!==x?(o={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:x,targetContainers:[g]},s!==null&&(s=_a(s),s!==null&&cr(s)),o):(o.eventSystemFlags|=d,s=o.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),o)}function Ta(o,s,l,d,g){switch(s){case"focusin":return Nn=Fo(Nn,o,s,l,d,g),!0;case"dragenter":return qr=Fo(qr,o,s,l,d,g),!0;case"mouseover":return Ct=Fo(Ct,o,s,l,d,g),!0;case"pointerover":var x=g.pointerId;return _t.set(x,Fo(_t.get(x)||null,o,s,l,d,g)),!0;case"gotpointercapture":return x=g.pointerId,Pt.set(x,Fo(Pt.get(x)||null,o,s,l,d,g)),!0}return!1}function qo(o){var s=Gi(o.target);if(s!==null){var l=vn(s);if(l!==null){if(s=l.tag,s===13){if(s=an(l),s!==null){o.blockedOn=s,St(o.priority,function(){Xr(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Zo(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var l=Xd(o.domEventName,o.eventSystemFlags,s[0],o.nativeEvent);if(l===null){l=o.nativeEvent;var d=new l.constructor(l.type,l);qt=d,l.target.dispatchEvent(d),qt=null}else return s=_a(l),s!==null&&cr(s),o.blockedOn=l,!1;s.shift()}return!0}function Cs(o,s,l){Zo(o)&&l.delete(s)}function Ki(){pn=!1,Nn!==null&&Zo(Nn)&&(Nn=null),qr!==null&&Zo(qr)&&(qr=null),Ct!==null&&Zo(Ct)&&(Ct=null),_t.forEach(Cs),Pt.forEach(Cs)}function Wi(o,s){o.blockedOn===s&&(o.blockedOn=null,pn||(pn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ki)))}function Uo(o){function s(g){return Wi(g,o)}if(0<dr.length){Wi(dr[0],o);for(var l=1;l<dr.length;l++){var d=dr[l];d.blockedOn===o&&(d.blockedOn=null)}}for(Nn!==null&&Wi(Nn,o),qr!==null&&Wi(qr,o),Ct!==null&&Wi(Ct,o),_t.forEach(s),Pt.forEach(s),l=0;l<Zt.length;l++)d=Zt[l],d.blockedOn===o&&(d.blockedOn=null);for(;0<Zt.length&&(l=Zt[0],l.blockedOn===null);)qo(l),l.blockedOn===null&&Zt.shift()}var Bs=ce.ReactCurrentBatchConfig,GA=!0;function yv(o,s,l,d){var g=Ve,x=Bs.transition;Bs.transition=null;try{Ve=1,Jd(o,s,l,d)}finally{Ve=g,Bs.transition=x}}function bv(o,s,l,d){var g=Ve,x=Bs.transition;Bs.transition=null;try{Ve=4,Jd(o,s,l,d)}finally{Ve=g,Bs.transition=x}}function Jd(o,s,l,d){if(GA){var g=Xd(o,s,l,d);if(g===null)hu(o,s,d,VA,l),xo(o,d);else if(Ta(g,o,s,l,d))d.stopPropagation();else if(xo(o,d),s&4&&-1<mo.indexOf(o)){for(;g!==null;){var x=_a(g);if(x!==null&&fn(x),x=Xd(o,s,l,d),x===null&&hu(o,s,d,VA,l),x===g)break;g=x}g!==null&&d.stopPropagation()}else hu(o,s,d,null,l)}}var VA=null;function Xd(o,s,l,d){if(VA=null,o=He(d),o=Gi(o),o!==null)if(s=vn(o),s===null)o=null;else if(l=s.tag,l===13){if(o=an(s),o!==null)return o;o=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null);return VA=o,null}function gf(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ia()){case Ea:return 1;case zA:return 4;case vs:case Gd:return 16;case ka:return 536870912;default:return 16}default:return 16}}var ei=null,qd=null,$A=null;function ff(){if($A)return $A;var o,s=qd,l=s.length,d,g="value"in ei?ei.value:ei.textContent,x=g.length;for(o=0;o<l&&s[o]===g[o];o++);var C=l-o;for(d=1;d<=C&&s[l-d]===g[x-d];d++);return $A=g.slice(o,1<d?1-d:void 0)}function YA(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function JA(){return!0}function mf(){return!1}function jr(o){function s(l,d,g,x,C){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=x,this.target=C,this.currentTarget=null;for(var z in o)o.hasOwnProperty(z)&&(l=o[z],this[z]=l?l(x):x[z]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?JA:mf,this.isPropagationStopped=mf,this}return M(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=JA)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=JA)},persist:function(){},isPersistent:JA}),s}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zd=jr(Ss),ja=M({},Ss,{view:0,detail:0}),wv=jr(ja),eu,tu,Fa,XA=M({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ru,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Fa&&(Fa&&o.type==="mousemove"?(eu=o.screenX-Fa.screenX,tu=o.screenY-Fa.screenY):tu=eu=0,Fa=o),eu)},movementY:function(o){return"movementY"in o?o.movementY:tu}}),xf=jr(XA),vv=M({},XA,{dataTransfer:0}),Cv=jr(vv),Bv=M({},ja,{relatedTarget:0}),nu=jr(Bv),Sv=M({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),Iv=jr(Sv),Ev=M({},Ss,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),kv=jr(Ev),Tv=M({},Ss,{data:0}),yf=jr(Tv),jv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qv(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=Uv[o])?!!s[o]:!1}function ru(){return Qv}var Rv=M({},ja,{key:function(o){if(o.key){var s=jv[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=YA(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Fv[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ru,charCode:function(o){return o.type==="keypress"?YA(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?YA(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Mv=jr(Rv),Lv=M({},XA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bf=jr(Lv),Dv=M({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ru}),Pv=jr(Dv),Hv=M({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nv=jr(Hv),_v=M({},XA,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Ov=jr(_v),zv=[9,13,27,32],ou=u&&"CompositionEvent"in window,Ua=null;u&&"documentMode"in document&&(Ua=document.documentMode);var Kv=u&&"TextEvent"in window&&!Ua,wf=u&&(!ou||Ua&&8<Ua&&11>=Ua),vf=" ",Cf=!1;function Bf(o,s){switch(o){case"keyup":return zv.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sf(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Is=!1;function Wv(o,s){switch(o){case"compositionend":return Sf(s);case"keypress":return s.which!==32?null:(Cf=!0,vf);case"textInput":return o=s.data,o===vf&&Cf?null:o;default:return null}}function Gv(o,s){if(Is)return o==="compositionend"||!ou&&Bf(o,s)?(o=ff(),$A=qd=ei=null,Is=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return wf&&s.locale!=="ko"?null:s.data;default:return null}}var Vv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function If(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!Vv[o.type]:s==="textarea"}function Ef(o,s,l,d){Ae(d),s=nl(s,"onChange"),0<s.length&&(l=new Zd("onChange","change",null,l,d),o.push({event:l,listeners:s}))}var Qa=null,Ra=null;function $v(o){Wf(o,0)}function qA(o){var s=Fs(o);if(F(s))return o}function Yv(o,s){if(o==="change")return s}var kf=!1;if(u){var iu;if(u){var su="oninput"in document;if(!su){var Tf=document.createElement("div");Tf.setAttribute("oninput","return;"),su=typeof Tf.oninput=="function"}iu=su}else iu=!1;kf=iu&&(!document.documentMode||9<document.documentMode)}function jf(){Qa&&(Qa.detachEvent("onpropertychange",Ff),Ra=Qa=null)}function Ff(o){if(o.propertyName==="value"&&qA(Ra)){var s=[];Ef(s,Ra,o,He(o)),It($v,s)}}function Jv(o,s,l){o==="focusin"?(jf(),Qa=s,Ra=l,Qa.attachEvent("onpropertychange",Ff)):o==="focusout"&&jf()}function Xv(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return qA(Ra)}function qv(o,s){if(o==="click")return qA(s)}function Zv(o,s){if(o==="input"||o==="change")return qA(s)}function eC(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var Zr=typeof Object.is=="function"?Object.is:eC;function Ma(o,s){if(Zr(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var l=Object.keys(o),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!p.call(s,g)||!Zr(o[g],s[g]))return!1}return!0}function Uf(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Qf(o,s){var l=Uf(o);o=0;for(var d;l;){if(l.nodeType===3){if(d=o+l.textContent.length,o<=s&&d>=s)return{node:l,offset:s-o};o=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Uf(l)}}function Rf(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?Rf(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function Mf(){for(var o=window,s=Xe();s instanceof o.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)o=s.contentWindow;else break;s=Xe(o.document)}return s}function au(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}function tC(o){var s=Mf(),l=o.focusedElem,d=o.selectionRange;if(s!==l&&l&&l.ownerDocument&&Rf(l.ownerDocument.documentElement,l)){if(d!==null&&au(l)){if(s=d.start,o=d.end,o===void 0&&(o=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(o,l.value.length);else if(o=(s=l.ownerDocument||document)&&s.defaultView||window,o.getSelection){o=o.getSelection();var g=l.textContent.length,x=Math.min(d.start,g);d=d.end===void 0?x:Math.min(d.end,g),!o.extend&&x>d&&(g=d,d=x,x=g),g=Qf(l,x);var C=Qf(l,d);g&&C&&(o.rangeCount!==1||o.anchorNode!==g.node||o.anchorOffset!==g.offset||o.focusNode!==C.node||o.focusOffset!==C.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),o.removeAllRanges(),x>d?(o.addRange(s),o.extend(C.node,C.offset)):(s.setEnd(C.node,C.offset),o.addRange(s)))}}for(s=[],o=l;o=o.parentNode;)o.nodeType===1&&s.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)o=s[l],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var nC=u&&"documentMode"in document&&11>=document.documentMode,Es=null,Au=null,La=null,lu=!1;function Lf(o,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;lu||Es==null||Es!==Xe(d)||(d=Es,"selectionStart"in d&&au(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),La&&Ma(La,d)||(La=d,d=nl(Au,"onSelect"),0<d.length&&(s=new Zd("onSelect","select",null,s,l),o.push({event:s,listeners:d}),s.target=Es)))}function ZA(o,s){var l={};return l[o.toLowerCase()]=s.toLowerCase(),l["Webkit"+o]="webkit"+s,l["Moz"+o]="moz"+s,l}var ks={animationend:ZA("Animation","AnimationEnd"),animationiteration:ZA("Animation","AnimationIteration"),animationstart:ZA("Animation","AnimationStart"),transitionend:ZA("Transition","TransitionEnd")},cu={},Df={};u&&(Df=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function el(o){if(cu[o])return cu[o];if(!ks[o])return o;var s=ks[o],l;for(l in s)if(s.hasOwnProperty(l)&&l in Df)return cu[o]=s[l];return o}var Pf=el("animationend"),Hf=el("animationiteration"),Nf=el("animationstart"),_f=el("transitionend"),Of=new Map,zf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(o,s){Of.set(o,s),A(s,[o])}for(var du=0;du<zf.length;du++){var uu=zf[du],rC=uu.toLowerCase(),oC=uu[0].toUpperCase()+uu.slice(1);ti(rC,"on"+oC)}ti(Pf,"onAnimationEnd"),ti(Hf,"onAnimationIteration"),ti(Nf,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(_f,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),A("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),A("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),A("onBeforeInput",["compositionend","keypress","textInput","paste"]),A("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),A("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),A("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Da));function Kf(o,s,l){var d=o.type||"unknown-event";o.currentTarget=l,Hn(d,s,void 0,o),o.currentTarget=null}function Wf(o,s){s=(s&4)!==0;for(var l=0;l<o.length;l++){var d=o[l],g=d.event;d=d.listeners;e:{var x=void 0;if(s)for(var C=d.length-1;0<=C;C--){var z=d[C],q=z.instance,Ee=z.currentTarget;if(z=z.listener,q!==x&&g.isPropagationStopped())break e;Kf(g,z,Ee),x=q}else for(C=0;C<d.length;C++){if(z=d[C],q=z.instance,Ee=z.currentTarget,z=z.listener,q!==x&&g.isPropagationStopped())break e;Kf(g,z,Ee),x=q}}}if(Qt)throw o=$t,Qt=!1,$t=null,o}function on(o,s){var l=s[bu];l===void 0&&(l=s[bu]=new Set);var d=o+"__bubble";l.has(d)||(Gf(s,o,2,!1),l.add(d))}function pu(o,s,l){var d=0;s&&(d|=4),Gf(l,o,d,s)}var tl="_reactListening"+Math.random().toString(36).slice(2);function Pa(o){if(!o[tl]){o[tl]=!0,r.forEach(function(l){l!=="selectionchange"&&(iC.has(l)||pu(l,!1,o),pu(l,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[tl]||(s[tl]=!0,pu("selectionchange",!1,s))}}function Gf(o,s,l,d){switch(gf(s)){case 1:var g=yv;break;case 4:g=bv;break;default:g=Jd}l=g.bind(null,s,l,o),g=void 0,!st||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),d?g!==void 0?o.addEventListener(s,l,{capture:!0,passive:g}):o.addEventListener(s,l,!0):g!==void 0?o.addEventListener(s,l,{passive:g}):o.addEventListener(s,l,!1)}function hu(o,s,l,d,g){var x=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var z=d.stateNode.containerInfo;if(z===g||z.nodeType===8&&z.parentNode===g)break;if(C===4)for(C=d.return;C!==null;){var q=C.tag;if((q===3||q===4)&&(q=C.stateNode.containerInfo,q===g||q.nodeType===8&&q.parentNode===g))return;C=C.return}for(;z!==null;){if(C=Gi(z),C===null)return;if(q=C.tag,q===5||q===6){d=x=C;continue e}z=z.parentNode}}d=d.return}It(function(){var Ee=x,Oe=He(l),We=[];e:{var _e=Of.get(o);if(_e!==void 0){var ot=Zd,ct=o;switch(o){case"keypress":if(YA(l)===0)break e;case"keydown":case"keyup":ot=Mv;break;case"focusin":ct="focus",ot=nu;break;case"focusout":ct="blur",ot=nu;break;case"beforeblur":case"afterblur":ot=nu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Cv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Pv;break;case Pf:case Hf:case Nf:ot=Iv;break;case _f:ot=Nv;break;case"scroll":ot=wv;break;case"wheel":ot=Ov;break;case"copy":case"cut":case"paste":ot=kv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=bf}var ut=(s&4)!==0,Cn=!ut&&o==="scroll",Be=ut?_e!==null?_e+"Capture":null:_e;ut=[];for(var he=Ee,Se;he!==null;){Se=he;var Je=Se.stateNode;if(Se.tag===5&&Je!==null&&(Se=Je,Be!==null&&(Je=tt(he,Be),Je!=null&&ut.push(Ha(he,Je,Se)))),Cn)break;he=he.return}0<ut.length&&(_e=new ot(_e,ct,null,l,Oe),We.push({event:_e,listeners:ut}))}}if((s&7)===0){e:{if(_e=o==="mouseover"||o==="pointerover",ot=o==="mouseout"||o==="pointerout",_e&&l!==qt&&(ct=l.relatedTarget||l.fromElement)&&(Gi(ct)||ct[Qo]))break e;if((ot||_e)&&(_e=Oe.window===Oe?Oe:(_e=Oe.ownerDocument)?_e.defaultView||_e.parentWindow:window,ot?(ct=l.relatedTarget||l.toElement,ot=Ee,ct=ct?Gi(ct):null,ct!==null&&(Cn=vn(ct),ct!==Cn||ct.tag!==5&&ct.tag!==6)&&(ct=null)):(ot=null,ct=Ee),ot!==ct)){if(ut=xf,Je="onMouseLeave",Be="onMouseEnter",he="mouse",(o==="pointerout"||o==="pointerover")&&(ut=bf,Je="onPointerLeave",Be="onPointerEnter",he="pointer"),Cn=ot==null?_e:Fs(ot),Se=ct==null?_e:Fs(ct),_e=new ut(Je,he+"leave",ot,l,Oe),_e.target=Cn,_e.relatedTarget=Se,Je=null,Gi(Oe)===Ee&&(ut=new ut(Be,he+"enter",ct,l,Oe),ut.target=Se,ut.relatedTarget=Cn,Je=ut),Cn=Je,ot&&ct)t:{for(ut=ot,Be=ct,he=0,Se=ut;Se;Se=Ts(Se))he++;for(Se=0,Je=Be;Je;Je=Ts(Je))Se++;for(;0<he-Se;)ut=Ts(ut),he--;for(;0<Se-he;)Be=Ts(Be),Se--;for(;he--;){if(ut===Be||Be!==null&&ut===Be.alternate)break t;ut=Ts(ut),Be=Ts(Be)}ut=null}else ut=null;ot!==null&&Vf(We,_e,ot,ut,!1),ct!==null&&Cn!==null&&Vf(We,Cn,ct,ut,!0)}}e:{if(_e=Ee?Fs(Ee):window,ot=_e.nodeName&&_e.nodeName.toLowerCase(),ot==="select"||ot==="input"&&_e.type==="file")var gt=Yv;else if(If(_e))if(kf)gt=Zv;else{gt=Xv;var bt=Jv}else(ot=_e.nodeName)&&ot.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(gt=qv);if(gt&&(gt=gt(o,Ee))){Ef(We,gt,l,Oe);break e}bt&&bt(o,_e,Ee),o==="focusout"&&(bt=_e._wrapperState)&&bt.controlled&&_e.type==="number"&&pt(_e,"number",_e.value)}switch(bt=Ee?Fs(Ee):window,o){case"focusin":(If(bt)||bt.contentEditable==="true")&&(Es=bt,Au=Ee,La=null);break;case"focusout":La=Au=Es=null;break;case"mousedown":lu=!0;break;case"contextmenu":case"mouseup":case"dragend":lu=!1,Lf(We,l,Oe);break;case"selectionchange":if(nC)break;case"keydown":case"keyup":Lf(We,l,Oe)}var wt;if(ou)e:{switch(o){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else Is?Bf(o,l)&&(Bt="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(Bt="onCompositionStart");Bt&&(wf&&l.locale!=="ko"&&(Is||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&Is&&(wt=ff()):(ei=Oe,qd="value"in ei?ei.value:ei.textContent,Is=!0)),bt=nl(Ee,Bt),0<bt.length&&(Bt=new yf(Bt,o,null,l,Oe),We.push({event:Bt,listeners:bt}),wt?Bt.data=wt:(wt=Sf(l),wt!==null&&(Bt.data=wt)))),(wt=Kv?Wv(o,l):Gv(o,l))&&(Ee=nl(Ee,"onBeforeInput"),0<Ee.length&&(Oe=new yf("onBeforeInput","beforeinput",null,l,Oe),We.push({event:Oe,listeners:Ee}),Oe.data=wt))}Wf(We,s)})}function Ha(o,s,l){return{instance:o,listener:s,currentTarget:l}}function nl(o,s){for(var l=s+"Capture",d=[];o!==null;){var g=o,x=g.stateNode;g.tag===5&&x!==null&&(g=x,x=tt(o,l),x!=null&&d.unshift(Ha(o,x,g)),x=tt(o,s),x!=null&&d.push(Ha(o,x,g))),o=o.return}return d}function Ts(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Vf(o,s,l,d,g){for(var x=s._reactName,C=[];l!==null&&l!==d;){var z=l,q=z.alternate,Ee=z.stateNode;if(q!==null&&q===d)break;z.tag===5&&Ee!==null&&(z=Ee,g?(q=tt(l,x),q!=null&&C.unshift(Ha(l,q,z))):g||(q=tt(l,x),q!=null&&C.push(Ha(l,q,z)))),l=l.return}C.length!==0&&o.push({event:s,listeners:C})}var sC=/\r\n?/g,aC=/\u0000|\uFFFD/g;function $f(o){return(typeof o=="string"?o:""+o).replace(sC,`
`).replace(aC,"")}function rl(o,s,l){if(s=$f(s),$f(o)!==s&&l)throw Error(t(425))}function ol(){}var gu=null,fu=null;function mu(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var xu=typeof setTimeout=="function"?setTimeout:void 0,AC=typeof clearTimeout=="function"?clearTimeout:void 0,Yf=typeof Promise=="function"?Promise:void 0,lC=typeof queueMicrotask=="function"?queueMicrotask:typeof Yf<"u"?function(o){return Yf.resolve(null).then(o).catch(cC)}:xu;function cC(o){setTimeout(function(){throw o})}function yu(o,s){var l=s,d=0;do{var g=l.nextSibling;if(o.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(d===0){o.removeChild(g),Uo(s);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=g}while(l);Uo(s)}function ni(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return o}function Jf(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return o;s--}else l==="/$"&&s++}o=o.previousSibling}return null}var js=Math.random().toString(36).slice(2),yo="__reactFiber$"+js,Na="__reactProps$"+js,Qo="__reactContainer$"+js,bu="__reactEvents$"+js,dC="__reactListeners$"+js,uC="__reactHandles$"+js;function Gi(o){var s=o[yo];if(s)return s;for(var l=o.parentNode;l;){if(s=l[Qo]||l[yo]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(o=Jf(o);o!==null;){if(l=o[yo])return l;o=Jf(o)}return s}o=l,l=o.parentNode}return null}function _a(o){return o=o[yo]||o[Qo],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Fs(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function il(o){return o[Na]||null}var wu=[],Us=-1;function ri(o){return{current:o}}function sn(o){0>Us||(o.current=wu[Us],wu[Us]=null,Us--)}function nn(o,s){Us++,wu[Us]=o.current,o.current=s}var oi={},tr=ri(oi),yr=ri(!1),Vi=oi;function Qs(o,s){var l=o.type.contextTypes;if(!l)return oi;var d=o.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var g={},x;for(x in l)g[x]=s[x];return d&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=s,o.__reactInternalMemoizedMaskedChildContext=g),g}function br(o){return o=o.childContextTypes,o!=null}function sl(){sn(yr),sn(tr)}function Xf(o,s,l){if(tr.current!==oi)throw Error(t(168));nn(tr,s),nn(yr,l)}function qf(o,s,l){var d=o.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var g in d)if(!(g in s))throw Error(t(108,Te(o)||"Unknown",g));return M({},l,d)}function al(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||oi,Vi=tr.current,nn(tr,o),nn(yr,yr.current),!0}function Zf(o,s,l){var d=o.stateNode;if(!d)throw Error(t(169));l?(o=qf(o,s,Vi),d.__reactInternalMemoizedMergedChildContext=o,sn(yr),sn(tr),nn(tr,o)):sn(yr),nn(yr,l)}var Ro=null,Al=!1,vu=!1;function e0(o){Ro===null?Ro=[o]:Ro.push(o)}function pC(o){Al=!0,e0(o)}function ii(){if(!vu&&Ro!==null){vu=!0;var o=0,s=Ve;try{var l=Ro;for(Ve=1;o<l.length;o++){var d=l[o];do d=d(!0);while(d!==null)}Ro=null,Al=!1}catch(g){throw Ro!==null&&(Ro=Ro.slice(o+1)),ws(Ea,ii),g}finally{Ve=s,vu=!1}}return null}var Rs=[],Ms=0,ll=null,cl=0,Nr=[],_r=0,$i=null,Mo=1,Lo="";function Yi(o,s){Rs[Ms++]=cl,Rs[Ms++]=ll,ll=o,cl=s}function t0(o,s,l){Nr[_r++]=Mo,Nr[_r++]=Lo,Nr[_r++]=$i,$i=o;var d=Mo;o=Lo;var g=32-xr(d)-1;d&=~(1<<g),l+=1;var x=32-xr(s)+g;if(30<x){var C=g-g%5;x=(d&(1<<C)-1).toString(32),d>>=C,g-=C,Mo=1<<32-xr(s)+g|l<<g|d,Lo=x+o}else Mo=1<<x|l<<g|d,Lo=o}function Cu(o){o.return!==null&&(Yi(o,1),t0(o,1,0))}function Bu(o){for(;o===ll;)ll=Rs[--Ms],Rs[Ms]=null,cl=Rs[--Ms],Rs[Ms]=null;for(;o===$i;)$i=Nr[--_r],Nr[_r]=null,Lo=Nr[--_r],Nr[_r]=null,Mo=Nr[--_r],Nr[_r]=null}var Fr=null,Ur=null,An=!1,eo=null;function n0(o,s){var l=Wr(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=o,s=o.deletions,s===null?(o.deletions=[l],o.flags|=16):s.push(l)}function r0(o,s){switch(o.tag){case 5:var l=o.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(o.stateNode=s,Fr=o,Ur=ni(s.firstChild),!0):!1;case 6:return s=o.pendingProps===""||s.nodeType!==3?null:s,s!==null?(o.stateNode=s,Fr=o,Ur=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=$i!==null?{id:Mo,overflow:Lo}:null,o.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Wr(18,null,null,0),l.stateNode=s,l.return=o,o.child=l,Fr=o,Ur=null,!0):!1;default:return!1}}function Su(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Iu(o){if(An){var s=Ur;if(s){var l=s;if(!r0(o,s)){if(Su(o))throw Error(t(418));s=ni(l.nextSibling);var d=Fr;s&&r0(o,s)?n0(d,l):(o.flags=o.flags&-4097|2,An=!1,Fr=o)}}else{if(Su(o))throw Error(t(418));o.flags=o.flags&-4097|2,An=!1,Fr=o}}}function o0(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Fr=o}function dl(o){if(o!==Fr)return!1;if(!An)return o0(o),An=!0,!1;var s;if((s=o.tag!==3)&&!(s=o.tag!==5)&&(s=o.type,s=s!=="head"&&s!=="body"&&!mu(o.type,o.memoizedProps)),s&&(s=Ur)){if(Su(o))throw i0(),Error(t(418));for(;s;)n0(o,s),s=ni(s.nextSibling)}if(o0(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="/$"){if(s===0){Ur=ni(o.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}o=o.nextSibling}Ur=null}}else Ur=Fr?ni(o.stateNode.nextSibling):null;return!0}function i0(){for(var o=Ur;o;)o=ni(o.nextSibling)}function Ls(){Ur=Fr=null,An=!1}function Eu(o){eo===null?eo=[o]:eo.push(o)}var hC=ce.ReactCurrentBatchConfig;function Oa(o,s,l){if(o=l.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,o));var g=d,x=""+o;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===x?s.ref:(s=function(C){var z=g.refs;C===null?delete z[x]:z[x]=C},s._stringRef=x,s)}if(typeof o!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,o))}return o}function ul(o,s){throw o=Object.prototype.toString.call(s),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o))}function s0(o){var s=o._init;return s(o._payload)}function a0(o){function s(Be,he){if(o){var Se=Be.deletions;Se===null?(Be.deletions=[he],Be.flags|=16):Se.push(he)}}function l(Be,he){if(!o)return null;for(;he!==null;)s(Be,he),he=he.sibling;return null}function d(Be,he){for(Be=new Map;he!==null;)he.key!==null?Be.set(he.key,he):Be.set(he.index,he),he=he.sibling;return Be}function g(Be,he){return Be=pi(Be,he),Be.index=0,Be.sibling=null,Be}function x(Be,he,Se){return Be.index=Se,o?(Se=Be.alternate,Se!==null?(Se=Se.index,Se<he?(Be.flags|=2,he):Se):(Be.flags|=2,he)):(Be.flags|=1048576,he)}function C(Be){return o&&Be.alternate===null&&(Be.flags|=2),Be}function z(Be,he,Se,Je){return he===null||he.tag!==6?(he=xp(Se,Be.mode,Je),he.return=Be,he):(he=g(he,Se),he.return=Be,he)}function q(Be,he,Se,Je){var gt=Se.type;return gt===Z?Oe(Be,he,Se.props.children,Je,Se.key):he!==null&&(he.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===me&&s0(gt)===he.type)?(Je=g(he,Se.props),Je.ref=Oa(Be,he,Se),Je.return=Be,Je):(Je=Ll(Se.type,Se.key,Se.props,null,Be.mode,Je),Je.ref=Oa(Be,he,Se),Je.return=Be,Je)}function Ee(Be,he,Se,Je){return he===null||he.tag!==4||he.stateNode.containerInfo!==Se.containerInfo||he.stateNode.implementation!==Se.implementation?(he=yp(Se,Be.mode,Je),he.return=Be,he):(he=g(he,Se.children||[]),he.return=Be,he)}function Oe(Be,he,Se,Je,gt){return he===null||he.tag!==7?(he=rs(Se,Be.mode,Je,gt),he.return=Be,he):(he=g(he,Se),he.return=Be,he)}function We(Be,he,Se){if(typeof he=="string"&&he!==""||typeof he=="number")return he=xp(""+he,Be.mode,Se),he.return=Be,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case Q:return Se=Ll(he.type,he.key,he.props,null,Be.mode,Se),Se.ref=Oa(Be,null,he),Se.return=Be,Se;case V:return he=yp(he,Be.mode,Se),he.return=Be,he;case me:var Je=he._init;return We(Be,Je(he._payload),Se)}if(Ut(he)||H(he))return he=rs(he,Be.mode,Se,null),he.return=Be,he;ul(Be,he)}return null}function _e(Be,he,Se,Je){var gt=he!==null?he.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number")return gt!==null?null:z(Be,he,""+Se,Je);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case Q:return Se.key===gt?q(Be,he,Se,Je):null;case V:return Se.key===gt?Ee(Be,he,Se,Je):null;case me:return gt=Se._init,_e(Be,he,gt(Se._payload),Je)}if(Ut(Se)||H(Se))return gt!==null?null:Oe(Be,he,Se,Je,null);ul(Be,Se)}return null}function ot(Be,he,Se,Je,gt){if(typeof Je=="string"&&Je!==""||typeof Je=="number")return Be=Be.get(Se)||null,z(he,Be,""+Je,gt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case Q:return Be=Be.get(Je.key===null?Se:Je.key)||null,q(he,Be,Je,gt);case V:return Be=Be.get(Je.key===null?Se:Je.key)||null,Ee(he,Be,Je,gt);case me:var bt=Je._init;return ot(Be,he,Se,bt(Je._payload),gt)}if(Ut(Je)||H(Je))return Be=Be.get(Se)||null,Oe(he,Be,Je,gt,null);ul(he,Je)}return null}function ct(Be,he,Se,Je){for(var gt=null,bt=null,wt=he,Bt=he=0,zn=null;wt!==null&&Bt<Se.length;Bt++){wt.index>Bt?(zn=wt,wt=null):zn=wt.sibling;var Ht=_e(Be,wt,Se[Bt],Je);if(Ht===null){wt===null&&(wt=zn);break}o&&wt&&Ht.alternate===null&&s(Be,wt),he=x(Ht,he,Bt),bt===null?gt=Ht:bt.sibling=Ht,bt=Ht,wt=zn}if(Bt===Se.length)return l(Be,wt),An&&Yi(Be,Bt),gt;if(wt===null){for(;Bt<Se.length;Bt++)wt=We(Be,Se[Bt],Je),wt!==null&&(he=x(wt,he,Bt),bt===null?gt=wt:bt.sibling=wt,bt=wt);return An&&Yi(Be,Bt),gt}for(wt=d(Be,wt);Bt<Se.length;Bt++)zn=ot(wt,Be,Bt,Se[Bt],Je),zn!==null&&(o&&zn.alternate!==null&&wt.delete(zn.key===null?Bt:zn.key),he=x(zn,he,Bt),bt===null?gt=zn:bt.sibling=zn,bt=zn);return o&&wt.forEach(function(hi){return s(Be,hi)}),An&&Yi(Be,Bt),gt}function ut(Be,he,Se,Je){var gt=H(Se);if(typeof gt!="function")throw Error(t(150));if(Se=gt.call(Se),Se==null)throw Error(t(151));for(var bt=gt=null,wt=he,Bt=he=0,zn=null,Ht=Se.next();wt!==null&&!Ht.done;Bt++,Ht=Se.next()){wt.index>Bt?(zn=wt,wt=null):zn=wt.sibling;var hi=_e(Be,wt,Ht.value,Je);if(hi===null){wt===null&&(wt=zn);break}o&&wt&&hi.alternate===null&&s(Be,wt),he=x(hi,he,Bt),bt===null?gt=hi:bt.sibling=hi,bt=hi,wt=zn}if(Ht.done)return l(Be,wt),An&&Yi(Be,Bt),gt;if(wt===null){for(;!Ht.done;Bt++,Ht=Se.next())Ht=We(Be,Ht.value,Je),Ht!==null&&(he=x(Ht,he,Bt),bt===null?gt=Ht:bt.sibling=Ht,bt=Ht);return An&&Yi(Be,Bt),gt}for(wt=d(Be,wt);!Ht.done;Bt++,Ht=Se.next())Ht=ot(wt,Be,Bt,Ht.value,Je),Ht!==null&&(o&&Ht.alternate!==null&&wt.delete(Ht.key===null?Bt:Ht.key),he=x(Ht,he,Bt),bt===null?gt=Ht:bt.sibling=Ht,bt=Ht);return o&&wt.forEach(function(VC){return s(Be,VC)}),An&&Yi(Be,Bt),gt}function Cn(Be,he,Se,Je){if(typeof Se=="object"&&Se!==null&&Se.type===Z&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case Q:e:{for(var gt=Se.key,bt=he;bt!==null;){if(bt.key===gt){if(gt=Se.type,gt===Z){if(bt.tag===7){l(Be,bt.sibling),he=g(bt,Se.props.children),he.return=Be,Be=he;break e}}else if(bt.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===me&&s0(gt)===bt.type){l(Be,bt.sibling),he=g(bt,Se.props),he.ref=Oa(Be,bt,Se),he.return=Be,Be=he;break e}l(Be,bt);break}else s(Be,bt);bt=bt.sibling}Se.type===Z?(he=rs(Se.props.children,Be.mode,Je,Se.key),he.return=Be,Be=he):(Je=Ll(Se.type,Se.key,Se.props,null,Be.mode,Je),Je.ref=Oa(Be,he,Se),Je.return=Be,Be=Je)}return C(Be);case V:e:{for(bt=Se.key;he!==null;){if(he.key===bt)if(he.tag===4&&he.stateNode.containerInfo===Se.containerInfo&&he.stateNode.implementation===Se.implementation){l(Be,he.sibling),he=g(he,Se.children||[]),he.return=Be,Be=he;break e}else{l(Be,he);break}else s(Be,he);he=he.sibling}he=yp(Se,Be.mode,Je),he.return=Be,Be=he}return C(Be);case me:return bt=Se._init,Cn(Be,he,bt(Se._payload),Je)}if(Ut(Se))return ct(Be,he,Se,Je);if(H(Se))return ut(Be,he,Se,Je);ul(Be,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"?(Se=""+Se,he!==null&&he.tag===6?(l(Be,he.sibling),he=g(he,Se),he.return=Be,Be=he):(l(Be,he),he=xp(Se,Be.mode,Je),he.return=Be,Be=he),C(Be)):l(Be,he)}return Cn}var Ds=a0(!0),A0=a0(!1),pl=ri(null),hl=null,Ps=null,ku=null;function Tu(){ku=Ps=hl=null}function ju(o){var s=pl.current;sn(pl),o._currentValue=s}function Fu(o,s,l){for(;o!==null;){var d=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),o===l)break;o=o.return}}function Hs(o,s){hl=o,ku=Ps=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&s)!==0&&(wr=!0),o.firstContext=null)}function Or(o){var s=o._currentValue;if(ku!==o)if(o={context:o,memoizedValue:s,next:null},Ps===null){if(hl===null)throw Error(t(308));Ps=o,hl.dependencies={lanes:0,firstContext:o}}else Ps=Ps.next=o;return s}var Ji=null;function Uu(o){Ji===null?Ji=[o]:Ji.push(o)}function l0(o,s,l,d){var g=s.interleaved;return g===null?(l.next=l,Uu(s)):(l.next=g.next,g.next=l),s.interleaved=l,Do(o,d)}function Do(o,s){o.lanes|=s;var l=o.alternate;for(l!==null&&(l.lanes|=s),l=o,o=o.return;o!==null;)o.childLanes|=s,l=o.alternate,l!==null&&(l.childLanes|=s),l=o,o=o.return;return l.tag===3?l.stateNode:null}var si=!1;function Qu(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c0(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Po(o,s){return{eventTime:o,lane:s,tag:0,payload:null,callback:null,next:null}}function ai(o,s,l){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(Dt&2)!==0){var g=d.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),d.pending=s,Do(o,l)}return g=d.interleaved,g===null?(s.next=s,Uu(d)):(s.next=g.next,g.next=s),d.interleaved=s,Do(o,l)}function gl(o,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var d=s.lanes;d&=o.pendingLanes,l|=d,s.lanes=l,ht(o,l)}}function d0(o,s){var l=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var C={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};x===null?g=x=C:x=x.next=C,l=l.next}while(l!==null);x===null?g=x=s:x=x.next=s}else g=x=s;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:x,shared:d.shared,effects:d.effects},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=s:o.next=s,l.lastBaseUpdate=s}function fl(o,s,l,d){var g=o.updateQueue;si=!1;var x=g.firstBaseUpdate,C=g.lastBaseUpdate,z=g.shared.pending;if(z!==null){g.shared.pending=null;var q=z,Ee=q.next;q.next=null,C===null?x=Ee:C.next=Ee,C=q;var Oe=o.alternate;Oe!==null&&(Oe=Oe.updateQueue,z=Oe.lastBaseUpdate,z!==C&&(z===null?Oe.firstBaseUpdate=Ee:z.next=Ee,Oe.lastBaseUpdate=q))}if(x!==null){var We=g.baseState;C=0,Oe=Ee=q=null,z=x;do{var _e=z.lane,ot=z.eventTime;if((d&_e)===_e){Oe!==null&&(Oe=Oe.next={eventTime:ot,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var ct=o,ut=z;switch(_e=s,ot=l,ut.tag){case 1:if(ct=ut.payload,typeof ct=="function"){We=ct.call(ot,We,_e);break e}We=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=ut.payload,_e=typeof ct=="function"?ct.call(ot,We,_e):ct,_e==null)break e;We=M({},We,_e);break e;case 2:si=!0}}z.callback!==null&&z.lane!==0&&(o.flags|=64,_e=g.effects,_e===null?g.effects=[z]:_e.push(z))}else ot={eventTime:ot,lane:_e,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Oe===null?(Ee=Oe=ot,q=We):Oe=Oe.next=ot,C|=_e;if(z=z.next,z===null){if(z=g.shared.pending,z===null)break;_e=z,z=_e.next,_e.next=null,g.lastBaseUpdate=_e,g.shared.pending=null}}while(!0);if(Oe===null&&(q=We),g.baseState=q,g.firstBaseUpdate=Ee,g.lastBaseUpdate=Oe,s=g.shared.interleaved,s!==null){g=s;do C|=g.lane,g=g.next;while(g!==s)}else x===null&&(g.shared.lanes=0);Zi|=C,o.lanes=C,o.memoizedState=We}}function u0(o,s,l){if(o=s.effects,s.effects=null,o!==null)for(s=0;s<o.length;s++){var d=o[s],g=d.callback;if(g!==null){if(d.callback=null,d=l,typeof g!="function")throw Error(t(191,g));g.call(d)}}}var za={},bo=ri(za),Ka=ri(za),Wa=ri(za);function Xi(o){if(o===za)throw Error(t(174));return o}function Ru(o,s){switch(nn(Wa,s),nn(Ka,o),nn(bo,za),o=s.nodeType,o){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:w(null,"");break;default:o=o===8?s.parentNode:s,s=o.namespaceURI||null,o=o.tagName,s=w(s,o)}sn(bo),nn(bo,s)}function Ns(){sn(bo),sn(Ka),sn(Wa)}function p0(o){Xi(Wa.current);var s=Xi(bo.current),l=w(s,o.type);s!==l&&(nn(Ka,o),nn(bo,l))}function Mu(o){Ka.current===o&&(sn(bo),sn(Ka))}var hn=ri(0);function ml(o){for(var s=o;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Lu=[];function Du(){for(var o=0;o<Lu.length;o++)Lu[o]._workInProgressVersionPrimary=null;Lu.length=0}var xl=ce.ReactCurrentDispatcher,Pu=ce.ReactCurrentBatchConfig,qi=0,gn=null,Fn=null,_n=null,yl=!1,Ga=!1,Va=0,gC=0;function nr(){throw Error(t(321))}function Hu(o,s){if(s===null)return!1;for(var l=0;l<s.length&&l<o.length;l++)if(!Zr(o[l],s[l]))return!1;return!0}function Nu(o,s,l,d,g,x){if(qi=x,gn=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,xl.current=o===null||o.memoizedState===null?yC:bC,o=l(d,g),Ga){x=0;do{if(Ga=!1,Va=0,25<=x)throw Error(t(301));x+=1,_n=Fn=null,s.updateQueue=null,xl.current=wC,o=l(d,g)}while(Ga)}if(xl.current=vl,s=Fn!==null&&Fn.next!==null,qi=0,_n=Fn=gn=null,yl=!1,s)throw Error(t(300));return o}function _u(){var o=Va!==0;return Va=0,o}function wo(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?gn.memoizedState=_n=o:_n=_n.next=o,_n}function zr(){if(Fn===null){var o=gn.alternate;o=o!==null?o.memoizedState:null}else o=Fn.next;var s=_n===null?gn.memoizedState:_n.next;if(s!==null)_n=s,Fn=o;else{if(o===null)throw Error(t(310));Fn=o,o={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},_n===null?gn.memoizedState=_n=o:_n=_n.next=o}return _n}function $a(o,s){return typeof s=="function"?s(o):s}function Ou(o){var s=zr(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=o;var d=Fn,g=d.baseQueue,x=l.pending;if(x!==null){if(g!==null){var C=g.next;g.next=x.next,x.next=C}d.baseQueue=g=x,l.pending=null}if(g!==null){x=g.next,d=d.baseState;var z=C=null,q=null,Ee=x;do{var Oe=Ee.lane;if((qi&Oe)===Oe)q!==null&&(q=q.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),d=Ee.hasEagerState?Ee.eagerState:o(d,Ee.action);else{var We={lane:Oe,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};q===null?(z=q=We,C=d):q=q.next=We,gn.lanes|=Oe,Zi|=Oe}Ee=Ee.next}while(Ee!==null&&Ee!==x);q===null?C=d:q.next=z,Zr(d,s.memoizedState)||(wr=!0),s.memoizedState=d,s.baseState=C,s.baseQueue=q,l.lastRenderedState=d}if(o=l.interleaved,o!==null){g=o;do x=g.lane,gn.lanes|=x,Zi|=x,g=g.next;while(g!==o)}else g===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function zu(o){var s=zr(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=o;var d=l.dispatch,g=l.pending,x=s.memoizedState;if(g!==null){l.pending=null;var C=g=g.next;do x=o(x,C.action),C=C.next;while(C!==g);Zr(x,s.memoizedState)||(wr=!0),s.memoizedState=x,s.baseQueue===null&&(s.baseState=x),l.lastRenderedState=x}return[x,d]}function h0(){}function g0(o,s){var l=gn,d=zr(),g=s(),x=!Zr(d.memoizedState,g);if(x&&(d.memoizedState=g,wr=!0),d=d.queue,Ku(x0.bind(null,l,d,o),[o]),d.getSnapshot!==s||x||_n!==null&&_n.memoizedState.tag&1){if(l.flags|=2048,Ya(9,m0.bind(null,l,d,g,s),void 0,null),On===null)throw Error(t(349));(qi&30)!==0||f0(l,s,g)}return g}function f0(o,s,l){o.flags|=16384,o={getSnapshot:s,value:l},s=gn.updateQueue,s===null?(s={lastEffect:null,stores:null},gn.updateQueue=s,s.stores=[o]):(l=s.stores,l===null?s.stores=[o]:l.push(o))}function m0(o,s,l,d){s.value=l,s.getSnapshot=d,y0(s)&&b0(o)}function x0(o,s,l){return l(function(){y0(s)&&b0(o)})}function y0(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!Zr(o,l)}catch{return!0}}function b0(o){var s=Do(o,1);s!==null&&oo(s,o,1,-1)}function w0(o){var s=wo();return typeof o=="function"&&(o=o()),s.memoizedState=s.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:o},s.queue=o,o=o.dispatch=xC.bind(null,gn,o),[s.memoizedState,o]}function Ya(o,s,l,d){return o={tag:o,create:s,destroy:l,deps:d,next:null},s=gn.updateQueue,s===null?(s={lastEffect:null,stores:null},gn.updateQueue=s,s.lastEffect=o.next=o):(l=s.lastEffect,l===null?s.lastEffect=o.next=o:(d=l.next,l.next=o,o.next=d,s.lastEffect=o)),o}function v0(){return zr().memoizedState}function bl(o,s,l,d){var g=wo();gn.flags|=o,g.memoizedState=Ya(1|s,l,void 0,d===void 0?null:d)}function wl(o,s,l,d){var g=zr();d=d===void 0?null:d;var x=void 0;if(Fn!==null){var C=Fn.memoizedState;if(x=C.destroy,d!==null&&Hu(d,C.deps)){g.memoizedState=Ya(s,l,x,d);return}}gn.flags|=o,g.memoizedState=Ya(1|s,l,x,d)}function C0(o,s){return bl(8390656,8,o,s)}function Ku(o,s){return wl(2048,8,o,s)}function B0(o,s){return wl(4,2,o,s)}function S0(o,s){return wl(4,4,o,s)}function I0(o,s){if(typeof s=="function")return o=o(),s(o),function(){s(null)};if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function E0(o,s,l){return l=l!=null?l.concat([o]):null,wl(4,4,I0.bind(null,s,o),l)}function Wu(){}function k0(o,s){var l=zr();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&Hu(s,d[1])?d[0]:(l.memoizedState=[o,s],o)}function T0(o,s){var l=zr();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&Hu(s,d[1])?d[0]:(o=o(),l.memoizedState=[o,s],o)}function j0(o,s,l){return(qi&21)===0?(o.baseState&&(o.baseState=!1,wr=!0),o.memoizedState=l):(Zr(l,s)||(l=je(),gn.lanes|=l,Zi|=l,o.baseState=!0),s)}function fC(o,s){var l=Ve;Ve=l!==0&&4>l?l:4,o(!0);var d=Pu.transition;Pu.transition={};try{o(!1),s()}finally{Ve=l,Pu.transition=d}}function F0(){return zr().memoizedState}function mC(o,s,l){var d=di(o);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},U0(o))Q0(s,l);else if(l=l0(o,s,l,d),l!==null){var g=pr();oo(l,o,d,g),R0(l,s,d)}}function xC(o,s,l){var d=di(o),g={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(U0(o))Q0(s,g);else{var x=o.alternate;if(o.lanes===0&&(x===null||x.lanes===0)&&(x=s.lastRenderedReducer,x!==null))try{var C=s.lastRenderedState,z=x(C,l);if(g.hasEagerState=!0,g.eagerState=z,Zr(z,C)){var q=s.interleaved;q===null?(g.next=g,Uu(s)):(g.next=q.next,q.next=g),s.interleaved=g;return}}catch{}finally{}l=l0(o,s,g,d),l!==null&&(g=pr(),oo(l,o,d,g),R0(l,s,d))}}function U0(o){var s=o.alternate;return o===gn||s!==null&&s===gn}function Q0(o,s){Ga=yl=!0;var l=o.pending;l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s}function R0(o,s,l){if((l&4194240)!==0){var d=s.lanes;d&=o.pendingLanes,l|=d,s.lanes=l,ht(o,l)}}var vl={readContext:Or,useCallback:nr,useContext:nr,useEffect:nr,useImperativeHandle:nr,useInsertionEffect:nr,useLayoutEffect:nr,useMemo:nr,useReducer:nr,useRef:nr,useState:nr,useDebugValue:nr,useDeferredValue:nr,useTransition:nr,useMutableSource:nr,useSyncExternalStore:nr,useId:nr,unstable_isNewReconciler:!1},yC={readContext:Or,useCallback:function(o,s){return wo().memoizedState=[o,s===void 0?null:s],o},useContext:Or,useEffect:C0,useImperativeHandle:function(o,s,l){return l=l!=null?l.concat([o]):null,bl(4194308,4,I0.bind(null,s,o),l)},useLayoutEffect:function(o,s){return bl(4194308,4,o,s)},useInsertionEffect:function(o,s){return bl(4,2,o,s)},useMemo:function(o,s){var l=wo();return s=s===void 0?null:s,o=o(),l.memoizedState=[o,s],o},useReducer:function(o,s,l){var d=wo();return s=l!==void 0?l(s):s,d.memoizedState=d.baseState=s,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:s},d.queue=o,o=o.dispatch=mC.bind(null,gn,o),[d.memoizedState,o]},useRef:function(o){var s=wo();return o={current:o},s.memoizedState=o},useState:w0,useDebugValue:Wu,useDeferredValue:function(o){return wo().memoizedState=o},useTransition:function(){var o=w0(!1),s=o[0];return o=fC.bind(null,o[1]),wo().memoizedState=o,[s,o]},useMutableSource:function(){},useSyncExternalStore:function(o,s,l){var d=gn,g=wo();if(An){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),On===null)throw Error(t(349));(qi&30)!==0||f0(d,s,l)}g.memoizedState=l;var x={value:l,getSnapshot:s};return g.queue=x,C0(x0.bind(null,d,x,o),[o]),d.flags|=2048,Ya(9,m0.bind(null,d,x,l,s),void 0,null),l},useId:function(){var o=wo(),s=On.identifierPrefix;if(An){var l=Lo,d=Mo;l=(d&~(1<<32-xr(d)-1)).toString(32)+l,s=":"+s+"R"+l,l=Va++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=gC++,s=":"+s+"r"+l.toString(32)+":";return o.memoizedState=s},unstable_isNewReconciler:!1},bC={readContext:Or,useCallback:k0,useContext:Or,useEffect:Ku,useImperativeHandle:E0,useInsertionEffect:B0,useLayoutEffect:S0,useMemo:T0,useReducer:Ou,useRef:v0,useState:function(){return Ou($a)},useDebugValue:Wu,useDeferredValue:function(o){var s=zr();return j0(s,Fn.memoizedState,o)},useTransition:function(){var o=Ou($a)[0],s=zr().memoizedState;return[o,s]},useMutableSource:h0,useSyncExternalStore:g0,useId:F0,unstable_isNewReconciler:!1},wC={readContext:Or,useCallback:k0,useContext:Or,useEffect:Ku,useImperativeHandle:E0,useInsertionEffect:B0,useLayoutEffect:S0,useMemo:T0,useReducer:zu,useRef:v0,useState:function(){return zu($a)},useDebugValue:Wu,useDeferredValue:function(o){var s=zr();return Fn===null?s.memoizedState=o:j0(s,Fn.memoizedState,o)},useTransition:function(){var o=zu($a)[0],s=zr().memoizedState;return[o,s]},useMutableSource:h0,useSyncExternalStore:g0,useId:F0,unstable_isNewReconciler:!1};function to(o,s){if(o&&o.defaultProps){s=M({},s),o=o.defaultProps;for(var l in o)s[l]===void 0&&(s[l]=o[l]);return s}return s}function Gu(o,s,l,d){s=o.memoizedState,l=l(d,s),l=l==null?s:M({},s,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var Cl={isMounted:function(o){return(o=o._reactInternals)?vn(o)===o:!1},enqueueSetState:function(o,s,l){o=o._reactInternals;var d=pr(),g=di(o),x=Po(d,g);x.payload=s,l!=null&&(x.callback=l),s=ai(o,x,g),s!==null&&(oo(s,o,g,d),gl(s,o,g))},enqueueReplaceState:function(o,s,l){o=o._reactInternals;var d=pr(),g=di(o),x=Po(d,g);x.tag=1,x.payload=s,l!=null&&(x.callback=l),s=ai(o,x,g),s!==null&&(oo(s,o,g,d),gl(s,o,g))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var l=pr(),d=di(o),g=Po(l,d);g.tag=2,s!=null&&(g.callback=s),s=ai(o,g,d),s!==null&&(oo(s,o,d,l),gl(s,o,d))}};function M0(o,s,l,d,g,x,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,x,C):s.prototype&&s.prototype.isPureReactComponent?!Ma(l,d)||!Ma(g,x):!0}function L0(o,s,l){var d=!1,g=oi,x=s.contextType;return typeof x=="object"&&x!==null?x=Or(x):(g=br(s)?Vi:tr.current,d=s.contextTypes,x=(d=d!=null)?Qs(o,g):oi),s=new s(l,x),o.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Cl,o.stateNode=s,s._reactInternals=o,d&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=g,o.__reactInternalMemoizedMaskedChildContext=x),s}function D0(o,s,l,d){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==o&&Cl.enqueueReplaceState(s,s.state,null)}function Vu(o,s,l,d){var g=o.stateNode;g.props=l,g.state=o.memoizedState,g.refs={},Qu(o);var x=s.contextType;typeof x=="object"&&x!==null?g.context=Or(x):(x=br(s)?Vi:tr.current,g.context=Qs(o,x)),g.state=o.memoizedState,x=s.getDerivedStateFromProps,typeof x=="function"&&(Gu(o,s,x,l),g.state=o.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&Cl.enqueueReplaceState(g,g.state,null),fl(o,l,g,d),g.state=o.memoizedState),typeof g.componentDidMount=="function"&&(o.flags|=4194308)}function _s(o,s){try{var l="",d=s;do l+=D(d),d=d.return;while(d);var g=l}catch(x){g=`
Error generating stack: `+x.message+`
`+x.stack}return{value:o,source:s,stack:g,digest:null}}function $u(o,s,l){return{value:o,source:null,stack:l??null,digest:s??null}}function Yu(o,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var vC=typeof WeakMap=="function"?WeakMap:Map;function P0(o,s,l){l=Po(-1,l),l.tag=3,l.payload={element:null};var d=s.value;return l.callback=function(){jl||(jl=!0,cp=d),Yu(o,s)},l}function H0(o,s,l){l=Po(-1,l),l.tag=3;var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var g=s.value;l.payload=function(){return d(g)},l.callback=function(){Yu(o,s)}}var x=o.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){Yu(o,s),typeof d!="function"&&(li===null?li=new Set([this]):li.add(this));var C=s.stack;this.componentDidCatch(s.value,{componentStack:C!==null?C:""})}),l}function N0(o,s,l){var d=o.pingCache;if(d===null){d=o.pingCache=new vC;var g=new Set;d.set(s,g)}else g=d.get(s),g===void 0&&(g=new Set,d.set(s,g));g.has(l)||(g.add(l),o=LC.bind(null,o,s,l),s.then(o,o))}function _0(o){do{var s;if((s=o.tag===13)&&(s=o.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return o;o=o.return}while(o!==null);return null}function O0(o,s,l,d,g){return(o.mode&1)===0?(o===s?o.flags|=65536:(o.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Po(-1,1),s.tag=2,ai(l,s,1))),l.lanes|=1),o):(o.flags|=65536,o.lanes=g,o)}var CC=ce.ReactCurrentOwner,wr=!1;function ur(o,s,l,d){s.child=o===null?A0(s,null,l,d):Ds(s,o.child,l,d)}function z0(o,s,l,d,g){l=l.render;var x=s.ref;return Hs(s,g),d=Nu(o,s,l,d,x,g),l=_u(),o!==null&&!wr?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~g,Ho(o,s,g)):(An&&l&&Cu(s),s.flags|=1,ur(o,s,d,g),s.child)}function K0(o,s,l,d,g){if(o===null){var x=l.type;return typeof x=="function"&&!mp(x)&&x.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=x,W0(o,s,x,d,g)):(o=Ll(l.type,null,d,s,s.mode,g),o.ref=s.ref,o.return=s,s.child=o)}if(x=o.child,(o.lanes&g)===0){var C=x.memoizedProps;if(l=l.compare,l=l!==null?l:Ma,l(C,d)&&o.ref===s.ref)return Ho(o,s,g)}return s.flags|=1,o=pi(x,d),o.ref=s.ref,o.return=s,s.child=o}function W0(o,s,l,d,g){if(o!==null){var x=o.memoizedProps;if(Ma(x,d)&&o.ref===s.ref)if(wr=!1,s.pendingProps=d=x,(o.lanes&g)!==0)(o.flags&131072)!==0&&(wr=!0);else return s.lanes=o.lanes,Ho(o,s,g)}return Ju(o,s,l,d,g)}function G0(o,s,l){var d=s.pendingProps,g=d.children,x=o!==null?o.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},nn(zs,Qr),Qr|=l;else{if((l&1073741824)===0)return o=x!==null?x.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:o,cachePool:null,transitions:null},s.updateQueue=null,nn(zs,Qr),Qr|=o,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=x!==null?x.baseLanes:l,nn(zs,Qr),Qr|=d}else x!==null?(d=x.baseLanes|l,s.memoizedState=null):d=l,nn(zs,Qr),Qr|=d;return ur(o,s,g,l),s.child}function V0(o,s){var l=s.ref;(o===null&&l!==null||o!==null&&o.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Ju(o,s,l,d,g){var x=br(l)?Vi:tr.current;return x=Qs(s,x),Hs(s,g),l=Nu(o,s,l,d,x,g),d=_u(),o!==null&&!wr?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~g,Ho(o,s,g)):(An&&d&&Cu(s),s.flags|=1,ur(o,s,l,g),s.child)}function $0(o,s,l,d,g){if(br(l)){var x=!0;al(s)}else x=!1;if(Hs(s,g),s.stateNode===null)Sl(o,s),L0(s,l,d),Vu(s,l,d,g),d=!0;else if(o===null){var C=s.stateNode,z=s.memoizedProps;C.props=z;var q=C.context,Ee=l.contextType;typeof Ee=="object"&&Ee!==null?Ee=Or(Ee):(Ee=br(l)?Vi:tr.current,Ee=Qs(s,Ee));var Oe=l.getDerivedStateFromProps,We=typeof Oe=="function"||typeof C.getSnapshotBeforeUpdate=="function";We||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(z!==d||q!==Ee)&&D0(s,C,d,Ee),si=!1;var _e=s.memoizedState;C.state=_e,fl(s,d,C,g),q=s.memoizedState,z!==d||_e!==q||yr.current||si?(typeof Oe=="function"&&(Gu(s,l,Oe,d),q=s.memoizedState),(z=si||M0(s,l,z,d,_e,q,Ee))?(We||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(s.flags|=4194308)):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=q),C.props=d,C.state=q,C.context=Ee,d=z):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{C=s.stateNode,c0(o,s),z=s.memoizedProps,Ee=s.type===s.elementType?z:to(s.type,z),C.props=Ee,We=s.pendingProps,_e=C.context,q=l.contextType,typeof q=="object"&&q!==null?q=Or(q):(q=br(l)?Vi:tr.current,q=Qs(s,q));var ot=l.getDerivedStateFromProps;(Oe=typeof ot=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(z!==We||_e!==q)&&D0(s,C,d,q),si=!1,_e=s.memoizedState,C.state=_e,fl(s,d,C,g);var ct=s.memoizedState;z!==We||_e!==ct||yr.current||si?(typeof ot=="function"&&(Gu(s,l,ot,d),ct=s.memoizedState),(Ee=si||M0(s,l,Ee,d,_e,ct,q)||!1)?(Oe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(d,ct,q),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(d,ct,q)),typeof C.componentDidUpdate=="function"&&(s.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof C.componentDidUpdate!="function"||z===o.memoizedProps&&_e===o.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&_e===o.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=ct),C.props=d,C.state=ct,C.context=q,d=Ee):(typeof C.componentDidUpdate!="function"||z===o.memoizedProps&&_e===o.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&_e===o.memoizedState||(s.flags|=1024),d=!1)}return Xu(o,s,l,d,x,g)}function Xu(o,s,l,d,g,x){V0(o,s);var C=(s.flags&128)!==0;if(!d&&!C)return g&&Zf(s,l,!1),Ho(o,s,x);d=s.stateNode,CC.current=s;var z=C&&typeof l.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,o!==null&&C?(s.child=Ds(s,o.child,null,x),s.child=Ds(s,null,z,x)):ur(o,s,z,x),s.memoizedState=d.state,g&&Zf(s,l,!0),s.child}function Y0(o){var s=o.stateNode;s.pendingContext?Xf(o,s.pendingContext,s.pendingContext!==s.context):s.context&&Xf(o,s.context,!1),Ru(o,s.containerInfo)}function J0(o,s,l,d,g){return Ls(),Eu(g),s.flags|=256,ur(o,s,l,d),s.child}var qu={dehydrated:null,treeContext:null,retryLane:0};function Zu(o){return{baseLanes:o,cachePool:null,transitions:null}}function X0(o,s,l){var d=s.pendingProps,g=hn.current,x=!1,C=(s.flags&128)!==0,z;if((z=C)||(z=o!==null&&o.memoizedState===null?!1:(g&2)!==0),z?(x=!0,s.flags&=-129):(o===null||o.memoizedState!==null)&&(g|=1),nn(hn,g&1),o===null)return Iu(s),o=s.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((s.mode&1)===0?s.lanes=1:o.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(C=d.children,o=d.fallback,x?(d=s.mode,x=s.child,C={mode:"hidden",children:C},(d&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=C):x=Dl(C,d,0,null),o=rs(o,d,l,null),x.return=s,o.return=s,x.sibling=o,s.child=x,s.child.memoizedState=Zu(l),s.memoizedState=qu,o):ep(s,C));if(g=o.memoizedState,g!==null&&(z=g.dehydrated,z!==null))return BC(o,s,C,d,z,g,l);if(x){x=d.fallback,C=s.mode,g=o.child,z=g.sibling;var q={mode:"hidden",children:d.children};return(C&1)===0&&s.child!==g?(d=s.child,d.childLanes=0,d.pendingProps=q,s.deletions=null):(d=pi(g,q),d.subtreeFlags=g.subtreeFlags&14680064),z!==null?x=pi(z,x):(x=rs(x,C,l,null),x.flags|=2),x.return=s,d.return=s,d.sibling=x,s.child=d,d=x,x=s.child,C=o.child.memoizedState,C=C===null?Zu(l):{baseLanes:C.baseLanes|l,cachePool:null,transitions:C.transitions},x.memoizedState=C,x.childLanes=o.childLanes&~l,s.memoizedState=qu,d}return x=o.child,o=x.sibling,d=pi(x,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=l),d.return=s,d.sibling=null,o!==null&&(l=s.deletions,l===null?(s.deletions=[o],s.flags|=16):l.push(o)),s.child=d,s.memoizedState=null,d}function ep(o,s){return s=Dl({mode:"visible",children:s},o.mode,0,null),s.return=o,o.child=s}function Bl(o,s,l,d){return d!==null&&Eu(d),Ds(s,o.child,null,l),o=ep(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function BC(o,s,l,d,g,x,C){if(l)return s.flags&256?(s.flags&=-257,d=$u(Error(t(422))),Bl(o,s,C,d)):s.memoizedState!==null?(s.child=o.child,s.flags|=128,null):(x=d.fallback,g=s.mode,d=Dl({mode:"visible",children:d.children},g,0,null),x=rs(x,g,C,null),x.flags|=2,d.return=s,x.return=s,d.sibling=x,s.child=d,(s.mode&1)!==0&&Ds(s,o.child,null,C),s.child.memoizedState=Zu(C),s.memoizedState=qu,x);if((s.mode&1)===0)return Bl(o,s,C,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var z=d.dgst;return d=z,x=Error(t(419)),d=$u(x,d,void 0),Bl(o,s,C,d)}if(z=(C&o.childLanes)!==0,wr||z){if(d=On,d!==null){switch(C&-C){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(d.suspendedLanes|C))!==0?0:g,g!==0&&g!==x.retryLane&&(x.retryLane=g,Do(o,g),oo(d,o,g,-1))}return fp(),d=$u(Error(t(421))),Bl(o,s,C,d)}return g.data==="$?"?(s.flags|=128,s.child=o.child,s=DC.bind(null,o),g._reactRetry=s,null):(o=x.treeContext,Ur=ni(g.nextSibling),Fr=s,An=!0,eo=null,o!==null&&(Nr[_r++]=Mo,Nr[_r++]=Lo,Nr[_r++]=$i,Mo=o.id,Lo=o.overflow,$i=s),s=ep(s,d.children),s.flags|=4096,s)}function q0(o,s,l){o.lanes|=s;var d=o.alternate;d!==null&&(d.lanes|=s),Fu(o.return,s,l)}function tp(o,s,l,d,g){var x=o.memoizedState;x===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g}:(x.isBackwards=s,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=l,x.tailMode=g)}function Z0(o,s,l){var d=s.pendingProps,g=d.revealOrder,x=d.tail;if(ur(o,s,d.children,l),d=hn.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&q0(o,l,s);else if(o.tag===19)q0(o,l,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}if(nn(hn,d),(s.mode&1)===0)s.memoizedState=null;else switch(g){case"forwards":for(l=s.child,g=null;l!==null;)o=l.alternate,o!==null&&ml(o)===null&&(g=l),l=l.sibling;l=g,l===null?(g=s.child,s.child=null):(g=l.sibling,l.sibling=null),tp(s,!1,g,l,x);break;case"backwards":for(l=null,g=s.child,s.child=null;g!==null;){if(o=g.alternate,o!==null&&ml(o)===null){s.child=g;break}o=g.sibling,g.sibling=l,l=g,g=o}tp(s,!0,l,null,x);break;case"together":tp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Sl(o,s){(s.mode&1)===0&&o!==null&&(o.alternate=null,s.alternate=null,s.flags|=2)}function Ho(o,s,l){if(o!==null&&(s.dependencies=o.dependencies),Zi|=s.lanes,(l&s.childLanes)===0)return null;if(o!==null&&s.child!==o.child)throw Error(t(153));if(s.child!==null){for(o=s.child,l=pi(o,o.pendingProps),s.child=l,l.return=s;o.sibling!==null;)o=o.sibling,l=l.sibling=pi(o,o.pendingProps),l.return=s;l.sibling=null}return s.child}function SC(o,s,l){switch(s.tag){case 3:Y0(s),Ls();break;case 5:p0(s);break;case 1:br(s.type)&&al(s);break;case 4:Ru(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,g=s.memoizedProps.value;nn(pl,d._currentValue),d._currentValue=g;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(nn(hn,hn.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?X0(o,s,l):(nn(hn,hn.current&1),o=Ho(o,s,l),o!==null?o.sibling:null);nn(hn,hn.current&1);break;case 19:if(d=(l&s.childLanes)!==0,(o.flags&128)!==0){if(d)return Z0(o,s,l);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),nn(hn,hn.current),d)break;return null;case 22:case 23:return s.lanes=0,G0(o,s,l)}return Ho(o,s,l)}var em,np,tm,nm;em=function(o,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)o.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},np=function(){},tm=function(o,s,l,d){var g=o.memoizedProps;if(g!==d){o=s.stateNode,Xi(bo.current);var x=null;switch(l){case"input":g=B(o,g),d=B(o,d),x=[];break;case"select":g=M({},g,{value:void 0}),d=M({},d,{value:void 0}),x=[];break;case"textarea":g=se(o,g),d=se(o,d),x=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(o.onclick=ol)}Ze(l,d);var C;l=null;for(Ee in g)if(!d.hasOwnProperty(Ee)&&g.hasOwnProperty(Ee)&&g[Ee]!=null)if(Ee==="style"){var z=g[Ee];for(C in z)z.hasOwnProperty(C)&&(l||(l={}),l[C]="")}else Ee!=="dangerouslySetInnerHTML"&&Ee!=="children"&&Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&Ee!=="autoFocus"&&(a.hasOwnProperty(Ee)?x||(x=[]):(x=x||[]).push(Ee,null));for(Ee in d){var q=d[Ee];if(z=g!=null?g[Ee]:void 0,d.hasOwnProperty(Ee)&&q!==z&&(q!=null||z!=null))if(Ee==="style")if(z){for(C in z)!z.hasOwnProperty(C)||q&&q.hasOwnProperty(C)||(l||(l={}),l[C]="");for(C in q)q.hasOwnProperty(C)&&z[C]!==q[C]&&(l||(l={}),l[C]=q[C])}else l||(x||(x=[]),x.push(Ee,l)),l=q;else Ee==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,z=z?z.__html:void 0,q!=null&&z!==q&&(x=x||[]).push(Ee,q)):Ee==="children"?typeof q!="string"&&typeof q!="number"||(x=x||[]).push(Ee,""+q):Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&(a.hasOwnProperty(Ee)?(q!=null&&Ee==="onScroll"&&on("scroll",o),x||z===q||(x=[])):(x=x||[]).push(Ee,q))}l&&(x=x||[]).push("style",l);var Ee=x;(s.updateQueue=Ee)&&(s.flags|=4)}},nm=function(o,s,l,d){l!==d&&(s.flags|=4)};function Ja(o,s){if(!An)switch(o.tailMode){case"hidden":s=o.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function rr(o){var s=o.alternate!==null&&o.alternate.child===o.child,l=0,d=0;if(s)for(var g=o.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=o,g=g.sibling;else for(g=o.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=o,g=g.sibling;return o.subtreeFlags|=d,o.childLanes=l,s}function IC(o,s,l){var d=s.pendingProps;switch(Bu(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rr(s),null;case 1:return br(s.type)&&sl(),rr(s),null;case 3:return d=s.stateNode,Ns(),sn(yr),sn(tr),Du(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(dl(s)?s.flags|=4:o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,eo!==null&&(pp(eo),eo=null))),np(o,s),rr(s),null;case 5:Mu(s);var g=Xi(Wa.current);if(l=s.type,o!==null&&s.stateNode!=null)tm(o,s,l,d,g),o.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return rr(s),null}if(o=Xi(bo.current),dl(s)){d=s.stateNode,l=s.type;var x=s.memoizedProps;switch(d[yo]=s,d[Na]=x,o=(s.mode&1)!==0,l){case"dialog":on("cancel",d),on("close",d);break;case"iframe":case"object":case"embed":on("load",d);break;case"video":case"audio":for(g=0;g<Da.length;g++)on(Da[g],d);break;case"source":on("error",d);break;case"img":case"image":case"link":on("error",d),on("load",d);break;case"details":on("toggle",d);break;case"input":ee(d,x),on("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!x.multiple},on("invalid",d);break;case"textarea":Tt(d,x),on("invalid",d)}Ze(l,x),g=null;for(var C in x)if(x.hasOwnProperty(C)){var z=x[C];C==="children"?typeof z=="string"?d.textContent!==z&&(x.suppressHydrationWarning!==!0&&rl(d.textContent,z,o),g=["children",z]):typeof z=="number"&&d.textContent!==""+z&&(x.suppressHydrationWarning!==!0&&rl(d.textContent,z,o),g=["children",""+z]):a.hasOwnProperty(C)&&z!=null&&C==="onScroll"&&on("scroll",d)}switch(l){case"input":j(d),kt(d,x,!0);break;case"textarea":j(d),fe(d);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(d.onclick=ol)}d=g,s.updateQueue=d,d!==null&&(s.flags|=4)}else{C=g.nodeType===9?g:g.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Qe(l)),o==="http://www.w3.org/1999/xhtml"?l==="script"?(o=C.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof d.is=="string"?o=C.createElement(l,{is:d.is}):(o=C.createElement(l),l==="select"&&(C=o,d.multiple?C.multiple=!0:d.size&&(C.size=d.size))):o=C.createElementNS(o,l),o[yo]=s,o[Na]=d,em(o,s,!1,!1),s.stateNode=o;e:{switch(C=J(l,d),l){case"dialog":on("cancel",o),on("close",o),g=d;break;case"iframe":case"object":case"embed":on("load",o),g=d;break;case"video":case"audio":for(g=0;g<Da.length;g++)on(Da[g],o);g=d;break;case"source":on("error",o),g=d;break;case"img":case"image":case"link":on("error",o),on("load",o),g=d;break;case"details":on("toggle",o),g=d;break;case"input":ee(o,d),g=B(o,d),on("invalid",o);break;case"option":g=d;break;case"select":o._wrapperState={wasMultiple:!!d.multiple},g=M({},d,{value:void 0}),on("invalid",o);break;case"textarea":Tt(o,d),g=se(o,d),on("invalid",o);break;default:g=d}Ze(l,g),z=g;for(x in z)if(z.hasOwnProperty(x)){var q=z[x];x==="style"?re(o,q):x==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&ft(o,q)):x==="children"?typeof q=="string"?(l!=="textarea"||q!=="")&&Et(o,q):typeof q=="number"&&Et(o,""+q):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(a.hasOwnProperty(x)?q!=null&&x==="onScroll"&&on("scroll",o):q!=null&&ve(o,x,q,C))}switch(l){case"input":j(o),kt(o,d,!1);break;case"textarea":j(o),fe(o);break;case"option":d.value!=null&&o.setAttribute("value",""+Ne(d.value));break;case"select":o.multiple=!!d.multiple,x=d.value,x!=null?Lt(o,!!d.multiple,x,!1):d.defaultValue!=null&&Lt(o,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(o.onclick=ol)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return rr(s),null;case 6:if(o&&s.stateNode!=null)nm(o,s,o.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(l=Xi(Wa.current),Xi(bo.current),dl(s)){if(d=s.stateNode,l=s.memoizedProps,d[yo]=s,(x=d.nodeValue!==l)&&(o=Fr,o!==null))switch(o.tag){case 3:rl(d.nodeValue,l,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&rl(d.nodeValue,l,(o.mode&1)!==0)}x&&(s.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[yo]=s,s.stateNode=d}return rr(s),null;case 13:if(sn(hn),d=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(An&&Ur!==null&&(s.mode&1)!==0&&(s.flags&128)===0)i0(),Ls(),s.flags|=98560,x=!1;else if(x=dl(s),d!==null&&d.dehydrated!==null){if(o===null){if(!x)throw Error(t(318));if(x=s.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[yo]=s}else Ls(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rr(s),x=!1}else eo!==null&&(pp(eo),eo=null),x=!0;if(!x)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(d=d!==null,d!==(o!==null&&o.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(o===null||(hn.current&1)!==0?Un===0&&(Un=3):fp())),s.updateQueue!==null&&(s.flags|=4),rr(s),null);case 4:return Ns(),np(o,s),o===null&&Pa(s.stateNode.containerInfo),rr(s),null;case 10:return ju(s.type._context),rr(s),null;case 17:return br(s.type)&&sl(),rr(s),null;case 19:if(sn(hn),x=s.memoizedState,x===null)return rr(s),null;if(d=(s.flags&128)!==0,C=x.rendering,C===null)if(d)Ja(x,!1);else{if(Un!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(C=ml(o),C!==null){for(s.flags|=128,Ja(x,!1),d=C.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=l,l=s.child;l!==null;)x=l,o=d,x.flags&=14680066,C=x.alternate,C===null?(x.childLanes=0,x.lanes=o,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=C.childLanes,x.lanes=C.lanes,x.child=C.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=C.memoizedProps,x.memoizedState=C.memoizedState,x.updateQueue=C.updateQueue,x.type=C.type,o=C.dependencies,x.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),l=l.sibling;return nn(hn,hn.current&1|2),s.child}o=o.sibling}x.tail!==null&&un()>Ks&&(s.flags|=128,d=!0,Ja(x,!1),s.lanes=4194304)}else{if(!d)if(o=ml(C),o!==null){if(s.flags|=128,d=!0,l=o.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Ja(x,!0),x.tail===null&&x.tailMode==="hidden"&&!C.alternate&&!An)return rr(s),null}else 2*un()-x.renderingStartTime>Ks&&l!==1073741824&&(s.flags|=128,d=!0,Ja(x,!1),s.lanes=4194304);x.isBackwards?(C.sibling=s.child,s.child=C):(l=x.last,l!==null?l.sibling=C:s.child=C,x.last=C)}return x.tail!==null?(s=x.tail,x.rendering=s,x.tail=s.sibling,x.renderingStartTime=un(),s.sibling=null,l=hn.current,nn(hn,d?l&1|2:l&1),s):(rr(s),null);case 22:case 23:return gp(),d=s.memoizedState!==null,o!==null&&o.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(Qr&1073741824)!==0&&(rr(s),s.subtreeFlags&6&&(s.flags|=8192)):rr(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function EC(o,s){switch(Bu(s),s.tag){case 1:return br(s.type)&&sl(),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Ns(),sn(yr),sn(tr),Du(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 5:return Mu(s),null;case 13:if(sn(hn),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ls()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return sn(hn),null;case 4:return Ns(),null;case 10:return ju(s.type._context),null;case 22:case 23:return gp(),null;case 24:return null;default:return null}}var Il=!1,or=!1,kC=typeof WeakSet=="function"?WeakSet:Set,At=null;function Os(o,s){var l=o.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){mn(o,s,d)}else l.current=null}function rp(o,s,l){try{l()}catch(d){mn(o,s,d)}}var rm=!1;function TC(o,s){if(gu=GA,o=Mf(),au(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break e}var C=0,z=-1,q=-1,Ee=0,Oe=0,We=o,_e=null;t:for(;;){for(var ot;We!==l||g!==0&&We.nodeType!==3||(z=C+g),We!==x||d!==0&&We.nodeType!==3||(q=C+d),We.nodeType===3&&(C+=We.nodeValue.length),(ot=We.firstChild)!==null;)_e=We,We=ot;for(;;){if(We===o)break t;if(_e===l&&++Ee===g&&(z=C),_e===x&&++Oe===d&&(q=C),(ot=We.nextSibling)!==null)break;We=_e,_e=We.parentNode}We=ot}l=z===-1||q===-1?null:{start:z,end:q}}else l=null}l=l||{start:0,end:0}}else l=null;for(fu={focusedElem:o,selectionRange:l},GA=!1,At=s;At!==null;)if(s=At,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,At=o;else for(;At!==null;){s=At;try{var ct=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ct!==null){var ut=ct.memoizedProps,Cn=ct.memoizedState,Be=s.stateNode,he=Be.getSnapshotBeforeUpdate(s.elementType===s.type?ut:to(s.type,ut),Cn);Be.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var Se=s.stateNode.containerInfo;Se.nodeType===1?Se.textContent="":Se.nodeType===9&&Se.documentElement&&Se.removeChild(Se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Je){mn(s,s.return,Je)}if(o=s.sibling,o!==null){o.return=s.return,At=o;break}At=s.return}return ct=rm,rm=!1,ct}function Xa(o,s,l){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&o)===o){var x=g.destroy;g.destroy=void 0,x!==void 0&&rp(s,l,x)}g=g.next}while(g!==d)}}function El(o,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&o)===o){var d=l.create;l.destroy=d()}l=l.next}while(l!==s)}}function op(o){var s=o.ref;if(s!==null){var l=o.stateNode;switch(o.tag){case 5:o=l;break;default:o=l}typeof s=="function"?s(o):s.current=o}}function om(o){var s=o.alternate;s!==null&&(o.alternate=null,om(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&(delete s[yo],delete s[Na],delete s[bu],delete s[dC],delete s[uC])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function im(o){return o.tag===5||o.tag===3||o.tag===4}function sm(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||im(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ip(o,s,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(o,s):l.insertBefore(o,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(o,l)):(s=l,s.appendChild(o)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=ol));else if(d!==4&&(o=o.child,o!==null))for(ip(o,s,l),o=o.sibling;o!==null;)ip(o,s,l),o=o.sibling}function sp(o,s,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?l.insertBefore(o,s):l.appendChild(o);else if(d!==4&&(o=o.child,o!==null))for(sp(o,s,l),o=o.sibling;o!==null;)sp(o,s,l),o=o.sibling}var Vn=null,no=!1;function Ai(o,s,l){for(l=l.child;l!==null;)am(o,s,l),l=l.sibling}function am(o,s,l){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(_i,l)}catch{}switch(l.tag){case 5:or||Os(l,s);case 6:var d=Vn,g=no;Vn=null,Ai(o,s,l),Vn=d,no=g,Vn!==null&&(no?(o=Vn,l=l.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):Vn.removeChild(l.stateNode));break;case 18:Vn!==null&&(no?(o=Vn,l=l.stateNode,o.nodeType===8?yu(o.parentNode,l):o.nodeType===1&&yu(o,l),Uo(o)):yu(Vn,l.stateNode));break;case 4:d=Vn,g=no,Vn=l.stateNode.containerInfo,no=!0,Ai(o,s,l),Vn=d,no=g;break;case 0:case 11:case 14:case 15:if(!or&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var x=g,C=x.destroy;x=x.tag,C!==void 0&&((x&2)!==0||(x&4)!==0)&&rp(l,s,C),g=g.next}while(g!==d)}Ai(o,s,l);break;case 1:if(!or&&(Os(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(z){mn(l,s,z)}Ai(o,s,l);break;case 21:Ai(o,s,l);break;case 22:l.mode&1?(or=(d=or)||l.memoizedState!==null,Ai(o,s,l),or=d):Ai(o,s,l);break;default:Ai(o,s,l)}}function Am(o){var s=o.updateQueue;if(s!==null){o.updateQueue=null;var l=o.stateNode;l===null&&(l=o.stateNode=new kC),s.forEach(function(d){var g=PC.bind(null,o,d);l.has(d)||(l.add(d),d.then(g,g))})}}function ro(o,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];try{var x=o,C=s,z=C;e:for(;z!==null;){switch(z.tag){case 5:Vn=z.stateNode,no=!1;break e;case 3:Vn=z.stateNode.containerInfo,no=!0;break e;case 4:Vn=z.stateNode.containerInfo,no=!0;break e}z=z.return}if(Vn===null)throw Error(t(160));am(x,C,g),Vn=null,no=!1;var q=g.alternate;q!==null&&(q.return=null),g.return=null}catch(Ee){mn(g,s,Ee)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)lm(s,o),s=s.sibling}function lm(o,s){var l=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ro(s,o),vo(o),d&4){try{Xa(3,o,o.return),El(3,o)}catch(ut){mn(o,o.return,ut)}try{Xa(5,o,o.return)}catch(ut){mn(o,o.return,ut)}}break;case 1:ro(s,o),vo(o),d&512&&l!==null&&Os(l,l.return);break;case 5:if(ro(s,o),vo(o),d&512&&l!==null&&Os(l,l.return),o.flags&32){var g=o.stateNode;try{Et(g,"")}catch(ut){mn(o,o.return,ut)}}if(d&4&&(g=o.stateNode,g!=null)){var x=o.memoizedProps,C=l!==null?l.memoizedProps:x,z=o.type,q=o.updateQueue;if(o.updateQueue=null,q!==null)try{z==="input"&&x.type==="radio"&&x.name!=null&&Pe(g,x),J(z,C);var Ee=J(z,x);for(C=0;C<q.length;C+=2){var Oe=q[C],We=q[C+1];Oe==="style"?re(g,We):Oe==="dangerouslySetInnerHTML"?ft(g,We):Oe==="children"?Et(g,We):ve(g,Oe,We,Ee)}switch(z){case"input":$e(g,x);break;case"textarea":ne(g,x);break;case"select":var _e=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!x.multiple;var ot=x.value;ot!=null?Lt(g,!!x.multiple,ot,!1):_e!==!!x.multiple&&(x.defaultValue!=null?Lt(g,!!x.multiple,x.defaultValue,!0):Lt(g,!!x.multiple,x.multiple?[]:"",!1))}g[Na]=x}catch(ut){mn(o,o.return,ut)}}break;case 6:if(ro(s,o),vo(o),d&4){if(o.stateNode===null)throw Error(t(162));g=o.stateNode,x=o.memoizedProps;try{g.nodeValue=x}catch(ut){mn(o,o.return,ut)}}break;case 3:if(ro(s,o),vo(o),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Uo(s.containerInfo)}catch(ut){mn(o,o.return,ut)}break;case 4:ro(s,o),vo(o);break;case 13:ro(s,o),vo(o),g=o.child,g.flags&8192&&(x=g.memoizedState!==null,g.stateNode.isHidden=x,!x||g.alternate!==null&&g.alternate.memoizedState!==null||(lp=un())),d&4&&Am(o);break;case 22:if(Oe=l!==null&&l.memoizedState!==null,o.mode&1?(or=(Ee=or)||Oe,ro(s,o),or=Ee):ro(s,o),vo(o),d&8192){if(Ee=o.memoizedState!==null,(o.stateNode.isHidden=Ee)&&!Oe&&(o.mode&1)!==0)for(At=o,Oe=o.child;Oe!==null;){for(We=At=Oe;At!==null;){switch(_e=At,ot=_e.child,_e.tag){case 0:case 11:case 14:case 15:Xa(4,_e,_e.return);break;case 1:Os(_e,_e.return);var ct=_e.stateNode;if(typeof ct.componentWillUnmount=="function"){d=_e,l=_e.return;try{s=d,ct.props=s.memoizedProps,ct.state=s.memoizedState,ct.componentWillUnmount()}catch(ut){mn(d,l,ut)}}break;case 5:Os(_e,_e.return);break;case 22:if(_e.memoizedState!==null){um(We);continue}}ot!==null?(ot.return=_e,At=ot):um(We)}Oe=Oe.sibling}e:for(Oe=null,We=o;;){if(We.tag===5){if(Oe===null){Oe=We;try{g=We.stateNode,Ee?(x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(z=We.stateNode,q=We.memoizedProps.style,C=q!=null&&q.hasOwnProperty("display")?q.display:null,z.style.display=Ce("display",C))}catch(ut){mn(o,o.return,ut)}}}else if(We.tag===6){if(Oe===null)try{We.stateNode.nodeValue=Ee?"":We.memoizedProps}catch(ut){mn(o,o.return,ut)}}else if((We.tag!==22&&We.tag!==23||We.memoizedState===null||We===o)&&We.child!==null){We.child.return=We,We=We.child;continue}if(We===o)break e;for(;We.sibling===null;){if(We.return===null||We.return===o)break e;Oe===We&&(Oe=null),We=We.return}Oe===We&&(Oe=null),We.sibling.return=We.return,We=We.sibling}}break;case 19:ro(s,o),vo(o),d&4&&Am(o);break;case 21:break;default:ro(s,o),vo(o)}}function vo(o){var s=o.flags;if(s&2){try{e:{for(var l=o.return;l!==null;){if(im(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(Et(g,""),d.flags&=-33);var x=sm(o);sp(o,x,g);break;case 3:case 4:var C=d.stateNode.containerInfo,z=sm(o);ip(o,z,C);break;default:throw Error(t(161))}}catch(q){mn(o,o.return,q)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function jC(o,s,l){At=o,cm(o)}function cm(o,s,l){for(var d=(o.mode&1)!==0;At!==null;){var g=At,x=g.child;if(g.tag===22&&d){var C=g.memoizedState!==null||Il;if(!C){var z=g.alternate,q=z!==null&&z.memoizedState!==null||or;z=Il;var Ee=or;if(Il=C,(or=q)&&!Ee)for(At=g;At!==null;)C=At,q=C.child,C.tag===22&&C.memoizedState!==null?pm(g):q!==null?(q.return=C,At=q):pm(g);for(;x!==null;)At=x,cm(x),x=x.sibling;At=g,Il=z,or=Ee}dm(o)}else(g.subtreeFlags&8772)!==0&&x!==null?(x.return=g,At=x):dm(o)}}function dm(o){for(;At!==null;){var s=At;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:or||El(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!or)if(l===null)d.componentDidMount();else{var g=s.elementType===s.type?l.memoizedProps:to(s.type,l.memoizedProps);d.componentDidUpdate(g,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var x=s.updateQueue;x!==null&&u0(s,x,d);break;case 3:var C=s.updateQueue;if(C!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}u0(s,C,l)}break;case 5:var z=s.stateNode;if(l===null&&s.flags&4){l=z;var q=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":q.autoFocus&&l.focus();break;case"img":q.src&&(l.src=q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Ee=s.alternate;if(Ee!==null){var Oe=Ee.memoizedState;if(Oe!==null){var We=Oe.dehydrated;We!==null&&Uo(We)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}or||s.flags&512&&op(s)}catch(_e){mn(s,s.return,_e)}}if(s===o){At=null;break}if(l=s.sibling,l!==null){l.return=s.return,At=l;break}At=s.return}}function um(o){for(;At!==null;){var s=At;if(s===o){At=null;break}var l=s.sibling;if(l!==null){l.return=s.return,At=l;break}At=s.return}}function pm(o){for(;At!==null;){var s=At;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{El(4,s)}catch(q){mn(s,l,q)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var g=s.return;try{d.componentDidMount()}catch(q){mn(s,g,q)}}var x=s.return;try{op(s)}catch(q){mn(s,x,q)}break;case 5:var C=s.return;try{op(s)}catch(q){mn(s,C,q)}}}catch(q){mn(s,s.return,q)}if(s===o){At=null;break}var z=s.sibling;if(z!==null){z.return=s.return,At=z;break}At=s.return}}var FC=Math.ceil,kl=ce.ReactCurrentDispatcher,ap=ce.ReactCurrentOwner,Kr=ce.ReactCurrentBatchConfig,Dt=0,On=null,En=null,$n=0,Qr=0,zs=ri(0),Un=0,qa=null,Zi=0,Tl=0,Ap=0,Za=null,vr=null,lp=0,Ks=1/0,No=null,jl=!1,cp=null,li=null,Fl=!1,ci=null,Ul=0,eA=0,dp=null,Ql=-1,Rl=0;function pr(){return(Dt&6)!==0?un():Ql!==-1?Ql:Ql=un()}function di(o){return(o.mode&1)===0?1:(Dt&2)!==0&&$n!==0?$n&-$n:hC.transition!==null?(Rl===0&&(Rl=je()),Rl):(o=Ve,o!==0||(o=window.event,o=o===void 0?16:gf(o.type)),o)}function oo(o,s,l,d){if(50<eA)throw eA=0,dp=null,Error(t(185));vt(o,l,d),((Dt&2)===0||o!==On)&&(o===On&&((Dt&2)===0&&(Tl|=l),Un===4&&ui(o,$n)),Cr(o,d),l===1&&Dt===0&&(s.mode&1)===0&&(Ks=un()+500,Al&&ii()))}function Cr(o,s){var l=o.callbackNode;T(o,s);var d=zi(o,o===On?$n:0);if(d===0)l!==null&&Sa(l),o.callbackNode=null,o.callbackPriority=0;else if(s=d&-d,o.callbackPriority!==s){if(l!=null&&Sa(l),s===1)o.tag===0?pC(gm.bind(null,o)):e0(gm.bind(null,o)),lC(function(){(Dt&6)===0&&ii()}),l=null;else{switch(Wt(d)){case 1:l=Ea;break;case 4:l=zA;break;case 16:l=vs;break;case 536870912:l=ka;break;default:l=vs}l=Cm(l,hm.bind(null,o))}o.callbackPriority=s,o.callbackNode=l}}function hm(o,s){if(Ql=-1,Rl=0,(Dt&6)!==0)throw Error(t(327));var l=o.callbackNode;if(Ws()&&o.callbackNode!==l)return null;var d=zi(o,o===On?$n:0);if(d===0)return null;if((d&30)!==0||(d&o.expiredLanes)!==0||s)s=Ml(o,d);else{s=d;var g=Dt;Dt|=2;var x=mm();(On!==o||$n!==s)&&(No=null,Ks=un()+500,ts(o,s));do try{RC();break}catch(z){fm(o,z)}while(!0);Tu(),kl.current=x,Dt=g,En!==null?s=0:(On=null,$n=0,s=Un)}if(s!==0){if(s===2&&(g=de(o),g!==0&&(d=g,s=up(o,g))),s===1)throw l=qa,ts(o,0),ui(o,d),Cr(o,un()),l;if(s===6)ui(o,d);else{if(g=o.current.alternate,(d&30)===0&&!UC(g)&&(s=Ml(o,d),s===2&&(x=de(o),x!==0&&(d=x,s=up(o,x))),s===1))throw l=qa,ts(o,0),ui(o,d),Cr(o,un()),l;switch(o.finishedWork=g,o.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:ns(o,vr,No);break;case 3:if(ui(o,d),(d&130023424)===d&&(s=lp+500-un(),10<s)){if(zi(o,0)!==0)break;if(g=o.suspendedLanes,(g&d)!==d){pr(),o.pingedLanes|=o.suspendedLanes&g;break}o.timeoutHandle=xu(ns.bind(null,o,vr,No),s);break}ns(o,vr,No);break;case 4:if(ui(o,d),(d&4194240)===d)break;for(s=o.eventTimes,g=-1;0<d;){var C=31-xr(d);x=1<<C,C=s[C],C>g&&(g=C),d&=~x}if(d=g,d=un()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*FC(d/1960))-d,10<d){o.timeoutHandle=xu(ns.bind(null,o,vr,No),d);break}ns(o,vr,No);break;case 5:ns(o,vr,No);break;default:throw Error(t(329))}}}return Cr(o,un()),o.callbackNode===l?hm.bind(null,o):null}function up(o,s){var l=Za;return o.current.memoizedState.isDehydrated&&(ts(o,s).flags|=256),o=Ml(o,s),o!==2&&(s=vr,vr=l,s!==null&&pp(s)),o}function pp(o){vr===null?vr=o:vr.push.apply(vr,o)}function UC(o){for(var s=o;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var g=l[d],x=g.getSnapshot;g=g.value;try{if(!Zr(x(),g))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ui(o,s){for(s&=~Ap,s&=~Tl,o.suspendedLanes|=s,o.pingedLanes&=~s,o=o.expirationTimes;0<s;){var l=31-xr(s),d=1<<l;o[l]=-1,s&=~d}}function gm(o){if((Dt&6)!==0)throw Error(t(327));Ws();var s=zi(o,0);if((s&1)===0)return Cr(o,un()),null;var l=Ml(o,s);if(o.tag!==0&&l===2){var d=de(o);d!==0&&(s=d,l=up(o,d))}if(l===1)throw l=qa,ts(o,0),ui(o,s),Cr(o,un()),l;if(l===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=s,ns(o,vr,No),Cr(o,un()),null}function hp(o,s){var l=Dt;Dt|=1;try{return o(s)}finally{Dt=l,Dt===0&&(Ks=un()+500,Al&&ii())}}function es(o){ci!==null&&ci.tag===0&&(Dt&6)===0&&Ws();var s=Dt;Dt|=1;var l=Kr.transition,d=Ve;try{if(Kr.transition=null,Ve=1,o)return o()}finally{Ve=d,Kr.transition=l,Dt=s,(Dt&6)===0&&ii()}}function gp(){Qr=zs.current,sn(zs)}function ts(o,s){o.finishedWork=null,o.finishedLanes=0;var l=o.timeoutHandle;if(l!==-1&&(o.timeoutHandle=-1,AC(l)),En!==null)for(l=En.return;l!==null;){var d=l;switch(Bu(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&sl();break;case 3:Ns(),sn(yr),sn(tr),Du();break;case 5:Mu(d);break;case 4:Ns();break;case 13:sn(hn);break;case 19:sn(hn);break;case 10:ju(d.type._context);break;case 22:case 23:gp()}l=l.return}if(On=o,En=o=pi(o.current,null),$n=Qr=s,Un=0,qa=null,Ap=Tl=Zi=0,vr=Za=null,Ji!==null){for(s=0;s<Ji.length;s++)if(l=Ji[s],d=l.interleaved,d!==null){l.interleaved=null;var g=d.next,x=l.pending;if(x!==null){var C=x.next;x.next=g,d.next=C}l.pending=d}Ji=null}return o}function fm(o,s){do{var l=En;try{if(Tu(),xl.current=vl,yl){for(var d=gn.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}yl=!1}if(qi=0,_n=Fn=gn=null,Ga=!1,Va=0,ap.current=null,l===null||l.return===null){Un=1,qa=s,En=null;break}e:{var x=o,C=l.return,z=l,q=s;if(s=$n,z.flags|=32768,q!==null&&typeof q=="object"&&typeof q.then=="function"){var Ee=q,Oe=z,We=Oe.tag;if((Oe.mode&1)===0&&(We===0||We===11||We===15)){var _e=Oe.alternate;_e?(Oe.updateQueue=_e.updateQueue,Oe.memoizedState=_e.memoizedState,Oe.lanes=_e.lanes):(Oe.updateQueue=null,Oe.memoizedState=null)}var ot=_0(C);if(ot!==null){ot.flags&=-257,O0(ot,C,z,x,s),ot.mode&1&&N0(x,Ee,s),s=ot,q=Ee;var ct=s.updateQueue;if(ct===null){var ut=new Set;ut.add(q),s.updateQueue=ut}else ct.add(q);break e}else{if((s&1)===0){N0(x,Ee,s),fp();break e}q=Error(t(426))}}else if(An&&z.mode&1){var Cn=_0(C);if(Cn!==null){(Cn.flags&65536)===0&&(Cn.flags|=256),O0(Cn,C,z,x,s),Eu(_s(q,z));break e}}x=q=_s(q,z),Un!==4&&(Un=2),Za===null?Za=[x]:Za.push(x),x=C;do{switch(x.tag){case 3:x.flags|=65536,s&=-s,x.lanes|=s;var Be=P0(x,q,s);d0(x,Be);break e;case 1:z=q;var he=x.type,Se=x.stateNode;if((x.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||Se!==null&&typeof Se.componentDidCatch=="function"&&(li===null||!li.has(Se)))){x.flags|=65536,s&=-s,x.lanes|=s;var Je=H0(x,z,s);d0(x,Je);break e}}x=x.return}while(x!==null)}ym(l)}catch(gt){s=gt,En===l&&l!==null&&(En=l=l.return);continue}break}while(!0)}function mm(){var o=kl.current;return kl.current=vl,o===null?vl:o}function fp(){(Un===0||Un===3||Un===2)&&(Un=4),On===null||(Zi&268435455)===0&&(Tl&268435455)===0||ui(On,$n)}function Ml(o,s){var l=Dt;Dt|=2;var d=mm();(On!==o||$n!==s)&&(No=null,ts(o,s));do try{QC();break}catch(g){fm(o,g)}while(!0);if(Tu(),Dt=l,kl.current=d,En!==null)throw Error(t(261));return On=null,$n=0,Un}function QC(){for(;En!==null;)xm(En)}function RC(){for(;En!==null&&!Kd();)xm(En)}function xm(o){var s=vm(o.alternate,o,Qr);o.memoizedProps=o.pendingProps,s===null?ym(o):En=s,ap.current=null}function ym(o){var s=o;do{var l=s.alternate;if(o=s.return,(s.flags&32768)===0){if(l=IC(l,s,Qr),l!==null){En=l;return}}else{if(l=EC(l,s),l!==null){l.flags&=32767,En=l;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Un=6,En=null;return}}if(s=s.sibling,s!==null){En=s;return}En=s=o}while(s!==null);Un===0&&(Un=5)}function ns(o,s,l){var d=Ve,g=Kr.transition;try{Kr.transition=null,Ve=1,MC(o,s,l,d)}finally{Kr.transition=g,Ve=d}return null}function MC(o,s,l,d){do Ws();while(ci!==null);if((Dt&6)!==0)throw Error(t(327));l=o.finishedWork;var g=o.finishedLanes;if(l===null)return null;if(o.finishedWork=null,o.finishedLanes=0,l===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var x=l.lanes|l.childLanes;if(Ot(o,x),o===On&&(En=On=null,$n=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Fl||(Fl=!0,Cm(vs,function(){return Ws(),null})),x=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||x){x=Kr.transition,Kr.transition=null;var C=Ve;Ve=1;var z=Dt;Dt|=4,ap.current=null,TC(o,l),lm(l,o),tC(fu),GA=!!gu,fu=gu=null,o.current=l,jC(l),Wd(),Dt=z,Ve=C,Kr.transition=x}else o.current=l;if(Fl&&(Fl=!1,ci=o,Ul=g),x=o.pendingLanes,x===0&&(li=null),Vd(l.stateNode),Cr(o,un()),s!==null)for(d=o.onRecoverableError,l=0;l<s.length;l++)g=s[l],d(g.value,{componentStack:g.stack,digest:g.digest});if(jl)throw jl=!1,o=cp,cp=null,o;return(Ul&1)!==0&&o.tag!==0&&Ws(),x=o.pendingLanes,(x&1)!==0?o===dp?eA++:(eA=0,dp=o):eA=0,ii(),null}function Ws(){if(ci!==null){var o=Wt(Ul),s=Kr.transition,l=Ve;try{if(Kr.transition=null,Ve=16>o?16:o,ci===null)var d=!1;else{if(o=ci,ci=null,Ul=0,(Dt&6)!==0)throw Error(t(331));var g=Dt;for(Dt|=4,At=o.current;At!==null;){var x=At,C=x.child;if((At.flags&16)!==0){var z=x.deletions;if(z!==null){for(var q=0;q<z.length;q++){var Ee=z[q];for(At=Ee;At!==null;){var Oe=At;switch(Oe.tag){case 0:case 11:case 15:Xa(8,Oe,x)}var We=Oe.child;if(We!==null)We.return=Oe,At=We;else for(;At!==null;){Oe=At;var _e=Oe.sibling,ot=Oe.return;if(om(Oe),Oe===Ee){At=null;break}if(_e!==null){_e.return=ot,At=_e;break}At=ot}}}var ct=x.alternate;if(ct!==null){var ut=ct.child;if(ut!==null){ct.child=null;do{var Cn=ut.sibling;ut.sibling=null,ut=Cn}while(ut!==null)}}At=x}}if((x.subtreeFlags&2064)!==0&&C!==null)C.return=x,At=C;else e:for(;At!==null;){if(x=At,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:Xa(9,x,x.return)}var Be=x.sibling;if(Be!==null){Be.return=x.return,At=Be;break e}At=x.return}}var he=o.current;for(At=he;At!==null;){C=At;var Se=C.child;if((C.subtreeFlags&2064)!==0&&Se!==null)Se.return=C,At=Se;else e:for(C=he;At!==null;){if(z=At,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:El(9,z)}}catch(gt){mn(z,z.return,gt)}if(z===C){At=null;break e}var Je=z.sibling;if(Je!==null){Je.return=z.return,At=Je;break e}At=z.return}}if(Dt=g,ii(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(_i,o)}catch{}d=!0}return d}finally{Ve=l,Kr.transition=s}}return!1}function bm(o,s,l){s=_s(l,s),s=P0(o,s,1),o=ai(o,s,1),s=pr(),o!==null&&(vt(o,1,s),Cr(o,s))}function mn(o,s,l){if(o.tag===3)bm(o,o,l);else for(;s!==null;){if(s.tag===3){bm(s,o,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(li===null||!li.has(d))){o=_s(l,o),o=H0(s,o,1),s=ai(s,o,1),o=pr(),s!==null&&(vt(s,1,o),Cr(s,o));break}}s=s.return}}function LC(o,s,l){var d=o.pingCache;d!==null&&d.delete(s),s=pr(),o.pingedLanes|=o.suspendedLanes&l,On===o&&($n&l)===l&&(Un===4||Un===3&&($n&130023424)===$n&&500>un()-lp?ts(o,0):Ap|=l),Cr(o,s)}function wm(o,s){s===0&&((o.mode&1)===0?s=1:(s=Oi,Oi<<=1,(Oi&130023424)===0&&(Oi=4194304)));var l=pr();o=Do(o,s),o!==null&&(vt(o,s,l),Cr(o,l))}function DC(o){var s=o.memoizedState,l=0;s!==null&&(l=s.retryLane),wm(o,l)}function PC(o,s){var l=0;switch(o.tag){case 13:var d=o.stateNode,g=o.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=o.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),wm(o,l)}var vm;vm=function(o,s,l){if(o!==null)if(o.memoizedProps!==s.pendingProps||yr.current)wr=!0;else{if((o.lanes&l)===0&&(s.flags&128)===0)return wr=!1,SC(o,s,l);wr=(o.flags&131072)!==0}else wr=!1,An&&(s.flags&1048576)!==0&&t0(s,cl,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;Sl(o,s),o=s.pendingProps;var g=Qs(s,tr.current);Hs(s,l),g=Nu(null,s,d,o,g,l);var x=_u();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,br(d)?(x=!0,al(s)):x=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Qu(s),g.updater=Cl,s.stateNode=g,g._reactInternals=s,Vu(s,d,o,l),s=Xu(null,s,d,!0,x,l)):(s.tag=0,An&&x&&Cu(s),ur(null,s,g,l),s=s.child),s;case 16:d=s.elementType;e:{switch(Sl(o,s),o=s.pendingProps,g=d._init,d=g(d._payload),s.type=d,g=s.tag=NC(d),o=to(d,o),g){case 0:s=Ju(null,s,d,o,l);break e;case 1:s=$0(null,s,d,o,l);break e;case 11:s=z0(null,s,d,o,l);break e;case 14:s=K0(null,s,d,to(d.type,o),l);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,g=s.pendingProps,g=s.elementType===d?g:to(d,g),Ju(o,s,d,g,l);case 1:return d=s.type,g=s.pendingProps,g=s.elementType===d?g:to(d,g),$0(o,s,d,g,l);case 3:e:{if(Y0(s),o===null)throw Error(t(387));d=s.pendingProps,x=s.memoizedState,g=x.element,c0(o,s),fl(s,d,null,l);var C=s.memoizedState;if(d=C.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},s.updateQueue.baseState=x,s.memoizedState=x,s.flags&256){g=_s(Error(t(423)),s),s=J0(o,s,d,l,g);break e}else if(d!==g){g=_s(Error(t(424)),s),s=J0(o,s,d,l,g);break e}else for(Ur=ni(s.stateNode.containerInfo.firstChild),Fr=s,An=!0,eo=null,l=A0(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ls(),d===g){s=Ho(o,s,l);break e}ur(o,s,d,l)}s=s.child}return s;case 5:return p0(s),o===null&&Iu(s),d=s.type,g=s.pendingProps,x=o!==null?o.memoizedProps:null,C=g.children,mu(d,g)?C=null:x!==null&&mu(d,x)&&(s.flags|=32),V0(o,s),ur(o,s,C,l),s.child;case 6:return o===null&&Iu(s),null;case 13:return X0(o,s,l);case 4:return Ru(s,s.stateNode.containerInfo),d=s.pendingProps,o===null?s.child=Ds(s,null,d,l):ur(o,s,d,l),s.child;case 11:return d=s.type,g=s.pendingProps,g=s.elementType===d?g:to(d,g),z0(o,s,d,g,l);case 7:return ur(o,s,s.pendingProps,l),s.child;case 8:return ur(o,s,s.pendingProps.children,l),s.child;case 12:return ur(o,s,s.pendingProps.children,l),s.child;case 10:e:{if(d=s.type._context,g=s.pendingProps,x=s.memoizedProps,C=g.value,nn(pl,d._currentValue),d._currentValue=C,x!==null)if(Zr(x.value,C)){if(x.children===g.children&&!yr.current){s=Ho(o,s,l);break e}}else for(x=s.child,x!==null&&(x.return=s);x!==null;){var z=x.dependencies;if(z!==null){C=x.child;for(var q=z.firstContext;q!==null;){if(q.context===d){if(x.tag===1){q=Po(-1,l&-l),q.tag=2;var Ee=x.updateQueue;if(Ee!==null){Ee=Ee.shared;var Oe=Ee.pending;Oe===null?q.next=q:(q.next=Oe.next,Oe.next=q),Ee.pending=q}}x.lanes|=l,q=x.alternate,q!==null&&(q.lanes|=l),Fu(x.return,l,s),z.lanes|=l;break}q=q.next}}else if(x.tag===10)C=x.type===s.type?null:x.child;else if(x.tag===18){if(C=x.return,C===null)throw Error(t(341));C.lanes|=l,z=C.alternate,z!==null&&(z.lanes|=l),Fu(C,l,s),C=x.sibling}else C=x.child;if(C!==null)C.return=x;else for(C=x;C!==null;){if(C===s){C=null;break}if(x=C.sibling,x!==null){x.return=C.return,C=x;break}C=C.return}x=C}ur(o,s,g.children,l),s=s.child}return s;case 9:return g=s.type,d=s.pendingProps.children,Hs(s,l),g=Or(g),d=d(g),s.flags|=1,ur(o,s,d,l),s.child;case 14:return d=s.type,g=to(d,s.pendingProps),g=to(d.type,g),K0(o,s,d,g,l);case 15:return W0(o,s,s.type,s.pendingProps,l);case 17:return d=s.type,g=s.pendingProps,g=s.elementType===d?g:to(d,g),Sl(o,s),s.tag=1,br(d)?(o=!0,al(s)):o=!1,Hs(s,l),L0(s,d,g),Vu(s,d,g,l),Xu(null,s,d,!0,o,l);case 19:return Z0(o,s,l);case 22:return G0(o,s,l)}throw Error(t(156,s.tag))};function Cm(o,s){return ws(o,s)}function HC(o,s,l,d){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(o,s,l,d){return new HC(o,s,l,d)}function mp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function NC(o){if(typeof o=="function")return mp(o)?1:0;if(o!=null){if(o=o.$$typeof,o===ge)return 11;if(o===ie)return 14}return 2}function pi(o,s){var l=o.alternate;return l===null?(l=Wr(o.tag,s,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=s,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&14680064,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l}function Ll(o,s,l,d,g,x){var C=2;if(d=o,typeof o=="function")mp(o)&&(C=1);else if(typeof o=="string")C=5;else e:switch(o){case Z:return rs(l.children,g,x,s);case le:C=8,g|=8;break;case $:return o=Wr(12,l,s,g|2),o.elementType=$,o.lanes=x,o;case te:return o=Wr(13,l,s,g),o.elementType=te,o.lanes=x,o;case Me:return o=Wr(19,l,s,g),o.elementType=Me,o.lanes=x,o;case N:return Dl(l,g,x,s);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ue:C=10;break e;case we:C=9;break e;case ge:C=11;break e;case ie:C=14;break e;case me:C=16,d=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return s=Wr(C,l,s,g),s.elementType=o,s.type=d,s.lanes=x,s}function rs(o,s,l,d){return o=Wr(7,o,d,s),o.lanes=l,o}function Dl(o,s,l,d){return o=Wr(22,o,d,s),o.elementType=N,o.lanes=l,o.stateNode={isHidden:!1},o}function xp(o,s,l){return o=Wr(6,o,null,s),o.lanes=l,o}function yp(o,s,l){return s=Wr(4,o.children!==null?o.children:[],o.key,s),s.lanes=l,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}function _C(o,s,l,d,g){this.tag=s,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=De(0),this.expirationTimes=De(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=De(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function bp(o,s,l,d,g,x,C,z,q){return o=new _C(o,s,l,z,q),s===1?(s=1,x===!0&&(s|=8)):s=0,x=Wr(3,null,null,s),o.current=x,x.stateNode=o,x.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qu(x),o}function OC(o,s,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:d==null?null:""+d,children:o,containerInfo:s,implementation:l}}function Bm(o){if(!o)return oi;o=o._reactInternals;e:{if(vn(o)!==o||o.tag!==1)throw Error(t(170));var s=o;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(br(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(o.tag===1){var l=o.type;if(br(l))return qf(o,l,s)}return s}function Sm(o,s,l,d,g,x,C,z,q){return o=bp(l,d,!0,o,g,x,C,z,q),o.context=Bm(null),l=o.current,d=pr(),g=di(l),x=Po(d,g),x.callback=s??null,ai(l,x,g),o.current.lanes=g,vt(o,g,d),Cr(o,d),o}function Pl(o,s,l,d){var g=s.current,x=pr(),C=di(g);return l=Bm(l),s.context===null?s.context=l:s.pendingContext=l,s=Po(x,C),s.payload={element:o},d=d===void 0?null:d,d!==null&&(s.callback=d),o=ai(g,s,C),o!==null&&(oo(o,g,C,x),gl(o,g,C)),C}function Hl(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Im(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<s?l:s}}function wp(o,s){Im(o,s),(o=o.alternate)&&Im(o,s)}function zC(){return null}var Em=typeof reportError=="function"?reportError:function(o){console.error(o)};function vp(o){this._internalRoot=o}Nl.prototype.render=vp.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(t(409));Pl(o,s,null,null)},Nl.prototype.unmount=vp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;es(function(){Pl(null,o,null,null)}),s[Qo]=null}};function Nl(o){this._internalRoot=o}Nl.prototype.unstable_scheduleHydration=function(o){if(o){var s=dt();o={blockedOn:null,target:o,priority:s};for(var l=0;l<Zt.length&&s!==0&&s<Zt[l].priority;l++);Zt.splice(l,0,o),l===0&&qo(o)}};function Cp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function _l(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function km(){}function KC(o,s,l,d,g){if(g){if(typeof d=="function"){var x=d;d=function(){var Ee=Hl(C);x.call(Ee)}}var C=Sm(s,d,o,0,null,!1,!1,"",km);return o._reactRootContainer=C,o[Qo]=C.current,Pa(o.nodeType===8?o.parentNode:o),es(),C}for(;g=o.lastChild;)o.removeChild(g);if(typeof d=="function"){var z=d;d=function(){var Ee=Hl(q);z.call(Ee)}}var q=bp(o,0,!1,null,null,!1,!1,"",km);return o._reactRootContainer=q,o[Qo]=q.current,Pa(o.nodeType===8?o.parentNode:o),es(function(){Pl(s,q,l,d)}),q}function Ol(o,s,l,d,g){var x=l._reactRootContainer;if(x){var C=x;if(typeof g=="function"){var z=g;g=function(){var q=Hl(C);z.call(q)}}Pl(s,C,o,g)}else C=KC(l,s,o,g,d);return Hl(C)}fn=function(o){switch(o.tag){case 3:var s=o.stateNode;if(s.current.memoizedState.isDehydrated){var l=Xo(s.pendingLanes);l!==0&&(ht(s,l|1),Cr(s,un()),(Dt&6)===0&&(Ks=un()+500,ii()))}break;case 13:es(function(){var d=Do(o,1);if(d!==null){var g=pr();oo(d,o,1,g)}}),wp(o,1)}},cr=function(o){if(o.tag===13){var s=Do(o,134217728);if(s!==null){var l=pr();oo(s,o,134217728,l)}wp(o,134217728)}},Xr=function(o){if(o.tag===13){var s=di(o),l=Do(o,s);if(l!==null){var d=pr();oo(l,o,s,d)}wp(o,s)}},dt=function(){return Ve},St=function(o,s){var l=Ve;try{return Ve=o,s()}finally{Ve=l}},bn=function(o,s,l){switch(s){case"input":if($e(o,l),s=l.name,l.type==="radio"&&s!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==o&&d.form===o.form){var g=il(d);if(!g)throw Error(t(90));F(d),$e(d,g)}}}break;case"textarea":ne(o,l);break;case"select":s=l.value,s!=null&&Lt(o,!!l.multiple,s,!1)}},et=hp,Ke=es;var WC={usingClientEntryPoint:!1,Events:[_a,Fs,il,Ae,Ue,hp]},tA={findFiberByHostInstance:Gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GC={bundleType:tA.bundleType,version:tA.version,rendererPackageName:tA.rendererPackageName,rendererConfig:tA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Ba(o),o===null?null:o.stateNode},findFiberByHostInstance:tA.findFiberByHostInstance||zC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{_i=zl.inject(GC),Hr=zl}catch{}}return Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WC,Br.createPortal=function(o,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cp(s))throw Error(t(200));return OC(o,s,null,l)},Br.createRoot=function(o,s){if(!Cp(o))throw Error(t(299));var l=!1,d="",g=Em;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=bp(o,1,!1,null,null,l,!1,d,g),o[Qo]=s.current,Pa(o.nodeType===8?o.parentNode:o),new vp(s)},Br.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Ba(s),o=o===null?null:o.stateNode,o},Br.flushSync=function(o){return es(o)},Br.hydrate=function(o,s,l){if(!_l(s))throw Error(t(200));return Ol(null,o,s,!0,l)},Br.hydrateRoot=function(o,s,l){if(!Cp(o))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,g=!1,x="",C=Em;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),s=Sm(s,null,o,1,l??null,g,!1,x,C),o[Qo]=s.current,Pa(o),d)for(o=0;o<d.length;o++)l=d[o],g=l._getVersion,g=g(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,g]:s.mutableSourceEagerHydrationData.push(l,g);return new Nl(s)},Br.render=function(o,s,l){if(!_l(s))throw Error(t(200));return Ol(null,o,s,!1,l)},Br.unmountComponentAtNode=function(o){if(!_l(o))throw Error(t(40));return o._reactRootContainer?(es(function(){Ol(null,null,o,!1,function(){o._reactRootContainer=null,o[Qo]=null})}),!0):!1},Br.unstable_batchedUpdates=hp,Br.unstable_renderSubtreeIntoContainer=function(o,s,l,d){if(!_l(l))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Ol(o,s,l,!1,d)},Br.version="18.3.1-next-f1338f8080-20240426",Br}var Lm;function Ny(){if(Lm)return Ip.exports;Lm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Ip.exports=nB(),Ip.exports}var Dm;function rB(){if(Dm)return Kl;Dm=1;var i=Ny();return Kl.createRoot=i.createRoot,Kl.hydrateRoot=i.hydrateRoot,Kl}var oB=rB();Ny();/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function IA(){return IA=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},IA.apply(this,arguments)}var vi;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(vi||(vi={}));const Pm="popstate";function iB(i){i===void 0&&(i={});function e(r,a){let{pathname:A,search:c,hash:u}=r.location;return ah("",{pathname:A,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Oy(a)}return aB(e,t,null,i)}function Pn(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function _y(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sB(){return Math.random().toString(36).substr(2,8)}function Hm(i,e){return{usr:i.state,key:i.key,idx:e}}function ah(i,e,t,r){return t===void 0&&(t=null),IA({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?fa(e):e,{state:t,key:e&&e.key||r||sB()})}function Oy(i){let{pathname:e="/",search:t="",hash:r=""}=i;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function fa(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substr(t),i=i.substr(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substr(r),i=i.substr(0,r)),i&&(e.pathname=i)}return e}function aB(i,e,t,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:A=!1}=r,c=a.history,u=vi.Pop,p=null,m=h();m==null&&(m=0,c.replaceState(IA({},c.state,{idx:m}),""));function h(){return(c.state||{idx:null}).idx}function y(){u=vi.Pop;let E=h(),P=E==null?null:E-m;m=E,p&&p({action:u,location:U.location,delta:P})}function b(E,P){u=vi.Push;let O=ah(U.location,E,P);m=h()+1;let ve=Hm(O,m),ce=U.createHref(O);try{c.pushState(ve,"",ce)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;a.location.assign(ce)}A&&p&&p({action:u,location:U.location,delta:1})}function L(E,P){u=vi.Replace;let O=ah(U.location,E,P);m=h();let ve=Hm(O,m),ce=U.createHref(O);c.replaceState(ve,"",ce),A&&p&&p({action:u,location:U.location,delta:0})}function S(E){let P=a.location.origin!=="null"?a.location.origin:a.location.href,O=typeof E=="string"?E:Oy(E);return O=O.replace(/ $/,"%20"),Pn(P,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,P)}let U={get action(){return u},get location(){return i(a,c)},listen(E){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(Pm,y),p=E,()=>{a.removeEventListener(Pm,y),p=null}},createHref(E){return e(a,E)},createURL:S,encodeLocation(E){let P=S(E);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:b,replace:L,go(E){return c.go(E)}};return U}var Nm;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Nm||(Nm={}));function AB(i,e,t){return t===void 0&&(t="/"),lB(i,e,t)}function lB(i,e,t,r){let a=typeof e=="string"?fa(e):e,A=Wy(a.pathname||"/",t);if(A==null)return null;let c=zy(i);cB(c);let u=null;for(let p=0;u==null&&p<c.length;++p){let m=vB(A);u=yB(c[p],m)}return u}function zy(i,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let a=(A,c,u)=>{let p={relativePath:u===void 0?A.path||"":u,caseSensitive:A.caseSensitive===!0,childrenIndex:c,route:A};p.relativePath.startsWith("/")&&(Pn(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let m=ls([r,p.relativePath]),h=t.concat(p);A.children&&A.children.length>0&&(Pn(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),zy(A.children,e,h,m)),!(A.path==null&&!A.index)&&e.push({path:m,score:mB(m,A.index),routesMeta:h})};return i.forEach((A,c)=>{var u;if(A.path===""||!((u=A.path)!=null&&u.includes("?")))a(A,c);else for(let p of Ky(A.path))a(A,c,p)}),e}function Ky(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),A=t.replace(/\?$/,"");if(r.length===0)return a?[A,""]:[A];let c=Ky(r.join("/")),u=[];return u.push(...c.map(p=>p===""?A:[A,p].join("/"))),a&&u.push(...c),u.map(p=>i.startsWith("/")&&p===""?"/":p)}function cB(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:xB(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const dB=/^:[\w-]+$/,uB=3,pB=2,hB=1,gB=10,fB=-2,_m=i=>i==="*";function mB(i,e){let t=i.split("/"),r=t.length;return t.some(_m)&&(r+=fB),e&&(r+=pB),t.filter(a=>!_m(a)).reduce((a,A)=>a+(dB.test(A)?uB:A===""?hB:gB),r)}function xB(i,e){return i.length===e.length&&i.slice(0,-1).every((r,a)=>r===e[a])?i[i.length-1]-e[e.length-1]:0}function yB(i,e,t){let{routesMeta:r}=i,a={},A="/",c=[];for(let u=0;u<r.length;++u){let p=r[u],m=u===r.length-1,h=A==="/"?e:e.slice(A.length)||"/",y=bB({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},h),b=p.route;if(!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:ls([A,y.pathname]),pathnameBase:kB(ls([A,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(A=ls([A,y.pathnameBase]))}return c}function bB(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=wB(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let A=a[0],c=A.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:r.reduce((m,h,y)=>{let{paramName:b,isOptional:L}=h;if(b==="*"){let U=u[y]||"";c=A.slice(0,A.length-U.length).replace(/(.)\/+$/,"$1")}const S=u[y];return L&&!S?m[b]=void 0:m[b]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:A,pathnameBase:c,pattern:i}}function wB(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),_y(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let r=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,p)=>(r.push({paramName:u,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function vB(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _y(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function Wy(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function CB(i,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:a=""}=typeof i=="string"?fa(i):i;return{pathname:t?t.startsWith("/")?t:BB(t,e):e,search:TB(r),hash:jB(a)}}function BB(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Tp(i,e,t,r){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function SB(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function IB(i,e){let t=SB(i);return e?t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function EB(i,e,t,r){r===void 0&&(r=!1);let a;typeof i=="string"?a=fa(i):(a=IA({},i),Pn(!a.pathname||!a.pathname.includes("?"),Tp("?","pathname","search",a)),Pn(!a.pathname||!a.pathname.includes("#"),Tp("#","pathname","hash",a)),Pn(!a.search||!a.search.includes("#"),Tp("#","search","hash",a)));let A=i===""||a.pathname==="",c=A?"/":a.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}u=y>=0?e[y]:"/"}let p=CB(a,u),m=c&&c!=="/"&&c.endsWith("/"),h=(A||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||h)&&(p.pathname+="/"),p}const ls=i=>i.join("/").replace(/\/\/+/g,"/"),kB=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),TB=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,jB=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function FB(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const Gy=["post","put","patch","delete"];new Set(Gy);const UB=["get",...Gy];new Set(UB);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function EA(){return EA=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},EA.apply(this,arguments)}const Jh=f.createContext(null),QB=f.createContext(null),cd=f.createContext(null),dd=f.createContext(null),ma=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Vy=f.createContext(null);function ud(){return f.useContext(dd)!=null}function $y(){return ud()||Pn(!1),f.useContext(dd).location}function Yy(i){f.useContext(cd).static||f.useLayoutEffect(i)}function RB(){let{isDataRoute:i}=f.useContext(ma);return i?VB():MB()}function MB(){ud()||Pn(!1);let i=f.useContext(Jh),{basename:e,future:t,navigator:r}=f.useContext(cd),{matches:a}=f.useContext(ma),{pathname:A}=$y(),c=JSON.stringify(IB(a,t.v7_relativeSplatPath)),u=f.useRef(!1);return Yy(()=>{u.current=!0}),f.useCallback(function(m,h){if(h===void 0&&(h={}),!u.current)return;if(typeof m=="number"){r.go(m);return}let y=EB(m,JSON.parse(c),A,h.relative==="path");i==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ls([e,y.pathname])),(h.replace?r.replace:r.push)(y,h.state,h)},[e,r,c,A,i])}function LB(i,e){return DB(i,e)}function DB(i,e,t,r){ud()||Pn(!1);let{navigator:a}=f.useContext(cd),{matches:A}=f.useContext(ma),c=A[A.length-1],u=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let m=$y(),h;if(e){var y;let E=typeof e=="string"?fa(e):e;p==="/"||(y=E.pathname)!=null&&y.startsWith(p)||Pn(!1),h=E}else h=m;let b=h.pathname||"/",L=b;if(p!=="/"){let E=p.replace(/^\//,"").split("/");L="/"+b.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=AB(i,{pathname:L}),U=OB(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:ls([p,a.encodeLocation?a.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?p:ls([p,a.encodeLocation?a.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),A,t,r);return e&&U?f.createElement(dd.Provider,{value:{location:EA({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:vi.Pop}},U):U}function PB(){let i=GB(),e=FB(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),t?f.createElement("pre",{style:a},t):null,null)}const HB=f.createElement(PB,null);class NB extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?f.createElement(ma.Provider,{value:this.props.routeContext},f.createElement(Vy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _B(i){let{routeContext:e,match:t,children:r}=i,a=f.useContext(Jh);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),f.createElement(ma.Provider,{value:e},r)}function OB(i,e,t,r){var a;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),i==null){var A;if(!t)return null;if(t.errors)i=t.matches;else if((A=r)!=null&&A.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let c=i,u=(a=t)==null?void 0:a.errors;if(u!=null){let h=c.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);h>=0||Pn(!1),c=c.slice(0,Math.min(c.length,h+1))}let p=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<c.length;h++){let y=c[h];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=h),y.route.id){let{loaderData:b,errors:L}=t,S=y.route.loader&&b[y.route.id]===void 0&&(!L||L[y.route.id]===void 0);if(y.route.lazy||S){p=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((h,y,b)=>{let L,S=!1,U=null,E=null;t&&(L=u&&y.route.id?u[y.route.id]:void 0,U=y.route.errorElement||HB,p&&(m<0&&b===0?($B("route-fallback"),S=!0,E=null):m===b&&(S=!0,E=y.route.hydrateFallbackElement||null)));let P=e.concat(c.slice(0,b+1)),O=()=>{let ve;return L?ve=U:S?ve=E:y.route.Component?ve=f.createElement(y.route.Component,null):y.route.element?ve=y.route.element:ve=h,f.createElement(_B,{match:y,routeContext:{outlet:h,matches:P,isDataRoute:t!=null},children:ve})};return t&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?f.createElement(NB,{location:t.location,revalidation:t.revalidation,component:U,error:L,children:O(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):O()},null)}var Jy=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(Jy||{}),Xy=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(Xy||{});function zB(i){let e=f.useContext(Jh);return e||Pn(!1),e}function KB(i){let e=f.useContext(QB);return e||Pn(!1),e}function WB(i){let e=f.useContext(ma);return e||Pn(!1),e}function qy(i){let e=WB(),t=e.matches[e.matches.length-1];return t.route.id||Pn(!1),t.route.id}function GB(){var i;let e=f.useContext(Vy),t=KB(),r=qy();return e!==void 0?e:(i=t.errors)==null?void 0:i[r]}function VB(){let{router:i}=zB(Jy.UseNavigateStable),e=qy(Xy.UseNavigateStable),t=f.useRef(!1);return Yy(()=>{t.current=!0}),f.useCallback(function(a,A){A===void 0&&(A={}),t.current&&(typeof a=="number"?i.navigate(a):i.navigate(a,EA({fromRouteId:e},A)))},[i,e])}const Om={};function $B(i,e,t){Om[i]||(Om[i]=!0)}function xn(i){Pn(!1)}function YB(i){let{basename:e="/",children:t=null,location:r,navigationType:a=vi.Pop,navigator:A,static:c=!1,future:u}=i;ud()&&Pn(!1);let p=e.replace(/^\/*/,"/"),m=f.useMemo(()=>({basename:p,navigator:A,static:c,future:EA({v7_relativeSplatPath:!1},u)}),[p,u,A,c]);typeof r=="string"&&(r=fa(r));let{pathname:h="/",search:y="",hash:b="",state:L=null,key:S="default"}=r,U=f.useMemo(()=>{let E=Wy(h,p);return E==null?null:{location:{pathname:E,search:y,hash:b,state:L,key:S},navigationType:a}},[p,h,y,b,L,S,a]);return U==null?null:f.createElement(cd.Provider,{value:m},f.createElement(dd.Provider,{children:t,value:U}))}function JB(i){let{children:e,location:t}=i;return LB(Ah(e),t)}new Promise(()=>{});function Ah(i,e){e===void 0&&(e=[]);let t=[];return f.Children.forEach(i,(r,a)=>{if(!f.isValidElement(r))return;let A=[...e,a];if(r.type===f.Fragment){t.push.apply(t,Ah(r.props.children,A));return}r.type!==xn&&Pn(!1),!r.props.index||!r.props.children||Pn(!1);let c={id:r.props.id||A.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Ah(r.props.children,A)),t.push(c)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const XB="6";try{window.__reactRouterVersion=XB}catch{}const qB="startTransition",zm=ZC[qB];function ZB(i){let{basename:e,children:t,future:r,window:a}=i,A=f.useRef();A.current==null&&(A.current=iB({window:a,v5Compat:!0}));let c=A.current,[u,p]=f.useState({action:c.action,location:c.location}),{v7_startTransition:m}=r||{},h=f.useCallback(y=>{m&&zm?zm(()=>p(y)):p(y)},[p,m]);return f.useLayoutEffect(()=>c.listen(h),[c,h]),f.createElement(YB,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:c,future:r})}var Km;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(Km||(Km={}));var Wm;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Wm||(Wm={}));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),t2=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Gm=i=>{const e=t2(i);return e.charAt(0).toUpperCase()+e.slice(1)},Zy=(...i)=>i.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),n2=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var r2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=f.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:A,iconNode:c,...u},p)=>f.createElement("svg",{ref:p,...r2,width:e,height:e,stroke:i,strokeWidth:r?Number(t)*24/Number(e):t,className:Zy("lucide",a),...!A&&!n2(u)&&{"aria-hidden":"true"},...u},[...c.map(([m,h])=>f.createElement(m,h)),...Array.isArray(A)?A:[A]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(i,e)=>{const t=f.forwardRef(({className:r,...a},A)=>f.createElement(o2,{ref:A,iconNode:e,className:Zy(`lucide-${e2(Gm(i))}`,`lucide-${i}`,r),...a}));return t.displayName=Gm(i),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],DA=mt("activity",i2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Pi=mt("arrow-left",s2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],lr=mt("bell",a2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ua=mt("briefcase",A2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],cs=mt("building",l2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],uo=mt("calendar",c2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],u2=mt("chart-column",d2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],lh=mt("check",p2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ko=mt("chevron-down",h2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],eb=mt("chevron-left",g2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Uc=mt("chevron-right",f2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],lo=mt("circle-alert",m2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],po=mt("circle-check-big",x2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],b2=mt("circle-plus",y2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],v2=mt("circle-x",w2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Mi=mt("clock",C2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],Vm=mt("cog",B2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],tb=mt("download",S2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ch=mt("eye-off",I2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$o=mt("eye",E2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],T2=mt("file-text",k2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],F2=mt("fingerprint",j2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],nb=mt("folder-open",U2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Xh=mt("funnel",Q2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],jp=mt("globe",R2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Wl=mt("history",M2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],rb=mt("info",L2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],$m=mt("layers",D2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],H2=mt("layout-dashboard",P2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ei=mt("lock",N2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],O2=mt("log-out",_2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Qc=mt("mail",z2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ob=mt("map-pin",K2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],G2=mt("menu",W2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],Ym=mt("pen-line",V2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ib=mt("phone",$2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yn=mt("plus",Y2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ki=mt("refresh-cw",J2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],bi=mt("save",X2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],PA=mt("search",q2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],hs=mt("shield",Z2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],co=mt("sparkles",eS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],oa=mt("square-pen",tS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],sb=mt("target",nS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Pr=mt("trash-2",rS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],iS=mt("trending-down",oS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],pd=mt("trending-up",sS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Mn=mt("triangle-alert",aS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vc=mt("user-check",AS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Yt=mt("user",lS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Er=mt("users",cS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=[["path",{d:"M18 11c-1.5 0-2.5.5-3 2",key:"1fod00"}],["path",{d:"M4 6a2 2 0 0 0-2 2v4a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V8a2 2 0 0 0-2-2h-3a8 8 0 0 0-5 2 8 8 0 0 0-5-2z",key:"d70hit"}],["path",{d:"M6 11c1.5 0 2.5.5 3 2",key:"136fht"}]],uS=mt("venetian-mask",dS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],hS=mt("video",pS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dn=mt("x",gS);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ko=mt("zap",fS);/*! @azure/msal-common v15.13.2 2025-11-19 */const Le={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ci={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},as={GET:"GET",POST:"POST"},xa=[Le.OPENID_SCOPE,Le.PROFILE_SCOPE,Le.OFFLINE_ACCESS_SCOPE],Jm=[...xa,Le.EMAIL_SCOPE],fr={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Xm={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Ti={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Gl={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Zn={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},qh={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},hd={QUERY:"query",FRAGMENT:"fragment"},mS={QUERY:"query"},ab={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},Vl={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},kA={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Xn={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Zh="appmetadata",xS="client_info",Rc="1",Mc={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Mr={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Yn={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Gt={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},mA={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},qm={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Gs={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Fp={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},is={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},yS={Pop:"pop"},Ab=300;/*! @azure/msal-common v15.13.2 2025-11-19 */const Lc="unexpected_error",bS="post_request_failed";/*! @azure/msal-common v15.13.2 2025-11-19 */const Zm={[Lc]:"Unexpected error in authentication.",[bS]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Jt extends Error{constructor(e,t,r){const a=t?`${e}: ${t}`:e;super(a),Object.setPrototypeOf(this,Jt.prototype),this.errorCode=e||Le.EMPTY_STRING,this.errorMessage=t||Le.EMPTY_STRING,this.subError=r||Le.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function dh(i,e){return new Jt(i,e?`${Zm[i]} ${e}`:Zm[i])}/*! @azure/msal-common v15.13.2 2025-11-19 */const eg="client_info_decoding_error",lb="client_info_empty_error",tg="token_parsing_error",cb="null_or_empty_token",Wo="endpoints_resolution_error",db="network_error",ub="openid_config_error",pb="hash_not_deserialized",pa="invalid_state",hb="state_mismatch",uh="state_not_found",gb="nonce_mismatch",ng="auth_time_not_found",fb="max_age_transpired",wS="multiple_matching_tokens",vS="multiple_matching_accounts",mb="multiple_matching_appMetadata",xb="request_cannot_be_made",yb="cannot_remove_empty_scope",bb="cannot_append_scopeset",ph="empty_input_scopeset",CS="device_code_polling_cancelled",BS="device_code_expired",SS="device_code_unknown_error",rg="no_account_in_silent_request",wb="invalid_cache_record",og="invalid_cache_environment",hh="no_account_found",gh="no_crypto_object",IS="unexpected_credential_type",ES="invalid_assertion",kS="invalid_client_credential",ji="token_refresh_required",TS="user_timeout_reached",vb="token_claims_cnf_required_for_signedjwt",Cb="authorization_code_missing_from_server_response",Bb="binding_key_not_removed",Sb="end_session_endpoint_not_supported",ig="key_id_missing",jS="no_network_connectivity",FS="user_canceled",US="missing_tenant_id_error",Ft="method_not_implemented",QS="nested_app_auth_bridge_disabled",RS="platform_broker_error";/*! @azure/msal-common v15.13.2 2025-11-19 */const ex={[eg]:"The client info could not be parsed/decoded correctly",[lb]:"The client info was empty",[tg]:"Token cannot be parsed",[cb]:"The token is null or empty",[Wo]:"Endpoints cannot be resolved",[db]:"Network request failed",[ub]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[pb]:"The hash parameters could not be deserialized",[pa]:"State was not the expected format",[hb]:"State mismatch error",[uh]:"State not found",[gb]:"Nonce mismatch error",[ng]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[fb]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[wS]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[vS]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[mb]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[xb]:"Token request cannot be made without authorization code or refresh token.",[yb]:"Cannot remove null or empty scope from ScopeSet",[bb]:"Cannot append ScopeSet",[ph]:"Empty input ScopeSet cannot be processed",[CS]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[BS]:"Device code is expired.",[SS]:"Device code stopped polling for unknown reasons.",[rg]:"Please pass an account object, silent flow is not supported without account information",[wb]:"Cache record object was null or undefined.",[og]:"Invalid environment when attempting to create cache entry",[hh]:"No account found in cache for given key.",[gh]:"No crypto object detected.",[IS]:"Unexpected credential type.",[ES]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[kS]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[ji]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[TS]:"User defined timeout for device code polling reached",[vb]:"Cannot generate a POP jwt if the token_claims are not populated",[Cb]:"Server response does not contain an authorization code to proceed",[Bb]:"Could not remove the credential's binding key from storage.",[Sb]:"The provided authority does not support logout",[ig]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[jS]:"No network connectivity. Check your internet connection.",[FS]:"User cancelled the flow.",[US]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Ft]:"This method has not been implemented",[QS]:"The nested app auth bridge is disabled",[RS]:"An error occurred in the native broker. See the platformBrokerError property for details."};class sg extends Jt{constructor(e,t){super(e,t?`${ex[e]}: ${t}`:ex[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,sg.prototype)}}function Ge(i,e){return new sg(i,e)}/*! @azure/msal-common v15.13.2 2025-11-19 */const Dc={createNewGuid:()=>{throw Ge(Ft)},base64Decode:()=>{throw Ge(Ft)},base64Encode:()=>{throw Ge(Ft)},base64UrlEncode:()=>{throw Ge(Ft)},encodeKid:()=>{throw Ge(Ft)},async getPublicKeyThumbprint(){throw Ge(Ft)},async removeTokenBindingKey(){throw Ge(Ft)},async clearKeystore(){throw Ge(Ft)},async signJwt(){throw Ge(Ft)},async hashString(){throw Ge(Ft)}};/*! @azure/msal-common v15.13.2 2025-11-19 */var cn;(function(i){i[i.Error=0]="Error",i[i.Warning=1]="Warning",i[i.Info=2]="Info",i[i.Verbose=3]="Verbose",i[i.Trace=4]="Trace"})(cn||(cn={}));let ya=class fh{constructor(e,t,r){this.level=cn.Info;const a=()=>{},A=e||fh.createDefaultLoggerOptions();this.localCallback=A.loggerCallback||a,this.piiLoggingEnabled=A.piiLoggingEnabled||!1,this.level=typeof A.logLevel=="number"?A.logLevel:cn.Info,this.correlationId=A.correlationId||Le.EMPTY_STRING,this.packageName=t||Le.EMPTY_STRING,this.packageVersion=r||Le.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:cn.Info}}clone(e,t,r){return new fh({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const A=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${cn[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,A,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:cn.Error,containsPii:!1,correlationId:t||Le.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:cn.Error,containsPii:!0,correlationId:t||Le.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:cn.Warning,containsPii:!1,correlationId:t||Le.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:cn.Warning,containsPii:!0,correlationId:t||Le.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:cn.Info,containsPii:!1,correlationId:t||Le.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:cn.Info,containsPii:!0,correlationId:t||Le.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:cn.Verbose,containsPii:!1,correlationId:t||Le.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:cn.Verbose,containsPii:!0,correlationId:t||Le.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:cn.Trace,containsPii:!1,correlationId:t||Le.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:cn.Trace,containsPii:!0,correlationId:t||Le.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};/*! @azure/msal-common v15.13.2 2025-11-19 */const Ib="@azure/msal-common",ag="15.13.2";/*! @azure/msal-common v15.13.2 2025-11-19 */const Ag={None:"none"};/*! @azure/msal-common v15.13.2 2025-11-19 */const Eb="redirect_uri_empty",MS="claims_request_parsing_error",kb="authority_uri_insecure",AA="url_parse_error",Tb="empty_url_error",jb="empty_input_scopes_error",lg="invalid_claims",Fb="token_request_empty",Ub="logout_request_empty",LS="invalid_code_challenge_method",cg="pkce_params_missing",dg="invalid_cloud_discovery_metadata",Qb="invalid_authority_metadata",Rb="untrusted_authority",gd="missing_ssh_jwk",Mb="missing_ssh_kid",DS="missing_nonce_authentication_header",PS="invalid_authentication_header",Lb="cannot_set_OIDCOptions",Db="cannot_allow_platform_broker",Pb="authority_mismatch",Hb="invalid_request_method_for_EAR",Nb="invalid_authorize_post_body_parameters";/*! @azure/msal-common v15.13.2 2025-11-19 */const HS={[Eb]:"A redirect URI is required for all calls, and none has been set.",[MS]:"Could not parse the given claims request object.",[kb]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[AA]:"URL could not be parsed into appropriate segments.",[Tb]:"URL was empty or null.",[jb]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[lg]:"Given claims parameter must be a stringified JSON object.",[Fb]:"Token request was empty and not found in cache.",[Ub]:"The logout request was null or undefined.",[LS]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[cg]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[dg]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Qb]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Rb]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[gd]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Mb]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[DS]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[PS]:"Invalid authentication header provided",[Lb]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Db]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Pb]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[Nb]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[Hb]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class ug extends Jt{constructor(e){super(e,HS[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,ug.prototype)}}function tn(i){return new ug(i)}/*! @azure/msal-common v15.13.2 2025-11-19 */class Lr{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),a=A=>decodeURIComponent(A.replace(/\+/g," "));return r.forEach(A=>{if(A.trim()){const[c,u]=A.split(/=(.+)/g,2);c&&u&&(t[a(c)]=a(u))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class Dn{constructor(e){const t=e?Lr.trimArrayEntries([...e]):[],r=t?Lr.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw tn(jb);this.scopes=new Set,r.forEach(a=>this.scopes.add(a))}static fromString(e){const r=(e||Le.EMPTY_STRING).split(" ");return new Dn(r)}static createSearchScopes(e){const t=e&&e.length>0?e:[...xa],r=new Dn(t);return r.containsOnlyOIDCScopes()?r.removeScope(Le.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new Dn(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return Jm.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw Ge(bb)}}removeScope(e){if(!e)throw Ge(yb);this.scopes.delete(e.trim())}removeOIDCScopes(){Jm.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Ge(ph);const t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw Ge(ph);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),a=this.getScopeCount();return t.size<a+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):Le.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.13.2 2025-11-19 */function Pc(i,e){if(!i)throw Ge(lb);try{const t=e(i);return JSON.parse(t)}catch{throw Ge(eg)}}function ia(i){if(!i)throw Ge(eg);const e=i.split(kA.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Le.EMPTY_STRING:e[1]}}/*! @azure/msal-common v15.13.2 2025-11-19 */function tx(i,e){return!!i&&!!e&&i===e.split(".")[1]}function fd(i,e,t,r){if(r){const{oid:a,sub:A,tid:c,name:u,tfp:p,acr:m,preferred_username:h,upn:y,login_hint:b}=r,L=c||p||m||"";return{tenantId:L,localAccountId:a||A||"",name:u,username:h||y||"",loginHint:b,isHomeTenant:tx(L,i)}}else return{tenantId:t,localAccountId:e,username:"",isHomeTenant:tx(t,i)}}function pg(i,e,t,r){let a=i;if(e){const{isHomeTenant:A,...c}=e;a={...i,...c}}if(t){const{isHomeTenant:A,...c}=fd(i.homeAccountId,i.localAccountId,i.tenantId,t);return a={...a,...c,idTokenClaims:t,idToken:r},a}return a}/*! @azure/msal-common v15.13.2 2025-11-19 */const ao={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.13.2 2025-11-19 */function hg(i){return i&&(i.tid||i.tfp||i.acr)||null}/*! @azure/msal-common v15.13.2 2025-11-19 */const kr={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.13.2 2025-11-19 */class In{static getAccountInfo(e){return{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,loginHint:e.loginHint,name:e.name,nativeAccountId:e.nativeAccountId,authorityType:e.authorityType,tenantProfiles:new Map((e.tenantProfiles||[]).map(t=>[t.tenantId,t])),dataBoundary:e.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){var m,h,y,b,L,S,U;const a=new In;t.authorityType===ao.Adfs?a.authorityType=Vl.ADFS_ACCOUNT_TYPE:t.protocolMode===kr.OIDC?a.authorityType=Vl.GENERIC_ACCOUNT_TYPE:a.authorityType=Vl.MSSTS_ACCOUNT_TYPE;let A;e.clientInfo&&r&&(A=Pc(e.clientInfo,r),A.xms_tdbr&&(a.dataBoundary=A.xms_tdbr==="EU"?"EU":"None")),a.clientInfo=e.clientInfo,a.homeAccountId=e.homeAccountId,a.nativeAccountId=e.nativeAccountId;const c=e.environment||t&&t.getPreferredCache();if(!c)throw Ge(og);a.environment=c,a.realm=(A==null?void 0:A.utid)||hg(e.idTokenClaims)||"",a.localAccountId=(A==null?void 0:A.uid)||((m=e.idTokenClaims)==null?void 0:m.oid)||((h=e.idTokenClaims)==null?void 0:h.sub)||"";const u=((y=e.idTokenClaims)==null?void 0:y.preferred_username)||((b=e.idTokenClaims)==null?void 0:b.upn),p=(L=e.idTokenClaims)!=null&&L.emails?e.idTokenClaims.emails[0]:null;if(a.username=u||p||"",a.loginHint=(S=e.idTokenClaims)==null?void 0:S.login_hint,a.name=((U=e.idTokenClaims)==null?void 0:U.name)||"",a.cloudGraphHostName=e.cloudGraphHostName,a.msGraphHost=e.msGraphHost,e.tenantProfiles)a.tenantProfiles=e.tenantProfiles;else{const E=fd(e.homeAccountId,a.localAccountId,a.realm,e.idTokenClaims);a.tenantProfiles=[E]}return a}static createFromAccountInfo(e,t,r){var A;const a=new In;return a.authorityType=e.authorityType||Vl.GENERIC_ACCOUNT_TYPE,a.homeAccountId=e.homeAccountId,a.localAccountId=e.localAccountId,a.nativeAccountId=e.nativeAccountId,a.realm=e.tenantId,a.environment=e.environment,a.username=e.username,a.name=e.name,a.loginHint=e.loginHint,a.cloudGraphHostName=t,a.msGraphHost=r,a.tenantProfiles=Array.from(((A=e.tenantProfiles)==null?void 0:A.values())||[]),a.dataBoundary=e.dataBoundary,a}static generateHomeAccountId(e,t,r,a,A){if(!(t===ao.Adfs||t===ao.Dsts)){if(e)try{const c=Pc(e,a.base64Decode);if(c.uid&&c.utid)return`${c.uid}.${c.utid}`}catch{}r.warning("No client info in response")}return(A==null?void 0:A.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let a=!0;if(r){const A=e.idTokenClaims||{},c=t.idTokenClaims||{};a=A.iat===c.iat&&A.nonce===c.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&a}}/*! @azure/msal-common v15.13.2 2025-11-19 */function Io(i,e){const t=NS(i);try{const r=e(t);return JSON.parse(r)}catch{throw Ge(tg)}}function Eo(i){if(!i.signin_state)return!1;const e=["kmsi","dvc_dmjd"];return i.signin_state.some(r=>e.includes(r.trim().toLowerCase()))}function NS(i){if(!i)throw Ge(cb);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(i);if(!t||t.length<4)throw Ge(tg);return t[2]}function _b(i,e){if(e===0||Date.now()-3e5>i+e)throw Ge(fb)}/*! @azure/msal-common v15.13.2 2025-11-19 */function nx(i){if(!i)return i;let e=i.toLowerCase();return Lr.endsWith(e,"?")?e=e.slice(0,-1):Lr.endsWith(e,"?/")&&(e=e.slice(0,-2)),Lr.endsWith(e,"/")||(e+="/"),e}function Ob(i){return i.startsWith("#/")?i.substring(2):i.startsWith("#")||i.startsWith("?")?i.substring(1):i}function Hc(i){if(!i||i.indexOf("=")<0)return null;try{const e=Ob(i),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.ear_jwe||t.error||t.error_description||t.state)return t}catch{throw Ge(pb)}return null}function TA(i,e=!0,t){const r=new Array;return i.forEach((a,A)=>{!e&&t&&A in t?r.push(`${A}=${a}`):r.push(`${A}=${encodeURIComponent(a)}`)}),r.join("&")}function rx(i){if(!i)return i;const e=i.split("#")[0];try{const t=new URL(e),r=t.origin+t.pathname+t.search;return nx(r)}catch{return nx(e)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class Nt{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw tn(Tb);e.includes("#")||(this._urlString=Nt.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Lr.endsWith(t,"?")?t=t.slice(0,-1):Lr.endsWith(t,"?/")&&(t=t.slice(0,-2)),Lr.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw tn(AA)}if(!e.HostNameAndPort||!e.PathSegments)throw tn(AA);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw tn(kb)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return Nt.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===Ti.COMMON||r[0]===Ti.ORGANIZATIONS)&&(r[0]=e),Nt.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw tn(AA);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let a=r.AbsolutePath.split("/");return a=a.filter(A=>A&&A.length>0),r.PathSegments=a,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw tn(AA);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===Le.FORWARD_SLASH){const a=new Nt(t).getUrlComponents();return a.Protocol+"//"+a.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Nt(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Hc(e)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const zb={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},ox=zb.endpointMetadata,gg=zb.instanceDiscoveryMetadata,Kb=new Set;gg.metadata.forEach(i=>{i.aliases.forEach(e=>{Kb.add(e)})});function _S(i,e){var a;let t;const r=i.canonicalAuthority;if(r){const A=new Nt(r).getUrlComponents().HostNameAndPort;t=ix(A,(a=i.cloudDiscoveryMetadata)==null?void 0:a.metadata,Mr.CONFIG,e)||ix(A,gg.metadata,Mr.HARDCODED_VALUES,e)||i.knownAuthorities}return t||[]}function ix(i,e,t,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${t}`),i&&e){const a=Nc(e,i);if(a)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),a.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function OS(i){return Nc(gg.metadata,i)}function Nc(i,e){for(let t=0;t<i.length;t++){const r=i[t];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v15.13.2 2025-11-19 */const _c="cache_quota_exceeded",fg="cache_error_unknown";/*! @azure/msal-common v15.13.2 2025-11-19 */const Up={[_c]:"Exceeded cache storage capacity.",[fg]:"Unexpected error occurred when using cache storage."};class sa extends Jt{constructor(e,t){const r=t||(Up[e]?Up[e]:Up[fg]);super(`${e}: ${r}`),Object.setPrototypeOf(this,sa.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function mh(i){return i instanceof Error?i.name==="QuotaExceededError"||i.name==="NS_ERROR_DOM_QUOTA_REACHED"||i.message.includes("exceeded the quota")?new sa(_c):new sa(i.name,i.message):new sa(fg)}/*! @azure/msal-common v15.13.2 2025-11-19 */class xh{constructor(e,t,r,a,A){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(Ib,ag),this.staticAuthorityOptions=A,this.performanceClient=a}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(Object.keys(e).length===0||Object.values(e).every(a=>!a))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,t);return r.length>1?r.sort(A=>A.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,t){const r=this.getAccountsFilteredBy(e,t);return r.length>0?In.getAccountInfo(r[0]):null}buildTenantProfiles(e,t,r){return e.flatMap(a=>this.getTenantProfilesFromAccountEntity(a,t,r==null?void 0:r.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,a,A){let c=null,u;if(A&&!this.tenantProfileMatchesFilter(r,A))return null;const p=this.getIdToken(e,a,t,r.tenantId);return p&&(u=Io(p.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(u,A))?null:(c=pg(e,r,u,p==null?void 0:p.secret),c)}getTenantProfilesFromAccountEntity(e,t,r,a){const A=In.getAccountInfo(e);let c=A.tenantProfiles||new Map;const u=this.getTokenKeys();if(r){const m=c.get(r);if(m)c=new Map([[r,m]]);else return[]}const p=[];return c.forEach(m=>{const h=this.getTenantedAccountInfoByFilter(A,u,m,t,a);h&&p.push(h)}),p}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}async saveCacheRecord(e,t,r,a){var A;if(!e)throw Ge(wb);try{e.account&&await this.setAccount(e.account,t,r),e.idToken&&(a==null?void 0:a.idToken)!==!1&&await this.setIdTokenCredential(e.idToken,t,r),e.accessToken&&(a==null?void 0:a.accessToken)!==!1&&await this.saveAccessToken(e.accessToken,t,r),e.refreshToken&&(a==null?void 0:a.refreshToken)!==!1&&await this.setRefreshTokenCredential(e.refreshToken,t,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(c){throw(A=this.commonLogger)==null||A.error("CacheManager.saveCacheRecord: failed"),c instanceof Jt?c:mh(c)}}async saveAccessToken(e,t,r){const a={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},A=this.getTokenKeys(),c=Dn.fromString(e.target);A.accessToken.forEach(u=>{if(!this.accessTokenKeyMatchesFilter(u,a,!1))return;const p=this.getAccessTokenCredential(u,t);p&&this.credentialMatchesFilter(p,a)&&Dn.fromString(p.target).intersectingScopeSets(c)&&this.removeAccessToken(u,t)}),await this.setAccessTokenCredential(e,t,r)}getAccountsFilteredBy(e,t){const r=this.getAccountKeys(),a=[];return r.forEach(A=>{var m;const c=this.getAccount(A,t);if(!c||e.homeAccountId&&!this.matchHomeAccountId(c,e.homeAccountId)||e.username&&!this.matchUsername(c.username,e.username)||e.environment&&!this.matchEnvironment(c,e.environment)||e.realm&&!this.matchRealm(c,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(c,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(c,e.authorityType))return;const u={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},p=(m=c.tenantProfiles)==null?void 0:m.filter(h=>this.tenantProfileMatchesFilter(h,u));p&&p.length===0||a.push(c)}),a}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===Xn.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===Gt.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach(a=>{if(!this.isAppMetadata(a))return;const A=this.getAppMetadata(a);A&&(e.environment&&!this.matchEnvironment(A,e.environment)||e.clientId&&!this.matchClientId(A,e.clientId)||(r[a]=A))}),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(a=>{if(!this.isAuthorityMetadata(a)||a.indexOf(this.clientId)===-1)return;const A=this.getAuthorityMetadata(a);A&&A.aliases.indexOf(e)!==-1&&(r=A)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,t){this.removeAccountContext(e,t);const r=this.getAccountKeys(),a=A=>A.includes(e.homeAccountId)&&A.includes(e.environment);r.filter(a).forEach(A=>{this.removeItem(A,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){const r=this.getTokenKeys(),a=A=>A.includes(e.homeAccountId)&&A.includes(e.environment);r.idToken.filter(a).forEach(A=>{this.removeIdToken(A,t)}),r.accessToken.filter(a).forEach(A=>{this.removeAccessToken(A,t)}),r.refreshToken.filter(a).forEach(A=>{this.removeRefreshToken(A,t)})}removeAccessToken(e,t){const r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==Xn.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==Gt.POP)return;const a=r.keyId;a&&this.cryptoImpl.removeTokenBindingKey(a).catch(()=>{var A;this.commonLogger.error(`Failed to remove token binding key ${a}`,t),(A=this.performanceClient)==null||A.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,t,r,a,A){this.commonLogger.trace("CacheManager - getIdToken called");const c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Xn.ID_TOKEN,clientId:this.clientId,realm:a},u=this.getIdTokensByFilter(c,t,r),p=u.size;if(p<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(p>1){let m=u;if(!a){const h=new Map;u.forEach((b,L)=>{b.realm===e.tenantId&&h.set(L,b)});const y=h.size;if(y<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),u.values().next().value;if(y===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),h.values().next().value;m=h}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),m.forEach((h,y)=>{this.removeIdToken(y,t)}),A&&t&&A.addFields({multiMatchedID:u.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),u.values().next().value}getIdTokensByFilter(e,t,r){const a=r&&r.idToken||this.getTokenKeys().idToken,A=new Map;return a.forEach(c=>{if(!this.idTokenKeyMatchesFilter(c,{clientId:this.clientId,...e}))return;const u=this.getIdTokenCredential(c,t);u&&this.credentialMatchesFilter(u,e)&&A.set(c,u)}),A}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,a){const A=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",A);const c=Dn.createSearchScopes(t.scopes),u=t.authenticationScheme||Gt.BEARER,p=u.toLowerCase()!==Gt.BEARER.toLowerCase()?Xn.ACCESS_TOKEN_WITH_AUTH_SCHEME:Xn.ACCESS_TOKEN,m={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:p,clientId:this.clientId,realm:a||e.tenantId,target:c,tokenType:u,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},h=r&&r.accessToken||this.getTokenKeys().accessToken,y=[];h.forEach(L=>{if(this.accessTokenKeyMatchesFilter(L,m,!0)){const S=this.getAccessTokenCredential(L,A);S&&this.credentialMatchesFilter(S,m)&&y.push(S)}});const b=y.length;return b<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",A),null):b>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",A),y.forEach(L=>{this.removeAccessToken(this.generateCredentialKey(L),A)}),this.performanceClient.addFields({multiMatchedAT:y.length},A),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",A),y[0])}accessTokenKeyMatchesFilter(e,t,r){const a=e.toLowerCase();if(t.clientId&&a.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&a.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&a.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&a.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){const A=t.target.asArray();for(let c=0;c<A.length;c++){if(r&&!a.includes(A[c].toLowerCase()))return!1;if(!r&&a.includes(A[c].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){const r=this.getTokenKeys(),a=[];return r.accessToken.forEach(A=>{if(!this.accessTokenKeyMatchesFilter(A,e,!0))return;const c=this.getAccessTokenCredential(A,t);c&&this.credentialMatchesFilter(c,e)&&a.push(c)}),a}getRefreshToken(e,t,r,a,A){this.commonLogger.trace("CacheManager - getRefreshToken called");const c=t?Rc:void 0,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Xn.REFRESH_TOKEN,clientId:this.clientId,familyId:c},p=a&&a.refreshToken||this.getTokenKeys().refreshToken,m=[];p.forEach(y=>{if(this.refreshTokenKeyMatchesFilter(y,u)){const b=this.getRefreshTokenCredential(y,r);b&&this.credentialMatchesFilter(b,u)&&m.push(b)}});const h=m.length;return h<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(h>1&&A&&r&&A.addFields({multiMatchedRT:h},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),m[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),a=Object.keys(r).map(c=>r[c]),A=a.length;if(A<1)return null;if(A>1)throw Ge(mb);return a[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===Rc)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){const r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var r;return t.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,t){return!!(e&&typeof e=="string"&&(t==null?void 0:t.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const a=_S(this.staticAuthorityOptions,this.commonLogger);if(a.includes(t)&&a.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==Xn.ACCESS_TOKEN&&e.credentialType!==Xn.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Dn.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(Zh)!==-1}isAuthorityMetadata(e){return e.indexOf(Mc.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Mc.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class zS extends xh{async setAccount(){throw Ge(Ft)}getAccount(){throw Ge(Ft)}async setIdTokenCredential(){throw Ge(Ft)}getIdTokenCredential(){throw Ge(Ft)}async setAccessTokenCredential(){throw Ge(Ft)}getAccessTokenCredential(){throw Ge(Ft)}async setRefreshTokenCredential(){throw Ge(Ft)}getRefreshTokenCredential(){throw Ge(Ft)}setAppMetadata(){throw Ge(Ft)}getAppMetadata(){throw Ge(Ft)}setServerTelemetry(){throw Ge(Ft)}getServerTelemetry(){throw Ge(Ft)}setAuthorityMetadata(){throw Ge(Ft)}getAuthorityMetadata(){throw Ge(Ft)}getAuthorityMetadataKeys(){throw Ge(Ft)}setThrottlingCache(){throw Ge(Ft)}getThrottlingCache(){throw Ge(Ft)}removeItem(){throw Ge(Ft)}getKeys(){throw Ge(Ft)}getAccountKeys(){throw Ge(Ft)}getTokenKeys(){throw Ge(Ft)}generateCredentialKey(){throw Ge(Ft)}generateAccountKey(){throw Ge(Ft)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const oe={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},KS={InProgress:1};/*! @azure/msal-common v15.13.2 2025-11-19 */class sx{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class Wb{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:KS.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new sx}}startPerformanceMeasurement(){return new sx}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v15.13.2 2025-11-19 */const Gb={tokenRenewalOffsetSeconds:Ab,preventCorsPreflight:!1},WS={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:cn.Info,correlationId:Le.EMPTY_STRING},GS={claimsBasedCachingEnabled:!1},VS={async sendGetRequestAsync(){throw Ge(Ft)},async sendPostRequestAsync(){throw Ge(Ft)}},$S={sku:Le.SKU,version:ag,cpu:Le.EMPTY_STRING,os:Le.EMPTY_STRING},YS={clientSecret:Le.EMPTY_STRING,clientAssertion:void 0},JS={azureCloudInstance:Ag.None,tenant:`${Le.DEFAULT_COMMON_TENANT}`},XS={application:{appName:"",appVersion:""}};function qS({authOptions:i,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:a,networkInterface:A,cryptoInterface:c,clientCredentials:u,libraryInfo:p,telemetry:m,serverTelemetryManager:h,persistencePlugin:y,serializableCache:b}){const L={...WS,...t};return{authOptions:ZS(i),systemOptions:{...Gb,...e},loggerOptions:L,cacheOptions:{...GS,...r},storageInterface:a||new zS(i.clientId,Dc,new ya(L),new Wb),networkInterface:A||VS,cryptoInterface:c||Dc,clientCredentials:u||YS,libraryInfo:{...$S,...p},telemetry:{...XS,...m},serverTelemetryManager:h||null,persistencePlugin:y||null,serializableCache:b||null}}function ZS(i){return{clientCapabilities:[],azureCloudOptions:JS,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...i}}function Vb(i){return i.authOptions.authority.options.protocolMode===kr.OIDC}/*! @azure/msal-common v15.13.2 2025-11-19 */const Ao={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.13.2 2025-11-19 */const gs="client_id",$b="redirect_uri",e5="response_type",t5="response_mode",n5="grant_type",r5="claims",o5="scope",i5="refresh_token",s5="state",a5="nonce",A5="prompt",l5="code",c5="code_challenge",d5="code_challenge_method",u5="code_verifier",p5="client-request-id",h5="x-client-SKU",g5="x-client-VER",f5="x-client-OS",m5="x-client-CPU",x5="x-client-current-telemetry",y5="x-client-last-telemetry",b5="x-ms-lib-capability",w5="x-app-name",v5="x-app-ver",C5="post_logout_redirect_uri",B5="id_token_hint",S5="client_secret",I5="client_assertion",E5="client_assertion_type",Yb="token_type",Jb="req_cnf",ax="return_spa_code",k5="nativebroker",T5="logout_hint",j5="sid",F5="login_hint",U5="domain_hint",Q5="x-client-xtra-sku",Oc="brk_client_id",zc="brk_redirect_uri",yh="instance_aware",R5="ear_jwk",M5="ear_jwe_crypto";/*! @azure/msal-common v15.13.2 2025-11-19 */function md(i,e,t){if(!e)return;const r=i.get(gs);r&&i.has(Oc)&&(t==null||t.addFields({embeddedClientId:r,embeddedRedirectUri:i.get($b)},e))}function mg(i,e){i.set(e5,e)}function L5(i,e){i.set(t5,e||mS.QUERY)}function D5(i){i.set(k5,"1")}function xg(i,e,t=!0,r=xa){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const a=t?[...e||[],...r]:e||[],A=new Dn(a);i.set(o5,A.printScopes())}function yg(i,e){i.set(gs,e)}function bg(i,e){i.set($b,e)}function P5(i,e){i.set(C5,e)}function H5(i,e){i.set(B5,e)}function N5(i,e){i.set(U5,e)}function $l(i,e){i.set(F5,e)}function Kc(i,e){i.set(fr.CCS_HEADER,`UPN:${e}`)}function xA(i,e){i.set(fr.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function Ax(i,e){i.set(j5,e)}function wg(i,e,t){const r=G5(e,t);try{JSON.parse(r)}catch{throw tn(lg)}i.set(r5,r)}function vg(i,e){i.set(p5,e)}function Cg(i,e){i.set(h5,e.sku),i.set(g5,e.version),e.os&&i.set(f5,e.os),e.cpu&&i.set(m5,e.cpu)}function Bg(i,e){e!=null&&e.appName&&i.set(w5,e.appName),e!=null&&e.appVersion&&i.set(v5,e.appVersion)}function _5(i,e){i.set(A5,e)}function Xb(i,e){e&&i.set(s5,e)}function O5(i,e){i.set(a5,e)}function Sg(i,e,t){if(e&&t)i.set(c5,e),i.set(d5,t);else throw tn(cg)}function z5(i,e){i.set(l5,e)}function K5(i,e){i.set(i5,e)}function W5(i,e){i.set(u5,e)}function qb(i,e){i.set(S5,e)}function Zb(i,e){e&&i.set(I5,e)}function e1(i,e){e&&i.set(E5,e)}function t1(i,e){i.set(n5,e)}function Ig(i){i.set(xS,"1")}function n1(i){i.has(yh)||i.set(yh,"true")}function Fi(i,e){Object.entries(e).forEach(([t,r])=>{!i.has(t)&&r&&i.set(t,r)})}function G5(i,e){let t;if(!i)t={};else try{t=JSON.parse(i)}catch{throw tn(lg)}return e&&e.length>0&&(t.hasOwnProperty(Gl.ACCESS_TOKEN)||(t[Gl.ACCESS_TOKEN]={}),t[Gl.ACCESS_TOKEN][Gl.XMS_CC]={values:e}),JSON.stringify(t)}function Eg(i,e){e&&(i.set(Yb,Gt.POP),i.set(Jb,e))}function r1(i,e){e&&(i.set(Yb,Gt.SSH),i.set(Jb,e))}function o1(i,e){i.set(x5,e.generateCurrentRequestHeaderValue()),i.set(y5,e.generateLastRequestHeaderValue())}function i1(i){i.set(b5,mA.X_MS_LIB_CAPABILITY_VALUE)}function V5(i,e){i.set(T5,e)}function xd(i,e,t){i.has(Oc)||i.set(Oc,e),i.has(zc)||i.set(zc,t)}function $5(i,e){i.set(R5,encodeURIComponent(e)),i.set(M5,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function Y5(i,e){Object.entries(e).forEach(([t,r])=>{r&&i.set(t,r)})}/*! @azure/msal-common v15.13.2 2025-11-19 */function J5(i){return i.hasOwnProperty("authorization_endpoint")&&i.hasOwnProperty("token_endpoint")&&i.hasOwnProperty("issuer")&&i.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.13.2 2025-11-19 */function X5(i){return i.hasOwnProperty("tenant_discovery_endpoint")&&i.hasOwnProperty("metadata")}/*! @azure/msal-common v15.13.2 2025-11-19 */function q5(i){return i.hasOwnProperty("error")&&i.hasOwnProperty("error_description")}/*! @azure/msal-common v15.13.2 2025-11-19 */const Dr=(i,e,t,r,a)=>(...A)=>{t.trace(`Executing function ${e}`);const c=r==null?void 0:r.startMeasurement(e,a);if(a){const u=e+"CallCount";r==null||r.incrementFields({[u]:1},a)}try{const u=i(...A);return c==null||c.end({success:!0}),t.trace(`Returning result from ${e}`),u}catch(u){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(u))}catch{t.trace("Unable to print error message.")}throw c==null||c.end({success:!1},u),u}},Re=(i,e,t,r,a)=>(...A)=>{t.trace(`Executing function ${e}`);const c=r==null?void 0:r.startMeasurement(e,a);if(a){const u=e+"CallCount";r==null||r.incrementFields({[u]:1},a)}return r==null||r.setPreQueueTime(e,a),i(...A).then(u=>(t.trace(`Returning result from ${e}`),c==null||c.end({success:!0}),u)).catch(u=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(u))}catch{t.trace("Unable to print error message.")}throw c==null||c.end({success:!1},u),u})};/*! @azure/msal-common v15.13.2 2025-11-19 */class yd{constructor(e,t,r,a){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=a}async detectRegion(e,t){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(oe.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)t.region_source=Gs.ENVIRONMENT_VARIABLE;else{const A=yd.IMDS_OPTIONS;try{const c=await Re(this.getRegionFromIMDS.bind(this),oe.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Le.IMDS_VERSION,A);if(c.status===Ci.SUCCESS&&(r=c.body,t.region_source=Gs.IMDS),c.status===Ci.BAD_REQUEST){const u=await Re(this.getCurrentVersion.bind(this),oe.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(A);if(!u)return t.region_source=Gs.FAILED_AUTO_DETECTION,null;const p=await Re(this.getRegionFromIMDS.bind(this),oe.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(u,A);p.status===Ci.SUCCESS&&(r=p.body,t.region_source=Gs.IMDS)}}catch{return t.region_source=Gs.FAILED_AUTO_DETECTION,null}}return r||(t.region_source=Gs.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,t){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(oe.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Le.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,Le.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;(t=this.performanceClient)==null||t.addQueueMeasurement(oe.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${Le.IMDS_ENDPOINT}?format=json`,e);return r.status===Ci.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}yd.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.13.2 2025-11-19 */function Tr(){return Math.round(new Date().getTime()/1e3)}function lx(i){return i.getTime()/1e3}function aa(i){return i?new Date(Number(i)*1e3):new Date}function Wc(i,e){const t=Number(i)||0;return Tr()+e>t}function cx(i,e){const t=Number(i)+e*24*60*60*1e3;return Date.now()>t}function Z5(i){return Number(i)>Tr()}/*! @azure/msal-common v15.13.2 2025-11-19 */function bd(i,e,t,r,a){return{credentialType:Xn.ID_TOKEN,homeAccountId:i,environment:e,clientId:r,secret:t,realm:a,lastUpdatedAt:Date.now().toString()}}function wd(i,e,t,r,a,A,c,u,p,m,h,y,b,L,S){var E,P;const U={homeAccountId:i,credentialType:Xn.ACCESS_TOKEN,secret:t,cachedAt:Tr().toString(),expiresOn:c.toString(),extendedExpiresOn:u.toString(),environment:e,clientId:r,realm:a,target:A,tokenType:h||Gt.BEARER,lastUpdatedAt:Date.now().toString()};if(y&&(U.userAssertionHash=y),m&&(U.refreshOn=m.toString()),L&&(U.requestedClaims=L,U.requestedClaimsHash=S),((E=U.tokenType)==null?void 0:E.toLowerCase())!==Gt.BEARER.toLowerCase())switch(U.credentialType=Xn.ACCESS_TOKEN_WITH_AUTH_SCHEME,U.tokenType){case Gt.POP:const O=Io(t,p);if(!((P=O==null?void 0:O.cnf)!=null&&P.kid))throw Ge(vb);U.keyId=O.cnf.kid;break;case Gt.SSH:U.keyId=b}return U}function s1(i,e,t,r,a,A,c){const u={credentialType:Xn.REFRESH_TOKEN,homeAccountId:i,environment:e,clientId:r,secret:t,lastUpdatedAt:Date.now().toString()};return A&&(u.userAssertionHash=A),a&&(u.familyId=a),c&&(u.expiresOn=c.toString()),u}function vd(i){return i.hasOwnProperty("homeAccountId")&&i.hasOwnProperty("environment")&&i.hasOwnProperty("credentialType")&&i.hasOwnProperty("clientId")&&i.hasOwnProperty("secret")}function dx(i){return i?vd(i)&&i.hasOwnProperty("realm")&&i.hasOwnProperty("target")&&(i.credentialType===Xn.ACCESS_TOKEN||i.credentialType===Xn.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function eI(i){return i?vd(i)&&i.hasOwnProperty("realm")&&i.credentialType===Xn.ID_TOKEN:!1}function ux(i){return i?vd(i)&&i.credentialType===Xn.REFRESH_TOKEN:!1}function tI(i,e){const t=i.indexOf(Yn.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function nI(i,e){let t=!1;i&&(t=i.indexOf(mA.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function rI({environment:i,clientId:e}){return[Zh,i,e].join(kA.CACHE_KEY_SEPARATOR).toLowerCase()}function oI(i,e){return e?i.indexOf(Zh)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function iI(i,e){return e?i.indexOf(Mc.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function px(){return Tr()+Mc.REFRESH_TIME_SECONDS}function Yl(i,e,t){i.authorization_endpoint=e.authorization_endpoint,i.token_endpoint=e.token_endpoint,i.end_session_endpoint=e.end_session_endpoint,i.issuer=e.issuer,i.endpointsFromNetwork=t,i.jwks_uri=e.jwks_uri}function Qp(i,e,t){i.aliases=e.aliases,i.preferred_cache=e.preferred_cache,i.preferred_network=e.preferred_network,i.aliasesFromNetwork=t}function hx(i){return i.expiresAt<=Tr()}/*! @azure/msal-common v15.13.2 2025-11-19 */class ar{constructor(e,t,r,a,A,c,u,p){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=a,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=A,this.performanceClient=u,this.correlationId=c,this.managedIdentity=p||!1,this.regionDiscovery=new yd(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Le.CIAM_AUTH_URL))return ao.Ciam;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case Le.ADFS:return ao.Adfs;case Le.DSTS:return ao.Dsts}return ao.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Nt(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ge(Wo)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ge(Wo)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ge(Wo)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ge(Sb);return this.replacePath(this.metadata.end_session_endpoint)}else throw Ge(Wo)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ge(Wo)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ge(Wo)}canReplaceTenant(e){return e.PathSegments.length===1&&!ar.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===ao.Default&&this.protocolMode!==kr.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const a=new Nt(this.metadata.canonical_authority).getUrlComponents(),A=a.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((u,p)=>{let m=A[p];if(p===0&&this.canReplaceTenant(a)){const h=new Nt(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];m!==h&&(this.logger.verbose(`Replacing tenant domain name ${m} with id ${h}`),m=h)}u!==m&&(t=t.replace(`/${m}/`,`/${u}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===ao.Adfs||this.protocolMode===kr.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var a,A;(a=this.performanceClient)==null||a.addQueueMeasurement(oe.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await Re(this.updateCloudDiscoveryMetadata.bind(this),oe.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await Re(this.updateEndpointMetadata.bind(this),oe.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),(A=this.performanceClient)==null||A.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:px(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==Mr.CACHE&&(r==null?void 0:r.source)!==Mr.CACHE&&(e.expiresAt=px(),e.canonical_authority=this.canonicalAuthority);const a=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(a,e),this.metadata=e}async updateEndpointMetadata(e){var a,A,c;(a=this.performanceClient)==null||a.addQueueMeasurement(oe.AuthorityUpdateEndpointMetadata,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===Mr.HARDCODED_VALUES&&(A=this.authorityOptions.azureRegionConfiguration)!=null&&A.azureRegion&&t.metadata){const u=await Re(this.updateMetadataWithRegionalInformation.bind(this),oe.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);Yl(e,u,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=await Re(this.getEndpointMetadataFromNetwork.bind(this),oe.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(c=this.authorityOptions.azureRegionConfiguration)!=null&&c.azureRegion&&(r=await Re(this.updateMetadataWithRegionalInformation.bind(this),oe.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Yl(e,r,!0),Mr.NETWORK;throw Ge(ub,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Yl(e,t,!1),{source:Mr.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const a=this.getEndpointMetadataFromHardcodedValues();if(a)return Yl(e,a,!1),{source:Mr.HARDCODED_VALUES,metadata:a};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=hx(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Mr.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Nt(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw tn(Qb)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(oe.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const a=await this.networkInterface.sendGetRequestAsync(t,e);return J5(a.body)?a.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(a){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${a}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in ox?ox[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,a,A;(r=this.performanceClient)==null||r.addQueueMeasurement(oe.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const t=(a=this.authorityOptions.azureRegionConfiguration)==null?void 0:a.azureRegion;if(t){if(t!==Le.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Fp.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,ar.replaceWithRegionalInformation(e,t);const c=await Re(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),oe.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((A=this.authorityOptions.azureRegionConfiguration)==null?void 0:A.environmentRegion,this.regionDiscoveryMetadata);if(c)return this.regionDiscoveryMetadata.region_outcome=Fp.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=c,ar.replaceWithRegionalInformation(e,c);this.regionDiscoveryMetadata.region_outcome=Fp.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(oe.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const r=await Re(this.getCloudDiscoveryMetadataFromNetwork.bind(this),oe.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return Qp(e,r,!0),Mr.NETWORK;throw tn(Rb)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Le.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Le.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Le.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Qp(e,t,!1),Mr.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const a=OS(this.hostnameAndPort);if(a)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Qp(e,a,!1),Mr.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=hx(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Mr.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===ao.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),ar.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=Nc(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),tn(dg)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),ar.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(oe.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${Le.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let r=null;try{const A=await this.networkInterface.sendGetRequestAsync(e,t);let c,u;if(X5(A.body))c=A.body,u=c.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${c.tenant_discovery_endpoint}`);else if(q5(A.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${A.status}`),c=A.body,c.error===Le.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${c.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${c.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),u=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Nc(u,this.hostnameAndPort)}catch(A){if(A instanceof Jt)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${A.errorCode}
Error Description: ${A.errorMessage}`);else{const c=A;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${c.name}
Error Description: ${c.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=ar.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&Nt.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==Ag.None){const a=t.tenant?t.tenant:Le.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${a}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Le.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ge(Wo)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Kb.has(e)}static isPublicCloudAuthority(e){return Le.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const a=new Nt(e);a.validateAsUri();const A=a.getUrlComponents();let c=`${t}.${A.HostNameAndPort}`;this.isPublicCloudAuthority(A.HostNameAndPort)&&(c=`${t}.${Le.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const u=Nt.constructAuthorityUriFromObject({...a.getUrlComponents(),HostNameAndPort:c}).urlString;return r?`${u}?${r}`:u}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=ar.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=ar.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=ar.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const a=new Nt(e).getUrlComponents();if(a.PathSegments.length===0&&a.HostNameAndPort.endsWith(Le.CIAM_AUTH_URL)){const A=a.HostNameAndPort.split(".")[0];t=`${t}${A}${Le.AAD_TENANT_DOMAIN_SUFFIX}`}return t}}ar.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Ti.COMMON,Ti.CONSUMERS,Ti.ORGANIZATIONS]);function sI(i){var a;const r=(a=new Nt(i).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:a.toLowerCase();switch(r){case Ti.COMMON:case Ti.ORGANIZATIONS:case Ti.CONSUMERS:return;default:return r}}function a1(i){return i.endsWith(Le.FORWARD_SLASH)?i:`${i}${Le.FORWARD_SLASH}`}function aI(i){const e=i.cloudDiscoveryMetadata;let t;if(e)try{t=JSON.parse(e)}catch{throw tn(dg)}return{canonicalAuthority:i.authority?a1(i.authority):void 0,knownAuthorities:i.knownAuthorities,cloudDiscoveryMetadata:t}}/*! @azure/msal-common v15.13.2 2025-11-19 */async function A1(i,e,t,r,a,A,c){c==null||c.addQueueMeasurement(oe.AuthorityFactoryCreateDiscoveredInstance,A);const u=ar.transformCIAMAuthority(a1(i)),p=new ar(u,e,t,r,a,A,c);try{return await Re(p.resolveEndpointsAsync.bind(p),oe.AuthorityResolveEndpointsAsync,a,c,A)(),p}catch{throw Ge(Wo)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class bs extends Jt{constructor(e,t,r,a,A){super(e,t,r),this.name="ServerError",this.errorNo=a,this.status=A,Object.setPrototypeOf(this,bs.prototype)}}/*! @azure/msal-common v15.13.2 2025-11-19 */function Cd(i,e,t){var r;return{clientId:i,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:t,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||((r=e.tokenBodyParameters)==null?void 0:r.clientId)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class Bo{static generateThrottlingStorageKey(e){return`${mA.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t,r){var c;const a=Bo.generateThrottlingStorageKey(t),A=e.getThrottlingCache(a);if(A){if(A.throttleTime<Date.now()){e.removeItem(a,r);return}throw new bs(((c=A.errorCodes)==null?void 0:c.join(" "))||Le.EMPTY_STRING,A.errorMessage,A.subError)}}static postProcess(e,t,r,a){if(Bo.checkResponseStatus(r)||Bo.checkResponseForRetryAfter(r)){const A={throttleTime:Bo.calculateThrottleTime(parseInt(r.headers[fr.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(Bo.generateThrottlingStorageKey(t),A,a)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(fr.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||mA.DEFAULT_THROTTLE_TIME_SECONDS),r+mA.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,a){const A=Cd(t,r,a),c=this.generateThrottlingStorageKey(A);e.removeItem(c,r.correlationId)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class Bd extends Jt{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,Bd.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}function lA(i,e,t,r){return i.errorMessage=`${i.errorMessage}, additionalErrorInfo: error.name:${r==null?void 0:r.name}, error.message:${r==null?void 0:r.message}`,new Bd(i,e,t)}/*! @azure/msal-common v15.13.2 2025-11-19 */class kg{constructor(e,t){this.config=qS(e),this.logger=new ya(this.config.loggerOptions,Ib,ag),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[fr.CONTENT_TYPE]=Le.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Ao.HOME_ACCOUNT_ID:try{const r=ia(e.credential);t[fr.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Ao.UPN:t[fr.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}async executePostToTokenEndpoint(e,t,r,a,A,c){var p;c&&((p=this.performanceClient)==null||p.addQueueMeasurement(c,A));const u=await this.sendPostRequest(a,e,{body:t,headers:r},A);return this.config.serverTelemetryManager&&u.status<500&&u.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),u}async sendPostRequest(e,t,r,a){var c,u,p;Bo.preProcess(this.cacheManager,e,a);let A;try{A=await Re(this.networkClient.sendPostRequestAsync.bind(this.networkClient),oe.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,a)(t,r);const m=A.headers||{};(u=this.performanceClient)==null||u.addFields({refreshTokenSize:((c=A.body.refresh_token)==null?void 0:c.length)||0,httpVerToken:m[fr.X_MS_HTTP_VERSION]||"",requestId:m[fr.X_MS_REQUEST_ID]||""},a)}catch(m){if(m instanceof Bd){const h=m.responseHeaders;throw h&&((p=this.performanceClient)==null||p.addFields({httpVerToken:h[fr.X_MS_HTTP_VERSION]||"",requestId:h[fr.X_MS_REQUEST_ID]||"",contentTypeHeader:h[fr.CONTENT_TYPE]||void 0,contentLengthHeader:h[fr.CONTENT_LENGTH]||void 0,httpStatus:m.httpStatus},a)),m.error}throw m instanceof Jt?m:Ge(db)}return Bo.postProcess(this.cacheManager,e,A,a),A}async updateAuthority(e,t){var A;(A=this.performanceClient)==null||A.addQueueMeasurement(oe.UpdateTokenEndpointAuthority,t);const r=`https://${e}/${this.authority.tenant}/`,a=await A1(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=a}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&xd(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Fi(t,e.tokenQueryParameters),vg(t,e.correlationId),md(t,e.correlationId,this.performanceClient),TA(t)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const Gc="no_tokens_found",l1="native_account_unavailable",Tg="refresh_token_expired",jg="ux_not_allowed",AI="interaction_required",lI="consent_required",cI="login_required",Sd="bad_token";/*! @azure/msal-common v15.13.2 2025-11-19 */const gx=[AI,lI,cI,Sd,jg],dI=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],uI={[Gc]:"No refresh token found in the cache. Please sign-in.",[l1]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Tg]:"Refresh token has expired.",[Sd]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[jg]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class ho extends Jt{constructor(e,t,r,a,A,c,u,p){super(e,t,r),Object.setPrototypeOf(this,ho.prototype),this.timestamp=a||Le.EMPTY_STRING,this.traceId=A||Le.EMPTY_STRING,this.correlationId=c||Le.EMPTY_STRING,this.claims=u||Le.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=p}}function c1(i,e,t){const r=!!i&&gx.indexOf(i)>-1,a=!!t&&dI.indexOf(t)>-1,A=!!e&&gx.some(c=>e.indexOf(c)>-1);return r||A||a}function Vc(i){return new ho(i,uI[i])}/*! @azure/msal-common v15.13.2 2025-11-19 */class ba{static setRequestState(e,t,r){const a=ba.generateLibraryState(e,r);return t?`${a}${Le.RESOURCE_DELIM}${t}`:a}static generateLibraryState(e,t){if(!e)throw Ge(gh);const r={id:e.createNewGuid()};t&&(r.meta=t);const a=JSON.stringify(r);return e.base64Encode(a)}static parseRequestState(e,t){if(!e)throw Ge(gh);if(!t)throw Ge(pa);try{const r=t.split(Le.RESOURCE_DELIM),a=r[0],A=r.length>1?r.slice(1).join(Le.RESOURCE_DELIM):Le.EMPTY_STRING,c=e.base64Decode(a),u=JSON.parse(c);return{userRequestState:A||Le.EMPTY_STRING,libraryState:u}}catch{throw Ge(pa)}}}/*! @azure/msal-common v15.13.2 2025-11-19 */const pI={SW:"sw"};class ha{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var A;(A=this.performanceClient)==null||A.addQueueMeasurement(oe.PopTokenGenerateCnf,e.correlationId);const r=await Re(this.generateKid.bind(this),oe.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),a=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:a}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(oe.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:pI.SW}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,a){const{resourceRequestMethod:A,resourceRequestUri:c,shrClaims:u,shrNonce:p,shrOptions:m}=r,h=c?new Nt(c):void 0,y=h==null?void 0:h.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:Tr(),m:A==null?void 0:A.toUpperCase(),u:y==null?void 0:y.HostNameAndPort,nonce:p||this.cryptoUtils.createNewGuid(),p:y==null?void 0:y.AbsolutePath,q:y!=null&&y.QueryString?[[],y.QueryString]:void 0,client_claims:u||void 0,...a},t,m,r.correlationId)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class hI{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.13.2 2025-11-19 */class fs{constructor(e,t,r,a,A,c,u){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=a,this.serializableCache=A,this.persistencePlugin=c,this.performanceClient=u}validateTokenResponse(e,t){var r;if(e.error||e.error_description||e.suberror){const a=`Error(s): ${e.error_codes||Le.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Le.NOT_AVAILABLE} - Description: ${e.error_description||Le.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Le.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Le.NOT_AVAILABLE}`,A=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,c=new bs(e.error,a,e.suberror,A,e.status);if(t&&e.status&&e.status>=Ci.SERVER_ERROR_RANGE_START&&e.status<=Ci.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${c}`);return}else if(t&&e.status&&e.status>=Ci.CLIENT_ERROR_RANGE_START&&e.status<=Ci.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${c}`);return}throw c1(e.error,e.error_description,e.suberror)?new ho(e.error,e.error_description,e.suberror,e.timestamp||Le.EMPTY_STRING,e.trace_id||Le.EMPTY_STRING,e.correlation_id||Le.EMPTY_STRING,e.claims||Le.EMPTY_STRING,A):c}}async handleServerTokenResponse(e,t,r,a,A,c,u,p,m){var S;(S=this.performanceClient)==null||S.addQueueMeasurement(oe.HandleServerTokenResponse,e.correlation_id);let h;if(e.id_token){if(h=Io(e.id_token||Le.EMPTY_STRING,this.cryptoObj.base64Decode),A&&A.nonce&&h.nonce!==A.nonce)throw Ge(gb);if(a.maxAge||a.maxAge===0){const U=h.auth_time;if(!U)throw Ge(ng);_b(U,a.maxAge)}}this.homeAccountIdentifier=In.generateHomeAccountId(e.client_info||Le.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,h);let y;A&&A.state&&(y=ba.parseRequestState(this.cryptoObj,A.state)),e.key_id=e.key_id||a.sshKid||void 0;const b=this.generateCacheRecord(e,t,r,a,h,c,A);let L;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),L=new hI(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(L)),u&&!p&&b.account){const U=this.cacheStorage.generateAccountKey(In.getAccountInfo(b.account));if(!this.cacheStorage.getAccount(U,a.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await fs.generateAuthenticationResult(this.cryptoObj,t,b,!1,a,h,y,void 0,m)}await this.cacheStorage.saveCacheRecord(b,a.correlationId,Eo(h||{}),a.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&L&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(L))}return fs.generateAuthenticationResult(this.cryptoObj,t,b,!1,a,h,y,e,m)}generateCacheRecord(e,t,r,a,A,c,u){const p=t.getPreferredCache();if(!p)throw Ge(og);const m=hg(A);let h,y;e.id_token&&A&&(h=bd(this.homeAccountIdentifier,p,e.id_token,this.clientId,m||""),y=Fg(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,a.correlationId,A,e.client_info,p,m,u,void 0,this.logger));let b=null;if(e.access_token){const U=e.scope?Dn.fromString(e.scope):new Dn(a.scopes||[]),E=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,P=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,O=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,ve=r+E,ce=ve+P,Q=O&&O>0?r+O:void 0;b=wd(this.homeAccountIdentifier,p,e.access_token,this.clientId,m||t.tenant||"",U.printScopes(),ve,ce,this.cryptoObj.base64Decode,Q,e.token_type,c,e.key_id,a.claims,a.requestedClaimsHash)}let L=null;if(e.refresh_token){let U;if(e.refresh_token_expires_in){const E=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;U=r+E}L=s1(this.homeAccountIdentifier,p,e.refresh_token,this.clientId,e.foci,c,U)}let S=null;return e.foci&&(S={clientId:this.clientId,environment:p,familyId:e.foci}),{account:y,idToken:h,accessToken:b,refreshToken:L,appMetadata:S}}static async generateAuthenticationResult(e,t,r,a,A,c,u,p,m){var ve,ce,Q,V,Z;let h=Le.EMPTY_STRING,y=[],b=null,L,S,U=Le.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Gt.POP&&!A.popKid){const le=new ha(e),{secret:$,keyId:ue}=r.accessToken;if(!ue)throw Ge(ig);h=await le.signPopToken($,ue,A)}else h=r.accessToken.secret;y=Dn.fromString(r.accessToken.target).asArray(),b=aa(r.accessToken.expiresOn),L=aa(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(S=aa(r.accessToken.refreshOn))}r.appMetadata&&(U=r.appMetadata.familyId===Rc?Rc:"");const E=(c==null?void 0:c.oid)||(c==null?void 0:c.sub)||"",P=(c==null?void 0:c.tid)||"";p!=null&&p.spa_accountid&&r.account&&(r.account.nativeAccountId=p==null?void 0:p.spa_accountid);const O=r.account?pg(In.getAccountInfo(r.account),void 0,c,(ve=r.idToken)==null?void 0:ve.secret):null;return{authority:t.canonicalAuthority,uniqueId:E,tenantId:P,scopes:y,account:O,idToken:((ce=r==null?void 0:r.idToken)==null?void 0:ce.secret)||"",idTokenClaims:c||{},accessToken:h,fromCache:a,expiresOn:b,extExpiresOn:L,refreshOn:S,correlationId:A.correlationId,requestId:m||Le.EMPTY_STRING,familyId:U,tokenType:((Q=r.accessToken)==null?void 0:Q.tokenType)||Le.EMPTY_STRING,state:u?u.userRequestState:Le.EMPTY_STRING,cloudGraphHostName:((V=r.account)==null?void 0:V.cloudGraphHostName)||Le.EMPTY_STRING,msGraphHost:((Z=r.account)==null?void 0:Z.msGraphHost)||Le.EMPTY_STRING,code:p==null?void 0:p.spa_code,fromNativeBroker:!1}}}function Fg(i,e,t,r,a,A,c,u,p,m,h,y){y==null||y.verbose("setCachedAccount called");const L=i.getAccountKeys().find(O=>O.startsWith(t));let S=null;L&&(S=i.getAccount(L,a));const U=S||In.createAccount({homeAccountId:t,idTokenClaims:A,clientInfo:c,environment:u,cloudGraphHostName:m==null?void 0:m.cloud_graph_host_name,msGraphHost:m==null?void 0:m.msgraph_host,nativeAccountId:h},e,r),E=U.tenantProfiles||[],P=p||U.realm;if(P&&!E.find(O=>O.tenantId===P)){const O=fd(t,U.localAccountId,P,A);E.push(O)}return U.tenantProfiles=E,U}/*! @azure/msal-common v15.13.2 2025-11-19 */async function d1(i,e,t){return typeof i=="string"?i:i({clientId:e,tokenEndpoint:t})}/*! @azure/msal-common v15.13.2 2025-11-19 */class u1 extends kg{constructor(e,t){var r;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async acquireToken(e,t){var u,p;if((u=this.performanceClient)==null||u.addQueueMeasurement(oe.AuthClientAcquireToken,e.correlationId),!e.code)throw Ge(xb);const r=Tr(),a=await Re(this.executeTokenRequest.bind(this),oe.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),A=(p=a.headers)==null?void 0:p[fr.X_MS_REQUEST_ID],c=new fs(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return c.validateTokenResponse(a.body),Re(c.handleServerTokenResponse.bind(c),oe.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(a.body,this.authority,r,e,t,void 0,void 0,void 0,A)}getLogoutUri(e){if(!e)throw tn(Ub);const t=this.createLogoutUrlQueryString(e);return Nt.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var m;(m=this.performanceClient)==null||m.addQueueMeasurement(oe.AuthClientExecuteTokenRequest,t.correlationId);const r=this.createTokenQueryParameters(t),a=Nt.appendQueryString(e.tokenEndpoint,r),A=await Re(this.createTokenRequestBody.bind(this),oe.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t);let c;if(t.clientInfo)try{const h=Pc(t.clientInfo,this.cryptoUtils.base64Decode);c={credential:`${h.uid}${kA.CLIENT_INFO_SEPARATOR}${h.utid}`,type:Ao.HOME_ACCOUNT_ID}}catch(h){this.logger.verbose("Could not parse client info for CCS Header: "+h)}const u=this.createTokenRequestHeaders(c||t.ccsCredential),p=Cd(this.config.authOptions.clientId,t);return Re(this.executePostToTokenEndpoint.bind(this),oe.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(a,A,u,p,t.correlationId,oe.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var a,A;(a=this.performanceClient)==null||a.addQueueMeasurement(oe.AuthClientCreateTokenRequestBody,e.correlationId);const t=new Map;if(yg(t,e.embeddedClientId||((A=e.tokenBodyParameters)==null?void 0:A[gs])||this.config.authOptions.clientId),this.includeRedirectUri)bg(t,e.redirectUri);else if(!e.redirectUri)throw tn(Eb);if(xg(t,e.scopes,!0,this.oidcDefaultScopes),z5(t,e.code),Cg(t,this.config.libraryInfo),Bg(t,this.config.telemetry.application),i1(t),this.serverTelemetryManager&&!Vb(this.config)&&o1(t,this.serverTelemetryManager),e.codeVerifier&&W5(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&qb(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const c=this.config.clientCredentials.clientAssertion;Zb(t,await d1(c.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),e1(t,c.assertionType)}if(t1(t,ab.AUTHORIZATION_CODE_GRANT),Ig(t),e.authenticationScheme===Gt.POP){const c=new ha(this.cryptoUtils,this.performanceClient);let u;e.popKid?u=this.cryptoUtils.encodeKid(e.popKid):u=(await Re(c.generateCnf.bind(c),oe.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Eg(t,u)}else if(e.authenticationScheme===Gt.SSH)if(e.sshJwk)r1(t,e.sshJwk);else throw tn(gd);(!Lr.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&wg(t,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const c=Pc(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${c.uid}${kA.CLIENT_INFO_SEPARATOR}${c.utid}`,type:Ao.HOME_ACCOUNT_ID}}catch(c){this.logger.verbose("Could not parse client info for CCS Header: "+c)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case Ao.HOME_ACCOUNT_ID:try{const c=ia(r.credential);xA(t,c)}catch(c){this.logger.verbose("Could not parse home account ID for CCS Header: "+c)}break;case Ao.UPN:Kc(t,r.credential);break}return e.embeddedClientId&&xd(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Fi(t,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[ax])&&Fi(t,{[ax]:"1"}),md(t,e.correlationId,this.performanceClient),TA(t)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&P5(t,e.postLogoutRedirectUri),e.correlationId&&vg(t,e.correlationId),e.idTokenHint&&H5(t,e.idTokenHint),e.state&&Xb(t,e.state),e.logoutHint&&V5(t,e.logoutHint),e.extraQueryParameters&&Fi(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&n1(t),TA(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const gI=300;class fI extends kg{constructor(e,t){super(e,t)}async acquireToken(e){var c,u;(c=this.performanceClient)==null||c.addQueueMeasurement(oe.RefreshTokenClientAcquireToken,e.correlationId);const t=Tr(),r=await Re(this.executeTokenRequest.bind(this),oe.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),a=(u=r.headers)==null?void 0:u[fr.X_MS_REQUEST_ID],A=new fs(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return A.validateTokenResponse(r.body),Re(A.handleServerTokenResponse.bind(A),oe.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,a)}async acquireTokenByRefreshToken(e){var r;if(!e)throw tn(Fb);if((r=this.performanceClient)==null||r.addQueueMeasurement(oe.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Ge(rg);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await Re(this.acquireTokenWithCachedRefreshToken.bind(this),oe.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(a){const A=a instanceof ho&&a.errorCode===Gc,c=a instanceof bs&&a.errorCode===qm.INVALID_GRANT_ERROR&&a.subError===qm.CLIENT_MISMATCH_ERROR;if(A||c)return Re(this.acquireTokenWithCachedRefreshToken.bind(this),oe.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw a}return Re(this.acquireTokenWithCachedRefreshToken.bind(this),oe.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){var A,c,u;(A=this.performanceClient)==null||A.addQueueMeasurement(oe.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=Dr(this.cacheManager.getRefreshToken.bind(this.cacheManager),oe.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!r)throw Vc(Gc);if(r.expiresOn&&Wc(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||gI))throw(c=this.performanceClient)==null||c.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Vc(Tg);const a={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Gt.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Ao.HOME_ACCOUNT_ID}};try{return await Re(this.acquireToken.bind(this),oe.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(a)}catch(p){if(p instanceof ho&&((u=this.performanceClient)==null||u.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),p.subError===Sd)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const m=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(m,e.correlationId)}throw p}}async executeTokenRequest(e,t){var p;(p=this.performanceClient)==null||p.addQueueMeasurement(oe.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),a=Nt.appendQueryString(t.tokenEndpoint,r),A=await Re(this.createTokenRequestBody.bind(this),oe.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),c=this.createTokenRequestHeaders(e.ccsCredential),u=Cd(this.config.authOptions.clientId,e);return Re(this.executePostToTokenEndpoint.bind(this),oe.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(a,A,c,u,e.correlationId,oe.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var r,a,A;(r=this.performanceClient)==null||r.addQueueMeasurement(oe.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const t=new Map;if(yg(t,e.embeddedClientId||((a=e.tokenBodyParameters)==null?void 0:a[gs])||this.config.authOptions.clientId),e.redirectUri&&bg(t,e.redirectUri),xg(t,e.scopes,!0,(A=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:A.defaultScopes),t1(t,ab.REFRESH_TOKEN_GRANT),Ig(t),Cg(t,this.config.libraryInfo),Bg(t,this.config.telemetry.application),i1(t),this.serverTelemetryManager&&!Vb(this.config)&&o1(t,this.serverTelemetryManager),K5(t,e.refreshToken),this.config.clientCredentials.clientSecret&&qb(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const c=this.config.clientCredentials.clientAssertion;Zb(t,await d1(c.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),e1(t,c.assertionType)}if(e.authenticationScheme===Gt.POP){const c=new ha(this.cryptoUtils,this.performanceClient);let u;e.popKid?u=this.cryptoUtils.encodeKid(e.popKid):u=(await Re(c.generateCnf.bind(c),oe.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Eg(t,u)}else if(e.authenticationScheme===Gt.SSH)if(e.sshJwk)r1(t,e.sshJwk);else throw tn(gd);if((!Lr.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&wg(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Ao.HOME_ACCOUNT_ID:try{const c=ia(e.ccsCredential.credential);xA(t,c)}catch(c){this.logger.verbose("Could not parse home account ID for CCS Header: "+c)}break;case Ao.UPN:Kc(t,e.ccsCredential.credential);break}return e.embeddedClientId&&xd(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Fi(t,e.tokenBodyParameters),md(t,e.correlationId,this.performanceClient),TA(t)}}/*! @azure/msal-common v15.13.2 2025-11-19 */class mI extends kg{constructor(e,t){super(e,t)}async acquireCachedToken(e){var p;(p=this.performanceClient)==null||p.addQueueMeasurement(oe.SilentFlowClientAcquireCachedToken,e.correlationId);let t=is.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Lr.isEmptyObj(e.claims))throw this.setCacheOutcome(is.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Ge(ji);if(!e.account)throw Ge(rg);const r=e.account.tenantId||sI(e.authority),a=this.cacheManager.getTokenKeys(),A=this.cacheManager.getAccessToken(e.account,e,a,r);if(A){if(Z5(A.cachedAt)||Wc(A.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(is.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Ge(ji);A.refreshOn&&Wc(A.refreshOn,0)&&(t=is.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(is.NO_CACHED_ACCESS_TOKEN,e.correlationId),Ge(ji);const c=e.authority||this.authority.getPreferredCache(),u={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:A,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,a,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(c)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Re(this.generateResultFromCacheRecord.bind(this),oe.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(u,e),t]}setCacheOutcome(e,t){var r,a;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(a=this.performanceClient)==null||a.addFields({cacheOutcome:e},t),e!==is.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){var a;(a=this.performanceClient)==null||a.addQueueMeasurement(oe.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=Io(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){const A=r==null?void 0:r.auth_time;if(!A)throw Ge(ng);_b(A,t.maxAge)}return fs.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const xI={sendGetRequestAsync:()=>Promise.reject(Ge(Ft)),sendPostRequestAsync:()=>Promise.reject(Ge(Ft))};/*! @azure/msal-common v15.13.2 2025-11-19 */function yI(i,e,t,r){var u,p;const a=e.correlationId,A=new Map;yg(A,e.embeddedClientId||((u=e.extraQueryParameters)==null?void 0:u[gs])||i.clientId);const c=[...e.scopes||[],...e.extraScopesToConsent||[]];if(xg(A,c,!0,(p=i.authority.options.OIDCOptions)==null?void 0:p.defaultScopes),bg(A,e.redirectUri),vg(A,a),L5(A,e.responseMode),Ig(A),e.prompt&&(_5(A,e.prompt),r==null||r.addFields({prompt:e.prompt},a)),e.domainHint&&(N5(A,e.domainHint),r==null||r.addFields({domainHintFromRequest:!0},a)),e.prompt!==Zn.SELECT_ACCOUNT)if(e.sid&&e.prompt===Zn.NONE)t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Ax(A,e.sid),r==null||r.addFields({sidFromRequest:!0},a);else if(e.account){const m=vI(e.account);let h=CI(e.account);if(h&&e.domainHint&&(t.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),h=null),h){t.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),$l(A,h),r==null||r.addFields({loginHintFromClaim:!0},a);try{const y=ia(e.account.homeAccountId);xA(A,y)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(m&&e.prompt===Zn.NONE){t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Ax(A,m),r==null||r.addFields({sidFromClaim:!0},a);try{const y=ia(e.account.homeAccountId);xA(A,y)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),$l(A,e.loginHint),Kc(A,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},a);else if(e.account.username){t.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),$l(A,e.account.username),r==null||r.addFields({loginHintFromUpn:!0},a);try{const y=ia(e.account.homeAccountId);xA(A,y)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),$l(A,e.loginHint),Kc(A,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},a));else t.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&O5(A,e.nonce),e.state&&Xb(A,e.state),(e.claims||i.clientCapabilities&&i.clientCapabilities.length>0)&&wg(A,e.claims,i.clientCapabilities),e.embeddedClientId&&xd(A,i.clientId,i.redirectUri),i.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(yh))&&n1(A),A}function Ug(i,e,t,r){const a=TA(e,t,r);return Nt.appendQueryString(i.authorizationEndpoint,a)}function bI(i,e){if(p1(i,e),!i.code)throw Ge(Cb);return i}function p1(i,e){if(!i.state||!e)throw i.state?Ge(uh,"Cached State"):Ge(uh,"Server State");let t,r;try{t=decodeURIComponent(i.state)}catch{throw Ge(pa,i.state)}try{r=decodeURIComponent(e)}catch{throw Ge(pa,i.state)}if(t!==r)throw Ge(hb);if(i.error||i.error_description||i.suberror){const a=wI(i);throw c1(i.error,i.error_description,i.suberror)?new ho(i.error||"",i.error_description,i.suberror,i.timestamp||"",i.trace_id||"",i.correlation_id||"",i.claims||"",a):new bs(i.error||"",i.error_description,i.suberror,a)}}function wI(i){var r,a;const e="code=",t=(r=i.error_uri)==null?void 0:r.lastIndexOf(e);return t&&t>=0?(a=i.error_uri)==null?void 0:a.substring(t+e.length):void 0}function vI(i){var e;return((e=i.idTokenClaims)==null?void 0:e.sid)||null}function CI(i){var e;return i.loginHint||((e=i.idTokenClaims)==null?void 0:e.login_hint)||null}/*! @azure/msal-common v15.13.2 2025-11-19 */const fx=",",h1="|";function BI(i){const{skus:e,libraryName:t,libraryVersion:r,extensionName:a,extensionVersion:A}=i,c=new Map([[0,[t,r]],[2,[a,A]]]);let u=[];if(e!=null&&e.length){if(u=e.split(fx),u.length<4)return e}else u=Array.from({length:4},()=>h1);return c.forEach((p,m)=>{var h,y;p.length===2&&((h=p[0])!=null&&h.length)&&((y=p[1])!=null&&y.length)&&SI({skuArr:u,index:m,skuName:p[0],skuVersion:p[1]})}),u.join(fx)}function SI(i){const{skuArr:e,index:t,skuName:r,skuVersion:a}=i;t>=e.length||(e[t]=[r,a].join(h1))}class jA{constructor(e,t){this.cacheOutcome=is.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Le.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Le.EMPTY_STRING,this.telemetryCacheKey=Yn.CACHE_KEY+kA.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${Yn.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&t.push(`broker_error=${r}`);const a=t.join(Yn.VALUE_SEPARATOR),A=this.getRegionDiscoveryFields(),c=[e,A].join(Yn.VALUE_SEPARATOR);return[Yn.SCHEMA_VERSION,c,a].join(Yn.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=jA.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(Yn.VALUE_SEPARATOR),a=e.errors.slice(0,t).join(Yn.VALUE_SEPARATOR),A=e.errors.length,c=t<A?Yn.OVERFLOW_TRUE:Yn.OVERFLOW_FALSE,u=[A,c].join(Yn.VALUE_SEPARATOR);return[Yn.SCHEMA_VERSION,e.cacheHits,r,a,u].join(Yn.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=Yn.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Jt?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Yn.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),t=jA.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const a={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,a=0;const A=e.errors.length;for(t=0;t<A;t++){const c=e.failedRequests[2*t]||Le.EMPTY_STRING,u=e.failedRequests[2*t+1]||Le.EMPTY_STRING,p=e.errors[t]||Le.EMPTY_STRING;if(a+=c.toString().length+u.toString().length+p.length+3,a<Yn.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Le.EMPTY_STRING),e.push(this.regionSource||Le.EMPTY_STRING),e.push(this.regionOutcome||Le.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return BI(e)}}/*! @azure/msal-common v15.13.2 2025-11-19 */const g1="missing_kid_error",f1="missing_alg_error";/*! @azure/msal-common v15.13.2 2025-11-19 */const II={[g1]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[f1]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Qg extends Jt{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,Qg.prototype)}}function mx(i){return new Qg(i,II[i])}/*! @azure/msal-common v15.13.2 2025-11-19 */class Rg{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw mx(g1);if(!e.alg)throw mx(f1);const t=new Rg({typ:e.typ||yS.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const Mg="pkce_not_created",Lg="ear_jwk_empty",m1="ear_jwe_empty",bh="crypto_nonexistent",Id="empty_navigate_uri",x1="hash_empty_error",Dg="no_state_in_hash",y1="hash_does_not_contain_known_properties",b1="unable_to_parse_state",w1="state_interaction_type_mismatch",v1="interaction_in_progress",C1="popup_window_error",B1="empty_window_error",FA="user_cancelled",EI="monitor_popup_timeout",S1="monitor_window_timeout",I1="redirect_in_iframe",E1="block_iframe_reload",k1="block_nested_popups",kI="iframe_closed_prematurely",Ed="silent_logout_unsupported",T1="no_account_error",TI="silent_prompt_value_error",j1="no_token_request_cache_error",F1="unable_to_parse_token_request_cache_error",jI="auth_request_not_set_error",FI="invalid_cache_type",kd="non_browser_environment",Zs="database_not_open",$c="no_network_connectivity",U1="post_request_failed",Q1="get_request_failed",wh="failed_to_parse_response",R1="unable_to_load_token",Pg="crypto_key_not_found",M1="auth_code_required",L1="auth_code_or_nativeAccountId_required",D1="spa_code_and_nativeAccountId_present",Hg="database_unavailable",P1="unable_to_acquire_token_from_native_platform",H1="native_handshake_timeout",N1="native_extension_not_installed",Ng="native_connection_not_established",yA="uninitialized_public_client_application",_1="native_prompt_not_supported",O1="invalid_base64_string",z1="invalid_pop_token_request",K1="failed_to_build_headers",W1="failed_to_parse_headers",Cc="failed_to_decrypt_ear_response",Yc="timed_out";/*! @azure/msal-browser v4.26.2 2025-11-19 */const _o="For more visit: aka.ms/msaljs/browser-errors",UI={[Mg]:"The PKCE code challenge and verifier could not be generated.",[Lg]:"No EAR encryption key provided. This is unexpected.",[m1]:"Server response does not contain ear_jwe property. This is unexpected.",[bh]:"The crypto object or function is not available.",[Id]:"Navigation URI is empty. Please check stack trace for more info.",[x1]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${_o}`,[Dg]:"Hash does not contain state. Please verify that the request originated from msal.",[y1]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${_o}`,[b1]:"Unable to parse state. Please verify that the request originated from msal.",[w1]:"Hash contains state but the interaction type does not match the caller.",[v1]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${_o}`,[C1]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[B1]:"window.open returned null or undefined window object.",[FA]:"User cancelled the flow.",[EI]:`Token acquisition in popup failed due to timeout.  ${_o}`,[S1]:`Token acquisition in iframe failed due to timeout.  ${_o}`,[I1]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[E1]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${_o}`,[k1]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[kI]:"The iframe being monitored was closed prematurely.",[Ed]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[T1]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[TI]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[j1]:"No token request found in cache.",[F1]:"The cached token request could not be parsed.",[jI]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[FI]:"Invalid cache type",[kd]:"Login and token requests are not supported in non-browser environments.",[Zs]:"Database is not open!",[$c]:"No network connectivity. Check your internet connection.",[U1]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Q1]:"Network request failed. Please check the network trace to determine root cause.",[wh]:"Failed to parse network response. Check network trace.",[R1]:"Error loading token to cache.",[Pg]:"Cryptographic Key or Keypair not found in browser storage.",[M1]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[L1]:"An authorization code or nativeAccountId must be provided to this flow.",[D1]:"Request cannot contain both spa code and native account id.",[Hg]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[P1]:`Unable to acquire token from native platform.  ${_o}`,[H1]:"Timed out while attempting to establish connection to browser extension",[N1]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Ng]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${_o}`,[yA]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${_o}`,[_1]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[O1]:"Invalid base64 encoded string.",[z1]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[K1]:"Failed to build request headers object.",[W1]:"Failed to parse response headers",[Cc]:"Failed to decrypt ear response",[Yc]:"The request timed out."};class HA extends Jt{constructor(e,t){super(e,UI[e],t),Object.setPrototypeOf(this,HA.prototype),this.name="BrowserAuthError"}}function rt(i,e){return new HA(i,e)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const Ir={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Vr={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},rA={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Gn={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},xx={GET:"GET",POST:"POST"},wi={SIGNIN:"signin",SIGNOUT:"signout"},Tn={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},Jl={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Kt={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var xt;(function(i){i.Redirect="redirect",i.Popup="popup",i.Silent="silent",i.None="none"})(xt||(xt={}));const Rn={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},yx={scopes:xa},G1="jwk",QI={React:"@azure/msal-react"},vh="msal.db",RI=1,MI=`${vh}.keys`,hr={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},LI=[hr.Default,hr.Skip,hr.RefreshTokenAndNetwork];/*! @azure/msal-browser v4.26.2 2025-11-19 */function Xl(i){return encodeURIComponent(UA(i).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Li(i){return V1(i).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function UA(i){return V1(new TextEncoder().encode(i))}function V1(i){const e=Array.from(i,t=>String.fromCodePoint(t)).join("");return btoa(e)}/*! @azure/msal-browser v4.26.2 2025-11-19 */function mr(i){return new TextDecoder().decode(Ui(i))}function Ui(i){let e=i.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw rt(O1)}const t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const DI="RSASSA-PKCS1-v1_5",wa="AES-GCM",$1="HKDF",_g="SHA-256",PI=2048,HI=new Uint8Array([1,0,1]),bx="0123456789abcdef",wx=new Uint32Array(1),Og="raw",Y1="encrypt",zg="decrypt",NI="deriveKey",_I="crypto_subtle_undefined",Kg={name:DI,hash:_g,modulusLength:PI,publicExponent:HI};function OI(i){if(!window)throw rt(kd);if(!window.crypto)throw rt(bh);if(!i&&!window.crypto.subtle)throw rt(bh,_I)}async function J1(i,e,t){e==null||e.addQueueMeasurement(oe.Sha256Digest,t);const a=new TextEncoder().encode(i);return window.crypto.subtle.digest(_g,a)}function zI(i){return window.crypto.getRandomValues(i)}function Rp(){return window.crypto.getRandomValues(wx),wx[0]}function go(){const i=Date.now(),e=Rp()*1024+(Rp()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),a=e&2**30-1,A=Rp();t[0]=i/2**40,t[1]=i/2**32,t[2]=i/2**24,t[3]=i/2**16,t[4]=i/2**8,t[5]=i,t[6]=112|r>>>8,t[7]=r,t[8]=128|a>>>24,t[9]=a>>>16,t[10]=a>>>8,t[11]=a,t[12]=A>>>24,t[13]=A>>>16,t[14]=A>>>8,t[15]=A;let c="";for(let u=0;u<t.length;u++)c+=bx.charAt(t[u]>>>4),c+=bx.charAt(t[u]&15),(u===3||u===5||u===7||u===9)&&(c+="-");return c}async function KI(i,e){return window.crypto.subtle.generateKey(Kg,i,e)}async function Mp(i){return window.crypto.subtle.exportKey(G1,i)}async function WI(i,e,t){return window.crypto.subtle.importKey(G1,i,Kg,e,t)}async function GI(i,e){return window.crypto.subtle.sign(Kg,i,e)}async function Wg(){const i=await X1(),t={alg:"dir",kty:"oct",k:Li(new Uint8Array(i))};return UA(JSON.stringify(t))}async function VI(i){const e=mr(i),r=JSON.parse(e).k,a=Ui(r);return window.crypto.subtle.importKey(Og,a,wa,!1,[zg])}async function $I(i,e){const t=e.split(".");if(t.length!==5)throw rt(Cc,"jwe_length");const r=await VI(i).catch(()=>{throw rt(Cc,"import_key")});try{const a=new TextEncoder().encode(t[0]),A=Ui(t[2]),c=Ui(t[3]),u=Ui(t[4]),p=u.byteLength*8,m=new Uint8Array(c.length+u.length);m.set(c),m.set(u,c.length);const h=await window.crypto.subtle.decrypt({name:wa,iv:A,tagLength:p,additionalData:a},r,m);return new TextDecoder().decode(h)}catch{throw rt(Cc,"decrypt")}}async function X1(){const i=await window.crypto.subtle.generateKey({name:wa,length:256},!0,[Y1,zg]);return window.crypto.subtle.exportKey(Og,i)}async function vx(i){return window.crypto.subtle.importKey(Og,i,$1,!1,[NI])}async function q1(i,e,t){return window.crypto.subtle.deriveKey({name:$1,salt:e,hash:_g,info:new TextEncoder().encode(t)},i,{name:wa,length:256},!1,[Y1,zg])}async function YI(i,e,t){const r=new TextEncoder().encode(e),a=window.crypto.getRandomValues(new Uint8Array(16)),A=await q1(i,a,t),c=await window.crypto.subtle.encrypt({name:wa,iv:new Uint8Array(12)},A,r);return{data:Li(new Uint8Array(c)),nonce:Li(a)}}async function Cx(i,e,t,r){const a=Ui(r),A=await q1(i,Ui(e),t),c=await window.crypto.subtle.decrypt({name:wa,iv:new Uint8Array(12)},A,a);return new TextDecoder().decode(c)}async function Z1(i){const e=await J1(i),t=new Uint8Array(e);return Li(t)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const Td="storage_not_supported",Qn="stubbed_public_client_application_called",Gg="in_mem_redirect_unavailable";/*! @azure/msal-browser v4.26.2 2025-11-19 */const Bc={[Td]:"Given storage configuration option was not supported.",[Qn]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Gg]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};Bc[Td],Bc[Qn],Bc[Gg];class Vg extends Jt{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Vg.prototype)}}function kn(i){return new Vg(i,Bc[i])}/*! @azure/msal-browser v4.26.2 2025-11-19 */function ew(i){i.location.hash="",typeof i.history.replaceState=="function"&&i.history.replaceState(null,"",`${i.location.origin}${i.location.pathname}${i.location.search}`)}function JI(i){const e=i.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function $g(){return window.parent!==window}function XI(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Ir.POPUP_NAME_PREFIX}.`)===0}function Go(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function qI(){const e=new Nt(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function ZI(){if(Nt.hashContainsKnownProperties(window.location.hash)&&$g())throw rt(E1)}function e4(i){if($g()&&!i)throw rt(I1)}function t4(){if(XI())throw rt(k1)}function tw(){if(typeof window>"u")throw rt(kd)}function nw(i){if(!i)throw rt(yA)}function Yg(i){tw(),ZI(),t4(),nw(i)}function Bx(i,e){if(Yg(i),e4(e.system.allowRedirectInIframe),e.cache.cacheLocation===Gn.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw kn(Gg)}function rw(i){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(i).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function n4(){return go()}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Jc{navigateInternal(e,t){return Jc.defaultNavigateWindow(e,t)}navigateExternal(e,t){return Jc.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,a)=>{setTimeout(()=>{a(rt(Yc,"failed_to_redirect"))},t.timeout)})}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class r4{async sendGetRequestAsync(e,t){let r,a={},A=0;const c=Sx(t);try{r=await fetch(e,{method:xx.GET,headers:c})}catch(u){throw lA(rt(window.navigator.onLine?Q1:$c),void 0,void 0,u)}a=Ix(r.headers);try{return A=r.status,{headers:a,body:await r.json(),status:A}}catch(u){throw lA(rt(wh),A,a,u)}}async sendPostRequestAsync(e,t){const r=t&&t.body||"",a=Sx(t);let A,c=0,u={};try{A=await fetch(e,{method:xx.POST,headers:a,body:r})}catch(p){throw lA(rt(window.navigator.onLine?U1:$c),void 0,void 0,p)}u=Ix(A.headers);try{return c=A.status,{headers:u,body:await A.json(),status:c}}catch(p){throw lA(rt(wh),c,u,p)}}}function Sx(i){try{const e=new Headers;if(!(i&&i.headers))return e;const t=i.headers;return Object.entries(t).forEach(([r,a])=>{e.append(r,a)}),e}catch(e){throw lA(rt(K1),void 0,void 0,e)}}function Ix(i){try{const e={};return i.forEach((t,r)=>{e[r]=t}),e}catch{throw rt(W1)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const o4=6e4,Ch=1e4,i4=3e4,ow=2e3;function s4({auth:i,cache:e,system:t,telemetry:r},a){const A={clientId:Le.EMPTY_STRING,authority:`${Le.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:Le.EMPTY_STRING,authorityMetadata:Le.EMPTY_STRING,redirectUri:typeof window<"u"?Go():"",postLogoutRedirectUri:Le.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:kr.AAD,OIDCOptions:{serverResponseType:hd.FRAGMENT,defaultScopes:[Le.OPENID_SCOPE,Le.PROFILE_SCOPE,Le.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Ag.None,tenant:Le.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},c={cacheLocation:Gn.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:Gn.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===Gn.LocalStorage),claimsBasedCachingEnabled:!1},u={loggerCallback:()=>{},logLevel:cn.Info,piiLoggingEnabled:!1},m={...{...Gb,loggerOptions:u,networkClient:a?new r4:xI,navigationClient:new Jc,loadFrameTimeout:0,windowHashTimeout:(t==null?void 0:t.loadFrameTimeout)||o4,iframeHashTimeout:(t==null?void 0:t.loadFrameTimeout)||Ch,navigateFrameWait:0,redirectNavigationTimeout:i4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(t==null?void 0:t.nativeBrokerHandshakeTimeout)||ow,pollIntervalMilliseconds:Ir.DEFAULT_POLL_INTERVAL_MS},...t,loggerOptions:(t==null?void 0:t.loggerOptions)||u},h={application:{appName:Le.EMPTY_STRING,appVersion:Le.EMPTY_STRING},client:new Wb};if((i==null?void 0:i.protocolMode)!==kr.OIDC&&(i!=null&&i.OIDCOptions)&&new ya(m.loggerOptions).warning(JSON.stringify(tn(Lb))),i!=null&&i.protocolMode&&i.protocolMode===kr.OIDC&&(m!=null&&m.allowPlatformBroker))throw tn(Db);return{auth:{...A,...i,OIDCOptions:{...A.OIDCOptions,...i==null?void 0:i.OIDCOptions}},cache:{...c,...e},system:m,telemetry:{...h,...r}}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const a4="@azure/msal-browser",ms="4.26.2";/*! @azure/msal-browser v4.26.2 2025-11-19 */const qn="msal",Jg="browser",Ex="|",ir=2,Sc=2,A4=`${qn}.${Jg}.log.level`,l4=`${qn}.${Jg}.log.pii`,c4=`${qn}.${Jg}.platform.auth.dom`,kx=`${qn}.version`,Tx="account.keys",jx="token.keys";function Aa(i=Sc){return i<1?`${qn}.${Tx}`:`${qn}.${i}.${Tx}`}function la(i,e=ir){return e<1?`${qn}.${jx}.${i}`:`${qn}.${e}.${jx}.${i}`}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Xg{static loggerCallback(e,t){switch(e){case cn.Error:console.error(t);return;case cn.Info:console.info(t);return;case cn.Verbose:console.debug(t);return;case cn.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){var p;this.browserEnvironment=typeof window<"u",this.config=s4(e,this.browserEnvironment);let t;try{t=window[Gn.SessionStorage]}catch{}const r=t==null?void 0:t.getItem(A4),a=(p=t==null?void 0:t.getItem(l4))==null?void 0:p.toLowerCase(),A=a==="true"?!0:a==="false"?!1:void 0,c={...this.config.system.loggerOptions},u=r&&Object.keys(cn).includes(r)?cn[r]:void 0;u&&(c.loggerCallback=Xg.loggerCallback,c.logLevel=u),A!==void 0&&(c.piiLoggingEnabled=A),this.logger=new ya(c,a4,ms),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class xs extends Xg{getModuleName(){return xs.MODULE_NAME}getId(){return xs.ID}async initialize(){return this.available=typeof window<"u",this.available}}xs.MODULE_NAME="";xs.ID="StandardOperatingContext";/*! @azure/msal-browser v4.26.2 2025-11-19 */class d4{constructor(){this.dbName=vh,this.version=RI,this.tableName=MI,this.dbOpen=!1}async open(){return new Promise((e,t)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",a=>{a.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",a=>{const A=a;this.db=A.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(rt(Hg)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(rt(Zs));const c=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);c.addEventListener("success",u=>{const p=u;this.closeConnection(),t(p.target.result)}),c.addEventListener("error",u=>{this.closeConnection(),r(u)})})}async setItem(e,t){return await this.validateDbIsOpen(),new Promise((r,a)=>{if(!this.db)return a(rt(Zs));const u=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);u.addEventListener("success",()=>{this.closeConnection(),r()}),u.addEventListener("error",p=>{this.closeConnection(),a(p)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(rt(Zs));const c=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);c.addEventListener("success",()=>{this.closeConnection(),t()}),c.addEventListener("error",u=>{this.closeConnection(),r(u)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(rt(Zs));const A=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();A.addEventListener("success",c=>{const u=c;this.closeConnection(),e(u.target.result)}),A.addEventListener("error",c=>{this.closeConnection(),t(c)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(rt(Zs));const c=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);c.addEventListener("success",u=>{const p=u;this.closeConnection(),t(p.target.result===1)}),c.addEventListener("error",u=>{this.closeConnection(),r(u)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{const r=window.indexedDB.deleteDatabase(vh),a=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(a),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(a),e(!0))),r.addEventListener("error",()=>(clearTimeout(a),t(!1)))})}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class jd{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class u4{constructor(e){this.inMemoryCache=new jd,this.indexedDBCache=new d4,this.logger=e}handleDatabaseAccessError(e){if(e instanceof HA&&e.errorCode===Hg)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Yo{constructor(e,t,r){this.logger=e,OI(r??!1),this.cache=new u4(this.logger),this.performanceClient=t}createNewGuid(){return go()}base64Encode(e){return UA(e)}base64Decode(e){return mr(e)}base64UrlEncode(e){return Xl(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var h;const t=(h=this.performanceClient)==null?void 0:h.startMeasurement(oe.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await KI(Yo.EXTRACTABLE,Yo.POP_KEY_USAGES),a=await Mp(r.publicKey),A={e:a.e,kty:a.kty,n:a.n},c=Fx(A),u=await this.hashString(c),p=await Mp(r.privateKey),m=await WI(p,!1,["sign"]);return await this.cache.setItem(u,{privateKey:m,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),t&&t.end({success:!0}),u}async removeTokenBindingKey(e){if(await this.cache.removeItem(e),await this.cache.containsKey(e))throw Ge(Bb)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,r,a){var ve;const A=(ve=this.performanceClient)==null?void 0:ve.startMeasurement(oe.CryptoOptsSignJwt,a),c=await this.cache.getItem(t);if(!c)throw rt(Pg);const u=await Mp(c.publicKey),p=Fx(u),m=Xl(JSON.stringify({kid:t})),h=Rg.getShrHeaderString({...r==null?void 0:r.header,alg:u.alg,kid:m}),y=Xl(h);e.cnf={jwk:JSON.parse(p)};const b=Xl(JSON.stringify(e)),L=`${y}.${b}`,U=new TextEncoder().encode(L),E=await GI(c.privateKey,U),P=Li(new Uint8Array(E)),O=`${L}.${P}`;return A&&A.end({success:!0}),O}async hashString(e){return Z1(e)}}Yo.POP_KEY_USAGES=["sign","verify"];Yo.EXTRACTABLE=!0;function Fx(i){return JSON.stringify(i,Object.keys(i).sort())}/*! @azure/msal-browser v4.26.2 2025-11-19 */const p4=24*60*60*1e3,Bh={Lax:"Lax",None:"None"};class iw{initialize(){return Promise.resolve()}getItem(e){const t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let a=0;a<r.length;a++){const A=r[a],[c,...u]=decodeURIComponent(A).trim().split("="),p=u.join("=");if(c===t)return p}return""}getUserData(){throw Ge(Ft)}setItem(e,t,r,a=!0,A=Bh.Lax){let c=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${A};`;if(r){const u=h4(r);c+=`expires=${u};`}(a||A===Bh.None)&&(c+="Secure;"),document.cookie=c}async setUserData(){return Promise.reject(Ge(Ft))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(r=>{const a=decodeURIComponent(r).trim().split("=");t.push(a[0])}),t}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function h4(i){const e=new Date;return new Date(e.getTime()+i*p4).toUTCString()}/*! @azure/msal-browser v4.26.2 2025-11-19 */function xi(i,e){const t=i.getItem(Aa(e));return t?JSON.parse(t):[]}function so(i,e,t){const r=e.getItem(la(i,t));if(r){const a=JSON.parse(r);if(a&&a.hasOwnProperty("idToken")&&a.hasOwnProperty("accessToken")&&a.hasOwnProperty("refreshToken"))return a}return{idToken:[],accessToken:[],refreshToken:[]}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function Ic(i){return i.hasOwnProperty("id")&&i.hasOwnProperty("nonce")&&i.hasOwnProperty("data")}/*! @azure/msal-browser v4.26.2 2025-11-19 */const Ux="msal.cache.encryption",g4="msal.broadcast.cache";class f4{constructor(e,t,r){if(!window.localStorage)throw kn(Td);this.memoryStorage=new jd,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel(g4)}async initialize(e){const t=new iw,r=t.getItem(Ux);let a={key:"",id:""};if(r)try{a=JSON.parse(r)}catch{}if(a.key&&a.id){const A=Dr(Ui,oe.Base64Decode,this.logger,this.performanceClient,e)(a.key);this.encryptionCookie={id:a.id,key:await Re(vx,oe.GenerateHKDF,this.logger,this.performanceClient,e)(A)}}else{const A=go(),c=await Re(X1,oe.GenerateBaseKey,this.logger,this.performanceClient,e)(),u=Dr(Li,oe.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(c));this.encryptionCookie={id:A,key:await Re(vx,oe.GenerateHKDF,this.logger,this.performanceClient,e)(c)};const p={id:A,key:u};t.setItem(Ux,JSON.stringify(p),0,!0,Bh.None)}await Re(this.importExistingCache.bind(this),oe.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw rt(yA);return this.memoryStorage.getItem(e)}async decryptData(e,t,r){if(!this.initialized||!this.encryptionCookie)throw rt(yA);if(t.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const a=await Re(Cx,oe.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t.nonce,this.getContext(e),t.data);if(!a)return null;try{return{...JSON.parse(a),lastUpdatedAt:t.lastUpdatedAt}}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,r,a,A){if(!this.initialized||!this.encryptionCookie)throw rt(yA);if(A)this.setItem(e,t);else{const{data:c,nonce:u}=await Re(YI,oe.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t,this.getContext(e)),p={id:this.encryptionCookie.id,nonce:u,data:c,lastUpdatedAt:a};this.setItem(e,JSON.stringify(p))}this.memoryStorage.setItem(e,t),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),xi(this).forEach(r=>this.removeItem(r));const t=so(this.clientId,this);t.idToken.forEach(r=>this.removeItem(r)),t.accessToken.forEach(r=>this.removeItem(r)),t.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(qn)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(e){if(!this.encryptionCookie)return;let t=xi(this);t=await this.importArray(t,e),t.length?this.setItem(Aa(),JSON.stringify(t)):this.removeItem(Aa());const r=so(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(la(this.clientId),JSON.stringify(r)):this.removeItem(la(this.clientId))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let a;try{a=JSON.parse(r)}catch{return null}return Ic(a)?a.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},t),Re(Cx,oe.Decrypt,this.logger,this.performanceClient,t)(this.encryptionCookie.key,a.nonce,this.getContext(e),a.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),r)}async importArray(e,t){const r=[],a=[];return e.forEach(A=>{const c=this.getItemFromEncryptedCache(A,t).then(u=>{u?(this.memoryStorage.setItem(A,u),r.push(A)):this.removeItem(A)});a.push(c)}),await Promise.all(a),r}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(oe.LocalStorageUpdated);t.add({isBackground:!0});const{key:r,value:a,context:A}=e.data;if(!r){this.logger.error("Broadcast event missing key"),t.end({success:!1,errorCode:"noKey"});return}if(A&&A!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${A}`),t.end({success:!1,errorCode:"contextMismatch"});return}a?(this.memoryStorage.setItem(r,a),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),t.end({success:!0})}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class m4{constructor(){if(!window.sessionStorage)throw kn(Td)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const lt={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};/*! @azure/msal-browser v4.26.2 2025-11-19 */function gi(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Sh extends xh{constructor(e,t,r,a,A,c,u){super(e,r,a,A,u),this.cacheConfig=t,this.logger=a,this.internalStorage=new jd,this.browserStorage=Qx(e,t.cacheLocation,a,A),this.temporaryCacheStorage=Qx(e,t.temporaryCacheLocation,a,A),this.cookieStorage=new iw,this.eventHandler=c}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){let t=xi(this.browserStorage),r=so(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:t.length,preMigrateATCount:r.accessToken.length,preMigrateITCount:r.idToken.length,preMigrateRTCount:r.refreshToken.length},e);for(let A=0;A<Sc;A++){const c=A;await this.removeStaleAccounts(A,c,e)}for(let A=0;A<ir;A++){const c=A;await this.migrateIdTokens(A,c,e)}const a=this.getKMSIValues();for(let A=0;A<ir;A++)await this.migrateAccessTokens(A,a,e),await this.migrateRefreshTokens(A,a,e);t=xi(this.browserStorage),r=so(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:t.length,postMigrateATCount:r.accessToken.length,postMigrateITCount:r.idToken.length,postMigrateRTCount:r.refreshToken.length},e)}async updateOldEntry(e,t){const r=this.browserStorage.getItem(e),a=this.validateAndParseJson(r||"");if(!a)return this.browserStorage.removeItem(e),null;if(!a.lastUpdatedAt)a.lastUpdatedAt=Date.now().toString(),this.setItem(e,JSON.stringify(a),t);else if(cx(a.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null;const A=Ic(a)?await this.browserStorage.decryptData(e,a,t):a;return!A||!vd(A)?(this.performanceClient.incrementFields({invalidCacheCount:1},t),null):(dx(A)||ux(A))&&A.expiresOn&&Wc(A.expiresOn,Ab)?(this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null):A}async removeStaleAccounts(e,t,r){const a=xi(this.browserStorage,e);if(a.length!==0){for(const A of[...a]){this.performanceClient.incrementFields({oldAcntCount:1},r);const c=this.browserStorage.getItem(A),u=this.validateAndParseJson(c||"");if(!u){gi(a,A);continue}if(u.lastUpdatedAt)cx(u.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(A,u,t,r),gi(a,A));else{u.lastUpdatedAt=Date.now().toString(),this.setItem(A,JSON.stringify(u),r);continue}}this.setAccountKeys(a,r,e)}}async removeAccountOldSchema(e,t,r,a){const A=Ic(t)?await this.browserStorage.decryptData(e,t,a):t,c=A==null?void 0:A.homeAccountId;if(c){const u=this.getTokenKeys(r);[...u.idToken].filter(p=>p.includes(c)).forEach(p=>{this.browserStorage.removeItem(p),gi(u.idToken,p)}),[...u.accessToken].filter(p=>p.includes(c)).forEach(p=>{this.browserStorage.removeItem(p),gi(u.accessToken,p)}),[...u.refreshToken].filter(p=>p.includes(c)).forEach(p=>{this.browserStorage.removeItem(p),gi(u.refreshToken,p)}),this.setTokenKeys(u,a,r)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},a),this.browserStorage.removeItem(e)}getKMSIValues(){const e={},t=this.getTokenKeys().idToken;for(const r of t){const a=this.browserStorage.getUserData(r);if(a){const A=JSON.parse(a),c=Io(A.secret,mr);c&&(e[A.homeAccountId]=Eo(c))}}return e}async migrateIdTokens(e,t,r){const a=so(this.clientId,this.browserStorage,e);if(a.idToken.length===0)return;const A=so(this.clientId,this.browserStorage,ir),c=xi(this.browserStorage),u=xi(this.browserStorage,t);for(const p of[...a.idToken]){this.performanceClient.incrementFields({oldITCount:1},r);const m=await this.updateOldEntry(p,r);if(!m){gi(a.idToken,p);continue}const h=c.find(O=>O.includes(m.homeAccountId)),y=u.find(O=>O.includes(m.homeAccountId));let b=null;if(h)b=this.getAccount(h,r);else if(y){const O=this.browserStorage.getItem(y),ve=this.validateAndParseJson(O||"");b=ve&&Ic(ve)?await this.browserStorage.decryptData(y,ve,r):ve}if(!b){this.performanceClient.incrementFields({skipITMigrateCount:1},r);continue}const L=Io(m.secret,mr),S=this.generateCredentialKey(m),U=this.getIdTokenCredential(S,r),E=Object.keys(L).includes("signin_state"),P=U&&Object.keys(Io(U.secret,mr)||{}).includes("signin_state");if(!U||m.lastUpdatedAt>U.lastUpdatedAt&&(E||!P)){const O=b.tenantProfiles||[],ve=hg(L)||b.realm;if(ve&&!O.find(V=>V.tenantId===ve)){const V=fd(b.homeAccountId,b.localAccountId,ve,L);O.push(V)}b.tenantProfiles=O;const ce=this.generateAccountKey(In.getAccountInfo(b)),Q=Eo(L);await this.setUserData(ce,JSON.stringify(b),r,b.lastUpdatedAt,Q),c.includes(ce)||c.push(ce),await this.setUserData(S,JSON.stringify(m),r,m.lastUpdatedAt,Q),this.performanceClient.incrementFields({migratedITCount:1},r),A.idToken.push(S)}}this.setTokenKeys(a,r,e),this.setTokenKeys(A,r),this.setAccountKeys(c,r)}async migrateAccessTokens(e,t,r){const a=so(this.clientId,this.browserStorage,e);if(a.accessToken.length===0)return;const A=so(this.clientId,this.browserStorage,ir);for(const c of[...a.accessToken]){this.performanceClient.incrementFields({oldATCount:1},r);const u=await this.updateOldEntry(c,r);if(!u){gi(a.accessToken,c);continue}if(!Object.keys(t).includes(u.homeAccountId)){this.performanceClient.incrementFields({skipATMigrateCount:1},r);continue}const p=this.generateCredentialKey(u),m=t[u.homeAccountId];if(!A.accessToken.includes(p))await this.setUserData(p,JSON.stringify(u),r,u.lastUpdatedAt,m),this.performanceClient.incrementFields({migratedATCount:1},r),A.accessToken.push(p);else{const h=this.getAccessTokenCredential(p,r);(!h||u.lastUpdatedAt>h.lastUpdatedAt)&&(await this.setUserData(p,JSON.stringify(u),r,u.lastUpdatedAt,m),this.performanceClient.incrementFields({migratedATCount:1},r))}}this.setTokenKeys(a,r,e),this.setTokenKeys(A,r)}async migrateRefreshTokens(e,t,r){const a=so(this.clientId,this.browserStorage,e);if(a.refreshToken.length===0)return;const A=so(this.clientId,this.browserStorage,ir);for(const c of[...a.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},r);const u=await this.updateOldEntry(c,r);if(!u){gi(a.refreshToken,c);continue}if(!Object.keys(t).includes(u.homeAccountId)){this.performanceClient.incrementFields({skipRTMigrateCount:1},r);continue}const p=this.generateCredentialKey(u),m=t[u.homeAccountId];if(!A.refreshToken.includes(p))await this.setUserData(p,JSON.stringify(u),r,u.lastUpdatedAt,m),this.performanceClient.incrementFields({migratedRTCount:1},r),A.refreshToken.push(p);else{const h=this.getRefreshTokenCredential(p,r);(!h||u.lastUpdatedAt>h.lastUpdatedAt)&&(await this.setUserData(p,JSON.stringify(u),r,u.lastUpdatedAt,m),this.performanceClient.incrementFields({migratedRTCount:1},r))}}this.setTokenKeys(a,r,e),this.setTokenKeys(A,r)}trackVersionChanges(e){const t=this.browserStorage.getItem(kx);t&&(this.logger.info(`MSAL.js was last initialized by version: ${t}`),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==ms&&this.setItem(kx,ms,e)}validateAndParseJson(e){if(!e)return null;try{const t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}setItem(e,t,r){const a=new Array(ir+1).fill(0),A=[],c=20;for(let u=0;u<=c;u++)try{if(this.browserStorage.setItem(e,t),u>0)for(let p=0;p<=ir;p++){const m=a.slice(0,p).reduce((y,b)=>y+b,0);if(m>=u)break;const h=u>m+a[p]?m+a[p]:u;u>m&&a[p]>0&&this.removeAccessTokenKeys(A.slice(m,h),r,p)}break}catch(p){const m=mh(p);if(m.errorCode===_c&&u<c){if(!A.length)for(let h=0;h<=ir;h++)if(e===la(this.clientId,h)){const y=JSON.parse(t).accessToken;A.push(...y),a[h]=y.length}else{const y=this.getTokenKeys(h).accessToken;A.push(...y),a[h]=y.length}if(A.length<=u)throw m;this.removeAccessToken(A[u],r,!1)}else throw m}}async setUserData(e,t,r,a,A){const c=new Array(ir+1).fill(0),u=[],p=20;for(let m=0;m<=p;m++)try{if(await Re(this.browserStorage.setUserData.bind(this.browserStorage),oe.SetUserData,this.logger,this.performanceClient)(e,t,r,a,A),m>0)for(let h=0;h<=ir;h++){const y=c.slice(0,h).reduce((L,S)=>L+S,0);if(y>=m)break;const b=m>y+c[h]?y+c[h]:m;m>y&&c[h]>0&&this.removeAccessTokenKeys(u.slice(y,b),r,h)}break}catch(h){const y=mh(h);if(y.errorCode===_c&&m<p){if(!u.length)for(let b=0;b<=ir;b++){const L=this.getTokenKeys(b).accessToken;u.push(...L),c[b]=L.length}if(u.length<=m)throw y;this.removeAccessToken(u[m],r,!1)}else throw y}}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,t),null;const a=this.validateAndParseJson(r);return!a||!In.isAccountEntity(a)?null:xh.toObject(new In,a)}async setAccount(e,t,r){this.logger.trace("BrowserCacheManager.setAccount called");const a=this.generateAccountKey(In.getAccountInfo(e)),A=Date.now().toString();e.lastUpdatedAt=A,await this.setUserData(a,JSON.stringify(e),t,A,r);const c=this.addAccountKeyToMap(a,t);this.performanceClient.addFields({kmsi:r},t),this.cacheConfig.cacheLocation===Gn.LocalStorage&&c&&this.eventHandler.emitEvent(lt.ACCOUNT_ADDED,void 0,In.getAccountInfo(e))}getAccountKeys(){return xi(this.browserStorage)}setAccountKeys(e,t,r=Sc){e.length===0?this.removeItem(Aa(r)):this.setItem(Aa(r),JSON.stringify(e),t)}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(Aa(),JSON.stringify(r),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),a=r.indexOf(e);a>-1?(r.splice(a,1),this.setAccountKeys(r,t),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){const r=this.getActiveAccount(t);(r==null?void 0:r.homeAccountId)===e.homeAccountId&&(r==null?void 0:r.environment)===e.environment&&this.setActiveAccount(null,t),super.removeAccount(e,t),this.removeAccountKeyFromMap(this.generateAccountKey(e),t),this.browserStorage.getKeys().forEach(a=>{a.includes(e.homeAccountId)&&a.includes(e.environment)&&this.browserStorage.removeItem(a)}),this.cacheConfig.cacheLocation===Gn.LocalStorage&&this.eventHandler.emitEvent(lt.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,t){super.removeIdToken(e,t);const r=this.getTokenKeys(),a=r.idToken.indexOf(e);a>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(a,1),this.setTokenKeys(r,t))}removeAccessToken(e,t,r=!0){super.removeAccessToken(e,t),r&&this.removeAccessTokenKeys([e],t)}removeAccessTokenKeys(e,t,r=ir){this.logger.trace("removeAccessTokenKey called");const a=this.getTokenKeys(r);let A=0;if(e.forEach(c=>{const u=a.accessToken.indexOf(c);u>-1&&(a.accessToken.splice(u,1),A++)}),A>0){this.logger.info(`removed ${A} accessToken keys from tokenKeys map`),this.setTokenKeys(a,t,r);return}}removeRefreshToken(e,t){super.removeRefreshToken(e,t);const r=this.getTokenKeys(),a=r.refreshToken.indexOf(e);a>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(a,1),this.setTokenKeys(r,t))}getTokenKeys(e=ir){return so(this.clientId,this.browserStorage,e)}setTokenKeys(e,t,r=ir){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(la(this.clientId,r));return}else this.setItem(la(this.clientId,r),JSON.stringify(e),t)}getIdTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;const a=this.validateAndParseJson(r);return!a||!eI(a)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),a)}async setIdTokenCredential(e,t,r){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const a=this.generateCredentialKey(e),A=Date.now().toString();e.lastUpdatedAt=A,await this.setUserData(a,JSON.stringify(e),t,A,r);const c=this.getTokenKeys();c.idToken.indexOf(a)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),c.idToken.push(a),this.setTokenKeys(c,t))}getAccessTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],t),null;const a=this.validateAndParseJson(r);return!a||!dx(a)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),a)}async setAccessTokenCredential(e,t,r){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const a=this.generateCredentialKey(e),A=Date.now().toString();e.lastUpdatedAt=A,await this.setUserData(a,JSON.stringify(e),t,A,r);const c=this.getTokenKeys(),u=c.accessToken.indexOf(a);u!==-1&&c.accessToken.splice(u,1),this.logger.trace(`access token ${u===-1?"added to":"updated in"} map`),c.accessToken.push(a),this.setTokenKeys(c,t)}getRefreshTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,t),null;const a=this.validateAndParseJson(r);return!a||!ux(a)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),a)}async setRefreshTokenCredential(e,t,r){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const a=this.generateCredentialKey(e),A=Date.now().toString();e.lastUpdatedAt=A,await this.setUserData(a,JSON.stringify(e),t,A,r);const c=this.getTokenKeys();c.refreshToken.indexOf(a)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),c.refreshToken.push(a),this.setTokenKeys(c,t))}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!oI(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=rI(e);this.setItem(r,JSON.stringify(e),t)}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!tI(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),r)}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&iI(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(Jl.WRAPPER_SKU,e),this.internalStorage.setItem(Jl.WRAPPER_VER,t)}getWrapperMetadata(){const e=this.internalStorage.getItem(Jl.WRAPPER_SKU)||Le.EMPTY_STRING,t=this.internalStorage.getItem(Jl.WRAPPER_VER)||Le.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){const t=this.generateCacheKey(Xm.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const a=this.validateAndParseJson(r);return a?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:a.homeAccountId,localAccountId:a.localAccountId,tenantId:a.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){const r=this.generateCacheKey(Xm.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");const a={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:Tr().toString()};this.setItem(r,JSON.stringify(a),t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(lt.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!nI(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),r)}getTemporaryCache(e,t){const r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const A=this.cookieStorage.getItem(r);if(A)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),A}const a=this.temporaryCacheStorage.getItem(r);if(!a){if(this.cacheConfig.cacheLocation===Gn.LocalStorage){const A=this.browserStorage.getItem(r);if(A)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),A}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),a}setTemporaryCache(e,t,r){const a=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(a,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(a,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(t=>{(t.indexOf(qn)!==-1||t.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(t)}),this.browserStorage.getKeys().forEach(t=>{(t.indexOf(qn)!==-1||t.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(t)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(oe.ClearTokensAndKeysWithClaims,e);const t=this.getTokenKeys();let r=0;t.accessToken.forEach(a=>{const A=this.getAccessTokenCredential(a,e);A!=null&&A.requestedClaimsHash&&a.includes(A.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(a,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return Lr.startsWith(e,qn)?e:`${qn}.${this.clientId}.${e}`}generateCredentialKey(e){const t=e.credentialType===Xn.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==Gt.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${qn}.${ir}`,e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join(Ex).toLowerCase()}generateAccountKey(e){const t=e.homeAccountId.split(".")[1];return[`${qn}.${Sc}`,e.homeAccountId,e.environment,t||e.tenantId||""].join(Ex).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Tn.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Tn.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Tn.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Tn.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Tn.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=UA(JSON.stringify(e));if(this.setTemporaryCache(Tn.REQUEST_PARAMS,r,!0),t){const a=UA(t);this.setTemporaryCache(Tn.VERIFIER,a,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(Tn.REQUEST_PARAMS,!0);if(!e)throw rt(j1);const t=this.getTemporaryCache(Tn.VERIFIER,!0);let r,a="";try{r=JSON.parse(mr(e)),t&&(a=mr(t))}catch(A){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${A}`),rt(F1)}return[r,a]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Tn.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var r;const t=(r=this.getInteractionInProgress())==null?void 0:r.clientId;return e?t===this.clientId:!!t}getInteractionInProgress(){const e=`${qn}.${Tn.INTERACTION_STATUS_KEY}`,t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),ew(window),null}}setInteractionInProgress(e,t=wi.SIGNIN){var a;const r=`${qn}.${Tn.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw rt(v1);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:t}),!1)}else!e&&((a=this.getInteractionInProgress())==null?void 0:a.clientId)===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(e,t){var u,p,m;const r=bd((u=e.account)==null?void 0:u.homeAccountId,(p=e.account)==null?void 0:p.environment,e.idToken,this.clientId,e.tenantId);let a;t.claims&&(a=await this.cryptoImpl.hashString(t.claims));const A=wd((m=e.account)==null?void 0:m.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?lx(e.expiresOn):0,e.extExpiresOn?lx(e.extExpiresOn):0,mr,void 0,e.tokenType,void 0,t.sshKid,t.claims,a),c={idToken:r,accessToken:A};return this.saveCacheRecord(c,e.correlationId,Eo(Io(e.idToken,mr)))}async saveCacheRecord(e,t,r,a){try{await super.saveCacheRecord(e,t,r,a)}catch(A){if(A instanceof sa&&this.performanceClient&&t)try{const c=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:c.refreshToken.length,cacheIdCount:c.idToken.length,cacheAtCount:c.accessToken.length},t)}catch{}throw A}}}function Qx(i,e,t,r){try{switch(e){case Gn.LocalStorage:return new f4(i,t,r);case Gn.SessionStorage:return new m4;case Gn.MemoryStorage:default:break}}catch(a){t.error(a)}return new jd}const x4=(i,e,t,r)=>{const a={cacheLocation:Gn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Gn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new Sh(i,a,Dc,e,t,r)};/*! @azure/msal-browser v4.26.2 2025-11-19 */function y4(i,e,t,r,a){return i.verbose("getAllAccounts called"),t?e.getAllAccounts(a||{},r):[]}function b4(i,e,t,r){const a=t.getAccountInfoFilteredBy(i,r);return a?(e.verbose("getAccount: Account matching provided filter found, returning"),a):(e.verbose("getAccount: No matching account found, returning null"),null)}function w4(i,e,t,r){if(e.trace("getAccountByUsername called"),!i)return e.warning("getAccountByUsername: No username provided"),null;const a=t.getAccountInfoFilteredBy({username:i},r);return a?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${i}`),a):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function v4(i,e,t,r){if(e.trace("getAccountByHomeId called"),!i)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const a=t.getAccountInfoFilteredBy({homeAccountId:i},r);return a?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${i}`),a):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function C4(i,e,t,r){if(e.trace("getAccountByLocalId called"),!i)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const a=t.getAccountInfoFilteredBy({localAccountId:i},r);return a?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${i}`),a):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function B4(i,e,t){e.setActiveAccount(i,t)}function S4(i,e){return i.getActiveAccount(e)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const I4="msal.broadcast.event";class E4{constructor(e){this.eventCallbacks=new Map,this.logger=e||new ya({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(I4)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if(typeof window<"u"){const a=r||n4();return this.eventCallbacks.has(a)?(this.logger.error(`Event callback with id: ${a} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(a,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${a}`),a)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,a){var c;const A={eventType:e,interactionType:t||null,payload:r||null,error:a||null,timestamp:Date.now()};switch(e){case lt.ACCOUNT_ADDED:case lt.ACCOUNT_REMOVED:case lt.ACTIVE_ACCOUNT_CHANGED:(c=this.broadcastChannel)==null||c.postMessage(A);break;default:this.invokeCallbacks(A);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,r],a)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${a}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class sw{constructor(e,t,r,a,A,c,u,p,m){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=A,this.navigationClient=c,this.platformAuthProvider=p,this.correlationId=m||go(),this.logger=a.clone(Ir.MSAL_SKU,ms,this.correlationId),this.performanceClient=u}async clearCacheOnLogout(e,t){if(t)try{this.browserStorage.removeAccount(t,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return Nt.getAbsoluteUrl(t,Go())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new jA(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(oe.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const a={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},A=e.requestAuthority||this.config.auth.authority,c=r!=null&&r.length?r==="true":this.config.auth.instanceAware,u=t&&c?this.config.auth.authority.replace(Nt.getDomainFromUrl(A),t.environment):A,p=ar.generateAuthority(u,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),m=await Re(A1,oe.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(p,this.config.system.networkClient,this.browserStorage,a,this.logger,this.correlationId,this.performanceClient);if(t&&!m.isAlias(t.environment))throw tn(Pb);return m}}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function qg(i,e,t,r){t.addQueueMeasurement(oe.InitializeBaseRequest,i.correlationId);const a=i.authority||e.auth.authority,A=[...i&&i.scopes||[]],c={...i,correlationId:i.correlationId,authority:a,scopes:A};if(!c.authenticationScheme)c.authenticationScheme=Gt.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(c.authenticationScheme===Gt.SSH){if(!i.sshJwk)throw tn(gd);if(!i.sshKid)throw tn(Mb)}r.verbose(`Authentication Scheme set to "${c.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&i.claims&&!Lr.isEmptyObj(i.claims)&&(c.requestedClaimsHash=await Z1(i.claims)),c}async function k4(i,e,t,r,a){r.addQueueMeasurement(oe.InitializeSilentRequest,i.correlationId);const A=await Re(qg,oe.InitializeBaseRequest,a,r,i.correlationId)(i,t,r,a);return{...i,...A,account:e,forceRefresh:i.forceRefresh||!1}}function aw(i,e){let t;const r=i.httpMethod;if(e===kr.EAR){if(t=r||as.POST,t!==as.POST)throw tn(Hb)}else t=r||as.GET;if(i.authorizePostBodyParameters&&t!==as.POST)throw tn(Nb);return t}/*! @azure/msal-browser v4.26.2 2025-11-19 */class va extends sw{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const t={correlationId:this.correlationId||go(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=Nt.getAbsoluteUrl(e.postLogoutRedirectUri,Go())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=Nt.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Go())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=Nt.getAbsoluteUrl(Go(),Go())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(oe.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const t=await Re(this.getClientConfiguration.bind(this),oe.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new u1(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:a,requestExtraQueryParameters:A,account:c}=e;this.performanceClient.addQueueMeasurement(oe.StandardInteractionClientGetClientConfiguration,this.correlationId);const u=e.authority||await Re(this.getDiscoveredAuthority.bind(this),oe.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:a,requestExtraQueryParameters:A,account:c}),p=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:u,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:p.loggerCallback,piiLoggingEnabled:p.piiLoggingEnabled,logLevel:p.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:Ir.MSAL_SKU,version:ms,cpu:Le.EMPTY_STRING,os:Le.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(oe.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),a={interactionType:t},A=ba.setRequestState(this.browserCrypto,e&&e.state||Le.EMPTY_STRING,a),u={...await Re(qg,oe.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:A,nonce:e.nonce||go(),responseMode:this.config.auth.OIDCOptions.serverResponseType},p={...u,httpMethod:aw(u,this.config.auth.protocolMode)};if(e.loginHint||e.sid)return p;const m=e.account||this.browserStorage.getActiveAccount(this.correlationId);return m&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${m.homeAccountId}`,this.correlationId),p.account=m),p}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function T4(i,e){if(!e)return null;try{return ba.parseRequestState(i,e).libraryState.meta}catch{throw Ge(pa)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function bA(i,e,t){const r=Hc(i);if(!r)throw Ob(i)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${i}`),rt(y1)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),rt(x1));return r}function j4(i,e,t){if(!i.state)throw rt(Dg);const r=T4(e,i.state);if(!r)throw rt(b1);if(r.interactionType!==t)throw rt(w1)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Aw{constructor(e,t,r,a,A){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=a,this.performanceClient=A}async handleCodeResponse(e,t){this.performanceClient.addQueueMeasurement(oe.HandleCodeResponse,t.correlationId);let r;try{r=bI(e,t.state)}catch(a){throw a instanceof bs&&a.subError===FA?rt(FA):a}return Re(this.handleCodeResponseFromServer.bind(this),oe.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)}async handleCodeResponseFromServer(e,t,r=!0){if(this.performanceClient.addQueueMeasurement(oe.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await Re(this.authModule.updateAuthority.bind(this.authModule),oe.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const A=this.createCcsCredentials(t);A&&(this.authCodeRequest.ccsCredential=A)}return await Re(this.authModule.acquireToken.bind(this.authModule),oe.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Ao.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:Ao.UPN}:null}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const F4="ContentError",U4="PageException",lw="user_switch";/*! @azure/msal-browser v4.26.2 2025-11-19 */const Q4="USER_INTERACTION_REQUIRED",R4="USER_CANCEL",M4="NO_NETWORK",L4="DISABLED",D4="ACCOUNT_UNAVAILABLE",P4="UX_NOT_ALLOWED";/*! @azure/msal-browser v4.26.2 2025-11-19 */const H4=-2147186943,N4={[lw]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class So extends Jt{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,So.prototype),this.name="NativeAuthError",this.ext=r}}function ea(i){if(i.ext&&i.ext.status&&i.ext.status===L4||i.ext&&i.ext.error&&i.ext.error===H4)return!0;switch(i.errorCode){case F4:case U4:return!0;default:return!1}}function Xc(i,e,t){if(t&&t.status)switch(t.status){case D4:return Vc(l1);case Q4:return new ho(i,e);case R4:return rt(FA);case M4:return rt($c);case P4:return Vc(jg)}return new So(i,N4[i]||e,t)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class cw extends va{async acquireToken(e){this.performanceClient.addQueueMeasurement(oe.SilentCacheClientAcquireToken,e.correlationId);const t=this.initializeServerTelemetryManager(Kt.acquireTokenSilent_silentFlow),r=await Re(this.getClientConfiguration.bind(this),oe.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),a=new mI(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const c=(await Re(a.acquireCachedToken.bind(a),oe.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),c}catch(A){throw A instanceof HA&&A.errorCode===Pg&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),A}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t.correlationId,t==null?void 0:t.account)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class Ec extends sw{constructor(e,t,r,a,A,c,u,p,m,h,y,b){super(e,t,r,a,A,c,p,m,b),this.apiId=u,this.accountId=h,this.platformAuthProvider=m,this.nativeStorageManager=y,this.silentCacheClient=new cw(e,this.nativeStorageManager,r,a,A,c,p,m,b);const L=this.platformAuthProvider.getExtensionName();this.skus=jA.makeExtraSkuString({libraryName:Ir.MSAL_SKU,libraryVersion:ms,extensionName:L,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[Q5]:this.skus}}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(oe.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(oe.NativeInteractionClientAcquireToken,this.correlationId),a=Tr(),A=this.initializeServerTelemetryManager(this.apiId);try{const c=await this.initializeNativeRequest(e);try{const p=await this.acquireTokensFromCache(this.accountId,c);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),p}catch(p){if(t===hr.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),p;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const u=await this.platformAuthProvider.sendMessage(c);return await this.handleNativeResponse(u,c,a).then(p=>(r.end({success:!0,isNativeBroker:!0,requestId:p.requestId}),A.clearNativeBrokerErrorCode(),p)).catch(p=>{throw r.end({success:!1,errorCode:p.errorCode,subErrorCode:p.subError}),p})}catch(c){throw c instanceof So&&A.setNativeBrokerErrorCode(c.errorCode),r.end({success:!1}),c}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:Dn.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Ge(hh);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw Ge(hh);try{const a=this.createSilentCacheRequest(t,r),A=await this.silentCacheClient.acquireToken(a),c={...r,idTokenClaims:A==null?void 0:A.idTokenClaims,idToken:A==null?void 0:A.idToken};return{...A,account:c}}catch(a){throw a}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const a=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(a)}catch(u){if(u instanceof So&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(u.errorCode),ea(u)))throw u}this.browserStorage.setTemporaryCache(Tn.NATIVE_REQUEST,JSON.stringify(a),!0);const A={apiId:Kt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(c,A)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(e==null||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:a,...A}=r;a&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Tn.NATIVE_REQUEST));const c=Tr();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const u=await this.platformAuthProvider.sendMessage(A),p=await this.handleNativeResponse(u,A,c);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),p}catch(u){throw u}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,r){var h,y;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const a=Io(e.id_token,mr),A=this.createHomeAccountIdentifier(e,a),c=(h=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},this.correlationId))==null?void 0:h.homeAccountId;if((y=t.extraParameters)!=null&&y.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(A!==c&&e.account.id!==t.accountId)throw Xc(lw);const u=await this.getDiscoveredAuthority({requestAuthority:t.authority}),p=Fg(this.browserStorage,u,A,mr,this.correlationId,a,e.client_info,void 0,a.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const m=await this.generateAuthenticationResult(e,t,a,p,u.canonicalAuthority,r);return await this.cacheAccount(p,this.correlationId,Eo(a)),await this.cacheNativeTokens(e,t,A,a,e.access_token,m.tenantId,r),m}createHomeAccountIdentifier(e,t){return In.generateHomeAccountId(e.client_info||Le.EMPTY_STRING,ao.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return t?Dn.fromString(t):Dn.fromString(e)}async generatePopAccessToken(e,t){if(t.tokenType===Gt.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new ha(this.browserCrypto),a={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw Ge(ig);return r.signPopToken(e.access_token,t.keyId,a)}else return e.access_token}async generateAuthenticationResult(e,t,r,a,A,c){const u=this.addTelemetryFromNativeResponse(e.properties.MATS),p=this.generateScopes(t.scope,e.scope),m=e.account.properties||{},h=m.UID||r.oid||r.sub||Le.EMPTY_STRING,y=m.TenantId||r.tid||Le.EMPTY_STRING,b=pg(In.getAccountInfo(a),void 0,r,e.id_token);b.nativeAccountId!==e.account.id&&(b.nativeAccountId=e.account.id);const L=await this.generatePopAccessToken(e,t),S=t.tokenType===Gt.POP?Gt.POP:Gt.BEARER;return{authority:A,uniqueId:h,tenantId:y,scopes:p.asArray(),account:b,idToken:e.id_token,idTokenClaims:r,accessToken:L,fromCache:u?this.isResponseFromCache(u):!1,expiresOn:aa(c+e.expires_in),tokenType:S,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,t,r){await this.browserStorage.setAccount(e,this.correlationId,r),this.browserStorage.removeAccountContext(In.getAccountInfo(e),t)}cacheNativeTokens(e,t,r,a,A,c,u){const p=bd(r,t.authority,e.id_token||"",t.clientId,a.tid||""),m=t.tokenType===Gt.POP?Le.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,h=u+m,y=this.generateScopes(e.scope,t.scope),b=wd(r,t.authority,A,t.clientId,a.tid||c,y.printScopes(),h,0,mr,void 0,t.tokenType,void 0,t.keyId),L={idToken:p,accessToken:b};return this.nativeStorageManager.saveCacheRecord(L,this.correlationId,Eo(a),t.storeInCache)}getExpiresInValue(e,t){return e===Gt.POP?Le.SHR_NONCE_VALIDITY:(typeof t=="string"?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=await this.getCanonicalAuthority(e),{scopes:r,...a}=e,A=new Dn(r||[]);A.appendScopes(xa);const c={...a,accountId:this.accountId,clientId:this.config.auth.clientId,authority:t.urlString,scope:A.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(c.signPopToken&&e.popKid)throw rt(z1);if(this.handleExtraBrokerParams(c),c.extraParameters=c.extraParameters||{},c.extraParameters.telemetry=Vr.MATS_TELEMETRY,e.authenticationScheme===Gt.POP){const u={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},p=new ha(this.browserCrypto);let m;if(c.keyId)m=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:c.keyId})),c.signPopToken=!1;else{const h=await Re(p.generateCnf.bind(p),oe.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(u,this.logger);m=h.reqCnfString,c.keyId=h.kid,c.signPopToken=!0}c.reqCnf=m}return this.addRequestSKUs(c),c}async getCanonicalAuthority(e){const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new Nt(t);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case Kt.ssoSilent:case Kt.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Zn.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case Zn.NONE:case Zn.CONSENT:case Zn.LOGIN:case Zn.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),rt(_1)}}handleExtraBrokerParams(e){var A;const t=e.extraParameters&&e.extraParameters.hasOwnProperty(Oc)&&e.extraParameters.hasOwnProperty(zc)&&e.extraParameters.hasOwnProperty(gs);if(!e.embeddedClientId&&!t)return;let r="";const a=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[zc],r=e.extraParameters[gs]),e.extraParameters={child_client_id:r,child_redirect_uri:a},(A=this.performanceClient)==null||A.addFields({embeddedClientId:r,embeddedRedirectUri:a},this.correlationId)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function Zg(i,e,t,r,a){const A=yI({...i.auth,authority:e},t,r,a);if(Cg(A,{sku:Ir.MSAL_SKU,version:ms,os:"",cpu:""}),i.auth.protocolMode!==kr.OIDC&&Bg(A,i.telemetry.application),t.platformBroker&&(D5(A),a.addFields({isPlatformAuthorizeRequest:!0},t.correlationId),t.authenticationScheme===Gt.POP)){const c=new Yo(r,a),u=new ha(c);let p;t.popKid?p=c.encodeKid(t.popKid):p=(await Re(u.generateCnf.bind(u),oe.PopTokenGenerateCnf,r,a,t.correlationId)(t,r)).reqCnfString,Eg(A,p)}return md(A,t.correlationId,a),A}async function ef(i,e,t,r,a){if(!t.codeChallenge)throw tn(cg);const A=await Re(Zg,oe.GetStandardParams,r,a,t.correlationId)(i,e,t,r,a);return mg(A,qh.CODE),Sg(A,t.codeChallenge,Le.S256_CODE_CHALLENGE_METHOD),Fi(A,t.extraQueryParameters||{}),Ug(e,A,i.auth.encodeExtraQueryParams,t.extraQueryParameters)}async function tf(i,e,t,r,a,A){if(!r.earJwk)throw rt(Lg);const c=await Zg(e,t,r,a,A);mg(c,qh.IDTOKEN_TOKEN_REFRESHTOKEN),$5(c,r.earJwk),Sg(c,r.codeChallenge,Le.S256_CODE_CHALLENGE_METHOD);const u=new Map;Fi(u,r.extraQueryParameters||{});const p=Ug(t,u,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return dw(i,p,c)}async function nf(i,e,t,r,a,A){const c=await Zg(e,t,r,a,A);mg(c,qh.CODE),Sg(c,r.codeChallenge,r.codeChallengeMethod||Le.S256_CODE_CHALLENGE_METHOD),Y5(c,r.authorizePostBodyParameters||{});const u=new Map;Fi(u,r.extraQueryParameters||{});const p=Ug(t,u,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return dw(i,p,c)}function dw(i,e,t){const r=i.createElement("form");return r.method="post",r.action=e,t.forEach((a,A)=>{const c=i.createElement("input");c.hidden=!0,c.name=A,c.value=a,r.appendChild(c)}),i.body.appendChild(r),r}async function uw(i,e,t,r,a,A,c,u,p,m){if(u.verbose("Account id found, calling WAM for token"),!m)throw rt(Ng);const h=new Yo(u,p),y=new Ec(r,a,h,u,c,r.system.navigationClient,t,p,m,e,A,i.correlationId),{userRequestState:b}=ba.parseRequestState(h,i.state);return Re(y.acquireToken.bind(y),oe.NativeInteractionClientAcquireToken,u,p,i.correlationId)({...i,state:b,prompt:void 0})}async function ca(i,e,t,r,a,A,c,u,p,m,h,y){if(Bo.removeThrottle(c,a.auth.clientId,i),e.accountId)return Re(uw,oe.HandleResponsePlatformBroker,m,h,i.correlationId)(i,e.accountId,r,a,c,u,p,m,h,y);const b={...i,code:e.code||"",codeVerifier:t},L=new Aw(A,c,b,m,h);return await Re(L.handleCodeResponse.bind(L),oe.HandleCodeResponse,m,h,i.correlationId)(e,i)}async function rf(i,e,t,r,a,A,c,u,p,m,h){if(Bo.removeThrottle(A,r.auth.clientId,i),p1(e,i.state),!e.ear_jwe)throw rt(m1);if(!i.earJwk)throw rt(Lg);const y=JSON.parse(await Re($I,oe.DecryptEarResponse,p,m,i.correlationId)(i.earJwk,e.ear_jwe));if(y.accountId)return Re(uw,oe.HandleResponsePlatformBroker,p,m,i.correlationId)(i,y.accountId,t,r,A,c,u,p,m,h);const b=new fs(r.auth.clientId,A,new Yo(p,m),p,null,null,m);b.validateTokenResponse(y);const L={code:"",state:i.state,nonce:i.nonce,client_info:y.client_info,cloud_graph_host_name:y.cloud_graph_host_name,cloud_instance_host_name:y.cloud_instance_host_name,cloud_instance_name:y.cloud_instance_name,msgraph_host:y.msgraph_host};return await Re(b.handleServerTokenResponse.bind(b),oe.HandleServerTokenResponse,p,m,i.correlationId)(y,a,Tr(),i,L,void 0,void 0,void 0,void 0)}/*! @azure/msal-browser v4.26.2 2025-11-19 */const _4=32;async function ys(i,e,t){i.addQueueMeasurement(oe.GeneratePkceCodes,t);const r=Dr(O4,oe.GenerateCodeVerifier,e,i,t)(i,e,t),a=await Re(z4,oe.GenerateCodeChallengeFromVerifier,e,i,t)(r,i,e,t);return{verifier:r,challenge:a}}function O4(i,e,t){try{const r=new Uint8Array(_4);return Dr(zI,oe.GetRandomValues,e,i,t)(r),Li(r)}catch{throw rt(Mg)}}async function z4(i,e,t,r){e.addQueueMeasurement(oe.GenerateCodeChallengeFromVerifier,r);try{const a=await Re(J1,oe.Sha256Digest,t,e,r)(i,e,r);return Li(new Uint8Array(a))}catch{throw rt(Mg)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class qc{constructor(e,t,r,a){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=a,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(oe.NativeMessageHandlerHandshake),this.platformAuthType=Vr.PLATFORM_EXTENSION_PROVIDER}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const t={method:rA.GetToken,request:e},r={channel:Vr.CHANNEL_ID,extensionId:this.extensionId,responseId:go(),body:t};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const a=await new Promise((c,u)=>{this.resolvers.set(r.responseId,{resolve:c,reject:u})});return this.validatePlatformBrokerResponse(a)}static async createProvider(e,t,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const a=new qc(e,t,r,Vr.PREFERRED_EXTENSION_ID);return await a.sendHandshakeRequest(),a}catch{const A=new qc(e,t,r);return await A.sendHandshakeRequest(),A}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Vr.CHANNEL_ID,extensionId:this.extensionId,responseId:go(),body:{method:rA.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(rt(H1)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const t=e.data;if(!(!t.channel||t.channel!==Vr.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===rA.HandshakeRequest){const r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(rt(N1))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const t=e.data,r=this.resolvers.get(t.responseId),a=this.handshakeResolvers.get(t.responseId);try{const A=t.body.method;if(A===rA.Response){if(!r)return;const c=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(c)}`),c.status!=="Success")r.reject(Xc(c.code,c.description,c.ext));else if(c.result)c.result.code&&c.result.description?r.reject(Xc(c.result.code,c.result.description,c.result.ext)):r.resolve(c.result);else throw dh(Lc,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(A===rA.HandshakeResponse){if(!a){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),a.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(A){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${A}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(A):a&&a.reject(A)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw dh(Lc,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){var e;return this.getExtensionId()===Vr.PREFERRED_EXTENSION_ID?"chrome":(e=this.getExtensionId())!=null&&e.length?"unknown":void 0}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class of{constructor(e,t,r){this.logger=e,this.performanceClient=t,this.correlationId=r,this.platformAuthType=Vr.PLATFORM_DOM_PROVIDER}static async createProvider(e,t,r){var a;if(e.trace("PlatformAuthDOMHandler: createProvider called"),(a=window.navigator)!=null&&a.platformAuthentication){const A=await window.navigator.platformAuthentication.getSupportedContracts(Vr.MICROSOFT_ENTRA_BROKERID);if(A!=null&&A.includes(Vr.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new of(e,t,r)}}getExtensionId(){return Vr.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return Vr.DOM_API_NAME}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const t=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(t);return this.validatePlatformBrokerResponse(r)}catch(t){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),t}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:t,clientId:r,authority:a,scope:A,redirectUri:c,correlationId:u,state:p,storeInCache:m,embeddedClientId:h,extraParameters:y,...b}=e,L=this.getDOMExtraParams(b);return{accountId:t,brokerId:this.getExtensionId(),authority:a,clientId:r,correlationId:u||this.correlationId,extraParameters:{...y,...L},isSecurityTokenService:!1,redirectUri:c,scope:A,state:p,storeInCache:m,embeddedClientId:h}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const t=e;if(t.isSuccess===!1&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),Xc(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw dh(Lc,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((a,[A,c])=>(a[A]=String(c),a),{})}}}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function K4(i,e,t,r){i.trace("getPlatformAuthProvider called",t);const a=W4();i.trace("Has client allowed platform auth via DOM API: "+a);let A;try{a&&(A=await of.createProvider(i,e,t)),A||(i.trace("Platform auth via DOM API not available, checking for extension"),A=await qc.createProvider(i,r||ow,e))}catch(c){i.trace("Platform auth not available",c)}return A}function W4(){let i;try{return i=window[Gn.SessionStorage],(i==null?void 0:i.getItem(c4))==="true"}catch{return!1}}function QA(i,e,t,r){if(e.trace("isPlatformAuthAllowed called"),!i.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!t)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case Gt.BEARER:case Gt.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}/*! @azure/msal-browser v4.26.2 2025-11-19 */class G4 extends va{constructor(e,t,r,a,A,c,u,p,m,h){super(e,t,r,a,A,c,u,m,h),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=p,this.eventHandler=A}acquireToken(e,t){let r;try{if(r={popupName:this.generatePopupName(e.scopes||xa,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t);{const A={...e,httpMethod:aw(e,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(A,r,t)}}catch(a){return Promise.reject(a)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},a=e&&e.authority,A=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,a,A)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,a,A))}catch(t){return Promise.reject(t)}}async acquireTokenPopupAsync(e,t,r){this.logger.verbose("acquireTokenPopupAsync called");const a=await Re(this.initializeAuthorizationRequest.bind(this),oe.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,xt.Popup);t.popup&&rw(a.authority);const A=QA(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return a.platformBroker=A,this.config.auth.protocolMode===kr.EAR?this.executeEarFlow(a,t,r):this.executeCodeFlow(a,t,r)}async executeCodeFlow(e,t,r){var p;const a=e.correlationId,A=this.initializeServerTelemetryManager(Kt.acquireTokenPopup),c=r||await Re(ys,oe.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),u={...e,codeChallenge:c.challenge};try{const m=await Re(this.createAuthCodeClient.bind(this),oe.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,a)({serverTelemetryManager:A,requestAuthority:u.authority,requestAzureCloudOptions:u.azureCloudOptions,requestExtraQueryParameters:u.extraQueryParameters,account:u.account});if(u.httpMethod===as.POST)return await this.executeCodeFlowWithPost(u,t,m,c.verifier);{const h=await Re(ef,oe.GetAuthCodeUrl,this.logger,this.performanceClient,a)(this.config,m.authority,u,this.logger,this.performanceClient),y=this.initiateAuthRequest(h,t);this.eventHandler.emitEvent(lt.POPUP_OPENED,xt.Popup,{popupWindow:y},null);const b=await this.monitorPopupForHash(y,t.popupWindowParent),L=Dr(bA,oe.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(b,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await Re(ca,oe.HandleResponseCode,this.logger,this.performanceClient,a)(e,L,c.verifier,Kt.acquireTokenPopup,this.config,m,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(m){throw(p=t.popup)==null||p.close(),m instanceof Jt&&(m.setCorrelationId(this.correlationId),A.cacheFailedRequest(m)),m}}async executeEarFlow(e,t,r){const a=e.correlationId,A=await Re(this.getDiscoveredAuthority.bind(this),oe.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,a)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),c=await Re(Wg,oe.GenerateEarKey,this.logger,this.performanceClient,a)(),u=r||await Re(ys,oe.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),p={...e,earJwk:c,codeChallenge:u.challenge},m=t.popup||this.openPopup("about:blank",t);(await tf(m.document,this.config,A,p,this.logger,this.performanceClient)).submit();const y=await Re(this.monitorPopupForHash.bind(this),oe.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,a)(m,t.popupWindowParent),b=Dr(bA,oe.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(!b.ear_jwe&&b.code){const L=await Re(this.createAuthCodeClient.bind(this),oe.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,a)({serverTelemetryManager:this.initializeServerTelemetryManager(Kt.acquireTokenPopup),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:A});return Re(ca,oe.HandleResponseCode,this.logger,this.performanceClient,a)(p,b,u.verifier,Kt.acquireTokenPopup,this.config,L,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return Re(rf,oe.HandleResponseEar,this.logger,this.performanceClient,a)(p,b,Kt.acquireTokenPopup,this.config,A,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,t,r,a){const A=e.correlationId,c=await Re(this.getDiscoveredAuthority.bind(this),oe.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,A)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),u=t.popup||this.openPopup("about:blank",t);(await nf(u.document,this.config,c,e,this.logger,this.performanceClient)).submit();const m=await Re(this.monitorPopupForHash.bind(this),oe.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,A)(u,t.popupWindowParent),h=Dr(bA,oe.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(m,this.config.auth.OIDCOptions.serverResponseType,this.logger);return Re(ca,oe.HandleResponseCode,this.logger,this.performanceClient,A)(e,h,a,Kt.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,t,r,a){var c,u,p;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(lt.LOGOUT_START,xt.Popup,e);const A=this.initializeServerTelemetryManager(Kt.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,e.account);const m=await Re(this.createAuthCodeClient.bind(this),oe.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:A,requestAuthority:r,account:e.account||void 0});try{m.authority.endSessionEndpoint}catch{if((c=e.account)!=null&&c.homeAccountId&&e.postLogoutRedirectUri&&m.authority.protocolMode===kr.OIDC){if(this.eventHandler.emitEvent(lt.LOGOUT_SUCCESS,xt.Popup,e),a){const b={apiId:Kt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},L=Nt.getAbsoluteUrl(a,Go());await this.navigationClient.navigateInternal(L,b)}(u=t.popup)==null||u.close();return}}const h=m.getLogoutUri(e);this.eventHandler.emitEvent(lt.LOGOUT_SUCCESS,xt.Popup,e);const y=this.openPopup(h,t);if(this.eventHandler.emitEvent(lt.POPUP_OPENED,xt.Popup,{popupWindow:y},null),await this.monitorPopupForHash(y,t.popupWindowParent).catch(()=>{}),a){const b={apiId:Kt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},L=Nt.getAbsoluteUrl(a,Go());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${L}`),await this.navigationClient.navigateInternal(L,b)}else this.logger.verbose("No main window navigation requested")}catch(m){throw(p=t.popup)==null||p.close(),m instanceof Jt&&(m.setCorrelationId(this.correlationId),A.cacheFailedRequest(m)),this.eventHandler.emitEvent(lt.LOGOUT_FAILURE,xt.Popup,null,m),this.eventHandler.emitEvent(lt.LOGOUT_END,xt.Popup),m}this.eventHandler.emitEvent(lt.LOGOUT_END,xt.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),rt(Id)}monitorPopupForHash(e,t){return new Promise((r,a)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const A=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(A),a(rt(FA));return}let c="";try{c=e.location.href}catch{}if(!c||c==="about:blank")return;clearInterval(A);let u="";const p=this.config.auth.OIDCOptions.serverResponseType;e&&(p===hd.QUERY?u=e.location.search:u=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(u)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw rt(B1);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),rt(C1)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:a}){var L,S,U,E;const A=a.screenLeft?a.screenLeft:a.screenX,c=a.screenTop?a.screenTop:a.screenY,u=a.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,p=a.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let m=(L=r.popupSize)==null?void 0:L.width,h=(S=r.popupSize)==null?void 0:S.height,y=(U=r.popupPosition)==null?void 0:U.top,b=(E=r.popupPosition)==null?void 0:E.left;return(!m||m<0||m>u)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),m=Ir.POPUP_WIDTH),(!h||h<0||h>p)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),h=Ir.POPUP_HEIGHT),(!y||y<0||y>p)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),y=Math.max(0,p/2-Ir.POPUP_HEIGHT/2+c)),(!b||b<0||b>u)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),b=Math.max(0,u/2-Ir.POPUP_WIDTH/2+A)),a.open(e,t,`width=${m}, height=${h}, top=${y}, left=${b}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return`${Ir.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return`${Ir.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function V4(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const i=window.performance.getEntriesByType("navigation"),e=i.length?i[0]:void 0;return e==null?void 0:e.type}class $4 extends va{constructor(e,t,r,a,A,c,u,p,m,h){super(e,t,r,a,A,c,u,m,h),this.nativeStorage=p}async acquireToken(e){const t=await Re(this.initializeAuthorizationRequest.bind(this),oe.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,xt.Redirect);t.platformBroker=QA(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const r=A=>{A.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(lt.RESTORE_FROM_BFCACHE,xt.Redirect))},a=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${a}`),this.browserStorage.setTemporaryCache(Tn.ORIGIN_URI,a,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===kr.EAR?await this.executeEarFlow(t):await this.executeCodeFlow(t,e.onRedirectNavigate)}catch(A){throw A instanceof Jt&&A.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),A}}async executeCodeFlow(e,t){const r=e.correlationId,a=this.initializeServerTelemetryManager(Kt.acquireTokenRedirect),A=await Re(ys,oe.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),c={...e,codeChallenge:A.challenge};this.browserStorage.cacheAuthorizeRequest(c,A.verifier);try{if(c.httpMethod===as.POST)return await this.executeCodeFlowWithPost(c);{const u=await Re(this.createAuthCodeClient.bind(this),oe.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:c.authority,requestAzureCloudOptions:c.azureCloudOptions,requestExtraQueryParameters:c.extraQueryParameters,account:c.account}),p=await Re(ef,oe.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,u.authority,c,this.logger,this.performanceClient);return await this.initiateAuthRequest(p,t)}}catch(u){throw u instanceof Jt&&(u.setCorrelationId(this.correlationId),a.cacheFailedRequest(u)),u}}async executeEarFlow(e){const t=e.correlationId,r=await Re(this.getDiscoveredAuthority.bind(this),oe.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=await Re(Wg,oe.GenerateEarKey,this.logger,this.performanceClient,t)(),A=await Re(ys,oe.GeneratePkceCodes,this.logger,this.performanceClient,t)(this.performanceClient,this.logger,t),c={...e,earJwk:a,codeChallenge:A.challenge};return this.browserStorage.cacheAuthorizeRequest(c,A.verifier),(await tf(document,this.config,r,c,this.logger,this.performanceClient)).submit(),new Promise((p,m)=>{setTimeout(()=>{m(rt(Yc,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const t=e.correlationId,r=await Re(this.getDiscoveredAuthority.bind(this),oe.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(await nf(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((A,c)=>{setTimeout(()=>{c(rt(Yc,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e="",t,r,a){const A=this.initializeServerTelemetryManager(Kt.handleRedirectPromise);try{const[c,u]=this.getRedirectResponse(e||"");if(!c)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),V4()!=="back_forward"?a.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const p=this.browserStorage.getTemporaryCache(Tn.ORIGIN_URI,!0)||Le.EMPTY_STRING,m=rx(p),h=rx(window.location.href);if(m===h&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),p.indexOf("#")>-1&&JI(p),await this.handleResponse(c,t,r,A);if(this.config.auth.navigateToLoginRequestUrl){if(!$g()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Tn.URL_HASH,u,!0);const y={apiId:Kt.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let b=!0;if(!p||p==="null"){const L=qI();this.browserStorage.setTemporaryCache(Tn.ORIGIN_URI,L,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),b=await this.navigationClient.navigateInternal(L,y)}else this.logger.verbose(`Navigating to loginRequestUrl: ${p}`),b=await this.navigationClient.navigateInternal(p,y);if(!b)return await this.handleResponse(c,t,r,A)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(c,t,r,A);return null}catch(c){throw c instanceof Jt&&(c.setCorrelationId(this.correlationId),A.cacheFailedRequest(c)),c}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===hd.QUERY?t=window.location.search:t=window.location.hash);let r=Hc(t);if(r){try{j4(r,this.browserCrypto,xt.Redirect)}catch(A){return A instanceof Jt&&this.logger.error(`Interaction type validation failed due to ${A.errorCode}: ${A.errorMessage}`),[null,""]}return ew(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}const a=this.browserStorage.getTemporaryCache(Tn.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Tn.URL_HASH)),a&&(r=Hc(a),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,a]):[null,""]}async handleResponse(e,t,r,a){if(!e.state)throw rt(Dg);if(e.ear_jwe){const u=await Re(this.getDiscoveredAuthority.bind(this),oe.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return Re(rf,oe.HandleResponseEar,this.logger,this.performanceClient,t.correlationId)(t,e,Kt.acquireTokenRedirect,this.config,u,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const c=await Re(this.createAuthCodeClient.bind(this),oe.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:t.authority});return Re(ca,oe.HandleResponseCode,this.logger,this.performanceClient,t.correlationId)(t,e,r,Kt.acquireTokenRedirect,this.config,c,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:Kt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=t||this.config.auth.onRedirectNavigate;if(typeof a=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),a(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),rt(Id)}async logout(e){var a;this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(Kt.logout);try{this.eventHandler.emitEvent(lt.LOGOUT_START,xt.Redirect,e),await this.clearCacheOnLogout(this.correlationId,t.account);const A={apiId:Kt.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=await Re(this.createAuthCodeClient.bind(this),oe.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(c.authority.protocolMode===kr.OIDC)try{c.authority.endSessionEndpoint}catch{if((a=t.account)!=null&&a.homeAccountId){this.eventHandler.emitEvent(lt.LOGOUT_SUCCESS,xt.Redirect,t);return}}const u=c.getLogoutUri(t);if(this.eventHandler.emitEvent(lt.LOGOUT_SUCCESS,xt.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(u)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,wi.SIGNOUT),await this.navigationClient.navigateExternal(u,A);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,wi.SIGNOUT),await this.navigationClient.navigateExternal(u,A);return}}catch(A){throw A instanceof Jt&&(A.setCorrelationId(this.correlationId),r.cacheFailedRequest(A)),this.eventHandler.emitEvent(lt.LOGOUT_FAILURE,xt.Redirect,null,A),this.eventHandler.emitEvent(lt.LOGOUT_END,xt.Redirect),A}this.eventHandler.emitEvent(lt.LOGOUT_END,xt.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return Nt.getAbsoluteUrl(t,Go())}}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function Y4(i,e,t,r,a){if(e.addQueueMeasurement(oe.SilentHandlerInitiateAuthRequest,r),!i)throw t.info("Navigate url is empty"),rt(Id);return a?Re(q4,oe.SilentHandlerLoadFrame,t,e,r)(i,a,e,r):Dr(Z4,oe.SilentHandlerLoadFrameSync,t,e,r)(i)}async function J4(i,e,t,r,a){const A=Fd();if(!A.contentDocument)throw"No document associated with iframe!";return(await nf(A.contentDocument,i,e,t,r,a)).submit(),A}async function X4(i,e,t,r,a){const A=Fd();if(!A.contentDocument)throw"No document associated with iframe!";return(await tf(A.contentDocument,i,e,t,r,a)).submit(),A}async function Rx(i,e,t,r,a,A,c){return r.addQueueMeasurement(oe.SilentHandlerMonitorIframeForHash,A),new Promise((u,p)=>{e<Ch&&a.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Ch}ms). This may result in timeouts.`);const m=window.setTimeout(()=>{window.clearInterval(h),p(rt(S1))},e),h=window.setInterval(()=>{let y="";const b=i.contentWindow;try{y=b?b.location.href:""}catch{}if(!y||y==="about:blank")return;let L="";b&&(c===hd.QUERY?L=b.location.search:L=b.location.hash),window.clearTimeout(m),window.clearInterval(h),u(L)},t)}).finally(()=>{Dr(eE,oe.RemoveHiddenIframe,a,r,A)(i)})}function q4(i,e,t,r){return t.addQueueMeasurement(oe.SilentHandlerLoadFrame,r),new Promise((a,A)=>{const c=Fd();window.setTimeout(()=>{if(!c){A("Unable to load iframe");return}c.src=i,a(c)},e)})}function Z4(i){const e=Fd();return e.src=i,e}function Fd(){const i=document.createElement("iframe");return i.className="msalSilentIframe",i.style.visibility="hidden",i.style.position="absolute",i.style.width=i.style.height="0",i.style.border="0",i.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),i.setAttribute("allow","local-network-access *"),document.body.appendChild(i),i}function eE(i){document.body===i.parentNode&&document.body.removeChild(i)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class tE extends va{constructor(e,t,r,a,A,c,u,p,m,h,y){super(e,t,r,a,A,c,p,h,y),this.apiId=u,this.nativeStorage=m}async acquireToken(e){this.performanceClient.addQueueMeasurement(oe.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t={...e};t.prompt?t.prompt!==Zn.NONE&&t.prompt!==Zn.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${Zn.NONE}`),t.prompt=Zn.NONE):t.prompt=Zn.NONE;const r=await Re(this.initializeAuthorizationRequest.bind(this),oe.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,xt.Silent);return r.platformBroker=QA(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),rw(r.authority),this.config.auth.protocolMode===kr.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let t;const r=this.initializeServerTelemetryManager(this.apiId);try{return t=await Re(this.createAuthCodeClient.bind(this),oe.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await Re(this.silentTokenHelper.bind(this),oe.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(a){if(a instanceof Jt&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),!t||!(a instanceof Jt)||a.errorCode!==Ir.INVALID_GRANT_ERROR)throw a;return this.performanceClient.addFields({retryError:a.errorCode},this.correlationId),await Re(this.silentTokenHelper.bind(this),oe.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(t,e)}}async executeEarFlow(e){const t=e.correlationId,r=await Re(this.getDiscoveredAuthority.bind(this),oe.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=await Re(Wg,oe.GenerateEarKey,this.logger,this.performanceClient,t)(),A=await Re(ys,oe.GeneratePkceCodes,this.logger,this.performanceClient,t)(this.performanceClient,this.logger,t),c={...e,earJwk:a,codeChallenge:A.challenge},u=await Re(X4,oe.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,t)(this.config,r,c,this.logger,this.performanceClient),p=this.config.auth.OIDCOptions.serverResponseType,m=await Re(Rx,oe.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,t)(u,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,p),h=Dr(bA,oe.DeserializeResponse,this.logger,this.performanceClient,t)(m,p,this.logger);if(!h.ear_jwe&&h.code){const y=await Re(this.createAuthCodeClient.bind(this),oe.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,t)({serverTelemetryManager:this.initializeServerTelemetryManager(this.apiId),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:r});return Re(ca,oe.HandleResponseCode,this.logger,this.performanceClient,t)(c,h,A.verifier,this.apiId,this.config,y,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return Re(rf,oe.HandleResponseEar,this.logger,this.performanceClient,t)(c,h,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(rt(Ed))}async silentTokenHelper(e,t){const r=t.correlationId;this.performanceClient.addQueueMeasurement(oe.SilentIframeClientTokenHelper,r);const a=await Re(ys,oe.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),A={...t,codeChallenge:a.challenge};let c;if(t.httpMethod===as.POST)c=await Re(J4,oe.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,e.authority,A,this.logger,this.performanceClient);else{const h=await Re(ef,oe.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,A,this.logger,this.performanceClient);c=await Re(Y4,oe.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(h,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const u=this.config.auth.OIDCOptions.serverResponseType,p=await Re(Rx,oe.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(c,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,u),m=Dr(bA,oe.DeserializeResponse,this.logger,this.performanceClient,r)(p,u,this.logger);return Re(ca,oe.HandleResponseCode,this.logger,this.performanceClient,r)(t,m,a.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class nE extends va{async acquireToken(e){this.performanceClient.addQueueMeasurement(oe.SilentRefreshClientAcquireToken,e.correlationId);const t=await Re(qg,oe.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...t};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const a=this.initializeServerTelemetryManager(Kt.acquireTokenSilent_silentFlow),A=await this.createRefreshTokenClient({serverTelemetryManager:a,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return Re(A.acquireTokenByRefreshToken.bind(A),oe.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(c=>{throw c.setCorrelationId(this.correlationId),a.cacheFailedRequest(c),c})}logout(){return Promise.reject(rt(Ed))}async createRefreshTokenClient(e){const t=await Re(this.getClientConfiguration.bind(this),oe.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new fI(t,this.performanceClient)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class rE{constructor(e,t,r,a){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=a}async loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw rt(kd);const a=e.correlationId||go(),A=t.id_token?Io(t.id_token,mr):void 0,c=Eo(A||{}),u={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},p=e.authority?new ar(ar.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,u,this.logger,e.correlationId||go()):void 0,m=await this.loadAccount(e,r.clientInfo||t.client_info||"",a,A,p),h=await this.loadIdToken(t,m.homeAccountId,m.environment,m.realm,a,c),y=await this.loadAccessToken(e,t,m.homeAccountId,m.environment,m.realm,r,a,c),b=await this.loadRefreshToken(t,m.homeAccountId,m.environment,a,c);return this.generateAuthenticationResult(e,{account:m,idToken:h,accessToken:y,refreshToken:b},A,p)}async loadAccount(e,t,r,a,A){if(this.logger.verbose("TokenCache - loading account"),e.account){const m=In.createFromAccountInfo(e.account);return await this.storage.setAccount(m,r,Eo(a||{})),m}else if(!A||!t&&!a)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),rt(R1);const c=In.generateHomeAccountId(t,A.authorityType,this.logger,this.cryptoObj,a),u=a==null?void 0:a.tid,p=Fg(this.storage,A,c,mr,r,a,t,A.hostnameAndPort,u,void 0,void 0,this.logger);return await this.storage.setAccount(p,r,Eo(a||{})),p}async loadIdToken(e,t,r,a,A,c){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const u=bd(t,r,e.id_token,this.config.auth.clientId,a);return await this.storage.setIdTokenCredential(u,A,c),u}async loadAccessToken(e,t,r,a,A,c,u,p){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const m=t.scope?Dn.fromString(t.scope):new Dn(e.scopes),h=c.expiresOn||t.expires_in+Tr(),y=c.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+Tr(),b=wd(r,a,t.access_token,this.config.auth.clientId,A,m.printScopes(),h,y,mr);return await this.storage.setAccessTokenCredential(b,u,p),b}async loadRefreshToken(e,t,r,a,A){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const c=s1(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(c,a,A),c}generateAuthenticationResult(e,t,r,a){var h,y,b;let A="",c=[],u=null,p;t!=null&&t.accessToken&&(A=t.accessToken.secret,c=Dn.fromString(t.accessToken.target).asArray(),u=aa(t.accessToken.expiresOn),p=aa(t.accessToken.extendedExpiresOn));const m=t.account;return{authority:a?a.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:c,account:In.getAccountInfo(m),idToken:((h=t.idToken)==null?void 0:h.secret)||"",idTokenClaims:r||{},accessToken:A,fromCache:!0,expiresOn:u,correlationId:e.correlationId||"",requestId:"",extExpiresOn:p,familyId:((y=t.refreshToken)==null?void 0:y.familyId)||"",tokenType:((b=t==null?void 0:t.accessToken)==null?void 0:b.tokenType)||"",state:e.state||"",cloudGraphHostName:m.cloudGraphHostName||"",msGraphHost:m.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class oE extends u1{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v4.26.2 2025-11-19 */class iE extends va{constructor(e,t,r,a,A,c,u,p,m,h){super(e,t,r,a,A,c,p,m,h),this.apiId=u}async acquireToken(e){if(!e.code)throw rt(M1);const t=await Re(this.initializeAuthorizationRequest.bind(this),oe.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,xt.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const a={...t,code:e.code},A=await Re(this.getClientConfiguration.bind(this),oe.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),c=new oE(A);this.logger.verbose("Auth code client created");const u=new Aw(c,this.browserStorage,a,this.logger,this.performanceClient);return await Re(u.handleCodeResponseFromServer.bind(u),oe.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(a){throw a instanceof Jt&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),a}}logout(){return Promise.reject(rt(Ed))}}/*! @azure/msal-browser v4.26.2 2025-11-19 */function sE(i,e,t){var c;const r=((c=window.msal)==null?void 0:c.clientIds)||[],a=r.length,A=r.filter(u=>u===i).length;A>1&&t.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:a,sameClientIdInstanceCount:A})}/*! @azure/msal-browser v4.26.2 2025-11-19 */function ql(i,e,t){try{Yg(i)}catch(r){throw e.end({success:!1},r,t),r}}class Ud{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Yo(this.logger,this.performanceClient):Dc,this.eventHandler=new E4(this.logger),this.browserStorage=this.isBrowserEnvironment?new Sh(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,aI(this.config.auth)):x4(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const t={cacheLocation:Gn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Gn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Sh(this.config.auth.clientId,t,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new rE(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const r=new Ud(e);return await r.initialize(t),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,t){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(lt.INITIALIZE_END);return}const r=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),a=this.config.system.allowPlatformBroker,A=this.performanceClient.startMeasurement(oe.InitializeClientApplication,r);if(this.eventHandler.emitEvent(lt.INITIALIZE_START),!t)try{this.logMultipleInstances(A)}catch{}if(await Re(this.browserStorage.initialize.bind(this.browserStorage),oe.InitializeCache,this.logger,this.performanceClient,r)(r),a)try{this.platformAuthProvider=await K4(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(c){this.logger.verbose(c)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Dr(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),oe.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(lt.INITIALIZE_END),A.end({allowPlatformBroker:a,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),nw(this.initialized),this.isBrowserEnvironment){const t=e||"";let r=this.redirectResponse.get(t);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var p;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(((p=this.browserStorage.getInteractionInProgress())==null?void 0:p.type)===wi.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),a=this.browserStorage.getCachedNativeRequest(),A=a&&this.platformAuthProvider&&!e;let c;this.eventHandler.emitEvent(lt.HANDLE_REDIRECT_START,xt.Redirect);let u;try{if(A&&this.platformAuthProvider){c=this.performanceClient.startMeasurement(oe.AcquireTokenRedirect,(a==null?void 0:a.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),c.add({isPlatformBrokerRequest:!0});const m=new Ec(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Kt.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,a.accountId,this.nativeInternalStorage,a.correlationId);u=Re(m.handleRedirectPromise.bind(m),oe.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,c.event.correlationId)(this.performanceClient,c.event.correlationId)}else{const[m,h]=this.browserStorage.getCachedRequest(),y=m.correlationId;c=this.performanceClient.startMeasurement(oe.AcquireTokenRedirect,y),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const b=this.createRedirectClient(y);u=Re(b.handleRedirectPromise.bind(b),oe.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,c.event.correlationId)(e,m,h,c)}}catch(m){throw this.browserStorage.resetRequestCache(),m}return u.then(m=>(m?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(lt.LOGIN_SUCCESS,xt.Redirect,m),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_SUCCESS,xt.Redirect,m),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),c.end({success:!0},void 0,m.account)):c.event.errorCode?c.end({success:!1},void 0):c.discard(),this.eventHandler.emitEvent(lt.HANDLE_REDIRECT_END,xt.Redirect),m)).catch(m=>{this.browserStorage.resetRequestCache();const h=m;throw r.length>0?this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_FAILURE,xt.Redirect,null,h):this.eventHandler.emitEvent(lt.LOGIN_FAILURE,xt.Redirect,null,h),this.eventHandler.emitEvent(lt.HANDLE_REDIRECT_END,xt.Redirect),c.end({success:!1},h),m})}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const r=this.performanceClient.startMeasurement(oe.AcquireTokenPreRedirect,t);r.add({scenarioId:e.scenarioId});const a=e.onRedirectNavigate;if(a)e.onRedirectNavigate=c=>{const u=typeof a=="function"?a(c):void 0;return r.add({navigateCallbackResult:u!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,u};else{const c=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=u=>{const p=typeof c=="function"?c(u):void 0;return r.add({navigateCallbackResult:p!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,p}}const A=this.getAllAccounts().length>0;try{Bx(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,wi.SIGNIN),A?this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_START,xt.Redirect,e):this.eventHandler.emitEvent(lt.LOGIN_START,xt.Redirect,e);let c;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?c=new Ec(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Kt.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(p=>{if(r.add({brokerErrorName:p.name,brokerErrorCode:p.errorCode}),p instanceof So&&ea(p))return this.platformAuthProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(p instanceof ho)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw p}):c=this.createRedirectClient(t).acquireToken(e),await c}catch(c){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(oe.AcquireTokenRedirect,t).end({success:!1},c,e.account):r.end({success:!1},c,e.account),A?this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_FAILURE,xt.Redirect,null,c):this.eventHandler.emitEvent(lt.LOGIN_FAILURE,xt.Redirect,null,c),c}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(oe.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",t),ql(this.initialized,r,e.account),this.browserStorage.setInteractionInProgress(!0,wi.SIGNIN)}catch(u){return Promise.reject(u)}const a=this.getAllAccounts();a.length>0?this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_START,xt.Popup,e):this.eventHandler.emitEvent(lt.LOGIN_START,xt.Popup,e);let A;const c=this.getPreGeneratedPkceCodes(t);return this.canUsePlatformBroker(e)?(r.add({isPlatformBrokerRequest:!0}),A=this.acquireTokenNative({...e,correlationId:t},Kt.acquireTokenPopup).then(u=>(r.end({success:!0},void 0,u.account),u)).catch(u=>{if(r.add({brokerErrorName:u.name,brokerErrorCode:u.errorCode}),u instanceof So&&ea(u))return this.platformAuthProvider=void 0,this.createPopupClient(t).acquireToken(e,c);if(u instanceof ho)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e,c);throw u})):A=this.createPopupClient(t).acquireToken(e,c),A.then(u=>(a.length<this.getAllAccounts().length?this.eventHandler.emitEvent(lt.LOGIN_SUCCESS,xt.Popup,u):this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_SUCCESS,xt.Popup,u),r.end({success:!0,accessTokenSize:u.accessToken.length,idTokenSize:u.idToken.length},void 0,u.account),u)).catch(u=>(a.length>0?this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_FAILURE,xt.Popup,null,u):this.eventHandler.emitEvent(lt.LOGIN_FAILURE,xt.Popup,null,u),r.end({success:!1},u,e.account),Promise.reject(u))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var A,c,u;const t=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:t};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(oe.SsoSilent,t),(A=this.ssoSilentMeasurement)==null||A.add({scenarioId:e.scenarioId}),ql(this.initialized,this.ssoSilentMeasurement,e.account),(c=this.ssoSilentMeasurement)==null||c.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(lt.SSO_SILENT_START,xt.Silent,r);let a;return this.canUsePlatformBroker(r)?((u=this.ssoSilentMeasurement)==null||u.add({isPlatformBrokerRequest:!0}),a=this.acquireTokenNative(r,Kt.ssoSilent).catch(p=>{var m;if((m=this.ssoSilentMeasurement)==null||m.add({brokerErrorName:p.name,brokerErrorCode:p.errorCode}),p instanceof So&&ea(p))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw p})):a=this.createSilentIframeClient(r.correlationId).acquireToken(r),a.then(p=>{var m;return this.eventHandler.emitEvent(lt.SSO_SILENT_SUCCESS,xt.Silent,p),(m=this.ssoSilentMeasurement)==null||m.end({success:!0,accessTokenSize:p.accessToken.length,idTokenSize:p.idToken.length},void 0,p.account),p}).catch(p=>{var m;throw this.eventHandler.emitEvent(lt.SSO_SILENT_FAILURE,xt.Silent,null,p),(m=this.ssoSilentMeasurement)==null||m.end({success:!1},p,e.account),p}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const r=this.performanceClient.startMeasurement(oe.AcquireTokenByCode,t);ql(this.initialized,r),this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_BY_CODE_START,xt.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw rt(D1);if(e.code){const a=e.code;let A=this.hybridAuthCodeResponses.get(a);return A?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),A=this.acquireTokenByCodeAsync({...e,correlationId:t}).then(c=>(this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_BY_CODE_SUCCESS,xt.Silent,c),this.hybridAuthCodeResponses.delete(a),r.end({success:!0,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length},void 0,c.account),c)).catch(c=>{throw this.hybridAuthCodeResponses.delete(a),this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_BY_CODE_FAILURE,xt.Silent,null,c),r.end({success:!1},c),c}),this.hybridAuthCodeResponses.set(a,A)),await A}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const a=await this.acquireTokenNative({...e,correlationId:t},Kt.acquireTokenByCode,e.nativeAccountId).catch(A=>{throw A instanceof So&&ea(A)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:A.name,brokerErrorCode:A.errorCode}),A});return r.end({success:!0},void 0,a.account),a}else throw rt(P1);else throw rt(L1)}catch(a){throw this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_BY_CODE_FAILURE,xt.Silent,null,a),r.end({success:!1},a),a}}async acquireTokenByCodeAsync(e){var a;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(oe.AcquireTokenByCodeAsync,e.correlationId),(a=this.acquireTokenByCodeAsyncMeasurement)==null||a.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(A=>{var c;return(c=this.acquireTokenByCodeAsyncMeasurement)==null||c.end({success:!0,fromCache:A.fromCache}),A}).catch(A=>{var c;throw(c=this.acquireTokenByCodeAsyncMeasurement)==null||c.end({success:!1},A),A}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(oe.AcquireTokenFromCache,e.correlationId),t){case hr.Default:case hr.AccessToken:case hr.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return Re(r.acquireToken.bind(r),oe.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw Ge(ji)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(oe.AcquireTokenByRefreshToken,e.correlationId),t){case hr.Default:case hr.AccessTokenAndRefreshToken:case hr.RefreshToken:case hr.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return Re(r.acquireToken.bind(r),oe.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw Ge(ji)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(oe.AcquireTokenBySilentIframe,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return Re(t.acquireToken.bind(t),oe.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect({correlationId:t,...e})}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);return Bx(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,wi.SIGNOUT),this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);return Yg(this.initialized),this.browserStorage.setInteractionInProgress(!0,wi.SIGNOUT),this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){const t=this.getRequestCorrelationId();return y4(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){const t=this.getRequestCorrelationId();return b4(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){const t=this.getRequestCorrelationId();return w4(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){const t=this.getRequestCorrelationId();return v4(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){const t=this.getRequestCorrelationId();return C4(e,this.logger,this.browserStorage,t)}setActiveAccount(e){const t=this.getRequestCorrelationId();B4(e,this.browserStorage,t)}getActiveAccount(){const e=this.getRequestCorrelationId();return S4(this.browserStorage,e)}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const r=In.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId,Eo(e.idTokenClaims)),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,r,a){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw rt(Ng);return new Ec(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,a)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!QA(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Zn.NONE:case Zn.CONSENT:case Zn.LOGIN:case Zn.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new G4(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new $4(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new tE(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Kt.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new cw(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new nE(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new iE(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Kt.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return tw(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Gn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Gn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?go():Le.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect({correlationId:t,...e||yx})}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||yx})}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(oe.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),ql(this.initialized,r,e.account),this.logger.verbose("acquireTokenSilent called",t);const a=e.account||this.getActiveAccount();if(!a)throw rt(T1);return this.acquireTokenSilentDeduped(e,a,t).then(A=>(r.end({success:!0,fromCache:A.fromCache,accessTokenSize:A.accessToken.length,idTokenSize:A.idToken.length},void 0,A.account),{...A,state:e.state,correlationId:t})).catch(A=>{throw A instanceof Jt&&A.setCorrelationId(t),r.end({success:!1},A,a),A})}async acquireTokenSilentDeduped(e,t,r){const a=Cd(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority},t.homeAccountId),A=JSON.stringify(a),c=this.activeSilentTokenRequests.get(A);if(typeof c>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const u=Re(this.acquireTokenSilentAsync.bind(this),oe.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...e,correlationId:r},t);return this.activeSilentTokenRequests.set(A,u),u.finally(()=>{this.activeSilentTokenRequests.delete(A)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),c}async acquireTokenSilentAsync(e,t){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(oe.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_START,xt.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const a=await Re(k4,oe.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),A=e.cacheLookupPolicy||hr.Default;return this.acquireTokenSilentNoIframe(a,A).catch(async u=>{if(aE(u,A))if(this.activeIframeRequest)if(A!==hr.Skip){const[m,h]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${h}`,a.correlationId);const y=this.performanceClient.startMeasurement(oe.AwaitConcurrentIframe,a.correlationId);y.add({awaitIframeCorrelationId:h});const b=await m;if(y.end({success:b}),b)return this.logger.verbose(`Parallel iframe request with correlationId: ${h} succeeded. Retrying cache and/or RT redemption`,a.correlationId),this.acquireTokenSilentNoIframe(a,A);throw this.logger.info(`Iframe request with correlationId: ${h} failed. Interaction is required.`),u}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",a.correlationId),Re(this.acquireTokenBySilentIframe.bind(this),oe.AcquireTokenBySilentIframe,this.logger,this.performanceClient,a.correlationId)(a);else{let m;return this.activeIframeRequest=[new Promise(h=>{m=h}),a.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",a.correlationId),Re(this.acquireTokenBySilentIframe.bind(this),oe.AcquireTokenBySilentIframe,this.logger,this.performanceClient,a.correlationId)(a).then(h=>(m(!0),h)).catch(h=>{throw m(!1),h}).finally(()=>{this.activeIframeRequest=void 0})}else throw u}).then(u=>(this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_SUCCESS,xt.Silent,u),this.performanceClient.addFields({fromCache:u.fromCache},e.correlationId),u)).catch(u=>{throw this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_FAILURE,xt.Silent,null,u),u}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,t){return QA(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,Kt.acquireTokenSilent_silentFlow,e.account.nativeAccountId,t).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},e.correlationId),r instanceof So&&ea(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,Ge(ji)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===hr.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),Re(this.acquireTokenFromCache.bind(this),oe.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===hr.AccessToken)throw r;return this.eventHandler.emitEvent(lt.ACQUIRE_TOKEN_NETWORK_START,xt.Silent,e),Re(this.acquireTokenByRefreshToken.bind(this),oe.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await Re(ys,oe.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${t?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){const t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),sE(t,e,this.logger)}}function aE(i,e){const t=!(i instanceof ho&&i.subError!==Sd),r=i.errorCode===Ir.INVALID_GRANT_ERROR||i.errorCode===ji,a=t&&r||i.errorCode===Gc||i.errorCode===Tg,A=LI.includes(e);return a&&A}/*! @azure/msal-browser v4.26.2 2025-11-19 */async function AE(i,e){const t=new xs(i);return await t.initialize(),Ud.createController(t,e)}/*! @azure/msal-browser v4.26.2 2025-11-19 */class sf{static async createPublicClientApplication(e){const t=await AE(e);return new sf(e,t)}constructor(e,t){this.isBroker=!1,this.controller=t||new Ud(new xs(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}/*! @azure/msal-browser v4.26.2 2025-11-19 */const lE={initialize:()=>Promise.reject(kn(Qn)),acquireTokenPopup:()=>Promise.reject(kn(Qn)),acquireTokenRedirect:()=>Promise.reject(kn(Qn)),acquireTokenSilent:()=>Promise.reject(kn(Qn)),acquireTokenByCode:()=>Promise.reject(kn(Qn)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(kn(Qn)),loginPopup:()=>Promise.reject(kn(Qn)),loginRedirect:()=>Promise.reject(kn(Qn)),logout:()=>Promise.reject(kn(Qn)),logoutRedirect:()=>Promise.reject(kn(Qn)),logoutPopup:()=>Promise.reject(kn(Qn)),ssoSilent:()=>Promise.reject(kn(Qn)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw kn(Qn)},getLogger:()=>{throw kn(Qn)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw kn(Qn)},hydrateCache:()=>Promise.reject(kn(Qn)),clearCache:()=>Promise.reject(kn(Qn))};/*! @azure/msal-browser v4.26.2 2025-11-19 */class cE{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case lt.LOGIN_START:return Rn.Login;case lt.SSO_SILENT_START:return Rn.SsoSilent;case lt.ACQUIRE_TOKEN_START:if(e.interactionType===xt.Redirect||e.interactionType===xt.Popup)return Rn.AcquireToken;break;case lt.HANDLE_REDIRECT_START:return Rn.HandleRedirect;case lt.LOGOUT_START:return Rn.Logout;case lt.SSO_SILENT_SUCCESS:case lt.SSO_SILENT_FAILURE:if(t&&t!==Rn.SsoSilent)break;return Rn.None;case lt.LOGOUT_END:if(t&&t!==Rn.Logout)break;return Rn.None;case lt.HANDLE_REDIRECT_END:if(t&&t!==Rn.HandleRedirect)break;return Rn.None;case lt.LOGIN_SUCCESS:case lt.LOGIN_FAILURE:case lt.ACQUIRE_TOKEN_SUCCESS:case lt.ACQUIRE_TOKEN_FAILURE:case lt.RESTORE_FROM_BFCACHE:if(e.interactionType===xt.Redirect||e.interactionType===xt.Popup){if(t&&t!==Rn.Login&&t!==Rn.AcquireToken)break;return Rn.None}break}return null}}/*! @azure/msal-react v3.0.22 2025-11-19 */const dE={instance:lE,inProgress:Rn.None,accounts:[],logger:new ya({})},af=f.createContext(dE);af.Consumer;/*! @azure/msal-react v3.0.22 2025-11-19 */function Mx(i,e){if(i.length!==e.length)return!1;const t=[...e];return i.every(r=>{const a=t.shift();return!r||!a?!1:r.homeAccountId===a.homeAccountId&&r.localAccountId===a.localAccountId&&r.username===a.username})}/*! @azure/msal-react v3.0.22 2025-11-19 */const uE="@azure/msal-react",Lx="3.0.22";/*! @azure/msal-react v3.0.22 2025-11-19 */const Zc={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},pE=(i,e)=>{const{type:t,payload:r}=e;let a=i.inProgress;switch(t){case Zc.UNBLOCK_INPROGRESS:i.inProgress===Rn.Startup&&(a=Rn.None,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case Zc.EVENT:const c=r.message,u=cE.getInteractionStatusFromEvent(c,i.inProgress);u&&(r.logger.info(`MsalProvider - ${c.eventType} results in setting inProgress from ${i.inProgress} to ${u}`),a=u);break;default:throw new Error(`Unknown action type: ${t}`)}if(a===Rn.Startup)return i;const A=r.instance.getAllAccounts();return a!==i.inProgress&&!Mx(A,i.accounts)?{...i,inProgress:a,accounts:A}:a!==i.inProgress?{...i,inProgress:a}:Mx(A,i.accounts)?i:{...i,accounts:A}};function hE({instance:i,children:e}){f.useEffect(()=>{i.initializeWrapperLibrary(QI.React,Lx)},[i]);const t=f.useMemo(()=>i.getLogger().clone(uE,Lx),[i]),[r,a]=f.useReducer(pE,void 0,()=>({inProgress:Rn.Startup,accounts:[]}));f.useEffect(()=>{const c=i.addEventCallback(u=>{a({payload:{instance:i,logger:t,message:u},type:Zc.EVENT})});return t.verbose(`MsalProvider - Registered event callback with id: ${c}`),i.initialize().then(()=>{i.handleRedirectPromise().catch(()=>{}).finally(()=>{a({payload:{instance:i,logger:t},type:Zc.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{c&&(t.verbose(`MsalProvider - Removing event callback ${c}`),i.removeEventCallback(c))}},[i,t]);const A={instance:i,inProgress:r.inProgress,accounts:r.accounts,logger:t};return ps.createElement(af.Provider,{value:A},e)}/*! @azure/msal-react v3.0.22 2025-11-19 */const pw=()=>f.useContext(af),Dx="https://maxcap.azurewebsites.net";async function ke(i,e={}){const t=i.startsWith("/api")?`${Dx}${i}`:`${Dx}/api${i}`,r=await fetch(t,{credentials:"include",...e,headers:{"Content-Type":"application/json",...e.headers||{}}});if(!r.ok){const a=await r.text();throw new Error(a||`API error: ${r.status}`)}return r}const gE=()=>{const{instance:i,accounts:e}=pw(),[t,r]=f.useState({email:"",password:""}),[a,A]=f.useState(!1),[c,u]=f.useState(!1),[p,m]=f.useState(""),[h,y]=f.useState({x:window.innerWidth/2,y:window.innerHeight/2}),b=ps.useRef({x:window.innerWidth/2,y:window.innerHeight/2}),L=ps.useMemo(()=>Array.from({length:6}).map(()=>({top:Math.random()*100,left:Math.random()*100,delay:Math.random()*20})),[]),[S,U]=f.useState(!1),[E,P]=f.useState({y:0,x:0,velocityY:0,velocityX:0,rotation:0,rotationVelocity:0,opacity:1,isFalling:!1}),[O,ve]=f.useState({y:0,x:0,velocityY:0,velocityX:0,rotation:0,rotationVelocity:0,opacity:1}),ce=1.2,Q=125,V=.6,Z=.98,le=15,$=()=>{if(E.isFalling)return;const M=(Math.random()-.5)*8,I=(Math.random()-.5)*le;P({y:0,x:0,velocityY:0,velocityX:M,rotation:0,rotationVelocity:I,opacity:1,isFalling:!0}),ve({y:0,x:0,velocityY:Math.random()*2-1,velocityX:(Math.random()-.5)*10,rotation:0,rotationVelocity:(Math.random()-.5)*20,opacity:1});let _;const Fe=()=>{P(Y=>{let D=Y.velocityY+ce,K=Y.velocityX*Z,Te=Y.y+D,Ne=Y.x+K,G=Y.rotation+Y.rotationVelocity,W=Y.rotationVelocity*.99;return Te>=Q&&(Te=Q,D=-D*V,W*=.8,Math.abs(D)<.5&&Math.abs(K)<.1)?(setTimeout(()=>{P(j=>({...j,opacity:0})),ve(j=>({...j,opacity:0}))},800),setTimeout(()=>{P({y:0,x:0,velocityY:0,velocityX:0,rotation:0,rotationVelocity:0,opacity:0,isFalling:!1}),ve({y:0,x:0,velocityY:0,velocityX:0,rotation:0,rotationVelocity:0,opacity:0})},1200),setTimeout(()=>{P(j=>({...j,opacity:1})),ve(j=>({...j,opacity:1}))},1500),cancelAnimationFrame(_),Y):{...Y,y:Te,x:Ne,velocityY:D,velocityX:K,rotation:G,rotationVelocity:W}}),ve(Y=>{let D=Y.velocityY+ce,K=Y.velocityX*Z,Te=Y.y+D,Ne=Y.x+K,G=Y.rotation+Y.rotationVelocity,W=Y.rotationVelocity*.99;return Te>=Q+10&&(Te=Q+10,D=-D*V*.7,W*=.7),{y:Te,x:Ne,velocityY:D,velocityX:K,rotation:G,rotationVelocity:W,opacity:Y.opacity}}),_=requestAnimationFrame(Fe)};_=requestAnimationFrame(Fe)},[ue,we]=f.useState(0),[ge,te]=f.useState(!0),Me=["Clarity for planning, approvals, and execution.","Designed for signal. Built to reduce guesswork.","Insight you can defend  not just display."];f.useEffect(()=>{const M=setInterval(()=>{te(!1),setTimeout(()=>{we(I=>(I+1)%Me.length),te(!0)},300)},3e3);return()=>clearInterval(M)},[]),f.useEffect(()=>{const M=I=>{b.current={x:I.clientX,y:I.clientY}};return window.addEventListener("mousemove",M),()=>window.removeEventListener("mousemove",M)},[]),f.useEffect(()=>{let M;const I=()=>{y(_=>{const Fe=b.current.x-_.x,Y=b.current.y-_.y;return{x:_.x+Fe*.04,y:_.y+Y*.04}}),M=requestAnimationFrame(I)};return I(),()=>cancelAnimationFrame(M)},[]),f.useEffect(()=>{console.log(" LoginForm mounted"),console.log(" MSAL instance:",i?"READY":"NOT READY"),console.log(" Accounts:",(e==null?void 0:e.length)||0),e&&e.length>0&&console.log(" Existing account found:",e[0].username)},[i,e]);const ie=M=>{const{name:I,value:_}=M.target;r(Fe=>({...Fe,[I]:_})),p&&m("")},me=()=>{A(!a)},N=async M=>{M.preventDefault(),u(!0),m("");try{const I=await ke("/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:"password",email:t.email,password:t.password})}),_=await I.json();I.ok?(console.log("Login successful! User role:",_.role),window.location.href="/admindashboard"):(I.status===401?m("Invalid email or password"):I.status===400?m(_.error||"Missing email or password"):I.status===500?m("Server error. Please try again later."):m(_.error||"Login failed"),u(!1))}catch(I){u(!1),console.error("Login error:",I),m("Login failed. Please check your connection.")}},be=async()=>{console.log(""),console.log(" Microsoft Login Button Clicked");try{if(!i){console.error(" MSAL instance not ready!"),alert("Microsoft login not ready. Please refresh and try again.");return}i.getAllAccounts().length>0&&(console.log(" Clearing cached accounts before fresh login..."),Object.keys(localStorage).forEach(_=>{_.includes("msal")&&(localStorage.removeItem(_),console.log("   Removed:",_))}),console.log(" Cache cleared! Proceeding with fresh login...")),console.log(" MSAL instance ready"),console.log(" Expected MSAL Configuration:"),console.log("   Redirect URI: /auth");const I={scopes:["openid","profile","email","User.Read","Calendars.Read"],prompt:"select_account"};console.log(" Calling instance.loginRedirect()..."),console.log(""),await i.loginRedirect(I)}catch(M){console.error(""),console.error(" Microsoft login error:",M),console.error(""),alert(`Microsoft login failed: ${M.message}`)}},H={container:{minHeight:"100vh",display:"flex",fontFamily:'"Montserrat", Tahoma, Geneva, Verdana, sans-serif',overflow:"hidden",position:"relative"},leftPanel:{flex:"0 0 60%",background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)",position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",overflow:"hidden"},rightPanel:{flex:"0 0 40%",backgroundColor:"#ffffff",display:"flex",justifyContent:"center",alignItems:"center",padding:"40px",position:"relative",boxShadow:"-10px 0 40px rgba(0, 0, 0, 0.1)"},animatedBg1:{position:"absolute",width:"600px",height:"600px",background:"radial-gradient(circle, rgba(59, 130, 246, 0.2) 0%, transparent 70%)",borderRadius:"50%",top:"-250px",left:"-250px",animation:"float1 20s ease-in-out infinite",pointerEvents:"none"},animatedBg2:{position:"absolute",width:"500px",height:"500px",background:"radial-gradient(circle, rgba(168, 85, 247, 0.15) 0%, transparent 70%)",borderRadius:"50%",bottom:"-200px",right:"-200px",animation:"float2 18s ease-in-out infinite",pointerEvents:"none"},animatedBg3:{position:"absolute",width:"450px",height:"450px",background:"radial-gradient(circle, rgba(34, 211, 238, 0.12) 0%, transparent 70%)",borderRadius:"50%",top:"40%",left:"60%",animation:"float3 22s ease-in-out infinite",pointerEvents:"none"},particles:{position:"absolute",inset:0,pointerEvents:"none"},particle:M=>({position:"absolute",width:"5px",height:"5px",background:"rgba(255, 255, 255, 0.4)",borderRadius:"50%",top:`${M*17%100}%`,left:`${M*23%100}%`,animation:`particle${M%3} ${15+M%5}s ease-in-out infinite`,animationDelay:`${M*.5}s`}),mouseGlow:{position:"absolute",width:"700px",height:"700px",background:"radial-gradient(circle, rgba(96, 165, 250, 0.12) 0%, transparent 70%)",borderRadius:"50%",pointerEvents:"none",transform:`translate(${h.x-350}px, ${h.y-350}px)`,transition:"transform 1s cubic-bezier(0.22, 1, 0.36, 1)"},shootingStars:{position:"absolute",inset:0,overflow:"hidden",pointerEvents:"none",zIndex:0},shootingStar:M=>({position:"absolute",width:"200px",height:"2px",background:"linear-gradient(90deg, rgba(255,255,255,0), #00A4EF, #7FBA00, #A855F7, rgba(255,255,255,0))",opacity:1,transform:"rotate(-25deg)",animation:`shootingStar ${8+M*2}s cubic-bezier(0.4, 0, 0.2, 1) infinite`,filter:"drop-shadow(0 0 12px rgba(59,130,246,0.9))"}),logoContainer:{position:"relative",zIndex:2,display:"flex",flexDirection:"column",alignItems:"center",gap:"40px"},logoFloatWrapper:{position:"relative",animation:"floatY 4s ease-in-out infinite"},logoClickWrapper:{cursor:"pointer",willChange:"transform, opacity",transition:"opacity 0.3s ease",position:"relative",transform:`translate(${E.x}px, ${E.y}px) rotate(${E.rotation}deg)`,opacity:E.opacity},logoImage:{height:"80px",width:"auto",maxWidth:"300px",objectFit:"contain",animation:"logoClock 10s ease-in-out infinite",filter:"drop-shadow(0 8px 24px rgba(59, 130, 246, 0.4))"},circularText:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",animation:"sealRotate 40s linear infinite",pointerEvents:"none",zIndex:1},brandingText:{textAlign:"center",color:"white",marginTop:"20px"},brandingTitle:{fontSize:"48px",fontWeight:"800",marginBottom:"16px",background:"linear-gradient(90deg, #FF0000 0%, #00FF00 25%, #0000FF 50%, #FF00FF 75%, #FF0000 100%)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",animation:"fadeInDown 1s ease-out, rgbShift 3s linear infinite"},brandingSubtitle:{fontSize:"18px",fontWeight:"500",color:"rgba(255, 255, 255, 0.8)",transition:"opacity 0.3s ease",opacity:ge?1:0,minHeight:"27px",lineHeight:"1.5"},featurePills:{display:"flex",gap:"12px",marginTop:"40px",flexWrap:"wrap",justifyContent:"center",maxWidth:"500px"},featurePill:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"50px",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",fontSize:"13px",fontWeight:"600",animation:"fadeInUp 1s ease-out"},formContainer:{width:"100%",maxWidth:"420px",animation:"fadeInRight 0.8s ease-out"},formTitle:{fontSize:"32px",fontWeight:"bold",color:"#1f2937",marginBottom:"12px"},formSubtitle:{fontSize:"15px",color:"#6b7280",marginBottom:"40px",lineHeight:"0.6"},inputGroup:{marginBottom:"24px"},label:{display:"block",fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#1f2937"},input:M=>({width:"100%",padding:"14px 16px",borderRadius:"10px",border:M?"2px solid #ef4444":"2px solid #e5e7eb",fontSize:"15px",outline:"none",boxSizing:"border-box",transition:"all 0.3s ease",backgroundColor:"#f9fafb"}),passwordContainer:{position:"relative"},passwordInput:M=>({width:"100%",padding:"14px 50px 14px 16px",borderRadius:"10px",border:M?"2px solid #ef4444":"2px solid #e5e7eb",fontSize:"15px",outline:"none",boxSizing:"border-box",transition:"all 0.3s ease",backgroundColor:"#f9fafb"}),eyeButton:{position:"absolute",top:"50%",right:"12px",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#9ca3af",padding:"8px",transition:"all 0.3s ease"},signInButton:M=>({width:"100%",backgroundColor:M?"#6b7280":"#0f172a",color:"white",padding:"16px",fontSize:"16px",fontWeight:"bold",borderRadius:"10px",border:"none",cursor:M?"not-allowed":"pointer",marginTop:"12px",transition:"all 0.3s ease",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",transform:M?"scale(0.98)":"scale(1)"}),loadingSpinner:{width:"18px",height:"18px",border:"2px solid #ffffff40",borderRadius:"50%",borderTopColor:"#ffffff",animation:"spin 0.6s linear infinite",marginRight:"10px"},errorMessage:{color:"#ef4444",fontSize:"14px",textAlign:"left",marginTop:"12px",padding:"12px",backgroundColor:"#fef2f2",borderRadius:"8px",border:"1px solid #fecaca",animation:"shake 0.5s ease-in-out, fadeIn 0.3s ease-out"},divider:{display:"flex",alignItems:"center",margin:"28px 0",gap:"16px"},dividerLine:{flex:1,height:"1px",background:"linear-gradient(to right, transparent, #d1d5db, transparent)"},dividerText:{fontSize:"13px",color:"#9ca3af",fontWeight:"500"},microsoftButtonWrapper:{position:"relative",width:"100%"},microsoftButton:{position:"relative",zIndex:1,width:"100%",backgroundColor:"#ffffff",color:"#1e293b",padding:"14px",fontSize:"15px",fontWeight:"600",borderRadius:"10px",border:"2px solid #e5e7eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",transition:"all 0.3s ease"},microsoftLogo:{width:"22px",height:"22px"}};return f.useEffect(()=>{const M=document.createElement("style");return M.textContent=`
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            @keyframes float1 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                33% { transform: translate(120px, -120px) scale(1.1); }
                66% { transform: translate(-60px, 60px) scale(0.9); }
            }
            @keyframes float2 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                33% { transform: translate(-120px, 120px) scale(1.15); }
                66% { transform: translate(90px, -90px) scale(0.95); }
            }
            @keyframes float3 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                50% { transform: translate(-140px, 70px) scale(1.2); }
            }
            @keyframes particle0 {
                0%, 100% { transform: translateY(0) translateX(0); opacity: 0.3; }
                50% { transform: translateY(-40px) translateX(25px); opacity: 0.7; }
            }
            @keyframes particle1 {
                0%, 100% { transform: translateY(0) translateX(0); opacity: 0.2; }
                50% { transform: translateY(50px) translateX(-20px); opacity: 0.6; }
            }
            @keyframes particle2 {
                0%, 100% { transform: translateY(0) translateX(0); opacity: 0.4; }
                50% { transform: translateY(-30px) translateX(-30px); opacity: 0.8; }
            }
            @keyframes floatY {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-15px); }
            }
            @keyframes logoClock {
                0% { transform: rotate(0deg); }
                70% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            @keyframes fadeInDown {
                0% { transform: translateY(-30px); opacity: 0; }
                100% { transform: translateY(0); opacity: 1; }
            }
            @keyframes fadeInUp {
                0% { transform: translateY(30px); opacity: 0; }
                100% { transform: translateY(0); opacity: 1; }
            }
            @keyframes fadeInRight {
                0% { transform: translateX(40px); opacity: 0; }
                100% { transform: translateX(0); opacity: 1; }
            }
            @keyframes fadeIn {
                0% { opacity: 0; }
                100% { opacity: 1; }
            }
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
                20%, 40%, 60%, 80% { transform: translateX(8px); }
            }
            @keyframes shootingStar {
                0% {
                    transform: translateX(200px) translateY(-100px) rotate(-25deg);
                    opacity: 0;
                }
                15% {
                    opacity: 0.9;
                }
                100% {
                    transform: translateX(-900px) translateY(500px) rotate(-25deg);
                    opacity: 0;
                }
            }
            @keyframes sealRotate {
                from {
                    transform: translate(-50%, -50%) rotate(0deg);
                }
                to {
                    transform: translate(-50%, -50%) rotate(360deg);
                }
            }
            @keyframes microsoftGlow {
                0% { background-position: 200% 0; }
                100% { background-position: -200% 0; }
            }
            @keyframes rgbShift {
                0% { background-position: 0% center; }
                100% { background-position: 200% center; }
            }
            input:focus {
                border-color: #3b82f6 !important;
                background-color: #ffffff !important;
                box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1) !important;
            }
            button:hover:not(:disabled) {
                transform: scale(1.03) !important;
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12) !important;
            }
            svg text {
                font-size: 15.5px;
                font-weight: 600;
                letter-spacing: 1.2px;
                fill: rgba(255, 255, 255, 0.85);
                text-transform: uppercase;
            }
            
            @media (max-width: 1024px) {
                .split-container {
                    flex-direction: column !important;
                }
                .left-panel, .right-panel {
                    flex: 1 1 100% !important;
                    min-height: 50vh !important;
                }
            }
        `,document.head.appendChild(M),()=>{document.head.contains(M)&&document.head.removeChild(M)}},[]),n.jsxs("div",{style:H.container,className:"split-container",children:[n.jsxs("div",{style:H.leftPanel,className:"left-panel",children:[n.jsx("div",{style:H.animatedBg1}),n.jsx("div",{style:H.animatedBg2}),n.jsx("div",{style:H.animatedBg3}),n.jsx("div",{style:H.shootingStars,children:L.map((M,I)=>n.jsx("div",{style:{...H.shootingStar(I),top:`${M.top}%`,left:`${M.left}%`,animationDelay:`${M.delay}s`}},I))}),n.jsx("div",{style:H.mouseGlow}),n.jsx("div",{style:H.particles,children:[...Array(15)].map((M,I)=>n.jsx("div",{style:H.particle(I)},I))}),n.jsxs("div",{style:H.logoContainer,children:[n.jsx("div",{style:H.logoFloatWrapper,children:n.jsxs("div",{style:H.logoClickWrapper,onClick:$,children:[n.jsxs("svg",{width:"180",height:"180",viewBox:"0 0 180 180",style:{...H.circularText,transform:`translate(calc(-50% + ${O.x}px), calc(-50% + ${O.y}px)) rotate(${O.rotation}deg)`,opacity:O.opacity},children:[n.jsx("defs",{children:n.jsx("path",{id:"circlePath",d:"M 90, 90 m -60, 0 a 60,60 0 1,1 120,0 a 60,60 0 1,1 -120,0"})}),n.jsx("text",{children:n.jsx("textPath",{href:"#circlePath",startOffset:"0%",children:"MAXCAP  MAXCAP  MAXCAP  MAXCAP "})})]}),n.jsx("img",{src:"/images/maxcap.png",alt:"Logo",style:H.logoImage})]})}),n.jsxs("div",{style:H.brandingText,children:[n.jsx("h1",{style:H.brandingTitle,children:"MAXCAP"}),n.jsx("p",{style:H.brandingSubtitle,children:Me[ue]})]}),n.jsxs("div",{style:H.featurePills,children:[n.jsxs("div",{style:H.featurePill,children:[n.jsx(hs,{size:16}),n.jsx("span",{children:"Enterprise Grade"})]}),n.jsxs("div",{style:{...H.featurePill,animationDelay:"0.1s"},children:[n.jsx(Ko,{size:16}),n.jsx("span",{children:"Real-time Sync"})]}),n.jsxs("div",{style:{...H.featurePill,animationDelay:"0.2s"},children:[n.jsx(co,{size:16}),n.jsx("span",{children:"AI-Powered"})]})]})]})]}),n.jsx("div",{style:H.rightPanel,className:"right-panel",children:n.jsxs("div",{style:H.formContainer,children:[n.jsx("h2",{style:H.formTitle,children:"Welcome back"}),n.jsx("p",{style:H.formSubtitle,children:"Sign in to your workspace"}),n.jsxs("form",{onSubmit:N,children:[n.jsxs("div",{style:H.inputGroup,children:[n.jsx("label",{style:H.label,children:"Email Address"}),n.jsx("input",{type:"email",name:"email",value:t.email,onChange:ie,onKeyDown:M=>M.key==="Enter"&&N(M),style:H.input(!!p),required:!0,disabled:c,placeholder:"Enter your email address"})]}),n.jsxs("div",{style:H.inputGroup,children:[n.jsx("label",{style:H.label,children:"Password"}),n.jsxs("div",{style:H.passwordContainer,children:[n.jsx("input",{type:a?"text":"password",name:"password",value:t.password,onChange:ie,onKeyDown:M=>M.key==="Enter"&&N(M),style:H.passwordInput(!!p),required:!0,disabled:c,placeholder:"Enter your password"}),n.jsx("button",{type:"button",onClick:me,style:H.eyeButton,disabled:c,children:a?n.jsx(ch,{size:18}):n.jsx($o,{size:18})})]})]}),p&&n.jsx("div",{style:H.errorMessage,children:p}),n.jsx("button",{type:"submit",style:H.signInButton(c),disabled:c,children:c?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:H.loadingSpinner}),"Signing In..."]}):"Sign In"})]}),n.jsxs("div",{style:H.divider,children:[n.jsx("div",{style:H.dividerLine}),n.jsx("span",{style:H.dividerText,children:"OR"}),n.jsx("div",{style:H.dividerLine})]}),n.jsxs("div",{style:H.microsoftButtonWrapper,onMouseEnter:()=>U(!0),onMouseLeave:()=>U(!1),children:[S&&n.jsx("div",{style:{position:"absolute",inset:"-3px",borderRadius:"12px",background:"linear-gradient(90deg, #F25022 0%, #7FBA00 25%, #00A4EF 50%, #FFB900 75%, #F25022 100%)",backgroundSize:"300% 100%",animation:"microsoftGlow 3s linear infinite",filter:"blur(10px)",opacity:"0.7",zIndex:0}}),n.jsxs("button",{type:"button",onClick:be,style:H.microsoftButton,children:[n.jsx("img",{src:"/images/microsoft.png",alt:"Microsoft Logo",style:H.microsoftLogo}),"Sign in with Microsoft"]})]})]})})]})},fE=()=>{const[i,e]=f.useState(""),t=RB(),r=A=>{A.preventDefault(),console.log("Reset requested for:",i)},a={container:{minHeight:"100vh",background:"linear-gradient(to right, #0079D3, #00A1F1)",display:"flex",justifyContent:"center",alignItems:"center",fontFamily:'"Segoe UI", sans-serif',padding:"20px"},formBox:{backgroundColor:"#fff",padding:"40px",borderRadius:"10px",width:"100%",maxWidth:"400px",position:"relative",boxShadow:"0 10px 30px rgba(0,0,0,0.1)"},backButton:{position:"absolute",top:"20px",left:"20px",background:"none",border:"none",color:"#0079D3",cursor:"pointer"},header:{textAlign:"center",fontSize:"20px",fontWeight:"600",marginBottom:"30px",marginTop:"10px",color:"#1f2937"},input:{width:"100%",padding:"12px 14px",borderRadius:"6px",border:"1px solid #ccc",fontSize:"15px",marginBottom:"24px",outline:"none"},button:{width:"100%",backgroundColor:"#0079D3",color:"white",padding:"12px",fontSize:"16px",fontWeight:"bold",borderRadius:"6px",border:"none",cursor:"pointer"}};return n.jsx("div",{style:a.container,children:n.jsxs("div",{style:a.formBox,children:[n.jsx("button",{onClick:()=>t("/"),style:a.backButton,children:n.jsx(Pi,{size:20})}),n.jsx("h2",{style:a.header,children:"Reset Password"}),n.jsxs("form",{onSubmit:r,children:[n.jsx("input",{type:"email",placeholder:"Email/Phone",value:i,onChange:A=>e(A.target.value),style:a.input,required:!0}),n.jsx("button",{type:"submit",style:a.button,children:"NEXT"})]})]})})},hw=f.createContext(),mE=()=>{try{const i=localStorage.getItem("sidebarCollapsed");if(i!==null)return JSON.parse(i)}catch(i){console.error("Error reading initial sidebar state from localStorage:",i)}return!1},xE=({children:i})=>{const[e,t]=f.useState(mE);f.useEffect(()=>{try{localStorage.setItem("sidebarCollapsed",JSON.stringify(e)),localStorage.getItem("sidebarCollapsed")!==JSON.stringify(e)&&localStorage.setItem("sidebarCollapsed",JSON.stringify(e))}catch(a){console.error("Error saving sidebar state to localStorage:",a)}},[e]);const r=()=>{t(a=>!a)};return n.jsx(hw.Provider,{value:{collapsed:e,toggleSidebar:r},children:i})},Qd=()=>{const i=f.useContext(hw);if(!i)throw new Error("useSidebar must be used within SidebarProvider");return i},yE=()=>{const{collapsed:i,toggleSidebar:e}=Qd(),[t,r]=f.useState(null),[a,A]=f.useState(null),[c,u]=f.useState({firstName:"",lastName:"",role:"member",email:"",department:""}),[p,m]=f.useState(!0),[h,y]=f.useState(!1),[b,L]=f.useState(window.location.pathname),S=ps.useMemo(()=>Array.from({length:8}).map((le,$)=>({top:Math.random()*100,left:Math.random()*100,delay:Math.random()*10,duration:15+Math.random()*10,size:2+Math.random()*3})),[]),[U,E]=f.useState(!1);f.useEffect(()=>{sessionStorage.getItem("sidebarIntroPlayed")||(E(!0),sessionStorage.setItem("sidebarIntroPlayed","true"))},[]),f.useEffect(()=>{const le=()=>{L(window.location.pathname)};return window.addEventListener("popstate",le),()=>window.removeEventListener("popstate",le)},[]),f.useEffect(()=>{(async()=>{m(!0);try{const $=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if($.ok){const ue=await $.json();u(ue)}else u({firstName:"User",lastName:"",role:"member",email:"",department:"General"})}catch($){console.error("Error fetching user data:",$),u({firstName:"User",lastName:"",role:"member",email:"",department:"General"})}finally{m(!1)}})()},[]);const O=[{label:"Home",icon:n.jsx(H2,{size:22}),path:"/admindashboard",roles:["admin","member"]},{label:"Actuals",icon:n.jsx(b2,{size:22}),path:"/adminactuals",roles:["admin","member"]},{label:"Plan",icon:n.jsx(uo,{size:22}),path:"/adminviewplan",roles:["admin","member"]},{label:"Reports",icon:n.jsx(u2,{size:22}),path:"/adminreports",roles:["admin","member"]},{label:"Users",icon:n.jsx(Er,{size:22}),path:"/users",roles:["admin"]},{label:"Resources",icon:n.jsx(uS,{size:22}),path:"/secret",roles:["admin"],allowedEmails:["muhammad.hasan@ihrp.sg","jumana.haseen@ihrp.sg"]}].filter(le=>{const $=le.roles.includes(c.role),ue=!le.allowedEmails||le.allowedEmails.includes(c.email);return $&&ue}),ve=(le,$)=>{if(!h){$&&($.preventDefault(),$.stopPropagation()),A(null),r(null);try{localStorage.setItem("sidebarCollapsed",JSON.stringify(i))}catch(ue){console.error("Error saving sidebar state:",ue)}setTimeout(()=>{window.location.href=le},50)}},ce=async le=>{le&&(le.preventDefault(),le.stopPropagation()),y(!0),A(null);try{(await ke("/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})).ok||console.warn("Server logout failed, but proceeding with client logout"),window.location.href="/"}catch($){console.error("Logout error:",$),window.location.href="/"}finally{y(!1)}},Q={sidebar:{height:"100vh",width:i?"80px":"220px",background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",overflow:"hidden",position:"fixed",top:0,left:0,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"0px",paddingRight:"0px",zIndex:10,fontFamily:'"Montserrat", sans-serif',boxShadow:"2px 0 20px rgba(0, 0, 0, 0.15)",color:"white",transition:"width 0.3s ease"},animatedBg1:{position:"absolute",width:"350px",height:"350px",background:"radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, transparent 70%)",borderRadius:"50%",top:"-120px",left:"-120px",animation:U?"sidebarFloat1 20s ease-in-out infinite":"none",pointerEvents:"none",filter:"blur(40px)"},animatedBg2:{position:"absolute",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(168, 85, 247, 0.12) 0%, transparent 70%)",borderRadius:"50%",bottom:"-100px",right:"-100px",animation:"sidebarFloat2 22s ease-in-out infinite",pointerEvents:"none",filter:"blur(40px)"},animatedBg3:{position:"absolute",width:"250px",height:"250px",background:"radial-gradient(circle, rgba(34, 211, 238, 0.1) 0%, transparent 70%)",borderRadius:"50%",top:"40%",left:"50%",transform:"translateX(-50%)",animation:"sidebarFloat3 25s ease-in-out infinite",pointerEvents:"none",filter:"blur(40px)"},gradientOverlay:{position:"absolute",inset:0,background:"linear-gradient(180deg, transparent 0%, rgba(59, 130, 246, 0.03) 50%, transparent 100%)",animation:"gradientMove 8s ease-in-out infinite",pointerEvents:"none"},particlesContainer:{position:"absolute",inset:0,pointerEvents:"none",overflow:"hidden"},particle:le=>({position:"absolute",width:`${le.size}px`,height:`${le.size}px`,background:"rgba(255, 255, 255, 0.3)",borderRadius:"50%",top:`${le.top}%`,left:`${le.left}%`,animation:`floatParticle ${le.duration}s ease-in-out infinite`,animationDelay:`${le.delay}s`,boxShadow:"0 0 10px rgba(255, 255, 255, 0.5)"}),logoContainer:{marginBottom:"32px",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",paddingLeft:"16px",paddingRight:"16px",position:"relative",zIndex:2,animation:U?"slideInDown 0.6s ease-out":"none"},logoWrapper:{position:"relative",animation:"logoFloat 4s ease-in-out infinite",marginTop:"12px"},logoGlow:{position:"absolute",inset:"-10px",background:"radial-gradient(circle, rgba(59, 130, 246, 0.3) 0%, transparent 70%)",borderRadius:"50%",animation:"pulse 3s ease-in-out infinite",filter:"blur(20px)",zIndex:-1},logo:{height:i?"48px":"56px",transition:"height 0.3s ease, filter 0.3s ease",filter:"brightness(1.1) drop-shadow(0 4px 12px rgba(59, 130, 246, 0.3))",position:"relative",zIndex:1},logoText:{fontSize:"13px",fontWeight:"bold",opacity:i?0:1,transition:"opacity 0.3s ease",background:"linear-gradient(90deg, #60a5fa, #a78bfa)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",animation:"shimmer 3s ease-in-out infinite",marginTop:"4px"},toggleButton:{background:"rgba(255, 255, 255, 0.1)",border:"none",color:"white",cursor:"pointer",marginBottom:"24px",paddingTop:"8px",paddingBottom:"8px",paddingLeft:"8px",paddingRight:"8px",borderRadius:"8px",transition:"all 0.3s ease",position:"relative",zIndex:2,animation:"fadeIn 0.8s ease-out 0.2s both",backdropFilter:"blur(10px)"},navItem:{display:"flex",alignItems:"center",gap:i?"4px":"16px",width:i?"56px":"calc(100% - 24px)",paddingTop:i?"12px":"14px",paddingBottom:i?"12px":"14px",paddingLeft:i?"8px":"16px",paddingRight:i?"8px":"16px",borderRadius:"12px",textDecoration:"none",color:"white",fontSize:"14px",fontWeight:"500",marginBottom:"6px",marginTop:"0px",marginLeft:"12px",marginRight:"12px",backgroundColor:"transparent",flexDirection:i?"column":"row",justifyContent:i?"center":"flex-start",textAlign:i?"center":"left",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",border:"none",cursor:"pointer",zIndex:2,backdropFilter:"blur(10px)"},activeItem:{backgroundColor:"rgba(59, 130, 246, 0.15)",borderLeft:"4px solid #3b82f6",marginLeft:i?"12px":"8px",paddingLeft:i?"8px":"12px",boxShadow:"0 4px 15px rgba(59, 130, 246, 0.2)"},hoverItem:{backgroundColor:"rgba(255, 255, 255, 0.1)",transform:"translateX(4px) scale(1.02)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},navContainer:{flex:1,width:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",paddingTop:"8px",position:"relative",zIndex:2},logoutContainer:{width:"100%",marginTop:"auto",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",zIndex:2},logoutButton:le=>({display:"flex",alignItems:"center",gap:i?"4px":"16px",width:i?"56px":"calc(100% - 24px)",paddingTop:i?"12px":"14px",paddingBottom:i?"12px":"14px",paddingLeft:i?"8px":"16px",paddingRight:i?"8px":"16px",borderRadius:"12px",textDecoration:"none",color:le?"#94a3b8":"#ef4444",fontSize:"14px",fontWeight:"500",marginBottom:"6px",marginTop:"0px",marginLeft:"12px",marginRight:"12px",backgroundColor:"transparent",flexDirection:i?"column":"row",justifyContent:i?"center":"flex-start",textAlign:i?"center":"left",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",border:"none",cursor:le?"not-allowed":"pointer",backdropFilter:"blur(10px)"}),tooltip:{position:"absolute",left:"72px",top:"50%",transform:"translateY(-50%)",backgroundColor:"#374151",color:"white",paddingTop:"8px",paddingBottom:"8px",paddingLeft:"12px",paddingRight:"12px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",whiteSpace:"nowrap",zIndex:1e3,opacity:a?1:0,visibility:a?"visible":"hidden",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)",pointerEvents:"none",backdropFilter:"blur(10px)"},tooltipArrow:{position:"absolute",left:"-4px",top:"50%",transform:"translateY(-50%)",width:0,height:0,borderTop:"4px solid transparent",borderBottom:"4px solid transparent",borderRight:"4px solid #374151",pointerEvents:"none"},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:"22px",transition:"transform 0.3s ease"},labelText:{marginTop:i?"4px":"0px",fontSize:i?"10px":"14px",lineHeight:"1.2",opacity:i?.9:1,transition:"all 0.3s ease"},sectionDivider:{width:"calc(100% - 24px)",height:"1px",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)",marginTop:"12px",marginBottom:"16px",marginLeft:"12px",marginRight:"12px",animation:"shimmerLine 3s ease-in-out infinite"},loadingSpinner:{width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderRadius:"50%",borderTopColor:"#ef4444",animation:"spin 1s linear infinite",marginRight:i?"0":"8px"}},V=(le,$)=>{h||(r(le),i&&setTimeout(()=>{A($)},100))},Z=()=>{h||(r(null),A(null))};return ps.useEffect(()=>{const le=document.createElement("style");return le.textContent=`
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            
            @keyframes sidebarFloat1 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                33% { transform: translate(40px, -50px) scale(1.15); }
                66% { transform: translate(-30px, 40px) scale(0.95); }
            }
            
            @keyframes sidebarFloat2 {
                0%, 100% { transform: translate(0, 0) scale(1); }
                33% { transform: translate(-40px, 50px) scale(1.2); }
                66% { transform: translate(35px, -35px) scale(0.9); }
            }
            
            @keyframes sidebarFloat3 {
                0%, 100% { transform: translate(-50%, 0) scale(1); }
                50% { transform: translate(-50%, 30px) scale(1.25); }
            }
            
            @keyframes gradientMove {
                0%, 100% { transform: translateY(0); opacity: 0.3; }
                50% { transform: translateY(20%); opacity: 0.6; }
            }
            
            @keyframes floatParticle {
                0%, 100% { 
                    transform: translateY(0) translateX(0); 
                    opacity: 0.2; 
                }
                25% { 
                    transform: translateY(-30px) translateX(10px); 
                    opacity: 0.5; 
                }
                50% { 
                    transform: translateY(-50px) translateX(-10px); 
                    opacity: 0.8; 
                }
                75% { 
                    transform: translateY(-30px) translateX(15px); 
                    opacity: 0.5; 
                }
            }
            
            @keyframes logoFloat {
                0%, 100% { transform: translateY(0) rotate(0deg); }
                50% { transform: translateY(-3px) rotate(1deg); }
            }
            
            @keyframes pulse {
                0%, 100% { opacity: 0.3; transform: scale(1); }
                50% { opacity: 0.6; transform: scale(1.1); }
            }
            
            @keyframes shimmer {
                0% { background-position: -200% center; }
                100% { background-position: 200% center; }
            }
            
            @keyframes shimmerLine {
                0%, 100% { opacity: 0.3; }
                50% { opacity: 1; }
            }
            
            @keyframes slideInDown {
                0% { 
                    transform: translateY(-20px); 
                    opacity: 0; 
                }
                100% { 
                    transform: translateY(0); 
                    opacity: 1; 
                }
            }
            
            @keyframes fadeIn {
                0% { opacity: 0; }
                100% { opacity: 1; }
            }
        `,document.head.appendChild(le),()=>{document.head.contains(le)&&document.head.removeChild(le)}},[]),n.jsxs("div",{style:Q.sidebar,children:[n.jsx("div",{style:Q.animatedBg1}),n.jsx("div",{style:Q.animatedBg2}),n.jsx("div",{style:Q.animatedBg3}),n.jsx("div",{style:Q.gradientOverlay}),n.jsx("div",{style:Q.particlesContainer,children:S.map((le,$)=>n.jsx("div",{style:Q.particle(le)},$))}),n.jsx("div",{style:Q.logoContainer,children:n.jsxs("div",{style:Q.logoWrapper,children:[n.jsx("div",{style:Q.logoGlow}),n.jsx("img",{src:"/images/maxcap.png",alt:"Logo",style:Q.logo}),!i&&n.jsx("div",{style:Q.logoText,children:"MAXCAP"})]})}),n.jsx("button",{onClick:le=>{le.preventDefault(),le.stopPropagation(),A(null),e()},style:{...Q.toggleButton,backgroundColor:t==="toggle"?"rgba(255, 255, 255, 0.2)":"rgba(255, 255, 255, 0.1)"},onMouseEnter:()=>r("toggle"),onMouseLeave:()=>r(null),disabled:h,children:n.jsx(G2,{size:20})}),!p&&n.jsxs("div",{style:Q.navContainer,children:[O.map((le,$)=>{const ue=le.path==="/adminviewplan"&&(b==="/adminviewplan"||b==="/adminindividualplan"||b==="/adminapprovals"||b==="/adminaddplan"||b==="/admineditplan"||b==="/adminaddindividualplan"||b==="/admineditindividualplan")||le.path==="/adminreports"&&(b==="/adminreports"||b==="/adminteamcapacity"||b==="/adminutilization")||le.path==="/users"&&(b==="/users"||b==="/addusers")||le.path==="/adminactuals"&&(b==="/adminactuals"||b==="/adminviewlogs")||b===le.path,we=t===$;return n.jsxs("div",{style:{position:"relative",animation:U?`fadeIn 0.5s ease-out ${$*.1}s both`:"none"},children:[n.jsxs("button",{onClick:ge=>ve(le.path,ge),style:{...Q.navItem,...ue?Q.activeItem:{},...we&&!ue?Q.hoverItem:{},pointerEvents:h?"none":"auto",opacity:h?.5:1},onMouseEnter:()=>V($,le.label),onMouseLeave:Z,disabled:h,children:[n.jsx("div",{style:{...Q.iconContainer,transform:we?"scale(1.1) rotate(5deg)":"scale(1) rotate(0deg)"},children:le.icon}),n.jsx("span",{style:Q.labelText,children:le.label})]}),i&&a===le.label&&n.jsxs("div",{style:Q.tooltip,children:[n.jsx("div",{style:Q.tooltipArrow}),le.label]})]},$)}),n.jsx("div",{style:Q.sectionDivider})]}),p&&n.jsx("div",{style:{...Q.navContainer,display:"flex",alignItems:"center",justifyContent:"center",opacity:.5},children:n.jsx("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.6)"},children:"Loading..."})}),n.jsxs("div",{style:Q.logoutContainer,children:[n.jsxs("button",{onClick:le=>ce(le),style:{...Q.logoutButton(h),...t==="logout"&&!h?Q.hoverItem:{}},onMouseEnter:()=>V("logout","Logout"),onMouseLeave:Z,disabled:h,children:[n.jsx("div",{style:{...Q.iconContainer,transform:t==="logout"&&!h?"scale(1.1) rotate(-5deg)":"scale(1) rotate(0deg)"},children:h?n.jsx("div",{style:Q.loadingSpinner}):n.jsx(O2,{size:22})}),n.jsx("span",{style:Q.labelText,children:h?i?"Wait...":"Logging out...":"Logout"})]}),i&&a==="Logout"&&!h&&n.jsxs("div",{style:{...Q.tooltip,position:"absolute",bottom:"20px",left:"72px",top:"auto",transform:"none",pointerEvents:"none"},children:[n.jsx("div",{style:Q.tooltipArrow}),"Logout"]})]})]})},Kn=({children:i})=>{const{collapsed:e}=Qd(),[t,r]=f.useState(!0),[a,A]=f.useState(()=>{try{return localStorage.getItem("sidebarCollapsed")==="true"?"80px":"220px"}catch{return"220px"}});return f.useEffect(()=>{A(e?"80px":"220px"),r(!1)},[e]),n.jsxs("div",{style:{display:"flex",margin:0,padding:0,minHeight:"100vh"},children:[n.jsx(yE,{}),n.jsx("div",{style:{marginLeft:a,transition:t?"none":"margin-left 0.3s ease",flex:1,padding:"0",boxSizing:"border-box",minHeight:"100vh"},children:i})]})},bE=({isOpen:i,onClose:e,statusData:t,isDarkMode:r})=>{if(!i)return null;const{title:a,users:A,color:c,darkColor:u}=t,p=()=>{switch(a){case"Overworked":return n.jsx(pd,{size:24,style:{color:"#ef4444"}});case"Underutilized":return n.jsx(iS,{size:24,style:{color:"#eab308"}});case"Optimal":return n.jsx(DA,{size:24,style:{color:"#22c55e"}});default:return n.jsx(Yt,{size:24})}},m=()=>{switch(a){case"Overworked":return"#ef4444";case"Underutilized":return"#eab308";case"Optimal":return"#22c55e";default:return"#3b82f6"}},h={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,animation:"fadeIn 0.3s ease-out",padding:"20px"},modal:{backgroundColor:r?"#1e293b":"#ffffff",borderRadius:"24px",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.3)",width:"90%",maxWidth:"700px",maxHeight:"85vh",overflow:"hidden",animation:"slideUp 0.3s ease-out",border:r?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)"},header:{padding:"24px 28px",borderBottom:r?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",display:"flex",justifyContent:"space-between",alignItems:"center",background:r?"linear-gradient(135deg, #334155 0%, #1e293b 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerTitle:{fontSize:"24px",fontWeight:"700",color:r?"#e2e8f0":"#1e293b"},headerSubtitle:{fontSize:"14px",color:r?"#94a3b8":"#64748b",fontWeight:"500",marginTop:"4px"},closeButton:{background:"none",border:"none",color:r?"#94a3b8":"#64748b",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},content:{padding:"24px 28px",maxHeight:"calc(85vh - 100px)",overflowY:"auto"},noUsers:{textAlign:"center",padding:"60px 20px",color:r?"#94a3b8":"#64748b"},noUsersIcon:{fontSize:"48px",marginBottom:"16px",opacity:.5},userCard:{backgroundColor:r?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",borderRadius:"16px",padding:"20px",marginBottom:"16px",borderLeft:`4px solid ${m()}`,transition:"all 0.2s ease",cursor:"pointer",position:"relative",overflow:"hidden"},userHeader:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},avatar:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:m(),display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"700",fontSize:"18px",flexShrink:0},userInfo:{flex:1},userName:{fontSize:"18px",fontWeight:"600",color:r?"#e2e8f0":"#1e293b",marginBottom:"4px"},userDepartment:{fontSize:"14px",color:r?"#94a3b8":"#64748b",display:"flex",alignItems:"center",gap:"8px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginTop:"16px",paddingTop:"16px",borderTop:r?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)"},statItem:{textAlign:"center"},statValue:{fontSize:"20px",fontWeight:"700",color:r?"#e2e8f0":"#1e293b",marginBottom:"4px"},statLabel:{fontSize:"11px",color:r?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:"600"},utilizationBar:{marginTop:"16px",height:"8px",backgroundColor:r?"rgba(51,65,85,0.5)":"rgba(226,232,240,0.5)",borderRadius:"4px",overflow:"hidden",position:"relative"},utilizationFill:U=>({height:"100%",width:`${Math.min(U,100)}%`,backgroundColor:m(),borderRadius:"4px",transition:"width 0.5s ease"}),categoryBreakdown:{marginTop:"12px",display:"flex",gap:"12px",fontSize:"12px",color:r?"#94a3b8":"#64748b"},categoryItem:{display:"flex",alignItems:"center",gap:"6px"},categoryDot:U=>({width:"8px",height:"8px",borderRadius:"50%",backgroundColor:U}),summaryCard:{backgroundColor:r?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"12px",padding:"16px",marginBottom:"20px",border:`2px solid ${m()}20`},summaryGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",textAlign:"center"},summaryItem:{display:"flex",flexDirection:"column",gap:"4px"},summaryValue:{fontSize:"24px",fontWeight:"700",color:m()},summaryLabel:{fontSize:"11px",color:r?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:"600"}},y=A.reduce((U,E)=>U+E.totalHours,0),b=A.length>0?(y/A.length).toFixed(1):0,L=A.length>0?(A.reduce((U,E)=>U+E.totalManDays,0)/A.length).toFixed(1):0,S=A.length>0?(A.reduce((U,E)=>U+E.utilizationPercentage,0)/A.length).toFixed(1):0;return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(30px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        .user-card:hover {
          transform: translateX(4px);
          box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
      `}),n.jsx("div",{style:h.overlay,onClick:e,children:n.jsxs("div",{style:h.modal,onClick:U=>U.stopPropagation(),children:[n.jsxs("div",{style:h.header,children:[n.jsxs("div",{style:h.headerLeft,children:[p(),n.jsxs("div",{children:[n.jsxs("div",{style:h.headerTitle,children:[a," Users"]}),n.jsxs("div",{style:h.headerSubtitle,children:[A.length," ",A.length===1?"user":"users"," in this category"]})]})]}),n.jsx("button",{style:h.closeButton,onClick:e,onMouseEnter:U=>U.currentTarget.style.backgroundColor="rgba(59,130,246,0.1)",onMouseLeave:U=>U.currentTarget.style.backgroundColor="transparent",children:n.jsx(dn,{size:24})})]}),n.jsx("div",{style:h.content,children:A.length===0?n.jsxs("div",{style:h.noUsers,children:[n.jsx("div",{style:h.noUsersIcon,children:""}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"No users in this category"}),n.jsx("div",{style:{fontSize:"14px",opacity:.8},children:"All users are in other workload categories"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:h.summaryCard,children:n.jsxs("div",{style:h.summaryGrid,children:[n.jsxs("div",{style:h.summaryItem,children:[n.jsx("div",{style:h.summaryValue,children:A.length}),n.jsx("div",{style:h.summaryLabel,children:"Users"})]}),n.jsxs("div",{style:h.summaryItem,children:[n.jsx("div",{style:h.summaryValue,children:b}),n.jsx("div",{style:h.summaryLabel,children:"Avg Hours"})]}),n.jsxs("div",{style:h.summaryItem,children:[n.jsx("div",{style:h.summaryValue,children:L}),n.jsx("div",{style:h.summaryLabel,children:"Avg Days"})]}),n.jsxs("div",{style:h.summaryItem,children:[n.jsxs("div",{style:h.summaryValue,children:[S,"%"]}),n.jsx("div",{style:h.summaryLabel,children:"Avg Capacity"})]})]})}),A.map((U,E)=>n.jsxs("div",{className:"user-card",style:h.userCard,onMouseEnter:P=>{P.currentTarget.style.transform="translateX(4px)",P.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.15)"},onMouseLeave:P=>{P.currentTarget.style.transform="translateX(0)",P.currentTarget.style.boxShadow="none"},children:[n.jsxs("div",{style:h.userHeader,children:[n.jsxs("div",{style:h.avatar,children:[U.firstName[0],U.lastName[0]]}),n.jsxs("div",{style:h.userInfo,children:[n.jsxs("div",{style:h.userName,children:[U.firstName," ",U.lastName]}),n.jsxs("div",{style:h.userDepartment,children:[n.jsx("span",{children:U.department}),n.jsx("span",{children:""}),n.jsx("span",{children:U.email})]})]})]}),n.jsxs("div",{style:h.statsGrid,children:[n.jsxs("div",{style:h.statItem,children:[n.jsx("div",{style:h.statValue,children:U.totalHours.toFixed(0)}),n.jsx("div",{style:h.statLabel,children:"Hours"})]}),n.jsxs("div",{style:h.statItem,children:[n.jsx("div",{style:h.statValue,children:U.totalManDays.toFixed(1)}),n.jsx("div",{style:h.statLabel,children:"Man-Days"})]}),n.jsxs("div",{style:h.statItem,children:[n.jsxs("div",{style:h.statValue,children:[U.utilizationPercentage.toFixed(1),"%"]}),n.jsx("div",{style:h.statLabel,children:"Capacity"})]})]}),n.jsx("div",{style:h.utilizationBar,children:n.jsx("div",{style:h.utilizationFill(U.utilizationPercentage)})}),(U.projectHours>0||U.operationsHours>0||U.adminHours>0)&&n.jsxs("div",{style:h.categoryBreakdown,children:[U.projectHours>0&&n.jsxs("div",{style:h.categoryItem,children:[n.jsx("div",{style:h.categoryDot("#3b82f6")}),n.jsxs("span",{children:["Project: ",U.projectHours.toFixed(0),"h"]})]}),U.operationsHours>0&&n.jsxs("div",{style:h.categoryItem,children:[n.jsx("div",{style:h.categoryDot("#8b5cf6")}),n.jsxs("span",{children:["Operations: ",U.operationsHours.toFixed(0),"h"]})]}),U.adminHours>0&&n.jsxs("div",{style:h.categoryItem,children:[n.jsx("div",{style:h.categoryDot("#f59e0b")}),n.jsxs("span",{children:["Admin: ",U.adminHours.toFixed(0),"h"]})]})]})]},E))]})})]})})]})},wE=({isOpen:i,onClose:e,selectedDate:t,events:r,holidays:a,isDarkMode:A})=>{if(!i)return null;const c=P=>{const O={weekday:"long",year:"numeric",month:"long",day:"numeric"};return new Date(P).toLocaleDateString("en-US",O)},u=P=>new Date(P).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),p=(P,O)=>{const ve=new Date(O)-new Date(P),ce=Math.floor(ve/(1e3*60*60)),Q=Math.floor(ve%(1e3*60*60)/(1e3*60));return ce>0?`${ce}h ${Q}m`:`${Q}m`},m=r.filter(P=>{const O=new Date(P.start.dateTime).toDateString(),ve=new Date(t).toDateString();return O===ve}).sort((P,O)=>new Date(P.start.dateTime)-new Date(O.start.dateTime)),h=new Date(t),y=h.getFullYear(),b=String(h.getMonth()+1).padStart(2,"0"),L=String(h.getDate()).padStart(2,"0"),S=`${y}-${b}-${L}`,U=a==null?void 0:a.find(P=>P.date===S),E={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,animation:"fadeIn 0.3s ease-out",padding:"20px"},modal:{backgroundColor:A?"#1e293b":"#ffffff",borderRadius:"24px",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.3)",width:"90%",maxWidth:"700px",maxHeight:"85vh",overflow:"hidden",animation:"slideUp 0.3s ease-out",border:A?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)"},header:{padding:"24px 28px",borderBottom:A?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",display:"flex",justifyContent:"space-between",alignItems:"center",background:A?"linear-gradient(135deg, #334155 0%, #1e293b 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)"},headerTitle:{fontSize:"20px",fontWeight:"700",color:A?"#e2e8f0":"#1e293b",marginBottom:"4px"},headerDate:{fontSize:"14px",color:A?"#94a3b8":"#64748b",fontWeight:"500"},closeButton:{background:"none",border:"none",color:A?"#94a3b8":"#64748b",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},content:{padding:"24px 28px",maxHeight:"calc(85vh - 100px)",overflowY:"auto"},noEvents:{textAlign:"center",padding:"60px 20px",color:A?"#94a3b8":"#64748b"},noEventsIcon:{fontSize:"48px",marginBottom:"16px",opacity:.5},eventCard:{backgroundColor:A?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",borderRadius:"16px",padding:"20px",marginBottom:"16px",borderLeft:"4px solid #3b82f6",transition:"all 0.2s ease",cursor:"pointer",position:"relative",overflow:"hidden"},eventTime:{fontSize:"13px",fontWeight:"600",color:"#3b82f6",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},eventTitle:{fontSize:"16px",fontWeight:"600",color:A?"#e2e8f0":"#1e293b",marginBottom:"8px",lineHeight:"1.4"},eventDetails:{display:"flex",flexDirection:"column",gap:"6px",fontSize:"13px",color:A?"#94a3b8":"#64748b"},eventDetail:{display:"flex",alignItems:"center",gap:"8px"},eventBadge:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backgroundColor:A?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.1)",color:"#3b82f6",marginTop:"8px"}};return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(30px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        .event-card:hover {
          transform: translateX(4px);
          box-shadow: 0 8px 20px rgba(59,130,246,0.15);
        }
      `}),n.jsx("div",{style:E.overlay,onClick:e,children:n.jsxs("div",{style:E.modal,onClick:P=>P.stopPropagation(),children:[n.jsxs("div",{style:E.header,children:[n.jsxs("div",{children:[n.jsxs("div",{style:E.headerTitle,children:[m.length+(U?1:0)," ",m.length+(U?1:0)===1?"Event":"Events"]}),n.jsx("div",{style:E.headerDate,children:c(t)})]}),n.jsx("button",{style:E.closeButton,onClick:e,onMouseEnter:P=>P.currentTarget.style.backgroundColor="rgba(59,130,246,0.1)",onMouseLeave:P=>P.currentTarget.style.backgroundColor="transparent",children:n.jsx(dn,{size:24})})]}),n.jsx("div",{style:E.content,children:m.length===0&&!U?n.jsxs("div",{style:E.noEvents,children:[n.jsx("div",{style:E.noEventsIcon,children:""}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},children:"No events scheduled"}),n.jsx("div",{style:{fontSize:"14px",opacity:.8},children:"You're free this day!"})]}):n.jsxs(n.Fragment,{children:[U&&n.jsxs("div",{className:"event-card",style:{...E.eventCard,borderLeft:"4px solid #ef4444",backgroundColor:A?"rgba(239,68,68,0.15)":"rgba(254,226,226,0.8)"},children:[n.jsxs("div",{style:{...E.eventTime,color:"#ef4444"},children:[n.jsx(uo,{size:14}),"Public Holiday"]}),n.jsxs("div",{style:E.eventTitle,children:[" ",U.name]}),n.jsx("div",{style:E.eventDetails,children:n.jsxs("div",{style:{...E.eventBadge,backgroundColor:A?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",color:"#ef4444"},children:[n.jsx("span",{style:{fontSize:"14px"},children:""}),"Non-Working Day"]})})]}),m.map((P,O)=>{var ve,ce,Q;return n.jsxs("div",{className:"event-card",style:E.eventCard,onMouseEnter:V=>{V.currentTarget.style.transform="translateX(4px)",V.currentTarget.style.boxShadow="0 8px 20px rgba(59,130,246,0.15)"},onMouseLeave:V=>{V.currentTarget.style.transform="translateX(0)",V.currentTarget.style.boxShadow="none"},children:[n.jsxs("div",{style:E.eventTime,children:[n.jsx(Mi,{size:14}),u(P.start.dateTime)," - ",u(P.end.dateTime),n.jsx("span",{style:{marginLeft:"auto",fontSize:"12px",opacity:.7},children:p(P.start.dateTime,P.end.dateTime)})]}),n.jsx("div",{style:E.eventTitle,children:P.subject||"Untitled Event"}),n.jsxs("div",{style:E.eventDetails,children:[((ve=P.location)==null?void 0:ve.displayName)&&n.jsxs("div",{style:E.eventDetail,children:[n.jsx(ob,{size:14}),P.location.displayName]}),P.isOnlineMeeting&&n.jsxs("div",{style:E.eventBadge,children:[n.jsx(hS,{size:14}),"Online Meeting"]}),((Q=(ce=P.organizer)==null?void 0:ce.emailAddress)==null?void 0:Q.name)&&n.jsxs("div",{style:E.eventDetail,children:[n.jsx(Yt,{size:14}),"Organized by ",P.organizer.emailAddress.name]})]})]},O)})]})})]})})]})},vE=({isDarkMode:i,events:e=[],holidays:t=[],onDateClick:r})=>{const[a,A]=f.useState(new Date),[c,u]=f.useState(null),p=new Date,m=a.getMonth(),h=a.getFullYear(),y=["January","February","March","April","May","June","July","August","September","October","November","December"],b=["S","M","T","W","T","F","S"],L=new Date(h,m,1),S=new Date(h,m+1,0),U=L.getDay(),E=S.getDate(),P=[];for(let ue=0;ue<U;ue++)P.push(null);for(let ue=1;ue<=E;ue++)P.push(ue);const O=ue=>ue===p.getDate()&&m===p.getMonth()&&h===p.getFullYear(),ve=()=>{A(new Date(h,m-1,1))},ce=()=>{A(new Date(h,m+1,1))},Q=ue=>{if(!ue)return!1;const we=new Date(h,m,ue).toDateString();return e.some(ge=>new Date(ge.start.dateTime).toDateString()===we)},V=ue=>{if(!ue)return null;const we=h,ge=String(m+1).padStart(2,"0"),te=String(ue).padStart(2,"0"),Me=`${we}-${ge}-${te}`;return t.find(ie=>ie.date===Me)},Z=ue=>{if(!ue)return 0;const we=new Date(h,m,ue).toDateString();return e.filter(ge=>new Date(ge.start.dateTime).toDateString()===we).length},le=ue=>{if(!ue)return;const we=new Date(h,m,ue);r(we)},$={container:{marginTop:"24px",padding:"20px",backgroundColor:i?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",transition:"all 0.3s ease",backdropFilter:"blur(10px)",border:i?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"0 8px"},monthYear:{fontSize:"18px",fontWeight:"700",color:i?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},navButton:ue=>({background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",color:i?"#94a3b8":"#64748b",transition:"all 0.2s ease",backgroundColor:ue?"rgba(59,130,246,0.1)":"transparent",transform:ue?"scale(1.1)":"scale(1)"}),weekDays:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"12px"},weekDay:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",padding:"8px 4px",textTransform:"uppercase",transition:"all 0.3s ease"},daysGrid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},day:(ue,we,ge,te)=>({textAlign:"center",padding:"12px 4px",fontSize:"14px",fontWeight:we?"700":"500",color:ue?we?i?"#ffffff":"#1e293b":i?"#e2e8f0":"#374151":"transparent",border:te?"2px solid #3b82f6":"none",backgroundColor:te?"rgba(59,130,246,0.15)":we?"#3b82f6":ge?"rgba(59,130,246,0.1)":"transparent",borderRadius:"8px",cursor:ue?"pointer":"default",transition:"all 0.2s ease",transform:ge&&ue?"scale(1.1)":"scale(1)",boxShadow:we?"0 4px 12px rgba(59,130,246,0.3)":"none",position:"relative"}),eventDot:{position:"absolute",bottom:"4px",left:"50%",transform:"translateX(-50%)",fontSize:"8px",color:"#3b82f6"}};return n.jsxs("div",{style:$.container,children:[n.jsxs("div",{style:$.header,children:[n.jsx("button",{onClick:ve,style:$.navButton(c==="prev"),onMouseEnter:()=>u("prev"),onMouseLeave:()=>u(null),children:n.jsx(eb,{size:20})}),n.jsxs("div",{style:$.monthYear,children:[y[m]," ",h]}),n.jsx("button",{onClick:ce,style:$.navButton(c==="next"),onMouseEnter:()=>u("next"),onMouseLeave:()=>u(null),children:n.jsx(Uc,{size:20})})]}),n.jsx("div",{style:$.weekDays,children:b.map((ue,we)=>n.jsx("div",{style:$.weekDay,children:ue},we))}),n.jsx("div",{style:$.daysGrid,children:P.map((ue,we)=>{const ge=Z(ue),te=V(ue);return n.jsxs("div",{onClick:()=>le(ue),style:{...$.day(ue,O(ue),c===`day-${we}`,Q(ue)),border:te?"2px solid #ef4444":void 0,backgroundColor:te?"rgba(239,68,68,0.12)":void 0},onMouseEnter:()=>ue&&u(`day-${we}`),onMouseLeave:()=>u(null),children:[ue,te&&n.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",fontSize:"9px",fontWeight:"700",color:"#ef4444"},children:"PH"}),ge>0&&n.jsx("div",{style:$.eventDot,children:"".repeat(Math.min(ge,3))})]},we)})})]})},Lp=({value:i,suffix:e="",duration:t=1e3})=>{const[r,a]=f.useState(0);return f.useEffect(()=>{let A=0;const c=i||0,u=c/(t/16),p=setInterval(()=>{A+=u,A>=c?(a(c),clearInterval(p)):a(Math.floor(A))},16);return()=>clearInterval(p)},[i,t]),n.jsxs(n.Fragment,{children:[r,e]})},Px=({current:i,previous:e,timePeriod:t="week"})=>{const r=i-e,a=e>0?(r/e*100).toFixed(1):0;return r===0||!e?null:n.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:r>0?"#10b981":"#ef4444",marginTop:"4px",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[r>0?"":""," ",Math.abs(a),"%",n.jsxs("span",{style:{fontSize:"10px",opacity:.7},children:["vs last ",t]})]})},Dp=()=>{const i=localStorage.getItem("darkMode")==="true";return n.jsx("div",{style:{background:i?"linear-gradient(90deg, #374151 0%, #4b5563 50%, #374151 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"16px",height:"120px",marginBottom:"20px"}})},CE=()=>{var qe,ft,Et,pe,R,Ce;const{collapsed:i}=Qd(),[e,t]=f.useState([]),[r,a]=f.useState("calendar"),[A,c]=f.useState("personal"),[u,p]=f.useState([]),[m,h]=f.useState(!1),[y,b]=f.useState(!1),[L,S]=f.useState(!1),[U,E]=f.useState(!1),[P,O]=f.useState(new Date),[ve,ce]=f.useState("week"),[Q,V]=f.useState(null),[Z,le]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[$,ue]=f.useState(null),[we,ge]=f.useState(!0),[te,Me]=f.useState({weeklyHours:0,capacityUtilization:0,projectHours:0,targetHours:32}),[ie,me]=f.useState({totalHours:0,capacityUtilization:0,leaveDays:0}),[N,be]=f.useState(!1),[H,M]=f.useState(!1),[I,_]=f.useState(null),[Fe,Y]=f.useState(null),[D,K]=f.useState(!1),[Te,Ne]=f.useState(null),[G,W]=f.useState(!1),j=f.useRef(null),F=f.useRef(null),Xe=f.useRef(null),B=f.useRef(null),[ee,Pe]=f.useState({top:64,left:0}),[$e,kt]=f.useState({summary:{totalUsers:0,overworked:0,underutilized:0,optimal:0},users:[],year:new Date().getFullYear()});f.useEffect(()=>{B.current||(B.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),Xe.current&&document.head.removeChild(Xe.current);const re=document.createElement("style");re.setAttribute("data-component","admin-dashboard-background");const xe=Z?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return re.textContent=`
      .admin-dashboard-page {
        min-height: 100vh;
        background: ${xe};
      }
      
      body {
        background: ${xe} !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      html, body, #root {
        margin: 0 !important;
        padding: 0 !important;
        background: ${xe} !important;
      }
      
      #root > div:first-child,
      .app > div:first-child,
      .main-content,
      .page-container {
        background: transparent !important;
        min-height: 100vh;
      }
      
      div[style*="background: white"],
      div[style*="background-color: white"],
      div[style*="background: #fff"],
      div[style*="background-color: #fff"] {
        background: transparent !important;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }

      @keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-6px);
  }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      .table-row:hover {
        background-color: rgba(59,130,246,0.05) !important;
        transform: scale(1.01);
      }
      
      * {
        transition: background-color 0.3s ease, background 0.3s ease;
      }
    `,document.head.appendChild(re),Xe.current=re,()=>{Xe.current&&document.head.contains(Xe.current)&&(document.head.removeChild(Xe.current),Xe.current=null),B.current&&document.querySelectorAll('[data-component="admin-dashboard-background"]').length===0&&Object.assign(document.body.style,B.current)}},[Z]),f.useEffect(()=>{(async()=>{try{console.log(" Fetching user data from /user/profile...");const xe=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" API Response status:",xe.status),xe.ok){const Ze=await xe.json();console.log(" User data received:",Ze),ue(Ze),Ze.role==="admin"?(console.log(" Admin user detected - setting status view"),a("status")):(console.log(" Member user detected - setting calendar view"),a("calendar"))}else{const Ze=await xe.text();console.error(" Failed to fetch user data:",xe.status,Ze),ue(null)}}catch(xe){console.error(" Error fetching user data:",xe),ue(null)}finally{ge(!1)}})()},[]),f.useEffect(()=>{(async()=>{try{const xe=new Date().getFullYear(),Ze=await ke(`/actuals/holidays?year=${xe}`,{method:"GET",credentials:"include"});if(Ze.ok){const J=await Ze.json();p(J)}}catch(xe){console.error("Failed to fetch holidays:",xe)}})()},[]),f.useEffect(()=>{if(j.current&&y){const re=j.current.getBoundingClientRect();Pe({top:re.bottom+4,left:re.left})}},[y]),f.useEffect(()=>{const re=xe=>{j.current&&!j.current.contains(xe.target)&&b(!1),F.current&&!F.current.contains(xe.target)&&h(!1)};return(y||m)&&document.addEventListener("mousedown",re),()=>{document.removeEventListener("mousedown",re)}},[y,m]),f.useEffect(()=>{const re=async()=>{var xe;try{console.log(" Starting calendar fetch..."),console.log(" User data exists:",!!$),console.log(" Fetching from: /calendar/events");const Ze=await ke("/calendar/events",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" Calendar response status:",Ze.status),Ze.ok){const J=await Ze.json();console.log(" Calendar data received:",J),console.log(" Number of events:",((xe=J.events)==null?void 0:xe.length)||0),t(J.events||[])}else{const J=await Ze.text();console.error(" Calendar fetch failed:",Ze.status),console.error(" Error response:",J)}}catch(Ze){console.error(" Calendar fetch error:",Ze),console.error(" Error details:",Ze.message)}};console.log(" Calendar useEffect running, userData:",$),$?(console.log(" User data available, fetching calendar..."),re()):console.log(" Waiting for user data...")},[$]),f.useEffect(()=>{$&&(async()=>{try{console.log(` Fetching user stats for period: ${ve}`);const xe=await ke(`/actuals/stats?period=${ve}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(xe.ok){const Ze=await xe.json();console.log(" Stats received:",Ze),me(te),Me(Ze)}else console.error(" Failed to fetch stats")}catch(xe){console.error(" Error fetching stats:",xe)}})()},[$,ve]),f.useEffect(()=>{$&&(async()=>{if(!(!$||$.role!=="admin"))try{const xe=await ke(`/api/workload-status?period=${ve}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(xe.ok){const Ze=await xe.json();kt(Ze)}}catch(xe){console.error("Error fetching workload status:",xe)}})()},[$,ve]);const pt=()=>{const re=!Z;le(re),S(!1);try{localStorage.setItem("darkMode",re.toString())}catch{console.log("Dark mode preference cannot be saved in this environment")}},Ut=re=>{O(re),E(!0)},Lt=re=>re<70?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":re<=100?"linear-gradient(135deg, #10b981 0%, #059669 100%)":re<=120?"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",se={page:{minHeight:"100vh",padding:"0",background:Z?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease",boxSizing:"border-box",width:"100%",overflowX:"hidden"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:Z?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},card:(re,xe)=>({backgroundColor:Z?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"28px",marginBottom:"28px",boxShadow:re?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:re?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",border:Z?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:xe==="stats"?"visible":"hidden",zIndex:xe==="stats"&&(D||Fe==="leave")?50:1}),cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.03) 0%, transparent 70%)",opacity:0,transition:"opacity 0.4s ease",pointerEvents:"none"},flexRow:{display:"flex",justifyContent:"space-between",gap:"32px",flexWrap:"wrap"},statItem:re=>({flex:1,textAlign:"center",padding:"20px",borderRadius:"16px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",backgroundColor:re?"rgba(59,130,246,0.05)":"transparent",transform:re?"scale(1.05)":"scale(1)",position:"relative"}),statLabel:{fontSize:"14px",color:Z?"#94a3b8":"#64748b",marginBottom:"8px",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},statValue:re=>({fontSize:"36px",fontWeight:"800",color:Z?"#e2e8f0":"#1e293b",transition:"all 0.3s ease",transform:re?"scale(1.1)":"scale(1)",textShadow:re?"0 4px 8px rgba(30,41,59,0.3)":"none"}),statusFlex:{display:"flex",gap:"20px",flexWrap:"wrap",marginTop:"24px"},capacityValue:(re,xe)=>({fontSize:"36px",fontWeight:"800",backgroundImage:Lt(xe),backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",transition:"all 0.3s ease",transform:re?"scale(1.1)":"scale(1)"}),statusBox:(re,xe,Ze)=>({flex:1,background:Z?`linear-gradient(135deg, ${xe} 0%, ${xe}dd 100%)`:`linear-gradient(135deg, ${re} 0%, ${re}dd 100%)`,borderRadius:"16px",padding:"24px",textAlign:"center",minWidth:"160px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",transform:Ze?"translateY(-4px) scale(1.03)":"translateY(0) scale(1)",boxShadow:Ze?"0 12px 24px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",border:Z?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(255,255,255,0.5)",position:"relative",overflow:"hidden"}),statusTitle:{fontSize:"16px",fontWeight:"700",marginBottom:"8px",color:Z?"#e2e8f0":"#374151",transition:"all 0.3s ease"},statusCount:{fontSize:"24px",fontWeight:"800",marginBottom:"8px",color:Z?"#f1f5f9":"#1f2937",transition:"all 0.3s ease"},statusNote:{fontSize:"12px",color:Z?"#94a3b8":"#6b7280",fontWeight:"500",transition:"all 0.3s ease"},table:{width:"100%",borderCollapse:"collapse",marginTop:"20px",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},th:{textAlign:"left",backgroundColor:Z?"#4b5563":"#f8fafc",padding:"16px 12px",fontSize:"14px",color:Z?"#e2e8f0":"#374151",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},td:{padding:"16px 12px",fontSize:"15px",color:Z?"#e2e8f0":"#1f2937",borderBottom:Z?"1px solid #4b5563":"1px solid #f1f5f9",transition:"all 0.3s ease"},tableRow:{transition:"all 0.2s ease",cursor:"pointer"},sectionOverlay:{position:"fixed",top:ee.top,left:ee.left,zIndex:999,backgroundColor:Z?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:Z?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},statusOverlay:{position:"absolute",top:"100%",left:0,zIndex:9999,backgroundColor:Z?"rgba(30,41,59,0.98)":"rgba(255,255,255,0.98)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.25)",padding:"12px 0",minWidth:"160px",border:Z?"2px solid rgba(51,65,85,0.8)":"2px solid rgba(255,255,255,0.8)",marginTop:"8px",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",pointerEvents:"auto",transition:"all 0.3s ease"},blurOption:re=>({backgroundColor:re?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:Z?"#e2e8f0":"#374151",transform:re?"translateX(4px)":"translateX(0)",borderLeft:re?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),toggleViewContainer:{fontSize:"18px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:Z?"#e2e8f0":"#1e293b"},toggleViewContainerStatic:{fontSize:"18px",fontWeight:"700",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:Z?"#e2e8f0":"#1e293b"},chevron:(re,xe)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:re||xe?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:re||xe?"#3b82f6":Z?"#94a3b8":"#64748b"}),floatingIcon:{position:"absolute",top:"20px",right:"20px",opacity:.1,fontSize:"48px",color:"#3b82f6"},topButton:re=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:re?"rgba(59,130,246,0.1)":Z?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:re?"#3b82f6":Z?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:re?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:re?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:Z?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:Z?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:Z?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:Z?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:Z?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:Z?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:Z?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:Z?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:Z?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},activityTitle:{marginBottom:"20px",fontSize:"18px",fontWeight:"700",color:Z?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},loadingSpinner:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",fontSize:"18px",color:Z?"#94a3b8":"#64748b"}},Tt={container:{display:"flex",gap:"8px",padding:"4px",backgroundColor:Z?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",borderRadius:"12px",border:Z?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backdropFilter:"blur(10px)",marginBottom:"20px",width:"fit-content"},button:(re,xe)=>({padding:"10px 20px",borderRadius:"8px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:re?"#3b82f6":xe?"rgba(59,130,246,0.1)":"transparent",color:re?"#fff":Z?"#e2e8f0":"#64748b",boxShadow:re?"0 2px 8px rgba(59,130,246,0.3)":"none",transform:xe&&!re?"scale(1.05)":"scale(1)"})},ne=re=>{Ne(re),W(!0)},fe=re=>{c(re),b(!1),re==="team"?window.location.href="/adminteamcapacity":re==="utilization"&&(window.location.href="/adminutilization")},Qe=()=>{if(!$)return"Loading...";const re=$.firstName||"User";switch(A){case"personal":return`Welcome back, ${re}!`;case"team":return"Team Capacity Summary";case"utilization":return"Utilization Overview";default:return`Welcome back, ${re}!`}},w=($==null?void 0:$.role)==="admin";return we?n.jsx("div",{className:"admin-dashboard-page",style:se.page,children:n.jsxs("div",{style:{padding:"30px",background:"transparent",minHeight:"100vh"},children:[n.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:Z?"#f1f5f9":"#1e293b",marginBottom:"32px"},children:"Loading..."}),n.jsx(Dp,{}),n.jsx(Dp,{}),n.jsx(Dp,{})]})}):$?n.jsxs("div",{className:"admin-dashboard-page",style:se.page,children:[n.jsxs("div",{style:{padding:"30px",background:"transparent",minHeight:"100vh"},children:[n.jsxs("div",{style:se.headerRow,children:[n.jsx("div",{style:se.headerLeft,children:w?n.jsx("div",{style:se.toggleViewContainerStatic,className:"floating",children:n.jsx("span",{style:se.header,children:Qe()})}):n.jsx("div",{style:se.toggleViewContainerStatic,className:"floating",children:n.jsx("span",{style:se.header,children:Qe()})})}),n.jsxs("div",{style:se.headerRight,children:[w&&n.jsxs("button",{style:se.topButton(I==="alerts"),onMouseEnter:()=>_("alerts"),onMouseLeave:()=>_(null),onClick:()=>{window.location.href="/adminalerts"},children:[n.jsx(lr,{size:20}),n.jsx("div",{style:se.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:se.topButton(I==="profile"),onMouseEnter:()=>{_("profile"),S(!0)},onMouseLeave:()=>{_(null)},onClick:()=>{window.location.href="/adminprofile"},children:n.jsx(Yt,{size:20})}),L&&$&&n.jsxs("div",{style:se.profileTooltip,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:[n.jsx("div",{style:se.tooltipArrow}),n.jsxs("div",{style:se.userInfo,children:[n.jsxs("div",{style:se.avatar,children:[(((qe=$.firstName)==null?void 0:qe[0])||"").toUpperCase(),(((ft=$.lastName)==null?void 0:ft[0])||"").toUpperCase()]}),n.jsxs("div",{style:se.userDetails,children:[n.jsxs("div",{style:se.userName,children:[$.firstName||"Unknown"," ",$.lastName||"User"]}),n.jsxs("div",{style:se.userRole,children:[$.role==="admin"?"Admin":"Member","  ",$.department||"N/A"]})]})]}),n.jsxs("div",{style:se.userStats,children:[n.jsxs("div",{style:se.tooltipStatItem,children:[n.jsx("div",{style:se.tooltipStatNumber,children:te.totalHours}),n.jsx("div",{style:se.tooltipStatLabel,children:"Hours"})]}),n.jsxs("div",{style:se.tooltipStatItem,children:[n.jsx("div",{style:se.tooltipStatNumber,children:te.projectHours>0?Math.ceil(te.projectHours/40):0}),n.jsx("div",{style:se.tooltipStatLabel,children:"Projects"})]}),n.jsxs("div",{style:se.tooltipStatItem,children:[n.jsxs("div",{style:se.tooltipStatNumber,children:[te.capacityUtilization,"%"]}),n.jsx("div",{style:se.tooltipStatLabel,children:"Capacity"})]})]}),n.jsx("button",{style:se.themeToggle,onClick:pt,children:Z?" Light Mode":" Dark Mode"})]})]})]})]}),w&&y&&n.jsx("div",{style:se.sectionOverlay,onMouseDown:re=>re.stopPropagation(),onClick:re=>re.stopPropagation(),children:n.jsx("div",{children:["personal","team","utilization"].map((re,xe)=>n.jsx("div",{style:se.blurOption(I===`section-${xe}`),onClick:Ze=>{Ze.preventDefault(),Ze.stopPropagation(),fe(re)},onMouseDown:Ze=>{Ze.preventDefault(),Ze.stopPropagation()},onMouseEnter:()=>_(`section-${xe}`),onMouseLeave:()=>_(null),children:re==="personal"?"Personal Dashboard":re==="team"?"Team Capacity":"Utilization Overview"},re))})}),n.jsxs("div",{style:Tt.container,children:[n.jsx("button",{style:Tt.button(ve==="week",Q==="week"),onClick:()=>ce("week"),onMouseEnter:()=>V("week"),onMouseLeave:()=>V(null),children:"This Week"}),n.jsx("button",{style:Tt.button(ve==="month",Q==="month"),onClick:()=>ce("month"),onMouseEnter:()=>V("month"),onMouseLeave:()=>V(null),children:"This Month"})]}),n.jsxs("div",{style:se.card(I==="stats","stats"),onMouseEnter:()=>_("stats"),onMouseLeave:()=>_(null),children:[n.jsx("div",{style:se.cardGlow}),n.jsx("div",{style:se.floatingIcon,children:n.jsx(pd,{})}),n.jsxs("div",{style:se.flexRow,children:[n.jsxs("div",{style:se.statItem(Fe==="hours"),onMouseEnter:()=>Y("hours"),onMouseLeave:()=>Y(null),children:[n.jsxs("div",{style:se.statLabel,children:[n.jsx(Mi,{size:16,style:{display:"inline",marginRight:"4px"}}),"Hours Logged ",ve==="week"?"This Week":"This Month"]}),n.jsx("div",{style:se.statValue(Fe==="hours"),children:n.jsx(Lp,{value:te.totalHours||0})}),n.jsx(Px,{current:te.totalHours||0,previous:ie.totalHours||0,timePeriod:ve}),n.jsx("div",{style:{fontSize:"12px",color:Z?"#94a3b8":"#64748b",marginTop:"4px"},children:"Excludes leave/non-working hours"})]}),n.jsxs("div",{style:{...se.statItem(Fe==="leave"),position:"relative"},onMouseEnter:()=>Y("leave"),onMouseLeave:()=>Y(null),children:[n.jsxs("div",{style:se.statLabel,children:[n.jsx(uo,{size:16,style:{display:"inline",marginRight:"4px"}}),"Leave / Holidays "]}),n.jsx("div",{style:{fontSize:"36px",fontWeight:"800",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",transition:"all 0.3s ease",transform:Fe==="leave"?"scale(1.1)":"scale(1)"},children:n.jsx(Lp,{value:(te.leaveDays||0)+(te.holidayDays||0)})}),n.jsxs("div",{style:{fontSize:"12px",color:Z?"#94a3b8":"#64748b",marginTop:"4px"},children:["days ",ve==="week"?"this week":"this month"]}),Fe==="leave"&&n.jsxs("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px",background:Z?"#020617":"#ffffff",color:Z?"#e5e7eb":"#1f2937",padding:"12px",borderRadius:"10px",fontSize:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",zIndex:1e3,minWidth:"220px"},children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Leave:"})," ",te.leaveDays||0," days"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Public Holidays:"})," ",te.holidayDays||0," days"]}),((Et=te.holidaysInPeriod)==null?void 0:Et.length)>0&&n.jsxs("div",{style:{marginTop:"8px",opacity:.85},children:[n.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:"Holidays:"}),te.holidaysInPeriod.map((re,xe)=>n.jsxs("div",{children:[" ",re.name]},xe))]})]})]}),n.jsxs("div",{style:{...se.statItem(Fe==="capacity"),position:"relative"},onMouseEnter:()=>Y("capacity"),onMouseLeave:()=>Y(null),children:[n.jsxs("div",{onMouseEnter:()=>K(!0),onMouseLeave:()=>K(!1),children:[n.jsxs("div",{style:se.statLabel,children:[n.jsx(DA,{size:16,style:{display:"inline",marginRight:"4px"}}),"Capacity Utilization "]}),n.jsx("div",{style:se.capacityValue(Fe==="capacity",te.capacityUtilization||0),children:n.jsx(Lp,{value:te.capacityUtilization||0,suffix:"%"})}),n.jsx("div",{style:{width:"100%",height:"6px",background:Z?"#374151":"#e5e7eb",borderRadius:"3px",overflow:"hidden",marginTop:"8px"},children:n.jsx("div",{style:{width:`${Math.min(te.capacityUtilization||0,100)}%`,height:"100%",background:Lt(te.capacityUtilization||0),transition:"width 1s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"3px"}})}),D&&n.jsxs("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px",background:Z?"#020617":"#ffffff",color:Z?"#e5e7eb":"#1f2937",padding:"12px",borderRadius:"10px",fontSize:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",zIndex:1e3,minWidth:"220px"},children:[n.jsxs("div",{children:[n.jsx("span",{style:{color:"#3b82f6"},children:""})," < 70%  Underutilized"]}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"#10b981"},children:""})," 70100%  Optimal"]}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"#f59e0b"},children:""})," 100120%  Stretched"]}),n.jsxs("div",{children:[n.jsx("span",{style:{color:"#ef4444"},children:""})," > 120%  Overloaded"]})]})]}),n.jsx(Px,{current:te.capacityUtilization||0,previous:ie.capacityUtilization||0,timePeriod:ve}),n.jsxs("div",{style:{fontSize:"12px",color:Z?"#94a3b8":"#64748b",marginTop:"4px"},children:[te.effectiveWorkingDays>0?`Avg: ${(te.totalHours/te.effectiveWorkingDays).toFixed(1)}h/day`:"No working days","  ",te.effectiveWorkingDays||0," working days"]})]})]})]}),n.jsxs("div",{style:se.card(I==="status"),onMouseEnter:()=>_("status"),onMouseLeave:()=>_(null),children:[n.jsx("div",{style:se.cardGlow}),n.jsx("div",{style:se.floatingIcon,children:n.jsx(Er,{})}),n.jsxs("div",{style:{position:"relative"},children:[w?n.jsxs("div",{ref:F,style:se.toggleViewContainer,onClick:()=>h(re=>!re),onMouseEnter:()=>be(!0),onMouseLeave:()=>be(!1),children:[r==="status"?"Status":"Mini Calendar",n.jsx(ko,{style:se.chevron(m,N),size:18})]}):n.jsx("div",{style:se.toggleViewContainerStatic,children:"Mini Calendar"}),w&&m&&n.jsxs("div",{style:se.statusOverlay,onMouseDown:re=>re.stopPropagation(),children:[n.jsx("div",{style:se.blurOption(I==="view-0"),onMouseDown:re=>{re.preventDefault(),re.stopPropagation(),a("status"),h(!1)},onMouseEnter:()=>_("view-0"),onMouseLeave:()=>_(null),children:"Status"}),n.jsx("div",{style:se.blurOption(I==="view-1"),onMouseDown:re=>{re.preventDefault(),re.stopPropagation(),a("calendar"),h(!1)},onMouseEnter:()=>_("view-1"),onMouseLeave:()=>_(null),children:"Mini Calendar"})]})]}),r==="status"&&w?n.jsx("div",{style:se.statusFlex,children:[{title:"Overloaded",count:`${$e.summary.overworked}/${$e.summary.totalUsers}`,users:((pe=$e.users)==null?void 0:pe.filter(re=>re.status==="Overworked"))||[],note:"Users working over capacity",color:"#fee2e2",darkColor:"rgba(239,68,68,0.15)"},{title:"Underutilized",count:`${$e.summary.underutilized}/${$e.summary.totalUsers}`,users:((R=$e.users)==null?void 0:R.filter(re=>re.status==="Underutilized"))||[],note:"Users working under capacity",color:"#fef9c3",darkColor:"rgba(234,179,8,0.15)"},{title:"Optimal",count:`${$e.summary.optimal}/${$e.summary.totalUsers}`,users:((Ce=$e.users)==null?void 0:Ce.filter(re=>re.status==="Optimal"))||[],note:"Users working at optimal capacity",color:"#dcfce7",darkColor:"rgba(34,197,94,0.15)"}].map((re,xe)=>n.jsxs("div",{style:se.statusBox(re.color,re.darkColor,I===`status-${xe}`),onMouseEnter:()=>_(`status-${xe}`),onMouseLeave:()=>_(null),onClick:()=>ne(re),children:[Z&&n.jsx("div",{style:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:re.title==="Overloaded"?"radial-gradient(circle, rgba(239,68,68,0.1) 0%, transparent 70%)":re.title==="Underutilized"?"radial-gradient(circle, rgba(234,179,8,0.1) 0%, transparent 70%)":"radial-gradient(circle, rgba(34,197,94,0.1) 0%, transparent 70%)",opacity:I===`status-${xe}`?1:.5,transition:"opacity 0.4s ease",pointerEvents:"none"}}),n.jsx("div",{style:se.statusTitle,children:re.title}),n.jsx("div",{style:se.statusCount,children:re.count}),n.jsx("div",{style:se.statusNote,children:re.note})]},`${xe}-${Z}`))},`status-cards-${Z}`):n.jsx(vE,{isDarkMode:Z,events:e,holidays:u,onDateClick:Ut})]}),n.jsxs("div",{style:se.card(I==="activity"),onMouseEnter:()=>_("activity"),onMouseLeave:()=>_(null),children:[n.jsx("div",{style:se.cardGlow}),n.jsx("div",{style:se.activityTitle,children:"Recent Activity"}),n.jsxs("table",{style:se.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:se.th,children:"Date"}),n.jsx("th",{style:se.th,children:"Meeting"}),n.jsx("th",{style:se.th,children:"Type"}),n.jsx("th",{style:se.th,children:"Duration"})]})}),n.jsx("tbody",{children:(()=>{const re=new Date,xe=e.filter(Ze=>new Date(Ze.end.dateTime)<re).sort((Ze,J)=>new Date(J.start.dateTime)-new Date(Ze.start.dateTime)).slice(0,10);return xe.length===0?n.jsx("tr",{children:n.jsxs("td",{colSpan:"4",style:{...se.td,textAlign:"center",padding:"60px 20px"},children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",opacity:.3},children:""}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:Z?"#e2e8f0":"#1e293b",marginBottom:"8px"},children:"No recent meetings"}),n.jsx("div",{style:{fontSize:"14px",color:Z?"#94a3b8":"#64748b",marginBottom:"16px"},children:"Your past meetings will appear here"}),n.jsx("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"#3b82f6",color:"#fff",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>window.location.href="/calendar",onMouseEnter:Ze=>Ze.currentTarget.style.transform="scale(1.05)",onMouseLeave:Ze=>Ze.currentTarget.style.transform="scale(1)",children:"View Calendar"})]})}):xe.map((Ze,J)=>{var It,tt;const qt=new Date(Ze.start.dateTime),He=new Date(Ze.end.dateTime),bn=qt.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),at=He-qt,k=Math.floor(at/(1e3*60*60)),v=Math.floor(at%(1e3*60*60)/(1e3*60)),Ae=k>0?`${k}h ${v}m`:`${v}m`;let Ue="Meeting",et="",Ke=Z?"#94a3b8":"#64748b";Ze.isOnlineMeeting?(Ue="Online Meeting",et="",Ke="#3b82f6"):(It=Ze.location)!=null&&It.displayName&&(Ue="In-Person",et="",Ke="#10b981");const yt=((tt=Ze.subject)==null?void 0:tt.toLowerCase())||"";return(yt.includes("call")||yt.includes("phone"))&&(Ue="Call",et="",Ke="#8b5cf6"),n.jsxs("tr",{className:"table-row",style:{...se.tableRow,cursor:"pointer"},onClick:()=>{O(qt),E(!0)},onMouseEnter:st=>{st.currentTarget.style.backgroundColor="rgba(59,130,246,0.05)",st.currentTarget.style.transform="scale(1.01)"},onMouseLeave:st=>{st.currentTarget.style.backgroundColor="transparent",st.currentTarget.style.transform="scale(1)"},children:[n.jsx("td",{style:se.td,children:bn}),n.jsx("td",{style:{...se.td,fontWeight:"600",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Ze.subject||"Untitled Meeting"}),n.jsxs("td",{style:{...se.td,color:Ke,fontWeight:"600"},children:[n.jsx("span",{style:{marginRight:"6px"},children:et}),Ue]}),n.jsx("td",{style:se.td,children:Ae})]},J)})})()})]})]})]}),n.jsx(wE,{isOpen:U,onClose:()=>E(!1),selectedDate:P,events:e,holidays:u,isDarkMode:Z}),n.jsx(bE,{isOpen:G,onClose:()=>W(!1),statusData:Te,isDarkMode:Z})]}):n.jsx("div",{className:"admin-dashboard-page",style:se.page,children:n.jsx("div",{style:se.loadingSpinner,children:n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"16px"},children:""}),n.jsx("div",{children:"Unable to load user profile"}),n.jsx("div",{style:{fontSize:"14px",marginTop:"8px",opacity:.7},children:"Please ensure you are logged in and try again"}),n.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"16px",padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"#3b82f6",color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Retry"})]})})})},Vt=({value:i,onChange:e,options:t=[],label:r,placeholder:a="Select option...",isDarkMode:A,disabled:c=!1,searchable:u=!1,groupedOptions:p=null,allowCustom:m=!1,customPlaceholder:h="Enter custom value...",compact:y=!1,hasIcon:b=!1,variant:L="blue"})=>{const U={blue:{primary:"#3b82f6",hover:"rgba(59,130,246,0.1)",border:"rgba(59,130,246,0.3)",shadow:"rgba(59,130,246,0.1)"},purple:{primary:"#8b5cf6",hover:"rgba(139,92,246,0.1)",border:"rgba(139,92,246,0.3)",shadow:"rgba(139,92,246,0.1)"}}[L],[E,P]=f.useState(!1),[O,ve]=f.useState(""),[ce,Q]=f.useState(null),[V,Z]=f.useState(!1),[le,$]=f.useState(""),ue=f.useRef(null),we=f.useRef(null);f.useEffect(()=>{const H=M=>{ue.current&&!ue.current.contains(M.target)&&(P(!1),ve(""))};return E&&document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[E]),f.useEffect(()=>{E&&u&&we.current&&we.current.focus()},[E,u]);const ge=u?t.filter(H=>H.toLowerCase().includes(O.toLowerCase())):t,te=p&&u?Object.keys(p).reduce((H,M)=>{const I=p[M].filter(_=>_.toLowerCase().includes(O.toLowerCase()));return I.length>0&&(H[M]=I),H},{}):p,Me=H=>{e(H),P(!1),ve(""),Z(!1)},ie=()=>{le.trim()&&(e(le.trim()),P(!1),Z(!1),$(""))},me=H=>{H.stopPropagation(),e(""),Z(!1),$("")},N=()=>V?h:i||a,be={container:{position:"relative",width:"100%"},label:{fontSize:"14px",fontWeight:"600",color:A?"#e2e8f0":"#374151",marginBottom:"8px",display:"block",transition:"all 0.3s ease"},select:H=>({width:"100%",padding:y?"12px 16px":"16px 20px",paddingLeft:b?"44px":y?"16px":"20px",paddingRight:i?y?"70px":"80px":y?"45px":"50px",borderRadius:"12px",border:H?`2px solid ${U.primary}`:A?y?"1px solid rgba(75,85,99,0.3)":"2px solid #4b5563":y?"1px solid rgba(226,232,240,0.5)":"2px solid #e2e8f0",fontSize:y?"14px":"16px",transition:"all 0.3s ease",backgroundColor:c?A?"#374151":"#f3f4f6":A?y?"rgba(51,65,85,0.5)":"#4b5563":"#fff",color:A?"#e2e8f0":"#374151",cursor:c?"not-allowed":"pointer",outline:"none",boxShadow:H?`0 0 0 3px ${U.shadow}`:"0 2px 4px rgba(0,0,0,0.02)",opacity:c?.6:1,userSelect:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),iconContainer:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",gap:"8px",pointerEvents:"none"},icon:H=>({color:A?"#94a3b8":"#64748b",transition:"all 0.3s ease",transform:H?"rotate(180deg)":"rotate(0deg)"}),clearButton:H=>({color:H?"#ef4444":A?"#94a3b8":"#64748b",pointerEvents:"auto",cursor:"pointer",transition:"all 0.2s ease",transform:H?"scale(1.1)":"scale(1)"}),dropdown:{position:"absolute",top:"calc(100% + 8px)",left:0,right:0,zIndex:1e3,backgroundColor:A?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",border:A?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",animation:"slideIn 0.2s ease-out",maxHeight:"320px",overflow:"hidden",display:"flex",flexDirection:"column"},searchContainer:{padding:"12px",borderBottom:A?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)"},searchInput:{width:"100%",padding:"10px 12px",paddingLeft:"36px",borderRadius:"8px",border:A?"1px solid #4b5563":"1px solid #e2e8f0",fontSize:"14px",backgroundColor:A?"#374151":"#f9fafb",color:A?"#e2e8f0":"#374151",outline:"none",transition:"all 0.2s ease"},searchIcon:{position:"absolute",left:"24px",top:"50%",transform:"translateY(-50%)",color:A?"#94a3b8":"#64748b",pointerEvents:"none"},optionsList:{overflowY:"auto",overflowX:"hidden",padding:"8px",flex:1,scrollbarWidth:"thin",scrollbarColor:A?"#4b5563 #1e293b":"#cbd5e1 #f1f5f9"},option:(H,M)=>({padding:"12px 16px",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:M?"600":"500",transition:"all 0.2s ease",backgroundColor:H?U.hover:"transparent",color:M?U.primary:A?"#e2e8f0":"#374151",display:"flex",alignItems:"center",justifyContent:"space-between",borderLeft:H?`3px solid ${U.primary}`:"3px solid transparent",marginBottom:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"}),groupLabel:{padding:"8px 16px",fontSize:"12px",fontWeight:"700",color:A?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginTop:"8px"},customInputContainer:{padding:"12px",borderTop:A?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)"},customInput:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:A?"1px solid #4b5563":"1px solid #e2e8f0",fontSize:"14px",backgroundColor:A?"#374151":"#fff",color:A?"#e2e8f0":"#374151",outline:"none",transition:"all 0.2s ease",marginBottom:"8px"},customButton:H=>({width:"100%",padding:"8px 12px",borderRadius:"8px",border:"none",backgroundColor:H?U.primary:U.hover,color:H?"#fff":U.primary,fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"}),noResults:{padding:"20px",textAlign:"center",color:A?"#94a3b8":"#64748b",fontSize:"14px"}};return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /*  Custom Scrollbar Styles */
  .dropdown-options-list::-webkit-scrollbar {
    width: 8px;
  }
  
  .dropdown-options-list::-webkit-scrollbar-track {
    background: ${A?"#1e293b":"#f1f5f9"};
    border-radius: 4px;
  }
  
  .dropdown-options-list::-webkit-scrollbar-thumb {
    background: ${A?"#4b5563":"#cbd5e1"};
    border-radius: 4px;
  }
  
  .dropdown-options-list::-webkit-scrollbar-thumb:hover {
    background: ${A?"#6b7280":"#94a3b8"};
  }
`}),n.jsxs("div",{style:be.container,ref:ue,children:[r&&n.jsx("label",{style:be.label,children:r}),n.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[V?n.jsx("input",{type:"text",autoFocus:!0,value:le,placeholder:h,style:be.select(!0),onChange:H=>$(H.target.value),onKeyDown:H=>{H.key==="Enter"&&ie(),H.key==="Escape"&&(Z(!1),$(""))},onBlur:()=>{le.trim()?ie():Z(!1)}}):n.jsx("div",{onClick:()=>!c&&P(!E),style:be.select(E),children:N()}),n.jsxs("div",{style:be.iconContainer,children:[i&&!c&&n.jsx(dn,{size:18,style:be.clearButton(ce==="clear"),onMouseEnter:()=>Q("clear"),onMouseLeave:()=>Q(null),onClick:me}),!V&&n.jsx(ko,{size:18,style:be.icon(E)})]})]}),E&&!c&&n.jsxs("div",{style:be.dropdown,children:[u&&n.jsx("div",{style:be.searchContainer,children:n.jsxs("div",{style:{position:"relative"},children:[n.jsx(PA,{size:16,style:be.searchIcon}),n.jsx("input",{ref:we,type:"text",value:O,onChange:H=>ve(H.target.value),placeholder:"Search...",style:be.searchInput})]})}),n.jsxs("div",{style:be.optionsList,className:"dropdown-options-list",children:[p?n.jsxs(n.Fragment,{children:[Object.keys(te||{}).length===0&&n.jsx("div",{style:be.noResults,children:"No results found"}),Object.keys(te||{}).map(H=>n.jsxs("div",{children:[n.jsx("div",{style:be.groupLabel,children:H}),te[H].map((M,I)=>n.jsxs("div",{onClick:()=>Me(M),onMouseEnter:()=>Q(`${H}-${I}`),onMouseLeave:()=>Q(null),style:be.option(ce===`${H}-${I}`,i===M),children:[M,i===M&&n.jsx(lh,{size:16})]},`${H}-${I}`))]},H))]}):n.jsxs(n.Fragment,{children:[ge.length===0&&n.jsx("div",{style:be.noResults,children:"No results found"}),ge.map((H,M)=>n.jsxs("div",{onClick:()=>Me(H),onMouseEnter:()=>Q(M),onMouseLeave:()=>Q(null),style:be.option(ce===M,i===H),children:[H,i===H&&n.jsx(lh,{size:16})]},M))]}),m&&!V&&n.jsx("div",{onClick:()=>{Z(!0),$(""),P(!1)},onMouseEnter:()=>Q("custom"),onMouseLeave:()=>Q(null),style:{...be.option(ce==="custom",!1),borderTop:A?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",marginTop:"8px",color:U.primary,fontWeight:"600"},children:" Custom / Other"})]})]})]})]})},BE=()=>{const[i,e]=f.useState("All Projects"),[t,r]=f.useState("All Teams"),[a,A]=f.useState(null),[c,u]=f.useState("team"),[p,m]=f.useState(!1),[h,y]=f.useState(!1),[b,L]=f.useState("week"),[S,U]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[E,P]=f.useState(!1),[O,ve]=f.useState(null),[ce,Q]=f.useState({top:64,left:0}),V=f.useRef(null),[Z,le]=f.useState([]),[$,ue]=f.useState(!1),[we,ge]=f.useState(null),[te,Me]=f.useState(null),[ie,me]=f.useState({availableHours:0,assignedHours:0,assignedPercentage:0,availableCapacity:0});f.useEffect(()=>{if(V.current&&p){const D=V.current.getBoundingClientRect();Q({top:D.bottom+4,left:D.left})}},[p]),f.useEffect(()=>{const D=K=>{V.current&&!V.current.contains(K.target)&&m(!1)};return p&&document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[p]),f.useEffect(()=>{te&&(async()=>{ue(!0),ge(null);try{console.log(` Fetching team capacity for ${b}...`);const K=await ke(`/api/workload-status?period=${b}`,{credentials:"include"});if(!K.ok)throw new Error("Failed to fetch team capacity");const Te=await K.json();console.log(" Team data:",Te);const Ne=(Te.users||[]).filter(B=>te&&B.department===te.department),G=Ne.map(B=>{var ee,Pe;return{name:`${B.firstName} ${B.lastName||""}`.trim(),utilization:B.utilizationPercentage||0,project:((Pe=(ee=B.projects)==null?void 0:ee[0])==null?void 0:Pe.name)||"Not assigned",team:B.team||"No team",department:B.department}});le(G);const W=Ne.reduce((B,ee)=>B+ee.targetHours,0),j=Ne.reduce((B,ee)=>B+ee.totalHours,0),F=W>0?Math.round(j/W*100):0,Xe=W>0?((W-j)/W*100).toFixed(1):0;me({availableHours:W,assignedHours:j,assignedPercentage:F,availableCapacity:Xe})}catch(K){console.error(" Error fetching team capacity:",K),ge(K.message)}finally{ue(!1)}})()},[b,te]),f.useEffect(()=>{(async()=>{try{const K=await ke("/user/profile",{credentials:"include"});if(K.ok){const Te=await K.json();Me(Te)}}catch(K){console.error("Error fetching user profile:",K)}})()},[]);const N=["all",...new Set(Z.map(D=>D.project).filter(Boolean))],be=["all",...new Set(Z.map(D=>D.team).filter(Boolean))],H=Z.filter(D=>(i==="All Projects"||D.project===i)&&(t==="All Teams"||D.team===t)),M=()=>{U(!S);try{localStorage.setItem("darkMode",(!S).toString())}catch{console.log("LocalStorage not available")}y(!1)},I=D=>{u(D),m(!1),D==="reports"?window.location.href="/adminreports":D==="utilization"&&(window.location.href="/adminutilization")},_=()=>{switch(c){case"reports":return"Personal Reports";case"team":return"Team Capacity Summary";case"utilization":return"Utilization Overview";default:return"Team Capacity Summary"}},Fe=(D,K)=>D?!K||K.trim()===""?D[0].toUpperCase():`${D[0]}${K[0]}`.toUpperCase():"?",Y={page:{minHeight:"100vh",padding:"30px",background:S?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:S?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},toggleViewContainer:{fontSize:"18px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:S?"#e2e8f0":"#1e293b"},chevron:(D,K)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:D||K?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:D||K?"#3b82f6":S?"#94a3b8":"#64748b"}),sectionOverlay:{position:"fixed",top:ce.top,left:ce.left,zIndex:999,backgroundColor:S?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:S?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},blurOption:D=>({backgroundColor:D?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:S?"#e2e8f0":"#374151",transform:D?"translateX(4px)":"translateX(0)",borderLeft:D?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),periodToggle:{display:"flex",gap:"12px",padding:"8px",backgroundColor:S?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.6)",borderRadius:"12px",backdropFilter:"blur(10px)",border:S?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",width:"fit-content",marginBottom:"24px"},periodButton:D=>({padding:"8px 24px",borderRadius:"8px",border:"none",backgroundColor:D?"#3b82f6":"transparent",color:D?"#fff":S?"#94a3b8":"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",transform:D?"scale(1.05)":"scale(1)"}),statsRow:{display:"flex",gap:"24px",marginBottom:"32px",flexWrap:"wrap"},statCard:(D,K)=>({flex:1,minWidth:"200px",background:`linear-gradient(135deg, ${D} 0%, ${D}dd 100%)`,borderRadius:"20px",padding:"24px",color:"#fff",boxShadow:K?"0 12px 24px rgba(0,0,0,0.15)":"0 6px 16px rgba(0,0,0,0.1)",transform:K?"translateY(-4px) scale(1.02)":"translateY(0) scale(1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",border:"1px solid rgba(255,255,255,0.2)",backdropFilter:"blur(10px)"}),statLabel:{fontSize:"16px",fontWeight:"600",marginBottom:"8px",opacity:.9},statValue:{fontSize:"32px",fontWeight:"800",textShadow:"0 2px 4px rgba(0,0,0,0.2)"},mainContent:{display:"flex",gap:"32px",flexWrap:"wrap"},tableSection:{flex:"2",minWidth:"400px"},chartSection:{flex:"1",minWidth:"300px",display:"flex",flexDirection:"column",alignItems:"center"},filtersContainer:{display:"flex",gap:"16px",marginBottom:"24px",flexWrap:"wrap",alignItems:"center"},filterGroup:{display:"flex",flexDirection:"column",gap:"8px"},filterLabel:{fontSize:"14px",fontWeight:"600",color:S?"#e2e8f0":"#374151",transition:"all 0.3s ease"},filterSelect:{padding:"8px 12px",borderRadius:"8px",border:S?"2px solid rgba(75,85,99,0.3)":"2px solid rgba(226,232,240,0.5)",backgroundColor:S?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",fontSize:"14px",fontWeight:"500",color:S?"#e2e8f0":"#374151",cursor:"pointer",transition:"all 0.3s ease",minWidth:"120px",backdropFilter:"blur(10px)"},employeeTable:{backgroundColor:S?"rgba(55,65,81,0.9)":"rgba(30,41,59,0.95)",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease",backdropFilter:"blur(10px)",border:S?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.1)"},tableHeader:{backgroundColor:S?"rgba(75,85,99,0.9)":"rgba(51,65,85,0.9)",padding:"20px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},tableHeaderText:{color:"#fff",fontSize:"18px",fontWeight:"700"},tableBody:{padding:"8px 0"},employeeRow:D=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",transition:"all 0.2s ease",backgroundColor:D?"rgba(255,255,255,0.05)":"transparent",borderLeft:D?"4px solid #3b82f6":"4px solid transparent",cursor:"pointer"}),employeeName:{color:S?"#e2e8f0":"#f1f5f9",fontSize:"16px",fontWeight:"500",flex:1,transition:"all 0.3s ease"},utilizationPercent:D=>({color:D>=85?"#f59e0b":D>=80?"#10b981":"#64748b",fontSize:"16px",fontWeight:"700"}),pieChart:{width:"200px",height:"200px",borderRadius:"50%",background:`conic-gradient(${S?"#4b5563":"#1e293b"} 0deg ${ie.assignedPercentage*3.6}deg, ${S?"#6b7280":"#e5e7eb"} ${ie.assignedPercentage*3.6}deg 360deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",marginBottom:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"},pieChartInner:{width:"140px",height:"140px",borderRadius:"50%",backgroundColor:S?"rgba(55,65,81,0.95)":"rgba(255,255,255,0.95)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},pieChartLabel:{fontSize:"14px",fontWeight:"600",color:S?"#94a3b8":"#64748b",marginBottom:"4px",transition:"all 0.3s ease"},pieChartValue:{fontSize:"24px",fontWeight:"800",color:S?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},capacityInfo:{textAlign:"center"},freePercentage:{fontSize:"18px",fontWeight:"700",color:"#10b981",marginBottom:"8px"},capacityText:{fontSize:"16px",color:S?"#94a3b8":"#64748b",fontWeight:"500",lineHeight:"1.4",transition:"all 0.3s ease"},topButton:D=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:D?"rgba(59,130,246,0.1)":S?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:D?"#3b82f6":S?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:D?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:D?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:S?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:S?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:S?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:S?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:S?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:S?"#94a3b8":"#64748b",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"}};return f.useEffect(()=>{const D=document.createElement("style");return D.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
    `,document.head.appendChild(D),()=>document.head.removeChild(D)},[]),n.jsxs("div",{style:Y.page,children:[n.jsxs("div",{style:Y.headerRow,children:[n.jsx("div",{style:Y.headerLeft,children:n.jsxs("div",{ref:V,style:Y.toggleViewContainer,onClick:()=>m(D=>!D),onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),className:"floating",children:[n.jsx("span",{style:Y.header,children:_()}),n.jsx(ko,{style:Y.chevron(p,E),size:20})]})}),n.jsxs("div",{style:Y.headerRight,children:[n.jsxs("button",{style:Y.topButton(O==="alerts"),onMouseEnter:()=>ve("alerts"),onMouseLeave:()=>ve(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(lr,{size:20}),n.jsx("div",{style:Y.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:Y.topButton(O==="profile"),onMouseEnter:()=>{ve("profile"),y(!0)},onMouseLeave:()=>ve(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Yt,{size:20})}),h&&te&&n.jsxs("div",{style:Y.profileTooltip,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[n.jsx("div",{style:Y.tooltipArrow}),n.jsxs("div",{style:Y.userInfo,children:[n.jsx("div",{style:Y.avatar,children:Fe(te.firstName,te.lastName)}),n.jsxs("div",{style:Y.userDetails,children:[n.jsxs("div",{style:Y.userName,children:[te.firstName," ",te.lastName||""]}),n.jsxs("div",{style:Y.userRole,children:[te.role==="admin"?"Admin":"Member","  ",te.department]})]})]}),n.jsx("button",{style:Y.themeToggle,onClick:M,children:S?" Light Mode":" Dark Mode"})]})]})]})]}),p&&n.jsx("div",{style:Y.sectionOverlay,onMouseDown:D=>D.stopPropagation(),onClick:D=>D.stopPropagation(),children:n.jsx("div",{children:["reports","team","utilization"].map((D,K)=>n.jsx("div",{style:Y.blurOption(O===`section-${K}`),onClick:Te=>{Te.preventDefault(),Te.stopPropagation(),I(D)},onMouseDown:Te=>{Te.preventDefault(),Te.stopPropagation()},onMouseEnter:()=>ve(`section-${K}`),onMouseLeave:()=>ve(null),children:D==="reports"?"Personal Reports":D==="team"?"Team Capacity":"Utilization Overview"},D))})}),we&&n.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",color:"#ef4444"},children:[n.jsx(lo,{size:20}),n.jsx("span",{children:we})]}),n.jsxs("div",{style:Y.periodToggle,children:[n.jsx("button",{style:Y.periodButton(b==="week"),onClick:()=>L("week"),children:"Week"}),n.jsx("button",{style:Y.periodButton(b==="month"),onClick:()=>L("month"),children:"Month"})]}),n.jsxs("div",{style:Y.statsRow,children:[n.jsxs("div",{style:Y.statCard("#10b981",a==="available"),onMouseEnter:()=>A("available"),onMouseLeave:()=>A(null),children:[n.jsx("div",{style:Y.statLabel,children:"Available Hours:"}),n.jsx("div",{style:Y.statValue,children:$?"...":`${ie.availableHours.toFixed(0)}h`})]}),n.jsxs("div",{style:Y.statCard("#f59e0b",a==="assigned"),onMouseEnter:()=>A("assigned"),onMouseLeave:()=>A(null),children:[n.jsx("div",{style:Y.statLabel,children:"Assigned Hours:"}),n.jsx("div",{style:Y.statValue,children:$?"...":`${ie.assignedHours.toFixed(0)}h`})]})]}),$?n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"60px",color:S?"#94a3b8":"#64748b"},children:n.jsx(ki,{size:32,style:{animation:"spin 1s linear infinite"}})}):n.jsxs("div",{style:Y.mainContent,children:[n.jsxs("div",{style:Y.tableSection,children:[n.jsxs("div",{style:Y.filtersContainer,children:[n.jsxs("div",{style:Y.filterGroup,children:[n.jsx("label",{style:Y.filterLabel,children:"Filter by Project:"}),n.jsx(Vt,{value:i,onChange:D=>e(D),options:["All Projects",...N.filter(D=>D!=="all")],placeholder:"Select project...",isDarkMode:S,searchable:!1,compact:!0})]}),n.jsxs("div",{style:Y.filterGroup,children:[n.jsxs("label",{style:Y.filterLabel,children:["Filter by Team (within ",te==null?void 0:te.department,"):"]}),n.jsx(Vt,{value:t,onChange:D=>r(D),options:["All Teams",...be.filter(D=>D!=="all")],placeholder:"Select team...",isDarkMode:S,searchable:!1,compact:!0})]})]}),n.jsxs("div",{style:Y.employeeTable,children:[n.jsxs("div",{style:Y.tableHeader,children:[n.jsx("span",{style:Y.tableHeaderText,children:"Employee"}),n.jsx("span",{style:Y.tableHeaderText,children:"Utilization (%)"})]}),n.jsx("div",{style:Y.tableBody,children:H.length>0?H.map((D,K)=>n.jsxs("div",{style:Y.employeeRow(a===`emp-${K}`),onMouseEnter:()=>A(`emp-${K}`),onMouseLeave:()=>A(null),children:[n.jsx("span",{style:Y.employeeName,children:D.name}),n.jsxs("span",{style:Y.utilizationPercent(D.utilization),children:[D.utilization,"%"]})]},K)):n.jsx("div",{style:{padding:"40px",textAlign:"center",color:S?"#94a3b8":"#64748b"},children:"No team members found"})})]})]}),n.jsxs("div",{style:Y.chartSection,children:[n.jsx("div",{style:Y.pieChart,children:n.jsxs("div",{style:Y.pieChartInner,children:[n.jsx("div",{style:Y.pieChartLabel,children:"Assigned"}),n.jsxs("div",{style:Y.pieChartValue,children:[ie.assignedPercentage,"%"]})]})}),n.jsxs("div",{style:Y.capacityInfo,children:[n.jsxs("div",{style:Y.freePercentage,children:["Free ",ie.availableCapacity,"%"]}),n.jsxs("div",{style:Y.capacityText,children:[ie.availableCapacity,"% of team capacity",n.jsx("br",{}),"is still available"]})]})]})]})]})},SE=()=>{const[i,e]=f.useState("utilization"),[t,r]=f.useState(!1),[a,A]=f.useState(!1),[c,u]=f.useState(null),[p,m]=f.useState(null),[h,y]=f.useState("All Projects"),[b,L]=f.useState("All Teams"),[S,U]=f.useState(!1),[E,P]=f.useState("week"),[O,ve]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),ce=f.useRef(null),[Q,V]=f.useState({top:64,left:0}),[Z,le]=f.useState([]),[$,ue]=f.useState(0),[we,ge]=f.useState(!1),[te,Me]=f.useState(null),[ie,me]=f.useState(null);f.useEffect(()=>{if(ce.current&&t){const D=ce.current.getBoundingClientRect();V({top:D.bottom+4,left:D.left})}},[t]),f.useEffect(()=>{const D=K=>{ce.current&&!ce.current.contains(K.target)&&r(!1)};return t&&document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[t]),f.useEffect(()=>{ie&&(async()=>{ge(!0),Me(null);try{console.log(` Fetching utilization data for ${E}...`);const K=await ke(`/api/workload-status?period=${E}`,{credentials:"include"});if(!K.ok)throw new Error("Failed to fetch team data");const Te=await K.json();console.log(" Team workload data:",Te),console.log(" Users array:",Te.users);const Ne=(Te.users||[]).filter(j=>ie&&j.department===ie.department);console.log(` Filtered to ${Ne.length} users in ${ie==null?void 0:ie.department} department`);const G=Ne.map(j=>{var F,Xe;return console.log(" Processing user:",j),{name:`${j.firstName} ${j.lastName||""}`.trim(),utilization:j.utilizationPercentage||0,project:((Xe=(F=j.projects)==null?void 0:F[0])==null?void 0:Xe.name)||"Not assigned",team:j.team||"No team",department:j.department}});console.log(" Transformed employees:",G),le(G);const W=G.length>0?Math.round(G.reduce((j,F)=>j+F.utilization,0)/G.length):0;ue(W)}catch(K){console.error(" Error fetching utilization data:",K),Me(K.message)}finally{ge(!1)}})()},[E,ie]),f.useEffect(()=>{(async()=>{try{const K=await ke("/user/profile",{credentials:"include"});if(K.ok){const Te=await K.json();me(Te)}}catch(K){console.error("Error fetching user profile:",K)}})()},[]);const N=["all",...new Set(Z.map(D=>D.project).filter(Boolean))],be=["all",...new Set(Z.map(D=>D.team).filter(Boolean))],H=Z.filter(D=>(h==="All Projects"||D.project===h)&&(b==="All Teams"||D.team===b)),M=()=>{ve(!O);try{localStorage.setItem("darkMode",(!O).toString())}catch{console.log("LocalStorage not available")}U(!1)},I=D=>{e(D),r(!1),D==="reports"?window.location.href="/adminreports":D==="team"&&(window.location.href="/adminteamcapacity")},_=()=>{switch(i){case"reports":return"Personal Reports";case"team":return"Team Capacity Summary";case"utilization":return"Utilization Overview";default:return"Utilization Overview"}},Fe=(D,K)=>D?!K||K.trim()===""?D[0].toUpperCase():`${D[0]}${K[0]}`.toUpperCase():"?";f.useEffect(()=>{const D=document.createElement("style");return D.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
    `,document.head.appendChild(D),()=>document.head.removeChild(D)},[]);const Y={page:{minHeight:"100vh",padding:"30px",background:O?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:O?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},toggleViewContainer:{fontSize:"18px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:O?"#e2e8f0":"#1e293b"},chevron:(D,K)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:D||K?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:D||K?"#3b82f6":O?"#94a3b8":"#64748b"}),sectionOverlay:{position:"fixed",top:Q.top,left:Q.left,zIndex:999,backgroundColor:O?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:O?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},blurOption:D=>({backgroundColor:D?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:O?"#e2e8f0":"#374151",transform:D?"translateX(4px)":"translateX(0)",borderLeft:D?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),mainContent:{display:"flex",gap:"32px",marginBottom:"32px",flexWrap:"wrap"},avgUtilizationCard:{flex:"0 0 300px",backgroundColor:O?"#374151":"#1e293b",borderRadius:"20px",padding:"32px",color:"#fff",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease",cursor:"pointer"},avgUtilizationLabel:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",opacity:.9},avgUtilizationValue:{fontSize:"48px",fontWeight:"800",textShadow:"0 2px 4px rgba(0,0,0,0.2)"},periodToggleContainer:{flex:"1",minWidth:"400px",display:"flex",flexDirection:"column",gap:"16px"},periodToggle:{display:"flex",gap:"12px",padding:"8px",backgroundColor:O?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.6)",borderRadius:"12px",backdropFilter:"blur(10px)",border:O?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",width:"fit-content"},periodButton:D=>({padding:"8px 24px",borderRadius:"8px",border:"none",backgroundColor:D?"#3b82f6":"transparent",color:D?"#fff":O?"#94a3b8":"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",transform:D?"scale(1.05)":"scale(1)"}),summaryText:{fontSize:"16px",fontWeight:"600",color:O?"#e2e8f0":"#1e293b",marginBottom:"8px"},employeeTable:{backgroundColor:O?"#374151":"#1e293b",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",transition:"all 0.3s ease"},tableHeader:{backgroundColor:O?"#4b5563":"#334155",padding:"20px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.3s ease"},tableHeaderText:{color:"#fff",fontSize:"18px",fontWeight:"700"},tableBody:{padding:"8px 0"},employeeRow:D=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",transition:"all 0.2s ease",backgroundColor:D?"rgba(255,255,255,0.05)":"transparent",borderLeft:D?"4px solid #3b82f6":"4px solid transparent",cursor:"pointer"}),employeeName:{color:O?"#e2e8f0":"#f1f5f9",fontSize:"16px",fontWeight:"500",flex:1,transition:"all 0.3s ease"},utilizationPercent:D=>({color:D>=85?"#f59e0b":D>=80?"#10b981":"#64748b",fontSize:"16px",fontWeight:"700"}),filtersContainer:{display:"flex",gap:"16px",marginBottom:"24px",flexWrap:"wrap",alignItems:"center"},filterGroup:{display:"flex",flexDirection:"column",gap:"8px"},filterLabel:{fontSize:"14px",fontWeight:"600",color:O?"#e2e8f0":"#374151",transition:"all 0.3s ease"},filterSelect:{padding:"8px 12px",borderRadius:"8px",border:O?"2px solid #4b5563":"2px solid #e5e7eb",backgroundColor:O?"#374151":"#fff",fontSize:"14px",fontWeight:"500",color:O?"#e2e8f0":"#374151",cursor:"pointer",transition:"all 0.3s ease",minWidth:"120px"},topButton:D=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:D?"rgba(59,130,246,0.1)":O?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:D?"#3b82f6":O?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:D?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:D?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:O?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:O?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:O?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:O?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:O?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:O?"#94a3b8":"#64748b",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"}};return n.jsxs("div",{style:Y.page,children:[n.jsxs("div",{style:Y.headerRow,children:[n.jsx("div",{style:Y.headerLeft,children:n.jsxs("div",{ref:ce,style:Y.toggleViewContainer,onClick:()=>r(D=>!D),onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),className:"floating",children:[n.jsx("span",{style:Y.header,children:_()}),n.jsx(ko,{style:Y.chevron(t,a),size:20})]})}),n.jsxs("div",{style:Y.headerRight,children:[n.jsxs("button",{style:Y.topButton(c==="alerts"),onMouseEnter:()=>u("alerts"),onMouseLeave:()=>u(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(lr,{size:20}),n.jsx("div",{style:Y.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:Y.topButton(c==="profile"),onMouseEnter:()=>{u("profile"),U(!0)},onMouseLeave:()=>u(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Yt,{size:20})}),S&&ie&&n.jsxs("div",{style:Y.profileTooltip,onMouseEnter:()=>U(!0),onMouseLeave:()=>U(!1),children:[n.jsx("div",{style:Y.tooltipArrow}),n.jsxs("div",{style:Y.userInfo,children:[n.jsx("div",{style:Y.avatar,children:Fe(ie.firstName,ie.lastName)}),n.jsxs("div",{style:Y.userDetails,children:[n.jsxs("div",{style:Y.userName,children:[ie.firstName," ",ie.lastName||""]}),n.jsxs("div",{style:Y.userRole,children:[ie.role==="admin"?"Admin":"Member","  ",ie.department]})]})]}),n.jsx("button",{style:Y.themeToggle,onClick:M,children:O?" Light Mode":" Dark Mode"})]})]})]})]}),t&&n.jsx("div",{style:Y.sectionOverlay,onMouseDown:D=>D.stopPropagation(),onClick:D=>D.stopPropagation(),children:n.jsx("div",{children:["reports","team","utilization"].map((D,K)=>n.jsx("div",{style:Y.blurOption(c===`section-${K}`),onClick:Te=>{Te.preventDefault(),Te.stopPropagation(),I(D)},onMouseDown:Te=>{Te.preventDefault(),Te.stopPropagation()},onMouseEnter:()=>u(`section-${K}`),onMouseLeave:()=>u(null),children:D==="reports"?"Personal Reports":D==="team"?"Team Capacity":"Utilization Overview"},D))})}),te&&n.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",color:"#ef4444"},children:[n.jsx(lo,{size:20}),n.jsx("span",{children:te})]}),we?n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"60px",color:O?"#94a3b8":"#64748b"},children:n.jsx(ki,{size:32,style:{animation:"spin 1s linear infinite"}})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:Y.mainContent,children:[n.jsxs("div",{style:Y.avgUtilizationCard,onMouseEnter:()=>u("avg-util"),onMouseLeave:()=>u(null),children:[n.jsx("div",{style:Y.avgUtilizationLabel,children:"Average Utilization"}),n.jsxs("div",{style:Y.avgUtilizationValue,children:[$,"%"]})]}),n.jsxs("div",{style:Y.periodToggleContainer,children:[n.jsxs("div",{style:Y.summaryText,children:["Team utilization for this ",E==="week"?"week":"month"]}),n.jsxs("div",{style:Y.periodToggle,children:[n.jsx("button",{style:Y.periodButton(E==="week"),onClick:()=>P("week"),children:"Week"}),n.jsx("button",{style:Y.periodButton(E==="month"),onClick:()=>P("month"),children:"Month"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{style:Y.filtersContainer,children:[n.jsxs("div",{style:Y.filterGroup,children:[n.jsx("label",{style:Y.filterLabel,children:"Filter by Project:"}),n.jsx(Vt,{value:h,onChange:D=>y(D),options:["All Projects",...N.filter(D=>D!=="all")],placeholder:"Select project...",isDarkMode:O,searchable:!1,compact:!0})]}),n.jsxs("div",{style:Y.filterGroup,children:[n.jsxs("label",{style:Y.filterLabel,children:["Filter by Team (within ",ie==null?void 0:ie.department,"):"]}),n.jsx(Vt,{value:b,onChange:D=>L(D),options:["All Teams",...be.filter(D=>D!=="all")],placeholder:"Select team...",isDarkMode:O,searchable:!1,compact:!0})]})]}),n.jsxs("div",{style:Y.employeeTable,children:[n.jsxs("div",{style:Y.tableHeader,children:[n.jsx("span",{style:Y.tableHeaderText,children:"Employee"}),n.jsx("span",{style:Y.tableHeaderText,children:"Utilization (%)"})]}),n.jsx("div",{style:Y.tableBody,children:H.length>0?H.map((D,K)=>n.jsxs("div",{style:Y.employeeRow(p===`emp-${K}`),onMouseEnter:()=>m(`emp-${K}`),onMouseLeave:()=>m(null),children:[n.jsx("span",{style:Y.employeeName,children:D.name}),n.jsxs("span",{style:Y.utilizationPercent(D.utilization),children:[D.utilization,"%"]})]},K)):n.jsx("div",{style:{padding:"40px",textAlign:"center",color:O?"#94a3b8":"#64748b"},children:"No team members found"})})]})]})]})]})},en=({value:i,onChange:e,label:t,isDarkMode:r,placeholder:a="Select date",disabled:A=!1,compact:c=!1})=>{const[u,p]=f.useState(!1),[m,h]=f.useState(new Date),[y,b]=f.useState(null),[L,S]=f.useState("days"),[U,E]=f.useState(Math.floor(new Date().getFullYear()/12)*12),P=f.useRef(null),O=i?new Date(i):null;f.useEffect(()=>{const B=ee=>{P.current&&!P.current.contains(ee.target)&&(p(!1),S("days"))};return u&&document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[u]);const ve=["January","February","March","April","May","June","July","August","September","October","November","December"],ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Q=["S","M","T","W","T","F","S"],V=m.getMonth(),Z=m.getFullYear(),le=new Date(Z,V,1),$=new Date(Z,V+1,0),ue=le.getDay(),we=$.getDate(),ge=[];for(let B=0;B<ue;B++)ge.push(null);for(let B=1;B<=we;B++)ge.push(B);const te=B=>!B||!O?!1:B===O.getDate()&&V===O.getMonth()&&Z===O.getFullYear(),Me=B=>{const ee=new Date;return B===ee.getDate()&&V===ee.getMonth()&&Z===ee.getFullYear()},ie=B=>{if(!B)return;const ee=new Date(Z,V,B),Pe=ee.getFullYear(),$e=String(ee.getMonth()+1).padStart(2,"0"),kt=String(ee.getDate()).padStart(2,"0");e(`${Pe}-${$e}-${kt}`),p(!1),S("days")},me=B=>{h(new Date(Z,B,1)),S("days")},N=B=>{h(new Date(B,V,1)),S("months")},be=()=>{h(new Date(Z,V-1,1))},H=()=>{h(new Date(Z,V+1,1))},M=()=>{h(new Date(Z-1,V,1))},I=()=>{h(new Date(Z+1,V,1))},_=()=>{E(U-12)},Fe=()=>{E(U+12)},Y=B=>B?new Date(B).toLocaleDateString("en-GB"):"",D=B=>{B.stopPropagation(),e("")},K=()=>{L==="days"?S("months"):L==="months"&&(S("years"),E(Math.floor(Z/12)*12))},Te={container:{position:"relative",width:"100%",marginBottom:c?"16px":"20px"},label:{fontSize:"14px",fontWeight:"600",color:r?"#e2e8f0":"#374151",marginBottom:"8px",display:"block",transition:"all 0.3s ease"},input:B=>({width:"100%",padding:c?"12px 16px":"16px 20px",paddingRight:i?c?"70px":"80px":c?"45px":"50px",borderRadius:"12px",border:B?"2px solid #3b82f6":r?c?"1px solid rgba(75,85,99,0.3)":"2px solid #4b5563":c?"1px solid rgba(226,232,240,0.5)":"2px solid #e2e8f0",fontSize:c?"14px":"16px",transition:"all 0.3s ease",backgroundColor:A?r?"#374151":"#f3f4f6":r?c?"rgba(51,65,85,0.5)":"#4b5563":"#fff",color:r?"#e2e8f0":"#374151",cursor:A?"not-allowed":"pointer",outline:"none",boxShadow:B?"0 0 0 3px rgba(59,130,246,0.1)":"0 2px 4px rgba(0,0,0,0.02)",opacity:A?.6:1,userSelect:"none"}),iconContainer:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",gap:"8px",pointerEvents:"none"},icon:{color:r?"#94a3b8":"#64748b",pointerEvents:"auto",cursor:"pointer",transition:"all 0.2s ease"},clearButton:B=>({color:B?"#ef4444":r?"#94a3b8":"#64748b",pointerEvents:"auto",cursor:"pointer",transition:"all 0.2s ease",transform:B?"scale(1.1)":"scale(1)"}),dropdown:{position:"absolute",top:"calc(100% + 8px)",left:0,zIndex:1e3,backgroundColor:r?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"20px",border:r?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",animation:"slideIn 0.2s ease-out",minWidth:"320px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},monthYear:{fontSize:"16px",fontWeight:"700",color:r?"#e2e8f0":"#1e293b",cursor:"pointer",padding:"6px 12px",borderRadius:"8px",transition:"all 0.2s ease",userSelect:"none"},monthYearHover:{backgroundColor:"rgba(59,130,246,0.1)"},navButton:B=>({background:"none",border:"none",cursor:"pointer",padding:"6px",borderRadius:"6px",color:r?"#94a3b8":"#64748b",transition:"all 0.2s ease",backgroundColor:B?"rgba(59,130,246,0.1)":"transparent",transform:B?"scale(1.1)":"scale(1)",display:"flex",alignItems:"center",justifyContent:"center"}),weekDays:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},weekDay:{textAlign:"center",fontSize:"11px",fontWeight:"600",color:r?"#94a3b8":"#64748b",padding:"6px 0",textTransform:"uppercase"},daysGrid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px"},monthsGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"},yearsGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"},day:(B,ee,Pe,$e)=>({textAlign:"center",padding:"10px",fontSize:"14px",fontWeight:ee||Pe?"700":"500",color:B?ee?"#fff":Pe?"#3b82f6":r?"#e2e8f0":"#374151":"transparent",backgroundColor:ee?"#3b82f6":Pe?"rgba(59,130,246,0.1)":$e&&B?"rgba(59,130,246,0.05)":"transparent",borderRadius:"8px",cursor:B?"pointer":"default",transition:"all 0.2s ease",transform:$e&&B?"scale(1.05)":"scale(1)",boxShadow:ee?"0 4px 12px rgba(59,130,246,0.3)":"none"}),monthItem:(B,ee)=>({textAlign:"center",padding:"12px",fontSize:"14px",fontWeight:B?"700":"500",color:B?"#3b82f6":r?"#e2e8f0":"#374151",backgroundColor:B?"rgba(59,130,246,0.1)":ee?"rgba(59,130,246,0.05)":"transparent",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",transform:ee?"scale(1.05)":"scale(1)"}),yearItem:(B,ee)=>({textAlign:"center",padding:"12px",fontSize:"14px",fontWeight:B?"700":"500",color:B?"#3b82f6":r?"#e2e8f0":"#374151",backgroundColor:B?"rgba(59,130,246,0.1)":ee?"rgba(59,130,246,0.05)":"transparent",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",transform:ee?"scale(1.05)":"scale(1)"})},Ne=()=>n.jsxs(n.Fragment,{children:[n.jsx("div",{style:Te.weekDays,children:Q.map((B,ee)=>n.jsx("div",{style:Te.weekDay,children:B},ee))}),n.jsx("div",{style:Te.daysGrid,children:ge.map((B,ee)=>n.jsx("div",{onClick:()=>ie(B),style:Te.day(B,te(B),Me(B),y===`day-${ee}`),onMouseEnter:()=>B&&b(`day-${ee}`),onMouseLeave:()=>b(null),children:B},ee))})]}),G=()=>n.jsx("div",{style:Te.monthsGrid,children:ce.map((B,ee)=>n.jsx("div",{onClick:()=>me(ee),style:Te.monthItem(ee===V,y===`month-${ee}`),onMouseEnter:()=>b(`month-${ee}`),onMouseLeave:()=>b(null),children:B},ee))}),W=()=>{const B=[];for(let ee=0;ee<12;ee++)B.push(U+ee);return n.jsx("div",{style:Te.yearsGrid,children:B.map(ee=>n.jsx("div",{onClick:()=>N(ee),style:Te.yearItem(ee===Z,y===`year-${ee}`),onMouseEnter:()=>b(`year-${ee}`),onMouseLeave:()=>b(null),children:ee},ee))})},j=()=>L==="days"?`${ve[V]} ${Z}`:L==="months"?Z:`${U} - ${U+11}`,F=()=>{L==="days"?be():L==="months"?M():_()},Xe=()=>{L==="days"?H():L==="months"?I():Fe()};return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `}),n.jsxs("div",{style:Te.container,ref:P,children:[t&&n.jsx("label",{style:Te.label,children:t}),n.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[n.jsx("input",{type:"text",value:Y(i),placeholder:a,readOnly:!0,disabled:A,onClick:()=>!A&&p(!u),style:Te.input(u)}),n.jsxs("div",{style:Te.iconContainer,children:[i&&!A&&n.jsx(dn,{size:18,style:Te.clearButton(y==="clear"),onMouseEnter:()=>b("clear"),onMouseLeave:()=>b(null),onClick:D}),n.jsx(uo,{size:18,style:Te.icon})]})]}),u&&!A&&n.jsxs("div",{style:Te.dropdown,children:[n.jsxs("div",{style:Te.header,children:[n.jsx("button",{onClick:F,style:Te.navButton(y==="prev"),onMouseEnter:()=>b("prev"),onMouseLeave:()=>b(null),children:n.jsx(eb,{size:18})}),n.jsx("div",{style:{...Te.monthYear,...y==="header"?Te.monthYearHover:{}},onClick:K,onMouseEnter:()=>b("header"),onMouseLeave:()=>b(null),children:j()}),n.jsx("button",{onClick:Xe,style:Te.navButton(y==="next"),onMouseEnter:()=>b("next"),onMouseLeave:()=>b(null),children:n.jsx(Uc,{size:18})})]}),L==="days"&&Ne(),L==="months"&&G(),L==="years"&&W()]})]})]})},Pp=({value:i,suffix:e="",decimals:t=0})=>{const[r,a]=f.useState(0);return f.useEffect(()=>{let A=0;const c=i||0,p=c/(1e3/16),m=setInterval(()=>{A+=p,A>=c?(a(c),clearInterval(m)):a(A)},16);return()=>clearInterval(m)},[i]),n.jsxs(n.Fragment,{children:[t>0?r.toFixed(t):Math.floor(r),e]})},IE=({isDarkMode:i})=>n.jsx("div",{style:{backgroundColor:i?"#374151":"#fff",borderRadius:"24px",padding:"40px",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",border:i?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)"},children:[1,2,3].map(e=>n.jsx("div",{style:{height:"60px",background:i?"linear-gradient(90deg, #4b5563 0%, #6b7280 50%, #4b5563 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"12px",marginBottom:"24px"}},e))}),Hx=()=>n.jsx("div",{style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid #fff",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),EE=({message:i,onClose:e})=>(f.useEffect(()=>{const t=setTimeout(e,3e3);return()=>clearTimeout(t)},[e]),n.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#10b981",color:"#fff",padding:"16px 24px",borderRadius:"12px",boxShadow:"0 8px 25px rgba(16,185,129,0.3)",display:"flex",alignItems:"center",gap:"12px",zIndex:9999,animation:"slideInRight 0.3s ease-out"},children:[n.jsx("div",{style:{fontSize:"24px"},children:""}),n.jsx("div",{style:{fontWeight:"600"},children:i})]})),kE=()=>{const[i,e]=f.useState("actuals"),[t,r]=f.useState(!1),[a,A]=f.useState(!1),[c,u]=f.useState(null),[p,m]=f.useState(!1),[h,y]=f.useState("Project"),[b,L]=f.useState(!1),[S,U]=f.useState(""),[E,P]=f.useState({startDate:null,endDate:null,project:null,hours:null}),[O,ve]=f.useState([]),[ce,Q]=f.useState([]),[V,Z]=f.useState({matching:{matchedActivities:[],totalMatchedHours:0,summary:""}}),[le,$]=f.useState(!1),[ue,we]=f.useState(!1),[ge,te]=f.useState(""),[Me,ie]=f.useState(!1),[me,N]=f.useState(""),[be,H]=f.useState(""),[M,I]=f.useState(""),[_,Fe]=f.useState("0.00"),[Y,D]=f.useState(null),[K,Te]=f.useState([]),[Ne]=f.useState(["L1 Operations","L2 Operations"]),[G]=f.useState(["Annual Leave","Half-Day Leave","Hospitalization Leave","No Pay Leave","Birthday Leave","Medical Leave","Off-in-Lieu"]),[W,j]=f.useState([]),[F,Xe]=f.useState([]),[B,ee]=f.useState(!1),[Pe,$e]=f.useState(!0),[kt,pt]=f.useState(null),[Ut,Lt]=f.useState([]),[se,Tt]=f.useState(null),[ne,fe]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),Qe=f.useRef(null),[w,qe]=f.useState({top:64,left:0}),ft=async()=>{try{const v=await ke("/user/profile",{credentials:"include"});if(v.ok){const Ae=await v.json();if(D(Ae),Ae.assignedProjects&&Ae.assignedProjects.length>0){const Ue=Ae.assignedProjects.filter(Ke=>Ke.projectType==="Project").map(Ke=>Ke.name),et=Ae.assignedProjects.filter(Ke=>Ke.projectType==="Operations").map(Ke=>Ke.name);ve(Ue),Q(et),console.log(" User assigned projects:",Ue),console.log(" User assigned operations:",et)}}else pt("Failed to fetch user profile")}catch(v){console.error("Error fetching user profile:",v),pt("Error fetching user profile")}},Et=async()=>{try{const v=await ke("/actuals/capacity",{credentials:"include"});if(v.ok){const Ae=await v.json();Tt(Ae)}}catch(v){console.error(" Error fetching capacity:",v)}};f.useEffect(()=>{console.log(" AdminActuals - isSectionOpen state changed to:",t)},[t]),f.useEffect(()=>{if(Qe.current&&t){const v=Qe.current.getBoundingClientRect();qe({top:v.bottom+4,left:v.left})}},[t]),f.useEffect(()=>{const v=Ae=>{Qe.current&&!Qe.current.contains(Ae.target)&&r(!1)};return t&&document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[t]),f.useEffect(()=>{const v=document.createElement("style");return v.textContent=`
      /* Target common parent container classes */
      body, html, #root, .app, .main-content, .page-container, .content-wrapper {
        background: ${ne?"linear-gradient(135deg, #1e293b 0%, #334155 100%) !important":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%) !important"};
        margin: 0 !important;
        padding: 0 !important;
      }
      
      /* Target any div that might be the white container */
      body > div, #root > div, .app > div {
        background: transparent !important;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      @keyframes sparkle {
        0%, 100% {
          transform: rotate(0deg) scale(1);
        }
        50% {
          transform: rotate(5deg) scale(1.1);
        }
      }

      @keyframes sparkle {
  0%, 100% {
    transform: rotate(0deg) scale(1);
  }
  50% {
    transform: rotate(5deg) scale(1.1);
  }
}

@keyframes slideInRight {
  from {
    transform: translateX(400px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
    `,document.head.appendChild(v),()=>{document.head.removeChild(v)}},[ne]),f.useEffect(()=>{const v=document.createElement("style");return v.textContent=`
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .ai-card-fade {
      animation: fadeIn 0.6s ease;
    }
  `,document.head.appendChild(v),()=>document.head.removeChild(v)},[]),f.useEffect(()=>{(async()=>{$e(!0),await Promise.all([ft(),pe(),R(),Ce(),Et()]),$e(!1)})()},[]),f.useEffect(()=>{if(M){const Ae=(parseFloat(M)/8).toFixed(2);Fe(Ae)}else Fe("0.00")},[M]),f.useEffect(()=>{if(h!=="Admin/Others"||!me||!be||!ge)return;const v=new Date(me),Ae=new Date(be);let Ue=0;for(let Ke=new Date(v);Ke<=Ae;Ke.setDate(Ke.getDate()+1)){const yt=Ke.getDay();yt!==0&&yt!==6&&Ue++}let et=0;ge==="Half-Day Leave"?et=Ue*4:et=Ue*8,I(et.toString())},[h,ge,me,be]),f.useEffect(()=>{re()},[me,be]),f.useEffect(()=>{kt&&(me||be||ge)&&pt(null)},[me,be,ge]),f.useEffect(()=>{kt&&(me||be||ge)&&pt(null)},[me,be,ge]),f.useEffect(()=>{P({startDate:me?"valid":null,endDate:be?"valid":null,project:ge?"valid":null,hours:M&&parseFloat(M)>0?"valid":null})},[me,be,ge,M]);const pe=async()=>{try{console.log(" Fetching projects from /plan/master...");const v=await ke("/plan/master",{credentials:"include"});if(console.log(" Response status:",v.status),v.ok){const Ae=await v.json();console.log(" Raw data from API:",Ae);const Ue=Ae.map(Ke=>Ke.project).filter(Boolean);console.log(" Extracted project names:",Ue);const et=[...new Set(Ue)];console.log(" Unique projects:",et),Te(et)}else console.error(" Failed to fetch projects, status:",v.status)}catch(v){console.error(" Error fetching projects:",v)}},R=async()=>{try{const v=await ke("/actuals",{credentials:"include"});if(v.ok){const Ae=await v.json();j(Ae)}}catch(v){console.error("Error fetching actuals:",v)}},Ce=async()=>{try{const v=new Date().getFullYear(),Ae=await ke(`/actuals/holidays?year=${v}`,{credentials:"include"});if(Ae.ok){const Ue=await Ae.json();Lt(Ue),console.log(" Holidays loaded:",Ue)}}catch(v){console.error(" Error fetching holidays:",v)}},re=async()=>{if(!(!me||!be))try{const v=await ke(`/actuals/system?startDate=${me}&endDate=${be}`,{credentials:"include"});if(v.ok){const Ae=await v.json();Xe(Ae)}}catch(v){console.error(" Error fetching system actuals:",v)}},xe=v=>{console.log(" AdminActuals - handleSectionChange called with:",v),e(v),r(!1),v==="view-logs"?(console.log(" AdminActuals - Navigating to view logs page"),window.location.href="/adminviewlogs"):console.log(" AdminActuals - Staying on current page for section:",v)},Ze=()=>i==="actuals"?"Actuals":"View Logs",J=async()=>{var yt;if(console.log(" handleAdd called"),!me||!be||!M){alert("Please fill in dates and hours");return}const v=new Date(me),Ae=new Date(be),Ue=Math.ceil((Ae-v)/(1e3*60*60*24))+1,et=Ue*24,Ke=parseFloat(M);if(Ke>et){const It=v.toLocaleDateString("en-GB"),tt=Ae.toLocaleDateString("en-GB");pt(` Hours Exceed Maximum Allowed!

Date Range: ${It} - ${tt}
Total Days: ${Ue} day${Ue!==1?"s":""}
Maximum Allowed: ${et} hours (${Ue}  24h)
You Entered: ${Ke.toFixed(1)} hours

Please reduce your hours to ${et} or less.`),window.scrollTo({top:0,behavior:"smooth"});return}ee(!0),pt(null);try{if(Me&&((yt=V==null?void 0:V.matching)!=null&&yt.matchedActivities)){console.log(" Multi-project mode: Creating separate entries");const It={};V.matching.matchedActivities.forEach(st=>{const ye=st.projectName;It[ye]||(It[ye]=0),It[ye]+=st.hours}),console.log(" Hours breakdown by project:",It);const tt=Object.entries(It).map(async([st,ye])=>{const ae={category:h,project:st,startDate:me,endDate:be,hours:parseFloat(ye.toFixed(2))};console.log(` Creating entry for ${st}: ${ye}h`);const ze=await ke("/actuals",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ae)});if(!ze.ok){const Ye=await ze.json();throw new Error(`Failed to add entry for ${st}: ${Ye.message||Ye.error}`)}return ze.json()});await Promise.all(tt),U(` Successfully created ${Object.keys(It).length} actuals entries!`),L(!0)}else{if(!ge){alert("Please select a project"),ee(!1);return}console.log(" Single project mode: Creating one entry");const It={category:h,project:ge,startDate:me,endDate:be,hours:parseFloat(M)},tt=await ke("/actuals",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(It)});if(!tt.ok){const st=await tt.json();if(tt.status===409){pt(st.error||st.message),window.scrollTo({top:0,behavior:"smooth"}),ee(!1);return}else throw new Error(st.message||"Failed to add actual entry")}U(" Actual entry added successfully!"),L(!0)}te(""),N(""),H(""),I(""),Fe("0.00"),Z(null),ie(!1),pt(null),R()}catch(It){console.error(" Add error:",It),pt("Error adding actual entry: "+It.message),window.scrollTo({top:0,behavior:"smooth"})}finally{ee(!1)}},qt=async()=>{var v;if(!me||!be){alert("Please select date range first");return}$(!0),pt(null);try{let Ae;if(ge?Ae=[ge]:Ae=h==="Project"?O:h==="Operations"?ce:[],!Ae||Ae.length===0){alert("No projects to match. Please select a project or ensure you have assigned projects."),$(!1);return}const Ue={projectNames:Ae,startDate:me,endDate:be,category:h};console.log(" Sending match request:",Ue);const et=await ke("/actuals/match-activities",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ue)});if(!et.ok)throw new Error("Failed to match activities");const Ke=await et.json();Z(Ke),ie(!ge),(v=Ke.matching)!=null&&v.totalMatchedHours&&I(Ke.matching.totalMatchedHours.toString())}catch(Ae){console.error(" Match activities error:",Ae),pt("Failed to match activities: "+Ae.message),window.scrollTo({top:0,behavior:"smooth"})}finally{$(!1)}},He=()=>{fe(!ne),m(!1)},bn=()=>{switch(h){case"Project":const v=new Set(O),Ae=K.filter(et=>v.has(et)),Ue=K.filter(et=>!v.has(et));return[...Ae,...Ue];case"Operations":return ce;case"Admin/Others":return G;default:return[]}},at=()=>{switch(h){case"Project":return"Project:";case"Operations":return"Operation:";case"Admin/Others":return"Leave Type:";default:return"Select:"}},k={page:{minHeight:"100vh",padding:"30px 40px",background:ne?"linear-gradient(135deg, rgba(30,41,59,0.95) 0%, rgba(15,23,42,0.95) 100%)":"linear-gradient(135deg, #f8fafc 0%, #eef2ff 60%, #e0e7ff 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease",display:"flex",flexDirection:"column"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"40px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"32px",fontWeight:"800",color:ne?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},toggleViewContainer:{fontSize:"20px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:ne?"#e2e8f0":"#1e293b"},chevron:(v,Ae)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:v||Ae?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:v||Ae?"#3b82f6":"#64748b"}),sectionOverlay:{position:"fixed",top:w.top,left:w.left,zIndex:999,backgroundColor:ne?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:ne?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},blurOption:v=>({backgroundColor:v?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:ne?"#e2e8f0":"#374151",transform:v?"translateX(4px)":"translateX(0)",borderLeft:v?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),topButton:v=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:v?"rgba(59,130,246,0.1)":ne?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:v?"#3b82f6":ne?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:v?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:v?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:ne?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:ne?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:ne?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:ne?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:ne?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:ne?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:ne?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:ne?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:ne?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},contentArea:{display:"flex",gap:"40px",alignItems:"flex-start",width:"100%",margin:"0"},leftSection:{flex:"1 1 65%",minWidth:"600px"},rightSection:{flex:"1 1 30%",minWidth:"400px",maxWidth:"550px"},categoryTabs:{display:"flex",gap:"20px",marginBottom:"40px",justifyContent:"flex-start",flexWrap:"wrap"},categoryTab:(v,Ae)=>({padding:"16px 40px",borderRadius:"50px",border:v?"2px solid #3b82f6":ne?"2px solid #374151":"2px solid #e2e8f0",backgroundColor:v?"rgba(59,130,246,0.1)":Ae?"rgba(59,130,246,0.05)":ne?"#374151":"#fff",color:v?"#3b82f6":ne?"#e2e8f0":"#64748b",fontWeight:"600",fontSize:"16px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:Ae?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",boxShadow:Ae?"0 8px 25px rgba(59,130,246,0.15)":"0 2px 8px rgba(0,0,0,0.05)",userSelect:"none",minWidth:"140px",textAlign:"center"}),formContainer:{backgroundColor:ne?"#374151":"#fff",borderRadius:"24px",padding:"40px",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",border:ne?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)",backdropFilter:"blur(10px)",width:"100%",transition:"all 0.3s ease"},formRow:{display:"flex",gap:"24px",marginBottom:"24px",alignItems:"flex-end",width:"100%"},formGroup:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},label:{fontSize:"14px",fontWeight:"600",color:ne?"#e2e8f0":"#374151",marginBottom:"4px",transition:"all 0.3s ease"},input:v=>({padding:"16px 20px",borderRadius:"12px",border:v?"2px solid #3b82f6":ne?"2px solid #4b5563":"2px solid #e2e8f0",fontSize:"16px",transition:"all 0.3s ease",backgroundColor:ne?"#4b5563":"#fff",color:ne?"#e2e8f0":"#374151",outline:"none",boxShadow:v?"0 0 0 3px rgba(59,130,246,0.1)":"0 2px 4px rgba(0,0,0,0.02)"}),select:v=>({padding:"16px 20px",borderRadius:"12px",border:v?"2px solid #3b82f6":ne?"2px solid #4b5563":"2px solid #e2e8f0",fontSize:"16px",transition:"all 0.3s ease",backgroundColor:ne?"#4b5563":"#fff",color:ne?"#e2e8f0":"#374151",outline:"none",cursor:"pointer",boxShadow:v?"0 0 0 3px rgba(59,130,246,0.1)":"0 2px 4px rgba(0,0,0,0.02)"}),autoCalculated:{fontSize:"12px",color:ne?"#94a3b8":"#64748b",fontStyle:"italic",marginTop:"4px",transition:"all 0.3s ease"},buttonRow:{display:"flex",gap:"20px",marginTop:"40px",width:"100%"},recommendButton:v=>({flex:1,padding:"20px 32px",borderRadius:"16px",border:"2px solid #f59e0b",backgroundColor:v?"#f59e0b":"transparent",color:v?"#fff":"#f59e0b",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",transform:v?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",boxShadow:v?"0 8px 25px rgba(245,158,11,0.25)":"0 2px 8px rgba(0,0,0,0.05)",minHeight:"60px",opacity:B?.5:1,pointerEvents:B?"none":"auto"}),addButton:v=>({flex:1,padding:"20px 32px",borderRadius:"16px",border:"2px solid #10b981",backgroundColor:v?"#10b981":"transparent",color:v?"#fff":"#10b981",fontSize:"18px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:v?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",boxShadow:v?"0 8px 25px rgba(16,185,129,0.25)":"0 2px 8px rgba(0,0,0,0.05)",minHeight:"60px"}),aiCard:{background:ne?"linear-gradient(135deg, rgba(30,41,59,0.95) 0%, rgba(15,23,42,0.95) 100%)":"linear-gradient(135deg, rgba(239,246,255,0.95) 0%, rgba(224,242,254,0.95) 100%)",borderRadius:"20px",padding:"32px",border:ne?"1px solid rgba(99,102,241,0.35)":"1px solid rgba(79,70,229,0.35)",boxShadow:ne?"0 20px 50px rgba(99,102,241,0.15)":"0 24px 60px rgba(79,70,229,0.18)",backdropFilter:"blur(20px)",position:"relative",overflow:"hidden",minHeight:"350px"},aiCardHeader:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},aiIcon:{color:"#6366f1",animation:"sparkle 2s ease-in-out infinite"},aiDescription:{fontSize:"14px",color:ne?"#cbd5e1":"#334155",lineHeight:"1.6",marginBottom:"16px"},aiTitle:{fontSize:"18px",fontWeight:"700",color:ne?"#e5e7eb":"#1e293b"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},aiFeatures:{fontSize:"12px",color:ne?"#e5e7eb":"#1e293b",lineHeight:"1.4"},errorMessage:{backgroundColor:ne?"rgba(239,68,68,0.15)":"#fee2e2",color:ne?"#fca5a5":"#dc2626",padding:"16px 20px",borderRadius:"12px",marginBottom:"20px",fontSize:"14px",border:ne?"2px solid rgba(239,68,68,0.3)":"2px solid #fecaca",fontWeight:"500",lineHeight:"1.6",whiteSpace:"pre-line",boxShadow:"0 4px 12px rgba(239,68,68,0.15)"},manDaysDisplay:{fontSize:"14px",color:"#3b82f6",fontWeight:"600",marginTop:"4px"}};return n.jsxs("div",{style:k.page,children:[b&&n.jsx(EE,{message:S,onClose:()=>L(!1)}),n.jsxs("div",{style:k.headerRow,children:[n.jsx("div",{style:k.headerLeft,children:n.jsxs("div",{ref:Qe,style:k.toggleViewContainer,onClick:()=>{console.log(" AdminActuals - Header dropdown clicked, current state:",t),r(v=>!v)},onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),className:"floating",children:[n.jsx("span",{style:k.header,children:Ze()}),n.jsx(ko,{style:k.chevron(t,a),size:22})]})}),n.jsxs("div",{style:k.headerRight,children:[n.jsxs("button",{style:k.topButton(c==="alerts"),onMouseEnter:()=>u("alerts"),onMouseLeave:()=>u(null),onClick:()=>{console.log(" Alerts clicked - Navigating to alerts page"),window.location.href="/adminalerts"},children:[n.jsx(lr,{size:20}),n.jsx("div",{style:k.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:k.topButton(c==="profile"),onMouseEnter:()=>{u("profile"),m(!0)},onMouseLeave:()=>{u(null)},onClick:()=>{console.log(" Profile clicked - Navigating to profile page"),window.location.href="/adminprofile"},children:n.jsx(Yt,{size:20})}),p&&Y&&n.jsxs("div",{style:k.profileTooltip,onMouseEnter:()=>{m(!0)},onMouseLeave:()=>{m(!1)},children:[n.jsx("div",{style:k.tooltipArrow}),n.jsxs("div",{style:k.userInfo,children:[n.jsxs("div",{style:k.avatar,children:[Y.firstName[0],Y.lastName[0]]}),n.jsxs("div",{style:k.userDetails,children:[n.jsxs("div",{style:k.userName,children:[Y.firstName," ",Y.lastName]}),n.jsxs("div",{style:k.userRole,children:[Y.role,"  ",Y.department]})]})]}),n.jsxs("div",{style:k.userStats,children:[n.jsxs("div",{style:k.tooltipStatItem,children:[n.jsx("div",{style:k.tooltipStatNumber,children:W.reduce((v,Ae)=>v+parseFloat(Ae.Hours||0),0).toFixed(1)}),n.jsx("div",{style:k.tooltipStatLabel,children:"Hours"})]}),n.jsxs("div",{style:k.tooltipStatItem,children:[n.jsx("div",{style:k.tooltipStatNumber,children:W.filter(v=>v.Category==="Project").length}),n.jsx("div",{style:k.tooltipStatLabel,children:"Projects"})]}),n.jsxs("div",{style:k.tooltipStatItem,children:[n.jsx("div",{style:k.tooltipStatNumber,children:(se==null?void 0:se.utilizationPercentage)!==void 0?`${Number(se.utilizationPercentage).toFixed(0)}%`:"--"}),n.jsx("div",{style:k.tooltipStatLabel,children:"Capacity"})]})]}),n.jsx("button",{style:k.themeToggle,onClick:He,children:ne?" Light Mode":" Dark Mode"})]})]})]})]}),t&&n.jsx("div",{style:k.sectionOverlay,onMouseDown:v=>{console.log(" AdminActuals - Dropdown container mousedown"),v.stopPropagation()},onClick:v=>{console.log(" AdminActuals - Dropdown container click"),v.stopPropagation()},children:n.jsx("div",{children:["actuals","view-logs"].map((v,Ae)=>n.jsx("div",{style:k.blurOption(c===`section-${Ae}`),onClick:Ue=>{console.log(" AdminActuals - Dropdown option clicked:",v),Ue.preventDefault(),Ue.stopPropagation(),xe(v)},onMouseDown:Ue=>{Ue.preventDefault(),Ue.stopPropagation()},onMouseEnter:()=>u(`section-${Ae}`),onMouseLeave:()=>u(null),children:v==="actuals"?"Actuals":"View Logs"},v))})}),n.jsxs("div",{style:k.contentArea,children:[n.jsxs("div",{style:k.leftSection,children:[n.jsx("div",{style:k.categoryTabs,children:["Project","Operations","Admin/Others"].map(v=>n.jsx("div",{style:k.categoryTab(h===v,c===`category-${v}`),onClick:()=>{y(v),te("")},onMouseEnter:()=>u(`category-${v}`),onMouseLeave:()=>u(null),children:v},v))}),Pe?n.jsx(IE,{isDarkMode:ne}):n.jsxs("div",{style:k.formContainer,children:[kt&&n.jsx("div",{style:k.errorMessage,children:kt}),n.jsxs("div",{style:k.formRow,children:[n.jsx("div",{style:k.formGroup,children:n.jsx(en,{value:me,onChange:N,label:n.jsxs("span",{children:["Start Date:",E.startDate==="valid"&&n.jsx("span",{style:{color:"#10b981",marginLeft:"8px",fontSize:"16px"},children:""})]}),isDarkMode:ne,placeholder:"Select start date"})}),n.jsx("div",{style:k.formGroup,children:n.jsx(en,{value:be,onChange:H,label:n.jsxs("span",{children:["End Date:",E.endDate==="valid"&&n.jsx("span",{style:{color:"#10b981",marginLeft:"8px",fontSize:"16px"},children:""})]}),isDarkMode:ne,placeholder:"Select end date"})})]}),n.jsx("div",{style:k.formRow,children:n.jsxs("div",{style:k.formGroup,children:[n.jsx(Vt,{value:ge,onChange:v=>{te(v),we(!1)},label:n.jsxs("span",{children:[at(),E.project==="valid"&&n.jsx("span",{style:{color:"#10b981",marginLeft:"8px",fontSize:"16px"},children:""})]}),placeholder:O.length>0&&h==="Project"?"Select your project...":ce.length>0&&h==="Operations"?"Select your operation...":`Select ${h.toLowerCase()}...`,isDarkMode:ne,searchable:h==="Project"&&K.length>10,groupedOptions:h==="Project"&&O.length>0?{"Your Assigned Projects":O,"All Projects":K.filter(v=>!O.includes(v))}:null,options:h!=="Project"?bn():null,allowCustom:!0,customPlaceholder:h==="Project"?"Enter custom project name":h==="Operations"?"Enter custom operation":"Enter custom leave type"}),n.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"6px"},children:["Select from list or choose ",n.jsx("strong",{children:"Custom / Other"})," to enter your own"]})]})}),n.jsx("div",{style:k.formRow,children:n.jsxs("div",{style:k.formGroup,children:[n.jsxs("label",{style:k.label,children:["Hours:",E.hours==="valid"&&n.jsx("span",{style:{color:"#10b981",marginLeft:"8px",fontSize:"16px"},children:""})]}),n.jsx("input",{type:"number",value:M,onChange:v=>I(v.target.value),style:k.input(!1),disabled:h==="Admin/Others",placeholder:h==="Admin/Others"?"Auto-calculated":"Enter hours worked"}),h!=="Admin/Others"&&n.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginTop:"6px"},children:"Enter expected hours  system will adjust if capacity is exceeded"}),F.length>0&&n.jsxs("div",{style:{marginTop:"12px",padding:"14px",borderRadius:"12px",backgroundColor:ne?"rgba(30,41,59,0.7)":"rgba(248,250,252,0.9)",border:ne?"1px solid rgba(99,102,241,0.25)":"1px solid rgba(226,232,240,0.8)",color:ne?"#e5e7eb":"#1e293b",fontSize:"12px"},children:[n.jsx("strong",{style:{color:ne?"#e0e7ff":"#1e3a8a"},children:"System-detected activity (ManicTime):"}),F.slice(0,6).map((v,Ae)=>n.jsxs("div",{style:{marginTop:"4px"},children:[" ",v.activityName,"  ",v.hours.toFixed(2),"h"]},Ae)),F.length>6&&n.jsxs("div",{style:{fontStyle:"italic",marginTop:"4px"},children:["+ ",F.length-6," more"]})]}),h==="Admin/Others"?n.jsx("div",{style:k.autoCalculated,children:"Hours auto-calculated:  Half-Day = 4h/day  Other Leave = 8h/day (Weekends & public holidays excluded)"}):n.jsx("div",{style:k.autoCalculated,children:"(validated against remaining capacity, leave & public holidays)"}),n.jsxs("div",{style:k.manDaysDisplay,children:[" ",n.jsx(Pp,{value:parseFloat(_),decimals:2})," man-days"]})]})}),n.jsxs("div",{style:k.buttonRow,children:[n.jsx("button",{style:k.recommendButton(c==="match"),onMouseEnter:()=>u("match"),onMouseLeave:()=>u(null),onClick:qt,disabled:B||le,children:le?n.jsxs(n.Fragment,{children:[n.jsx(Hx,{}),n.jsx("span",{children:"Matching..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(co,{size:20}),n.jsx("span",{children:"Match Activities"})]})}),n.jsx("button",{style:k.addButton(c==="add"),onMouseEnter:()=>u("add"),onMouseLeave:()=>u(null),onClick:J,disabled:B,children:B?n.jsxs(n.Fragment,{children:[n.jsx(Hx,{}),n.jsx("span",{children:"Adding..."})]}):"Add"})]})]})]}),n.jsx("div",{style:k.rightSection,children:n.jsxs("div",{style:k.aiCard,className:"ai-card-fade",children:[n.jsx("div",{style:{position:"absolute",inset:0,background:ne?"radial-gradient(circle at top right, rgba(99,102,241,0.18), transparent 60%)":"radial-gradient(circle at top right, rgba(59,130,246,0.18), transparent 60%)",pointerEvents:"none"}}),n.jsxs("div",{style:k.aiCardHeader,children:[n.jsx(co,{size:20,style:k.aiIcon}),n.jsx("span",{style:k.aiTitle,children:"AI Activity Matching"})]}),le?n.jsx("div",{style:{color:ne?"#e0e7ff":"#1e3a8a",fontSize:"14px",fontWeight:"500"},children:" Analyzing your ManicTime activities..."}):V?n.jsxs("div",{children:[n.jsx("p",{style:{fontSize:"14px",color:ne?"#e5e7eb":"#1e293b",marginBottom:"12px"},children:n.jsx("strong",{children:V.matching.summary})}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:"700",color:ne?"#e5e7eb":"#1e293b",marginBottom:"16px"},children:["Total Matched: ",n.jsx(Pp,{value:V.matching.totalMatchedHours})," hours"]}),(()=>{const v={};return V.matching.matchedActivities.forEach(Ae=>{const Ue=Ae.projectName||"Unassigned";v[Ue]||(v[Ue]=[]),v[Ue].push(Ae)}),Object.entries(v).map(([Ae,Ue])=>{const et=Ue.reduce((Ke,yt)=>Ke+yt.hours,0);return n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px",padding:"10px 14px",backgroundColor:ne?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.1)",borderRadius:"10px",border:`2px solid ${ne?"rgba(59,130,246,0.3)":"rgba(59,130,246,0.2)"}`},children:[n.jsx(nb,{size:18,style:{color:"#3b82f6"}}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:ne?"#e5e7eb":"#1e293b",flex:1},children:Ae}),n.jsxs("span",{style:{fontSize:"13px",fontWeight:"700",color:"#3b82f6",backgroundColor:ne?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.15)",padding:"4px 10px",borderRadius:"8px"},children:[n.jsx(Pp,{value:et,decimals:2}),"h"]})]}),Ue.map((Ke,yt)=>n.jsxs("div",{style:{backgroundColor:ne?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.9)",borderRadius:"10px",padding:"12px 14px",marginBottom:"8px",marginLeft:"26px",border:"1px solid rgba(99,102,241,0.2)",boxShadow:"0 2px 8px rgba(99,102,241,0.06)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[n.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:ne?"#e5e7eb":"#1e293b"},children:Ke.activityName}),n.jsx("span",{style:{display:"inline-block",padding:"3px 6px",borderRadius:"6px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",backgroundColor:Ke.confidence==="high"?"#10b98120":Ke.confidence==="medium"?"#f59e0b20":"#ef444420",color:Ke.confidence==="high"?"#10b981":Ke.confidence==="medium"?"#f59e0b":"#ef4444"},children:Ke.confidence})]}),n.jsxs("div",{style:{fontSize:"11px",color:ne?"#cbd5e1":"#475569",marginBottom:"4px"},children:[Ke.hours," hours"]}),n.jsx("div",{style:{fontSize:"10px",color:ne?"#9ca3af":"#64748b",fontStyle:"italic"},children:Ke.reason})]},yt))]},Ae)})})()]}):n.jsxs("div",{style:k.aiDescription,children:[n.jsx("strong",{children:"Two Ways to Use:"}),n.jsxs("div",{style:k.aiFeatures,children:[n.jsx("br",{}),n.jsx("strong",{children:"1. Match All Projects:"}),n.jsx("br",{})," Leave project field empty",n.jsx("br",{}),' Click "Match Activities"',n.jsx("br",{})," AI matches ALL assigned projects",n.jsx("br",{})," One-click adds all entries",n.jsx("br",{}),n.jsx("br",{}),n.jsx("strong",{children:"2. Single Project:"}),n.jsx("br",{})," Select specific project",n.jsx("br",{})," Match & add as usual"]})]})]})})]})]})},Hp=({value:i,decimals:e=0})=>{const[t,r]=f.useState(0);return f.useEffect(()=>{let a=0;const A=i||0,u=A/(1e3/16),p=setInterval(()=>{a+=u,a>=A?(r(A),clearInterval(p)):r(a)},16);return()=>clearInterval(p)},[i]),n.jsx(n.Fragment,{children:e>0?t.toFixed(e):Math.floor(t)})},TE=({isDarkMode:i})=>n.jsx("div",{style:{backgroundColor:i?"#374151":"#fff",borderRadius:"20px",padding:"24px",border:i?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)"},children:[60,80,40,100].map((e,t)=>n.jsx("div",{style:{height:t===3?"60px":"20px",width:`${e}%`,background:i?"linear-gradient(90deg, #4b5563 0%, #6b7280 50%, #4b5563 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"8px",marginBottom:"12px"}},t))}),jE=()=>{const[i,e]=f.useState("view-logs"),[t,r]=f.useState(!1),[a,A]=f.useState(!1),[c,u]=f.useState(null),[p,m]=f.useState(null),[h,y]=f.useState(!1),[b,L]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[S,U]=f.useState("All Projects"),[E,P]=f.useState("All Categories"),[O,ve]=f.useState(""),[ce,Q]=f.useState("newest"),[V,Z]=f.useState([]),[le,$]=f.useState(!0),[ue,we]=f.useState(null),[ge,te]=f.useState({weeklyHours:0,capacityUtilization:0,projectHours:0}),[Me,ie]=f.useState({firstName:"",lastName:"",role:"",email:"",department:""}),me=f.useRef(null),[N,be]=f.useState({top:64,left:0});f.useEffect(()=>{(async()=>{try{$(!0);const F=await ke("/actuals",{credentials:"include"});if(!F.ok)throw new Error("Failed to fetch actuals");const Xe=await F.json();Z(Xe),we(null)}catch(F){console.error("Error fetching actuals:",F),we(F.message)}finally{$(!1)}})()},[]),f.useEffect(()=>{(async()=>{try{const F=await ke("/user/profile",{credentials:"include"});if(!F.ok)throw new Error("Failed to fetch profile");const Xe=await F.json();ie(Xe)}catch(F){console.error("Error fetching profile:",F)}})()},[]),f.useEffect(()=>{(async()=>{try{const F=await ke("/actuals/stats",{credentials:"include"});if(!F.ok)throw new Error("Failed to fetch stats");const Xe=await F.json();te(Xe)}catch(F){console.error("Error fetching stats:",F)}})()},[]),f.useEffect(()=>{if(me.current&&t){const j=me.current.getBoundingClientRect();be({top:j.bottom+4,left:j.left})}},[t]),f.useEffect(()=>{const j=F=>{me.current&&!me.current.contains(F.target)&&r(!1)};return t&&document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[t]);const H=j=>{const F={JRET:"#3b82f6",MaxCap:"#10b981",Analytics:"#f59e0b",Training:"#8b5cf6",Research:"#ec4899",Development:"#06b6d4",default:"#64748b"};return F[j]||F.default},M=j=>{const F={Project:"#3b82f6",Admin:"#10b981",Training:"#f59e0b",Meeting:"#8b5cf6",Leave:"#ef4444",default:"#64748b"};return F[j]||F.default},I=V.map(j=>({id:j.Id,date:new Date(j.StartDate).toLocaleDateString("en-GB"),dateEnd:new Date(j.EndDate).toLocaleDateString("en-GB"),project:j.Project||j.Category,projectColor:j.Project?H(j.Project):M(j.Category),category:j.Category,hours:Number(j.Hours)||0,manDays:(parseFloat(j.Hours)/8).toFixed(2),createdAt:new Date(j.CreatedAt).toLocaleString("en-GB")})),_=["All Projects",...new Set(I.map(j=>j.project).filter(Boolean))],Fe=["All Categories",...new Set(I.map(j=>j.category))],D=[...I.filter(j=>(O===""||j.project.toLowerCase().includes(O.toLowerCase())||j.category.toLowerCase().includes(O.toLowerCase())||j.id.toString().includes(O))&&(S==="All Projects"||j.project===S)&&(E==="All Categories"||j.category===E))].sort((j,F)=>{switch(ce){case"newest":return new Date(F.createdAt)-new Date(j.createdAt);case"oldest":return new Date(j.createdAt)-new Date(F.createdAt);case"most-hours":return F.hours-j.hours;case"least-hours":return j.hours-F.hours;case"project-az":return j.project.localeCompare(F.project);case"project-za":return F.project.localeCompare(j.project);default:return 0}}),K=()=>{L(!b),y(!1);try{localStorage.setItem("darkMode",(!b).toString())}catch(j){console.error("Failed to save theme:",j)}},Te=j=>{e(j),r(!1),j==="actuals"&&(window.location.href="/adminactuals")},Ne=()=>{const j=["ID","Project","Category","Start Date","End Date","Hours","Man-Days","Created At"],F=D.map($e=>[$e.id,`"${$e.project}"`,$e.category,$e.date,$e.dateEnd,$e.hours.toFixed(1),$e.manDays,`"${$e.createdAt}"`]),Xe=[j.join(","),...F.map($e=>$e.join(","))].join(`
`),B=new Blob([Xe],{type:"text/csv;charset=utf-8;"}),ee=window.URL.createObjectURL(B),Pe=document.createElement("a");Pe.href=ee,Pe.download=`actuals-logs-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),window.URL.revokeObjectURL(ee)},G=()=>i==="actuals"?"Actuals":"Logs";f.useEffect(()=>{const j=document.createElement("style");return j.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      @keyframes pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }
      
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      .spinning {
        animation: spin 1s linear infinite;
      }
    `,document.head.appendChild(j),()=>document.head.removeChild(j)},[]);const W={page:{minHeight:"100vh",padding:"30px",background:b?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"40px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"32px",fontWeight:"800",color:b?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},toggleViewContainer:{fontSize:"20px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:b?"#e2e8f0":"#1e293b"},chevron:(j,F)=>({transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:j||F?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:j||F?"#3b82f6":b?"#94a3b8":"#64748b"}),sectionOverlay:{position:"fixed",top:N.top,left:N.left,zIndex:999,backgroundColor:b?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:b?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},blurOption:j=>({backgroundColor:j?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:b?"#e2e8f0":"#374151",transform:j?"translateX(4px)":"translateX(0)",borderLeft:j?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"}),filtersContainer:{display:"flex",gap:"20px",marginBottom:"32px",flexWrap:"wrap",alignItems:"center"},filterGroup:{display:"flex",flexDirection:"column",gap:"8px"},filterLabel:{fontSize:"14px",fontWeight:"600",color:b?"#e2e8f0":"#374151",transition:"all 0.3s ease"},filterSelect:{padding:"12px 16px",borderRadius:"12px",border:b?"2px solid #4b5563":"2px solid #e2e8f0",backgroundColor:b?"#374151":"#fff",fontSize:"14px",fontWeight:"500",color:b?"#e2e8f0":"#374151",cursor:"pointer",transition:"all 0.3s ease",minWidth:"150px",outline:"none"},statsRow:{display:"flex",gap:"20px",marginBottom:"32px",flexWrap:"wrap"},statCard:(j,F)=>({flex:"1",minWidth:"200px",backgroundColor:b?"#374151":"#fff",borderRadius:"16px",padding:"24px",boxShadow:F?"0 12px 24px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:F?"translateY(-4px) scale(1.02)":"translateY(0) scale(1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",border:b?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)",borderLeft:`4px solid ${j}`}),statIcon:{marginBottom:"12px",color:"#3b82f6"},statLabel:{fontSize:"14px",fontWeight:"600",color:b?"#94a3b8":"#64748b",marginBottom:"4px"},statValue:{fontSize:"24px",fontWeight:"800",color:b?"#e2e8f0":"#1e293b"},logsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:"24px"},logCard:j=>({backgroundColor:b?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:j?"0 12px 24px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:j?"translateY(-4px) scale(1.02)":"translateY(0) scale(1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",border:b?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)",position:"relative",overflow:"hidden"}),cardHeader:{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",marginBottom:"16px"},cardNumber:{fontSize:"12px",fontWeight:"700",color:b?"#94a3b8":"#64748b",backgroundColor:b?"#4b5563":"#f1f5f9",padding:"4px 8px",borderRadius:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},projectInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},projectBadge:j=>({width:"12px",height:"12px",borderRadius:"50%",backgroundColor:j,flexShrink:0}),projectName:{fontSize:"18px",fontWeight:"700",color:b?"#e2e8f0":"#1e293b"},categoryBadge:{fontSize:"12px",fontWeight:"600",color:b?"#94a3b8":"#64748b",backgroundColor:b?"#4b5563":"#f1f5f9",padding:"4px 8px",borderRadius:"6px",marginLeft:"auto"},dateInfo:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:b?"#94a3b8":"#64748b",marginBottom:"16px"},hoursDisplay:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",padding:"16px",backgroundColor:b?"#4b5563":"#f8fafc",borderRadius:"12px"},hoursItem:{textAlign:"center",flex:1},hoursLabel:{fontSize:"12px",fontWeight:"600",color:b?"#94a3b8":"#64748b",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},hoursValue:j=>({fontSize:"20px",fontWeight:"700",color:j||"#3b82f6"}),hoursDivider:{width:"1px",height:"30px",backgroundColor:b?"#6b7280":"#d1d5db",margin:"0 16px"},createdInfo:{marginTop:"16px",padding:"12px",backgroundColor:b?"#4b556350":"#f8fafc50",borderRadius:"8px",borderLeft:`3px solid ${b?"#6b7280":"#d1d5db"}`},createdLabel:{fontSize:"12px",fontWeight:"600",color:b?"#94a3b8":"#64748b",marginBottom:"4px",display:"flex",alignItems:"center",gap:"6px"},createdText:{fontSize:"13px",color:b?"#e2e8f0":"#374151",lineHeight:"1.4"},topButton:j=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:j?"rgba(59,130,246,0.1)":b?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:j?"#3b82f6":b?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:j?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:j?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:b?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:b?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:b?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:b?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:b?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:b?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:b?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:b?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:b?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",gap:"20px"},loadingText:{fontSize:"18px",fontWeight:"600",color:b?"#94a3b8":"#64748b"},errorContainer:{backgroundColor:b?"#7f1d1d":"#fee2e2",color:b?"#fca5a5":"#991b1b",padding:"20px",borderRadius:"12px",marginBottom:"20px",border:b?"1px solid #991b1b":"1px solid #fca5a5"},emptyState:{textAlign:"center",padding:"60px 20px",color:b?"#94a3b8":"#64748b"},emptyStateIcon:{marginBottom:"16px",opacity:.5},emptyStateText:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},emptyStateSubtext:{fontSize:"14px",opacity:.8},searchContainer:{position:"relative",display:"flex",alignItems:"center",gap:"12px",backgroundColor:b?"#374151":"#fff",borderRadius:"12px",padding:"12px 16px",border:b?"2px solid #4b5563":"2px solid #e2e8f0",marginBottom:"24px",transition:"all 0.3s ease",maxWidth:"500px"},searchInput:{flex:1,border:"none",backgroundColor:"transparent",fontSize:"14px",color:b?"#e2e8f0":"#374151",outline:"none",fontFamily:'"Montserrat", sans-serif'},exportButton:j=>({padding:"12px 20px",borderRadius:"12px",border:"2px solid #10b981",backgroundColor:j?"#10b981":"transparent",color:j?"#fff":"#10b981",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"8px",transform:j?"translateY(-2px)":"translateY(0)",boxShadow:j?"0 8px 25px rgba(16,185,129,0.25)":"0 2px 8px rgba(0,0,0,0.05)",marginLeft:"auto"}),controlsRow:{display:"flex",alignItems:"flex-end",gap:"20px",marginBottom:"24px",flexWrap:"wrap"}};return le?n.jsxs("div",{style:W.page,children:[n.jsx("div",{style:W.headerRow,children:n.jsx("div",{style:W.headerLeft,children:n.jsx("div",{style:W.header,children:"Logs"})})}),n.jsx("div",{style:W.statsRow,children:[1,2,3].map(j=>n.jsx("div",{style:{flex:1,minWidth:"200px",backgroundColor:b?"#374151":"#fff",borderRadius:"16px",padding:"24px",border:b?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)"},children:n.jsx("div",{style:{height:"80px",background:b?"linear-gradient(90deg, #4b5563 0%, #6b7280 50%, #4b5563 100%)":"linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"8px"}})},j))}),n.jsx("div",{style:W.logsGrid,children:[1,2,3,4,5,6].map(j=>n.jsx(TE,{isDarkMode:b},j))})]}):n.jsxs("div",{style:W.page,children:[n.jsxs("div",{style:W.headerRow,children:[n.jsx("div",{style:W.headerLeft,children:n.jsxs("div",{ref:me,style:W.toggleViewContainer,onClick:()=>r(j=>!j),onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),className:"floating",children:[n.jsx("span",{style:W.header,children:G()}),n.jsx(ko,{style:W.chevron(t,a),size:22})]})}),n.jsxs("div",{style:W.headerRight,children:[n.jsxs("button",{style:W.topButton(c==="alerts"),onMouseEnter:()=>u("alerts"),onMouseLeave:()=>u(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(lr,{size:20}),n.jsx("div",{style:W.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:W.topButton(c==="profile"),onMouseEnter:()=>{u("profile"),y(!0)},onMouseLeave:()=>{u(null)},onClick:()=>window.location.href="/adminprofile",children:n.jsx(Yt,{size:20})}),h&&n.jsxs("div",{style:W.profileTooltip,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[n.jsx("div",{style:W.tooltipArrow}),n.jsxs("div",{style:W.userInfo,children:[n.jsx("div",{style:W.avatar,children:Me.firstName&&Me.lastName?`${Me.firstName[0]}${Me.lastName[0]}`:"??"}),n.jsxs("div",{style:W.userDetails,children:[n.jsx("div",{style:W.userName,children:Me.firstName&&Me.lastName?`${Me.firstName} ${Me.lastName}`:"Loading..."}),n.jsxs("div",{style:W.userRole,children:[Me.role?`${Me.role.charAt(0).toUpperCase()+Me.role.slice(1)}`:"User","  ",Me.department||"Loading..."]})]})]}),n.jsxs("div",{style:W.userStats,children:[n.jsxs("div",{style:W.tooltipStatItem,children:[n.jsx("div",{style:W.tooltipStatNumber,children:ge.totalHours||0}),n.jsx("div",{style:W.tooltipStatLabel,children:"Hours"})]}),n.jsxs("div",{style:W.tooltipStatItem,children:[n.jsx("div",{style:W.tooltipStatNumber,children:ge.projectHours>0?Math.ceil(ge.projectHours/40):0}),n.jsx("div",{style:W.tooltipStatLabel,children:"Projects"})]}),n.jsxs("div",{style:W.tooltipStatItem,children:[n.jsxs("div",{style:W.tooltipStatNumber,children:[ge.capacityUtilization,"%"]}),n.jsx("div",{style:W.tooltipStatLabel,children:"Capacity"})]})]}),n.jsx("button",{style:W.themeToggle,onClick:K,children:b?" Light Mode":" Dark Mode"})]})]})]})]}),t&&n.jsx("div",{style:W.sectionOverlay,onMouseDown:j=>j.stopPropagation(),onClick:j=>j.stopPropagation(),children:n.jsx("div",{children:["actuals","view-logs"].map((j,F)=>n.jsx("div",{style:W.blurOption(c===`section-${F}`),onClick:Xe=>{Xe.preventDefault(),Xe.stopPropagation(),Te(j)},onMouseDown:Xe=>{Xe.preventDefault(),Xe.stopPropagation()},onMouseEnter:()=>u(`section-${F}`),onMouseLeave:()=>u(null),children:j==="actuals"?"Actuals":"View Logs"},j))})}),ue&&n.jsxs("div",{style:W.errorContainer,children:[n.jsx("strong",{children:"Error:"})," ",ue]}),n.jsxs("div",{style:W.searchContainer,children:[n.jsx(PA,{size:20,style:{color:b?"#94a3b8":"#64748b"}}),n.jsx("input",{type:"text",placeholder:"Search by project, category, or ID...",value:O,onChange:j=>ve(j.target.value),style:W.searchInput}),O&&n.jsx(dn,{size:20,onClick:()=>ve(""),style:{cursor:"pointer",color:b?"#94a3b8":"#64748b"}})]}),n.jsxs("div",{style:W.controlsRow,children:[n.jsxs("div",{style:W.filterGroup,children:[n.jsx("label",{style:W.filterLabel,children:"Filter by Project:"}),n.jsx(Vt,{value:S,onChange:j=>U(j),options:_,placeholder:"Select project...",isDarkMode:b,searchable:_.length>5,compact:!0})]}),n.jsxs("div",{style:W.filterGroup,children:[n.jsx("label",{style:W.filterLabel,children:"Filter by Category:"}),n.jsx(Vt,{value:E,onChange:j=>P(j),options:Fe,placeholder:"Select category...",isDarkMode:b,searchable:Fe.length>5,compact:!0})]}),n.jsxs("div",{style:W.filterGroup,children:[n.jsx("label",{style:W.filterLabel,children:"Sort by:"}),n.jsxs("select",{value:ce,onChange:j=>Q(j.target.value),style:W.filterSelect,children:[n.jsx("option",{value:"newest",children:" Newest First"}),n.jsx("option",{value:"oldest",children:" Oldest First"}),n.jsx("option",{value:"most-hours",children:" Most Hours"}),n.jsx("option",{value:"least-hours",children:" Least Hours"}),n.jsx("option",{value:"project-az",children:" Project A-Z"}),n.jsx("option",{value:"project-za",children:" Project Z-A"})]})]}),n.jsxs("button",{onClick:Ne,style:W.exportButton(c==="export"),onMouseEnter:()=>u("export"),onMouseLeave:()=>u(null),children:[n.jsx(tb,{size:16}),"Export CSV (",D.length,")"]})]}),n.jsxs("div",{style:W.statsRow,children:[n.jsxs("div",{style:W.statCard("#3b82f6",c==="total"),onMouseEnter:()=>u("total"),onMouseLeave:()=>u(null),children:[n.jsx("div",{style:W.statIcon,children:n.jsx(DA,{size:24})}),n.jsx("div",{style:W.statLabel,children:"Total Entries"}),n.jsx("div",{style:W.statValue,children:n.jsx(Hp,{value:D.length})})]}),n.jsxs("div",{style:W.statCard("#10b981",c==="hours"),onMouseEnter:()=>u("hours"),onMouseLeave:()=>u(null),children:[n.jsx("div",{style:W.statIcon,children:n.jsx(Mi,{size:24})}),n.jsx("div",{style:W.statLabel,children:"Total Hours"}),n.jsx("div",{style:W.statValue,children:n.jsx(Hp,{value:D.reduce((j,F)=>j+(F.hours||0),0),decimals:1})})]}),n.jsxs("div",{style:W.statCard("#f59e0b",c==="mandays"),onMouseEnter:()=>u("mandays"),onMouseLeave:()=>u(null),children:[n.jsx("div",{style:W.statIcon,children:n.jsx(pd,{size:24})}),n.jsx("div",{style:W.statLabel,children:"Total Man-Days"}),n.jsx("div",{style:W.statValue,children:n.jsx(Hp,{value:D.reduce((j,F)=>j+(F.hours||0),0)/8,decimals:2})})]})]}),D.length===0&&!le&&n.jsxs("div",{style:W.emptyState,children:[n.jsx("div",{style:W.emptyStateIcon,children:n.jsx(nb,{size:64})}),n.jsx("div",{style:W.emptyStateText,children:"No logs found"}),n.jsx("div",{style:W.emptyStateSubtext,children:V.length===0?"Start tracking your actuals to see them here":"Try adjusting your filters"})]}),n.jsx("div",{style:W.logsGrid,children:D.map((j,F)=>n.jsxs("div",{style:W.logCard(p===F),onMouseEnter:()=>m(F),onMouseLeave:()=>m(null),children:[n.jsx("div",{style:W.cardHeader,children:n.jsxs("div",{style:W.cardNumber,children:["#",j.id]})}),n.jsxs("div",{style:W.projectInfo,children:[n.jsx("div",{style:W.projectBadge(j.projectColor)}),n.jsx("div",{style:W.projectName,children:j.project}),n.jsx("div",{style:W.categoryBadge,children:j.category})]}),n.jsxs("div",{style:W.dateInfo,children:[n.jsx(uo,{size:14}),j.date===j.dateEnd?j.date:`${j.date} - ${j.dateEnd}`]}),n.jsxs("div",{style:W.hoursDisplay,children:[n.jsxs("div",{style:W.hoursItem,children:[n.jsx("div",{style:W.hoursLabel,children:"Hours"}),n.jsx("div",{style:W.hoursValue("#3b82f6"),children:j.hours.toFixed(1)})]}),n.jsx("div",{style:W.hoursDivider}),n.jsxs("div",{style:W.hoursItem,children:[n.jsx("div",{style:W.hoursLabel,children:"Man-Days"}),n.jsx("div",{style:W.hoursValue("#10b981"),children:j.manDays})]})]}),n.jsxs("div",{style:W.createdInfo,children:[n.jsxs("div",{style:W.createdLabel,children:[n.jsx(Mi,{size:14}),"Created"]}),n.jsx("div",{style:W.createdText,children:j.createdAt})]})]},j.id))})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ih=function(i,e){return Ih=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},Ih(i,e)};function fo(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ih(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Eh=function(){return Eh=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var A in t)Object.prototype.hasOwnProperty.call(t,A)&&(e[A]=t[A])}return e},Eh.apply(this,arguments)};function gr(i,e,t,r){function a(A){return A instanceof t?A:new t(function(c){c(A)})}return new(t||(t=Promise))(function(A,c){function u(h){try{m(r.next(h))}catch(y){c(y)}}function p(h){try{m(r.throw(h))}catch(y){c(y)}}function m(h){h.done?A(h.value):a(h.value).then(u,p)}m((r=r.apply(i,[])).next())})}function sr(i,e){var t={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},r,a,A,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(m){return function(h){return p([m,h])}}function p(m){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(A=m[0]&2?a.return:m[0]?a.throw||((A=a.return)&&A.call(a),0):a.next)&&!(A=A.call(a,m[1])).done)return A;switch(a=0,A&&(m=[m[0]&2,A.value]),m[0]){case 0:case 1:A=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,a=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(A=t.trys,!(A=A.length>0&&A[A.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!A||m[1]>A[0]&&m[1]<A[3])){t.label=m[1];break}if(m[0]===6&&t.label<A[1]){t.label=A[1],A=m;break}if(A&&t.label<A[2]){t.label=A[2],t.ops.push(m);break}A[2]&&t.ops.pop(),t.trys.pop();continue}m=e.call(i,t)}catch(h){m=[6,h],a=0}finally{r=A=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function Zl(i,e,t){if(arguments.length===2)for(var r=0,a=e.length,A;r<a;r++)(A||!(r in e))&&(A||(A=Array.prototype.slice.call(e,0,r)),A[r]=e[r]);return i.concat(A||e)}var Jo=function(){function i(e,t,r,a){this.left=e,this.top=t,this.width=r,this.height=a}return i.prototype.add=function(e,t,r,a){return new i(this.left+e,this.top+t,this.width+r,this.height+a)},i.fromClientRect=function(e,t){return new i(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},i.fromDOMRectList=function(e,t){var r=Array.from(t).find(function(a){return a.width!==0});return r?new i(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):i.EMPTY},i.EMPTY=new i(0,0,0,0),i}(),Rd=function(i,e){return Jo.fromClientRect(i,e.getBoundingClientRect())},FE=function(i){var e=i.body,t=i.documentElement;if(!e||!t)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),a=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new Jo(0,0,r,a)},Md=function(i){for(var e=[],t=0,r=i.length;t<r;){var a=i.charCodeAt(t++);if(a>=55296&&a<=56319&&t<r){var A=i.charCodeAt(t++);(A&64512)===56320?e.push(((a&1023)<<10)+(A&1023)+65536):(e.push(a),t--)}else e.push(a)}return e},Sn=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,i);var t=i.length;if(!t)return"";for(var r=[],a=-1,A="";++a<t;){var c=i[a];c<=65535?r.push(c):(c-=65536,r.push((c>>10)+55296,c%1024+56320)),(a+1===t||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},Nx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",UE=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ec=0;ec<Nx.length;ec++)UE[Nx.charCodeAt(ec)]=ec;var _x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cA=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tc=0;tc<_x.length;tc++)cA[_x.charCodeAt(tc)]=tc;var QE=function(i){var e=i.length*.75,t=i.length,r,a=0,A,c,u,p;i[i.length-1]==="="&&(e--,i[i.length-2]==="="&&e--);var m=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),h=Array.isArray(m)?m:new Uint8Array(m);for(r=0;r<t;r+=4)A=cA[i.charCodeAt(r)],c=cA[i.charCodeAt(r+1)],u=cA[i.charCodeAt(r+2)],p=cA[i.charCodeAt(r+3)],h[a++]=A<<2|c>>4,h[a++]=(c&15)<<4|u>>2,h[a++]=(u&3)<<6|p&63;return m},RE=function(i){for(var e=i.length,t=[],r=0;r<e;r+=2)t.push(i[r+1]<<8|i[r]);return t},ME=function(i){for(var e=i.length,t=[],r=0;r<e;r+=4)t.push(i[r+3]<<24|i[r+2]<<16|i[r+1]<<8|i[r]);return t},ds=5,Af=11,Np=2,LE=Af-ds,gw=65536>>ds,DE=1<<ds,_p=DE-1,PE=1024>>ds,HE=gw+PE,NE=HE,_E=32,OE=NE+_E,zE=65536>>Af,KE=1<<LE,WE=KE-1,Ox=function(i,e,t){return i.slice?i.slice(e,t):new Uint16Array(Array.prototype.slice.call(i,e,t))},GE=function(i,e,t){return i.slice?i.slice(e,t):new Uint32Array(Array.prototype.slice.call(i,e,t))},VE=function(i,e){var t=QE(i),r=Array.isArray(t)?ME(t):new Uint32Array(t),a=Array.isArray(t)?RE(t):new Uint16Array(t),A=24,c=Ox(a,A/2,r[4]/2),u=r[5]===2?Ox(a,(A+r[4])/2):GE(r,Math.ceil((A+r[4])/4));return new $E(r[0],r[1],r[2],r[3],c,u)},$E=function(){function i(e,t,r,a,A,c){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=a,this.index=A,this.data=c}return i.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>ds],t=(t<<Np)+(e&_p),this.data[t];if(e<=65535)return t=this.index[gw+(e-55296>>ds)],t=(t<<Np)+(e&_p),this.data[t];if(e<this.highStart)return t=OE-zE+(e>>Af),t=this.index[t],t+=e>>ds&WE,t=this.index[t],t=(t<<Np)+(e&_p),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},i}(),zx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",YE=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var nc=0;nc<zx.length;nc++)YE[zx.charCodeAt(nc)]=nc;var JE="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Kx=50,XE=1,fw=2,mw=3,qE=4,ZE=5,Wx=7,xw=8,Gx=9,Bi=10,kh=11,Vx=12,Th=13,ek=14,dA=15,jh=16,rc=17,oA=18,tk=19,$x=20,Fh=21,iA=22,Op=23,Vs=24,Rr=25,uA=26,pA=27,$s=28,nk=29,ss=30,rk=31,oc=32,ic=33,Uh=34,Qh=35,Rh=36,RA=37,Mh=38,kc=39,Tc=40,zp=41,yw=42,ok=43,ik=[9001,65288],bw="!",Mt="",sc="",Lh=VE(JE),Oo=[ss,Rh],Dh=[XE,fw,mw,ZE],ww=[Bi,xw],Yx=[pA,uA],sk=Dh.concat(ww),Jx=[Mh,kc,Tc,Uh,Qh],ak=[dA,Th],Ak=function(i,e){e===void 0&&(e="strict");var t=[],r=[],a=[];return i.forEach(function(A,c){var u=Lh.get(A);if(u>Kx?(a.push(!0),u-=Kx):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return r.push(c),t.push(jh);if(u===qE||u===kh){if(c===0)return r.push(c),t.push(ss);var p=t[c-1];return sk.indexOf(p)===-1?(r.push(r[c-1]),t.push(p)):(r.push(c),t.push(ss))}if(r.push(c),u===rk)return t.push(e==="strict"?Fh:RA);if(u===yw||u===nk)return t.push(ss);if(u===ok)return A>=131072&&A<=196605||A>=196608&&A<=262141?t.push(RA):t.push(ss);t.push(u)}),[r,t,a]},Kp=function(i,e,t,r){var a=r[t];if(Array.isArray(i)?i.indexOf(a)!==-1:i===a)for(var A=t;A<=r.length;){A++;var c=r[A];if(c===e)return!0;if(c!==Bi)break}if(a===Bi)for(var A=t;A>0;){A--;var u=r[A];if(Array.isArray(i)?i.indexOf(u)!==-1:i===u)for(var p=t;p<=r.length;){p++;var c=r[p];if(c===e)return!0;if(c!==Bi)break}if(u!==Bi)break}return!1},Xx=function(i,e){for(var t=i;t>=0;){var r=e[t];if(r===Bi)t--;else return r}return 0},lk=function(i,e,t,r,a){if(t[r]===0)return Mt;var A=r-1;if(Array.isArray(a)&&a[A]===!0)return Mt;var c=A-1,u=A+1,p=e[A],m=c>=0?e[c]:0,h=e[u];if(p===fw&&h===mw)return Mt;if(Dh.indexOf(p)!==-1)return bw;if(Dh.indexOf(h)!==-1||ww.indexOf(h)!==-1)return Mt;if(Xx(A,e)===xw)return sc;if(Lh.get(i[A])===kh||(p===oc||p===ic)&&Lh.get(i[u])===kh||p===Wx||h===Wx||p===Gx||[Bi,Th,dA].indexOf(p)===-1&&h===Gx||[rc,oA,tk,Vs,$s].indexOf(h)!==-1||Xx(A,e)===iA||Kp(Op,iA,A,e)||Kp([rc,oA],Fh,A,e)||Kp(Vx,Vx,A,e))return Mt;if(p===Bi)return sc;if(p===Op||h===Op)return Mt;if(h===jh||p===jh)return sc;if([Th,dA,Fh].indexOf(h)!==-1||p===ek||m===Rh&&ak.indexOf(p)!==-1||p===$s&&h===Rh||h===$x||Oo.indexOf(h)!==-1&&p===Rr||Oo.indexOf(p)!==-1&&h===Rr||p===pA&&[RA,oc,ic].indexOf(h)!==-1||[RA,oc,ic].indexOf(p)!==-1&&h===uA||Oo.indexOf(p)!==-1&&Yx.indexOf(h)!==-1||Yx.indexOf(p)!==-1&&Oo.indexOf(h)!==-1||[pA,uA].indexOf(p)!==-1&&(h===Rr||[iA,dA].indexOf(h)!==-1&&e[u+1]===Rr)||[iA,dA].indexOf(p)!==-1&&h===Rr||p===Rr&&[Rr,$s,Vs].indexOf(h)!==-1)return Mt;if([Rr,$s,Vs,rc,oA].indexOf(h)!==-1)for(var y=A;y>=0;){var b=e[y];if(b===Rr)return Mt;if([$s,Vs].indexOf(b)!==-1)y--;else break}if([pA,uA].indexOf(h)!==-1)for(var y=[rc,oA].indexOf(p)!==-1?c:A;y>=0;){var b=e[y];if(b===Rr)return Mt;if([$s,Vs].indexOf(b)!==-1)y--;else break}if(Mh===p&&[Mh,kc,Uh,Qh].indexOf(h)!==-1||[kc,Uh].indexOf(p)!==-1&&[kc,Tc].indexOf(h)!==-1||[Tc,Qh].indexOf(p)!==-1&&h===Tc||Jx.indexOf(p)!==-1&&[$x,uA].indexOf(h)!==-1||Jx.indexOf(h)!==-1&&p===pA||Oo.indexOf(p)!==-1&&Oo.indexOf(h)!==-1||p===Vs&&Oo.indexOf(h)!==-1||Oo.concat(Rr).indexOf(p)!==-1&&h===iA&&ik.indexOf(i[u])===-1||Oo.concat(Rr).indexOf(h)!==-1&&p===oA)return Mt;if(p===zp&&h===zp){for(var L=t[A],S=1;L>0&&(L--,e[L]===zp);)S++;if(S%2!==0)return Mt}return p===oc&&h===ic?Mt:sc},ck=function(i,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=Ak(i,e.lineBreak),r=t[0],a=t[1],A=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(u){return[Rr,ss,yw].indexOf(u)!==-1?RA:u}));var c=e.wordBreak==="keep-all"?A.map(function(u,p){return u&&i[p]>=19968&&i[p]<=40959}):void 0;return[r,a,c]},dk=function(){function i(e,t,r,a){this.codePoints=e,this.required=t===bw,this.start=r,this.end=a}return i.prototype.slice=function(){return Sn.apply(void 0,this.codePoints.slice(this.start,this.end))},i}(),uk=function(i,e){var t=Md(i),r=ck(t,e),a=r[0],A=r[1],c=r[2],u=t.length,p=0,m=0;return{next:function(){if(m>=u)return{done:!0,value:null};for(var h=Mt;m<u&&(h=lk(t,A,a,++m,c))===Mt;);if(h!==Mt||m===u){var y=new dk(t,h,p,m);return p=m,{value:y,done:!1}}return{done:!0,value:null}}}},pk=1,hk=2,NA=4,qx=8,ed=10,Zx=47,wA=92,gk=9,fk=32,ac=34,sA=61,mk=35,xk=36,yk=37,Ac=39,lc=40,aA=41,bk=95,Sr=45,wk=33,vk=60,Ck=62,Bk=64,Sk=91,Ik=93,Ek=61,kk=123,cc=63,Tk=125,ey=124,jk=126,Fk=128,ty=65533,Wp=42,As=43,Uk=44,Qk=58,Rk=59,MA=46,Mk=0,Lk=8,Dk=11,Pk=14,Hk=31,Nk=127,Co=-1,vw=48,Cw=97,Bw=101,_k=102,Ok=117,zk=122,Sw=65,Iw=69,Ew=70,Kk=85,Wk=90,Ar=function(i){return i>=vw&&i<=57},Gk=function(i){return i>=55296&&i<=57343},Ys=function(i){return Ar(i)||i>=Sw&&i<=Ew||i>=Cw&&i<=_k},Vk=function(i){return i>=Cw&&i<=zk},$k=function(i){return i>=Sw&&i<=Wk},Yk=function(i){return Vk(i)||$k(i)},Jk=function(i){return i>=Fk},dc=function(i){return i===ed||i===gk||i===fk},td=function(i){return Yk(i)||Jk(i)||i===bk},ny=function(i){return td(i)||Ar(i)||i===Sr},Xk=function(i){return i>=Mk&&i<=Lk||i===Dk||i>=Pk&&i<=Hk||i===Nk},yi=function(i,e){return i!==wA?!1:e!==ed},uc=function(i,e,t){return i===Sr?td(e)||yi(e,t):td(i)?!0:!!(i===wA&&yi(i,e))},Gp=function(i,e,t){return i===As||i===Sr?Ar(e)?!0:e===MA&&Ar(t):Ar(i===MA?e:i)},qk=function(i){var e=0,t=1;(i[e]===As||i[e]===Sr)&&(i[e]===Sr&&(t=-1),e++);for(var r=[];Ar(i[e]);)r.push(i[e++]);var a=r.length?parseInt(Sn.apply(void 0,r),10):0;i[e]===MA&&e++;for(var A=[];Ar(i[e]);)A.push(i[e++]);var c=A.length,u=c?parseInt(Sn.apply(void 0,A),10):0;(i[e]===Iw||i[e]===Bw)&&e++;var p=1;(i[e]===As||i[e]===Sr)&&(i[e]===Sr&&(p=-1),e++);for(var m=[];Ar(i[e]);)m.push(i[e++]);var h=m.length?parseInt(Sn.apply(void 0,m),10):0;return t*(a+u*Math.pow(10,-c))*Math.pow(10,p*h)},Zk={type:2},eT={type:3},tT={type:4},nT={type:13},rT={type:8},oT={type:21},iT={type:9},sT={type:10},aT={type:11},AT={type:12},lT={type:14},pc={type:23},cT={type:1},dT={type:25},uT={type:24},pT={type:26},hT={type:27},gT={type:28},fT={type:29},mT={type:31},Ph={type:32},kw=function(){function i(){this._value=[]}return i.prototype.write=function(e){this._value=this._value.concat(Md(e))},i.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Ph;)e.push(t),t=this.consumeToken();return e},i.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case ac:return this.consumeStringToken(ac);case mk:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),a=this.peekCodePoint(2);if(ny(t)||yi(r,a)){var A=uc(t,r,a)?hk:pk,c=this.consumeName();return{type:5,value:c,flags:A}}break;case xk:if(this.peekCodePoint(0)===sA)return this.consumeCodePoint(),nT;break;case Ac:return this.consumeStringToken(Ac);case lc:return Zk;case aA:return eT;case Wp:if(this.peekCodePoint(0)===sA)return this.consumeCodePoint(),lT;break;case As:if(Gp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Uk:return tT;case Sr:var u=e,p=this.peekCodePoint(0),m=this.peekCodePoint(1);if(Gp(u,p,m))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(uc(u,p,m))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(p===Sr&&m===Ck)return this.consumeCodePoint(),this.consumeCodePoint(),uT;break;case MA:if(Gp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Zx:if(this.peekCodePoint(0)===Wp)for(this.consumeCodePoint();;){var h=this.consumeCodePoint();if(h===Wp&&(h=this.consumeCodePoint(),h===Zx))return this.consumeToken();if(h===Co)return this.consumeToken()}break;case Qk:return pT;case Rk:return hT;case vk:if(this.peekCodePoint(0)===wk&&this.peekCodePoint(1)===Sr&&this.peekCodePoint(2)===Sr)return this.consumeCodePoint(),this.consumeCodePoint(),dT;break;case Bk:var y=this.peekCodePoint(0),b=this.peekCodePoint(1),L=this.peekCodePoint(2);if(uc(y,b,L)){var c=this.consumeName();return{type:7,value:c}}break;case Sk:return gT;case wA:if(yi(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Ik:return fT;case Ek:if(this.peekCodePoint(0)===sA)return this.consumeCodePoint(),rT;break;case kk:return aT;case Tk:return AT;case Ok:case Kk:var S=this.peekCodePoint(0),U=this.peekCodePoint(1);return S===As&&(Ys(U)||U===cc)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case ey:if(this.peekCodePoint(0)===sA)return this.consumeCodePoint(),iT;if(this.peekCodePoint(0)===ey)return this.consumeCodePoint(),oT;break;case jk:if(this.peekCodePoint(0)===sA)return this.consumeCodePoint(),sT;break;case Co:return Ph}return dc(e)?(this.consumeWhiteSpace(),mT):Ar(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):td(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Sn(e)}},i.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},i.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},i.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},i.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Ys(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var r=!1;t===cc&&e.length<6;)e.push(t),t=this.consumeCodePoint(),r=!0;if(r){var a=parseInt(Sn.apply(void 0,e.map(function(p){return p===cc?vw:p})),16),A=parseInt(Sn.apply(void 0,e.map(function(p){return p===cc?Ew:p})),16);return{type:30,start:a,end:A}}var c=parseInt(Sn.apply(void 0,e),16);if(this.peekCodePoint(0)===Sr&&Ys(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var u=[];Ys(t)&&u.length<6;)u.push(t),t=this.consumeCodePoint();var A=parseInt(Sn.apply(void 0,u),16);return{type:30,start:c,end:A}}else return{type:30,start:c,end:c}},i.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===lc?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===lc?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},i.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Co)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===Ac||t===ac){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Co||this.peekCodePoint(0)===aA)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),pc)}for(;;){var a=this.consumeCodePoint();if(a===Co||a===aA)return{type:22,value:Sn.apply(void 0,e)};if(dc(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Co||this.peekCodePoint(0)===aA?(this.consumeCodePoint(),{type:22,value:Sn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),pc);if(a===ac||a===Ac||a===lc||Xk(a))return this.consumeBadUrlRemnants(),pc;if(a===wA)if(yi(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),pc;else e.push(a)}},i.prototype.consumeWhiteSpace=function(){for(;dc(this.peekCodePoint(0));)this.consumeCodePoint()},i.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===aA||e===Co)return;yi(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},i.prototype.consumeStringSlice=function(e){for(var t=5e4,r="";e>0;){var a=Math.min(t,e);r+=Sn.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),r},i.prototype.consumeStringToken=function(e){var t="",r=0;do{var a=this._value[r];if(a===Co||a===void 0||a===e)return t+=this.consumeStringSlice(r),{type:0,value:t};if(a===ed)return this._value.splice(0,r),cT;if(a===wA){var A=this._value[r+1];A!==Co&&A!==void 0&&(A===ed?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):yi(a,A)&&(t+=this.consumeStringSlice(r),t+=Sn(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},i.prototype.consumeNumber=function(){var e=[],t=NA,r=this.peekCodePoint(0);for((r===As||r===Sr)&&e.push(this.consumeCodePoint());Ar(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(r===MA&&Ar(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=qx;Ar(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),a=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((r===Iw||r===Bw)&&((a===As||a===Sr)&&Ar(A)||Ar(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=qx;Ar(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[qk(e),t]},i.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],r=e[1],a=this.peekCodePoint(0),A=this.peekCodePoint(1),c=this.peekCodePoint(2);if(uc(a,A,c)){var u=this.consumeName();return{type:15,number:t,flags:r,unit:u}}return a===yk?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},i.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Ys(e)){for(var t=Sn(e);Ys(this.peekCodePoint(0))&&t.length<6;)t+=Sn(this.consumeCodePoint());dc(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return r===0||Gk(r)||r>1114111?ty:r}return e===Co?ty:e},i.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(ny(t))e+=Sn(t);else if(yi(t,this.peekCodePoint(0)))e+=Sn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},i}(),Tw=function(){function i(e){this._tokens=e}return i.create=function(e){var t=new kw;return t.write(e),new i(t.read())},i.parseValue=function(e){return i.create(e).parseComponentValue()},i.parseValues=function(e){return i.create(e).parseComponentValues()},i.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},i.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},i.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},i.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||yT(r,e))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},i.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},i.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Ph:e},i.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},i}(),_A=function(i){return i.type===15},Ca=function(i){return i.type===17},Xt=function(i){return i.type===20},xT=function(i){return i.type===0},Hh=function(i,e){return Xt(i)&&i.value===e},jw=function(i){return i.type!==31},ga=function(i){return i.type!==31&&i.type!==4},To=function(i){var e=[],t=[];return i.forEach(function(r){if(r.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}r.type!==31&&t.push(r)}),t.length&&e.push(t),e},yT=function(i,e){return e===11&&i.type===12||e===28&&i.type===29?!0:e===2&&i.type===3},Di=function(i){return i.type===17||i.type===15},jn=function(i){return i.type===16||Di(i)},Fw=function(i){return i.length>1?[i[0],i[1]]:[i[0]]},er={type:17,number:0,flags:NA},lf={type:16,number:50,flags:NA},Si={type:16,number:100,flags:NA},hA=function(i,e,t){var r=i[0],a=i[1];return[rn(r,e),rn(typeof a<"u"?a:r,t)]},rn=function(i,e){if(i.type===16)return i.number/100*e;if(_A(i))switch(i.unit){case"rem":case"em":return 16*i.number;case"px":default:return i.number}return i.number},Uw="deg",Qw="grad",Rw="rad",Mw="turn",Ld={name:"angle",parse:function(i,e){if(e.type===15)switch(e.unit){case Uw:return Math.PI*e.number/180;case Qw:return Math.PI/200*e.number;case Rw:return e.number;case Mw:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Lw=function(i){return i.type===15&&(i.unit===Uw||i.unit===Qw||i.unit===Rw||i.unit===Mw)},Dw=function(i){var e=i.filter(Xt).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[er,er];case"to top":case"bottom":return Yr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[er,Si];case"to right":case"left":return Yr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Si,Si];case"to bottom":case"top":return Yr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Si,er];case"to left":case"right":return Yr(270)}return 0},Yr=function(i){return Math.PI*i/180},Qi={name:"color",parse:function(i,e){if(e.type===18){var t=bT[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(i,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),a=e.value.substring(1,2),A=e.value.substring(2,3);return Ii(parseInt(r+r,16),parseInt(a+a,16),parseInt(A+A,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),a=e.value.substring(1,2),A=e.value.substring(2,3),c=e.value.substring(3,4);return Ii(parseInt(r+r,16),parseInt(a+a,16),parseInt(A+A,16),parseInt(c+c,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),a=e.value.substring(2,4),A=e.value.substring(4,6);return Ii(parseInt(r,16),parseInt(a,16),parseInt(A,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),a=e.value.substring(2,4),A=e.value.substring(4,6),c=e.value.substring(6,8);return Ii(parseInt(r,16),parseInt(a,16),parseInt(A,16),parseInt(c,16)/255)}}if(e.type===20){var u=Vo[e.value.toUpperCase()];if(typeof u<"u")return u}return Vo.TRANSPARENT}},Ri=function(i){return(255&i)===0},Wn=function(i){var e=255&i,t=255&i>>8,r=255&i>>16,a=255&i>>24;return e<255?"rgba("+a+","+r+","+t+","+e/255+")":"rgb("+a+","+r+","+t+")"},Ii=function(i,e,t,r){return(i<<24|e<<16|t<<8|Math.round(r*255)<<0)>>>0},ry=function(i,e){if(i.type===17)return i.number;if(i.type===16){var t=e===3?1:255;return e===3?i.number/100*t:Math.round(i.number/100*t)}return 0},oy=function(i,e){var t=e.filter(ga);if(t.length===3){var r=t.map(ry),a=r[0],A=r[1],c=r[2];return Ii(a,A,c,1)}if(t.length===4){var u=t.map(ry),a=u[0],A=u[1],c=u[2],p=u[3];return Ii(a,A,c,p)}return 0};function Vp(i,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-i)*t*6+i:t<1/2?e:t<2/3?(e-i)*6*(2/3-t)+i:i}var iy=function(i,e){var t=e.filter(ga),r=t[0],a=t[1],A=t[2],c=t[3],u=(r.type===17?Yr(r.number):Ld.parse(i,r))/(Math.PI*2),p=jn(a)?a.number/100:0,m=jn(A)?A.number/100:0,h=typeof c<"u"&&jn(c)?rn(c,1):1;if(p===0)return Ii(m*255,m*255,m*255,1);var y=m<=.5?m*(p+1):m+p-m*p,b=m*2-y,L=Vp(b,y,u+1/3),S=Vp(b,y,u),U=Vp(b,y,u-1/3);return Ii(L*255,S*255,U*255,h)},bT={hsl:iy,hsla:iy,rgb:oy,rgba:oy},vA=function(i,e){return Qi.parse(i,Tw.create(e).parseComponentValue())},Vo={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},wT={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(i,e){return e.map(function(t){if(Xt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},vT={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Dd=function(i,e){var t=Qi.parse(i,e[0]),r=e[1];return r&&jn(r)?{color:t,stop:r}:{color:t,stop:null}},sy=function(i,e){var t=i[0],r=i[i.length-1];t.stop===null&&(t.stop=er),r.stop===null&&(r.stop=Si);for(var a=[],A=0,c=0;c<i.length;c++){var u=i[c].stop;if(u!==null){var p=rn(u,e);p>A?a.push(p):a.push(A),A=p}else a.push(null)}for(var m=null,c=0;c<a.length;c++){var h=a[c];if(h===null)m===null&&(m=c);else if(m!==null){for(var y=c-m,b=a[m-1],L=(h-b)/(y+1),S=1;S<=y;S++)a[m+S-1]=L*S;m=null}}return i.map(function(U,E){var P=U.color;return{color:P,stop:Math.max(Math.min(1,a[E]/e),0)}})},CT=function(i,e,t){var r=e/2,a=t/2,A=rn(i[0],e)-r,c=a-rn(i[1],t);return(Math.atan2(c,A)+Math.PI*2)%(Math.PI*2)},BT=function(i,e,t){var r=typeof i=="number"?i:CT(i,e,t),a=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),A=e/2,c=t/2,u=a/2,p=Math.sin(r-Math.PI/2)*u,m=Math.cos(r-Math.PI/2)*u;return[a,A-m,A+m,c-p,c+p]},io=function(i,e){return Math.sqrt(i*i+e*e)},ay=function(i,e,t,r,a){var A=[[0,0],[0,e],[i,0],[i,e]];return A.reduce(function(c,u){var p=u[0],m=u[1],h=io(t-p,r-m);return(a?h<c.optimumDistance:h>c.optimumDistance)?{optimumCorner:u,optimumDistance:h}:c},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},ST=function(i,e,t,r,a){var A=0,c=0;switch(i.size){case 0:i.shape===0?A=c=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-a)):i.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-r)),c=Math.min(Math.abs(t),Math.abs(t-a)));break;case 2:if(i.shape===0)A=c=Math.min(io(e,t),io(e,t-a),io(e-r,t),io(e-r,t-a));else if(i.shape===1){var u=Math.min(Math.abs(t),Math.abs(t-a))/Math.min(Math.abs(e),Math.abs(e-r)),p=ay(r,a,e,t,!0),m=p[0],h=p[1];A=io(m-e,(h-t)/u),c=u*A}break;case 1:i.shape===0?A=c=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-a)):i.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-r)),c=Math.max(Math.abs(t),Math.abs(t-a)));break;case 3:if(i.shape===0)A=c=Math.max(io(e,t),io(e,t-a),io(e-r,t),io(e-r,t-a));else if(i.shape===1){var u=Math.max(Math.abs(t),Math.abs(t-a))/Math.max(Math.abs(e),Math.abs(e-r)),y=ay(r,a,e,t,!1),m=y[0],h=y[1];A=io(m-e,(h-t)/u),c=u*A}break}return Array.isArray(i.size)&&(A=rn(i.size[0],r),c=i.size.length===2?rn(i.size[1],a):A),[A,c]},IT=function(i,e){var t=Yr(180),r=[];return To(e).forEach(function(a,A){if(A===0){var c=a[0];if(c.type===20&&c.value==="to"){t=Dw(a);return}else if(Lw(c)){t=Ld.parse(i,c);return}}var u=Dd(i,a);r.push(u)}),{angle:t,stops:r,type:1}},hc=function(i,e){var t=Yr(180),r=[];return To(e).forEach(function(a,A){if(A===0){var c=a[0];if(c.type===20&&["top","left","right","bottom"].indexOf(c.value)!==-1){t=Dw(a);return}else if(Lw(c)){t=(Ld.parse(i,c)+Yr(270))%Yr(360);return}}var u=Dd(i,a);r.push(u)}),{angle:t,stops:r,type:1}},ET=function(i,e){var t=Yr(180),r=[],a=1,A=0,c=3,u=[];return To(e).forEach(function(p,m){var h=p[0];if(m===0){if(Xt(h)&&h.value==="linear"){a=1;return}else if(Xt(h)&&h.value==="radial"){a=2;return}}if(h.type===18){if(h.name==="from"){var y=Qi.parse(i,h.values[0]);r.push({stop:er,color:y})}else if(h.name==="to"){var y=Qi.parse(i,h.values[0]);r.push({stop:Si,color:y})}else if(h.name==="color-stop"){var b=h.values.filter(ga);if(b.length===2){var y=Qi.parse(i,b[1]),L=b[0];Ca(L)&&r.push({stop:{type:16,number:L.number*100,flags:L.flags},color:y})}}}}),a===1?{angle:(t+Yr(180))%Yr(360),stops:r,type:a}:{size:c,shape:A,stops:r,position:u,type:a}},Pw="closest-side",Hw="farthest-side",Nw="closest-corner",_w="farthest-corner",Ow="circle",zw="ellipse",Kw="cover",Ww="contain",kT=function(i,e){var t=0,r=3,a=[],A=[];return To(e).forEach(function(c,u){var p=!0;if(u===0){var m=!1;p=c.reduce(function(y,b){if(m)if(Xt(b))switch(b.value){case"center":return A.push(lf),y;case"top":case"left":return A.push(er),y;case"right":case"bottom":return A.push(Si),y}else(jn(b)||Di(b))&&A.push(b);else if(Xt(b))switch(b.value){case Ow:return t=0,!1;case zw:return t=1,!1;case"at":return m=!0,!1;case Pw:return r=0,!1;case Kw:case Hw:return r=1,!1;case Ww:case Nw:return r=2,!1;case _w:return r=3,!1}else if(Di(b)||jn(b))return Array.isArray(r)||(r=[]),r.push(b),!1;return y},p)}if(p){var h=Dd(i,c);a.push(h)}}),{size:r,shape:t,stops:a,position:A,type:2}},gc=function(i,e){var t=0,r=3,a=[],A=[];return To(e).forEach(function(c,u){var p=!0;if(u===0?p=c.reduce(function(h,y){if(Xt(y))switch(y.value){case"center":return A.push(lf),!1;case"top":case"left":return A.push(er),!1;case"right":case"bottom":return A.push(Si),!1}else if(jn(y)||Di(y))return A.push(y),!1;return h},p):u===1&&(p=c.reduce(function(h,y){if(Xt(y))switch(y.value){case Ow:return t=0,!1;case zw:return t=1,!1;case Ww:case Pw:return r=0,!1;case Hw:return r=1,!1;case Nw:return r=2,!1;case Kw:case _w:return r=3,!1}else if(Di(y)||jn(y))return Array.isArray(r)||(r=[]),r.push(y),!1;return h},p)),p){var m=Dd(i,c);a.push(m)}}),{size:r,shape:t,stops:a,position:A,type:2}},TT=function(i){return i.type===1},jT=function(i){return i.type===2},cf={name:"image",parse:function(i,e){if(e.type===22){var t={url:e.value,type:0};return i.cache.addImage(e.value),t}if(e.type===18){var r=Gw[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(i,e.values)}throw new Error("Unsupported image type "+e.type)}};function FT(i){return!(i.type===20&&i.value==="none")&&(i.type!==18||!!Gw[i.name])}var Gw={"linear-gradient":IT,"-moz-linear-gradient":hc,"-ms-linear-gradient":hc,"-o-linear-gradient":hc,"-webkit-linear-gradient":hc,"radial-gradient":kT,"-moz-radial-gradient":gc,"-ms-radial-gradient":gc,"-o-radial-gradient":gc,"-webkit-radial-gradient":gc,"-webkit-gradient":ET},UT={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(i,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(r){return ga(r)&&FT(r)}).map(function(r){return cf.parse(i,r)})}},QT={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(i,e){return e.map(function(t){if(Xt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},RT={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(i,e){return To(e).map(function(t){return t.filter(jn)}).map(Fw)}},MT={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(i,e){return To(e).map(function(t){return t.filter(Xt).map(function(r){return r.value}).join(" ")}).map(LT)}},LT=function(i){switch(i){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},da;(function(i){i.AUTO="auto",i.CONTAIN="contain",i.COVER="cover"})(da||(da={}));var DT={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(i,e){return To(e).map(function(t){return t.filter(PT)})}},PT=function(i){return Xt(i)||jn(i)},Pd=function(i){return{name:"border-"+i+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},HT=Pd("top"),NT=Pd("right"),_T=Pd("bottom"),OT=Pd("left"),Hd=function(i){return{name:"border-radius-"+i,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Fw(t.filter(jn))}}},zT=Hd("top-left"),KT=Hd("top-right"),WT=Hd("bottom-right"),GT=Hd("bottom-left"),Nd=function(i){return{name:"border-"+i+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},VT=Nd("top"),$T=Nd("right"),YT=Nd("bottom"),JT=Nd("left"),_d=function(i){return{name:"border-"+i+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return _A(t)?t.number:0}}},XT=_d("top"),qT=_d("right"),ZT=_d("bottom"),ej=_d("left"),tj={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nj={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(i,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},rj={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(i,e){return e.filter(Xt).reduce(function(t,r){return t|oj(r.value)},0)}},oj=function(i){switch(i){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ij={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(i,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},sj={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(i,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},nd;(function(i){i.NORMAL="normal",i.STRICT="strict"})(nd||(nd={}));var aj={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(i,e){switch(e){case"strict":return nd.STRICT;case"normal":default:return nd.NORMAL}}},Aj={name:"line-height",initialValue:"normal",prefix:!1,type:4},Ay=function(i,e){return Xt(i)&&i.value==="normal"?1.2*e:i.type===17?e*i.number:jn(i)?rn(i,e):e},lj={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(i,e){return e.type===20&&e.value==="none"?null:cf.parse(i,e)}},cj={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(i,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Nh={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(i,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Od=function(i){return{name:"margin-"+i,initialValue:"0",prefix:!1,type:4}},dj=Od("top"),uj=Od("right"),pj=Od("bottom"),hj=Od("left"),gj={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(i,e){return e.filter(Xt).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},fj={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(i,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},zd=function(i){return{name:"padding-"+i,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},mj=zd("top"),xj=zd("right"),yj=zd("bottom"),bj=zd("left"),wj={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(i,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},vj={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(i,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Cj={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(i,e){return e.length===1&&Hh(e[0],"none")?[]:To(e).map(function(t){for(var r={color:Vo.TRANSPARENT,offsetX:er,offsetY:er,blur:er},a=0,A=0;A<t.length;A++){var c=t[A];Di(c)?(a===0?r.offsetX=c:a===1?r.offsetY=c:r.blur=c,a++):r.color=Qi.parse(i,c)}return r})}},Bj={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(i,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Sj={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(i,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=kj[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},Ij=function(i){var e=i.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},Ej=function(i){var e=i.filter(function(p){return p.type===17}).map(function(p){return p.number}),t=e[0],r=e[1];e[2],e[3];var a=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var c=e[12],u=e[13];return e[14],e[15],e.length===16?[t,r,a,A,c,u]:null},kj={matrix:Ij,matrix3d:Ej},ly={type:16,number:50,flags:NA},Tj=[ly,ly],jj={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(i,e){var t=e.filter(jn);return t.length!==2?Tj:[t[0],t[1]]}},Fj={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(i,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},CA;(function(i){i.NORMAL="normal",i.BREAK_ALL="break-all",i.KEEP_ALL="keep-all"})(CA||(CA={}));var Uj={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(i,e){switch(e){case"break-all":return CA.BREAK_ALL;case"keep-all":return CA.KEEP_ALL;case"normal":default:return CA.NORMAL}}},Qj={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(i,e){if(e.type===20)return{auto:!0,order:0};if(Ca(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Vw={name:"time",parse:function(i,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Rj={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(i,e){return Ca(e)?e.number:1}},Mj={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Lj={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(i,e){return e.filter(Xt).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},Dj={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(i,e){var t=[],r=[];return e.forEach(function(a){switch(a.type){case 20:case 0:t.push(a.value);break;case 17:t.push(a.number.toString());break;case 4:r.push(t.join(" ")),t.length=0;break}}),t.length&&r.push(t.join(" ")),r.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},Pj={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Hj={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(i,e){if(Ca(e))return e.number;if(Xt(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Nj={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(i,e){return e.filter(Xt).map(function(t){return t.value})}},_j={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(i,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ln=function(i,e){return(i&e)!==0},Oj={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(i,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},zj={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(i,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var r=[],a=e.filter(jw),A=0;A<a.length;A++){var c=a[A],u=a[A+1];if(c.type===20){var p=u&&Ca(u)?u.number:1;r.push({counter:c.value,increment:p})}}return r}},Kj={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(i,e){if(e.length===0)return[];for(var t=[],r=e.filter(jw),a=0;a<r.length;a++){var A=r[a],c=r[a+1];if(Xt(A)&&A.value!=="none"){var u=c&&Ca(c)?c.number:0;t.push({counter:A.value,reset:u})}}return t}},Wj={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(i,e){return e.filter(_A).map(function(t){return Vw.parse(i,t)})}},Gj={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(i,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var r=[],a=e.filter(xT);if(a.length%2!==0)return null;for(var A=0;A<a.length;A+=2){var c=a[A].value,u=a[A+1].value;r.push({open:c,close:u})}return r}},cy=function(i,e,t){if(!i)return"";var r=i[Math.min(e,i.length-1)];return r?t?r.open:r.close:""},Vj={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(i,e){return e.length===1&&Hh(e[0],"none")?[]:To(e).map(function(t){for(var r={color:255,offsetX:er,offsetY:er,blur:er,spread:er,inset:!1},a=0,A=0;A<t.length;A++){var c=t[A];Hh(c,"inset")?r.inset=!0:Di(c)?(a===0?r.offsetX=c:a===1?r.offsetY=c:a===2?r.blur=c:r.spread=c,a++):r.color=Qi.parse(i,c)}return r})}},$j={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(i,e){var t=[0,1,2],r=[];return e.filter(Xt).forEach(function(a){switch(a.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),t.forEach(function(a){r.indexOf(a)===-1&&r.push(a)}),r}},Yj={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Jj={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(i,e){return _A(e)?e.number:0}},Xj=function(){function i(e,t){var r,a;this.animationDuration=it(e,Wj,t.animationDuration),this.backgroundClip=it(e,wT,t.backgroundClip),this.backgroundColor=it(e,vT,t.backgroundColor),this.backgroundImage=it(e,UT,t.backgroundImage),this.backgroundOrigin=it(e,QT,t.backgroundOrigin),this.backgroundPosition=it(e,RT,t.backgroundPosition),this.backgroundRepeat=it(e,MT,t.backgroundRepeat),this.backgroundSize=it(e,DT,t.backgroundSize),this.borderTopColor=it(e,HT,t.borderTopColor),this.borderRightColor=it(e,NT,t.borderRightColor),this.borderBottomColor=it(e,_T,t.borderBottomColor),this.borderLeftColor=it(e,OT,t.borderLeftColor),this.borderTopLeftRadius=it(e,zT,t.borderTopLeftRadius),this.borderTopRightRadius=it(e,KT,t.borderTopRightRadius),this.borderBottomRightRadius=it(e,WT,t.borderBottomRightRadius),this.borderBottomLeftRadius=it(e,GT,t.borderBottomLeftRadius),this.borderTopStyle=it(e,VT,t.borderTopStyle),this.borderRightStyle=it(e,$T,t.borderRightStyle),this.borderBottomStyle=it(e,YT,t.borderBottomStyle),this.borderLeftStyle=it(e,JT,t.borderLeftStyle),this.borderTopWidth=it(e,XT,t.borderTopWidth),this.borderRightWidth=it(e,qT,t.borderRightWidth),this.borderBottomWidth=it(e,ZT,t.borderBottomWidth),this.borderLeftWidth=it(e,ej,t.borderLeftWidth),this.boxShadow=it(e,Vj,t.boxShadow),this.color=it(e,tj,t.color),this.direction=it(e,nj,t.direction),this.display=it(e,rj,t.display),this.float=it(e,ij,t.cssFloat),this.fontFamily=it(e,Dj,t.fontFamily),this.fontSize=it(e,Pj,t.fontSize),this.fontStyle=it(e,_j,t.fontStyle),this.fontVariant=it(e,Nj,t.fontVariant),this.fontWeight=it(e,Hj,t.fontWeight),this.letterSpacing=it(e,sj,t.letterSpacing),this.lineBreak=it(e,aj,t.lineBreak),this.lineHeight=it(e,Aj,t.lineHeight),this.listStyleImage=it(e,lj,t.listStyleImage),this.listStylePosition=it(e,cj,t.listStylePosition),this.listStyleType=it(e,Nh,t.listStyleType),this.marginTop=it(e,dj,t.marginTop),this.marginRight=it(e,uj,t.marginRight),this.marginBottom=it(e,pj,t.marginBottom),this.marginLeft=it(e,hj,t.marginLeft),this.opacity=it(e,Rj,t.opacity);var A=it(e,gj,t.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=it(e,fj,t.overflowWrap),this.paddingTop=it(e,mj,t.paddingTop),this.paddingRight=it(e,xj,t.paddingRight),this.paddingBottom=it(e,yj,t.paddingBottom),this.paddingLeft=it(e,bj,t.paddingLeft),this.paintOrder=it(e,$j,t.paintOrder),this.position=it(e,vj,t.position),this.textAlign=it(e,wj,t.textAlign),this.textDecorationColor=it(e,Mj,(r=t.textDecorationColor)!==null&&r!==void 0?r:t.color),this.textDecorationLine=it(e,Lj,(a=t.textDecorationLine)!==null&&a!==void 0?a:t.textDecoration),this.textShadow=it(e,Cj,t.textShadow),this.textTransform=it(e,Bj,t.textTransform),this.transform=it(e,Sj,t.transform),this.transformOrigin=it(e,jj,t.transformOrigin),this.visibility=it(e,Fj,t.visibility),this.webkitTextStrokeColor=it(e,Yj,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=it(e,Jj,t.webkitTextStrokeWidth),this.wordBreak=it(e,Uj,t.wordBreak),this.zIndex=it(e,Qj,t.zIndex)}return i.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},i.prototype.isTransparent=function(){return Ri(this.backgroundColor)},i.prototype.isTransformed=function(){return this.transform!==null},i.prototype.isPositioned=function(){return this.position!==0},i.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},i.prototype.isFloating=function(){return this.float!==0},i.prototype.isInlineLevel=function(){return Ln(this.display,4)||Ln(this.display,33554432)||Ln(this.display,268435456)||Ln(this.display,536870912)||Ln(this.display,67108864)||Ln(this.display,134217728)},i}(),qj=function(){function i(e,t){this.content=it(e,Oj,t.content),this.quotes=it(e,Gj,t.quotes)}return i}(),dy=function(){function i(e,t){this.counterIncrement=it(e,zj,t.counterIncrement),this.counterReset=it(e,Kj,t.counterReset)}return i}(),it=function(i,e,t){var r=new kw,a=t!==null&&typeof t<"u"?t.toString():e.initialValue;r.write(a);var A=new Tw(r.read());switch(e.type){case 2:var c=A.parseComponentValue();return e.parse(i,Xt(c)?c.value:e.initialValue);case 0:return e.parse(i,A.parseComponentValue());case 1:return e.parse(i,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return Ld.parse(i,A.parseComponentValue());case"color":return Qi.parse(i,A.parseComponentValue());case"image":return cf.parse(i,A.parseComponentValue());case"length":var u=A.parseComponentValue();return Di(u)?u:er;case"length-percentage":var p=A.parseComponentValue();return jn(p)?p:er;case"time":return Vw.parse(i,A.parseComponentValue())}break}},Zj="data-html2canvas-debug",eF=function(i){var e=i.getAttribute(Zj);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},_h=function(i,e){var t=eF(i);return t===1||e===t},jo=function(){function i(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,_h(t,3))debugger;this.styles=new Xj(e,window.getComputedStyle(t,null)),Kh(t)&&(this.styles.animationDuration.some(function(r){return r>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Rd(this.context,t),_h(t,4)&&(this.flags|=16)}return i}(),tF="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",uy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gA=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var fc=0;fc<uy.length;fc++)gA[uy.charCodeAt(fc)]=fc;var nF=function(i){var e=i.length*.75,t=i.length,r,a=0,A,c,u,p;i[i.length-1]==="="&&(e--,i[i.length-2]==="="&&e--);var m=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),h=Array.isArray(m)?m:new Uint8Array(m);for(r=0;r<t;r+=4)A=gA[i.charCodeAt(r)],c=gA[i.charCodeAt(r+1)],u=gA[i.charCodeAt(r+2)],p=gA[i.charCodeAt(r+3)],h[a++]=A<<2|c>>4,h[a++]=(c&15)<<4|u>>2,h[a++]=(u&3)<<6|p&63;return m},rF=function(i){for(var e=i.length,t=[],r=0;r<e;r+=2)t.push(i[r+1]<<8|i[r]);return t},oF=function(i){for(var e=i.length,t=[],r=0;r<e;r+=4)t.push(i[r+3]<<24|i[r+2]<<16|i[r+1]<<8|i[r]);return t},us=5,df=11,$p=2,iF=df-us,$w=65536>>us,sF=1<<us,Yp=sF-1,aF=1024>>us,AF=$w+aF,lF=AF,cF=32,dF=lF+cF,uF=65536>>df,pF=1<<iF,hF=pF-1,py=function(i,e,t){return i.slice?i.slice(e,t):new Uint16Array(Array.prototype.slice.call(i,e,t))},gF=function(i,e,t){return i.slice?i.slice(e,t):new Uint32Array(Array.prototype.slice.call(i,e,t))},fF=function(i,e){var t=nF(i),r=Array.isArray(t)?oF(t):new Uint32Array(t),a=Array.isArray(t)?rF(t):new Uint16Array(t),A=24,c=py(a,A/2,r[4]/2),u=r[5]===2?py(a,(A+r[4])/2):gF(r,Math.ceil((A+r[4])/4));return new mF(r[0],r[1],r[2],r[3],c,u)},mF=function(){function i(e,t,r,a,A,c){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=a,this.index=A,this.data=c}return i.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>us],t=(t<<$p)+(e&Yp),this.data[t];if(e<=65535)return t=this.index[$w+(e-55296>>us)],t=(t<<$p)+(e&Yp),this.data[t];if(e<this.highStart)return t=dF-uF+(e>>df),t=this.index[t],t+=e>>us&hF,t=this.index[t],t=(t<<$p)+(e&Yp),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},i}(),hy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xF=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var mc=0;mc<hy.length;mc++)xF[hy.charCodeAt(mc)]=mc;var yF=1,Jp=2,Xp=3,gy=4,fy=5,bF=7,my=8,qp=9,Zp=10,xy=11,yy=12,by=13,wy=14,eh=15,wF=function(i){for(var e=[],t=0,r=i.length;t<r;){var a=i.charCodeAt(t++);if(a>=55296&&a<=56319&&t<r){var A=i.charCodeAt(t++);(A&64512)===56320?e.push(((a&1023)<<10)+(A&1023)+65536):(e.push(a),t--)}else e.push(a)}return e},vF=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,i);var t=i.length;if(!t)return"";for(var r=[],a=-1,A="";++a<t;){var c=i[a];c<=65535?r.push(c):(c-=65536,r.push((c>>10)+55296,c%1024+56320)),(a+1===t||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},CF=fF(tF),Gr="",th="",BF=function(i){return CF.get(i)},SF=function(i,e,t){var r=t-2,a=e[r],A=e[t-1],c=e[t];if(A===Jp&&c===Xp)return Gr;if(A===Jp||A===Xp||A===gy||c===Jp||c===Xp||c===gy)return th;if(A===my&&[my,qp,xy,yy].indexOf(c)!==-1||(A===xy||A===qp)&&(c===qp||c===Zp)||(A===yy||A===Zp)&&c===Zp||c===by||c===fy||c===bF||A===yF)return Gr;if(A===by&&c===wy){for(;a===fy;)a=e[--r];if(a===wy)return Gr}if(A===eh&&c===eh){for(var u=0;a===eh;)u++,a=e[--r];if(u%2===0)return Gr}return th},IF=function(i){var e=wF(i),t=e.length,r=0,a=0,A=e.map(BF);return{next:function(){if(r>=t)return{done:!0,value:null};for(var c=Gr;r<t&&(c=SF(e,A,++r))===Gr;);if(c!==Gr||r===t){var u=vF.apply(null,e.slice(a,r));return a=r,{value:u,done:!1}}return{done:!0,value:null}}}},EF=function(i){for(var e=IF(i),t=[],r;!(r=e.next()).done;)r.value&&t.push(r.value.slice());return t},kF=function(i){var e=123;if(i.createRange){var t=i.createRange();if(t.getBoundingClientRect){var r=i.createElement("boundtest");r.style.height=e+"px",r.style.display="block",i.body.appendChild(r),t.selectNode(r);var a=t.getBoundingClientRect(),A=Math.round(a.height);if(i.body.removeChild(r),A===e)return!0}}return!1},TF=function(i){var e=i.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",i.body.appendChild(e);var t=i.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,a=Md(r.data).map(function(p){return Sn(p)}),A=0,c={},u=a.every(function(p,m){t.setStart(r,A),t.setEnd(r,A+p.length);var h=t.getBoundingClientRect();A+=p.length;var y=h.x>c.x||h.y>c.y;return c=h,m===0?!0:y});return i.body.removeChild(e),u},jF=function(){return typeof new Image().crossOrigin<"u"},FF=function(){return typeof new XMLHttpRequest().responseType=="string"},UF=function(i){var e=new Image,t=i.createElement("canvas"),r=t.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},vy=function(i){return i[0]===0&&i[1]===255&&i[2]===0&&i[3]===255},QF=function(i){var e=i.createElement("canvas"),t=100;e.width=t,e.height=t;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var a=new Image,A=e.toDataURL();a.src=A;var c=Oh(t,t,0,0,a);return r.fillStyle="red",r.fillRect(0,0,t,t),Cy(c).then(function(u){r.drawImage(u,0,0);var p=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var m=i.createElement("div");return m.style.backgroundImage="url("+A+")",m.style.height=t+"px",vy(p)?Cy(Oh(t,t,0,0,m)):Promise.reject(!1)}).then(function(u){return r.drawImage(u,0,0),vy(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},Oh=function(i,e,t,r,a){var A="http://www.w3.org/2000/svg",c=document.createElementNS(A,"svg"),u=document.createElementNS(A,"foreignObject");return c.setAttributeNS(null,"width",i.toString()),c.setAttributeNS(null,"height",e.toString()),u.setAttributeNS(null,"width","100%"),u.setAttributeNS(null,"height","100%"),u.setAttributeNS(null,"x",t.toString()),u.setAttributeNS(null,"y",r.toString()),u.setAttributeNS(null,"externalResourcesRequired","true"),c.appendChild(u),u.appendChild(a),c},Cy=function(i){return new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(i))})},Jn={get SUPPORT_RANGE_BOUNDS(){var i=kF(document);return Object.defineProperty(Jn,"SUPPORT_RANGE_BOUNDS",{value:i}),i},get SUPPORT_WORD_BREAKING(){var i=Jn.SUPPORT_RANGE_BOUNDS&&TF(document);return Object.defineProperty(Jn,"SUPPORT_WORD_BREAKING",{value:i}),i},get SUPPORT_SVG_DRAWING(){var i=UF(document);return Object.defineProperty(Jn,"SUPPORT_SVG_DRAWING",{value:i}),i},get SUPPORT_FOREIGNOBJECT_DRAWING(){var i=typeof Array.from=="function"&&typeof window.fetch=="function"?QF(document):Promise.resolve(!1);return Object.defineProperty(Jn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:i}),i},get SUPPORT_CORS_IMAGES(){var i=jF();return Object.defineProperty(Jn,"SUPPORT_CORS_IMAGES",{value:i}),i},get SUPPORT_RESPONSE_TYPE(){var i=FF();return Object.defineProperty(Jn,"SUPPORT_RESPONSE_TYPE",{value:i}),i},get SUPPORT_CORS_XHR(){var i="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Jn,"SUPPORT_CORS_XHR",{value:i}),i},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var i=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Jn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:i}),i}},BA=function(){function i(e,t){this.text=e,this.bounds=t}return i}(),RF=function(i,e,t,r){var a=DF(e,t),A=[],c=0;return a.forEach(function(u){if(t.textDecorationLine.length||u.trim().length>0)if(Jn.SUPPORT_RANGE_BOUNDS){var p=By(r,c,u.length).getClientRects();if(p.length>1){var m=uf(u),h=0;m.forEach(function(b){A.push(new BA(b,Jo.fromDOMRectList(i,By(r,h+c,b.length).getClientRects()))),h+=b.length})}else A.push(new BA(u,Jo.fromDOMRectList(i,p)))}else{var y=r.splitText(u.length);A.push(new BA(u,MF(i,r))),r=y}else Jn.SUPPORT_RANGE_BOUNDS||(r=r.splitText(u.length));c+=u.length}),A},MF=function(i,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(r,e);var A=Rd(i,r);return r.firstChild&&a.replaceChild(r.firstChild,r),A}}return Jo.EMPTY},By=function(i,e,t){var r=i.ownerDocument;if(!r)throw new Error("Node has no owner document");var a=r.createRange();return a.setStart(i,e),a.setEnd(i,e+t),a},uf=function(i){if(Jn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(i)).map(function(t){return t.segment})}return EF(i)},LF=function(i,e){if(Jn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(i)).map(function(r){return r.segment})}return HF(i,e)},DF=function(i,e){return e.letterSpacing!==0?uf(i):LF(i,e)},PF=[32,160,4961,65792,65793,4153,4241],HF=function(i,e){for(var t=uk(i,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],a,A=function(){if(a.value){var c=a.value.slice(),u=Md(c),p="";u.forEach(function(m){PF.indexOf(m)===-1?p+=Sn(m):(p.length&&r.push(p),r.push(Sn(m)),p="")}),p.length&&r.push(p)}};!(a=t.next()).done;)A();return r},NF=function(){function i(e,t,r){this.text=_F(t.data,r.textTransform),this.textBounds=RF(e,this.text,r,t)}return i}(),_F=function(i,e){switch(e){case 1:return i.toLowerCase();case 3:return i.replace(OF,zF);case 2:return i.toUpperCase();default:return i}},OF=/(^|\s|:|-|\(|\))([a-z])/g,zF=function(i,e,t){return i.length>0?e+t.toUpperCase():i},Yw=function(i){fo(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a.src=r.currentSrc||r.src,a.intrinsicWidth=r.naturalWidth,a.intrinsicHeight=r.naturalHeight,a.context.cache.addImage(a.src),a}return e}(jo),Jw=function(i){fo(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a.canvas=r,a.intrinsicWidth=r.width,a.intrinsicHeight=r.height,a}return e}(jo),Xw=function(i){fo(e,i);function e(t,r){var a=i.call(this,t,r)||this,A=new XMLSerializer,c=Rd(t,r);return r.setAttribute("width",c.width+"px"),r.setAttribute("height",c.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(r)),a.intrinsicWidth=r.width.baseVal.value,a.intrinsicHeight=r.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(jo),qw=function(i){fo(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a.value=r.value,a}return e}(jo),zh=function(i){fo(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a.start=r.start,a.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,a}return e}(jo),KF=[{type:15,flags:0,unit:"px",number:3}],WF=[{type:16,flags:0,number:50}],GF=function(i){return i.width>i.height?new Jo(i.left+(i.width-i.height)/2,i.top,i.height,i.height):i.width<i.height?new Jo(i.left,i.top+(i.height-i.width)/2,i.width,i.width):i},VF=function(i){var e=i.type===$F?new Array(i.value.length+1).join(""):i.value;return e.length===0?i.placeholder||"":e},rd="checkbox",od="radio",$F="password",Sy=707406591,pf=function(i){fo(e,i);function e(t,r){var a=i.call(this,t,r)||this;switch(a.type=r.type.toLowerCase(),a.checked=r.checked,a.value=VF(r),(a.type===rd||a.type===od)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=GF(a.bounds)),a.type){case rd:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=KF;break;case od:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=WF;break}return a}return e}(jo),Zw=function(i){fo(e,i);function e(t,r){var a=i.call(this,t,r)||this,A=r.options[r.selectedIndex||0];return a.value=A&&A.text||"",a}return e}(jo),ev=function(i){fo(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a.value=r.value,a}return e}(jo),tv=function(i){fo(e,i);function e(t,r){var a=i.call(this,t,r)||this;a.src=r.src,a.width=parseInt(r.width,10)||0,a.height=parseInt(r.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){a.tree=rv(t,r.contentWindow.document.documentElement);var A=r.contentWindow.document.documentElement?vA(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Vo.TRANSPARENT,c=r.contentWindow.document.body?vA(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):Vo.TRANSPARENT;a.backgroundColor=Ri(A)?Ri(c)?a.styles.backgroundColor:c:A}}catch{}return a}return e}(jo),YF=["OL","UL","MENU"],jc=function(i,e,t,r){for(var a=e.firstChild,A=void 0;a;a=A)if(A=a.nextSibling,ov(a)&&a.data.trim().length>0)t.textNodes.push(new NF(i,a,t.styles));else if(ra(a))if(Av(a)&&a.assignedNodes)a.assignedNodes().forEach(function(u){return jc(i,u,t,r)});else{var c=nv(i,a);c.styles.isVisible()&&(JF(a,c,r)?c.flags|=4:XF(c.styles)&&(c.flags|=2),YF.indexOf(a.tagName)!==-1&&(c.flags|=8),t.elements.push(c),a.slot,a.shadowRoot?jc(i,a.shadowRoot,c,r):!id(a)&&!iv(a)&&!sd(a)&&jc(i,a,c,r))}},nv=function(i,e){return Wh(e)?new Yw(i,e):sv(e)?new Jw(i,e):iv(e)?new Xw(i,e):qF(e)?new qw(i,e):ZF(e)?new zh(i,e):eU(e)?new pf(i,e):sd(e)?new Zw(i,e):id(e)?new ev(i,e):av(e)?new tv(i,e):new jo(i,e)},rv=function(i,e){var t=nv(i,e);return t.flags|=4,jc(i,e,t,t),t},JF=function(i,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||hf(i)&&t.styles.isTransparent()},XF=function(i){return i.isPositioned()||i.isFloating()},ov=function(i){return i.nodeType===Node.TEXT_NODE},ra=function(i){return i.nodeType===Node.ELEMENT_NODE},Kh=function(i){return ra(i)&&typeof i.style<"u"&&!Fc(i)},Fc=function(i){return typeof i.className=="object"},qF=function(i){return i.tagName==="LI"},ZF=function(i){return i.tagName==="OL"},eU=function(i){return i.tagName==="INPUT"},tU=function(i){return i.tagName==="HTML"},iv=function(i){return i.tagName==="svg"},hf=function(i){return i.tagName==="BODY"},sv=function(i){return i.tagName==="CANVAS"},Iy=function(i){return i.tagName==="VIDEO"},Wh=function(i){return i.tagName==="IMG"},av=function(i){return i.tagName==="IFRAME"},Ey=function(i){return i.tagName==="STYLE"},nU=function(i){return i.tagName==="SCRIPT"},id=function(i){return i.tagName==="TEXTAREA"},sd=function(i){return i.tagName==="SELECT"},Av=function(i){return i.tagName==="SLOT"},ky=function(i){return i.tagName.indexOf("-")>0},rU=function(){function i(){this.counters={}}return i.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},i.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},i.prototype.pop=function(e){var t=this;e.forEach(function(r){return t.counters[r].pop()})},i.prototype.parse=function(e){var t=this,r=e.counterIncrement,a=e.counterReset,A=!0;r!==null&&r.forEach(function(u){var p=t.counters[u.counter];p&&u.increment!==0&&(A=!1,p.length||p.push(1),p[Math.max(0,p.length-1)]+=u.increment)});var c=[];return A&&a.forEach(function(u){var p=t.counters[u.counter];c.push(u.counter),p||(p=t.counters[u.counter]=[]),p.push(u.reset)}),c},i}(),Ty={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},jy={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},oU={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},iU={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Js=function(i,e,t,r,a,A){return i<e||i>t?LA(i,a,A.length>0):r.integers.reduce(function(c,u,p){for(;i>=u;)i-=u,c+=r.values[p];return c},"")+A},lv=function(i,e,t,r){var a="";do t||i--,a=r(i)+a,i/=e;while(i*e>=e);return a},Bn=function(i,e,t,r,a){var A=t-e+1;return(i<0?"-":"")+(lv(Math.abs(i),A,r,function(c){return Sn(Math.floor(c%A)+e)})+a)},os=function(i,e,t){t===void 0&&(t=". ");var r=e.length;return lv(Math.abs(i),r,!1,function(a){return e[Math.floor(a%r)]})+t},ta=1,fi=2,mi=4,fA=8,zo=function(i,e,t,r,a,A){if(i<-9999||i>9999)return LA(i,4,a.length>0);var c=Math.abs(i),u=a;if(c===0)return e[0]+u;for(var p=0;c>0&&p<=4;p++){var m=c%10;m===0&&Ln(A,ta)&&u!==""?u=e[m]+u:m>1||m===1&&p===0||m===1&&p===1&&Ln(A,fi)||m===1&&p===1&&Ln(A,mi)&&i>100||m===1&&p>1&&Ln(A,fA)?u=e[m]+(p>0?t[p-1]:"")+u:m===1&&p>0&&(u=t[p-1]+u),c=Math.floor(c/10)}return(i<0?r:"")+u},Fy="",Uy="",Qy="",nh="",LA=function(i,e,t){var r=t?". ":"",a=t?"":"",A=t?", ":"",c=t?" ":"";switch(e){case 0:return""+c;case 1:return""+c;case 2:return""+c;case 5:var u=Bn(i,48,57,!0,r);return u.length<4?"0"+u:u;case 4:return os(i,"",a);case 6:return Js(i,1,3999,Ty,3,r).toLowerCase();case 7:return Js(i,1,3999,Ty,3,r);case 8:return Bn(i,945,969,!1,r);case 9:return Bn(i,97,122,!1,r);case 10:return Bn(i,65,90,!1,r);case 11:return Bn(i,1632,1641,!0,r);case 12:case 49:return Js(i,1,9999,jy,3,r);case 35:return Js(i,1,9999,jy,3,r).toLowerCase();case 13:return Bn(i,2534,2543,!0,r);case 14:case 30:return Bn(i,6112,6121,!0,r);case 15:return os(i,"",a);case 16:return os(i,"",a);case 17:case 48:return zo(i,"",Fy,"",a,fi|mi|fA);case 47:return zo(i,"",Uy,"",a,ta|fi|mi|fA);case 42:return zo(i,"",Fy,"",a,fi|mi|fA);case 41:return zo(i,"",Uy,"",a,ta|fi|mi|fA);case 26:return zo(i,"","",Qy,a,0);case 25:return zo(i,"","",Qy,a,ta|fi|mi);case 31:return zo(i,"","",nh,A,ta|fi|mi);case 33:return zo(i,"","",nh,A,0);case 32:return zo(i,"","",nh,A,ta|fi|mi);case 18:return Bn(i,2406,2415,!0,r);case 20:return Js(i,1,19999,iU,3,r);case 21:return Bn(i,2790,2799,!0,r);case 22:return Bn(i,2662,2671,!0,r);case 22:return Js(i,1,10999,oU,3,r);case 23:return os(i,"");case 24:return os(i,"");case 27:return Bn(i,3302,3311,!0,r);case 28:return os(i,"",a);case 29:return os(i,"",a);case 34:return Bn(i,3792,3801,!0,r);case 37:return Bn(i,6160,6169,!0,r);case 38:return Bn(i,4160,4169,!0,r);case 39:return Bn(i,2918,2927,!0,r);case 40:return Bn(i,1776,1785,!0,r);case 43:return Bn(i,3046,3055,!0,r);case 44:return Bn(i,3174,3183,!0,r);case 45:return Bn(i,3664,3673,!0,r);case 46:return Bn(i,3872,3881,!0,r);case 3:default:return Bn(i,48,57,!0,r)}},cv="data-html2canvas-ignore",Ry=function(){function i(e,t,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=t,this.counters=new rU,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return i.prototype.toIFrame=function(e,t){var r=this,a=sU(e,t);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,c=e.defaultView.pageYOffset,u=a.contentWindow,p=u.document,m=lU(a).then(function(){return gr(r,void 0,void 0,function(){var h,y;return sr(this,function(b){switch(b.label){case 0:return this.scrolledElements.forEach(pU),u&&(u.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(u.scrollY!==t.top||u.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(u.scrollX-t.left,u.scrollY-t.top,0,0))),h=this.options.onclone,y=this.clonedReferenceElement,typeof y>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:p.fonts&&p.fonts.ready?[4,p.fonts.ready]:[3,2];case 1:b.sent(),b.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,AU(p)]:[3,4];case 3:b.sent(),b.label=4;case 4:return typeof h=="function"?[2,Promise.resolve().then(function(){return h(p,y)}).then(function(){return a})]:[2,a]}})})});return p.open(),p.write(dU(document.doctype)+"<html></html>"),uU(this.referenceElement.ownerDocument,A,c),p.replaceChild(p.adoptNode(this.documentElement),p.documentElement),p.close(),m},i.prototype.createElementClone=function(e){if(_h(e,2))debugger;if(sv(e))return this.createCanvasClone(e);if(Iy(e))return this.createVideoClone(e);if(Ey(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Wh(t)&&(Wh(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),ky(t)?this.createCustomElementClone(t):t},i.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return rh(e.style,t),t},i.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var r=[].slice.call(t.cssRules,0).reduce(function(A,c){return c&&typeof c.cssText=="string"?A+c.cssText:A},""),a=e.cloneNode(!1);return a.textContent=r,a}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},i.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var A=e.getContext("2d"),c=a.getContext("2d");if(c)if(!this.options.allowTaint&&A)c.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var u=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(u){var p=u.getContextAttributes();(p==null?void 0:p.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}c.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},i.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var r=t.getContext("2d");try{return r&&(r.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||r.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},i.prototype.appendChildNode=function(e,t,r){(!ra(t)||!nU(t)&&!t.hasAttribute(cv)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!ra(t)||!Ey(t))&&e.appendChild(this.cloneNode(t,r))},i.prototype.cloneChildNodes=function(e,t,r){for(var a=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if(ra(A)&&Av(A)&&typeof A.assignedNodes=="function"){var c=A.assignedNodes();c.length&&c.forEach(function(u){return a.appendChildNode(t,u,r)})}else this.appendChildNode(t,A,r)},i.prototype.cloneNode=function(e,t){if(ov(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&ra(e)&&(Kh(e)||Fc(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var A=r.getComputedStyle(e),c=r.getComputedStyle(e,":before"),u=r.getComputedStyle(e,":after");this.referenceElement===e&&Kh(a)&&(this.clonedReferenceElement=a),hf(a)&&fU(a);var p=this.counters.parse(new dy(this.context,A)),m=this.resolvePseudoContent(e,a,c,SA.BEFORE);ky(e)&&(t=!0),Iy(e)||this.cloneChildNodes(e,a,t),m&&a.insertBefore(m,a.firstChild);var h=this.resolvePseudoContent(e,a,u,SA.AFTER);return h&&a.appendChild(h),this.counters.pop(p),(A&&(this.options.copyStyles||Fc(e))&&!av(e)||t)&&rh(A,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(id(e)||sd(e))&&(id(a)||sd(a))&&(a.value=e.value),a}return e.cloneNode(!1)},i.prototype.resolvePseudoContent=function(e,t,r,a){var A=this;if(r){var c=r.content,u=t.ownerDocument;if(!(!u||!c||c==="none"||c==="-moz-alt-content"||r.display==="none")){this.counters.parse(new dy(this.context,r));var p=new qj(this.context,r),m=u.createElement("html2canvaspseudoelement");rh(r,m),p.content.forEach(function(y){if(y.type===0)m.appendChild(u.createTextNode(y.value));else if(y.type===22){var b=u.createElement("img");b.src=y.value,b.style.opacity="1",m.appendChild(b)}else if(y.type===18){if(y.name==="attr"){var L=y.values.filter(Xt);L.length&&m.appendChild(u.createTextNode(e.getAttribute(L[0].value)||""))}else if(y.name==="counter"){var S=y.values.filter(ga),U=S[0],E=S[1];if(U&&Xt(U)){var P=A.counters.getCounterValue(U.value),O=E&&Xt(E)?Nh.parse(A.context,E.value):3;m.appendChild(u.createTextNode(LA(P,O,!1)))}}else if(y.name==="counters"){var ve=y.values.filter(ga),U=ve[0],ce=ve[1],E=ve[2];if(U&&Xt(U)){var Q=A.counters.getCounterValues(U.value),V=E&&Xt(E)?Nh.parse(A.context,E.value):3,Z=ce&&ce.type===0?ce.value:"",le=Q.map(function(we){return LA(we,V,!1)}).join(Z);m.appendChild(u.createTextNode(le))}}}else if(y.type===20)switch(y.value){case"open-quote":m.appendChild(u.createTextNode(cy(p.quotes,A.quoteDepth++,!0)));break;case"close-quote":m.appendChild(u.createTextNode(cy(p.quotes,--A.quoteDepth,!1)));break;default:m.appendChild(u.createTextNode(y.value))}}),m.className=Gh+" "+Vh;var h=a===SA.BEFORE?" "+Gh:" "+Vh;return Fc(t)?t.className.baseValue+=h:t.className+=h,m}}},i.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},i}(),SA;(function(i){i[i.BEFORE=0]="BEFORE",i[i.AFTER=1]="AFTER"})(SA||(SA={}));var sU=function(i,e){var t=i.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(cv,"true"),i.body.appendChild(t),t},aU=function(i){return new Promise(function(e){if(i.complete){e();return}if(!i.src){e();return}i.onload=e,i.onerror=e})},AU=function(i){return Promise.all([].slice.call(i.images,0).map(aU))},lU=function(i){return new Promise(function(e,t){var r=i.contentWindow;if(!r)return t("No window assigned for iframe");var a=r.document;r.onload=i.onload=function(){r.onload=i.onload=null;var A=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(A),e(i))},50)}})},cU=["all","d","content"],rh=function(i,e){for(var t=i.length-1;t>=0;t--){var r=i.item(t);cU.indexOf(r)===-1&&e.style.setProperty(r,i.getPropertyValue(r))}return e},dU=function(i){var e="";return i&&(e+="<!DOCTYPE ",i.name&&(e+=i.name),i.internalSubset&&(e+=i.internalSubset),i.publicId&&(e+='"'+i.publicId+'"'),i.systemId&&(e+='"'+i.systemId+'"'),e+=">"),e},uU=function(i,e,t){i&&i.defaultView&&(e!==i.defaultView.pageXOffset||t!==i.defaultView.pageYOffset)&&i.defaultView.scrollTo(e,t)},pU=function(i){var e=i[0],t=i[1],r=i[2];e.scrollLeft=t,e.scrollTop=r},hU=":before",gU=":after",Gh="___html2canvas___pseudoelement_before",Vh="___html2canvas___pseudoelement_after",My=`{
    content: "" !important;
    display: none !important;
}`,fU=function(i){mU(i,"."+Gh+hU+My+`
         .`+Vh+gU+My)},mU=function(i,e){var t=i.ownerDocument;if(t){var r=t.createElement("style");r.textContent=e,i.appendChild(r)}},dv=function(){function i(){}return i.getOrigin=function(e){var t=i._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},i.isSameOrigin=function(e){return i.getOrigin(e)===i._origin},i.setContext=function(e){i._link=e.document.createElement("a"),i._origin=i.getOrigin(e.location.href)},i._origin="about:blank",i}(),xU=function(){function i(e,t){this.context=e,this._options=t,this._cache={}}return i.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(ih(e)||vU(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},i.prototype.match=function(e){return this._cache[e]},i.prototype.loadImage=function(e){return gr(this,void 0,void 0,function(){var t,r,a,A,c=this;return sr(this,function(u){switch(u.label){case 0:return t=dv.isSameOrigin(e),r=!oh(e)&&this._options.useCORS===!0&&Jn.SUPPORT_CORS_IMAGES&&!t,a=!oh(e)&&!t&&!ih(e)&&typeof this._options.proxy=="string"&&Jn.SUPPORT_CORS_XHR&&!r,!t&&this._options.allowTaint===!1&&!oh(e)&&!ih(e)&&!a&&!r?[2]:(A=e,a?[4,this.proxy(A)]:[3,2]);case 1:A=u.sent(),u.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(p,m){var h=new Image;h.onload=function(){return p(h)},h.onerror=m,(CU(A)||r)&&(h.crossOrigin="anonymous"),h.src=A,h.complete===!0&&setTimeout(function(){return p(h)},500),c._options.imageTimeout>0&&setTimeout(function(){return m("Timed out ("+c._options.imageTimeout+"ms) loading image")},c._options.imageTimeout)})];case 3:return[2,u.sent()]}})})},i.prototype.has=function(e){return typeof this._cache[e]<"u"},i.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},i.prototype.proxy=function(e){var t=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(A,c){var u=Jn.SUPPORT_RESPONSE_TYPE?"blob":"text",p=new XMLHttpRequest;p.onload=function(){if(p.status===200)if(u==="text")A(p.response);else{var y=new FileReader;y.addEventListener("load",function(){return A(y.result)},!1),y.addEventListener("error",function(b){return c(b)},!1),y.readAsDataURL(p.response)}else c("Failed to proxy resource "+a+" with status code "+p.status)},p.onerror=c;var m=r.indexOf("?")>-1?"&":"?";if(p.open("GET",""+r+m+"url="+encodeURIComponent(e)+"&responseType="+u),u!=="text"&&p instanceof XMLHttpRequest&&(p.responseType=u),t._options.imageTimeout){var h=t._options.imageTimeout;p.timeout=h,p.ontimeout=function(){return c("Timed out ("+h+"ms) proxying "+a)}}p.send()})},i}(),yU=/^data:image\/svg\+xml/i,bU=/^data:image\/.*;base64,/i,wU=/^data:image\/.*/i,vU=function(i){return Jn.SUPPORT_SVG_DRAWING||!BU(i)},oh=function(i){return wU.test(i)},CU=function(i){return bU.test(i)},ih=function(i){return i.substr(0,4)==="blob"},BU=function(i){return i.substr(-3).toLowerCase()==="svg"||yU.test(i)},nt=function(){function i(e,t){this.type=0,this.x=e,this.y=t}return i.prototype.add=function(e,t){return new i(this.x+e,this.y+t)},i}(),Xs=function(i,e,t){return new nt(i.x+(e.x-i.x)*t,i.y+(e.y-i.y)*t)},xc=function(){function i(e,t,r,a){this.type=1,this.start=e,this.startControl=t,this.endControl=r,this.end=a}return i.prototype.subdivide=function(e,t){var r=Xs(this.start,this.startControl,e),a=Xs(this.startControl,this.endControl,e),A=Xs(this.endControl,this.end,e),c=Xs(r,a,e),u=Xs(a,A,e),p=Xs(c,u,e);return t?new i(this.start,r,c,p):new i(p,u,A,this.end)},i.prototype.add=function(e,t){return new i(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},i.prototype.reverse=function(){return new i(this.end,this.endControl,this.startControl,this.start)},i}(),$r=function(i){return i.type===1},SU=function(){function i(e){var t=e.styles,r=e.bounds,a=hA(t.borderTopLeftRadius,r.width,r.height),A=a[0],c=a[1],u=hA(t.borderTopRightRadius,r.width,r.height),p=u[0],m=u[1],h=hA(t.borderBottomRightRadius,r.width,r.height),y=h[0],b=h[1],L=hA(t.borderBottomLeftRadius,r.width,r.height),S=L[0],U=L[1],E=[];E.push((A+p)/r.width),E.push((S+y)/r.width),E.push((c+U)/r.height),E.push((m+b)/r.height);var P=Math.max.apply(Math,E);P>1&&(A/=P,c/=P,p/=P,m/=P,y/=P,b/=P,S/=P,U/=P);var O=r.width-p,ve=r.height-b,ce=r.width-y,Q=r.height-U,V=t.borderTopWidth,Z=t.borderRightWidth,le=t.borderBottomWidth,$=t.borderLeftWidth,ue=rn(t.paddingTop,e.bounds.width),we=rn(t.paddingRight,e.bounds.width),ge=rn(t.paddingBottom,e.bounds.width),te=rn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||c>0?ln(r.left+$/3,r.top+V/3,A-$/3,c-V/3,zt.TOP_LEFT):new nt(r.left+$/3,r.top+V/3),this.topRightBorderDoubleOuterBox=A>0||c>0?ln(r.left+O,r.top+V/3,p-Z/3,m-V/3,zt.TOP_RIGHT):new nt(r.left+r.width-Z/3,r.top+V/3),this.bottomRightBorderDoubleOuterBox=y>0||b>0?ln(r.left+ce,r.top+ve,y-Z/3,b-le/3,zt.BOTTOM_RIGHT):new nt(r.left+r.width-Z/3,r.top+r.height-le/3),this.bottomLeftBorderDoubleOuterBox=S>0||U>0?ln(r.left+$/3,r.top+Q,S-$/3,U-le/3,zt.BOTTOM_LEFT):new nt(r.left+$/3,r.top+r.height-le/3),this.topLeftBorderDoubleInnerBox=A>0||c>0?ln(r.left+$*2/3,r.top+V*2/3,A-$*2/3,c-V*2/3,zt.TOP_LEFT):new nt(r.left+$*2/3,r.top+V*2/3),this.topRightBorderDoubleInnerBox=A>0||c>0?ln(r.left+O,r.top+V*2/3,p-Z*2/3,m-V*2/3,zt.TOP_RIGHT):new nt(r.left+r.width-Z*2/3,r.top+V*2/3),this.bottomRightBorderDoubleInnerBox=y>0||b>0?ln(r.left+ce,r.top+ve,y-Z*2/3,b-le*2/3,zt.BOTTOM_RIGHT):new nt(r.left+r.width-Z*2/3,r.top+r.height-le*2/3),this.bottomLeftBorderDoubleInnerBox=S>0||U>0?ln(r.left+$*2/3,r.top+Q,S-$*2/3,U-le*2/3,zt.BOTTOM_LEFT):new nt(r.left+$*2/3,r.top+r.height-le*2/3),this.topLeftBorderStroke=A>0||c>0?ln(r.left+$/2,r.top+V/2,A-$/2,c-V/2,zt.TOP_LEFT):new nt(r.left+$/2,r.top+V/2),this.topRightBorderStroke=A>0||c>0?ln(r.left+O,r.top+V/2,p-Z/2,m-V/2,zt.TOP_RIGHT):new nt(r.left+r.width-Z/2,r.top+V/2),this.bottomRightBorderStroke=y>0||b>0?ln(r.left+ce,r.top+ve,y-Z/2,b-le/2,zt.BOTTOM_RIGHT):new nt(r.left+r.width-Z/2,r.top+r.height-le/2),this.bottomLeftBorderStroke=S>0||U>0?ln(r.left+$/2,r.top+Q,S-$/2,U-le/2,zt.BOTTOM_LEFT):new nt(r.left+$/2,r.top+r.height-le/2),this.topLeftBorderBox=A>0||c>0?ln(r.left,r.top,A,c,zt.TOP_LEFT):new nt(r.left,r.top),this.topRightBorderBox=p>0||m>0?ln(r.left+O,r.top,p,m,zt.TOP_RIGHT):new nt(r.left+r.width,r.top),this.bottomRightBorderBox=y>0||b>0?ln(r.left+ce,r.top+ve,y,b,zt.BOTTOM_RIGHT):new nt(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=S>0||U>0?ln(r.left,r.top+Q,S,U,zt.BOTTOM_LEFT):new nt(r.left,r.top+r.height),this.topLeftPaddingBox=A>0||c>0?ln(r.left+$,r.top+V,Math.max(0,A-$),Math.max(0,c-V),zt.TOP_LEFT):new nt(r.left+$,r.top+V),this.topRightPaddingBox=p>0||m>0?ln(r.left+Math.min(O,r.width-Z),r.top+V,O>r.width+Z?0:Math.max(0,p-Z),Math.max(0,m-V),zt.TOP_RIGHT):new nt(r.left+r.width-Z,r.top+V),this.bottomRightPaddingBox=y>0||b>0?ln(r.left+Math.min(ce,r.width-$),r.top+Math.min(ve,r.height-le),Math.max(0,y-Z),Math.max(0,b-le),zt.BOTTOM_RIGHT):new nt(r.left+r.width-Z,r.top+r.height-le),this.bottomLeftPaddingBox=S>0||U>0?ln(r.left+$,r.top+Math.min(Q,r.height-le),Math.max(0,S-$),Math.max(0,U-le),zt.BOTTOM_LEFT):new nt(r.left+$,r.top+r.height-le),this.topLeftContentBox=A>0||c>0?ln(r.left+$+te,r.top+V+ue,Math.max(0,A-($+te)),Math.max(0,c-(V+ue)),zt.TOP_LEFT):new nt(r.left+$+te,r.top+V+ue),this.topRightContentBox=p>0||m>0?ln(r.left+Math.min(O,r.width+$+te),r.top+V+ue,O>r.width+$+te?0:p-$+te,m-(V+ue),zt.TOP_RIGHT):new nt(r.left+r.width-(Z+we),r.top+V+ue),this.bottomRightContentBox=y>0||b>0?ln(r.left+Math.min(ce,r.width-($+te)),r.top+Math.min(ve,r.height+V+ue),Math.max(0,y-(Z+we)),b-(le+ge),zt.BOTTOM_RIGHT):new nt(r.left+r.width-(Z+we),r.top+r.height-(le+ge)),this.bottomLeftContentBox=S>0||U>0?ln(r.left+$+te,r.top+Q,Math.max(0,S-($+te)),U-(le+ge),zt.BOTTOM_LEFT):new nt(r.left+$+te,r.top+r.height-(le+ge))}return i}(),zt;(function(i){i[i.TOP_LEFT=0]="TOP_LEFT",i[i.TOP_RIGHT=1]="TOP_RIGHT",i[i.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",i[i.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(zt||(zt={}));var ln=function(i,e,t,r,a){var A=4*((Math.sqrt(2)-1)/3),c=t*A,u=r*A,p=i+t,m=e+r;switch(a){case zt.TOP_LEFT:return new xc(new nt(i,m),new nt(i,m-u),new nt(p-c,e),new nt(p,e));case zt.TOP_RIGHT:return new xc(new nt(i,e),new nt(i+c,e),new nt(p,m-u),new nt(p,m));case zt.BOTTOM_RIGHT:return new xc(new nt(p,e),new nt(p,e+u),new nt(i+c,m),new nt(i,m));case zt.BOTTOM_LEFT:default:return new xc(new nt(p,m),new nt(p-c,m),new nt(i,e+u),new nt(i,e))}},ad=function(i){return[i.topLeftBorderBox,i.topRightBorderBox,i.bottomRightBorderBox,i.bottomLeftBorderBox]},IU=function(i){return[i.topLeftContentBox,i.topRightContentBox,i.bottomRightContentBox,i.bottomLeftContentBox]},Ad=function(i){return[i.topLeftPaddingBox,i.topRightPaddingBox,i.bottomRightPaddingBox,i.bottomLeftPaddingBox]},EU=function(){function i(e,t,r){this.offsetX=e,this.offsetY=t,this.matrix=r,this.type=0,this.target=6}return i}(),yc=function(){function i(e,t){this.path=e,this.target=t,this.type=1}return i}(),kU=function(){function i(e){this.opacity=e,this.type=2,this.target=6}return i}(),TU=function(i){return i.type===0},uv=function(i){return i.type===1},jU=function(i){return i.type===2},Ly=function(i,e){return i.length===e.length?i.some(function(t,r){return t===e[r]}):!1},FU=function(i,e,t,r,a){return i.map(function(A,c){switch(c){case 0:return A.add(e,t);case 1:return A.add(e+r,t);case 2:return A.add(e+r,t+a);case 3:return A.add(e,t+a)}return A})},pv=function(){function i(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return i}(),hv=function(){function i(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new SU(this.container),this.container.styles.opacity<1&&this.effects.push(new kU(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new EU(r,a,A))}if(this.container.styles.overflowX!==0){var c=ad(this.curves),u=Ad(this.curves);Ly(c,u)?this.effects.push(new yc(c,6)):(this.effects.push(new yc(c,2)),this.effects.push(new yc(u,4)))}}return i.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,a=this.effects.slice(0);r;){var A=r.effects.filter(function(p){return!uv(p)});if(t||r.container.styles.position!==0||!r.parent){if(a.unshift.apply(a,A),t=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var c=ad(r.curves),u=Ad(r.curves);Ly(c,u)||a.unshift(new yc(u,6))}}else a.unshift.apply(a,A);r=r.parent}return a.filter(function(p){return Ln(p.target,e)})},i}(),$h=function(i,e,t,r){i.container.elements.forEach(function(a){var A=Ln(a.flags,4),c=Ln(a.flags,2),u=new hv(a,i);Ln(a.styles.display,2048)&&r.push(u);var p=Ln(a.flags,8)?[]:r;if(A||c){var m=A||a.styles.isPositioned()?t:e,h=new pv(u);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var y=a.styles.zIndex.order;if(y<0){var b=0;m.negativeZIndex.some(function(S,U){return y>S.element.container.styles.zIndex.order?(b=U,!1):b>0}),m.negativeZIndex.splice(b,0,h)}else if(y>0){var L=0;m.positiveZIndex.some(function(S,U){return y>=S.element.container.styles.zIndex.order?(L=U+1,!1):L>0}),m.positiveZIndex.splice(L,0,h)}else m.zeroOrAutoZIndexOrTransformedOrOpacity.push(h)}else a.styles.isFloating()?m.nonPositionedFloats.push(h):m.nonPositionedInlineLevel.push(h);$h(u,h,A?h:t,p)}else a.styles.isInlineLevel()?e.inlineLevel.push(u):e.nonInlineLevel.push(u),$h(u,e,t,p);Ln(a.flags,8)&&gv(a,p)})},gv=function(i,e){for(var t=i instanceof zh?i.start:1,r=i instanceof zh?i.reversed:!1,a=0;a<e.length;a++){var A=e[a];A.container instanceof qw&&typeof A.container.value=="number"&&A.container.value!==0&&(t=A.container.value),A.listValue=LA(t,A.container.styles.listStyleType,!0),t+=r?-1:1}},UU=function(i){var e=new hv(i,null),t=new pv(e),r=[];return $h(e,t,t,r),gv(e.container,r),t},Dy=function(i,e){switch(e){case 0:return Jr(i.topLeftBorderBox,i.topLeftPaddingBox,i.topRightBorderBox,i.topRightPaddingBox);case 1:return Jr(i.topRightBorderBox,i.topRightPaddingBox,i.bottomRightBorderBox,i.bottomRightPaddingBox);case 2:return Jr(i.bottomRightBorderBox,i.bottomRightPaddingBox,i.bottomLeftBorderBox,i.bottomLeftPaddingBox);case 3:default:return Jr(i.bottomLeftBorderBox,i.bottomLeftPaddingBox,i.topLeftBorderBox,i.topLeftPaddingBox)}},QU=function(i,e){switch(e){case 0:return Jr(i.topLeftBorderBox,i.topLeftBorderDoubleOuterBox,i.topRightBorderBox,i.topRightBorderDoubleOuterBox);case 1:return Jr(i.topRightBorderBox,i.topRightBorderDoubleOuterBox,i.bottomRightBorderBox,i.bottomRightBorderDoubleOuterBox);case 2:return Jr(i.bottomRightBorderBox,i.bottomRightBorderDoubleOuterBox,i.bottomLeftBorderBox,i.bottomLeftBorderDoubleOuterBox);case 3:default:return Jr(i.bottomLeftBorderBox,i.bottomLeftBorderDoubleOuterBox,i.topLeftBorderBox,i.topLeftBorderDoubleOuterBox)}},RU=function(i,e){switch(e){case 0:return Jr(i.topLeftBorderDoubleInnerBox,i.topLeftPaddingBox,i.topRightBorderDoubleInnerBox,i.topRightPaddingBox);case 1:return Jr(i.topRightBorderDoubleInnerBox,i.topRightPaddingBox,i.bottomRightBorderDoubleInnerBox,i.bottomRightPaddingBox);case 2:return Jr(i.bottomRightBorderDoubleInnerBox,i.bottomRightPaddingBox,i.bottomLeftBorderDoubleInnerBox,i.bottomLeftPaddingBox);case 3:default:return Jr(i.bottomLeftBorderDoubleInnerBox,i.bottomLeftPaddingBox,i.topLeftBorderDoubleInnerBox,i.topLeftPaddingBox)}},MU=function(i,e){switch(e){case 0:return bc(i.topLeftBorderStroke,i.topRightBorderStroke);case 1:return bc(i.topRightBorderStroke,i.bottomRightBorderStroke);case 2:return bc(i.bottomRightBorderStroke,i.bottomLeftBorderStroke);case 3:default:return bc(i.bottomLeftBorderStroke,i.topLeftBorderStroke)}},bc=function(i,e){var t=[];return $r(i)?t.push(i.subdivide(.5,!1)):t.push(i),$r(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Jr=function(i,e,t,r){var a=[];return $r(i)?a.push(i.subdivide(.5,!1)):a.push(i),$r(t)?a.push(t.subdivide(.5,!0)):a.push(t),$r(r)?a.push(r.subdivide(.5,!0).reverse()):a.push(r),$r(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},fv=function(i){var e=i.bounds,t=i.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},ld=function(i){var e=i.styles,t=i.bounds,r=rn(e.paddingLeft,t.width),a=rn(e.paddingRight,t.width),A=rn(e.paddingTop,t.width),c=rn(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+a),-(e.borderTopWidth+e.borderBottomWidth+A+c))},LU=function(i,e){return i===0?e.bounds:i===2?ld(e):fv(e)},DU=function(i,e){return i===0?e.bounds:i===2?ld(e):fv(e)},sh=function(i,e,t){var r=LU(na(i.styles.backgroundOrigin,e),i),a=DU(na(i.styles.backgroundClip,e),i),A=PU(na(i.styles.backgroundSize,e),t,r),c=A[0],u=A[1],p=hA(na(i.styles.backgroundPosition,e),r.width-c,r.height-u),m=HU(na(i.styles.backgroundRepeat,e),p,A,r,a),h=Math.round(r.left+p[0]),y=Math.round(r.top+p[1]);return[m,h,y,c,u]},qs=function(i){return Xt(i)&&i.value===da.AUTO},wc=function(i){return typeof i=="number"},PU=function(i,e,t){var r=e[0],a=e[1],A=e[2],c=i[0],u=i[1];if(!c)return[0,0];if(jn(c)&&u&&jn(u))return[rn(c,t.width),rn(u,t.height)];var p=wc(A);if(Xt(c)&&(c.value===da.CONTAIN||c.value===da.COVER)){if(wc(A)){var m=t.width/t.height;return m<A!=(c.value===da.COVER)?[t.width,t.width/A]:[t.height*A,t.height]}return[t.width,t.height]}var h=wc(r),y=wc(a),b=h||y;if(qs(c)&&(!u||qs(u))){if(h&&y)return[r,a];if(!p&&!b)return[t.width,t.height];if(b&&p){var L=h?r:a*A,S=y?a:r/A;return[L,S]}var U=h?r:t.width,E=y?a:t.height;return[U,E]}if(p){var P=0,O=0;return jn(c)?P=rn(c,t.width):jn(u)&&(O=rn(u,t.height)),qs(c)?P=O*A:(!u||qs(u))&&(O=P/A),[P,O]}var ve=null,ce=null;if(jn(c)?ve=rn(c,t.width):u&&jn(u)&&(ce=rn(u,t.height)),ve!==null&&(!u||qs(u))&&(ce=h&&y?ve/r*a:t.height),ce!==null&&qs(c)&&(ve=h&&y?ce/a*r:t.width),ve!==null&&ce!==null)return[ve,ce];throw new Error("Unable to calculate background-size for element")},na=function(i,e){var t=i[e];return typeof t>"u"?i[0]:t},HU=function(i,e,t,r,a){var A=e[0],c=e[1],u=t[0],p=t[1];switch(i){case 2:return[new nt(Math.round(r.left),Math.round(r.top+c)),new nt(Math.round(r.left+r.width),Math.round(r.top+c)),new nt(Math.round(r.left+r.width),Math.round(p+r.top+c)),new nt(Math.round(r.left),Math.round(p+r.top+c))];case 3:return[new nt(Math.round(r.left+A),Math.round(r.top)),new nt(Math.round(r.left+A+u),Math.round(r.top)),new nt(Math.round(r.left+A+u),Math.round(r.height+r.top)),new nt(Math.round(r.left+A),Math.round(r.height+r.top))];case 1:return[new nt(Math.round(r.left+A),Math.round(r.top+c)),new nt(Math.round(r.left+A+u),Math.round(r.top+c)),new nt(Math.round(r.left+A+u),Math.round(r.top+c+p)),new nt(Math.round(r.left+A),Math.round(r.top+c+p))];default:return[new nt(Math.round(a.left),Math.round(a.top)),new nt(Math.round(a.left+a.width),Math.round(a.top)),new nt(Math.round(a.left+a.width),Math.round(a.height+a.top)),new nt(Math.round(a.left),Math.round(a.height+a.top))]}},NU="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Py="Hidden Text",_U=function(){function i(e){this._data={},this._document=e}return i.prototype.parseMetrics=function(e,t){var r=this._document.createElement("div"),a=this._document.createElement("img"),A=this._document.createElement("span"),c=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",c.appendChild(r),a.src=NU,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=t,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode(Py)),r.appendChild(A),r.appendChild(a);var u=a.offsetTop-A.offsetTop+2;r.removeChild(A),r.appendChild(this._document.createTextNode(Py)),r.style.lineHeight="normal",a.style.verticalAlign="super";var p=a.offsetTop-r.offsetTop+2;return c.removeChild(r),{baseline:u,middle:p}},i.prototype.getMetrics=function(e,t){var r=e+" "+t;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,t)),this._data[r]},i}(),mv=function(){function i(e,t){this.context=e,this.options=t}return i}(),OU=1e4,zU=function(i){fo(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a._activeEffects=[],a.canvas=r.canvas?r.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),r.canvas||(a.canvas.width=Math.floor(r.width*r.scale),a.canvas.height=Math.floor(r.height*r.scale),a.canvas.style.width=r.width+"px",a.canvas.style.height=r.height+"px"),a.fontMetrics=new _U(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-r.x,-r.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),a}return e.prototype.applyEffects=function(t){for(var r=this;this._activeEffects.length;)this.popEffect();t.forEach(function(a){return r.applyEffect(a)})},e.prototype.applyEffect=function(t){this.ctx.save(),jU(t)&&(this.ctx.globalAlpha=t.opacity),TU(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),uv(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return gr(this,void 0,void 0,function(){var r;return sr(this,function(a){switch(a.label){case 0:return r=t.element.container.styles,r.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return gr(this,void 0,void 0,function(){return sr(this,function(r){switch(r.label){case 0:if(Ln(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,r,a){var A=this;if(r===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+a);else{var c=uf(t.text);c.reduce(function(u,p){return A.ctx.fillText(p,u,t.bounds.top+a),u+A.ctx.measureText(p).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var r=t.fontVariant.filter(function(c){return c==="normal"||c==="small-caps"}).join(""),a=$U(t.fontFamily).join(", "),A=_A(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,r,t.fontWeight,A,a].join(" "),a,A]},e.prototype.renderTextNode=function(t,r){return gr(this,void 0,void 0,function(){var a,A,c,u,p,m,h,y,b=this;return sr(this,function(L){return a=this.createFontStyle(r),A=a[0],c=a[1],u=a[2],this.ctx.font=A,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",p=this.fontMetrics.getMetrics(c,u),m=p.baseline,h=p.middle,y=r.paintOrder,t.textBounds.forEach(function(S){y.forEach(function(U){switch(U){case 0:b.ctx.fillStyle=Wn(r.color),b.renderTextWithLetterSpacing(S,r.letterSpacing,m);var E=r.textShadow;E.length&&S.text.trim().length&&(E.slice(0).reverse().forEach(function(P){b.ctx.shadowColor=Wn(P.color),b.ctx.shadowOffsetX=P.offsetX.number*b.options.scale,b.ctx.shadowOffsetY=P.offsetY.number*b.options.scale,b.ctx.shadowBlur=P.blur.number,b.renderTextWithLetterSpacing(S,r.letterSpacing,m)}),b.ctx.shadowColor="",b.ctx.shadowOffsetX=0,b.ctx.shadowOffsetY=0,b.ctx.shadowBlur=0),r.textDecorationLine.length&&(b.ctx.fillStyle=Wn(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(P){switch(P){case 1:b.ctx.fillRect(S.bounds.left,Math.round(S.bounds.top+m),S.bounds.width,1);break;case 2:b.ctx.fillRect(S.bounds.left,Math.round(S.bounds.top),S.bounds.width,1);break;case 3:b.ctx.fillRect(S.bounds.left,Math.ceil(S.bounds.top+h),S.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&S.text.trim().length&&(b.ctx.strokeStyle=Wn(r.webkitTextStrokeColor),b.ctx.lineWidth=r.webkitTextStrokeWidth,b.ctx.lineJoin=window.chrome?"miter":"round",b.ctx.strokeText(S.text,S.bounds.left,S.bounds.top+m)),b.ctx.strokeStyle="",b.ctx.lineWidth=0,b.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,r,a){if(a&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var A=ld(t),c=Ad(r);this.path(c),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,t.intrinsicWidth,t.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return gr(this,void 0,void 0,function(){var r,a,A,c,u,p,O,O,m,h,y,b,ce,L,S,Q,U,E,P,O,ve,ce,Q;return sr(this,function(V){switch(V.label){case 0:this.applyEffects(t.getEffects(4)),r=t.container,a=t.curves,A=r.styles,c=0,u=r.textNodes,V.label=1;case 1:return c<u.length?(p=u[c],[4,this.renderTextNode(p,A)]):[3,4];case 2:V.sent(),V.label=3;case 3:return c++,[3,1];case 4:if(!(r instanceof Yw))return[3,8];V.label=5;case 5:return V.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return O=V.sent(),this.renderReplacedElement(r,a,O),[3,8];case 7:return V.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof Jw&&this.renderReplacedElement(r,a,r.canvas),!(r instanceof Xw))return[3,12];V.label=9;case 9:return V.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return O=V.sent(),this.renderReplacedElement(r,a,O),[3,12];case 11:return V.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof tv&&r.tree?(m=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,m.render(r.tree)]):[3,14];case 13:h=V.sent(),r.width&&r.height&&this.ctx.drawImage(h,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),V.label=14;case 14:if(r instanceof pf&&(y=Math.min(r.bounds.width,r.bounds.height),r.type===rd?r.checked&&(this.ctx.save(),this.path([new nt(r.bounds.left+y*.39363,r.bounds.top+y*.79),new nt(r.bounds.left+y*.16,r.bounds.top+y*.5549),new nt(r.bounds.left+y*.27347,r.bounds.top+y*.44071),new nt(r.bounds.left+y*.39694,r.bounds.top+y*.5649),new nt(r.bounds.left+y*.72983,r.bounds.top+y*.23),new nt(r.bounds.left+y*.84,r.bounds.top+y*.34085),new nt(r.bounds.left+y*.39363,r.bounds.top+y*.79)]),this.ctx.fillStyle=Wn(Sy),this.ctx.fill(),this.ctx.restore()):r.type===od&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+y/2,r.bounds.top+y/2,y/4,0,Math.PI*2,!0),this.ctx.fillStyle=Wn(Sy),this.ctx.fill(),this.ctx.restore())),KU(r)&&r.value.length){switch(b=this.createFontStyle(A),ce=b[0],L=b[1],S=this.fontMetrics.getMetrics(ce,L).baseline,this.ctx.font=ce,this.ctx.fillStyle=Wn(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=GU(r.styles.textAlign),Q=ld(r),U=0,r.styles.textAlign){case 1:U+=Q.width/2;break;case 2:U+=Q.width;break}E=Q.add(U,0,0,-Q.height/2+1),this.ctx.save(),this.path([new nt(Q.left,Q.top),new nt(Q.left+Q.width,Q.top),new nt(Q.left+Q.width,Q.top+Q.height),new nt(Q.left,Q.top+Q.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new BA(r.value,E),A.letterSpacing,S),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ln(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(P=r.styles.listStyleImage,P.type!==0)return[3,18];O=void 0,ve=P.url,V.label=15;case 15:return V.trys.push([15,17,,18]),[4,this.context.cache.match(ve)];case 16:return O=V.sent(),this.ctx.drawImage(O,r.bounds.left-(O.width+10),r.bounds.top),[3,18];case 17:return V.sent(),this.context.logger.error("Error loading list-style-image "+ve),[3,18];case 18:return[3,20];case 19:t.listValue&&r.styles.listStyleType!==-1&&(ce=this.createFontStyle(A)[0],this.ctx.font=ce,this.ctx.fillStyle=Wn(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Q=new Jo(r.bounds.left,r.bounds.top+rn(r.styles.paddingTop,r.bounds.width),r.bounds.width,Ay(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new BA(t.listValue,Q),A.letterSpacing,Ay(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),V.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return gr(this,void 0,void 0,function(){var r,a,P,A,c,P,u,p,P,m,h,P,y,b,P,L,S,P,U,E,P;return sr(this,function(O){switch(O.label){case 0:if(Ln(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:O.sent(),r=0,a=t.negativeZIndex,O.label=2;case 2:return r<a.length?(P=a[r],[4,this.renderStack(P)]):[3,5];case 3:O.sent(),O.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:O.sent(),A=0,c=t.nonInlineLevel,O.label=7;case 7:return A<c.length?(P=c[A],[4,this.renderNode(P)]):[3,10];case 8:O.sent(),O.label=9;case 9:return A++,[3,7];case 10:u=0,p=t.nonPositionedFloats,O.label=11;case 11:return u<p.length?(P=p[u],[4,this.renderStack(P)]):[3,14];case 12:O.sent(),O.label=13;case 13:return u++,[3,11];case 14:m=0,h=t.nonPositionedInlineLevel,O.label=15;case 15:return m<h.length?(P=h[m],[4,this.renderStack(P)]):[3,18];case 16:O.sent(),O.label=17;case 17:return m++,[3,15];case 18:y=0,b=t.inlineLevel,O.label=19;case 19:return y<b.length?(P=b[y],[4,this.renderNode(P)]):[3,22];case 20:O.sent(),O.label=21;case 21:return y++,[3,19];case 22:L=0,S=t.zeroOrAutoZIndexOrTransformedOrOpacity,O.label=23;case 23:return L<S.length?(P=S[L],[4,this.renderStack(P)]):[3,26];case 24:O.sent(),O.label=25;case 25:return L++,[3,23];case 26:U=0,E=t.positiveZIndex,O.label=27;case 27:return U<E.length?(P=E[U],[4,this.renderStack(P)]):[3,30];case 28:O.sent(),O.label=29;case 29:return U++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var r=this;t.forEach(function(a,A){var c=$r(a)?a.start:a;A===0?r.ctx.moveTo(c.x,c.y):r.ctx.lineTo(c.x,c.y),$r(a)&&r.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(t,r,a,A){this.path(t),this.ctx.fillStyle=r,this.ctx.translate(a,A),this.ctx.fill(),this.ctx.translate(-a,-A)},e.prototype.resizeImage=function(t,r,a){var A;if(t.width===r&&t.height===a)return t;var c=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,u=c.createElement("canvas");u.width=Math.max(1,r),u.height=Math.max(1,a);var p=u.getContext("2d");return p.drawImage(t,0,0,t.width,t.height,0,0,r,a),u},e.prototype.renderBackgroundImage=function(t){return gr(this,void 0,void 0,function(){var r,a,A,c,u,p;return sr(this,function(m){switch(m.label){case 0:r=t.styles.backgroundImage.length-1,a=function(h){var y,b,L,ue,me,N,te,Me,le,S,ue,me,N,te,Me,U,E,P,O,ve,ce,Q,V,Z,le,$,ue,we,ge,te,Me,ie,me,N,be,H,M,I,_,Fe,Y,D;return sr(this,function(K){switch(K.label){case 0:if(h.type!==0)return[3,5];y=void 0,b=h.url,K.label=1;case 1:return K.trys.push([1,3,,4]),[4,A.context.cache.match(b)];case 2:return y=K.sent(),[3,4];case 3:return K.sent(),A.context.logger.error("Error loading background-image "+b),[3,4];case 4:return y&&(L=sh(t,r,[y.width,y.height,y.width/y.height]),ue=L[0],me=L[1],N=L[2],te=L[3],Me=L[4],le=A.ctx.createPattern(A.resizeImage(y,te,Me),"repeat"),A.renderRepeat(ue,le,me,N)),[3,6];case 5:TT(h)?(S=sh(t,r,[null,null,null]),ue=S[0],me=S[1],N=S[2],te=S[3],Me=S[4],U=BT(h.angle,te,Me),E=U[0],P=U[1],O=U[2],ve=U[3],ce=U[4],Q=document.createElement("canvas"),Q.width=te,Q.height=Me,V=Q.getContext("2d"),Z=V.createLinearGradient(P,ve,O,ce),sy(h.stops,E).forEach(function(Te){return Z.addColorStop(Te.stop,Wn(Te.color))}),V.fillStyle=Z,V.fillRect(0,0,te,Me),te>0&&Me>0&&(le=A.ctx.createPattern(Q,"repeat"),A.renderRepeat(ue,le,me,N))):jT(h)&&($=sh(t,r,[null,null,null]),ue=$[0],we=$[1],ge=$[2],te=$[3],Me=$[4],ie=h.position.length===0?[lf]:h.position,me=rn(ie[0],te),N=rn(ie[ie.length-1],Me),be=ST(h,me,N,te,Me),H=be[0],M=be[1],H>0&&M>0&&(I=A.ctx.createRadialGradient(we+me,ge+N,0,we+me,ge+N,H),sy(h.stops,H*2).forEach(function(Te){return I.addColorStop(Te.stop,Wn(Te.color))}),A.path(ue),A.ctx.fillStyle=I,H!==M?(_=t.bounds.left+.5*t.bounds.width,Fe=t.bounds.top+.5*t.bounds.height,Y=M/H,D=1/Y,A.ctx.save(),A.ctx.translate(_,Fe),A.ctx.transform(1,0,0,Y,0,0),A.ctx.translate(-_,-Fe),A.ctx.fillRect(we,D*(ge-Fe)+Fe,te,Me*D),A.ctx.restore()):A.ctx.fill())),K.label=6;case 6:return r--,[2]}})},A=this,c=0,u=t.styles.backgroundImage.slice(0).reverse(),m.label=1;case 1:return c<u.length?(p=u[c],[5,a(p)]):[3,4];case 2:m.sent(),m.label=3;case 3:return c++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,r,a){return gr(this,void 0,void 0,function(){return sr(this,function(A){return this.path(Dy(a,r)),this.ctx.fillStyle=Wn(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,r,a,A){return gr(this,void 0,void 0,function(){var c,u;return sr(this,function(p){switch(p.label){case 0:return r<3?[4,this.renderSolidBorder(t,a,A)]:[3,2];case 1:return p.sent(),[2];case 2:return c=QU(A,a),this.path(c),this.ctx.fillStyle=Wn(t),this.ctx.fill(),u=RU(A,a),this.path(u),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return gr(this,void 0,void 0,function(){var r,a,A,c,u,p,m,h,y=this;return sr(this,function(b){switch(b.label){case 0:return this.applyEffects(t.getEffects(2)),r=t.container.styles,a=!Ri(r.backgroundColor)||r.backgroundImage.length,A=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],c=WU(na(r.backgroundClip,0),t.curves),a||r.boxShadow.length?(this.ctx.save(),this.path(c),this.ctx.clip(),Ri(r.backgroundColor)||(this.ctx.fillStyle=Wn(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:b.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(L){y.ctx.save();var S=ad(t.curves),U=L.inset?0:OU,E=FU(S,-U+(L.inset?1:-1)*L.spread.number,(L.inset?1:-1)*L.spread.number,L.spread.number*(L.inset?-2:2),L.spread.number*(L.inset?-2:2));L.inset?(y.path(S),y.ctx.clip(),y.mask(E)):(y.mask(S),y.ctx.clip(),y.path(E)),y.ctx.shadowOffsetX=L.offsetX.number+U,y.ctx.shadowOffsetY=L.offsetY.number,y.ctx.shadowColor=Wn(L.color),y.ctx.shadowBlur=L.blur.number,y.ctx.fillStyle=L.inset?Wn(L.color):"rgba(0,0,0,1)",y.ctx.fill(),y.ctx.restore()}),b.label=2;case 2:u=0,p=0,m=A,b.label=3;case 3:return p<m.length?(h=m[p],h.style!==0&&!Ri(h.color)&&h.width>0?h.style!==2?[3,5]:[4,this.renderDashedDottedBorder(h.color,h.width,u,t.curves,2)]:[3,11]):[3,13];case 4:return b.sent(),[3,11];case 5:return h.style!==3?[3,7]:[4,this.renderDashedDottedBorder(h.color,h.width,u,t.curves,3)];case 6:return b.sent(),[3,11];case 7:return h.style!==4?[3,9]:[4,this.renderDoubleBorder(h.color,h.width,u,t.curves)];case 8:return b.sent(),[3,11];case 9:return[4,this.renderSolidBorder(h.color,u,t.curves)];case 10:b.sent(),b.label=11;case 11:u++,b.label=12;case 12:return p++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,r,a,A,c){return gr(this,void 0,void 0,function(){var u,p,m,h,y,b,L,S,U,E,P,O,ve,ce,Q,V,Q,V;return sr(this,function(Z){return this.ctx.save(),u=MU(A,a),p=Dy(A,a),c===2&&(this.path(p),this.ctx.clip()),$r(p[0])?(m=p[0].start.x,h=p[0].start.y):(m=p[0].x,h=p[0].y),$r(p[1])?(y=p[1].end.x,b=p[1].end.y):(y=p[1].x,b=p[1].y),a===0||a===2?L=Math.abs(m-y):L=Math.abs(h-b),this.ctx.beginPath(),c===3?this.formatPath(u):this.formatPath(p.slice(0,2)),S=r<3?r*3:r*2,U=r<3?r*2:r,c===3&&(S=r,U=r),E=!0,L<=S*2?E=!1:L<=S*2+U?(P=L/(2*S+U),S*=P,U*=P):(O=Math.floor((L+U)/(S+U)),ve=(L-O*S)/(O-1),ce=(L-(O+1)*S)/O,U=ce<=0||Math.abs(U-ve)<Math.abs(U-ce)?ve:ce),E&&(c===3?this.ctx.setLineDash([0,S+U]):this.ctx.setLineDash([S,U])),c===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Wn(t),this.ctx.stroke(),this.ctx.setLineDash([]),c===2&&($r(p[0])&&(Q=p[3],V=p[0],this.ctx.beginPath(),this.formatPath([new nt(Q.end.x,Q.end.y),new nt(V.start.x,V.start.y)]),this.ctx.stroke()),$r(p[1])&&(Q=p[1],V=p[2],this.ctx.beginPath(),this.formatPath([new nt(Q.end.x,Q.end.y),new nt(V.start.x,V.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return gr(this,void 0,void 0,function(){var r;return sr(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Wn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=UU(t),[4,this.renderStack(r)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(mv),KU=function(i){return i instanceof ev||i instanceof Zw?!0:i instanceof pf&&i.type!==od&&i.type!==rd},WU=function(i,e){switch(i){case 0:return ad(e);case 2:return IU(e);case 1:default:return Ad(e)}},GU=function(i){switch(i){case 1:return"center";case 2:return"right";case 0:default:return"left"}},VU=["-apple-system","system-ui"],$U=function(i){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?i.filter(function(e){return VU.indexOf(e)===-1}):i},YU=function(i){fo(e,i);function e(t,r){var a=i.call(this,t,r)||this;return a.canvas=r.canvas?r.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=r,a.canvas.width=Math.floor(r.width*r.scale),a.canvas.height=Math.floor(r.height*r.scale),a.canvas.style.width=r.width+"px",a.canvas.style.height=r.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-r.x,-r.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),a}return e.prototype.render=function(t){return gr(this,void 0,void 0,function(){var r,a;return sr(this,function(A){switch(A.label){case 0:return r=Oh(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,JU(r)];case 1:return a=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Wn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(mv),JU=function(i){return new Promise(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(i))})},XU=function(){function i(e){var t=e.id,r=e.enabled;this.id=t,this.enabled=r,this.start=Date.now()}return i.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Zl([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},i.prototype.getTime=function(){return Date.now()-this.start},i.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Zl([this.id,this.getTime()+"ms"],e))},i.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Zl([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},i.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Zl([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},i.instances={},i}(),qU=function(){function i(e,t){var r;this.windowBounds=t,this.instanceName="#"+i.instanceCount++,this.logger=new XU({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new xU(this,e)}return i.instanceCount=1,i}(),ZU=function(i,e){return e===void 0&&(e={}),eQ(i,e)};typeof window<"u"&&dv.setContext(window);var eQ=function(i,e){return gr(void 0,void 0,void 0,function(){var t,r,a,A,c,u,p,m,h,y,b,L,S,U,E,P,O,ve,ce,Q,Z,V,Z,le,$,ue,we,ge,te,Me,ie,me,N,be,H,M,I,_,Fe,Y;return sr(this,function(D){switch(D.label){case 0:if(!i||typeof i!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=i.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(r=t.defaultView,!r)throw new Error("Document is not attached to a Window");return a={allowTaint:(le=e.allowTaint)!==null&&le!==void 0?le:!1,imageTimeout:($=e.imageTimeout)!==null&&$!==void 0?$:15e3,proxy:e.proxy,useCORS:(ue=e.useCORS)!==null&&ue!==void 0?ue:!1},A=Eh({logging:(we=e.logging)!==null&&we!==void 0?we:!0,cache:e.cache},a),c={windowWidth:(ge=e.windowWidth)!==null&&ge!==void 0?ge:r.innerWidth,windowHeight:(te=e.windowHeight)!==null&&te!==void 0?te:r.innerHeight,scrollX:(Me=e.scrollX)!==null&&Me!==void 0?Me:r.pageXOffset,scrollY:(ie=e.scrollY)!==null&&ie!==void 0?ie:r.pageYOffset},u=new Jo(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),p=new qU(A,u),m=(me=e.foreignObjectRendering)!==null&&me!==void 0?me:!1,h={allowTaint:(N=e.allowTaint)!==null&&N!==void 0?N:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:m,copyStyles:m},p.logger.debug("Starting document clone with size "+u.width+"x"+u.height+" scrolled to "+-u.left+","+-u.top),y=new Ry(p,i,h),b=y.clonedReferenceElement,b?[4,y.toIFrame(t,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return L=D.sent(),S=hf(b)||tU(b)?FE(b.ownerDocument):Rd(p,b),U=S.width,E=S.height,P=S.left,O=S.top,ve=tQ(p,b,e.backgroundColor),ce={canvas:e.canvas,backgroundColor:ve,scale:(H=(be=e.scale)!==null&&be!==void 0?be:r.devicePixelRatio)!==null&&H!==void 0?H:1,x:((M=e.x)!==null&&M!==void 0?M:0)+P,y:((I=e.y)!==null&&I!==void 0?I:0)+O,width:(_=e.width)!==null&&_!==void 0?_:Math.ceil(U),height:(Fe=e.height)!==null&&Fe!==void 0?Fe:Math.ceil(E)},m?(p.logger.debug("Document cloned, using foreign object rendering"),Z=new YU(p,ce),[4,Z.render(b)]):[3,3];case 2:return Q=D.sent(),[3,5];case 3:return p.logger.debug("Document cloned, element located at "+P+","+O+" with size "+U+"x"+E+" using computed rendering"),p.logger.debug("Starting DOM parsing"),V=rv(p,b),ve===V.styles.backgroundColor&&(V.styles.backgroundColor=Vo.TRANSPARENT),p.logger.debug("Starting renderer for element at "+ce.x+","+ce.y+" with size "+ce.width+"x"+ce.height),Z=new zU(p,ce),[4,Z.render(V)];case 4:Q=D.sent(),D.label=5;case 5:return(!((Y=e.removeContainer)!==null&&Y!==void 0)||Y)&&(Ry.destroy(L)||p.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),p.logger.debug("Finished rendering"),[2,Q]}})})},tQ=function(i,e,t){var r=e.ownerDocument,a=r.documentElement?vA(i,getComputedStyle(r.documentElement).backgroundColor):Vo.TRANSPARENT,A=r.body?vA(i,getComputedStyle(r.body).backgroundColor):Vo.TRANSPARENT,c=typeof t=="string"?vA(i,t):t===null?Vo.TRANSPARENT:4294967295;return e===r.documentElement?Ri(a)?Ri(A)?c:A:a:c};const nQ=()=>{var Oi,Xo,zi,WA;const[i,e]=f.useState([]),[t,r]=f.useState([]),[a,A]=f.useState(!0),[c,u]=f.useState(null),[p,m]=f.useState(!0),[h,y]=f.useState(null),[b,L]=f.useState(null),[S,U]=f.useState([]),E=f.useRef(null),[P,O]=f.useState(!1),[ve,ce]=f.useState(!1),[Q,V]=f.useState(!1),[Z,le]=f.useState("Master Plan"),[$,ue]=f.useState(!1),[we,ge]=f.useState(null),[te,Me]=f.useState([]),[ie,me]=f.useState(!1),[N,be]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[H,M]=f.useState(!1),[I,_]=f.useState(null),[Fe,Y]=f.useState([]),[D,K]=f.useState([]),[Te,Ne]=f.useState(!1),[G,W]=f.useState(""),[j,F]=f.useState("editor"),[Xe,B]=f.useState(!1),[ee,Pe]=f.useState(null),[$e,kt]=f.useState([]),[pt,Ut]=f.useState([]),[Lt,se]=f.useState(!1),[Tt,ne]=f.useState(null),fe=async T=>{_(T),M(!0),Ne(!0);try{const de=await ke(`/plan/master/${T.id}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(de.ok){const{team:De}=await de.json();Y(De),console.log(" Team members loaded:",De)}const je=await ke("/user/list",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(je.ok){const vt=(await je.json()).users||[],Ot=(de.ok?(await de.json()).team:[]).map(Ve=>Ve.userId),ht=vt.filter(Ve=>!Ot.includes(Ve.id));K(ht)}}catch(de){console.error("Failed to load team data:",de),alert("Failed to load team information")}finally{Ne(!1)}},Qe=async()=>{if(!G||!j||!I){alert("Please select a user and permission level");return}try{const T=await ke(`/plan/master/${I.id}/permissions`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:parseInt(G),permissionLevel:j})});if(T.ok)await fe(I),W(""),F("editor"),alert(" Team member added successfully!");else{const de=await T.json();alert(`Failed to add team member: ${de.error}`)}}catch(T){console.error("Failed to add team member:",T),alert("Failed to add team member")}},w=async(T,de)=>{if(I)try{(await ke(`/plan/master/${I.id}/permissions`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:T,permissionLevel:de})})).ok?(await fe(I),alert(" Permission updated successfully!")):alert("Failed to update permission")}catch(je){console.error("Failed to update permission:",je),alert("Failed to update permission")}},qe=async T=>{if(I&&confirm("Remove this team member? They will lose access to this plan."))try{(await ke(`/plan/master/${I.id}/permissions/${T}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})).ok?(await fe(I),alert(" Team member removed successfully!")):alert("Failed to remove team member")}catch(de){console.error("Failed to remove team member:",de),alert("Failed to remove team member")}},ft=async(T,de,je)=>{Pe({plan:T,milestoneName:de,milestoneId:je}),B(!0),se(!0);try{const De=await ke(`/plan/master/${T.id}/milestone/${je}/users`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(De.ok){const{users:Ot}=await De.json();kt(Ot)}const vt=await ke(`/plan/master/${T.id}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(vt.ok){const{team:Ot}=await vt.json(),ht=(De.ok?(await De.json()).users:[]).map(Wt=>Wt.userId),Ve=Ot.filter(Wt=>!ht.includes(Wt.userId));Ut(Ve)}}catch(De){console.error("Failed to load milestone users:",De)}finally{se(!1)}},Et=async T=>{if(ee)try{(await ke(`/plan/master/${ee.plan.id}/milestone/${ee.milestoneId}/users`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userIds:[T]})})).ok&&(await ft(ee.plan,ee.milestoneName,ee.milestoneId),alert("User added to milestone successfully!"))}catch(de){console.error("Failed to add user:",de),alert("Failed to add user to milestone")}},pe=async T=>{if(ee&&confirm("Remove this user from the milestone?"))try{(await ke(`/plan/master/${ee.plan.id}/milestone/${ee.milestoneId}/users/${T}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})).ok&&(await ft(ee.plan,ee.milestoneName,ee.milestoneId),alert("User removed from milestone successfully!"))}catch(de){console.error("Failed to remove user:",de),alert("Failed to remove user from milestone")}},[R,Ce]=f.useState(!1),[re,xe]=f.useState(null),[Ze,J]=f.useState(""),[qt,He]=f.useState(()=>{try{const T=localStorage.getItem("emailsSentToday"),de=localStorage.getItem("emailsSentDate"),je=new Date().toDateString();return de!==je?(localStorage.setItem("emailsSentDate",je),localStorage.removeItem("emailsSentToday"),[]):T?JSON.parse(T):[]}catch{return[]}}),[bn,at]=f.useState(!1),[k,v]=f.useState(null),[Ae,Ue]=f.useState(""),et=f.useRef(null),Ke=f.useRef(null),yt=f.useRef(null),[It,tt]=f.useState({}),[st,ye]=f.useState(!1),[ae,ze]=f.useState({}),[Ye,Qt]=f.useState("timeline"),[$t,wn]=f.useState("all"),jt=T=>{if(!T)return null;if(T instanceof Date)return T;if(typeof T=="number")return new Date(T);if(T=String(T).trim(),/^\d{4}-\d{2}-\d{2}/.test(T)){const[de,je,De]=T.split("T")[0].split("-");return new Date(Number(de),Number(je)-1,Number(De))}if(/^\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}$/.test(T)){const[de,je,De]=T.split(/[\/\-]/);return new Date(Number(De),Number(je)-1,Number(de))}return console.warn(" Unrecognized date format:",T),null},Hn=T=>{if(!T.fields)return null;const de=[];return Object.entries(T.fields).forEach(([je,De])=>{je.toLowerCase()!=="status"&&je.toLowerCase()!=="lead"&&je.toLowerCase()!=="budget"&&je.toLowerCase()!=="completion"&&de.push({name:je,status:De.status||De,endDate:De.endDate?jt(De.endDate):null})}),de.length===0?null:(de.sort((je,De)=>je.endDate?De.endDate?je.endDate-De.endDate:1:-1),de[de.length-1].status)},[vn,an]=f.useState(0),[Hi,OA]=f.useState(!1),Ba=S.length===1,Ni=Ba?S[0]:null,ws=Ba?[`Viewing project: ${Ni}`,`${i.filter(T=>T.project===Ni).length} plans in this project`,`${i.filter(T=>{if(T.project!==Ni)return!1;const de=Hn(T);return de&&!de.toLowerCase().includes("complete")}).length} active plans`,`${i.filter(T=>{if(T.project!==Ni)return!1;const de=Hn(T);return de&&de.toLowerCase().includes("complete")}).length} completed plans`]:["Overview of all master plans and milestones",`${i.length} total master plans`,`${i.filter(T=>{const de=Hn(T);return de&&!de.toLowerCase().includes("complete")}).length} plans in progress`,`${i.filter(T=>{const de=Hn(T);return de&&de.toLowerCase().includes("complete")}).length} plans completed`];f.useEffect(()=>{if(Hi)return;const T=setInterval(()=>{an(de=>(de+1)%ws.length)},5e3);return()=>clearInterval(T)},[ws.length,Hi]),f.useEffect(()=>{if(!document.getElementById("fade-style")){const T=document.createElement("style");T.id="fade-style",T.innerHTML=`
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(2px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes tooltipFadeIn {
        from {
          opacity: 0;
          transform: translateY(-6px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .profile-tooltip-animated {
        animation: slideIn 0.2s ease-out;
      }

      @keyframes modalBackdropFadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      
      @keyframes modalContentSlideUp {
        from {
          opacity: 0;
          transform: translateY(30px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      .modal-backdrop-animated {
        animation: modalBackdropFadeIn 0.25s ease-out;
      }
      
      .modal-content-animated {
        animation: modalContentSlideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      }
    `,document.head.appendChild(T)}},[]),f.useEffect(()=>{const T=document.getElementById("scrollbar-style");T&&T.remove();const de=document.createElement("style");return de.id="scrollbar-style",de.innerHTML=N?`
      /* Dark mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #1e293b;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #475569;
        border-radius: 10px;
        border: 2px solid #1e293b;
      }

      ::-webkit-scrollbar-thumb:hover {
        background-color: #64748b;
      }

      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #475569 #1e293b;
      }
    `:`
      /* Light mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #cbd5e1;
        border-radius: 10px;
        border: 2px solid #f1f5f9;
      }

      ::-webkit-scrollbar-thumb:hover {
        background-color: #94a3b8;
      }

      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #cbd5e1 #f1f5f9;
      }
    `,document.head.appendChild(de),()=>{de.remove()}},[N]),f.useEffect(()=>{(async()=>{try{console.log(" Fetching master plans from /plan/master..."),A(!0);const de=await ke("/plan/master",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" API Response status:",de.status),de.ok){const je=await de.json();console.log(" Master plans received:",je),console.log(" Total plans fetched:",je.length),e(je),r(je)}else{const je=await de.text();console.error(" Failed to fetch master plans:",de.status,je),console.error(" Unable to load master plans. Please ensure you are logged in."),e([]),r([])}}catch(de){console.error(" Error fetching master plans:",de),console.error(" Network error. Please check your connection and try again."),e([]),r([])}finally{A(!1)}})()},[]);const Sa=async()=>{try{const T=await ke("/plan/locks/active",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(T.ok){const de=await T.json();console.log(" Active locks:",de.locks);const je={};de.locks.forEach(De=>{je[De.planId]=De}),tt(je)}}catch(T){console.error(" Failed to fetch locks:",T)}},Kd=async()=>{if(!(!c||i.length===0))try{console.log(" Fetching plan permissions..."),console.log("MasterPlans available:",i);const T={};for(const de of i)try{const je=await ke(`/plan/master/${de.id}/permission`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(je.ok){const De=await je.json();T[de.id]=De.permission||"viewer",console.log(`   Plan ${de.id}: ${T[de.id]}`)}else console.warn(`   Plan ${de.id}: Permission endpoint returned ${je.status}, using fallback`),T[de.id]="viewer"}catch(je){console.warn(`   Plan ${de.id}: Permission fetch failed, using fallback`,je.message),T[de.id]="viewer"}ze(T),console.log(" Permissions loaded:",T),Object.keys(T).length===0&&console.log(" No permissions loaded - using ownership-based access control")}catch(T){console.error(" Failed to fetch permissions:",T),console.log(" Falling back to ownership-based access control")}};f.useEffect(()=>{(async()=>{try{console.log(" Fetching user data from /user/profile...");const de=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" User API Response status:",de.status),de.ok){const je=await de.json();console.log(" User data received:",je),u(je)}else{const je=await de.text();console.error(" Failed to fetch user data:",de.status,je),console.error(" Unable to load user profile. Please ensure you are logged in."),u(null)}}catch(de){console.error(" Error fetching user data:",de),console.error(" Network error. Please check your connection and try again."),u(null)}finally{m(!1)}})()},[]),f.useEffect(()=>{c&&i.length>0&&Kd()},[c,i]),f.useEffect(()=>{var Ot;if(!i.length||!Object.keys(ae).length)return;const T=new URLSearchParams(window.location.search),de=T.get("planId"),je=T.get("milestone");if(!de||!je)return;const De=i.find(ht=>String(ht.id)===String(de));if(!De||ae[De.id]!=="owner")return;const vt=(Ot=De.fields)==null?void 0:Ot[je];vt&&(xr(De,je,vt.status),window.history.replaceState({},document.title,window.location.pathname))},[i,ae]),f.useEffect(()=>{const T=async()=>{if(!c||i.length===0)return;const je=new Date;je.setHours(0,0,0,0);for(const De of i){const vt=ae[De.id];if(vt!=="owner"&&vt!=="editor")continue;let Ot=!1;const ht={...De.fields};if(De.fields&&Object.entries(De.fields).forEach(([Ve,Wt])=>{Ve.toLowerCase()==="status"||Ve.toLowerCase()==="lead"||Ve.toLowerCase()==="budget"||Ve.toLowerCase()==="completion"||Wt.endDate&&jt(Wt.endDate)<je&&Wt.status!=="Completed"&&Wt.status!=="Delayed"&&(console.log(` Auto-marking ${Ve} as Delayed (deadline passed)`),ht[Ve]={...Wt,status:"Delayed"},Ot=!0)}),Ot)try{if((await ke(`/plan/master/${De.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:De.project,startDate:De.startDate,endDate:De.endDate,fields:ht})})).ok){console.log(` Auto-updated plan ${De.project} with Delayed status`);const Wt=i.map(fn=>fn.id===De.id?{...fn,fields:ht}:fn);e(Wt)}}catch(Ve){console.error("Failed to auto-update delayed status:",Ve)}}};T();const de=setInterval(T,6e4*60);return()=>clearInterval(de)},[c,i,ae]),f.useEffect(()=>{const T=async()=>{if(!c||i.length===0)return;const je=new Date,De=je.getHours(),vt=je.getMinutes();if(De!==8||vt<30||vt>31)return;const Ot=new Date;Ot.setHours(0,0,0,0);for(const ht of i){if(ae[ht.id]!=="owner")continue;const Wt=`${ht.id}-${Ot.toDateString()}`;if(qt.includes(Wt))continue;const fn=[];ht.fields&&Object.entries(ht.fields).forEach(([St,pn])=>{St.toLowerCase()!=="status"&&St.toLowerCase()!=="lead"&&St.toLowerCase()!=="budget"&&St.toLowerCase()!=="completion"&&fn.push({name:St,status:pn})});const cr=new Date(ht.endDate);cr.setHours(0,0,0,0);const Xr=cr.getTime()===Ot.getTime(),dt=fn.some(St=>{var pn;return!((pn=St.status)!=null&&pn.toLowerCase().includes("complete"))});if(Xr&&dt)try{console.log(` Sending deadline reminder for plan: ${ht.project}`);const St=await ke("/notifications/milestone-deadline",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:ht.id,projectName:ht.project,milestones:fn,dueDate:ht.endDate,userEmail:c.email,userName:`${c.firstName} ${c.lastName}`})});if(St.ok){console.log(` Email sent successfully for ${ht.project}`);const pn=[...qt,Wt];He(pn);try{localStorage.setItem("emailsSentToday",JSON.stringify(pn))}catch(dr){console.error("Failed to save email sent status:",dr)}}else console.error(` Failed to send email for ${ht.project}:`,await St.text())}catch(St){console.error(` Error sending email for ${ht.project}:`,St)}}};T();const de=setInterval(T,6e4);return()=>clearInterval(de)},[c,i,qt,ae]),f.useEffect(()=>{const T=async()=>{if(!c||i.length===0||Object.keys(ae).length===0)return;const je=new Date;je.setHours(0,0,0,0);const De=new Date(je);De.setDate(De.getDate()+7);for(const vt of i){const Ot=ae[vt.id];Ot!=="owner"&&Ot!=="editor"||vt.fields&&Object.entries(vt.fields).forEach(async([ht,Ve])=>{var fn;if(ht.toLowerCase()==="status"||ht.toLowerCase()==="lead"||ht.toLowerCase()==="budget"||ht.toLowerCase()==="completion"||!Ve.endDate)return;const Wt=jt(Ve.endDate);if(Wt.setHours(0,0,0,0),Wt.getTime()===De.getTime()){if((fn=Ve.status)!=null&&fn.toLowerCase().includes("complete"))return;const cr=`week-warning-${vt.id}-${ht}-${Wt.toDateString()}`,Xr=JSON.parse(localStorage.getItem("sentWeekWarnings")||"[]");if(Xr.includes(cr)){console.log(` Week warning already sent for ${ht}`);return}try{console.log(` Sending 1-week warning for ${ht} in ${vt.project}`),(await ke("/plan/master/milestone-week-warning",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:vt.id,projectName:vt.project,milestoneName:ht,dueDate:Ve.endDate,userEmail:c.email,userName:`${c.firstName} ${c.lastName}`})})).ok&&(console.log(` Week warning email sent for ${ht}`),Xr.push(cr),localStorage.setItem("sentWeekWarnings",JSON.stringify(Xr)))}catch(dt){console.error(`Failed to send week warning for ${ht}:`,dt)}}})}};T();const de=setInterval(T,6e4*60);return()=>clearInterval(de)},[c,i,ae]),f.useEffect(()=>{let T=i;if(S.length>0&&(T=T.filter(de=>S.includes(de.project))),Ae.trim()){const de=Ae.toLowerCase();T=T.filter(je=>{var De,vt;return je.project.toLowerCase().includes(de)||((De=je.fields)==null?void 0:De.lead)&&je.fields.lead.toLowerCase().includes(de)||((vt=je.fields)==null?void 0:vt.status)&&je.fields.status.toLowerCase().includes(de)})}T=[...T].sort((de,je)=>{const De=jt(de.startDate),vt=jt(je.startDate);return De?vt?De-vt:-1:1}),r(T)},[S,Ae,i]),f.useEffect(()=>{if(console.log(" Daily reminder useEffect triggered"),!c){console.log(" userData not ready yet.");return}if(!Array.isArray(i)||i.length===0){console.log(" masterPlans not ready yet.");return}if(Object.keys(ae).length===0)return;const T=new Date().toISOString().split("T")[0];localStorage.getItem("deadlineEmailLastRun")!==T&&(console.log(" Running Daily Milestone Deadline Check"),i.forEach(je=>{const De=ae[je.id];if(!["owner","editor"].includes(De))return;const vt=[];je.fields&&Object.entries(je.fields).forEach(([ht,Ve])=>{ht.toLowerCase()!=="status"&&ht.toLowerCase()!=="lead"&&ht.toLowerCase()!=="budget"&&ht.toLowerCase()!=="completion"&&vt.push({name:ht,status:Ve.status,startDate:Ve.startDate,endDate:Ve.endDate})}),vt.sort((ht,Ve)=>ht.startDate?Ve.startDate?ht.startDate-Ve.startDate:-1:1);const Ot=new Date().toDateString();vt.forEach(ht=>{var Wt;!ht.endDate||new Date(ht.endDate).toDateString()!==Ot||(Wt=ht.status)!=null&&Wt.toLowerCase().includes("complete")||(console.log(` Sending reminder for milestone "${ht.name}" in project "${je.project}"`),ke("/plan/master/milestone-deadline",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:je.id,projectName:je.project,milestones:vt,dueDate:ht.endDate,userEmail:c.email,userName:`${c.firstName} ${c.lastName}`})}))})}),localStorage.setItem("deadlineEmailLastRun",T))},[c,i,ae]),f.useEffect(()=>{const T=de=>{yt.current&&!yt.current.contains(de.target)&&O(!1)};return P&&document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[P]);const Wd=[...new Set(i.map(T=>T.project))],un=T=>{U(de=>de.includes(T)?de.filter(je=>je!==T):[...de,T])};f.useEffect(()=>{if(i.length>0){Sa();const T=setInterval(()=>{Sa()},1e4);return()=>clearInterval(T)}},[i]);const Ia=async(T,de)=>{me(!0),ue(!0),ge({id:T,name:de});try{console.log(` Fetching history for plan ${T}...`);const je=await ke(`/plan/master/${T}/history`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(je.ok){const De=await je.json();console.log(" History loaded:",De.history),Me(De.history||[])}else console.error(" Failed to fetch history:",je.status),Me([]),alert("Failed to load history. Please try again.")}catch(je){console.error(" Error fetching history:",je),Me([]),alert("Network error. Please check your connection.")}finally{me(!1)}},Ea=T=>({status_changed:" Status Changed",dates_changed:" Dates Changed",milestone_added:" Milestone Added",milestone_deleted:" Milestone Deleted",project_renamed:" Project Renamed",project_dates_changed:" Project Timeline Changed"})[T]||T,zA=T=>({status_changed:"#3b82f6",dates_changed:"#f59e0b",milestone_added:"#10b981",milestone_deleted:"#ef4444",project_renamed:"#8b5cf6",project_dates_changed:"#f59e0b"})[T]||"#94a3b8",vs=T=>{console.log(` AdminViewPlan - Navigating to ${T} tab`),le(T),T==="Individual Plan"?window.location.href="/adminindividualplan":T==="Approvals"&&(window.location.href="/adminapprovals")},Gd=()=>{console.log(" AdminViewPlan - Creating new master plan"),window.location.href="/adminaddplan"},ka=async T=>{const de=ae[T.id];if(de===void 0){if(T.createdBy!==(c==null?void 0:c.id)){alert(" You can only edit plans that you created.");return}}else{if(de==="viewer"){alert(" You have view-only access to this plan. Contact the owner for edit permissions.");return}if(!de){alert(" You do not have permission to edit this plan.");return}}console.log(" AdminViewPlan - Editing plan:",T.project);const je=It[T.id];if(je&&je.userId!==(c==null?void 0:c.id)){const De=Math.floor((new Date-new Date(je.lastActivity))/6e4);if(!window.confirm(` This plan is currently being edited by ${je.lockedBy}.

Last activity: ${De} minute(s) ago
Lock expires in: ${je.minutesRemaining} minute(s)

Do you want to take over editing? This will disconnect them.`))return;try{if(!(await ke(`/plan/lock/${T.id}/takeover`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({force:!0})})).ok){alert(" Failed to take over lock. Please try again.");return}console.log(" Lock takeover successful")}catch(Ot){console.error(" Takeover error:",Ot),alert(" Failed to take over lock. Please try again.");return}}sessionStorage.setItem("editingPlanId",T.id),sessionStorage.setItem("editingPlanData",JSON.stringify(T)),window.location.href="/admineditplan"},_i=T=>{const de=ae[T.id];if(de===void 0){if(T.createdBy!==(c==null?void 0:c.id)){alert(" You can only delete plans that you created.");return}}else if(de!=="owner"){alert(" Only the plan owner can delete this plan.");return}v(T),at(!0)},Hr=async()=>{if(k)try{console.log(" Deleting plan:",k.project,"ID:",k.id);const T=await ke(`/plan/master/${k.id}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" Delete response status:",T.status),T.ok)console.log(" Plan deleted successfully"),e(i.filter(de=>de.id!==k.id)),alert(`Plan "${k.project}" has been deleted successfully!`);else{const de=await T.text();console.error(" Failed to delete plan:",T.status,de),alert("Failed to delete plan. Please try again.")}}catch(T){console.error(" Error deleting plan:",T),alert("Failed to delete plan. Please check your connection and try again.")}finally{at(!1),v(null)}},Vd=()=>{at(!1),v(null)},xr=(T,de,je)=>{if(ae[T.id]!=="owner"){alert(" Only the plan owner can change milestone status.");return}xe({plan:T,milestoneName:de,currentStatus:je,justification:""}),J(je),Ce(!0)},$d=async()=>{if(!re||!Ze)return;const{plan:T,milestoneName:de}=re,je=T.fields[de];if(je!=null&&je.endDate){const De=jt(je.endDate),vt=new Date;if(vt.setHours(0,0,0,0),De<vt&&!["Completed","Delayed"].includes(Ze)){alert(" After the end date, a milestone can only be marked as Delayed or Completed.");return}}try{console.log(` Updating status for ${de} to ${Ze}`);const De=await ke(`/plan/master/${T.id}/status`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({milestoneName:de,newStatus:Ze,justification:re.justification||null})});if(De.ok){console.log(" Status updated successfully"),alert("Status updated successfully!");const vt={...T.fields,[de]:{...T.fields[de],status:Ze}},Ot=i.map(ht=>ht.id===T.id?{...ht,fields:vt}:ht);e(Ot),r(Ot.filter(ht=>S.length===0||S.includes(ht.project)))}else console.error("Failed to update status:",await De.text()),alert("Failed to update status. Please try again.")}catch(De){console.error("Error updating status:",De),alert("Network error. Please check your connection.")}finally{Ce(!1),xe(null),J("")}},Yd=()=>{be(!N),ce(!1)},KA=T=>{const de=ae[T];if(!de)return null;const De={owner:{bg:"#3b82f6",icon:hs},editor:{bg:"#10b981",icon:oa},viewer:{bg:"#64748b",icon:$o}}[de];if(!De)return null;const vt=De.icon;return n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",backgroundColor:De.bg+"20",border:`1px solid ${De.bg}40`,fontSize:"11px",fontWeight:"600",color:De.bg,textTransform:"uppercase",width:"fit-content",alignSelf:"flex-start"},children:[n.jsx(vt,{size:12}),de]})},Ie={page:{minHeight:"100vh",padding:"30px",background:N?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease",overflowX:"hidden"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"32px"},header:{fontSize:"28px",fontWeight:"700",color:N?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},topButton:T=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:T?"rgba(59,130,246,0.1)":N?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:T?"#3b82f6":N?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s ease",boxShadow:T?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:T?"translateY(-2px) scale(1.05)":"translateY(0)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:N?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:N?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:N?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:N?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userName:{fontSize:"14px",fontWeight:"600",color:N?"#e2e8f0":"#1e293b",marginBottom:"2px"},userRole:{fontSize:"12px",color:N?"#94a3b8":"#64748b"},userStats:{borderTop:N?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between"},selectedUserCard:{backgroundColor:N?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"12px 16px",marginBottom:"8px",border:N?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:N?"#e2e8f0":"#1e293b"},tooltipStatLabel:{fontSize:"10px",color:N?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px",width:"100%"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:N?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:N?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(T,de)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",border:"none",backgroundColor:T?"#3b82f6":de?N?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:T?"#fff":N?"#e2e8f0":"#64748b",boxShadow:T?"0 4px 12px rgba(59,130,246,0.3)":"none"}),createButton:T=>({backgroundColor:T?"#f59e0b":"#fbbf24",color:"#fff",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",transform:T?"translateY(-2px)":"translateY(0)",boxShadow:T?"0 8px 25px rgba(251,191,36,0.3)":"0 4px 12px rgba(251,191,36,0.2)"}),searchInput:{width:"300px",padding:"12px 16px",borderRadius:"12px",border:N?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:N?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:N?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",backdropFilter:"blur(10px)"},filterContainer:{display:"flex",gap:"12px",alignItems:"center",marginBottom:"28px"},projectDropdown:{position:"absolute",top:"100%",left:0,backgroundColor:N?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",border:N?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",padding:"12px 0",minWidth:"250px",zIndex:1e3,marginTop:"8px"},dropdownItem:T=>({backgroundColor:T?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease",borderRadius:"8px",margin:"0 8px",color:N?"#e2e8f0":"#374151",transform:T?"translateX(4px)":"translateX(0)",borderLeft:T?"3px solid #3b82f6":"3px solid transparent"}),checkboxItem:T=>({display:"flex",alignItems:"center",gap:"12px",padding:"12px",cursor:"pointer",borderRadius:"8px",transition:"all 0.2s ease",backgroundColor:T?"rgba(59,130,246,0.1)":"transparent"}),checkbox:T=>({width:"18px",height:"18px",borderRadius:"4px",border:T?"2px solid #3b82f6":N?"2px solid #64748b":"2px solid #cbd5e1",backgroundColor:T?"#3b82f6":"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:"700",transition:"all 0.2s ease"}),checkboxLabel:{fontSize:"14px",fontWeight:"500",color:N?"#e2e8f0":"#374151"},todayLine:{position:"absolute",top:"-50px",bottom:"0px",width:"2px",backgroundImage:"linear-gradient(to bottom, #ef4444 60%, transparent 60%)",backgroundSize:"2px 16px",backgroundRepeat:"repeat-y",zIndex:100,pointerEvents:"none"},todayLabel:{position:"absolute",top:"-35px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#ef4444",color:"#fff",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"700",whiteSpace:"nowrap",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:101},emptyState:{textAlign:"center",padding:"60px 20px",color:N?"#94a3b8":"#64748b",fontSize:"16px"},loadingState:{textAlign:"center",padding:"60px 20px",color:N?"#94a3b8":"#64748b",fontSize:"16px"},statsContainer:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"28px"},statCard:T=>({backgroundColor:N?"#374151":"#fff",borderRadius:"20px",padding:"28px",textAlign:"center",boxShadow:T?"0 20px 40px rgba(0,0,0,0.15)":"0 8px 25px rgba(0,0,0,0.08)",border:N?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",transition:"all 0.3s ease",transform:T?"translateY(-8px) scale(1.02)":"translateY(0)",cursor:"pointer",backdropFilter:"blur(10px)"}),statNumber:{fontSize:"36px",fontWeight:"800",color:N?"#e2e8f0":"#1e293b",marginBottom:"8px"},statLabel:{fontSize:"14px",color:N?"#94a3b8":"#64748b",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},deleteConfirmation:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(4px)"},deleteModal:{backgroundColor:N?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",border:N?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",maxWidth:"400px",width:"90%",textAlign:"center"},deleteModalTitle:{fontSize:"20px",fontWeight:"700",color:N?"#e2e8f0":"#1e293b",marginBottom:"12px"},deleteModalText:{fontSize:"14px",color:N?"#94a3b8":"#64748b",marginBottom:"24px",lineHeight:"1.5"},deleteModalActions:{display:"flex",gap:"12px",justifyContent:"center"},modalButton:(T,de)=>({padding:"12px 24px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:de==="danger"?T?"#dc2626":"#ef4444":T?N?"#4b5563":"#e5e7eb":N?"#6b7280":"#f3f4f6",color:de==="danger"?"#fff":N?"#e2e8f0":"#374151",transform:T?"translateY(-1px)":"translateY(0)",boxShadow:T?"0 4px 12px rgba(0,0,0,0.15)":"none"}),statusModal:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(4px)",animation:"modalBackdropFadeIn 0.25s ease-out"},statusModalContent:{backgroundColor:N?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",border:N?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",maxWidth:"400px",width:"90%",animation:"modalContentSlideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)"},statusModalTitle:{fontSize:"20px",fontWeight:"700",color:N?"#e2e8f0":"#1e293b",marginBottom:"8px"},statusModalSubtitle:{fontSize:"14px",color:N?"#94a3b8":"#64748b",marginBottom:"24px"},statusSelect:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:N?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:N?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:N?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",cursor:"pointer",marginBottom:"24px"},ganttContainer:{marginTop:"40px",overflowX:"auto",overflowY:"visible",position:"relative",paddingTop:"60px",paddingBottom:"30px",minHeight:"300px",maxWidth:"100%"},ganttHeader:{display:"grid",gridTemplateColumns:"200px repeat(auto-fit, minmax(80px, 1fr))",gap:"1px",marginBottom:"16px",backgroundColor:N?"#4b5563":"#f8fafc",borderRadius:"12px",padding:"16px",transition:"all 0.3s ease"},monthHeader:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:N?"#e2e8f0":"#475569",padding:"8px 4px",transition:"all 0.3s ease",borderBottom:N?"1px solid #4b5563":"1px solid #e2e8f0"},taskHeader:{fontSize:"12px",fontWeight:"600",color:N?"#e2e8f0":"#475569",padding:"8px 12px",transition:"all 0.3s ease"},ganttRow:{display:"grid",gridTemplateColumns:"200px repeat(auto-fit, minmax(80px, 1fr))",gap:"1px",marginBottom:"8px",alignItems:"center"},taskName:{fontSize:"14px",fontWeight:"500",color:N?"#e2e8f0":"#374151",padding:"12px",backgroundColor:N?"#4b5563":"#f8fafc",borderRadius:"8px",transition:"all 0.3s ease"},ganttCell:{height:"40px",position:"relative",transition:"all 0.3s ease"},ganttBar:(T,de,je,De)=>({position:"absolute",left:"0%",width:"100%",height:"24px",top:"8px",backgroundColor:T,borderRadius:"6px",opacity:De!=null&&De.toLowerCase().includes("complete")?.8:1,border:De!=null&&De.toLowerCase().includes("delay")?"2px solid #ef4444":"none",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"14px",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",transition:"all 0.3s ease"}),monthBoxOverlay:{position:"absolute",top:0,bottom:0,left:0,right:0,borderRight:N?"2px solid rgba(100,116,139,0.8)":"2px solid rgba(148,163,184,0.8)",borderLeft:"none",borderTop:"none",borderBottom:"none",pointerEvents:"none",zIndex:1},legend:{display:"flex",gap:"24px",marginTop:"20px",padding:"20px",backgroundColor:N?"#4b5563":"#f8fafc",borderRadius:"12px",transition:"all 0.3s ease"},legendItem:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",color:N?"#e2e8f0":"#475569",transition:"all 0.3s ease"},legendColor:T=>({width:"16px",height:"16px",borderRadius:"4px",backgroundColor:T,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}),projectTitle:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",position:"relative"},projectTitleLeft:{display:"flex",alignItems:"center",gap:"12px",position:"relative"},projectTitleRight:{display:"flex",alignItems:"center",gap:"8px"},projectName:{fontSize:"24px",fontWeight:"700",color:N?"#e2e8f0":"#1e293b",transition:"all 0.3s ease",display:"flex",flexDirection:"column",gap:"4px"},projectMeta:{display:"flex",gap:"24px",fontSize:"14px",color:N?"#94a3b8":"#64748b",flexWrap:"wrap",marginBottom:"16px",transition:"all 0.3s ease"},card:T=>({backgroundColor:N?"#374151":"#fff",borderRadius:"20px",padding:"28px",marginBottom:"28px",boxShadow:T?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:T?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",border:N?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"visible"}),cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.03) 0%, transparent 70%)",opacity:0,transition:"opacity 0.4s ease",pointerEvents:"none"},actionButton:(T,de,je=!1)=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:je?N?"rgba(51,65,85,0.3)":"rgba(226,232,240,0.3)":T?de==="edit"?"rgba(59,130,246,0.1)":de==="delete"?"rgba(239,68,68,0.1)":de==="history"?"rgba(139,92,246,0.1)":"rgba(59,130,246,0.1)":N?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",color:je?N?"#475569":"#94a3b8":T?de==="edit"?"#3b82f6":de==="delete"?"#ef4444":de==="history"?"#8b5cf6":"#3b82f6":N?"#94a3b8":"#64748b",cursor:je?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",transform:T&&!je?"scale(1.1)":"scale(1)",opacity:je?.5:1}),lockBadge:(T,de)=>({position:"absolute",top:"12px",right:"12px",padding:"6px 12px",borderRadius:"8px",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",backgroundColor:de?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",color:de?"#10b981":"#ef4444",border:`1px solid ${de?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)"}`,zIndex:10}),changeStatusButton:T=>({padding:"6px 12px",borderRadius:"8px",border:"none",backgroundColor:T?"rgba(16,185,129,0.15)":"rgba(16,185,129,0.1)",color:T?"#059669":"#10b981",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"600",gap:"4px",transform:T?"scale(1.05)":"scale(1)",pointerEvents:"auto"}),statusBadge:T=>{const je={Completed:{bg:"#3b82f620",text:"#3b82f6"},"On Track":{bg:"#10b98120",text:"#10b981"},"At Risk":{bg:"#f59e0b20",text:"#f59e0b"},Delayed:{bg:"#ef444420",text:"#ef4444"},"In Progress":{bg:"#10b98120",text:"#10b981"},Pending:{bg:"#10b98120",text:"#10b981"},Planning:{bg:"#10b98120",text:"#10b981"},"On Hold":{bg:"#ef444420",text:"#ef4444"},Ongoing:{bg:"#10b98120",text:"#10b981"}}[T]||{bg:"#94a3b820",text:"#94a3b8"};return{display:"inline-block",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",backgroundColor:je.bg,color:je.text}},rulerTick:{position:"absolute",bottom:0,width:"1px",height:"8px",backgroundColor:N?"#64748b":"#cbd5e1"},rulerMajorTick:{position:"absolute",bottom:0,width:"2px",height:"12px",backgroundColor:"#94a3b8"},historyModal:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(8px)",animation:"modalBackdropFadeIn 0.25s ease-out"},historyModalContent:{backgroundColor:N?"#374151":"#fff",borderRadius:"24px",padding:"32px",boxShadow:"0 25px 50px rgba(0,0,0,0.3)",border:N?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",maxWidth:"800px",width:"90%",maxHeight:"80vh",display:"flex",flexDirection:"column",animation:"modalContentSlideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)"},historyModalHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",paddingBottom:"16px",borderBottom:N?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)"},historyModalTitle:{fontSize:"24px",fontWeight:"700",color:N?"#e2e8f0":"#1e293b",display:"flex",alignItems:"center",gap:"12px"},historyModalSubtitle:{fontSize:"14px",color:N?"#94a3b8":"#64748b",marginTop:"4px"},historyList:{flex:1,overflowY:"auto",marginBottom:"20px"},historyItem:T=>({backgroundColor:T?N?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":N?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px",border:N?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",transition:"all 0.2s ease",transform:T?"translateX(4px)":"translateX(0)"}),historyItemHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},historyChangeType:T=>({display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",backgroundColor:T+"20",color:T,border:`1px solid ${T}40`}),historyTimestamp:{fontSize:"12px",color:N?"#94a3b8":"#64748b",fontWeight:"500"},historyMilestoneName:{fontSize:"16px",fontWeight:"700",color:N?"#e2e8f0":"#1e293b",marginBottom:"8px"},historyChangeDetails:{display:"flex",gap:"12px",alignItems:"center",fontSize:"14px",color:N?"#cbd5e1":"#475569"},historyValue:T=>({padding:"6px 12px",borderRadius:"8px",backgroundColor:T?N?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.05)":N?"rgba(16,185,129,0.1)":"rgba(16,185,129,0.05)",border:T?"1px solid rgba(239,68,68,0.3)":"1px solid rgba(16,185,129,0.3)",color:T?"#ef4444":"#10b981",fontWeight:"600",fontSize:"13px"}),historyChangedBy:{fontSize:"12px",color:N?"#94a3b8":"#64748b",marginTop:"8px",display:"flex",alignItems:"center",gap:"6px"},historyEmptyState:{textAlign:"center",padding:"60px 20px",color:N?"#94a3b8":"#64748b",fontSize:"16px"},historyLoadingState:{textAlign:"center",padding:"60px 20px",color:N?"#94a3b8":"#64748b",fontSize:"16px"},closeHistoryButton:T=>({padding:"12px 24px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:T?"#3b82f6":N?"#4b5563":"#e5e7eb",color:T?"#fff":N?"#e2e8f0":"#374151",transform:T?"translateY(-1px)":"translateY(0)",boxShadow:T?"0 4px 12px rgba(59,130,246,0.3)":"none"})};return n.jsxs("div",{style:Ie.page,children:[n.jsxs("div",{style:Ie.headerRow,children:[n.jsx("h1",{style:Ie.header,children:"Plan"}),n.jsxs("div",{style:Ie.headerRight,children:[n.jsxs("button",{style:Ie.topButton(b==="alerts"),onMouseEnter:()=>L("alerts"),onMouseLeave:()=>L(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(lr,{size:20}),n.jsx("div",{style:Ie.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:Ie.topButton(b==="profile"),onMouseEnter:()=>{L("profile"),ce(!0)},onMouseLeave:()=>L(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Yt,{size:20})}),ve&&n.jsxs("div",{className:"profile-tooltip-animated",style:Ie.profileTooltip,onMouseEnter:()=>ce(!0),onMouseLeave:()=>ce(!1),children:[n.jsx("div",{style:Ie.tooltipArrow}),n.jsxs("div",{style:Ie.userInfo,children:[n.jsx("div",{style:Ie.avatar,children:c&&`${((Oi=c.firstName)==null?void 0:Oi[0])||""}${((Xo=c.lastName)==null?void 0:Xo[0])||""}`||"U"}),n.jsxs("div",{children:[n.jsx("div",{style:Ie.userName,children:c?`${c.firstName} ${c.lastName}`:"Loading..."}),n.jsx("div",{style:Ie.userRole,children:c?`${c.role}  ${c.department}`:"Loading..."})]})]}),n.jsxs("div",{style:Ie.userStats,children:[n.jsxs("div",{style:Ie.tooltipStatItem,children:[n.jsx("div",{style:Ie.tooltipStatNumber,children:i.length}),n.jsx("div",{style:Ie.tooltipStatLabel,children:"Plans"})]}),n.jsxs("div",{style:Ie.tooltipStatItem,children:[n.jsx("div",{style:Ie.tooltipStatNumber,children:i.filter(T=>{const de=typeof T.fields=="string"?JSON.parse(T.fields):T.fields;if(!de)return!1;const je=Object.values(de).filter(De=>typeof De=="object"&&(De==null?void 0:De.status));return je.length>0&&je.some(De=>De.status!=="Completed")}).length}),n.jsx("div",{style:Ie.tooltipStatLabel,children:"In Progress"})]}),n.jsxs("div",{style:Ie.tooltipStatItem,children:[n.jsx("div",{style:Ie.tooltipStatNumber,children:i.filter(T=>{const de=typeof T.fields=="string"?JSON.parse(T.fields):T.fields;if(!de)return!1;const je=Object.values(de).filter(De=>typeof De=="object"&&(De==null?void 0:De.status));return je.length>0&&je.every(De=>De.status==="Completed")}).length}),n.jsx("div",{style:Ie.tooltipStatLabel,children:"Completed"})]})]}),n.jsx("button",{style:Ie.themeToggle,onClick:Yd,children:N?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:Ie.tabContainer,children:["Master Plan","Individual Plan","Approvals"].map(T=>n.jsx("button",{style:Ie.tab(Z===T,h===`tab-${T}`),onMouseEnter:()=>y(`tab-${T}`),onMouseLeave:()=>y(null),onClick:()=>vs(T),children:T},T))}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[n.jsxs("div",{children:[n.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",color:N?"#e2e8f0":"#1e293b",margin:0},children:"Master Plans Timeline"}),n.jsx("div",{style:{marginTop:"6px",fontSize:"13px",fontWeight:"500",color:N?"#94a3b8":"#64748b",animation:"fadeIn 0.4s ease"},onMouseEnter:()=>OA(!0),onMouseLeave:()=>OA(!1),children:ws[vn]},vn)]}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[S.length===1&&t.length===1&&n.jsxs("button",{style:{...Ie.createButton(h==="history"),backgroundColor:h==="history"?"#8b5cf6":"#a78bfa"},onMouseEnter:()=>y("history"),onMouseLeave:()=>y(null),onClick:()=>Ia(t[0].id,t[0].project),children:[n.jsx(Wl,{size:16}),"View History"]}),n.jsxs("button",{style:Ie.createButton(h==="download"),onMouseEnter:()=>y("download"),onMouseLeave:()=>y(null),onClick:async()=>{try{const T=Ke.current;if(!T)return alert("Nothing to download!");const de=await ZU(T,{backgroundColor:N?"#1e293b":"#ffffff",scale:2,useCORS:!0}),je=document.createElement("a");je.download=`MasterPlan_Gantt_${new Date().toISOString().split("T")[0]}.png`,je.href=de.toDataURL("image/png"),je.click()}catch(T){console.error(" Error saving Gantt chart:",T),alert("Failed to generate PNG. Try again.")}},children:[n.jsx(uo,{size:16}),"Download PNG"]}),n.jsxs("button",{style:Ie.createButton(h==="create"),onMouseEnter:()=>y("create"),onMouseLeave:()=>y(null),onClick:Gd,children:[n.jsx(yn,{size:16}),"Create a Master Plan"]})]})]}),n.jsxs("div",{style:Ie.filterContainer,children:[n.jsx("input",{type:"text",placeholder:"Search by project, lead, or status...",value:Ae,onChange:T=>Ue(T.target.value),style:Ie.searchInput}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 16px",borderRadius:"12px",backgroundColor:N?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",border:N?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",cursor:"pointer",backdropFilter:"blur(10px)"},onClick:()=>V(!Q),children:[n.jsx("div",{style:Ie.checkbox(Q),children:Q&&""}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:N?"#e2e8f0":"#374151"},children:"Show Month Grid"})]}),S.length===1&&t.length===1&&n.jsxs("div",{style:{display:"flex",gap:"4px",padding:"4px",backgroundColor:N?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",border:N?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",borderRadius:"12px",backdropFilter:"blur(10px)"},children:[n.jsx("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:Ye==="timeline"?"#3b82f6":"transparent",color:Ye==="timeline"?"#fff":N?"#e2e8f0":"#64748b",boxShadow:Ye==="timeline"?"0 2px 8px rgba(59,130,246,0.3)":"none"},onClick:()=>Qt("timeline"),children:"Timeline"}),n.jsx("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:Ye==="waterfall"?"#3b82f6":"transparent",color:Ye==="waterfall"?"#fff":N?"#e2e8f0":"#64748b",boxShadow:Ye==="waterfall"?"0 2px 8px rgba(59,130,246,0.3)":"none"},onClick:()=>Qt("waterfall"),children:"Waterfall"})]}),n.jsxs("div",{style:{position:"relative"},ref:yt,children:[n.jsxs("button",{style:Ie.createButton(h==="filter"),onMouseEnter:()=>y("filter"),onMouseLeave:()=>y(null),onClick:()=>O(!P),children:[n.jsx(Xh,{size:16}),"Filter Projects",S.length>0&&` (${S.length})`,n.jsx(ko,{size:16})]}),P&&n.jsxs("div",{style:Ie.projectDropdown,children:[n.jsxs("div",{style:Ie.checkboxItem(h==="all"),onMouseEnter:()=>y("all"),onMouseLeave:()=>y(null),onClick:()=>U([]),children:[n.jsx("div",{style:Ie.checkbox(S.length===0),children:S.length===0&&""}),n.jsx("span",{style:Ie.checkboxLabel,children:"All Projects"})]},"all"),n.jsx("div",{style:{height:"1px",backgroundColor:N?"rgba(75,85,99,0.5)":"rgba(226,232,240,0.8)",margin:"8px 12px"}}),Wd.map(T=>n.jsxs("div",{style:Ie.checkboxItem(h===T),onMouseEnter:()=>y(T),onMouseLeave:()=>y(null),onClick:()=>un(T),children:[n.jsx("div",{style:Ie.checkbox(S.includes(T)),children:S.includes(T)&&""}),n.jsx("span",{style:Ie.checkboxLabel,children:T})]},T))]})]})]}),a?n.jsxs("div",{style:Ie.loadingState,children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"12px"},children:""}),"Loading master plans..."]}):i.length===0?n.jsxs("div",{style:Ie.emptyState,children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No master plans found"}),n.jsx("div",{children:"Create your first master plan to get started"})]}):n.jsxs("div",{ref:Ke,style:Ie.card(b==="gantt"),onMouseEnter:()=>L("gantt"),onMouseLeave:()=>L(null),children:[n.jsx("div",{style:Ie.cardGlow}),n.jsxs("div",{style:Ie.projectTitle,children:[n.jsx("div",{style:Ie.projectName,children:S.length===0?"Master Plan Overview":S.length===1?n.jsxs(n.Fragment,{children:[S[0],t.length===1&&KA(t[0].id)]}):`${S.length} Projects Selected`}),S.length===1&&t.length===1&&n.jsxs("div",{style:Ie.projectTitleRight,children:[n.jsx("button",{style:Ie.actionButton(h==="history-single","history"),onMouseEnter:()=>y("history-single"),onMouseLeave:()=>y(null),onClick:()=>Ia(t[0].id,t[0].project),title:"View project history",children:n.jsx(Wl,{size:16})}),ae[t[0].id]!=="viewer"&&n.jsx("button",{style:Ie.actionButton(h==="edit-single","edit",ae[t[0].id]==="viewer"),onMouseEnter:()=>y("edit-single"),onMouseLeave:()=>y(null),onClick:()=>ka(t[0]),title:ae[t[0].id]==="viewer"?"View-only access":"Edit this plan",disabled:ae[t[0].id]==="viewer",children:n.jsx(oa,{size:16})}),(ae[t[0].id]==="owner"||ae[t[0].id]===void 0&&t[0].createdBy===(c==null?void 0:c.id))&&n.jsx("button",{style:Ie.actionButton(h==="delete-single","delete"),onMouseEnter:()=>y("delete-single"),onMouseLeave:()=>y(null),onClick:()=>_i(t[0]),title:"Delete this plan",children:n.jsx(Pr,{size:16})})]})]}),S.length===1&&t.length===1&&n.jsxs("div",{style:Ie.projectMeta,children:[n.jsxs("span",{children:[n.jsx("strong",{children:"Start:"})," ",new Date(t[0].startDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),n.jsxs("span",{children:[n.jsx("strong",{children:"End:"})," ",new Date(t[0].endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),((zi=t[0].fields)==null?void 0:zi.lead)&&n.jsxs("span",{children:[n.jsx("strong",{children:"Lead:"})," ",t[0].fields.lead]}),((WA=t[0].fields)==null?void 0:WA.status)&&n.jsxs("span",{children:[n.jsx("strong",{children:"Status:"})," ",n.jsx("span",{style:Ie.statusBadge(t[0].fields.status),children:t[0].fields.status})]})]}),n.jsx("div",{ref:et,style:Ie.ganttContainer,children:t.length===0?n.jsxs("div",{style:Ie.emptyState,children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No projects found"}),n.jsx("div",{children:"Try adjusting your filters or search query"})]}):(()=>{const T=new Date;T.setHours(0,0,0,0);const de=[];t.forEach(dt=>{dt.startDate&&de.push(jt(dt.startDate)),dt.endDate&&de.push(jt(dt.endDate)),dt.fields&&Object.values(dt.fields).forEach(St=>{St.startDate&&de.push(jt(St.startDate)),St.endDate&&de.push(jt(St.endDate))})});const je=de.filter(dt=>dt&&!isNaN(dt)),De=new Date(Math.min(...je)),vt=new Date(Math.max(...je));console.log(" Timeline boundaries:",De.toLocaleDateString(),"",vt.toLocaleDateString());const Ot=Math.max(1,(vt-De)/(1e3*60*60*24));console.log(" Total timeline days:",Ot);const ht=Math.ceil((vt-De)/(1e3*60*60*24*30))+1,Ve=[];for(let dt=0;dt<ht;dt++){const St=new Date(De);St.setMonth(De.getMonth()+dt),Ve.push({label:St.toLocaleDateString("en-US",{month:"short",year:"numeric"}),date:new Date(St)})}const Wt=dt=>{for(let St=0;St<Ve.length;St++){const pn=Ve[St].date;if(dt.getFullYear()===pn.getFullYear()&&dt.getMonth()===pn.getMonth())return St}return-1};let fn=-1,cr=0;for(let dt=0;dt<Ve.length;dt++){const St=new Date(Ve[dt].date);St.setDate(1),St.setHours(0,0,0,0);const pn=new Date(St.getFullYear(),St.getMonth()+1,0);if(pn.setHours(23,59,59,999),T>=St&&T<=pn){fn=dt;const dr=pn.getDate(),Nn=T.getDate();cr=Nn/dr*100,console.log(" Today Line FOUND:",{monthIndex:dt,monthLabel:Ve[dt].label,monthStart:St.toLocaleDateString(),monthEnd:pn.toLocaleDateString(),todayDate:T.toLocaleDateString(),dayOfMonth:Nn,daysInMonth:dr,percentInMonth:cr.toFixed(2)+"%"});break}}fn===-1&&T<Ve[0].date&&console.log(" Today is BEFORE the timeline starts"),fn===-1&&T>new Date(Ve[Ve.length-1].date.getFullYear(),Ve[Ve.length-1].date.getMonth()+1,0)&&console.log(" Today is AFTER the timeline ends"),console.log(" Today Line Debug:",{todayMonthIndex:fn,todayPercentInMonth:cr.toFixed(2)+"%",todayDate:T.toLocaleDateString(),monthCount:Ve.length,firstMonth:Ve[0].label,lastMonth:Ve[Ve.length-1].label});const Xr=dt=>{const St=(dt==null?void 0:dt.toLowerCase())||"";return St.includes("complete")?"#3b82f6":St.includes("on track")?"#10b981":St.includes("at risk")?"#f59e0b":St.includes("delay")?"#ef4444":"#94a3b8"};return n.jsxs("div",{style:{position:"relative",minHeight:"100%"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${Ve.length}, 1fr)`,gap:"0",marginBottom:"16px",backgroundColor:N?"#4b5563":"#f8fafc",borderRadius:"12px",position:"relative",gridColumnGap:"0",gridRowGap:"0"},children:[n.jsx("div",{style:Ie.taskHeader,children:"Project"}),Ve.map((dt,St)=>n.jsxs("div",{style:{...Ie.monthHeader,minWidth:0,width:"100%",position:"relative",borderBottom:N?"2px solid #4b5563":"2px solid #cbd5e1",borderRight:St===Ve.length-1?"none":Q?N?"2px solid rgba(100,116,139,0.8)":"2px solid rgba(148,163,184,0.8)":"none"},children:[dt.label,[0,25,50,75,100].map((pn,dr)=>n.jsx("div",{style:{...dr===0||dr===4?Ie.rulerMajorTick:Ie.rulerTick,left:`calc(${pn}% - 1px)`}},dr))]},St))]}),t.map((dt,St)=>{var qr;const pn=jt(dt.startDate),dr=jt(dt.endDate),Nn=[];return dt.fields&&Object.entries(dt.fields).forEach(([Ct,_t],Pt)=>{Ct.toLowerCase()!=="status"&&Ct.toLowerCase()!=="lead"&&Ct.toLowerCase()!=="budget"&&Ct.toLowerCase()!=="completion"&&Nn.push({name:Ct,status:_t.status||_t,startDate:jt(_t.startDate)||null,endDate:jt(_t.endDate)||null,color:Xr(_t.status||_t)})}),Nn.sort((Ct,_t)=>{if(!Ct.startDate&&!_t.startDate)return 0;if(!Ct.startDate)return 1;if(!_t.startDate)return-1;const Pt=Ct.startDate-_t.startDate;return Pt!==0?Pt:!Ct.endDate&&!_t.endDate?0:Ct.endDate?_t.endDate?Ct.endDate-_t.endDate:-1:1}),Ye==="waterfall"&&S.length===1?Nn.map((Ct,_t)=>n.jsxs("div",{style:{position:"relative",marginBottom:"8px",width:"100%",maxWidth:"100%"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${Ve.length}, 1fr)`,gap:"0",alignItems:"center"},children:[n.jsx("div",{style:{...Ie.taskName,display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",minHeight:"60px",overflow:"hidden"},children:n.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[n.jsx("div",{style:{fontWeight:"700",fontSize:"13px"},children:Ct.name}),n.jsx("span",{style:{...Ie.statusBadge(Ct.status),marginTop:"4px",width:"fit-content"},children:Ct.status})]})}),Ve.map((Pt,Zt)=>n.jsx("div",{style:{...Ie.ganttCell,position:"relative",minWidth:0,width:"100%"},children:Q&&n.jsx("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:N?"rgba(75, 85, 99, 0.15)":"rgba(148, 163, 184, 0.1)",borderRadius:"8px",pointerEvents:"none",zIndex:1,margin:"1px"}})},Zt))]}),Ct.startDate&&Ct.endDate&&(()=>{const Pt=jt(Ct.startDate),Zt=jt(Ct.endDate);if(!Pt||!Zt)return null;const mo=Wt(Pt),xo=Wt(Zt);if(mo===-1||xo===-1)return null;const Fo=new Date(Pt.getFullYear(),Pt.getMonth()+1,0).getDate(),Ta=new Date(Zt.getFullYear(),Zt.getMonth()+1,0).getDate(),qo=Pt.getDate()/Fo*100,Zo=Zt.getDate()/Ta*100;return n.jsx("div",{style:{position:"absolute",left:`calc(200px + ((100% - 200px) / ${Ve.length}) * ${mo} + ((100% - 200px) / ${Ve.length}) * ${qo/100})`,width:`calc(((100% - 200px) / ${Ve.length}) * ${xo-mo} + ((100% - 200px) / ${Ve.length}) * ${(Zo-qo)/100})`,height:"24px",top:"50%",transform:"translateY(-50%)",backgroundColor:Ct.color,opacity:1,zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"10px",fontWeight:"600",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",cursor:"pointer",pointerEvents:"auto"},onMouseEnter:Cs=>{E.current&&clearTimeout(E.current);const Ki=Cs.currentTarget.getBoundingClientRect();ne({x:Ki.left+Ki.width/2,y:Ki.top,plan:dt,phase:Ct,phaseStart:Pt,phaseEnd:Zt})},onMouseLeave:()=>{E.current=setTimeout(()=>{ne(null)},150)},children:n.jsxs("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"0 4px",fontSize:"9px",maxWidth:"100%",display:"block"},children:[Pt.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",Zt.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})})})()]},`${dt.id}-waterfall-${_t}`)):n.jsxs("div",{style:{position:"relative",marginBottom:"8px"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${Ve.length}, 1fr)`,gap:"0",alignItems:"center"},children:[n.jsxs("div",{style:{...Ie.taskName,display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",cursor:"pointer",transition:"all 0.2s ease"},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",marginBottom:"4px"},children:[n.jsx("div",{style:{fontWeight:"700"},children:dt.project}),KA(dt.id)]}),(()=>{const Ct=It[dt.id],_t=!!Ct,Pt=(Ct==null?void 0:Ct.userId)===(c==null?void 0:c.id);return _t?n.jsxs("div",{style:{marginTop:"2px",marginBottom:"4px",fontSize:"11px",padding:"3px 6px",width:"fit-content",borderRadius:"6px",backgroundColor:Pt?"rgba(16,185,129,0.15)":"rgba(239,68,68,0.15)",color:Pt?"#10b981":"#ef4444",border:`1px solid ${Pt?"rgba(16,185,129,0.3)":"rgba(239,68,68,0.3)"}`,fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(Ei,{size:10}),Pt?"You are editing":`Locked by ${Ct.lockedBy}`]}):null})(),((qr=dt.fields)==null?void 0:qr.status)&&n.jsx("span",{style:Ie.statusBadge(dt.fields.status),children:dt.fields.status})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"6px",marginLeft:"12px",opacity:.85},children:[n.jsx("button",{style:Ie.actionButton(!1,"history"),onClick:()=>Ia(dt.id,dt.project),title:"View history",children:n.jsx(Wl,{size:14})}),ae[dt.id]!=="viewer"&&n.jsx("button",{style:Ie.actionButton(!1,"edit"),onClick:()=>ka(dt),title:"Edit plan",children:n.jsx(oa,{size:14})}),ae[dt.id]==="owner"&&n.jsx("button",{style:{...Ie.actionButton(!1,"users"),backgroundColor:N?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)",color:"#8b5cf6"},onClick:()=>fe(dt),title:"Manage team",children:n.jsx(Er,{size:14})}),ae[dt.id]==="owner"&&n.jsx("button",{style:Ie.actionButton(!1,"delete"),onClick:()=>_i(dt),title:"Delete plan",children:n.jsx(Pr,{size:14})})]})]}),Ve.map((Ct,_t)=>n.jsx("div",{style:{...Ie.ganttCell,position:"relative",minWidth:0,width:"100%"},children:Q&&n.jsx("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:N?"rgba(75, 85, 99, 0.15)":"rgba(148, 163, 184, 0.1)",borderRadius:"8px",pointerEvents:"none",zIndex:1,margin:"1px"}})},_t))]}),n.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,height:"40px",display:"grid",gridTemplateColumns:`200px repeat(${Ve.length}, 1fr)`,gap:"0",pointerEvents:"none"},children:[n.jsx("div",{}),Nn.length>0?Nn.map((Ct,_t)=>{console.log(`
 ========== RENDERING PHASE ${_t+1}/${Nn.length} ==========`),console.log(` Phase Name: ${Ct.name}`);const Pt=Ct.startDate?jt(Ct.startDate):null,Zt=Ct.endDate?jt(Ct.endDate):null;if(!Pt||!Zt)return console.warn("Phase missing date:",Ct),null;const mo=Wt(Pt),xo=Wt(Zt),Fo=new Date(Pt.getFullYear(),Pt.getMonth()+1,0).getDate(),Ta=new Date(Zt.getFullYear(),Zt.getMonth()+1,0).getDate(),qo=Pt.getDate()/Fo*100,Zo=Zt.getDate()/Ta*100,Cs=`calc(
200px +
((100% - 200px) * (${mo} / ${Ve.length})) +
((100% - 200px) * (${qo} / 100 / ${Ve.length}))
)`,Ki=`calc(
((100% - 200px) * ((${xo} - ${mo}) / ${Ve.length})) +
((100% - 200px) * ((${Zo} - ${qo}) / 100 / ${Ve.length}))
)`;return n.jsx("div",{style:{position:"absolute",left:Cs,width:Ki,height:"24px",top:"8px",transform:"translateY(83.5%)",backgroundColor:Ct.color,opacity:1,zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"10px",fontWeight:"600",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",cursor:"pointer",pointerEvents:"auto"},onMouseEnter:Wi=>{E.current&&clearTimeout(E.current);const Uo=Wi.currentTarget.getBoundingClientRect();ne({x:Uo.left+Uo.width/2,y:Uo.top,plan:dt,phase:Ct,phaseStart:Pt,phaseEnd:Zt})},onMouseLeave:()=>{E.current=setTimeout(()=>{ne(null)},150)},children:n.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"0 4px",fontSize:"9px",letterSpacing:"-0.3px",maxWidth:"100%",display:"block"},children:Ct.name})},`${dt.id}-${_t}`)}):(()=>{var xo;const Ct=(vt-De)/864e5,_t=(pn-De)/(1e3*60*60*24),Pt=(dr-De)/(1e3*60*60*24),Zt=_t/Ct*100,mo=(Pt-_t)/Ct*100;return n.jsx("div",{style:{position:"absolute",left:`calc(200px + (100% - 200px) * ${Zt/100})`,width:`calc((100% - 200px) * ${mo/100})`,height:"24px",top:"8px",backgroundColor:Xr((xo=dt.fields)==null?void 0:xo.status),display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:"600",padding:"0 8px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",pointerEvents:"auto"},children:dt.project})})()]})]},dt.id)}),n.jsxs("div",{style:Ie.legend,children:[n.jsxs("div",{style:Ie.legendItem,children:[n.jsx("div",{style:Ie.legendColor("#3b82f6")}),"Completed"]}),n.jsxs("div",{style:Ie.legendItem,children:[n.jsx("div",{style:Ie.legendColor("#10b981")}),"On Track"]}),n.jsxs("div",{style:Ie.legendItem,children:[n.jsx("div",{style:Ie.legendColor("#f59e0b")}),"At Risk"]}),n.jsxs("div",{style:Ie.legendItem,children:[n.jsx("div",{style:Ie.legendColor("#ef4444")}),"Delayed"]})]}),fn!==-1&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{position:"absolute",top:"0px",bottom:"80px",height:"auto",left:`calc(200px + (100% - 200px) * ${(fn+cr/100)/Ve.length})`,width:"2px",backgroundImage:"linear-gradient(to bottom, #ef4444 60%, transparent 60%)",backgroundSize:"2px 16px",backgroundRepeat:"repeat-y",zIndex:100,pointerEvents:"none"}}),n.jsx("div",{style:{position:"absolute",top:"-50px",left:`calc(200px + (100% - 200px) * ${(fn+cr/100)/Ve.length})`,transform:"translateX(-50%)",backgroundColor:"#ef4444",color:"#fff",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"700",whiteSpace:"nowrap",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:101},children:"Today"})]})]})})()})]}),n.jsxs("div",{style:Ie.statsContainer,children:[n.jsxs("div",{style:Ie.statCard(b==="stat1"),onMouseEnter:()=>L("stat1"),onMouseLeave:()=>L(null),children:[n.jsx("div",{style:Ie.statNumber,children:i.length}),n.jsx("div",{style:Ie.statLabel,children:"Total Master Plans"})]}),n.jsxs("div",{style:Ie.statCard(b==="stat2"),onMouseEnter:()=>L("stat2"),onMouseLeave:()=>L(null),children:[n.jsx("div",{style:Ie.statNumber,children:i.filter(T=>{const de=Hn(T);return de&&!de.toLowerCase().includes("complete")}).length}),n.jsx("div",{style:Ie.statLabel,children:"In Progress"})]}),n.jsxs("div",{style:Ie.statCard(b==="stat3"),onMouseEnter:()=>L("stat3"),onMouseLeave:()=>L(null),children:[n.jsx("div",{style:Ie.statNumber,children:i.filter(T=>{const de=Hn(T);return de&&de.toLowerCase().includes("complete")}).length}),n.jsx("div",{style:Ie.statLabel,children:"Completed"})]})]}),bn&&k&&n.jsx("div",{style:Ie.deleteConfirmation,children:n.jsxs("div",{style:Ie.deleteModal,children:[n.jsx("h3",{style:Ie.deleteModalTitle,children:"Delete Plan"}),n.jsxs("p",{style:Ie.deleteModalText,children:['Are you sure you want to delete "',k.project,'"? This action cannot be undone and will permanently remove all associated data.']}),n.jsxs("div",{style:Ie.deleteModalActions,children:[n.jsx("button",{style:Ie.modalButton(h==="cancel","cancel"),onMouseEnter:()=>y("cancel"),onMouseLeave:()=>y(null),onClick:Vd,children:"Cancel"}),n.jsx("button",{style:Ie.modalButton(h==="confirm-delete","danger"),onMouseEnter:()=>y("confirm-delete"),onMouseLeave:()=>y(null),onClick:Hr,children:"Delete Plan"})]})]})}),R&&re&&n.jsx("div",{style:Ie.statusModal,children:n.jsxs("div",{style:Ie.statusModalContent,children:[n.jsx("h3",{style:Ie.statusModalTitle,children:"Change Milestone Status"}),n.jsxs("p",{style:Ie.statusModalSubtitle,children:[n.jsx("strong",{children:"Project:"})," ",re.plan.project,n.jsx("br",{}),n.jsx("strong",{children:"Milestone:"})," ",re.milestoneName]}),n.jsxs("select",{style:Ie.statusSelect,value:Ze,onChange:T=>J(T.target.value),children:[n.jsx("option",{value:"On Track",children:"On Track"}),n.jsx("option",{value:"At Risk",children:"At Risk"}),n.jsx("option",{value:"Completed",children:"Completed"}),n.jsx("option",{value:"Delayed",children:"Delayed"})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{fontSize:"14px",fontWeight:"600",color:N?"#d1d5db":"#374151",marginBottom:"8px",display:"block"},children:"Justification (Optional) "}),n.jsx("textarea",{style:{width:"100%",padding:"12px",borderRadius:"8px",border:N?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:N?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:N?"#e2e8f0":"#1e293b",fontSize:"14px",fontFamily:'"Montserrat", sans-serif',resize:"vertical",minHeight:"80px",outline:"none"},placeholder:"Optionally explain why you're changing this status...",value:re.justification||"",onChange:T=>xe({...re,justification:T.target.value})})]}),n.jsxs("div",{style:Ie.deleteModalActions,children:[n.jsx("button",{style:Ie.modalButton(h==="cancel-status","cancel"),onMouseEnter:()=>y("cancel-status"),onMouseLeave:()=>y(null),onClick:()=>{Ce(!1),xe(null),J("")},children:"Cancel"}),n.jsx("button",{style:{...Ie.modalButton(h==="confirm-status","primary"),backgroundColor:h==="confirm-status"?"#2563eb":"#3b82f6"},onMouseEnter:()=>y("confirm-status"),onMouseLeave:()=>y(null),onClick:$d,children:"Update Status "})]})]})}),$&&we&&n.jsx("div",{style:Ie.historyModal,children:n.jsxs("div",{style:Ie.historyModalContent,children:[n.jsx("div",{style:Ie.historyModalHeader,children:n.jsxs("div",{children:[n.jsxs("div",{style:Ie.historyModalTitle,children:[n.jsx(Wl,{size:24}),"Project History"]}),n.jsx("div",{style:Ie.historyModalSubtitle,children:we.name})]})}),n.jsxs("div",{style:Ie.historyList,children:[n.jsxs("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:N?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",borderRadius:"12px",border:N?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)"},children:[n.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:N?"#94a3b8":"#64748b",marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Filter by Change Type"}),n.jsxs("select",{value:$t,onChange:T=>wn(T.target.value),style:{width:"100%",padding:"10px 14px",borderRadius:"8px",border:N?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:N?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:N?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",cursor:"pointer",outline:"none"},children:[n.jsx("option",{value:"all",children:"All Changes"}),n.jsx("option",{value:"status_changed",children:"Status Changed"}),n.jsx("option",{value:"dates_changed",children:"Dates Changed"}),n.jsx("option",{value:"milestone_added",children:"Milestone Added"}),n.jsx("option",{value:"milestone_deleted",children:"Milestone Deleted"}),n.jsx("option",{value:"project_renamed",children:"Project Renamed"}),n.jsx("option",{value:"project_dates_changed",children:"Project Timeline Changed"})]})]}),ie?n.jsxs("div",{style:Ie.historyLoadingState,children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"12px"},children:""}),"Loading history..."]}):te.length===0?n.jsxs("div",{style:Ie.historyEmptyState,children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No history found"}),n.jsx("div",{children:"This plan has no recorded changes yet"})]}):(()=>{const T=$t==="all"?te:te.filter(de=>de.ChangeType===$t);return T.length===0?n.jsxs("div",{style:Ie.historyEmptyState,children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"No matching changes"}),n.jsx("div",{children:"Try selecting a different filter"})]}):T.map((de,je)=>n.jsxs("div",{style:Ie.historyItem(h===`history-${je}`),onMouseEnter:()=>y(`history-${je}`),onMouseLeave:()=>y(null),children:[n.jsxs("div",{style:Ie.historyItemHeader,children:[n.jsx("div",{style:Ie.historyChangeType(zA(de.ChangeType)),children:Ea(de.ChangeType)}),n.jsx("div",{style:Ie.historyTimestamp,children:new Date(de.ChangedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),n.jsx("div",{style:Ie.historyMilestoneName,children:de.MilestoneName}),de.OldValue&&de.NewValue&&n.jsxs("div",{style:Ie.historyChangeDetails,children:[n.jsx("span",{style:Ie.historyValue(!0),children:de.OldValue}),n.jsx("span",{style:{fontSize:"16px",fontWeight:"700"},children:""}),n.jsx("span",{style:Ie.historyValue(!1),children:de.NewValue})]}),!de.OldValue&&de.NewValue&&n.jsx("div",{style:Ie.historyChangeDetails,children:n.jsx("span",{style:Ie.historyValue(!1),children:de.NewValue})}),de.OldValue&&!de.NewValue&&n.jsx("div",{style:Ie.historyChangeDetails,children:n.jsx("span",{style:Ie.historyValue(!0),children:de.OldValue})}),n.jsxs("div",{style:Ie.historyChangedBy,children:[n.jsx(Yt,{size:12}),"Changed by: ",de.ChangedBy]}),de.Justification&&n.jsxs("div",{style:{marginTop:"12px",padding:"12px",borderRadius:"8px",backgroundColor:N?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",border:N?"1px solid rgba(59,130,246,0.3)":"1px solid rgba(59,130,246,0.2)"},children:[n.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:N?"#93c5fd":"#3b82f6",marginBottom:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Justification:"}),n.jsxs("div",{style:{fontSize:"13px",color:N?"#e2e8f0":"#1e293b",lineHeight:"1.5",fontStyle:"italic"},children:['"',de.Justification,'"']})]})]},de.Id||je))})()]}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:n.jsx("button",{style:Ie.closeHistoryButton(h==="close-history"),onMouseEnter:()=>y("close-history"),onMouseLeave:()=>y(null),onClick:()=>{ue(!1),ge(null),Me([]),wn("all")},children:"Close"})})]})}),Xe&&ee&&n.jsx("div",{style:Ie.statusModal,children:n.jsxs("div",{style:Ie.statusModalContent,children:[n.jsx("h3",{style:Ie.statusModalTitle,children:"Manage Milestone Users"}),n.jsxs("p",{style:Ie.statusModalSubtitle,children:[n.jsx("strong",{children:"Project:"})," ",ee.plan.project,n.jsx("br",{}),n.jsx("strong",{children:"Milestone:"})," ",ee.milestoneName]}),Lt?n.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsxs("label",{style:{fontSize:"14px",fontWeight:"600",color:N?"#d1d5db":"#374151",marginBottom:"12px",display:"block"},children:["Assigned Users (",$e.length,")"]}),$e.length===0?n.jsx("div",{style:{padding:"16px",backgroundColor:N?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"8px",textAlign:"center",color:N?"#94a3b8":"#64748b"},children:"No users assigned to this milestone"}):$e.map(T=>n.jsxs("div",{style:{...Ie.selectedUserCard,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontWeight:"600",color:N?"#e2e8f0":"#1e293b",fontSize:"13px"},children:[T.firstName," ",T.lastName]}),n.jsx("div",{style:{fontSize:"11px",color:N?"#94a3b8":"#64748b"},children:T.email})]}),n.jsx("button",{style:{padding:"6px",borderRadius:"6px",border:"none",backgroundColor:"rgba(239,68,68,0.1)",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>pe(T.userId),children:n.jsx(dn,{size:16})})]},T.userId))]}),pt.length>0&&n.jsxs("div",{children:[n.jsx("label",{style:{fontSize:"14px",fontWeight:"600",color:N?"#d1d5db":"#374151",marginBottom:"8px",display:"block"},children:"Add User"}),n.jsxs("select",{style:Ie.statusSelect,onChange:T=>{T.target.value&&(Et(parseInt(T.target.value)),T.target.value="")},children:[n.jsx("option",{value:"",children:"Select a user to add..."}),pt.map(T=>n.jsxs("option",{value:T.userId,children:[T.firstName," ",T.lastName," (",T.email,")"]},T.userId))]})]})]}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:n.jsx("button",{style:Ie.modalButton(h==="close-users","cancel"),onMouseEnter:()=>y("close-users"),onMouseLeave:()=>y(null),onClick:()=>{B(!1),Pe(null),kt([]),Ut([])},children:"Close"})})]})}),H&&I&&n.jsx("div",{style:Ie.statusModal,children:n.jsxs("div",{style:Ie.statusModalContent,children:[n.jsx("h3",{style:Ie.statusModalTitle,children:"Manage Team & Permissions"}),n.jsxs("p",{style:Ie.statusModalSubtitle,children:[n.jsx("strong",{children:"Project:"})," ",I.project]}),Te?n.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading team..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsxs("label",{style:{fontSize:"14px",fontWeight:"600",color:N?"#d1d5db":"#374151",marginBottom:"12px",display:"block"},children:["Team Members (",Fe.length,")"]}),Fe.length===0?n.jsx("div",{style:{padding:"16px",backgroundColor:N?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"8px",textAlign:"center",color:N?"#94a3b8":"#64748b"},children:"No team members yet"}):Fe.map(T=>n.jsxs("div",{style:{...Ie.selectedUserCard,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsxs("div",{style:{fontWeight:"600",color:N?"#e2e8f0":"#1e293b",fontSize:"13px",marginBottom:"2px"},children:[T.firstName," ",T.lastName,T.permission==="owner"&&n.jsx("span",{style:{marginLeft:"8px",fontSize:"10px",padding:"2px 6px",borderRadius:"4px",backgroundColor:"#3b82f620",color:"#3b82f6",fontWeight:"700"},children:"OWNER"})]}),n.jsx("div",{style:{fontSize:"11px",color:N?"#94a3b8":"#64748b"},children:T.email})]}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsxs("select",{value:T.permission,onChange:de=>w(T.userId,de.target.value),style:{padding:"6px 10px",borderRadius:"6px",border:N?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:N?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:N?"#e2e8f0":"#1e293b",fontSize:"12px",cursor:"pointer"},children:[n.jsx("option",{value:"owner",children:"Owner"}),n.jsx("option",{value:"editor",children:"Editor"}),n.jsx("option",{value:"viewer",children:"Viewer"})]}),n.jsx("button",{style:{padding:"6px",borderRadius:"6px",border:"none",backgroundColor:"rgba(239,68,68,0.1)",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>qe(T.userId),children:n.jsx(dn,{size:16})})]})]},T.userId))]}),D.length>0&&n.jsxs("div",{children:[n.jsx("label",{style:{fontSize:"14px",fontWeight:"600",color:N?"#d1d5db":"#374151",marginBottom:"8px",display:"block"},children:"Add Team Member"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:"8px",alignItems:"end"},children:[n.jsxs("select",{style:Ie.statusSelect,value:G,onChange:T=>W(T.target.value),children:[n.jsx("option",{value:"",children:"Select a user..."}),D.map(T=>n.jsxs("option",{value:T.id,children:[T.firstName," ",T.lastName," (",T.email,")"]},T.id))]}),n.jsxs("select",{style:Ie.statusSelect,value:j,onChange:T=>F(T.target.value),children:[n.jsx("option",{value:"owner",children:"Owner"}),n.jsx("option",{value:"editor",children:"Editor"}),n.jsx("option",{value:"viewer",children:"Viewer"})]}),n.jsxs("button",{style:{padding:"12px 16px",borderRadius:"8px",border:"none",backgroundColor:G?"#3b82f6":N?"#4b5563":"#e5e7eb",color:G?"#fff":N?"#94a3b8":"#64748b",fontSize:"13px",fontWeight:"600",cursor:G?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},onClick:Qe,disabled:!G,children:[n.jsx(yn,{size:14}),"Add"]})]})]}),n.jsxs("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:N?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"8px",fontSize:"12px",color:N?"#93c5fd":"#3b82f6",lineHeight:"1.6"},children:[n.jsx("strong",{children:"Permissions:"}),n.jsx("br",{})," ",n.jsx("strong",{children:"Owner:"})," Full control including team management",n.jsx("br",{})," ",n.jsx("strong",{children:"Editor:"})," Can edit milestones and dates",n.jsx("br",{})," ",n.jsx("strong",{children:"Viewer:"})," Read-only access"]})]}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:n.jsx("button",{style:Ie.modalButton(h==="close-team","cancel"),onMouseEnter:()=>y("close-team"),onMouseLeave:()=>y(null),onClick:()=>{M(!1),_(null),Y([]),K([]),W(""),F("editor")},children:"Close"})})]})}),Tt&&n.jsxs("div",{style:{position:"fixed",top:Math.max(12,Tt.y-12),left:Tt.x,transform:"translate(-50%, -100%)",backgroundColor:N?"rgba(30,41,59,0.98)":"#ffffff",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"14px 18px",minWidth:"220px",maxWidth:"320px",zIndex:9999999,boxShadow:"0 12px 32px rgba(0,0,0,0.25)",border:N?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.9)",pointerEvents:"auto"},onMouseEnter:()=>{E.current&&clearTimeout(E.current)},onMouseLeave:()=>{E.current=setTimeout(()=>{ne(null)},150)},children:[n.jsx("div",{style:{fontWeight:700,marginBottom:"6px",color:N?"#f8fafc":"#1e293b"},children:Tt.phase.name}),n.jsxs("div",{style:{fontSize:"11px",marginBottom:"6px",color:N?"#cbd5f5":"#475569",opacity:1},children:[Tt.phaseStart.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," "," ",Tt.phaseEnd.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),n.jsx("div",{style:{fontSize:"11px",fontWeight:700,color:Tt.phase.color,marginBottom:"10px"},children:Tt.phase.status}),ae[Tt.plan.id]==="owner"&&n.jsxs("button",{style:{...Ie.changeStatusButton(!1),width:"100%",marginBottom:"6px",backgroundColor:"#3b82f6",color:"#ffffff",border:"1px solid #2563eb",transition:"all 0.15s ease",boxSizing:"border-box",boxShadow:h==="tooltip-team"?"0 6px 16px rgba(59,130,246,0.35)":"none",transform:h==="tooltip-team"?"translateY(-1px)":"none"},onMouseEnter:()=>y("tooltip-team"),onMouseLeave:()=>y(null),onClick:T=>{T.stopPropagation(),E.current&&clearTimeout(E.current),ne(null),ft(Tt.plan,Tt.phase.name,Tt.phase.id)},children:[n.jsx(Er,{size:12}),"Milestone Team"]}),ae[Tt.plan.id]==="owner"&&n.jsxs("button",{style:{...Ie.changeStatusButton(!1),width:"100%",transition:"all 0.15s ease",boxSizing:"border-box",boxShadow:h==="tooltip-status"?"0 6px 16px rgba(59,130,246,0.35)":"none",transform:h==="tooltip-status"?"translateY(-1px)":"none"},onMouseEnter:()=>y("tooltip-status"),onMouseLeave:()=>y(null),onClick:T=>{T.stopPropagation(),E.current&&clearTimeout(E.current),ne(null),xr(Tt.plan,Tt.phase.name,Tt.phase.status)},children:[n.jsx(po,{size:12}),"Change Status"]})]})]})},rQ=()=>{var ft,Et;const[i,e]=f.useState(null),[t,r]=f.useState([]),[a,A]=f.useState(!0),[c,u]=f.useState(null),[p,m]=f.useState(null),[h,y]=f.useState(!1),[b,L]=f.useState("Individual Plan");f.useRef(null);const[S,U]=f.useState(!1),[E,P]=f.useState("my");f.useRef({});const[O,ve]=f.useState("timeline"),ce=f.useRef(null),[Q,V]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[Z,le]=f.useState(""),[$,ue]=f.useState("All Types"),[we,ge]=f.useState(0),[te,Me]=f.useState(0),ie=["L1","L2"],[me,N]=f.useState([]),[be,H]=f.useState(0),M=me.length>0,I=f.useRef(null),_=f.useRef(null),[Fe,Y]=f.useState({x:0,y:0});f.useRef({});const D=f.useRef(!1),[K,Te]=f.useState(null),[Ne,G]=f.useState(!1),[W,j]=f.useState(null),[F,Xe]=f.useState(!1),[B,ee]=f.useState(null),Pe=(pe,R)=>{const Ce=new Date(pe),re=new Date(R),xe=new Date;if(xe<=Ce)return 0;if(xe>=re)return 100;const Ze=re-Ce,J=xe-Ce;return Math.round(J/Ze*100)},$e=pe=>{if(!pe)return null;if(pe instanceof Date)return pe;if(typeof pe=="number")return new Date(pe);if(pe=String(pe).trim(),/^\d{4}-\d{2}-\d{2}/.test(pe)){const[R,Ce,re]=pe.split("T")[0].split("-");return new Date(Number(R),Number(Ce)-1,Number(re))}if(/^\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}$/.test(pe)){const[R,Ce,re]=pe.split(/[\/\-]/);return new Date(Number(re),Number(Ce)-1,Number(R))}return console.warn(" Unrecognized date format:",pe),null},kt=pe=>pe!=null&&pe.includes("Progress")?"#10b981":pe!=null&&pe.includes("Complete")?"#3b82f6":pe!=null&&pe.includes("Risk")?"#f59e0b":"#64748b",pt=t.map(pe=>{var R,Ce;return{id:pe.Id,title:((R=pe.Fields)==null?void 0:R.title)||"Untitled Plan",project:pe.Project,projectType:pe.ProjectType||"custom",status:((Ce=pe.Fields)==null?void 0:Ce.status)||"In Progress",progress:Pe(pe.StartDate,pe.EndDate),startDate:pe.StartDate,endDate:pe.EndDate,lastUpdated:pe.CreatedAt?new Date(pe.CreatedAt).toLocaleString():"N/A",fields:pe.Fields}}),Ut=["Your assigned projects and personal timeline",()=>`${pt.length} active individual plans`,()=>E==="my"?"Currently viewing: My Plans":"Currently viewing: Supervised Plans"],Lt=me.map(pe=>({id:pe.id,title:pe.project,project:pe.project,projectType:pe.projectType||"custom",status:pe.status,progress:Pe(pe.startDate,pe.endDate),startDate:pe.startDate,endDate:pe.endDate,lastUpdated:"N/A",ownerName:pe.ownerName,fields:pe.fields}));f.useEffect(()=>{_.current||(_.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),I.current&&document.head.removeChild(I.current);const pe=document.createElement("style");pe.setAttribute("data-component","admin-individual-plan-background");const R=Q?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return pe.textContent=`
      /* More specific targeting to avoid conflicts */
      .admin-individual-plan-page {
        min-height: 100vh;
        background: ${R};
      }
      
      /* Target common parent containers more carefully */
      body {
        background: ${R} !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      /* Only target direct children of common containers */
      #root > div:first-child,
      .app > div:first-child,
      .main-content,
      .page-container {
        background: transparent !important;
        min-height: 100vh;
      }
      
      /* Fallback for nested containers */
      div[style*="background: white"],
      div[style*="background-color: white"],
      div[style*="background: #fff"],
      div[style*="background-color: #fff"] {
        background: transparent !important;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      /* Smooth transitions for theme changes */
      * {
        transition: background-color 0.3s ease, background 0.3s ease;
      }

      @keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(2px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
    `,document.head.appendChild(pe),I.current=pe,()=>{I.current&&document.head.contains(I.current)&&(document.head.removeChild(I.current),I.current=null),_.current&&document.querySelectorAll('[data-component="admin-individual-plan-background"]').length===0&&Object.assign(document.body.style,_.current)}},[Q]),f.useEffect(()=>{(async()=>{try{console.log(" Fetching individual plans and weekly allocations...");const R=await ke("/plan/individual",{method:"GET",credentials:"include"});if(!R.ok)throw new Error(`Plans fetch failed: ${R.status}`);const Ce=await R.json();console.log(" Plans received:",Ce),r(Ce);const re=await ke("/api/weekly-allocations/all",{method:"GET",credentials:"include"});if(re.ok){const xe=await re.json();console.log(" Weekly allocations received:",xe.allocations);const Ze=se(xe.allocations||[]);console.log(" Converted weekly plans:",Ze),r(J=>[...J,...Ze])}}catch(R){console.error(" Error fetching data:",R)}finally{A(!1)}})()},[]);const se=pe=>{const R={};return pe.forEach(Ce=>{const re=`${Ce.ProjectName}-${Ce.ProjectType}`;R[re]||(R[re]={Id:`weekly-${Ce.ProjectName}-${Date.now()}`,Project:Ce.ProjectName,ProjectType:Ce.ProjectType,StartDate:Ce.WeekStart,EndDate:Ce.WeekEnd,CreatedAt:Ce.CreatedAt,Fields:{title:`${Ce.ProjectName} (Weekly Allocation)`,status:"Ongoing"},isWeeklyAllocation:!0,weeks:[]}),R[re].weeks.push({name:`Week of ${new Date(Ce.WeekStart).toLocaleDateString("en-US",{month:"short",day:"numeric"})}`,startDate:Ce.WeekStart,endDate:Ce.WeekEnd,status:"Ongoing",allocatedHours:Ce.PlannedHours,tasks:Ce.Tasks?JSON.parse(Ce.Tasks):[]});const xe=new Date(Ce.WeekStart),Ze=new Date(Ce.WeekEnd),J=new Date(R[re].StartDate),qt=new Date(R[re].EndDate);xe<J&&(R[re].StartDate=Ce.WeekStart),Ze>qt&&(R[re].EndDate=Ce.WeekEnd)}),Object.values(R).map(Ce=>(Ce.weeks.forEach(re=>{Ce.Fields[re.name]={startDate:re.startDate,endDate:re.endDate,status:re.status}}),Ce))};f.useEffect(()=>{(async()=>{try{console.log(" Fetching supervised individual plans...");const R=await ke("/plan/individual/supervised",{method:"GET",credentials:"include"});if(!R.ok)return;const Ce=await R.json();console.log(" Supervised plans received:",Ce),N(Ce)}catch(R){console.error(" Error fetching supervised plans:",R)}})()},[]),f.useEffect(()=>{(async()=>{try{console.log(" Fetching user profile...");const R=await ke("/user/profile",{method:"GET",credentials:"include"});if(!R.ok)throw new Error(`Profile fetch failed: ${R.status}`);const Ce=await R.json();console.log(" User data received:",Ce),e(Ce)}catch(R){console.error(" Error fetching user profile:",R)}})()},[]),f.useEffect(()=>{const pe=async()=>{try{console.log(" Fetching master plans count...");const R=await ke("/plan/master",{method:"GET",credentials:"include"});if(R.ok){const re=(await R.json()).filter(Ze=>Ze.createdBy===(i==null?void 0:i.id));ge(re.length);const xe=re.filter(Ze=>Ze.approvalStatus==="Pending Approval").length;Me(xe),console.log(` Master Plans: ${re.length}, Pending: ${xe}`)}}catch(R){console.error(" Error fetching master plans count:",R)}};i!=null&&i.id&&pe()},[i]),f.useEffect(()=>{const pe=setInterval(()=>{H(R=>(R+1)%Ut.length)},5e3);return()=>clearInterval(pe)},[pt.length,E]),f.useEffect(()=>{const pe="individual-plan-scrollbar-style",R=document.getElementById(pe);R&&R.remove();const Ce=document.createElement("style");return Ce.id=pe,Ce.innerHTML=Q?`
      /* Dark mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: #1e293b;
      }
      ::-webkit-scrollbar-thumb {
        background-color: #475569;
        border-radius: 10px;
        border: 2px solid #1e293b;
      }
      ::-webkit-scrollbar-thumb:hover {
        background-color: #64748b;
      }
      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #475569 #1e293b;
      }
    `:`
      /* Light mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }
      ::-webkit-scrollbar-thumb {
        background-color: #cbd5e1;
        border-radius: 10px;
        border: 2px solid #f1f5f9;
      }
      ::-webkit-scrollbar-thumb:hover {
        background-color: #94a3b8;
      }
      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #cbd5e1 #f1f5f9;
      }
    `,document.head.appendChild(Ce),()=>{document.head.contains(Ce)&&document.head.removeChild(Ce)}},[Q]);const Tt=pe=>{console.log(` AdminIndividualPlan - Navigating to ${pe} tab`),pe==="Master Plan"?(console.log(" Navigating to master plan page"),window.location.href="/adminviewplan"):pe==="Approvals"?(console.log(" Navigating to approvals page"),window.location.href="/adminapprovals"):console.log(" Staying on individual plan page")},ne=()=>{V(!Q),y(!1)},Qe=(E==="my"?pt:Lt).filter(pe=>{const R=pe.title||"",Ce=pe.project||"",re=R.toLowerCase().includes(Z.toLowerCase())||Ce.toLowerCase().includes(Z.toLowerCase()),Ze={"All Types":"all","Master Plan Projects":"master-plan",Operations:"operation","Custom Projects":"custom","Planned Leave":"planned-leave"}[$]||$,J=Ze==="all"||pe.projectType===Ze;return re&&J});Qe.length;const w={page:{minHeight:"100vh",padding:"30px",background:Q?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:Q?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},createButton:pe=>({backgroundColor:pe?"#059669":"#10b981",color:"#fff",border:"none",borderRadius:"12px",padding:"12px 24px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:pe?"translateY(-2px)":"translateY(0)",boxShadow:pe?"0 8px 25px rgba(16,185,129,0.3)":"0 4px 12px rgba(16,185,129,0.2)"}),topButton:pe=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:pe?"rgba(59,130,246,0.1)":Q?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:pe?"#3b82f6":Q?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:pe?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:pe?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:Q?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:Q?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:Q?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:Q?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:Q?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:Q?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:Q?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:Q?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:Q?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:Q?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:Q?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(pe,R)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",outline:"none",backgroundColor:pe?"#3b82f6":R?Q?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:pe?"#fff":Q?"#e2e8f0":"#64748b",transform:R&&!pe?"translateY(-1px)":"translateY(0)",boxShadow:pe?"0 4px 12px rgba(59,130,246,0.3)":R&&!pe?"0 2px 8px rgba(0,0,0,0.1)":"none"}),searchContainer:{position:"relative",marginBottom:"24px",maxWidth:"400px"},searchInput:{width:"100%",padding:"12px 16px 12px 44px",borderRadius:"12px",border:Q?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:Q?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:Q?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',boxSizing:"border-box",position:"relative",zIndex:1},searchIcon:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:Q?"#94a3b8":"#64748b",transition:"all 0.3s ease",zIndex:2,pointerEvents:"none"},viewModeToggle:{display:"flex",gap:"4px",padding:"4px",backgroundColor:Q?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",border:Q?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",borderRadius:"12px",backdropFilter:"blur(10px)",marginBottom:"24px",maxWidth:"fit-content"},viewModeButton:pe=>({padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:pe?"#3b82f6":"transparent",color:pe?"#fff":Q?"#e2e8f0":"#64748b",boxShadow:pe?"0 2px 8px rgba(59,130,246,0.3)":"none"}),cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},planTitle:{fontSize:"18px",fontWeight:"700",color:Q?"#e2e8f0":"#1e293b",marginBottom:"4px",transition:"all 0.3s ease"},planOwner:{fontSize:"14px",color:Q?"#94a3b8":"#64748b",transition:"all 0.3s ease"},actionButtons:{display:"flex",gap:"8px"},actionButton:(pe,R="#64748b")=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:pe?`${R}15`:"transparent",color:pe?R:Q?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",transform:pe?"scale(1.1)":"scale(1)"}),statusBadge:pe=>({display:"inline-flex",alignItems:"center",padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",backgroundColor:`${kt(pe)}20`,color:kt(pe),marginBottom:"16px"}),progressLabel:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},progressText:{fontSize:"14px",fontWeight:"600",color:Q?"#e2e8f0":"#374151",transition:"all 0.3s ease"},progressPercentage:pe=>({fontSize:"14px",fontWeight:"700",color:getProgressColor(pe)}),planStats:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",marginBottom:"16px"},statItem:{textAlign:"center",padding:"12px",backgroundColor:Q?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},statNumber:{fontSize:"20px",fontWeight:"700",color:Q?"#e2e8f0":"#1e293b",marginBottom:"4px",transition:"all 0.3s ease"},statLabel:{fontSize:"12px",color:Q?"#94a3b8":"#64748b",fontWeight:"500",transition:"all 0.3s ease"},planFooter:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"16px",borderTop:Q?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"},dateRange:{fontSize:"12px",color:Q?"#94a3b8":"#64748b",transition:"all 0.3s ease"},lastUpdated:{fontSize:"12px",color:Q?"#94a3b8":"#64748b",fontStyle:"italic",transition:"all 0.3s ease"},statsContainer:{display:"block",width:"100%",marginTop:"32px"},statCard:pe=>({backgroundColor:Q?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"28px",textAlign:"center",boxShadow:pe?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",border:Q?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:pe?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",cursor:"pointer",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.03) 0%, transparent 70%)",opacity:0,transition:"opacity 0.4s ease",pointerEvents:"none"},statCardNumber:{fontSize:"36px",fontWeight:"800",color:Q?"#e2e8f0":"#1e293b",marginBottom:"8px",transition:"all 0.3s ease"},statCardLabel:{fontSize:"14px",color:Q?"#94a3b8":"#64748b",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},sectionTitle:{fontSize:"24px",fontWeight:"700",color:Q?"#e2e8f0":"#1e293b",margin:0,transition:"all 0.3s ease"},sectionSubtitle:{fontSize:"14px",color:Q?"#94a3b8":"#64748b",margin:"4px 0 0 0",transition:"all 0.3s ease"},planTypeBadge:pe=>({display:"inline-block",padding:"4px 10px",borderRadius:"999px",fontSize:"11px",fontWeight:"700",letterSpacing:"0.5px",marginBottom:"8px",backgroundColor:pe?"rgba(168,85,247,0.15)":"rgba(59,130,246,0.15)",color:pe?"#a855f7":"#3b82f6"}),ganttContainer:{marginTop:"24px",overflowX:"auto",overflowY:"visible",position:"relative",zIndex:1},ganttCard:pe=>({backgroundColor:Q?"#374151":"#fff",borderRadius:"20px",padding:"28px",marginBottom:"28px",boxShadow:pe?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:pe?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",border:Q?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"visible"}),taskHeader:{fontSize:"12px",fontWeight:"600",color:Q?"#e2e8f0":"#475569",padding:"8px 12px",transition:"all 0.3s ease"},monthHeader:{textAlign:"center",fontSize:"12px",fontWeight:"600",color:Q?"#e2e8f0":"#475569",padding:"8px 4px",transition:"all 0.3s ease",borderBottom:Q?"2px solid #4b5563":"2px solid #cbd5e1"},taskName:{fontSize:"14px",fontWeight:"500",color:Q?"#e2e8f0":"#374151",padding:"12px",backgroundColor:Q?"#4b5563":"#f8fafc",borderRadius:"8px",transition:"all 0.3s ease"},ganttCell:{height:"40px",position:"relative",transition:"all 0.3s ease"},legend:{display:"flex",gap:"24px",marginTop:"20px",padding:"20px",backgroundColor:Q?"#4b5563":"#f8fafc",borderRadius:"12px",transition:"all 0.3s ease"},legendItem:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",color:Q?"#e2e8f0":"#475569",transition:"all 0.3s ease"},legendColor:pe=>({width:"16px",height:"16px",borderRadius:"4px",backgroundColor:pe,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}),milestoneTooltip:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",backgroundColor:Q?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(10px)",borderRadius:"8px",padding:"12px 16px",marginBottom:"8px",maxWidth:"300px",minWidth:"200px",fontSize:"12px",fontWeight:"600",color:Q?"#e2e8f0":"#1e293b",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",border:Q?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(226,232,240,0.8)",zIndex:99999,pointerEvents:"auto",whiteSpace:"normal",wordWrap:"break-word",wordBreak:"break-word"},rulerTick:{position:"absolute",bottom:0,width:"1px",height:"8px",backgroundColor:Q?"#64748b":"#cbd5e1"},rulerMajorTick:{position:"absolute",bottom:0,width:"2px",height:"12px",backgroundColor:"#94a3b8"},checkbox:pe=>({width:"18px",height:"18px",borderRadius:"4px",border:pe?"2px solid #3b82f6":Q?"2px solid #64748b":"2px solid #cbd5e1",backgroundColor:pe?"#3b82f6":"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px",fontWeight:"700",transition:"all 0.2s ease"})},qe=()=>{if(Qe.length===0)return n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:Q?"#94a3b8":"#64748b"},children:[n.jsx(uo,{size:48,style:{marginBottom:"16px",opacity:.5}}),n.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"600"},children:"No assignments found"}),n.jsx("p",{style:{margin:0,fontSize:"14px"},children:Z?"Try adjusting your search terms":"You have no project assignments at the moment"})]});const pe=new Date;pe.setHours(0,0,0,0);const R=[];Qe.forEach(at=>{at.startDate&&R.push($e(at.startDate)),at.endDate&&R.push($e(at.endDate)),at.fields&&Object.values(at.fields).forEach(k=>{k.startDate&&R.push($e(k.startDate)),k.endDate&&R.push($e(k.endDate))})});const Ce=R.filter(at=>at&&!isNaN(at)),re=new Date(Math.min(...Ce)),xe=new Date(Math.max(...Ce)),Ze=Math.ceil((xe-re)/(1e3*60*60*24*30))+1,J=[];for(let at=0;at<Ze;at++){const k=new Date(re);k.setMonth(re.getMonth()+at),J.push({label:k.toLocaleDateString("en-US",{month:"short",year:"numeric"}),date:new Date(k)})}const qt=at=>{for(let k=0;k<J.length;k++){const v=J[k].date;if(at.getFullYear()===v.getFullYear()&&at.getMonth()===v.getMonth())return k}return-1};let He=-1,bn=0;for(let at=0;at<J.length;at++){const k=new Date(J[at].date);k.setDate(1),k.setHours(0,0,0,0);const v=new Date(k.getFullYear(),k.getMonth()+1,0);if(v.setHours(23,59,59,999),pe>=k&&pe<=v){He=at;const Ae=v.getDate();bn=pe.getDate()/Ae*100;break}}return n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{fontSize:"18px",fontWeight:"700",color:Q?"#e2e8f0":"#1e293b",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(uo,{size:20}),E==="my"?"My Assignments Timeline":"Supervised Assignments Timeline"]}),n.jsxs("div",{ref:ce,style:{...w.ganttCard(p==="gantt"),marginTop:"24px"},onMouseEnter:()=>m("gantt"),onMouseLeave:()=>m(null),children:[n.jsxs("div",{style:w.ganttContainer,children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${J.length}, 1fr)`,gap:"0",marginBottom:"16px",backgroundColor:Q?"#4b5563":"#f8fafc",borderRadius:"12px",position:"relative"},children:[n.jsx("div",{style:w.taskHeader,children:"Assignment"}),J.map((at,k)=>n.jsxs("div",{style:{...w.monthHeader,minWidth:0,width:"100%",position:"relative",borderRight:(k===J.length-1,"none")},children:[at.label,[0,25,50,75,100].map((v,Ae)=>n.jsx("div",{style:{...Ae===0||Ae===4?w.rulerMajorTick:w.rulerTick,left:`calc(${v}% - 1px)`}},Ae))]},k))]}),Qe.map((at,k)=>{var yt,It;const v=[],Ae=((yt=at.fields)==null?void 0:yt.leaveType)||at.projectType==="leave";at.fields&&Object.entries(at.fields).forEach(([tt,st])=>{if(["title","status","leaveType","leaveReason"].includes(tt))return;let ye,ae,ze;if(typeof st=="string"){const[Ye,Qt]=st.split(" - ");ye=$e(Ye),ae=$e(Qt),ze="Ongoing"}else st!=null&&st.startDate&&(st!=null&&st.endDate)&&(ye=$e(st.startDate),ae=$e(st.endDate),ze=st.status||"Ongoing");ye&&ae&&v.push({name:tt,startDate:ye,endDate:ae,status:ze,color:Ae?"#8b5cf6":ze!=null&&ze.toLowerCase().includes("complete")?"#3b82f6":"#10b981"})}),v.sort((tt,st)=>!tt.startDate&&!st.startDate?0:tt.startDate?st.startDate?tt.startDate-st.startDate:-1:1);const Ue=v.length,et=v.filter(tt=>{var st;return(st=tt.status)==null?void 0:st.toLowerCase().includes("complete")}).length,Ke=Ue>0?Math.round(et/Ue*100):0;return O==="waterfall"&&Qe.length===1?v.map((tt,st)=>{const ye=k===0&&st===0,ae=qt(tt.startDate),ze=qt(tt.endDate);if(ae===-1||ze===-1)return null;const Ye=new Date(tt.startDate.getFullYear(),tt.startDate.getMonth()+1,0).getDate(),Qt=new Date(tt.endDate.getFullYear(),tt.endDate.getMonth()+1,0).getDate(),$t=tt.startDate.getDate()/Ye*100,wn=tt.endDate.getDate()/Qt*100,jt=`calc(200px + ((100% - 200px) / ${J.length}) * ${ae} + ((100% - 200px) / ${J.length}) * ${$t/100})`,Hn=`calc(((100% - 200px) / ${J.length}) * ${ze-ae} + ((100% - 200px) / ${J.length}) * ${(wn-$t)/100})`;return n.jsxs("div",{style:{position:"relative",marginBottom:"8px"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${J.length}, 1fr)`,gap:"0",alignItems:"center"},children:[n.jsx("div",{style:{...w.taskName,display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"60px"},children:n.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[n.jsx("div",{style:{fontWeight:"700",fontSize:"13px"},children:tt.name}),n.jsx("span",{style:{...w.statusBadge(tt.status),marginTop:"4px",width:"fit-content"},children:tt.status})]})}),J.map((vn,an)=>n.jsx("div",{style:{...w.ganttCell,position:"relative",minWidth:0,width:"100%"}},an))]}),n.jsx("div",{style:{position:"absolute",left:jt,width:Hn,height:"24px",top:"50%",transform:"translateY(-50%)",backgroundColor:tt.color,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"10px",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",cursor:"pointer",zIndex:999},onMouseEnter:vn=>{const an=vn.currentTarget.getBoundingClientRect(),Hi=ce.current.getBoundingClientRect();Te({planId:at.id,milestone:tt,barRect:an,cardRect:Hi,isTopRow:ye})},onMouseLeave:()=>{requestAnimationFrame(()=>{D.current||Te(null)})},children:n.jsxs("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"0 4px",fontSize:"9px"},children:[tt.startDate.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",tt.endDate.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})})]},`${at.id}-waterfall-${st}`)}):n.jsxs("div",{style:{position:"relative",marginBottom:"8px"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:`200px repeat(${J.length}, 1fr)`,gap:"0",alignItems:"center"},children:[n.jsxs("div",{style:{...w.taskName,display:"flex",flexDirection:"column",minHeight:"80px",justifyContent:"center"},children:[n.jsx("div",{style:w.planTypeBadge(ie.includes(at.project)),children:ie.includes(at.project)?"OPERATION":((It=at.projectType)==null?void 0:It.toUpperCase())||"PROJECT"}),E==="supervised"&&n.jsx("div",{style:{display:"inline-block",padding:"4px 10px",borderRadius:"999px",fontSize:"11px",fontWeight:"700",marginBottom:"6px",backgroundColor:"rgba(239,68,68,0.15)",color:"#ef4444",width:"fit-content"},children:"READ-ONLY"}),n.jsx("div",{style:{fontWeight:"700",fontSize:"14px",marginBottom:"4px"},children:at.title}),n.jsx("div",{style:{fontSize:"11px",color:Q?"#94a3b8":"#64748b",marginBottom:"6px"},children:at.project}),E==="my"&&!at.isWeeklyAllocation&&n.jsx("div",{style:w.actionButtons,children:n.jsx("button",{style:w.actionButton(c===`edit-${at.id}`,"#3b82f6"),onMouseEnter:()=>u(`edit-${at.id}`),onMouseLeave:()=>u(null),title:"Edit Plan",onClick:tt=>{tt.stopPropagation(),window.location.href=`/admineditindividualplan/${at.id}`},children:n.jsx(oa,{size:14})})}),n.jsxs("div",{style:{marginTop:"4px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2px"},children:[n.jsxs("span",{style:{fontSize:"10px",fontWeight:"600",color:Q?"#94a3b8":"#64748b"},children:[et,"/",Ue]}),n.jsxs("span",{style:{fontSize:"10px",fontWeight:"700",color:Ke===100?"#10b981":"#3b82f6"},children:[Ke,"%"]})]}),n.jsx("div",{style:{height:"4px",backgroundColor:Q?"rgba(51,65,85,0.5)":"rgba(226,232,240,0.8)",borderRadius:"2px",overflow:"hidden"},children:n.jsx("div",{style:{height:"100%",width:`${Ke}%`,backgroundColor:Ke===100?"#10b981":"#3b82f6",borderRadius:"2px",transition:"width 0.3s ease"}})})]})]}),J.map((tt,st)=>n.jsx("div",{style:{...w.ganttCell,position:"relative",minWidth:0,width:"100%"}},st))]}),n.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,height:"80px",display:"grid",gridTemplateColumns:`200px repeat(${J.length}, 1fr)`,gap:"0",pointerEvents:"none"},children:[n.jsx("div",{}),v.map((tt,st)=>{const ye=qt(tt.startDate),ae=qt(tt.endDate);if(ye===-1||ae===-1)return null;const ze=new Date(tt.startDate.getFullYear(),tt.startDate.getMonth()+1,0).getDate(),Ye=new Date(tt.endDate.getFullYear(),tt.endDate.getMonth()+1,0).getDate(),Qt=tt.startDate.getDate()/ze*100,$t=tt.endDate.getDate()/Ye*100,wn=`calc(200px + ((100% - 200px) / ${J.length}) * ${ye} + ((100% - 200px) / ${J.length}) * ${Qt/100})`,jt=`calc(((100% - 200px) / ${J.length}) * ${ae-ye} + ((100% - 200px) / ${J.length}) * ${($t-Qt)/100})`;return n.jsx("div",{style:{position:"absolute",left:wn,width:jt,top:"50%",transform:"translateY(-50%)",height:"24px",backgroundColor:tt.color,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"11px",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",cursor:"pointer",zIndex:999,pointerEvents:"auto"},onMouseEnter:Hn=>{const vn=Hn.currentTarget.getBoundingClientRect(),an=ce.current.getBoundingClientRect();Te({planId:at.id,milestone:tt,barRect:vn,cardRect:an,isTopRow:k===0})},onMouseLeave:()=>{requestAnimationFrame(()=>{D.current||Te(null)})},children:n.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"0 8px"},children:tt.name})},st)})]})]},at.id)}),He!==-1&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{position:"absolute",top:"-40px",bottom:"0",left:`calc(200px + ((100% - 200px) * (${He} / ${J.length})) + ((100% - 200px) * (${bn} / 100 / ${J.length})))`,width:"2px",backgroundImage:"linear-gradient(to bottom, #ef4444 60%, transparent 60%)",backgroundSize:"2px 16px",backgroundRepeat:"repeat-y",zIndex:3,pointerEvents:"none"}}),n.jsx("div",{style:{position:"absolute",top:"-35px",left:`calc(200px + ((100% - 200px) * (${He} / ${J.length})) + ((100% - 200px) * (${bn} / 100 / ${J.length})))`,transform:"translateX(-50%)",backgroundColor:"#ef4444",color:"#fff",padding:"4px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:"700",whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:4},children:"Today"})]}),n.jsxs("div",{style:{display:"flex",gap:"20px",marginTop:"40px",padding:"12px 16px",backgroundColor:Q?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"8px",justifyContent:"center"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",backgroundColor:"#10b981"}}),n.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:Q?"#e2e8f0":"#475569"},children:"Ongoing"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",backgroundColor:"#3b82f6"}}),n.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:Q?"#e2e8f0":"#475569"},children:"Completed"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",backgroundColor:"#8b5cf6"}}),n.jsx("span",{style:{fontSize:"12px",fontWeight:"600",color:Q?"#e2e8f0":"#475569"},children:"Leave"})]})]})]}),K&&n.jsxs("div",{onMouseEnter:()=>{D.current=!0},onMouseLeave:()=>{D.current=!1,Te(null)},style:{position:"absolute",left:K.barRect.left-K.cardRect.left+K.barRect.width/2,[K.isTopRow?"top":"bottom"]:K.isTopRow?K.barRect.top-K.cardRect.top-4:K.cardRect.bottom-K.barRect.bottom-4,transform:K.isTopRow?"translate(-50%, -100%)":"translate(-50%, 100%)",backgroundColor:Q?"rgba(30,41,59,0.97)":"rgba(255,255,255,0.97)",backdropFilter:"blur(12px)",borderRadius:"10px",padding:"12px 16px",fontSize:"12px",fontWeight:"600",color:Q?"#e2e8f0":"#1e293b",boxShadow:"0 20px 60px rgba(0,0,0,0.4)",border:Q?"1px solid rgba(51,65,85,0.9)":"1px solid rgba(226,232,240,0.9)",zIndex:9999999,pointerEvents:"auto",maxWidth:"320px"},children:[n.jsx("div",{style:{fontWeight:"700",marginBottom:"4px"},children:K.milestone.name}),n.jsxs("div",{style:{fontSize:"11px",opacity:.9,marginBottom:"8px"},children:[K.milestone.startDate.toLocaleDateString()," "," ",K.milestone.endDate.toLocaleDateString()]}),E==="supervised"&&n.jsx("div",{style:{fontSize:"10px",fontWeight:"700",color:"#ef4444",backgroundColor:"rgba(239,68,68,0.15)",padding:"4px 8px",borderRadius:"999px",textAlign:"center"},children:"READ-ONLY (SUPERVISED)"}),E==="my"&&!K.milestone.name.includes("Week of")&&n.jsx("button",{style:{marginTop:"8px",width:"100%",padding:"6px 10px",borderRadius:"8px",border:"none",backgroundColor:"#3b82f6",color:"#fff",fontSize:"11px",fontWeight:"600",cursor:"pointer"},onClick:at=>{at.stopPropagation(),j({planId:K.planId,milestoneName:K.milestone.name,currentStatus:K.milestone.status}),G(!0),Te(null)},children:"Change Status"})]})]})]})};return n.jsxs("div",{className:"admin-individual-plan-page",style:w.page,children:[n.jsxs("div",{style:w.headerRow,children:[n.jsx("div",{style:w.headerLeft,children:n.jsx("h1",{style:w.header,children:"Plan"})}),n.jsxs("div",{style:w.headerRight,children:[n.jsxs("button",{style:w.topButton(p==="alerts"),onMouseEnter:()=>m("alerts"),onMouseLeave:()=>m(null),onClick:()=>{console.log(" Alerts clicked - Navigating to alerts page"),window.location.href="/adminalerts"},children:[n.jsx(lr,{size:20}),n.jsx("div",{style:w.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:w.topButton(p==="profile"),onMouseEnter:()=>{m("profile"),y(!0)},onMouseLeave:()=>{m(null)},onClick:()=>{console.log(" Profile clicked - Navigating to profile page"),window.location.href="/adminprofile"},children:n.jsx(Yt,{size:20})}),h&&n.jsxs("div",{style:w.profileTooltip,onMouseEnter:()=>{y(!0)},onMouseLeave:()=>{y(!1)},children:[n.jsx("div",{style:w.tooltipArrow}),n.jsxs("div",{style:w.userInfo,children:[n.jsx("div",{style:w.avatar,children:i&&((((ft=i.firstName)==null?void 0:ft[0])||"")+(((Et=i.lastName)==null?void 0:Et[0])||"")).toUpperCase()||"U"}),n.jsxs("div",{style:w.userDetails,children:[n.jsx("div",{style:w.userName,children:i?`${i.firstName} ${i.lastName}`:"Loading..."}),n.jsx("div",{style:w.userRole,children:i?`${i.role||"User"}  ${i.department||"Department"}`:""})]})]}),n.jsxs("div",{style:w.userStats,children:[n.jsxs("div",{style:w.tooltipStatItem,children:[n.jsx("div",{style:w.tooltipStatNumber,children:pt.length}),n.jsx("div",{style:w.tooltipStatLabel,children:"My Plans"})]}),n.jsxs("div",{style:w.tooltipStatItem,children:[n.jsx("div",{style:w.tooltipStatNumber,children:me.length}),n.jsx("div",{style:w.tooltipStatLabel,children:"Supervised"})]}),n.jsxs("div",{style:w.tooltipStatItem,children:[n.jsx("div",{style:w.tooltipStatNumber,children:te}),n.jsx("div",{style:w.tooltipStatLabel,children:"Pending"})]})]}),n.jsx("button",{style:w.themeToggle,onClick:ne,children:Q?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:w.tabContainer,children:["Master Plan","Individual Plan","Approvals"].map(pe=>n.jsx("button",{style:w.tab(b===pe,c===`tab-${pe}`),onMouseEnter:()=>u(`tab-${pe}`),onMouseLeave:()=>u(null),onClick:()=>Tt(pe),children:pe},pe))}),n.jsxs("div",{style:w.sectionHeader,children:[n.jsxs("div",{children:[n.jsxs("h2",{style:w.sectionTitle,children:["My Individual Plan",n.jsxs("span",{style:{marginLeft:"12px",fontSize:"14px",fontWeight:"600",color:Q?"#94a3b8":"#64748b"},children:["(",pt.length,")"]})]}),n.jsx("p",{style:{...w.sectionSubtitle,minHeight:"20px",animation:"fadeIn 0.4s ease"},children:typeof Ut[be]=="function"?Ut[be]():Ut[be]},be)]}),n.jsxs("button",{style:w.createButton(c==="create"),onMouseEnter:()=>u("create"),onMouseLeave:()=>u(null),onClick:()=>{window.location.href="/adminaddindividualplan"},children:[n.jsx(yn,{size:16}),"Add New Assignment"]})]}),n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",marginBottom:"24px"},children:[n.jsxs("div",{style:w.searchContainer,children:[n.jsx(PA,{size:18,style:w.searchIcon}),n.jsx("input",{type:"text",placeholder:E==="my"?"Search your assignments by title or project...":"Search supervised assignments...",value:Z,onChange:pe=>le(pe.target.value),style:w.searchInput})]}),n.jsx("div",{style:{...w.viewModeToggle,position:"relative",zIndex:10001},children:n.jsx(Vt,{value:$,onChange:pe=>{ue({"All Types":"all","Master Plan Projects":"master-plan",Operations:"operation","Custom Projects":"custom","Planned Leave":"planned-leave"}[pe]||pe)},options:["All Types","Master Plan Projects","Operations","Custom Projects","Planned Leave"],placeholder:"Filter by type...",isDarkMode:Q,compact:!0,searchable:!1})}),Qe.length===1&&n.jsxs("div",{style:w.viewModeToggle,children:[n.jsx("button",{style:w.viewModeButton(O==="timeline"),onClick:()=>ve("timeline"),children:"Timeline"}),n.jsx("button",{style:w.viewModeButton(O==="waterfall"),onClick:()=>ve("waterfall"),children:"Waterfall"})]}),n.jsxs("div",{style:w.viewModeToggle,children:[n.jsx("button",{style:w.viewModeButton(E==="my"),onClick:()=>P("my"),children:"My Plans"}),M&&n.jsx("button",{style:w.viewModeButton(E==="supervised"),onClick:()=>P("supervised"),children:"Supervised Plans"})]})]}),qe(),Ne&&W&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:n.jsxs("div",{style:{backgroundColor:Q?"#374151":"#fff",borderRadius:"20px",padding:"32px",maxWidth:"400px",width:"90%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:Q?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)"},children:[n.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:Q?"#e2e8f0":"#1e293b",marginBottom:"8px"},children:W.isOverallStatus?"Update Plan Status":"Change Milestone Status"}),n.jsx("p",{style:{fontSize:"14px",color:Q?"#94a3b8":"#64748b",marginBottom:"24px"},children:W.isOverallStatus?W.planTitle:W.milestoneName}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:(W.isOverallStatus?["Completed","Ongoing"]:["Ongoing","Completed"]).map(pe=>n.jsxs("button",{onClick:async()=>{try{if(W.isOverallStatus){if(!(await ke(`/plan/individual/${W.planId}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Qe.find(Ce=>Ce.id===W.planId),fields:{...Qe.find(Ce=>Ce.id===W.planId).fields,status:pe}})})).ok)throw new Error("Failed to update plan status");r(Ce=>Ce.map(re=>{if(re.Id===W.planId){const xe={...re.Fields,status:pe};return{...re,Fields:xe}}return re})),alert(` Plan status updated to ${pe}`)}else{if(!(await ke(`/plan/individual/${W.planId}/milestone`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({milestoneName:W.milestoneName,status:pe})})).ok)throw new Error("Failed to update milestone status");r(Ce=>Ce.map(re=>{if(re.Id===W.planId){const xe={...re.Fields};return xe[W.milestoneName]&&(xe[W.milestoneName].status=pe),{...re,Fields:xe}}return re})),alert(` ${W.milestoneName} status updated to ${pe}`)}G(!1),j(null)}catch(R){console.error(" Failed to update status:",R),alert(`Failed to update status: ${R.message}`)}},style:{padding:"16px",borderRadius:"12px",border:W.currentStatus===pe?`2px solid ${pe.includes("Complete")?"#3b82f6":"#10b981"}`:Q?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:W.currentStatus===pe?pe.includes("Complete")?"#3b82f620":"#10b98120":Q?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",color:Q?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:pe.includes("Complete")?"#3b82f6":"#10b981"}}),pe]},pe))}),n.jsx("button",{onClick:()=>{G(!1),j(null)},style:{width:"100%",padding:"12px",borderRadius:"12px",border:"none",backgroundColor:Q?"rgba(51,65,85,0.5)":"rgba(226,232,240,0.3)",color:Q?"#e2e8f0":"#64748b",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"})]})})]})},oQ=()=>{var fe,Qe;const[i,e]=f.useState(null),[t,r]=f.useState(null),[a,A]=f.useState(!1),[c,u]=f.useState("Approvals"),[p,m]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[h,y]=f.useState(""),[b,L]=f.useState("Pending Approval"),[S,U]=f.useState(!1),[E,P]=f.useState(null),[O,ve]=f.useState(null),ce={"Pending Approval":"pendingApproval",Approved:"approved",Rejected:"rejected"},[Q,V]=f.useState(0),[Z,le]=f.useState(!1),[$,ue]=f.useState(!1),[we,ge]=f.useState([]),[te,Me]=f.useState({pendingApproval:0,underReview:0,approved:0,rejected:0}),ie={"Pending Approval":["Plans awaiting your decision",`${te.pendingApproval} plans pending approval`,"Timely reviews keep projects moving"],Approved:["Approved master plans",`${te.approved} plans approved`,"These plans are now in execution"],Rejected:["Rejected master plans",`${te.rejected} plans rejected`,"Rejected plans require revision"]},[me,N]=f.useState(!1),[be,H]=f.useState(""),[M,I]=f.useState(!0),[_,Fe]=f.useState(null),[Y,D]=f.useState(!1),[K,Te]=f.useState(""),[Ne,G]=f.useState(null),W=f.useRef(null),j=f.useRef(null),F=f.useRef(null),Xe=async()=>{try{const w=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(w.ok){const qe=await w.json();Fe(qe)}}catch(w){console.error("Error fetching user profile:",w)}},B=async()=>{try{I(!0),console.log(" Fetching approvals...");const w=await ke("/api/approvals",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!w.ok)throw new Error("Failed to fetch approvals");const qe=await w.json();console.log(" Approvals data received:",qe),ge(qe.approvals),Me(qe.stats),N(qe.isApprover),H(qe.userEmail)}catch(w){console.error(" Error fetching approvals:",w),alert("Failed to load approvals. Please refresh the page.")}finally{I(!1)}},ee=async(w,qe)=>{if(!me){alert("You are not authorized to approve plans. Only designated approvers (muhammad.hasan@ihrp.sg and jumana.haseen@ihrp.sg) can approve.");return}let ft="Are you sure you want to approve this master plan?";if(qe==="Approved"?ft="This plan is already approved. Do you want to re-approve it? (This will update the approval timestamp)":qe==="Rejected"&&(ft="This plan was previously rejected. Are you sure you want to approve it now?"),!!confirm(ft))try{console.log(` Approving plan ${w}...`);const Et=await ke(`/api/approvals/${w}/approve`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({comments:""})}),pe=await Et.json();if(!Et.ok)throw new Error(pe.message||"Failed to approve plan");console.log(" Plan approved successfully"),alert("Master plan approved successfully!"),await B()}catch(Et){console.error(" Error approving plan:",Et),alert(Et.message||"Failed to approve plan. Please try again.")}},Pe=(w,qe)=>{if(!me){alert("You are not authorized to reject plans. Only designated approvers (muhammad.hasan@ihrp.sg and jumana.haseen@ihrp.sg) can reject.");return}G({planId:w,currentStatus:qe}),Te(""),D(!0)},$e=async()=>{if(!K||K.trim().length===0){alert("Please provide a reason for rejection");return}try{console.log(` Rejecting plan ${Ne.planId}...`);const w=await ke(`/api/approvals/${Ne.planId}/reject`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:K.trim()})}),qe=await w.json();if(!w.ok)throw new Error(qe.message||"Failed to reject plan");console.log(" Plan rejected successfully"),alert("Master plan rejected successfully!"),D(!1),G(null),Te(""),await B()}catch(w){console.error(" Error rejecting plan:",w),alert(w.message||"Failed to reject plan. Please try again.")}};if(f.useEffect(()=>{const w=document.getElementById("scrollbar-style");w&&w.remove();const qe=document.createElement("style");return qe.id="scrollbar-style",qe.innerHTML=p?`
      /* Dark mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #1e293b;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #475569;
        border-radius: 10px;
        border: 2px solid #1e293b;
      }

      ::-webkit-scrollbar-thumb:hover {
        background-color: #64748b;
      }

      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #475569 #1e293b;
      }
    `:`
      /* Light mode scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #cbd5e1;
        border-radius: 10px;
        border: 2px solid #f1f5f9;
      }

      ::-webkit-scrollbar-thumb:hover {
        background-color: #94a3b8;
      }

      /* Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #cbd5e1 #f1f5f9;
      }
    `,document.head.appendChild(qe),()=>{qe.remove()}},[p]),f.useEffect(()=>{B(),Xe()},[]),f.useEffect(()=>{j.current||(j.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),W.current&&document.head.removeChild(W.current);const w=document.createElement("style");w.setAttribute("data-component","admin-approvals-background");const qe=p?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return w.textContent=`
      .admin-approvals-page {
        min-height: 100vh;
        background: ${qe};
      }
      
      body {
        background: ${qe} !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      #root > div:first-child,
      .app > div:first-child,
      .main-content,
      .page-container {
        background: transparent !important;
        min-height: 100vh;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      * {
        transition: background-color 0.3s ease, background 0.3s ease;
      }
    `,document.head.appendChild(w),W.current=w,()=>{W.current&&document.head.contains(W.current)&&(document.head.removeChild(W.current),W.current=null),j.current&&document.querySelectorAll('[data-component="admin-approvals-background"]').length===0&&Object.assign(document.body.style,j.current)}},[p]),f.useEffect(()=>{const w=qe=>{F.current&&!F.current.contains(qe.target)&&ve(null)};return O&&document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[O]),f.useEffect(()=>{if(Z)return;const w=setInterval(()=>{V(qe=>{const ft=ie[b]||[];return ft.length?(qe+1)%ft.length:0})},5e3);return()=>clearInterval(w)},[b,ie,Z]),f.useEffect(()=>{V(0)},[b]),typeof document<"u"&&!document.getElementById("fade-style")){const w=document.createElement("style");w.id="fade-style",w.innerHTML=`
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(2px); }
      to { opacity: 1; transform: translateY(0); }
    }
  `,document.head.appendChild(w)}const kt=w=>{console.log(` AdminApprovals - Navigating to ${w} tab`),w==="Master Plan"?window.location.href="/adminviewplan":w==="Individual Plan"&&(window.location.href="/adminindividualplan")},pt=()=>{m(!p),localStorage.setItem("darkMode",!p),A(!1)},Ut=w=>{switch(w){case"Pending Approval":return"#ef4444";case"Under Review":return"#f59e0b";case"Approved":return"#10b981";case"Rejected":return"#6b7280";default:return"#6b7280"}},Lt=w=>{P(w),ue(!1),U(!0)},se=()=>{U(!1),ue(!1),P(null)},Tt=we.filter(w=>{const qe=w.title.toLowerCase().includes(h.toLowerCase())||w.createdBy.toLowerCase().includes(h.toLowerCase()),ft=w.status===b;return qe&&ft}),ne={page:{minHeight:"100vh",padding:"30px",background:p?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"12px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},header:{fontSize:"28px",fontWeight:"700",color:p?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},topButton:w=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:w?"rgba(59,130,246,0.1)":p?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:w?"#3b82f6":p?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:w?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:w?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:p?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:p?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:p?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:p?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:p?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:p?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:p?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:p?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:p?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:p?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(w,qe)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",outline:"none",backgroundColor:w?"#3b82f6":qe?p?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:w?"#fff":p?"#e2e8f0":"#64748b",transform:qe&&!w?"translateY(-1px)":"translateY(0)",boxShadow:w?"0 4px 12px rgba(59,130,246,0.3)":qe&&!w?"0 2px 8px rgba(0,0,0,0.1)":"none"}),approverBadge:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"12px",backgroundColor:me?"rgba(16,185,129,0.1)":"rgba(107,114,128,0.1)",border:`1px solid ${me?"rgba(16,185,129,0.3)":"rgba(107,114,128,0.3)"}`,fontSize:"13px",fontWeight:"600",color:me?"#10b981":"#6b7280",marginBottom:"8px"},controlsRow:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",gap:"16px"},searchContainer:{position:"relative",flex:1,maxWidth:"400px"},searchInput:{width:"100%",padding:"12px 16px 12px 44px",borderRadius:"12px",border:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:p?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:p?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',position:"relative",zIndex:1},searchIcon:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:p?"#94a3b8":"#64748b",transition:"all 0.3s ease",zIndex:2,pointerEvents:"none"},filterContainer:{display:"flex",gap:"8px"},filterButton:(w,qe)=>({padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:w?"#3b82f6":qe?p?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":p?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:w?"#fff":p?"#e2e8f0":"#64748b",backdropFilter:"blur(10px)"}),approvalsGrid:{display:"grid",gap:"24px",marginBottom:"32px"},approvalCard:w=>({backgroundColor:p?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"24px",boxShadow:w?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:w?"translateY(-8px) scale(1.01)":"translateY(0) scale(1)",border:p?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},cardTitle:{fontSize:"20px",fontWeight:"700",color:p?"#e2e8f0":"#1e293b",marginBottom:"4px",transition:"all 0.3s ease"},cardMeta:{fontSize:"14px",color:p?"#94a3b8":"#64748b",marginBottom:"8px"},statusBadge:w=>({display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",backgroundColor:`${Ut(w)}20`,color:Ut(w),border:`1px solid ${Ut(w)}30`}),cardInfo:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",marginBottom:"16px",marginTop:"16px"},infoItem:{display:"flex",flexDirection:"column",gap:"4px"},infoLabel:{fontSize:"12px",fontWeight:"600",color:p?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},infoValue:{fontSize:"14px",fontWeight:"500",color:p?"#e2e8f0":"#374151"},cardActions:{display:"flex",justifyContent:"flex-end",alignItems:"center",paddingTop:"16px",borderTop:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",gap:"8px"},actionButton:(w,qe,ft)=>{const Et={approve:{bg:"#10b981",hover:"#059669"},reject:{bg:"#ef4444",hover:"#dc2626"},view:{bg:"#3b82f6",hover:"#2563eb"}},pe=Et[w]||Et.view;return{padding:"8px 16px",borderRadius:"8px",border:"none",fontSize:"12px",fontWeight:"600",cursor:ft?"not-allowed":"pointer",transition:"all 0.3s ease",backgroundColor:ft?"#9ca3af":qe?pe.hover:pe.bg,color:"#fff",display:"flex",alignItems:"center",gap:"6px",transform:qe&&!ft?"translateY(-1px)":"translateY(0)",boxShadow:qe&&!ft?`0 4px 12px ${pe.bg}40`:"none",opacity:ft?.5:1}},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},modalContent:{backgroundColor:p?"rgba(55,65,81,0.95)":"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"32px",maxWidth:"500px",width:"100%",position:"relative",border:p?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",boxShadow:"0 25px 50px rgba(0,0,0,0.25)",backdropFilter:"blur(20px)"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",borderBottom:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",paddingBottom:"16px"},modalTitle:{fontSize:"24px",fontWeight:"700",color:p?"#e2e8f0":"#1e293b"},closeButton:w=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:w?"rgba(239,68,68,0.1)":"transparent",color:w?"#ef4444":p?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),textarea:{width:"100%",minHeight:"120px",padding:"12px 16px",borderRadius:"12px",border:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:p?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:p?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',resize:"vertical"},modalActions:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"24px"},statsContainer:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"24px"},statCard:w=>({backgroundColor:p?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"28px",textAlign:"center",boxShadow:w?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",border:p?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:w?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",cursor:"pointer",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),statNumber:{fontSize:"36px",fontWeight:"800",color:p?"#e2e8f0":"#1e293b",marginBottom:"8px",transition:"all 0.3s ease"},statLabel:{fontSize:"14px",color:p?"#94a3b8":"#64748b",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",color:p?"#94a3b8":"#64748b"},emptyState:{textAlign:"center",padding:"60px 20px",color:p?"#94a3b8":"#64748b"}};return M?n.jsx("div",{className:"admin-approvals-page",style:ne.page,children:n.jsx("div",{style:ne.loadingContainer,children:n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx(Mi,{size:48,style:{marginBottom:"16px",opacity:.5}}),n.jsx("p",{children:"Loading approvals..."})]})})}):n.jsxs("div",{className:"admin-approvals-page",style:ne.page,children:[n.jsxs("div",{style:ne.headerRow,children:[n.jsx("div",{style:ne.headerLeft,children:n.jsx("h1",{style:ne.header,children:"Plan"})}),n.jsxs("div",{style:ne.headerRight,children:[n.jsxs("button",{style:ne.topButton(t==="alerts"),onMouseEnter:()=>r("alerts"),onMouseLeave:()=>r(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(lr,{size:20}),n.jsx("div",{style:ne.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:ne.topButton(t==="profile"),onMouseEnter:()=>{r("profile"),A(!0)},onMouseLeave:()=>r(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Yt,{size:20})}),a&&_&&n.jsxs("div",{style:ne.profileTooltip,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[n.jsx("div",{style:ne.tooltipArrow}),n.jsxs("div",{style:ne.userInfo,children:[n.jsxs("div",{style:ne.avatar,children:[(((fe=_.firstName)==null?void 0:fe[0])||"").toUpperCase(),(((Qe=_.lastName)==null?void 0:Qe[0])||"").toUpperCase()]}),n.jsxs("div",{style:ne.userDetails,children:[n.jsxs("div",{style:ne.userName,children:[_.firstName," ",_.lastName]}),n.jsxs("div",{style:ne.userRole,children:[_.role==="admin"?"Admin":"Member","  ",_.department]})]})]}),n.jsxs("div",{style:ne.userStats,children:[n.jsxs("div",{style:ne.tooltipStatItem,children:[n.jsx("div",{style:ne.tooltipStatNumber,children:te.pendingApproval}),n.jsx("div",{style:ne.tooltipStatLabel,children:"Pending"})]}),n.jsxs("div",{style:ne.tooltipStatItem,children:[n.jsx("div",{style:ne.tooltipStatNumber,children:te.approved}),n.jsx("div",{style:ne.tooltipStatLabel,children:"Approved"})]}),n.jsxs("div",{style:ne.tooltipStatItem,children:[n.jsx("div",{style:ne.tooltipStatNumber,children:te.rejected}),n.jsx("div",{style:ne.tooltipStatLabel,children:"Rejected"})]})]}),n.jsx("button",{style:ne.themeToggle,onClick:pt,children:p?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:ne.tabContainer,children:["Master Plan","Individual Plan","Approvals"].map(w=>n.jsx("button",{style:ne.tab(c===w,i===`tab-${w}`),onMouseEnter:()=>e(`tab-${w}`),onMouseLeave:()=>e(null),onClick:()=>kt(w),children:w},w))}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",color:p?"#e2e8f0":"#1e293b",margin:0},children:"Approvals"}),n.jsx("p",{style:{fontSize:"14px",color:p?"#94a3b8":"#64748b",margin:"4px 0 0 0",animation:"fadeIn 0.4s ease",cursor:"default"},onMouseEnter:()=>le(!0),onMouseLeave:()=>le(!1),children:(ie[b]||[])[Q]},`${b}-${Q}`),n.jsx("div",{style:ne.approverBadge,children:me?n.jsxs(n.Fragment,{children:[n.jsx(vc,{size:16}),"Authorized Approver (",be,")"]}):n.jsxs(n.Fragment,{children:[n.jsx(lo,{size:16}),"View Only (",be,")"]})})]}),n.jsxs("div",{style:ne.controlsRow,children:[n.jsxs("div",{style:ne.searchContainer,children:[n.jsx(PA,{size:18,style:ne.searchIcon}),n.jsx("input",{type:"text",placeholder:"Search approvals by title or creator...",value:h,onChange:w=>y(w.target.value),style:ne.searchInput})]}),n.jsx("div",{style:ne.filterContainer,children:["Pending Approval","Approved","Rejected"].map(w=>n.jsxs("button",{style:ne.filterButton(b===w,i===`filter-${w}`),onMouseEnter:()=>e(`filter-${w}`),onMouseLeave:()=>e(null),onClick:()=>L(w),children:[w," (",te[ce[w]]||0,")"]},w))})]}),n.jsx("div",{style:ne.approvalsGrid,children:Tt.map(w=>n.jsxs("div",{style:ne.approvalCard(t===`approval-${w.id}`),onMouseEnter:()=>r(`approval-${w.id}`),onMouseLeave:()=>r(null),children:[n.jsxs("div",{style:ne.cardHeader,children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:ne.cardTitle,children:w.title}),n.jsxs("div",{style:ne.cardMeta,children:["Created by: ",w.createdBy," (",w.createdByEmail,")  ",w.department,"  ",new Date(w.createdDate).toLocaleDateString()]})]}),n.jsx("div",{style:ne.statusBadge(w.status),children:w.status})]}),n.jsxs("div",{style:ne.cardInfo,children:[n.jsxs("div",{style:ne.infoItem,children:[n.jsx("div",{style:ne.infoLabel,children:"Start Date"}),n.jsx("div",{style:ne.infoValue,children:new Date(w.startDate).toLocaleDateString()})]}),n.jsxs("div",{style:ne.infoItem,children:[n.jsx("div",{style:ne.infoLabel,children:"End Date"}),n.jsx("div",{style:ne.infoValue,children:new Date(w.endDate).toLocaleDateString()})]}),n.jsxs("div",{style:ne.infoItem,children:[n.jsx("div",{style:ne.infoLabel,children:"Milestones"}),n.jsx("div",{style:ne.infoValue,children:w.milestoneCount})]}),w.latestUpdate&&n.jsxs("div",{style:ne.infoItem,children:[n.jsx("div",{style:ne.infoLabel,children:w.status==="Pending Approval"?"Pending Changes":"Last Update"}),n.jsxs("div",{style:ne.infoValue,children:[w.latestUpdate.changeCount," update",w.latestUpdate.changeCount>1?"s":""]})]}),w.approvedBy&&n.jsxs("div",{style:ne.infoItem,children:[n.jsx("div",{style:ne.infoLabel,children:"Approved By"}),n.jsxs("div",{style:ne.infoValue,children:[w.approvedBy," on ",new Date(w.approvedAt).toLocaleDateString()]})]}),w.rejectedBy&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:ne.infoItem,children:[n.jsx("div",{style:ne.infoLabel,children:"Rejected By"}),n.jsxs("div",{style:ne.infoValue,children:[w.rejectedBy," on ",new Date(w.rejectedAt).toLocaleDateString()]})]}),n.jsxs("div",{style:ne.infoItem,children:[n.jsx("div",{style:ne.infoLabel,children:"Rejection Reason"}),n.jsx("div",{style:ne.infoValue,children:w.rejectionReason})]})]})]}),n.jsxs("div",{style:ne.cardActions,children:[n.jsxs("button",{style:ne.actionButton("view",i===`view-${w.id}`,!1),onMouseEnter:()=>e(`view-${w.id}`),onMouseLeave:()=>e(null),onClick:()=>Lt(w),children:[n.jsx($o,{size:14}),"View Details"]}),w.canApprove&&n.jsxs("button",{style:ne.actionButton("approve",i===`approve-${w.id}`,!w.canApprove),onMouseEnter:()=>e(`approve-${w.id}`),onMouseLeave:()=>e(null),onClick:()=>ee(w.id,w.status),disabled:!w.canApprove,title:w.status==="Approved"?"Re-approve this plan":w.status==="Rejected"?"Approve (overrides rejection)":"Approve this plan",children:[n.jsx(lh,{size:14}),w.status==="Approved"?"Re-Approve":"Approve"]}),w.canReject&&n.jsxs("button",{style:ne.actionButton("reject",i===`reject-${w.id}`,!w.canReject),onMouseEnter:()=>e(`reject-${w.id}`),onMouseLeave:()=>e(null),onClick:()=>Pe(w.id,w.status),disabled:!w.canReject,title:w.status==="Rejected"?"Update rejection reason":w.status==="Approved"?"Reject (overrides approval)":"Reject this plan",children:[n.jsx(dn,{size:14}),w.status==="Rejected"?"Re-Reject":"Reject"]})]})]},w.id))}),Tt.length===0&&n.jsxs("div",{style:ne.emptyState,children:[n.jsx(T2,{size:48,style:{marginBottom:"16px",opacity:.5}}),n.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"600"},children:h?"No approvals found":"No approvals in this status"}),n.jsx("p",{style:{margin:0,fontSize:"14px"},children:h?"Try adjusting your search terms":`No ${b.toLowerCase()} approvals at the moment`})]}),Y&&n.jsx("div",{style:ne.modal,onClick:()=>D(!1),children:n.jsxs("div",{style:ne.modalContent,onClick:w=>w.stopPropagation(),children:[n.jsxs("div",{style:ne.modalHeader,children:[n.jsx("div",{style:ne.modalTitle,children:(Ne==null?void 0:Ne.currentStatus)==="Rejected"?"Update Rejection":"Reject Master Plan"}),n.jsx("button",{style:ne.closeButton(i==="close-modal"),onMouseEnter:()=>e("close-modal"),onMouseLeave:()=>e(null),onClick:()=>D(!1),children:n.jsx(dn,{size:24})})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[(Ne==null?void 0:Ne.currentStatus)==="Approved"&&n.jsxs("div",{style:{padding:"12px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",marginBottom:"12px",fontSize:"13px",color:"#ef4444"},children:[" This plan is currently ",n.jsx("strong",{children:"Approved"}),". Rejecting it will override the approval."]}),(Ne==null?void 0:Ne.currentStatus)==="Rejected"&&n.jsx("div",{style:{padding:"12px",backgroundColor:"rgba(59,130,246,0.1)",border:"1px solid rgba(59,130,246,0.3)",borderRadius:"8px",marginBottom:"12px",fontSize:"13px",color:"#3b82f6"},children:" This plan is already rejected. You can update the rejection reason."}),n.jsx("label",{style:{fontSize:"14px",fontWeight:"600",color:p?"#d1d5db":"#374151",marginBottom:"8px",display:"block"},children:"Rejection Reason *"}),n.jsx("textarea",{style:ne.textarea,value:K,onChange:w=>Te(w.target.value),placeholder:"Please provide a detailed reason for rejection..."}),n.jsx("small",{style:{fontSize:"12px",color:p?"#94a3b8":"#64748b",display:"block",marginTop:"8px"},children:"This reason will be visible to the plan creator."})]}),n.jsxs("div",{style:ne.modalActions,children:[n.jsx("button",{style:ne.actionButton("view",i==="cancel-reject",!1),onMouseEnter:()=>e("cancel-reject"),onMouseLeave:()=>e(null),onClick:()=>D(!1),children:"Cancel"}),n.jsxs("button",{style:ne.actionButton("reject",i==="confirm-reject",!1),onMouseEnter:()=>e("confirm-reject"),onMouseLeave:()=>e(null),onClick:$e,children:[n.jsx(dn,{size:14}),"Confirm Rejection"]})]})]})}),S&&E&&(()=>{var Et,pe,R;const w=((Et=E.latestUpdate)==null?void 0:Et.changes)||[],qe=3,ft=$?w:w.slice(0,qe);return n.jsx("div",{style:ne.modal,onClick:se,children:n.jsxs("div",{style:{...ne.modalContent,maxWidth:"700px",maxHeight:"80vh",padding:0,display:"flex",flexDirection:"column",overflow:"hidden"},onClick:Ce=>Ce.stopPropagation(),children:[n.jsxs("div",{style:{...ne.modalHeader,position:"sticky",top:0,zIndex:5,backgroundColor:p?"#374151":"#ffffff",borderBottom:p?"1px solid rgba(148,163,184,0.15)":"1px solid rgba(226,232,240,0.9)",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",padding:"20px 24px 16px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:ne.modalTitle,children:E.title}),n.jsxs("div",{style:{fontSize:"14px",color:p?"#94a3b8":"#64748b",marginTop:"4px"},children:["Created by ",E.createdBy,"  ",E.department]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:ne.statusBadge(E.status),children:E.status}),n.jsx("button",{style:ne.closeButton(i==="close"),onMouseEnter:()=>e("close"),onMouseLeave:()=>e(null),onClick:se,children:n.jsx(dn,{size:24})})]})]}),n.jsxs("div",{style:{padding:"24px",overflowY:"auto",flex:1},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"20px",backgroundColor:p?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",marginBottom:"24px"},children:[n.jsxs("div",{children:[n.jsx("div",{style:ne.infoLabel,children:"Start Date"}),n.jsx("div",{style:{...ne.infoValue,fontSize:"15px",fontWeight:"600"},children:new Date(E.startDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("div",{style:ne.infoLabel,children:"End Date"}),n.jsx("div",{style:{...ne.infoValue,fontSize:"15px",fontWeight:"600"},children:new Date(E.endDate).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("div",{style:ne.infoLabel,children:"Milestones"}),n.jsx("div",{style:{...ne.infoValue,fontSize:"15px",fontWeight:"600"},children:E.milestoneCount})]})]}),((R=(pe=E.latestUpdate)==null?void 0:pe.changes)==null?void 0:R.length)>0&&ft.map((Ce,re)=>n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{...ne.infoLabel,marginBottom:"6px"},children:Ce.milestone}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"16px",alignItems:"center"},children:[n.jsx("div",{style:{...ne.infoValue,padding:"8px 12px",backgroundColor:p?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.05)",borderRadius:"8px",textDecoration:"line-through",opacity:.7},children:Ce.oldValue||"N/A"}),n.jsx("div",{children:""}),n.jsx("div",{style:{...ne.infoValue,padding:"8px 12px",backgroundColor:p?"rgba(16,185,129,0.1)":"rgba(16,185,129,0.05)",borderRadius:"8px",fontWeight:600},children:Ce.newValue||"N/A"})]}),n.jsxs("div",{style:{marginTop:"8px"},children:[n.jsx("div",{style:ne.infoLabel,children:"Justification"}),n.jsx("div",{style:{...ne.infoValue,fontStyle:Ce.justification?"normal":"italic"},children:Ce.justification||"No justification provided"})]})]},re)),w.length>qe&&n.jsx("div",{style:{textAlign:"center",marginTop:"12px"},children:n.jsx("button",{onClick:()=>ue(Ce=>!Ce),style:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:p?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:$?"Collapse changes":`View ${w.length-qe} more changes`})}),(E.approvedBy||E.rejectedBy)&&n.jsxs("div",{style:{marginTop:"24px",padding:"16px",backgroundColor:E.approvedBy?p?"rgba(16,185,129,0.1)":"rgba(16,185,129,0.05)":p?"rgba(239,68,68,0.1)":"rgba(239,68,68,0.05)",borderRadius:"12px",border:`1px solid ${E.approvedBy?p?"rgba(16,185,129,0.3)":"rgba(16,185,129,0.2)":p?"rgba(239,68,68,0.3)":"rgba(239,68,68,0.2)"}`},children:[E.approvedBy&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{...ne.infoLabel,marginBottom:"6px"},children:"Approved By"}),n.jsxs("div",{style:ne.infoValue,children:[E.approvedBy," on ",new Date(E.approvedAt).toLocaleString()]})]}),E.rejectedBy&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{...ne.infoLabel,marginBottom:"6px"},children:"Rejected By"}),n.jsxs("div",{style:{...ne.infoValue,marginBottom:"12px"},children:[E.rejectedBy," on ",new Date(E.rejectedAt).toLocaleString()]}),n.jsx("div",{style:{...ne.infoLabel,marginBottom:"6px"},children:"Rejection Reason"}),n.jsx("div",{style:{...ne.infoValue,padding:"12px",backgroundColor:p?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",borderRadius:"8px",fontSize:"14px",lineHeight:"1.6"},children:E.rejectionReason})]})]})]})]})})})(),n.jsxs("div",{style:ne.statsContainer,children:[n.jsxs("div",{style:ne.statCard(t==="stat1"),onMouseEnter:()=>r("stat1"),onMouseLeave:()=>r(null),children:[n.jsx("div",{style:ne.statNumber,children:te.pendingApproval}),n.jsx("div",{style:ne.statLabel,children:"Pending Approval"})]}),n.jsxs("div",{style:ne.statCard(t==="stat2"),onMouseEnter:()=>r("stat2"),onMouseLeave:()=>r(null),children:[n.jsx("div",{style:ne.statNumber,children:te.approved}),n.jsx("div",{style:ne.statLabel,children:"Approved"})]}),n.jsxs("div",{style:ne.statCard(t==="stat3"),onMouseEnter:()=>r("stat3"),onMouseLeave:()=>r(null),children:[n.jsx("div",{style:ne.statNumber,children:te.rejected}),n.jsx("div",{style:ne.statLabel,children:"Rejected"})]})]})]})},iQ=()=>{var bn,at,k;const[i,e]=f.useState(null),[t,r]=f.useState(null),[a,A]=f.useState(!1),[c,u]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[p,m]=f.useState("Master Plan"),[h,y]=f.useState(!1),[b,L]=f.useState(!1),[S,U]=f.useState([]),[E,P]=f.useState([]),[O,ve]=f.useState(""),[ce,Q]=f.useState({}),[V,Z]=f.useState(!1),[le,$]=f.useState(null),[ue,we]=f.useState({project:"",projectType:"",startDate:"",endDate:""}),[ge,te]=f.useState([]),[Me,ie]=f.useState("UAT"),[me,N]=f.useState("Date Range"),[be,H]=f.useState({reasoning:"",suggestedFields:[]}),[M,I]=f.useState(""),[_,Fe]=f.useState(null),[Y,D]=f.useState(!0),[K,Te]=f.useState([]),[Ne,G]=f.useState([]),[W,j]=f.useState(!1),[F,Xe]=f.useState(!1),[B,ee]=f.useState(null),[Pe,$e]=f.useState({totalPlans:0,inProgress:0,completed:0}),[kt,pt]=f.useState(!1);f.useRef(null),f.useRef(null);const Ut=v=>{if(!v)return"";const Ae=v.split("/");return Ae.length===3?`${Ae[2]}-${Ae[1]}-${Ae[0]}`:v},Lt=v=>{if(!v)return"";const Ae=v.split("-");return Ae.length===3?`${Ae[2]}/${Ae[1]}/${Ae[0]}`:v};f.useEffect(()=>{se()},[]),f.useEffect(()=>{_&&(async()=>{if(_){pt(!0);try{const Ae=await ke("/plan/master",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Ae.ok){const Ue=await Ae.json(),et=Ue.length,Ke=Ue.filter(It=>{const tt=typeof It.fields=="string"?JSON.parse(It.fields):It.fields;if(!tt)return!1;const st=Object.values(tt).filter(ye=>typeof ye=="object"&&(ye==null?void 0:ye.status));return st.length>0&&st.some(ye=>ye.status!=="Completed")}).length,yt=Ue.filter(It=>{const tt=typeof It.fields=="string"?JSON.parse(It.fields):It.fields;if(!tt)return!1;const st=Object.values(tt).filter(ye=>typeof ye=="object"&&(ye==null?void 0:ye.status));return st.length>0&&st.every(ye=>ye.status==="Completed")}).length;$e({totalPlans:et,inProgress:Ke,completed:yt})}}catch(Ae){console.error("Failed to fetch user stats:",Ae)}finally{pt(!1)}}})()},[_]);const se=async()=>{try{D(!0),console.log(" Fetching user data from /user/profile...");const v=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" API Response status:",v.status),v.ok){const Ae=await v.json();console.log(" User data received:",Ae),Fe(Ae)}else{const Ae=await v.text();console.error(" Failed to fetch user data:",v.status,Ae)}}catch(v){console.error(" Error fetching user data:",v)}finally{D(!1)}};f.useEffect(()=>{_&&(async()=>{if(_){j(!0);try{console.log(" Fetching user list for permissions...");const Ae=await ke("/user/list",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Ae.ok){const Ke=((await Ae.json()).users||[]).filter(yt=>yt.id!==_.id);console.log(` Loaded ${Ke.length} available users`),G(Ke)}else console.error(" Failed to fetch user list")}catch(Ae){console.error(" Error fetching user list:",Ae)}finally{j(!1)}}})()},[_]),f.useEffect(()=>{_&&(async()=>{if(_)try{const Ae=await ke("/user/list",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Ae.ok){const Ke=((await Ae.json()).users||[]).filter(yt=>yt.id!==_.id);P(Ke)}}catch(Ae){console.error("Failed to fetch users:",Ae)}})()},[_]);const Tt=(v,Ae=!1,Ue="",et="")=>{if(Ae){const Ke={id:`custom-${Date.now()}`,firstName:Ue.split(" ")[0]||Ue,lastName:Ue.split(" ").slice(1).join(" ")||"",email:et,department:"External",isCustom:!0};U([...S,Ke])}else{const Ke=E.find(yt=>yt.id===v);Ke&&!S.find(yt=>yt.id===v)&&(U([...S,Ke]),K.find(yt=>yt.id===v)||Te([...K,{id:Ke.id,name:`${Ke.firstName} ${Ke.lastName}`,email:Ke.email,department:Ke.department,permission:"viewer"}]))}ve("")},ne=v=>{U(S.filter(Ue=>Ue.id!==v)),Te(K.filter(Ue=>Ue.id!==v));const Ae={...ce};Object.keys(Ae).forEach(Ue=>{Ae[Ue]=Ae[Ue].filter(et=>et!==v)}),Q(Ae)},fe=v=>{$(v),Z(!0)},Qe=(v,Ae)=>{const Ue=ce[v]||[];Ue.includes(Ae)||Q({...ce,[v]:[...Ue,Ae]})},w=(v,Ae)=>{const Ue=ce[v]||[];Q({...ce,[v]:Ue.filter(et=>et!==Ae)})},qe=(v,Ae)=>{Te(K.map(Ue=>Ue.id===v?{...Ue,permission:Ae}:Ue)),console.log(` Updated user ${v} permission to ${Ae}`)},ft=v=>[...v].sort((Ae,Ue)=>{const et=It=>{if(!It)return null;const[tt,st,ye]=It.split("/");return new Date(ye,st-1,tt)},Ke=et(Ae.startDate),yt=et(Ue.startDate);return!Ke&&!yt?0:Ke?yt?Ke-yt:-1:1});f.useEffect(()=>{if(ge.length>0&&ge.some(Ae=>Ae.startDate)){const Ae=ft(ge);Ae.some((et,Ke)=>et.id!==ge[Ke].id)&&te(Ae)}},[ge.map(v=>v.startDate).join(",")]);const Et=()=>{u(!c),A(!1)},pe=()=>{console.log(" Going back to plan overview");const v=(_==null?void 0:_.role)==="admin"?"/adminviewplan":"/viewplan";window.location.href=v},R=()=>{if(Me.trim()){if(ge.some(Ue=>Ue.name.toLowerCase()===Me.trim().toLowerCase())){alert(` Milestone "${Me.trim()}" already exists!`);return}const Ae={id:Date.now(),name:Me.trim(),type:"Date Range",value:(ge.length===0,"On Track"),startDate:"",endDate:"",required:!1};te([...ge,Ae]),ie("")}},Ce=v=>{te(ge.filter(Ae=>Ae.id!==v))},re=(v,Ae,Ue)=>{te(ge.map(et=>et.id===v?{...et,[Ae]:Ue}:et))},xe=async()=>{try{L(!0),y(!1),H({reasoning:"",suggestedFields:[]});const v={project:ue.project,projectType:ue.projectType,startDate:J(ue.startDate),endDate:J(ue.endDate),fields:ge.reduce((et,Ke)=>(et[Ke.name]={status:Ke.value,startDate:J(Ke.startDate),endDate:J(Ke.endDate)},et),{}),userId:_.id,permissions:K.map(et=>({userId:et.id,permissionLevel:et.permission})),projectTeam:S.map(et=>({userId:et.id,firstName:et.firstName,lastName:et.lastName,email:et.email,isCustom:et.isCustom||!1})),milestoneAssignments:ce};console.log(" Sending Master Plan AI request:",v);const Ae=await ke("/masterplan-ai/generate",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}),Ue=await Ae.json();if(console.log(" AI Response:",Ue),Ae.ok&&Ue.success&&Ue.masterPlan){const et=Ue.masterPlan,Ke=Ue.historicalContext;let yt=`**AI-Generated Master Plan** (Source: ${Ue.source==="ai"?"AI Analysis":"Standard Template"})

`;Ke.totalRecords>0?yt+=`Based on analysis of **${Ke.totalRecords} historical project records** from ${Ke.projectsAnalyzed} projects in the **${Ue.department}** department.

`:yt+=`No historical data available. Generated using intelligent fallback.

`,Ke.hasUserQuery&&(yt+=` Customized based on your project scope and requirements.
`),Ke.webSearchUsed&&(yt+=` Enhanced with general project knowledge from web search.
`);const It=Object.entries(et).map(([tt,st])=>({name:tt,type:"Date Range",startDate:Lt(st.startDate),endDate:Lt(st.endDate),status:st.status||"Planned"}));H({reasoning:yt,suggestedFields:It}),y(!0)}else alert(" AI could not generate a plan. "+(Ue.error||"Please try again."))}catch(v){console.error(" AI Recommendation error:",v),alert(" Failed to fetch AI recommendations. Please check backend connection.")}finally{L(!1)}},Ze=v=>{if(ge.some(yt=>yt.name.toLowerCase()===v.name.toLowerCase())){alert(` Milestone "${v.name}" already exists!`);return}let Ue=v.status||"On Track";["On Track","At Risk","Completed","Delayed"].includes(Ue)||(console.warn(` Invalid status "${Ue}" from AI, converting to "On Track"`),Ue="On Track"),Ue="On Track";const Ke={id:Date.now(),name:v.name,type:"Date Range",value:Ue,required:!1,startDate:v.startDate||"",endDate:v.endDate||""};te([...ge,Ke])},J=v=>{if(!v)return"";const[Ae,Ue,et]=v.split("/");return`${et}-${Ue}-${Ae}`},qt=async()=>{try{if(Xe(!0),ee(null),!ue.project||!ue.startDate||!ue.endDate){alert("Please fill in all required fields: Project, Start Date, and End Date"),Xe(!1);return}const v=ge.filter(ye=>!ye.startDate||!ye.endDate);if(v.length>0){alert(`Please fill in start and end dates for all milestones: ${v.map(ye=>ye.name).join(", ")}`),Xe(!1);return}const[Ae,Ue,et]=ue.startDate.split("/"),Ke=new Date(et,Ue-1,Ae);for(const ye of ge)if(ye.startDate){const[ae,ze,Ye]=ye.startDate.split("/");if(new Date(Ye,ze-1,ae)<Ke){alert(` Milestone "${ye.name}" starts before the project's start date.`),Xe(!1);return}}const yt={};ge.forEach(ye=>{yt[ye.name]={status:ye.value,startDate:J(ye.startDate),endDate:J(ye.endDate)}});const It={project:ue.project,projectType:ue.projectType,startDate:J(ue.startDate),endDate:J(ue.endDate),fields:yt,userId:_.id,permissions:K.map(ye=>({userId:ye.id,permissionLevel:ye.permission}))};console.log(" Submitting master plan with permissions:",It);const tt=await ke("/plan/master",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(It)}),st=await tt.json();tt.ok?(console.log(" Master plan created successfully:",st),alert(` Master plan created successfully with ${K.length} team members!`),te([]),Te([]),y(!1),I(""),setTimeout(()=>{const ye=(_==null?void 0:_.role)==="admin"?"/adminviewplan":"/viewplan";window.location.href=ye},1500)):(console.error(" Failed to create master plan:",st),ee(st.message||"Failed to create master plan"),alert(` ${st.message||"Failed to create master plan"}`))}catch(v){console.error(" Error submitting master plan:",v),ee("Network error. Please check your connection and try again."),alert(" Network error. Please check your connection and try again.")}finally{Xe(!1)}},He={page:{minHeight:"100vh",padding:"30px",background:c?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},backButton:v=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:v?"rgba(59,130,246,0.1)":c?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:v?"#3b82f6":c?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:v?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:v?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),header:{fontSize:"28px",fontWeight:"700",color:c?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},topButton:v=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:v?"rgba(59,130,246,0.1)":c?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:v?"#3b82f6":c?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:v?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:v?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:c?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:c?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:c?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:c?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:c?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:c?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:c?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(v,Ae)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",outline:"none",backgroundColor:v?"#3b82f6":Ae?c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:v?"#fff":c?"#e2e8f0":"#64748b",transform:Ae&&!v?"translateY(-1px)":"translateY(0)",boxShadow:v?"0 4px 12px rgba(59,130,246,0.3)":Ae&&!v?"0 2px 8px rgba(0,0,0,0.1)":"none"}),mainContent:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"32px",alignItems:"start"},formSection:{backgroundColor:c?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:c?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},sectionTitle:{fontSize:"24px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b",marginBottom:"24px",transition:"all 0.3s ease"},configTitle:{fontSize:"18px",fontWeight:"600",color:c?"#e2e8f0":"#1e293b",marginBottom:"20px",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},fieldGroup:{marginBottom:"20px"},fieldLabel:{fontSize:"14px",fontWeight:"600",color:c?"#d1d5db":"#374151",marginBottom:"8px",display:"block",transition:"all 0.3s ease"},input:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:c?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:c?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',cursor:"pointer"},dateInputWrapper:{position:"relative",cursor:"pointer",width:"100%"},textarea:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:c?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:c?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',resize:"vertical",minHeight:"100px"},select:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:c?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:c?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',cursor:"pointer"},addFieldSection:{marginTop:"32px",paddingTop:"24px",borderTop:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"},addFieldRow:{display:"grid",gridTemplateColumns:"1fr 150px auto",gap:"12px",alignItems:"end",marginBottom:"16px"},addButton:v=>({padding:"12px 20px",borderRadius:"12px",border:"none",backgroundColor:v?"#2563eb":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"}),customField:{backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px",transition:"all 0.3s ease"},customFieldHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},customFieldName:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#374151"},customFieldType:{fontSize:"12px",color:c?"#94a3b8":"#64748b",backgroundColor:c?"rgba(75,85,99,0.3)":"rgba(226,232,240,0.3)",padding:"4px 8px",borderRadius:"6px"},removeButton:v=>({padding:"4px",borderRadius:"6px",border:"none",backgroundColor:v?"rgba(239,68,68,0.1)":"transparent",color:v?"#ef4444":c?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),rightSidebar:{display:"flex",flexDirection:"column",gap:"20px"},aiSection:{backgroundColor:c?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:c?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},accessControlSection:{backgroundColor:c?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:c?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},aiHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},aiTitle:{fontSize:"18px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b"},aiInfoBox:{backgroundColor:c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"8px",padding:"12px",marginBottom:"16px",border:c?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(59,130,246,0.1)"},aiInfoText:{fontSize:"12px",lineHeight:"1.5",color:c?"#93c5fd":"#3b82f6",display:"flex",gap:"8px",alignItems:"flex-start"},recommendButton:v=>({width:"100%",padding:"14px 20px",borderRadius:"12px",border:"none",backgroundColor:v?"#8b5cf6":"#a855f7",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"20px"}),loadingSpinner:{animation:"spin 1s linear infinite"},aiRecommendations:{backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"16px"},aiReasoning:{fontSize:"14px",lineHeight:"1.6",color:c?"#d1d5db":"#4b5563",whiteSpace:"pre-line",marginBottom:"16px"},suggestedField:{backgroundColor:c?"rgba(75,85,99,0.3)":"rgba(255,255,255,0.8)",borderRadius:"8px",padding:"12px",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},suggestedFieldInfo:{flex:1},suggestedFieldName:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#374151",marginBottom:"2px"},suggestedFieldType:{fontSize:"12px",color:c?"#94a3b8":"#64748b"},addSuggestedButton:v=>({padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:v?"#059669":"#10b981",color:"#fff",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"}),submitButton:v=>({width:"100%",padding:"16px 24px",borderRadius:"12px",border:"none",backgroundColor:v?"#1e293b":"#334155",color:"#fff",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",marginTop:"32px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}),ownerBadge:{backgroundColor:c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"12px",padding:"12px 16px",marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",border:c?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(59,130,246,0.1)"},permissionBadge:v=>({padding:"4px 12px",borderRadius:"6px",backgroundColor:v==="owner"?"#3b82f6":v==="editor"?"#10b981":"#64748b",color:"#fff",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"}),selectedUserCard:{backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"12px 16px",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",border:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"},infoBox:{padding:"12px 16px",backgroundColor:c?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",borderRadius:"8px",fontSize:"12px",color:c?"#93c5fd":"#3b82f6",lineHeight:"1.6",border:c?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(59,130,246,0.1)",marginTop:"12px"},statusModal:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(4px)"},statusModalContent:{backgroundColor:c?"#374151":"#fff",borderRadius:"20px",padding:"32px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",border:c?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(226,232,240,0.8)"},statusModalTitle:{fontSize:"24px",fontWeight:"700",color:c?"#e2e8f0":"#1e293b",marginBottom:"8px"},statusModalSubtitle:{fontSize:"14px",color:c?"#94a3b8":"#64748b",marginBottom:"24px"},modalButton:(v,Ae)=>({padding:"12px 24px",borderRadius:"12px",border:"none",backgroundColor:Ae==="cancel"?v?"rgba(239,68,68,0.15)":"rgba(239,68,68,0.1)":v?"#2563eb":"#3b82f6",color:Ae==="cancel"?"#ef4444":"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"})};return f.useEffect(()=>{const v=document.createElement("style");return v.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      input[type="date"]::-webkit-calendar-picker-indicator {
        cursor: pointer;
        filter: ${c?"invert(1)":"invert(0)"};
      }
    `,document.head.appendChild(v),()=>document.head.removeChild(v)},[c]),f.useEffect(()=>{const v=document.createElement("style");return v.textContent=`
    body, html, #root, .app, .main-content, .page-container, .content-wrapper {
      background: ${c?"linear-gradient(135deg, #1e293b 0%, #334155 100%) !important":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%) !important"};
      margin: 0 !important;
      padding: 0 !important;
    }
    
    body > div, #root > div, .app > div {
      background: transparent !important;
    }
  `,document.head.appendChild(v),()=>{document.head.removeChild(v)}},[c]),n.jsxs("div",{style:He.page,children:[n.jsxs("div",{style:He.headerRow,children:[n.jsxs("div",{style:He.headerLeft,children:[n.jsx("button",{style:He.backButton(i==="back"),onMouseEnter:()=>e("back"),onMouseLeave:()=>e(null),onClick:pe,children:n.jsx(Pi,{size:20})}),n.jsx("h1",{style:He.header,children:"Plan"})]}),n.jsxs("div",{style:He.headerRight,children:[n.jsxs("button",{style:He.topButton(t==="alerts"),onMouseEnter:()=>r("alerts"),onMouseLeave:()=>r(null),onClick:()=>{console.log(" Alerts clicked - Navigating to alerts page"),window.location.href="/adminalerts"},children:[n.jsx(lr,{size:20}),n.jsx("div",{style:He.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:He.topButton(t==="profile"),onMouseEnter:()=>{r("profile"),A(!0)},onMouseLeave:()=>{r(null)},onClick:()=>{console.log(" Profile clicked - Navigating to profile page"),window.location.href="/adminprofile"},children:n.jsx(Yt,{size:20})}),a&&_&&n.jsxs("div",{style:He.profileTooltip,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[n.jsx("div",{style:He.tooltipArrow}),n.jsxs("div",{style:He.userInfo,children:[n.jsxs("div",{style:He.avatar,children:[(((bn=_.firstName)==null?void 0:bn[0])||"").toUpperCase(),(((at=_.lastName)==null?void 0:at[0])||"").toUpperCase()]}),n.jsxs("div",{style:He.userDetails,children:[n.jsxs("div",{style:He.userName,children:[_.firstName||"Unknown"," ",_.lastName||"User"]}),n.jsxs("div",{style:He.userRole,children:[_.role==="admin"?"Admin":"Member","  ",_.department||"N/A"]})]})]}),n.jsxs("div",{style:He.userStats,children:[n.jsxs("div",{style:He.tooltipStatItem,children:[n.jsx("div",{style:He.tooltipStatNumber,children:kt?"...":Pe.totalPlans}),n.jsx("div",{style:He.tooltipStatLabel,children:"Plans"})]}),n.jsxs("div",{style:He.tooltipStatItem,children:[n.jsx("div",{style:He.tooltipStatNumber,children:kt?"...":Pe.inProgress}),n.jsx("div",{style:He.tooltipStatLabel,children:"In Progress"})]}),n.jsxs("div",{style:He.tooltipStatItem,children:[n.jsx("div",{style:He.tooltipStatNumber,children:kt?"...":Pe.completed}),n.jsx("div",{style:He.tooltipStatLabel,children:"Completed"})]})]}),n.jsx("button",{style:He.themeToggle,onClick:Et,children:c?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:He.tabContainer,children:n.jsx("div",{style:He.tab(!0,!1),children:"Master Plan"})}),n.jsxs("div",{style:He.mainContent,children:[n.jsxs("div",{style:He.formSection,children:[n.jsx("h2",{style:He.sectionTitle,children:"Master Plan"}),n.jsx("h3",{style:He.configTitle,children:"Configure Planning Fields"}),n.jsxs("div",{style:He.fieldGroup,children:[n.jsx("label",{style:He.fieldLabel,children:"Project"}),n.jsx("input",{type:"text",style:He.input,value:ue.project,onChange:v=>we({...ue,project:v.target.value}),placeholder:"Enter project name"})]}),n.jsxs("div",{style:He.fieldGroup,children:[n.jsx("label",{style:He.fieldLabel,children:"Project Type"}),n.jsx("input",{type:"text",style:He.input,value:ue.projectType,onChange:v=>we({...ue,projectType:v.target.value}),placeholder:"e.g., Software Development, Infrastructure, Data Analytics, Migration"})]}),n.jsx(en,{label:"Start Date",value:Ut(ue.startDate),onChange:v=>we({...ue,startDate:Lt(v)}),isDarkMode:c,placeholder:"Select project start date",compact:!0}),n.jsx(en,{label:"End Date",value:Ut(ue.endDate),onChange:v=>we({...ue,endDate:Lt(v)}),isDarkMode:c,placeholder:"Select project end date",compact:!0}),ge.map((v,Ae)=>n.jsxs("div",{style:He.customField,children:[n.jsxs("div",{style:He.customFieldHeader,children:[n.jsxs("div",{style:{flex:1},children:[n.jsxs("div",{style:He.customFieldName,children:[v.name,n.jsx("span",{style:{marginLeft:"12px",fontSize:"11px",fontWeight:"600",padding:"4px 8px",borderRadius:"6px",backgroundColor:v.value==="Completed"?"#3b82f620":v.value==="On Track"?"#10b98120":v.value==="At Risk"?"#f59e0b20":v.value==="Delayed"?"#ef444420":"#94a3b820",color:v.value==="Completed"?"#3b82f6":v.value==="On Track"?"#10b981":v.value==="At Risk"?"#f59e0b":v.value==="Delayed"?"#ef4444":"#94a3b8"},children:v.value})]}),n.jsx("div",{style:He.customFieldType,children:v.type})]}),n.jsx("button",{style:He.removeButton(i===`remove-${v.id}`),onMouseEnter:()=>e(`remove-${v.id}`),onMouseLeave:()=>e(null),onClick:()=>Ce(v.id),children:n.jsx(Pr,{size:16})})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:"40px",rowGap:"12px",marginTop:"12px"},children:[n.jsx(en,{label:"Start Date",value:Ut(v.startDate||""),onChange:Ue=>re(v.id,"startDate",Lt(Ue)),isDarkMode:c,placeholder:"Milestone start",compact:!0}),n.jsx(en,{label:"End Date",value:Ut(v.endDate||""),onChange:Ue=>re(v.id,"endDate",Lt(Ue)),isDarkMode:c,placeholder:"Milestone end",compact:!0})]}),n.jsxs("button",{style:{marginTop:"12px",padding:"10px 16px",borderRadius:"8px",border:"none",backgroundColor:i===`milestone-users-${v.id}`?"rgba(139,92,246,0.15)":"rgba(139,92,246,0.1)",color:i===`milestone-users-${v.id}`?"#7c3aed":"#8b5cf6",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",fontWeight:"600",width:"100%",justifyContent:"center"},onMouseEnter:()=>e(`milestone-users-${v.id}`),onMouseLeave:()=>e(null),onClick:()=>fe(v.id),children:[n.jsx(Er,{size:14}),"Manage Users (",(ce[v.id]||[]).length," assigned)"]})]},v.id)),n.jsxs("div",{style:He.addFieldSection,children:[n.jsx("h4",{style:{...He.fieldLabel,marginBottom:"16px",fontSize:"16px"},children:"Add Milestone/Phase"}),n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[n.jsx("div",{style:{flex:1},children:n.jsx("input",{type:"text",style:He.input,value:Me,onChange:v=>ie(v.target.value),placeholder:"Milestone name (e.g., UAT, Testing, Deployment)"})}),n.jsxs("button",{style:He.addButton(i==="add-field"),onMouseEnter:()=>e("add-field"),onMouseLeave:()=>e(null),onClick:R,children:[n.jsx(yn,{size:16}),"Add Milestone"]})]})]}),n.jsx("button",{style:He.submitButton(i==="submit"),onMouseEnter:()=>e("submit"),onMouseLeave:()=>e(null),onClick:qt,disabled:F,children:F?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:He.loadingSpinner,children:""}),"Submitting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(po,{size:20}),"Submit Master Plan"]})}),B&&n.jsx("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"8px",color:"#ef4444",fontSize:"14px"},children:B})]}),n.jsxs("div",{style:He.rightSidebar,children:[n.jsxs("div",{style:He.aiSection,children:[n.jsxs("div",{style:He.aiHeader,children:[n.jsx(co,{size:20,style:{color:"#a855f7"}}),n.jsx("h3",{style:He.aiTitle,children:"AI Master Plan Generator"})]}),n.jsx("div",{style:He.aiInfoBox,children:n.jsxs("div",{style:He.aiInfoText,children:[n.jsx(lo,{size:16,style:{flexShrink:0,marginTop:"2px"}}),n.jsx("span",{children:"AI analyzes your department's historical project data to generate realistic timelines and milestones."})]})}),n.jsxs("div",{style:He.fieldGroup,children:[n.jsx("label",{style:He.fieldLabel,children:"Project Scope (Optional, but recommended)"}),n.jsx("textarea",{style:He.textarea,value:M,onChange:v=>I(v.target.value),placeholder:"Describe your project scope, requirements, or specific milestones you need..."})]}),n.jsx("button",{style:He.recommendButton(i==="recommend"),onMouseEnter:()=>e("recommend"),onMouseLeave:()=>e(null),onClick:xe,disabled:b,children:b?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:He.loadingSpinner,children:""}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(co,{size:16}),"Generate Master Plan"]})}),h&&n.jsxs("div",{style:He.aiRecommendations,children:[n.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#374151",marginBottom:"12px"},children:"AI Analysis"}),n.jsx("div",{style:He.aiReasoning,children:be.reasoning}),n.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:c?"#e2e8f0":"#374151",marginBottom:"12px"},children:"Suggested Project Phases"}),be.suggestedFields.map((v,Ae)=>n.jsxs("div",{style:He.suggestedField,children:[n.jsxs("div",{style:He.suggestedFieldInfo,children:[n.jsx("div",{style:He.suggestedFieldName,children:v.name}),n.jsx("div",{style:He.suggestedFieldType,children:v.startDate&&v.endDate&&n.jsxs("span",{style:{color:"#10b981"},children:[v.startDate,"  ",v.endDate]})})]}),n.jsxs("button",{style:He.addSuggestedButton(i===`add-suggested-${Ae}`),onMouseEnter:()=>e(`add-suggested-${Ae}`),onMouseLeave:()=>e(null),onClick:()=>Ze(v),children:[n.jsx(yn,{size:12}),"Add"]})]},Ae))]}),!h&&!b&&n.jsx("div",{style:{textAlign:"center",padding:"20px",color:c?"#94a3b8":"#64748b",fontSize:"14px",lineHeight:"1.6"},children:`Fill in project details above, then click "Generate Master Plan" to get AI-powered timeline suggestions based on your department's historical data.`})]}),n.jsxs("div",{style:He.accessControlSection,children:[n.jsxs("div",{style:He.aiHeader,children:[n.jsx(Er,{size:20,style:{color:"#8b5cf6"}}),n.jsx("h3",{style:He.aiTitle,children:"Team & Access"})]}),n.jsxs("div",{style:{padding:"12px",backgroundColor:c?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)",borderRadius:"8px",fontSize:"12px",color:c?"#c4b5fd":"#8b5cf6",marginBottom:"16px",lineHeight:"1.5"},children:["Add people involved in this project. They will automatically be given ",n.jsx("strong",{children:"Viewer"})," access."]}),_&&n.jsxs("div",{style:He.ownerBadge,children:[n.jsxs("div",{children:[n.jsxs("strong",{children:[_.firstName," ",_.lastName]}),n.jsx("div",{style:{fontSize:"12px",opacity:.8,color:c?"#cbd5e1":"#64748b"},children:_.email})]}),n.jsx("span",{style:He.permissionBadge("owner"),children:"Owner"})]}),S.map(v=>n.jsxs("div",{style:He.selectedUserCard,children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontWeight:"600"},children:[v.firstName," ",v.lastName]}),n.jsx("div",{style:{fontSize:"12px",opacity:.7},children:v.email})]}),n.jsx("button",{onClick:()=>ne(v.id),style:{background:"transparent",border:"none",cursor:"pointer",color:"#ef4444"},children:n.jsx(dn,{size:16})})]},v.id)),n.jsxs("div",{style:{marginTop:"12px"},children:[n.jsx("label",{style:He.fieldLabel,children:"Add Team Member"}),n.jsxs("select",{style:He.select,value:O,onChange:v=>Tt(parseInt(v.target.value)),children:[n.jsx("option",{value:"",children:"Select a user..."}),E.map(v=>n.jsxs("option",{value:v.id,children:[v.firstName," ",v.lastName," (",v.email,")"]},v.id))]})]}),n.jsx("hr",{style:{border:"none",borderTop:c?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",margin:"20px 0"}}),K.map(v=>n.jsxs("div",{style:He.selectedUserCard,children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:"600"},children:v.name}),n.jsx("div",{style:{fontSize:"12px",opacity:.7},children:v.email})]}),n.jsxs("select",{value:v.permission,onChange:Ae=>qe(v.id,Ae.target.value),style:{...He.select,width:"120px"},children:[n.jsx("option",{value:"viewer",children:"Viewer"}),n.jsx("option",{value:"editor",children:"Editor"})]})]},v.id)),n.jsxs("div",{style:He.infoBox,children:[n.jsx("strong",{children:"Permissions:"}),n.jsx("br",{})," Owner: Full control",n.jsx("br",{})," Editor: View & edit",n.jsx("br",{})," Viewer: View only"]})]})]})]}),V&&le&&n.jsx("div",{style:He.statusModal,children:n.jsxs("div",{style:He.statusModalContent,children:[n.jsx("h3",{style:He.statusModalTitle,children:"Manage Milestone Users"}),n.jsxs("p",{style:He.statusModalSubtitle,children:[n.jsx("strong",{children:"Milestone:"})," ",(k=ge.find(v=>v.id===le))==null?void 0:k.name]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsxs("label",{style:He.fieldLabel,children:["Assigned Users (",(ce[le]||[]).length,")"]}),(ce[le]||[]).length===0?n.jsx("div",{style:{padding:"16px",backgroundColor:c?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"8px",textAlign:"center",color:c?"#94a3b8":"#64748b"},children:"No users assigned"}):(ce[le]||[]).map(v=>{const Ae=[...S,_].find(Ue=>Ue.id===v);return Ae?n.jsxs("div",{style:{...He.selectedUserCard,marginTop:"8px"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontWeight:"600",color:c?"#e2e8f0":"#1e293b",fontSize:"13px"},children:[Ae.firstName," ",Ae.lastName]}),n.jsx("div",{style:{fontSize:"11px",color:c?"#94a3b8":"#64748b"},children:Ae.email})]}),n.jsx("button",{style:{padding:"6px",borderRadius:"6px",border:"none",backgroundColor:"rgba(239,68,68,0.1)",color:"#ef4444",cursor:"pointer"},onClick:()=>w(le,v),children:n.jsx(dn,{size:16})})]},v):null})]}),n.jsxs("div",{children:[n.jsx("label",{style:He.fieldLabel,children:"Add User to Milestone"}),n.jsxs("select",{style:He.select,onChange:v=>{if(v.target.value){if(v.target.value==="custom"){const Ae=prompt("Enter external person's name:"),Ue=prompt("Enter their email:");if(Ae&&Ue){const et={id:`custom-${Date.now()}`,firstName:Ae.split(" ")[0]||Ae,lastName:Ae.split(" ").slice(1).join(" ")||"",email:Ue,department:"External",isCustom:!0};U(Ke=>[...Ke,et]),Qe(le,et.id)}}else Qe(le,parseInt(v.target.value));v.target.value=""}},children:[n.jsx("option",{value:"",children:"Select a user..."}),n.jsx("option",{value:"custom",children:" Add External/Outsource Person"}),n.jsx("optgroup",{label:"Project Team",children:[_,...S].filter(v=>!(ce[le]||[]).includes(v.id)).map(v=>n.jsxs("option",{value:v.id,children:[v.firstName," ",v.lastName," (",v.email,")"]},v.id))})]})]}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:n.jsx("button",{style:He.modalButton(i==="close-milestone-users","cancel"),onMouseEnter:()=>e("close-milestone-users"),onMouseLeave:()=>e(null),onClick:()=>{Z(!1),$(null)},children:"Close"})})]})})]})},sQ=()=>{var Tt,ne;const[i,e]=f.useState([]),[t,r]=f.useState(null),[a,A]=f.useState(null),[c,u]=f.useState(null),[p,m]=f.useState(!1),[h,y]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[b,L]=f.useState(!1),[S,U]=f.useState(!1),[E,P]=f.useState([]),O=["L1 Operations","L2 Operations"],[ve,ce]=f.useState(""),[Q,V]=f.useState(""),Z=42.5,le={STRUCTURE:"structure",WEEKLY:"weekly"},[$,ue]=f.useState(le.STRUCTURE),we=$===le.WEEKLY,ge=$===le.STRUCTURE;f.useEffect(()=>{we&&(Me(fe=>({...fe,projectType:"",project:"",customProjectName:"",leaveType:"",leaveReason:"",startDate:"",endDate:""})),N([]),I([]),r(null))},[we]);const[te,Me]=f.useState({project:"",projectType:"master-plan",customProjectName:"",leaveType:"",leaveReason:"",startDate:"",endDate:"",status:"Ongoing"}),ie=we?null:te.projectType,[me,N]=f.useState([]),[be,H]=f.useState(""),[M,I]=f.useState([]),[_,Fe]=f.useState(""),[Y,D]=f.useState(null),[K,Te]=f.useState(!0),[Ne,G]=f.useState({reasoning:"",suggestedFields:[]}),[W,j]=f.useState(""),F=async()=>{try{Te(!0),console.log(" Fetching user data from /user/profile...");const fe=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" API Response status:",fe.status),fe.ok){const Qe=await fe.json();console.log(" User data received:",Qe),D(Qe)}else{const Qe=await fe.text();console.error(" Failed to fetch user data:",fe.status,Qe)}}catch(fe){console.error(" Error fetching user data:",fe)}finally{Te(!1)}},Xe=()=>{y(!h),m(!1)},B=()=>{console.log(" Going back to individual plan overview"),window.location.href="/adminindividualplan"},ee=()=>{const fe=new Date,Qe=fe.getDay(),w=Qe===0?-6:1-Qe,qe=new Date(fe);qe.setDate(fe.getDate()+w);const ft=new Date(qe);ft.setDate(qe.getDate()+4),ce(qe.toISOString().split("T")[0]),V(ft.toISOString().split("T")[0])},Pe=async()=>{U(!0);try{const fe=await ke("/plan/individual-plan/ai-recommendations",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:te.project||(t==null?void 0:t.project),projectType:te.projectType,masterPlanId:(t==null?void 0:t.id)||null,startDate:te.startDate,endDate:te.endDate,userQuery:W||void 0})});if(!fe.ok)throw new Error("Failed to generate structure recommendations");const Qe=await fe.json();G({reasoning:Qe.reasoning,suggestedFields:Qe.suggestedMilestones||Qe.suggestedFields||[]}),L(!0)}finally{U(!1)}},$e=async()=>{if(!ve||!Q){alert("Please select a valid work week");return}U(!0);try{const fe=await ke("/api/weekly-allocations/ai-recommendations",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({weekStart:ve,weekEnd:Q,masterPlanIds:i.map(w=>w.id),userGoals:W||void 0})});if(!fe.ok)throw new Error("Failed to generate weekly recommendations");const Qe=await fe.json();G({reasoning:Qe.reasoning,suggestedFields:Qe.recommendations.map(w=>({projectName:w.projectName,projectType:w.projectType,individualPlanId:w.individualPlanId,allocatedHours:w.allocatedHours,tasks:w.tasks,rationale:w.rationale}))}),L(!0)}catch(fe){alert(fe.message)}finally{U(!1)}},kt=fe=>{we||N(Qe=>[...Qe,{id:Date.now(),name:fe.name||fe.milestoneName,startDate:fe.startDate||"",endDate:fe.endDate||"",status:"Ongoing"}])},pt=async()=>{if(ie==="planned-leave"){if(!te.leaveType||!te.startDate||!te.endDate){alert("Please fill in leave type, start date, and end date");return}}else if(!te.project||!te.startDate||!te.endDate){alert("Please fill in all required fields");return}const fe={};ie==="planned-leave"?(fe.title=`Leave: ${te.leaveType}`,fe.leaveType=te.leaveType,fe.leaveReason=te.leaveReason||"",M.forEach(w=>{fe[w.name]={startDate:w.startDate,endDate:w.endDate}})):(fe.title=te.project,fe.status=te.status,me.forEach(w=>{fe[w.name]={status:w.status,startDate:w.startDate,endDate:w.endDate}}));const Qe={project:ie==="planned-leave"?`Leave: ${te.leaveType}`:te.projectType==="custom"?te.customProjectName:te.project,projectType:te.projectType,startDate:te.startDate,endDate:te.endDate,fields:fe};console.log(" Submitting individual plan:",Qe);try{const w=await ke("/plan/individual",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Qe)}),qe=await w.json();if(!w.ok)throw new Error(qe.message||"Failed to create individual plan");alert(" Individual plan created successfully!"),window.location.href="/adminindividualplan"}catch(w){console.error(" Submit error:",w),alert("Failed to create plan: "+w.message)}},Ut=async()=>{var Qe;if(!ve||!Q){alert("Please select both start and end dates for your planning period");return}if(new Date(Q)<new Date(ve)){alert("End date must be after start date");return}const fe=Ne.suggestedFields.reduce((w,qe)=>w+(qe.allocatedHours||0),0);if(!(fe>Z&&!confirm(` Total hours (${fe}h) exceeds recommended capacity (${Z}h).

Do you want to continue anyway?`))){if(!((Qe=Ne==null?void 0:Ne.suggestedFields)!=null&&Qe.length)){alert("No weekly allocations to save");return}try{await Promise.all(Ne.suggestedFields.map(w=>ke("/api/weekly-allocations",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({individualPlanId:w.individualPlanId,projectName:w.projectName,projectType:w.projectType,weekStart:ve,weekEnd:Q,plannedHours:w.allocatedHours,tasks:w.tasks,notes:w.rationale,aiGenerated:!0})}))),alert(" Weekly plan saved successfully"),window.location.href="/adminindividualplan"}catch(w){console.error(" Weekly save failed:",w),alert("Failed to save weekly plan. Please try again.")}}};f.useEffect(()=>{const fe=document.createElement("style");return fe.textContent=`
      body, html, #root, .app, .main-content, .page-container, .content-wrapper {
        background: ${h?"linear-gradient(135deg, #1e293b 0%, #334155 100%) !important":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%) !important"};
        margin: 0 !important;
        padding: 0 !important;
      }
      
      body > div, #root > div, .app > div {
        background: transparent !important;
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
    `,document.head.appendChild(fe),()=>{document.head.removeChild(fe)}},[h]);const Lt=async()=>{try{const fe=await ke("/plan/individual",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!fe.ok)throw new Error("Failed to fetch individual plans");const Qe=await fe.json();P(Qe)}catch(fe){console.error(" Failed to load individual plans:",fe)}};f.useEffect(()=>{(async()=>{try{console.log(" Fetching master plans...");const Qe=await ke("/plan/master",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log(" Master plans response status:",Qe.status),!Qe.ok){const qe=await Qe.text();throw console.error(" Failed to fetch master plans:",qe),new Error("Failed to fetch master plans")}const w=await Qe.json();console.log(" Loaded master plans:",w),console.log(" Number of plans:",w.length),e(w)}catch(Qe){console.error(" Error fetching master plans:",Qe),alert("Failed to load master plans. Please try refreshing the page.")}})(),F(),Lt(),ee()},[]);const se={page:{minHeight:"100vh",padding:"30px",background:h?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflowY:"auto",fontFamily:'"Montserrat", sans-serif',position:"relative",transition:"all 0.3s ease"},modeToggle:{display:"flex",gap:"8px",marginBottom:"24px",backgroundColor:h?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",padding:"6px",borderRadius:"14px",width:"fit-content"},activeMode:{padding:"10px 18px",borderRadius:"10px",border:"none",backgroundColor:"#3b82f6",color:"#fff",fontSize:"13px",fontWeight:"600",cursor:"pointer"},inactiveMode:{padding:"10px 18px",borderRadius:"10px",border:"none",backgroundColor:"transparent",color:h?"#e2e8f0":"#64748b",fontSize:"13px",fontWeight:"600",cursor:"pointer"},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},backButton:fe=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:fe?"rgba(59,130,246,0.1)":h?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:fe?"#3b82f6":h?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:fe?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:fe?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),header:{fontSize:"28px",fontWeight:"700",color:h?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},topButton:fe=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:fe?"rgba(59,130,246,0.1)":h?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:fe?"#3b82f6":h?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:fe?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:fe?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:h?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:h?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:h?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:h?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:h?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:h?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:h?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:h?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:h?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:h?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:h?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(fe,Qe)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",outline:"none",backgroundColor:fe?"#3b82f6":Qe?h?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:fe?"#fff":h?"#e2e8f0":"#64748b",transform:Qe&&!fe?"translateY(-1px)":"translateY(0)",boxShadow:fe?"0 4px 12px rgba(59,130,246,0.3)":Qe&&!fe?"0 2px 8px rgba(0,0,0,0.1)":"none"}),mainContent:{display:"grid",gridTemplateColumns:we||ie==="planned-leave"?"1fr":"1fr 400px",gap:"32px",alignItems:"start"},formSection:{backgroundColor:h?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:h?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},sectionTitle:{fontSize:"24px",fontWeight:"700",color:h?"#e2e8f0":"#1e293b",marginBottom:"8px",transition:"all 0.3s ease"},sectionSubtitle:{fontSize:"14px",color:h?"#94a3b8":"#64748b",marginBottom:"24px",transition:"all 0.3s ease"},projectContext:{backgroundColor:h?"rgba(51,65,85,0.3)":"rgba(59,130,246,0.05)",borderRadius:"12px",padding:"16px",marginBottom:"24px",border:h?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(59,130,246,0.1)"},contextTitle:{fontSize:"14px",fontWeight:"600",color:h?"#e2e8f0":"#1e293b",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},contextInfo:{fontSize:"12px",color:h?"#94a3b8":"#64748b",lineHeight:"1.5"},configTitle:{fontSize:"18px",fontWeight:"600",color:h?"#e2e8f0":"#1e293b",marginBottom:"20px",transition:"all 0.3s ease"},fieldGroup:{marginBottom:"20px"},fieldLabel:{fontSize:"14px",fontWeight:"600",color:h?"#d1d5db":"#374151",marginBottom:"8px",display:"block",transition:"all 0.3s ease"},input:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:h?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:h?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:h?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif'},select:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:h?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:h?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:h?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none",backdropFilter:"blur(10px)",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif',cursor:"pointer"},addFieldSection:{marginTop:"32px",paddingTop:"24px",borderTop:h?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)"},addFieldRow:{display:"grid",gridTemplateColumns:"1fr 150px auto",gap:"12px",alignItems:"end",marginBottom:"16px"},addButton:fe=>({padding:"12px 20px",borderRadius:"12px",border:"none",backgroundColor:fe?"#2563eb":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"}),customField:{backgroundColor:h?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px",transition:"all 0.3s ease"},customFieldHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},customFieldName:{fontSize:"14px",fontWeight:"600",color:h?"#e2e8f0":"#374151"},customFieldType:{fontSize:"12px",color:h?"#94a3b8":"#64748b",backgroundColor:h?"rgba(75,85,99,0.3)":"rgba(226,232,240,0.3)",padding:"4px 8px",borderRadius:"6px"},removeButton:fe=>({padding:"4px",borderRadius:"6px",border:"none",backgroundColor:fe?"rgba(239,68,68,0.1)":"transparent",color:fe?"#ef4444":h?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),aiSection:{backgroundColor:h?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:h?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease",height:"fit-content",position:"sticky",top:"20px"},aiHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},aiTitle:{fontSize:"18px",fontWeight:"700",color:h?"#e2e8f0":"#1e293b"},recommendButton:fe=>({width:"100%",padding:"14px 20px",borderRadius:"12px",border:"none",backgroundColor:fe?"#8b5cf6":"#a855f7",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"20px"}),loadingSpinner:{animation:"spin 1s linear infinite"},aiRecommendations:{backgroundColor:h?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"16px"},aiReasoning:{fontSize:"14px",lineHeight:"1.6",color:h?"#d1d5db":"#4b5563",whiteSpace:"pre-line",marginBottom:"16px"},suggestedField:{backgroundColor:h?"rgba(75,85,99,0.3)":"rgba(255,255,255,0.8)",borderRadius:"8px",padding:"12px",marginBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},suggestedFieldInfo:{flex:1},suggestedFieldName:{fontSize:"14px",fontWeight:"600",color:h?"#e2e8f0":"#374151",marginBottom:"2px"},suggestedFieldType:{fontSize:"12px",color:h?"#94a3b8":"#64748b"},addSuggestedButton:fe=>({padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:fe?"#059669":"#10b981",color:"#fff",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"}),submitButton:fe=>({width:"100%",padding:"16px 24px",borderRadius:"12px",border:"none",backgroundColor:fe?"#1e293b":"#334155",color:"#fff",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",marginTop:"32px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"})};return n.jsxs("div",{style:se.page,children:[n.jsxs("div",{style:se.modeToggle,children:[n.jsx("button",{style:$===le.STRUCTURE?se.activeMode:se.inactiveMode,onClick:()=>ue(le.STRUCTURE),children:"Plan Structure (Timeline)"}),n.jsx("button",{style:$===le.WEEKLY?se.activeMode:se.inactiveMode,onClick:()=>ue(le.WEEKLY),children:"Plan Weekly Execution (42.5h)"})]}),n.jsxs("div",{style:se.headerRow,children:[n.jsxs("div",{style:se.headerLeft,children:[n.jsx("button",{style:se.backButton(a==="back"),onMouseEnter:()=>A("back"),onMouseLeave:()=>A(null),onClick:B,children:n.jsx(Pi,{size:20})}),n.jsx("h1",{style:se.header,children:"Plan"})]}),n.jsxs("div",{style:se.headerRight,children:[n.jsxs("button",{style:se.topButton(c==="alerts"),onMouseEnter:()=>u("alerts"),onMouseLeave:()=>u(null),onClick:()=>{console.log(" Alerts clicked - Navigating to alerts page"),window.location.href="/adminalerts"},children:[n.jsx(lr,{size:20}),n.jsx("div",{style:se.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:se.topButton(c==="profile"),onMouseEnter:()=>{u("profile"),m(!0)},onMouseLeave:()=>{u(null)},onClick:()=>{console.log(" Profile clicked - Navigating to profile page"),window.location.href="/adminprofile"},children:n.jsx(Yt,{size:20})}),p&&Y&&n.jsxs("div",{style:se.profileTooltip,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[n.jsx("div",{style:se.tooltipArrow}),n.jsxs("div",{style:se.userInfo,children:[n.jsxs("div",{style:se.avatar,children:[(((Tt=Y.firstName)==null?void 0:Tt[0])||"").toUpperCase(),(((ne=Y.lastName)==null?void 0:ne[0])||"").toUpperCase()]}),n.jsxs("div",{style:se.userDetails,children:[n.jsxs("div",{style:se.userName,children:[Y.firstName||"Unknown"," ",Y.lastName||"User"]}),n.jsxs("div",{style:se.userRole,children:[Y.role==="admin"?"Admin":"Member","  ",Y.department||"N/A"]})]})]}),n.jsxs("div",{style:se.userStats,children:[n.jsxs("div",{style:se.tooltipStatItem,children:[n.jsx("div",{style:se.tooltipStatNumber,children:E.length}),n.jsx("div",{style:se.tooltipStatLabel,children:"Plans"})]}),n.jsxs("div",{style:se.tooltipStatItem,children:[n.jsx("div",{style:se.tooltipStatNumber,children:E.filter(fe=>fe.status==="Ongoing").length}),n.jsx("div",{style:se.tooltipStatLabel,children:"Ongoing"})]}),n.jsxs("div",{style:se.tooltipStatItem,children:[n.jsx("div",{style:se.tooltipStatNumber,children:E.filter(fe=>fe.status==="Completed").length}),n.jsx("div",{style:se.tooltipStatLabel,children:"Completed"})]})]}),n.jsx("button",{style:se.themeToggle,onClick:Xe,children:h?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:se.tabContainer,children:n.jsx("div",{style:se.tab(!0,!1),children:"Individual Plan"})}),n.jsxs("div",{style:se.mainContent,children:[n.jsxs("div",{style:se.formSection,children:[n.jsx("h2",{style:se.sectionTitle,children:we?"Plan Weekly Execution":"Create Individual Plan"}),n.jsx("p",{style:se.sectionSubtitle,children:we?"Plan how your 42.5 working hours are allocated across assigned projects for the selected week.":"Align your personal timeline with assigned master plan projects."}),ge&&t&&n.jsxs("div",{style:se.projectContext,children:[n.jsxs("div",{style:se.contextTitle,children:[n.jsx(sb,{size:16}),"Master Plan Assignment"]}),n.jsxs("div",{style:se.contextInfo,children:[n.jsx("strong",{children:t.project}),n.jsx("br",{}),"Timeline: ",new Date(t.startDate).toLocaleDateString(),"  ",new Date(t.endDate).toLocaleDateString(),n.jsx("br",{}),Object.entries(t.fields||{}).map(([fe,Qe])=>n.jsxs("div",{children:[fe,": ",JSON.stringify(Qe)]},fe))]})]}),n.jsx("h3",{style:se.configTitle,children:"Configure Your Individual Plan"}),ge&&n.jsx(n.Fragment,{children:n.jsx("div",{style:se.fieldGroup,children:n.jsx(Vt,{label:"Project Type",compact:!0,isDarkMode:h,value:te.projectType,options:["master-plan","operation","custom","planned-leave"],onChange:fe=>{Me({...te,projectType:fe,project:"",customProjectName:"",leaveType:"",leaveReason:""}),r(null)}})})}),te.projectType==="master-plan"&&n.jsx("div",{style:se.fieldGroup,children:n.jsx(Vt,{label:"Select Master Plan",compact:!0,isDarkMode:h,value:te.project,options:i.map(fe=>fe.project),searchable:!0,onChange:fe=>{Me({...te,project:fe});const Qe=i.find(w=>w.project===fe);r(Qe||null)}})}),te.projectType==="operation"&&n.jsx("div",{style:se.fieldGroup,children:n.jsx(Vt,{label:"Select Operation",compact:!0,isDarkMode:h,value:te.project,options:O,onChange:fe=>Me({...te,project:fe})})}),ie==="planned-leave"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:se.fieldGroup,children:n.jsx(Vt,{label:"Leave Type",compact:!0,isDarkMode:h,value:te.leaveType,options:["Annual Leave","Medical Leave","Hospitalization Leave","Childcare Leave","Compassionate Leave","No Pay Leave","Other"],onChange:fe=>Me({...te,leaveType:fe})})}),n.jsxs("div",{style:se.fieldGroup,children:[n.jsx("label",{style:se.fieldLabel,children:"Reason (Optional)"}),n.jsx("textarea",{style:{...se.input,minHeight:"80px",resize:"vertical"},value:te.leaveReason,onChange:fe=>Me({...te,leaveReason:fe.target.value}),placeholder:"Brief description of leave reason (optional)"})]})]}),we&&n.jsxs("div",{style:se.fieldGroup,children:[n.jsx("label",{style:se.fieldLabel,children:"Planning Week"}),n.jsx("p",{style:{fontSize:"12px",color:h?"#94a3b8":"#64748b",marginBottom:"12px",lineHeight:"1.5"},children:" Recommended: Plan Monday-Friday for 42.5 working hours. You can also plan for custom date ranges."}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{...se.fieldLabel,fontSize:"12px",marginBottom:"6px"},children:"Start Date"}),n.jsx(en,{value:ve,compact:!0,isDarkMode:h,onChange:fe=>{ce(fe);const Qe=new Date(fe);if(Qe.getDay()===1&&!Q){const w=new Date(Qe);w.setDate(Qe.getDate()+4),V(w.toISOString().split("T")[0])}}})]}),n.jsxs("div",{children:[n.jsx("label",{style:{...se.fieldLabel,fontSize:"12px",marginBottom:"6px"},children:"End Date"}),n.jsx(en,{value:Q,compact:!0,isDarkMode:h,onChange:fe=>V(fe)})]})]})]}),ge&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:se.fieldGroup,children:[n.jsx("label",{style:se.fieldLabel,children:"Start Date"}),n.jsx(en,{value:te.startDate,compact:!0,isDarkMode:h,onChange:fe=>Me({...te,startDate:fe})})]}),n.jsxs("div",{style:se.fieldGroup,children:[n.jsx("label",{style:se.fieldLabel,children:"End Date"}),n.jsx(en,{value:te.endDate,compact:!0,isDarkMode:h,onChange:fe=>Me({...te,endDate:fe})})]})]}),!we&&ie==="planned-leave"&&n.jsxs(n.Fragment,{children:[M.map(fe=>n.jsxs("div",{style:se.customField,children:[n.jsxs("div",{style:se.customFieldHeader,children:[n.jsxs("div",{children:[n.jsx("div",{style:se.customFieldName,children:fe.name}),n.jsx("div",{style:se.customFieldType,children:"Leave Period"})]}),n.jsx("button",{style:se.removeButton(a===`remove-period-${fe.id}`),onMouseEnter:()=>A(`remove-period-${fe.id}`),onMouseLeave:()=>A(null),onClick:()=>I(M.filter(Qe=>Qe.id!==fe.id)),children:n.jsx(Pr,{size:16})})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"16px",alignItems:"end"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{...se.fieldLabel,fontSize:"12px",marginBottom:"6px"},children:"Start Date"}),n.jsx(en,{value:fe.startDate,compact:!0,isDarkMode:h,onChange:Qe=>I(M.map(w=>w.id===fe.id?{...w,startDate:Qe}:w))})]}),n.jsx("span",{style:{color:h?"#94a3b8":"#64748b",fontSize:"14px",padding:"0 6px",textAlign:"center",display:"block"},children:"to"}),n.jsxs("div",{children:[n.jsx("label",{style:{...se.fieldLabel,fontSize:"12px",marginBottom:"6px"},children:"End Date"}),n.jsx(en,{value:fe.endDate,compact:!0,isDarkMode:h,onChange:Qe=>I(M.map(w=>w.id===fe.id?{...w,endDate:Qe}:w))})]})]})]},fe.id)),n.jsxs("div",{style:se.addFieldSection,children:[n.jsx("h4",{style:{...se.fieldLabel,fontSize:"16px",marginBottom:"16px"},children:"Add Leave Period"}),n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[n.jsx("input",{type:"text",style:se.input,value:_,onChange:fe=>Fe(fe.target.value),placeholder:"Leave period name (e.g. January Leave)"}),n.jsxs("button",{style:se.addButton(a==="add-leave"),onMouseEnter:()=>A("add-leave"),onMouseLeave:()=>A(null),onClick:()=>{_.trim()&&(I([...M,{id:Date.now(),name:_.trim(),startDate:"",endDate:""}]),Fe(""))},children:[n.jsx(yn,{size:16}),"Add"]})]})]})]}),!we&&te.projectType!=="planned-leave"&&n.jsxs(n.Fragment,{children:[me.map(fe=>n.jsxs("div",{style:se.customField,children:[n.jsxs("div",{style:se.customFieldHeader,children:[n.jsxs("div",{children:[n.jsxs("div",{style:se.customFieldName,children:[fe.name,n.jsx("span",{style:{marginLeft:"10px",fontSize:"11px",padding:"4px 8px",borderRadius:"6px",backgroundColor:fe.status==="Completed"?"#3b82f620":"#10b98120",color:fe.status==="Completed"?"#3b82f6":"#10b981"},children:fe.status})]}),n.jsx("div",{style:se.customFieldType,children:"Milestone"})]}),n.jsx("button",{style:se.removeButton(a===`remove-${fe.id}`),onMouseEnter:()=>A(`remove-${fe.id}`),onMouseLeave:()=>A(null),onClick:()=>N(me.filter(Qe=>Qe.id!==fe.id)),children:n.jsx(Pr,{size:16})})]}),n.jsxs("div",{style:se.fieldGroup,children:[n.jsx("label",{style:se.fieldLabel,children:"Status"}),n.jsx(Vt,{label:"Status",compact:!0,isDarkMode:h,value:fe.status,options:["Ongoing","Completed"],onChange:Qe=>N(me.map(w=>w.id===fe.id?{...w,status:Qe}:w))})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"16px",alignItems:"end"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{...se.fieldLabel,fontSize:"12px",marginBottom:"6px"},children:"Start Date"}),n.jsx(en,{value:fe.startDate,compact:!0,isDarkMode:h,onChange:Qe=>N(me.map(w=>w.id===fe.id?{...w,startDate:Qe}:w))})]}),n.jsx("span",{style:{color:h?"#94a3b8":"#64748b",fontSize:"14px",padding:"0 6px",textAlign:"center",display:"block"},children:"to"}),n.jsxs("div",{children:[n.jsx("label",{style:{...se.fieldLabel,fontSize:"12px",marginBottom:"6px"},children:"End Date"}),n.jsx(en,{value:fe.endDate,compact:!0,isDarkMode:h,onChange:Qe=>N(me.map(w=>w.id===fe.id?{...w,endDate:Qe}:w))})]})]})]},fe.id)),n.jsxs("div",{style:se.addFieldSection,children:[n.jsx("h4",{style:{...se.fieldLabel,fontSize:"16px",marginBottom:"16px"},children:"Add Milestone"}),n.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end"},children:[n.jsx("input",{type:"text",style:se.input,value:be,onChange:fe=>H(fe.target.value),placeholder:"Milestone name (e.g. Sprint 1)"}),n.jsxs("button",{style:se.addButton(a==="add-milestone"),onMouseEnter:()=>A("add-milestone"),onMouseLeave:()=>A(null),onClick:()=>{be.trim()&&(N([...me,{id:Date.now(),name:be.trim(),startDate:"",endDate:"",status:"Ongoing"}]),H(""))},children:[n.jsx(yn,{size:16}),"Add"]})]})]})]}),n.jsxs("button",{style:se.submitButton(a==="submit"),onMouseEnter:()=>A("submit"),onMouseLeave:()=>A(null),onClick:()=>{we?Ut():pt()},children:[n.jsx(po,{size:20}),we?"Save Weekly Plan":"Create Individual Plan"]})]}),(we||te.projectType!=="planned-leave")&&n.jsxs("div",{style:se.aiSection,children:[n.jsxs("div",{style:se.aiHeader,children:[n.jsx(co,{size:20,style:{color:"#a855f7"}}),n.jsx("h3",{style:se.aiTitle,children:we?"AI Weekly Planner (42.5h)":"AI Timeline Planner"})]}),n.jsxs("div",{style:se.fieldGroup,children:[n.jsx("label",{style:se.fieldLabel,children:"Describe Your Goals (Optional)"}),n.jsx("textarea",{style:{...se.input,minHeight:"80px",resize:"vertical"},value:W,onChange:fe=>j(fe.target.value),placeholder:"Describe what you want to accomplish, any specific requirements, or priorities for this plan..."})]}),n.jsx("button",{style:se.recommendButton(a==="recommend"),onMouseEnter:()=>A("recommend"),onMouseLeave:()=>A(null),onClick:we?$e:Pe,disabled:S,children:S?n.jsxs(n.Fragment,{children:[n.jsx("div",{style:se.loadingSpinner,children:""}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(co,{size:16}),"Get AI Recommendations"]})}),b&&n.jsxs("div",{style:se.aiRecommendations,children:[n.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:h?"#e2e8f0":"#374151",marginBottom:"12px"},children:"AI Analysis"}),n.jsx("div",{style:se.aiReasoning,children:Ne.reasoning}),n.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",color:h?"#e2e8f0":"#374151",marginBottom:"12px"},children:we?"Recommended Weekly Allocations":"Recommended Milestones"}),Ne.suggestedFields.map((fe,Qe)=>n.jsxs("div",{style:{...se.suggestedField,flexDirection:"column",alignItems:"stretch",padding:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[n.jsxs("div",{style:{flex:1},children:[n.jsx("div",{style:se.suggestedFieldName,children:fe.projectName}),n.jsx("div",{style:se.suggestedFieldType,children:fe.projectType})]}),we&&n.jsx("button",{style:{padding:"4px",borderRadius:"6px",border:"none",backgroundColor:a===`remove-alloc-${Qe}`?"rgba(239,68,68,0.1)":"transparent",color:a===`remove-alloc-${Qe}`?"#ef4444":h?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:()=>A(`remove-alloc-${Qe}`),onMouseLeave:()=>A(null),onClick:()=>{const w=Ne.suggestedFields.filter((qe,ft)=>ft!==Qe);G({...Ne,suggestedFields:w})},title:"Remove this project",children:n.jsx(dn,{size:16})})]}),we?n.jsxs("div",{style:{marginBottom:"12px"},children:[n.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:h?"#d1d5db":"#374151",marginBottom:"6px",display:"block"},children:"Allocated Hours"}),n.jsx("input",{type:"number",min:"0",max:"42.5",step:"0.5",value:fe.allocatedHours,onChange:w=>{const qe=[...Ne.suggestedFields];qe[Qe].allocatedHours=parseFloat(w.target.value)||0,G({...Ne,suggestedFields:qe})},style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:h?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:h?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:h?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"600",outline:"none"}})]}):n.jsx("div",{style:se.suggestedFieldName,children:fe.name}),we&&fe.tasks&&n.jsxs("div",{children:[n.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:h?"#d1d5db":"#374151",marginBottom:"6px",display:"block"},children:"Tasks"}),fe.tasks.map((w,qe)=>n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"6px",alignItems:"center"},children:[n.jsx("input",{type:"text",value:w,onChange:ft=>{const Et=[...Ne.suggestedFields];Et[Qe].tasks[qe]=ft.target.value,G({...Ne,suggestedFields:Et})},style:{flex:1,padding:"6px 10px",borderRadius:"6px",border:h?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:h?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:h?"#e2e8f0":"#1e293b",fontSize:"13px",outline:"none"}}),n.jsx("button",{style:{padding:"4px",borderRadius:"4px",border:"none",backgroundColor:a===`remove-task-${Qe}-${qe}`?"rgba(239,68,68,0.1)":"transparent",color:a===`remove-task-${Qe}-${qe}`?"#ef4444":h?"#94a3b8":"#64748b",cursor:"pointer",display:"flex",alignItems:"center"},onMouseEnter:()=>A(`remove-task-${Qe}-${qe}`),onMouseLeave:()=>A(null),onClick:()=>{const ft=[...Ne.suggestedFields];ft[Qe].tasks=ft[Qe].tasks.filter((Et,pe)=>pe!==qe),G({...Ne,suggestedFields:ft})},children:n.jsx(dn,{size:14})})]},qe)),n.jsxs("button",{style:{...se.addButton(a===`add-task-${Qe}`),padding:"6px 12px",fontSize:"12px",marginTop:"6px"},onMouseEnter:()=>A(`add-task-${Qe}`),onMouseLeave:()=>A(null),onClick:()=>{const w=[...Ne.suggestedFields];w[Qe].tasks||(w[Qe].tasks=[]),w[Qe].tasks.push("New task"),G({...Ne,suggestedFields:w})},children:[n.jsx(yn,{size:12}),"Add Task"]})]}),fe.rationale&&n.jsxs("div",{style:{fontSize:"11px",color:h?"#9ca3af":"#6b7280",marginTop:"8px",fontStyle:"italic",paddingTop:"8px",borderTop:h?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:[" ",fe.rationale]}),!we&&n.jsxs("button",{style:se.addSuggestedButton(a===`add-suggested-${Qe}`),onMouseEnter:()=>A(`add-suggested-${Qe}`),onMouseLeave:()=>A(null),onClick:()=>kt(fe),children:[n.jsx(yn,{size:12}),"Add"]})]},Qe)),we&&Ne.suggestedFields.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginTop:"16px",padding:"16px",borderRadius:"12px",backgroundColor:(()=>{const fe=Ne.suggestedFields.reduce((Qe,w)=>Qe+(w.allocatedHours||0),0);return fe>Z?"rgba(239,68,68,0.1)":fe===Z?"rgba(16,185,129,0.1)":h?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)"})(),border:(()=>{const fe=Ne.suggestedFields.reduce((Qe,w)=>Qe+(w.allocatedHours||0),0);return fe>Z?"1px solid rgba(239,68,68,0.3)":fe===Z?"1px solid rgba(16,185,129,0.3)":h?"1px solid rgba(59,130,246,0.3)":"1px solid rgba(59,130,246,0.2)"})()},children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:h?"#93c5fd":"#3b82f6",marginBottom:"6px"},children:"Total Allocated Hours"}),n.jsxs("div",{style:{fontSize:"28px",fontWeight:"700",color:(()=>{const fe=Ne.suggestedFields.reduce((Qe,w)=>Qe+(w.allocatedHours||0),0);return fe>Z?"#ef4444":fe===Z?"#10b981":h?"#e2e8f0":"#1e293b"})()},children:[Ne.suggestedFields.reduce((fe,Qe)=>fe+(Qe.allocatedHours||0),0).toFixed(1),"h",n.jsxs("span",{style:{fontSize:"16px",color:h?"#94a3b8":"#64748b",fontWeight:"500"},children:[" "," / ",Z,"h"]})]}),Ne.suggestedFields.reduce((fe,Qe)=>fe+(Qe.allocatedHours||0),0)>Z&&n.jsxs("div",{style:{fontSize:"11px",color:"#ef4444",marginTop:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx(lo,{size:12}),"Exceeds recommended capacity"]})]}),n.jsxs("button",{style:{...se.submitButton(a==="save-weekly-ai"),marginTop:"16px",backgroundColor:a==="save-weekly-ai"?"#059669":"#10b981"},onMouseEnter:()=>A("save-weekly-ai"),onMouseLeave:()=>A(null),onClick:Ut,children:[n.jsx(po,{size:20}),"Save Weekly Plan"]})]})]}),!b&&!S&&n.jsxs("div",{style:{textAlign:"center",padding:"20px",color:h?"#94a3b8":"#64748b",fontSize:"14px"},children:[n.jsx(co,{size:32,style:{marginBottom:"12px",opacity:.5}}),we?"Get AI-generated weekly time allocations across all assigned projects. Standard work week is 42.5h, but you can plan for any timeframe.":"Get personalized milestone recommendations based on your historical work patterns and the selected master plan timeline."]})]})]})]})},aQ=()=>{const[i,e]=f.useState(null),[t,r]=f.useState(""),[a,A]=f.useState(""),[c,u]=f.useState(""),[p,m]=f.useState({}),[h,y]=f.useState(!0),[b,L]=f.useState(!1),[S,U]=f.useState(null),[E,P]=f.useState(null),[O,ve]=f.useState(null),[ce,Q]=f.useState(!1),[V,Z]=f.useState({totalPlans:0,inProgress:0,completed:0}),[le,$]=f.useState(!1),[ue,we]=f.useState(null),[ge,te]=f.useState(!1),[Me,ie]=f.useState(null),me=f.useRef(null),[N,be]=f.useState(null),[H,M]=f.useState(!0),[I,_]=f.useState([]),[Fe,Y]=f.useState([]),[D,K]=f.useState(!1),[Te,Ne]=f.useState(!1),[G,W]=f.useState(""),[j,F]=f.useState("editor"),[Xe,B]=f.useState({}),[ee,Pe]=f.useState(!1),[$e,kt]=f.useState(""),[pt,Ut]=f.useState("On Track"),[Lt,se]=f.useState(""),[Tt,ne]=f.useState(""),[fe,Qe]=f.useState(!1),[w,qe]=f.useState(null),[ft,Et]=f.useState([]),[pe,R]=f.useState([]),[Ce,re]=f.useState(!1),[xe,Ze]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),J=sessionStorage.getItem("editingPlanId");f.useRef(null),f.useRef(null),f.useRef(null),f.useRef(null),f.useRef({}),f.useEffect(()=>{(async()=>{if(J)try{const ze=await ke(`/plan/master/${J}/permission`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ze.ok){const Ye=await ze.json();be(Ye.permission),console.log(" User permission:",Ye.permission)}else console.warn(" Permission endpoint not available, using fallback to ownership"),be(void 0)}catch(ze){console.error(" Error fetching permission:",ze),console.log(" Falling back to ownership-based access control"),be(void 0)}finally{M(!1)}})()},[J]),f.useEffect(()=>{N&&S&&(async()=>{if(!(!J||!S))try{K(!0);const ze=await ke(`/plan/master/${J}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ze.ok){const Ye=await ze.json();_(Ye.team||[]),console.log(" Team members loaded:",Ye.team)}}catch(ze){console.error(" Error fetching team:",ze)}finally{K(!1)}})()},[J,N,S]),f.useEffect(()=>{N==="owner"&&S&&I&&(async()=>{if(!(N!=="owner"&&N!=="editor"))try{const ze=await ke("/user/list",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ze.ok){const Qt=(await ze.json()).users.filter($t=>$t.id!==(S==null?void 0:S.id)&&!I.some(wn=>wn.userId===$t.id));Y(Qt)}}catch(ze){console.error(" Error fetching users:",ze)}})()},[N,S,I]),f.useEffect(()=>{(async()=>{try{const ze=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ze.ok){const Ye=await ze.json();U(Ye)}}catch(ze){console.error("Error fetching user data:",ze)}})()},[]),f.useEffect(()=>{S&&(async()=>{if(S){$(!0);try{const ze=await ke("/plan/master",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ze.ok){const Ye=await ze.json(),Qt=Ye.length,$t=Ye.filter(jt=>{const Hn=typeof jt.fields=="string"?JSON.parse(jt.fields):jt.fields;if(!Hn)return!1;const vn=Object.values(Hn).filter(an=>typeof an=="object"&&(an==null?void 0:an.status));return vn.length>0&&vn.some(an=>an.status!=="Completed")}).length,wn=Ye.filter(jt=>{const Hn=typeof jt.fields=="string"?JSON.parse(jt.fields):jt.fields;if(!Hn)return!1;const vn=Object.values(Hn).filter(an=>typeof an=="object"&&(an==null?void 0:an.status));return vn.length>0&&vn.every(an=>an.status==="Completed")}).length;Z({totalPlans:Qt,inProgress:$t,completed:wn})}}catch(ze){console.error("Failed to fetch user stats:",ze)}finally{$(!1)}}})()},[S]),f.useEffect(()=>{S&&!H&&(async()=>{if(!(!J||!S)){if(N==="viewer"){ie("You have view-only access to this plan."),y(!1);return}if(N===null){ie("You do not have permission to edit this plan."),y(!1);return}try{te(!0),ie(null);const ze=await ke(`/plan/lock/${J}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(ze.ok){const Ye=await ze.json();we(Ye.lock),console.log(" Lock acquired:",Ye.lock),me.current=setInterval(async()=>{try{await ke(`/plan/lock/${J}/heartbeat`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),console.log(" Lock heartbeat sent")}catch(Qt){console.error(" Heartbeat failed:",Qt)}},3e4)}else{const Ye=await ze.json();if(Ye.lockedBy&&Ye.lockedBy!==`${S.firstName} ${S.lastName}`)if(window.confirm(` This plan is currently being edited by ${Ye.lockedBy}.

Do you want to take over editing? This will disconnect them.`)){const $t=await ke(`/plan/lock/${J}/takeover`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({force:!0})});if($t.ok){const wn=await $t.json();we(wn.lock),console.log(" Lock takeover successful"),me.current=setInterval(async()=>{try{await ke(`/plan/lock/${J}/heartbeat`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(jt){console.error(" Heartbeat failed:",jt)}},3e4)}else ie("Failed to take over lock")}else window.location.href="/adminviewplan";else ie(Ye.error||"Failed to acquire lock")}}catch(ze){console.error(" Lock acquisition error:",ze),ie("Network error. Please try again.")}finally{te(!1)}}})()},[J,S,N,H]),f.useEffect(()=>()=>{me.current&&clearInterval(me.current),J&&ue&&ke(`/plan/lock/${J}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then(()=>{console.log(" Lock released on unmount")}).catch(()=>{console.warn("Lock already released on unmount, safe to ignore")})},[J,ue]),f.useEffect(()=>{(async()=>{if(!J){alert("No plan selected for editing"),window.location.href="/adminviewplan";return}try{y(!0);const ze=await ke(`/plan/master/${J}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ze.ok){const Ye=await ze.json();e(Ye),r(Ye.project),A(Ye.startDate.split("T")[0]),u(Ye.endDate.split("T")[0]),m(Ye.fields||{});const Qt=await ke(`/plan/master/${J}/milestone-assignments`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Qt.ok){const{assignments:$t}=await Qt.json(),wn={...Ye.fields};$t.forEach(jt=>{wn[jt.milestoneName]&&(wn[jt.milestoneName].id=jt.milestoneId)}),m(wn),console.log(" Milestone IDs loaded:",wn)}else m(Ye.fields||{});console.log(" Plan data loaded:",Ye)}else alert("Failed to load plan data"),window.location.href="/adminviewplan"}catch(ze){console.error("Error fetching plan:",ze),alert("Network error. Please try again."),window.location.href="/adminviewplan"}finally{y(!1)}})()},[J]);const qt=async()=>{if(!G||!j){alert("Please select a user and permission level");return}try{const ae=await ke(`/plan/master/${J}/permissions`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:parseInt(G),permissionLevel:j})});if(ae.ok){const ze=await ae.json();console.log(" Team member added:",ze);const Ye=await ke(`/plan/master/${J}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Ye.ok){const Qt=await Ye.json();_(Qt.team||[])}W(""),F("editor"),alert("Team member added successfully!")}else{const ze=await ae.json();alert(`Failed to add team member: ${ze.error}`)}}catch(ae){console.error(" Error adding team member:",ae),alert("Network error. Please try again.")}},He=async(ae,ze)=>{try{if((await ke(`/plan/master/${J}/permissions`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:ae,permissionLevel:ze})})).ok){console.log(" Permission updated");const Qt=await ke(`/plan/master/${J}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Qt.ok){const $t=await Qt.json();_($t.team||[])}alert("Permission updated successfully!")}else alert("Failed to update permission")}catch(Ye){console.error(" Error updating permission:",Ye),alert("Network error. Please try again.")}},bn=async ae=>{if(window.confirm("Are you sure you want to remove this team member?"))try{if((await ke(`/plan/master/${J}/permissions/${ae}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})).ok){console.log(" Team member removed");const Qt=await ke(`/plan/master/${J}/team`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Qt.ok){const $t=await Qt.json();_($t.team||[])}alert("Team member removed successfully!")}else alert("Failed to remove team member")}catch(Ye){console.error(" Error removing team member:",Ye),alert("Network error. Please try again.")}},at=()=>{Pe(!0)},k=()=>{if(!$e.trim()){alert("Please enter a milestone name");return}if(p[$e.trim()]){alert("A milestone with this name already exists!");return}m({...p,[$e.trim()]:{status:pt,startDate:Lt,endDate:Tt}}),Pe(!1),kt(""),Ut("On Track"),se(""),ne("")},v=()=>{Pe(!1),kt(""),Ut("On Track"),se(""),ne("")},Ae=(ae,ze,Ye)=>{m({...p,[ae]:{...p[ae],[ze]:Ye}})},Ue=async(ae,ze)=>{qe({milestoneName:ae,milestoneId:ze}),Qe(!0),re(!0);try{const Ye=await ke(`/plan/master/${J}/milestone/${ze}/users`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Ye.ok){const{users:Qt}=await Ye.json();Et(Qt);const $t=Qt.map(jt=>jt.userId),wn=I.filter(jt=>!$t.includes(jt.userId));R(wn)}}catch(Ye){console.error("Failed to load milestone users:",Ye)}finally{re(!1)}},et=async ae=>{if(w)try{(await ke(`/plan/master/${J}/milestone/${w.milestoneId}/users`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userIds:[ae]})})).ok&&(await Ue(w.milestoneName,w.milestoneId),alert(" User added to milestone!"))}catch(ze){console.error("Failed to add user:",ze),alert("Failed to add user to milestone")}},Ke=async ae=>{if(w&&confirm("Remove this user from the milestone?"))try{(await ke(`/plan/master/${J}/milestone/${w.milestoneId}/users/${ae}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})).ok&&(await Ue(w.milestoneName,w.milestoneId),alert(" User removed from milestone!"))}catch(ze){console.error("Failed to remove user:",ze),alert("Failed to remove user from milestone")}},yt=async()=>{if(!t.trim()){alert("Please enter a project name");return}if(!a||!c){alert("Please enter start and end dates");return}if(N==="viewer"){alert(" You have view-only access. Contact the owner for edit permissions.");return}if(N===null){alert(" You do not have permission to edit this plan.");return}L(!0);try{const ae=await ke(`/plan/master/${J}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:t,startDate:a,endDate:c,fields:p,justifications:Xe,submittedBy:{firstName:S==null?void 0:S.firstName,lastName:S==null?void 0:S.lastName,email:S==null?void 0:S.email}})});if(ae.ok){if(console.log(" Plan updated successfully"),ue)try{await ke(`/plan/lock/${J}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})}catch{console.warn("Lock already released or not found, safe to ignore")}alert("Plan updated successfully!"),sessionStorage.removeItem("editingPlanId"),sessionStorage.removeItem("editingPlanData"),window.location.href="/adminviewplan"}else{const ze=await ae.json();alert(`Failed to update plan: ${ze.error}`)}}catch(ae){console.error("Error updating plan:",ae),alert("Network error. Please try again.")}finally{L(!1)}},It=async()=>{if(ue)try{await ke(`/plan/lock/${J}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}),console.log(" Lock released on cancel")}catch(ae){console.error(" Failed to release lock:",ae)}sessionStorage.removeItem("editingPlanId"),sessionStorage.removeItem("editingPlanData"),window.location.href="/adminviewplan"},tt=()=>{Ze(!xe),Q(!1)},st=ae=>{const Ye={owner:{bg:"#3b82f6",icon:hs,label:"Owner"},editor:{bg:"#10b981",icon:oa,label:"Editor"},viewer:{bg:"#64748b",icon:$o,label:"Viewer"}}[ae];if(!Ye)return null;const Qt=Ye.icon;return n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"8px",backgroundColor:Ye.bg+"20",border:`1px solid ${Ye.bg}40`,fontSize:"12px",fontWeight:"600",color:Ye.bg,textTransform:"uppercase"},children:[n.jsx(Qt,{size:14}),Ye.label]})},ye={page:{minHeight:"100vh",padding:"30px",background:xe?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif'},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",marginBottom:"32px",position:"relative"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},backButton:ae=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:ae?"rgba(59,130,246,0.1)":xe?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:ae?"#3b82f6":xe?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:ae?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:ae?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),topButton:ae=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:ae?"rgba(59,130,246,0.1)":xe?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:ae?"#3b82f6":xe?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:ae?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:ae?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:xe?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:xe?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:xe?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:xe?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},userName:{fontSize:"14px",fontWeight:"600",color:xe?"#e2e8f0":"#1e293b",marginBottom:"2px"},userRole:{fontSize:"12px",color:xe?"#94a3b8":"#64748b"},userStats:{borderTop:xe?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:xe?"#e2e8f0":"#1e293b"},tooltipStatLabel:{fontSize:"10px",color:xe?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px",width:"100%"},tabContainer:{display:"flex",gap:"8px",marginBottom:"32px",padding:"4px",backgroundColor:xe?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"16px",backdropFilter:"blur(10px)",border:xe?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",maxWidth:"fit-content"},tab:(ae,ze)=>({padding:"12px 24px",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",border:"none",backgroundColor:ae?"#3b82f6":ze?xe?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)":"transparent",color:ae?"#fff":xe?"#e2e8f0":"#64748b",boxShadow:ae?"0 4px 12px rgba(59,130,246,0.3)":"none"}),mainContent:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"32px",alignItems:"start"},formSection:{backgroundColor:xe?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:xe?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},rightSidebar:{display:"flex",flexDirection:"column",gap:"20px"},teamSection:{backgroundColor:xe?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:xe?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",transition:"all 0.3s ease"},teamHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},teamTitle:{fontSize:"18px",fontWeight:"700",color:xe?"#e2e8f0":"#1e293b"},addFieldButton:ae=>({padding:"10px 20px",borderRadius:"12px",border:xe?"2px dashed rgba(59,130,246,0.5)":"2px dashed rgba(59,130,246,0.3)",backgroundColor:ae?"rgba(59,130,246,0.1)":"transparent",color:"#3b82f6",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",fontSize:"14px",fontWeight:"600",width:"100%",marginTop:"16px"}),container:{maxWidth:"1200px",margin:"0 auto"},header:{fontSize:"28px",fontWeight:"700",color:xe?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"12px"},title:{fontSize:"28px",fontWeight:"700",color:xe?"#f1f5f9":"#1e293b",display:"flex",alignItems:"center",gap:"12px"},lockBanner:ae=>({padding:"16px 20px",borderRadius:"12px",marginBottom:"24px",display:"flex",alignItems:"center",gap:"12px",backgroundColor:ae==="error"?"rgba(239,68,68,0.1)":ae==="acquiring"?"rgba(251,191,36,0.1)":"rgba(16,185,129,0.1)",border:`1px solid ${ae==="error"?"rgba(239,68,68,0.3)":ae==="acquiring"?"rgba(251,191,36,0.3)":"rgba(16,185,129,0.3)"}`,color:ae==="error"?"#ef4444":ae==="acquiring"?"#f59e0b":"#10b981",fontWeight:"600",fontSize:"14px"}),card:{backgroundColor:xe?"#374151":"#fff",borderRadius:"20px",padding:"32px",marginBottom:"24px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:xe?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)"},sectionTitle:{fontSize:"20px",fontWeight:"700",color:xe?"#e2e8f0":"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",userSelect:"none"},formGroup:{marginBottom:"24px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:xe?"#e2e8f0":"#374151",marginBottom:"8px"},input:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:xe?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:xe?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:xe?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none"},textarea:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:xe?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:xe?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:xe?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",fontFamily:"inherit",resize:"vertical",minHeight:"60px"},select:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:xe?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backgroundColor:xe?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:xe?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",cursor:"pointer"},fieldCard:{backgroundColor:xe?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"20px",marginBottom:"16px",border:xe?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)"},fieldHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},fieldName:{fontSize:"16px",fontWeight:"600",color:xe?"#e2e8f0":"#1e293b"},removeButton:ae=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:ae?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",color:"#ef4444",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),button:(ae,ze="primary",Ye=!1)=>({padding:"12px 24px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:Ye?"not-allowed":"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",opacity:Ye?.5:1,backgroundColor:Ye?xe?"#4b5563":"#e5e7eb":ze==="primary"?ae?"#2563eb":"#3b82f6":ze==="secondary"?ae?"#f59e0b":"#fbbf24":ae?xe?"#4b5563":"#e5e7eb":xe?"#6b7280":"#f3f4f6",color:ze==="primary"||ze==="secondary"?"#fff":xe?"#e2e8f0":"#374151",boxShadow:ae&&!Ye?"0 4px 12px rgba(0,0,0,0.15)":"none",transform:ae&&!Ye?"translateY(-1px)":"translateY(0)"}),buttonGroup:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"32px"},addFieldButton:ae=>({padding:"10px 20px",borderRadius:"12px",border:xe?"2px dashed rgba(59,130,246,0.5)":"2px dashed rgba(59,130,246,0.3)",backgroundColor:ae?"rgba(59,130,246,0.1)":"transparent",color:"#3b82f6",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",fontSize:"14px",fontWeight:"600"}),dateRow:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},teamMemberCard:{backgroundColor:xe?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center",border:xe?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.8)"},teamMemberInfo:{display:"flex",alignItems:"center",gap:"12px",flex:1},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"14px"},memberDetails:{flex:1},memberName:{fontSize:"14px",fontWeight:"600",color:xe?"#e2e8f0":"#1e293b",marginBottom:"2px"},memberEmail:{fontSize:"12px",color:xe?"#94a3b8":"#64748b"},addTeamRow:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:"12px",alignItems:"end",padding:"16px",backgroundColor:xe?"rgba(59,130,246,0.05)":"rgba(59,130,246,0.03)",borderRadius:"12px",border:xe?"1px solid rgba(59,130,246,0.2)":"1px solid rgba(59,130,246,0.1)"},infoBox:{padding:"16px",borderRadius:"12px",backgroundColor:xe?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",border:xe?"1px solid rgba(59,130,246,0.3)":"1px solid rgba(59,130,246,0.2)",marginTop:"16px",fontSize:"13px",color:xe?"#93c5fd":"#3b82f6",lineHeight:"1.6"},addMilestoneModal:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(8px)"},addMilestoneModalContent:{backgroundColor:xe?"#374151":"#fff",borderRadius:"24px",padding:"32px",boxShadow:"0 25px 50px rgba(0,0,0,0.3)",border:xe?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflowY:"auto"},modalHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",paddingBottom:"16px",borderBottom:xe?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)"},modalTitle:{fontSize:"24px",fontWeight:"700",color:xe?"#e2e8f0":"#1e293b",display:"flex",alignItems:"center",gap:"12px"},modalCloseButton:ae=>({padding:"8px",borderRadius:"8px",border:"none",backgroundColor:ae?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",color:"#ef4444",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),modalBody:{marginBottom:"24px"},modalFooter:{display:"flex",gap:"12px",justifyContent:"flex-end",paddingTop:"20px",borderTop:xe?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"}};return h||H?n.jsx("div",{style:ye.page,children:n.jsx("div",{style:ye.container,children:n.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:xe?"#94a3b8":"#64748b",fontSize:"16px"},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:"12px"},children:""}),"Loading plan data..."]})})}):N===null?n.jsx("div",{style:ye.page,children:n.jsxs("div",{style:ye.container,children:[n.jsxs("div",{style:ye.lockBanner("error"),children:[n.jsx(lo,{size:20}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:"700",marginBottom:"4px"},children:"Access Denied"}),n.jsx("div",{style:{fontSize:"13px",opacity:.9},children:"You do not have permission to view this plan."})]})]}),n.jsx("button",{style:ye.button(!1,"default"),onClick:()=>window.location.href="/adminviewplan",children:"Back to Plans"})]})}):n.jsxs("div",{style:ye.page,children:[n.jsxs("div",{style:ye.headerRow,children:[n.jsxs("div",{style:ye.headerLeft,children:[n.jsx("button",{style:ye.backButton(E==="back"),onMouseEnter:()=>P("back"),onMouseLeave:()=>P(null),onClick:It,children:n.jsx(Pi,{size:20})}),n.jsxs("h1",{style:ye.header,children:["Edit Master Plan",N&&st(N)]})]}),n.jsxs("div",{style:ye.headerRight,children:[n.jsxs("button",{style:ye.topButton(O==="alerts"),onMouseEnter:()=>ve("alerts"),onMouseLeave:()=>ve(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(lr,{size:20}),n.jsx("div",{style:ye.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:ye.topButton(O==="profile"),onMouseEnter:()=>{ve("profile"),Q(!0)},onMouseLeave:()=>ve(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Yt,{size:20})}),ce&&n.jsxs("div",{style:ye.profileTooltip,onMouseEnter:()=>Q(!0),onMouseLeave:()=>Q(!1),children:[n.jsx("div",{style:ye.tooltipArrow}),n.jsxs("div",{style:ye.userInfo,children:[n.jsx("div",{style:ye.avatar,children:S?`${S.firstName[0]}${S.lastName[0]}`:"U"}),n.jsxs("div",{children:[n.jsx("div",{style:ye.userName,children:S?`${S.firstName} ${S.lastName}`:"Loading..."}),n.jsx("div",{style:ye.userRole,children:S?`${S.role}  ${S.department}`:"Loading..."})]})]}),n.jsxs("div",{style:ye.userStats,children:[n.jsxs("div",{style:ye.tooltipStatItem,children:[n.jsx("div",{style:ye.tooltipStatNumber,children:le?"...":V.totalPlans}),n.jsx("div",{style:ye.tooltipStatLabel,children:"Plans"})]}),n.jsxs("div",{style:ye.tooltipStatItem,children:[n.jsx("div",{style:ye.tooltipStatNumber,children:le?"...":V.inProgress}),n.jsx("div",{style:ye.tooltipStatLabel,children:"In Progress"})]}),n.jsxs("div",{style:ye.tooltipStatItem,children:[n.jsx("div",{style:ye.tooltipStatNumber,children:le?"...":V.completed}),n.jsx("div",{style:ye.tooltipStatLabel,children:"Completed"})]})]}),n.jsx("button",{style:ye.themeToggle,onClick:tt,children:xe?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:ye.tabContainer,children:n.jsx("div",{style:ye.tab(!0,!1),children:"Master Plan"})}),ge&&n.jsxs("div",{style:ye.lockBanner("acquiring"),children:[n.jsx(Ei,{size:20}),n.jsx("div",{children:"Acquiring edit lock..."})]}),Me&&n.jsxs("div",{style:ye.lockBanner("error"),children:[n.jsx(lo,{size:20}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:"700",marginBottom:"4px"},children:"Cannot Edit Plan"}),n.jsx("div",{style:{fontSize:"13px",opacity:.9},children:Me})]})]}),ue&&!Me&&n.jsxs("div",{style:ye.lockBanner("success"),children:[n.jsx(po,{size:20}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:"700",marginBottom:"4px"},children:"You have edit access"}),n.jsxs("div",{style:{fontSize:"13px",opacity:.9},children:["Your changes will be saved automatically. Lock expires in ",ue.minutesRemaining||5," minutes."]})]})]}),n.jsxs("div",{style:ye.mainContent,children:[n.jsxs("div",{style:ye.formSection,children:[n.jsx("h2",{style:ye.sectionTitle,children:"Basic Information"}),n.jsxs("div",{style:ye.formGroup,children:[n.jsx("label",{style:ye.label,children:"Project Name *"}),n.jsx("input",{type:"text",value:t,onChange:ae=>r(ae.target.value),style:ye.input,placeholder:"Enter project name",disabled:N==="viewer"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[n.jsx(en,{label:"Start Date *",value:a,onChange:ae=>A(ae),isDarkMode:xe,placeholder:"Select start date",disabled:N==="viewer",compact:!0}),n.jsx(en,{label:"End Date *",value:c,onChange:ae=>u(ae),isDarkMode:xe,placeholder:"Select end date",disabled:N==="viewer",compact:!0})]}),n.jsx("h2",{style:{...ye.sectionTitle,marginTop:"32px"},children:"Milestones & Phases"}),Object.entries(p).map(([ae,ze])=>["status","lead","budget","completion"].includes(ae.toLowerCase())?null:n.jsxs("div",{style:ye.fieldCard,children:[n.jsx("div",{style:ye.fieldHeader,children:n.jsx("span",{style:ye.fieldName,children:ae})}),n.jsxs("div",{style:ye.dateRow,children:[n.jsx("div",{style:ye.formGroup,children:n.jsx(Vt,{label:"Status",value:ze.status||"On Track",onChange:Ye=>Ae(ae,"status",Ye),options:["On Track","At Risk","Completed","Delayed"],isDarkMode:xe,disabled:N==="viewer",compact:!0})}),n.jsx("div",{style:ye.formGroup,children:n.jsx(en,{label:"Start Date",value:ze.startDate||"",onChange:Ye=>Ae(ae,"startDate",Ye),isDarkMode:xe,placeholder:"Milestone start",disabled:N==="viewer",compact:!0})}),n.jsx("div",{style:ye.formGroup,children:n.jsx(en,{label:"End Date",value:ze.endDate||"",onChange:Ye=>Ae(ae,"endDate",Ye),isDarkMode:xe,placeholder:"Milestone end",disabled:N==="viewer",compact:!0})})]}),N!=="viewer"&&n.jsxs("div",{style:ye.formGroup,children:[n.jsx("label",{style:ye.label,children:"Justification for Changes (Optional)"}),n.jsx("textarea",{value:Xe[ae]||"",onChange:Ye=>B({...Xe,[ae]:Ye.target.value}),style:ye.textarea,placeholder:"Optionally explain why you're making changes to this milestone...",rows:2,disabled:N==="viewer"})]}),(N==="owner"||N==="editor")&&ze.id&&n.jsxs("button",{style:{marginTop:"12px",padding:"10px 16px",borderRadius:"8px",border:"none",backgroundColor:E===`manage-users-${ae}`?"rgba(139,92,246,0.15)":"rgba(139,92,246,0.1)",color:E===`manage-users-${ae}`?"#7c3aed":"#8b5cf6",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",fontWeight:"600",width:"100%",justifyContent:"center"},onMouseEnter:()=>P(`manage-users-${ae}`),onMouseLeave:()=>P(null),onClick:()=>Ue(ae,ze.id),children:[n.jsx(Er,{size:14}),"Manage Milestone Users"]})]},ae)),N!=="viewer"&&n.jsxs("button",{style:ye.addFieldButton(E==="add-field"),onMouseEnter:()=>P("add-field"),onMouseLeave:()=>P(null),onClick:at,children:[n.jsx(yn,{size:16}),"Add Milestone / Phase"]}),n.jsxs("div",{style:ye.buttonGroup,children:[n.jsxs("button",{style:ye.button(E==="cancel","default"),onMouseEnter:()=>P("cancel"),onMouseLeave:()=>P(null),onClick:It,children:[n.jsx(dn,{size:16}),"Cancel"]}),n.jsxs("button",{style:ye.button(E==="save","primary",b||N==="viewer"),onMouseEnter:()=>P("save"),onMouseLeave:()=>P(null),onClick:yt,disabled:b||N==="viewer",children:[n.jsx(po,{size:16}),b?"Saving...":"Save Changes"]})]}),N==="viewer"&&n.jsxs("div",{style:ye.infoBox,children:[n.jsx(lo,{size:16,style:{display:"inline-block",verticalAlign:"middle",marginRight:"8px"}}),"You have view-only access to this plan. Contact the owner to request edit permissions."]})]}),n.jsx("div",{style:ye.rightSidebar,children:n.jsxs("div",{style:ye.teamSection,children:[n.jsxs("div",{style:ye.teamHeader,children:[n.jsx(Er,{size:20,style:{color:"#3b82f6"}}),n.jsx("h3",{style:ye.teamTitle,children:"Team & Permissions"})]}),I.filter(ae=>ae.permission==="owner").map(ae=>n.jsxs("div",{style:ye.teamMemberCard,children:[n.jsxs("div",{style:ye.teamMemberInfo,children:[n.jsxs("div",{style:ye.avatar,children:[ae.firstName[0],ae.lastName[0]]}),n.jsxs("div",{style:ye.memberDetails,children:[n.jsxs("div",{style:ye.memberName,children:[ae.firstName," ",ae.lastName,ae.userId===(S==null?void 0:S.id)&&" (You)"]}),n.jsx("div",{style:ye.memberEmail,children:ae.email})]})]}),st("owner")]},ae.userId)),I.filter(ae=>ae.permission!=="owner").map(ae=>n.jsxs("div",{style:ye.teamMemberCard,children:[n.jsxs("div",{style:ye.teamMemberInfo,children:[n.jsxs("div",{style:ye.avatar,children:[ae.firstName[0],ae.lastName[0]]}),n.jsxs("div",{style:ye.memberDetails,children:[n.jsxs("div",{style:ye.memberName,children:[ae.firstName," ",ae.lastName,ae.userId===(S==null?void 0:S.id)&&" (You)"]}),n.jsx("div",{style:ye.memberEmail,children:ae.email})]})]}),N==="owner"?n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsxs("select",{value:ae.permission,onChange:ze=>He(ae.userId,ze.target.value),style:{...ye.select,width:"auto",padding:"6px 12px",fontSize:"12px"},disabled:ae.permission==="owner",children:[n.jsx("option",{value:"owner",children:"Owner"}),n.jsx("option",{value:"editor",children:"Editor"}),n.jsx("option",{value:"viewer",children:"Viewer"})]}),n.jsx("button",{style:ye.removeButton(E===`remove-${ae.userId}`),onMouseEnter:()=>P(`remove-${ae.userId}`),onMouseLeave:()=>P(null),onClick:()=>bn(ae.userId),children:n.jsx(Pr,{size:16})})]}):st(ae.permission)]},ae.userId)),(N==="owner"||N==="editor")&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:ye.addTeamRow,children:[n.jsxs("div",{style:ye.formGroup,children:[n.jsx("label",{style:ye.label,children:"Add Team Member"}),n.jsxs("select",{value:G,onChange:ae=>W(ae.target.value),style:ye.select,children:[n.jsx("option",{value:"",children:"Select a user..."}),Fe.map(ae=>n.jsxs("option",{value:ae.id,children:[ae.firstName," ",ae.lastName," (",ae.email,")"]},ae.id))]})]}),n.jsxs("div",{style:ye.formGroup,children:[n.jsx("label",{style:ye.label,children:"Permission"}),n.jsxs("select",{value:j,onChange:ae=>F(ae.target.value),style:ye.select,children:[n.jsx("option",{value:"owner",children:"Owner"}),n.jsx("option",{value:"editor",children:"Editor"}),n.jsx("option",{value:"viewer",children:"Viewer"})]})]}),n.jsxs("button",{style:ye.button(E==="add-member","primary",!G),onMouseEnter:()=>P("add-member"),onMouseLeave:()=>P(null),onClick:qt,disabled:!G,children:[n.jsx(yn,{size:16}),"Add"]})]}),n.jsxs("div",{style:ye.infoBox,children:[n.jsx("strong",{children:"Permission Levels:"}),n.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Owner:"})," Full control including managing team members and permissions"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Editor:"})," Can edit milestones, dates, and status"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Viewer:"})," Can only view the plan (read-only access)"]})]}),n.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",opacity:.8},children:[" ",n.jsx("strong",{children:"Multiple owners allowed"})," - Plans can have more than one owner"]})]})]})]})})]}),ee&&n.jsx("div",{style:ye.addMilestoneModal,children:n.jsxs("div",{style:ye.addMilestoneModalContent,children:[n.jsxs("div",{style:ye.modalHeader,children:[n.jsxs("div",{style:ye.modalTitle,children:[n.jsx(yn,{size:24,style:{color:"#3b82f6"}}),"Add New Milestone"]}),n.jsx("button",{style:ye.modalCloseButton(E==="close-modal"),onMouseEnter:()=>P("close-modal"),onMouseLeave:()=>P(null),onClick:v,children:n.jsx(dn,{size:20})})]}),n.jsxs("div",{style:ye.modalBody,children:[n.jsxs("div",{style:ye.formGroup,children:[n.jsx("label",{style:ye.label,children:"Milestone Name *"}),n.jsx("input",{type:"text",value:$e,onChange:ae=>kt(ae.target.value),style:ye.input,placeholder:"e.g., Phase 1, Sprint 2, Design Review",autoFocus:!0})]}),n.jsx(Vt,{label:"Initial Status",value:pt,onChange:ae=>Ut(ae),options:["On Track","At Risk","Completed","Delayed"],isDarkMode:xe,compact:!0}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[n.jsx(en,{label:"Start Date",value:Lt,onChange:ae=>se(ae),isDarkMode:xe,placeholder:"Milestone start",compact:!0}),n.jsx(en,{label:"End Date",value:Tt,onChange:ae=>ne(ae),isDarkMode:xe,placeholder:"Milestone end",compact:!0})]}),n.jsxs("div",{style:ye.infoBox,children:[" ",n.jsx("strong",{children:"Tip:"})," You can edit the milestone details after adding it. Dates are optional but help with timeline tracking."]})]}),n.jsxs("div",{style:ye.modalFooter,children:[n.jsxs("button",{style:ye.button(E==="cancel-milestone","default"),onMouseEnter:()=>P("cancel-milestone"),onMouseLeave:()=>P(null),onClick:v,children:[n.jsx(dn,{size:16}),"Cancel"]}),n.jsxs("button",{style:ye.button(E==="add-milestone","primary",!$e.trim()),onMouseEnter:()=>P("add-milestone"),onMouseLeave:()=>P(null),onClick:k,disabled:!$e.trim(),children:[n.jsx(yn,{size:16}),"Add Milestone"]})]})]})}),fe&&w&&n.jsx("div",{style:ye.addMilestoneModal,children:n.jsxs("div",{style:ye.addMilestoneModalContent,children:[n.jsxs("div",{style:ye.modalHeader,children:[n.jsxs("div",{style:ye.modalTitle,children:[n.jsx(Er,{size:24,style:{color:"#8b5cf6"}}),"Manage Milestone Users"]}),n.jsx("button",{style:ye.modalCloseButton(E==="close-users-modal"),onMouseEnter:()=>P("close-users-modal"),onMouseLeave:()=>P(null),onClick:()=>{Qe(!1),qe(null),Et([]),R([])},children:n.jsx(dn,{size:20})})]}),n.jsxs("div",{style:ye.modalBody,children:[n.jsxs("p",{style:{fontSize:"14px",color:xe?"#94a3b8":"#64748b",marginBottom:"20px"},children:[n.jsx("strong",{children:"Milestone:"})," ",w.milestoneName]}),Ce?n.jsx("div",{style:{textAlign:"center",padding:"20px",color:xe?"#94a3b8":"#64748b"},children:"Loading users..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("label",{style:ye.label,children:["Assigned Users (",ft.length,")"]}),ft.length===0?n.jsx("div",{style:{padding:"16px",backgroundColor:xe?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"8px",textAlign:"center",color:xe?"#94a3b8":"#64748b",fontSize:"13px"},children:"No users assigned to this milestone"}):ft.map(ae=>n.jsxs("div",{style:{...ye.teamMemberCard,marginTop:"8px",padding:"12px"},children:[n.jsxs("div",{style:ye.teamMemberInfo,children:[n.jsxs("div",{style:{...ye.avatar,width:"32px",height:"32px",fontSize:"12px"},children:[ae.firstName[0],ae.lastName[0]]}),n.jsxs("div",{style:ye.memberDetails,children:[n.jsxs("div",{style:ye.memberName,children:[ae.firstName," ",ae.lastName]}),n.jsx("div",{style:ye.memberEmail,children:ae.email})]})]}),n.jsx("button",{style:ye.removeButton(E===`remove-milestone-user-${ae.userId}`),onMouseEnter:()=>P(`remove-milestone-user-${ae.userId}`),onMouseLeave:()=>P(null),onClick:()=>Ke(ae.userId),children:n.jsx(dn,{size:16})})]},ae.userId))]}),pe.length>0&&n.jsxs("div",{children:[n.jsx("label",{style:ye.label,children:"Add User to Milestone"}),n.jsxs("select",{style:ye.select,onChange:ae=>{ae.target.value&&(et(parseInt(ae.target.value)),ae.target.value="")},children:[n.jsx("option",{value:"",children:"Select a user to add..."}),pe.map(ae=>n.jsxs("option",{value:ae.userId,children:[ae.firstName," ",ae.lastName," (",ae.permission,")"]},ae.userId))]})]}),pe.length===0&&ft.length>0&&n.jsx("div",{style:ye.infoBox,children:"All team members are already assigned to this milestone."})]})]}),n.jsx("div",{style:ye.modalFooter,children:n.jsxs("button",{style:ye.button(E==="close-users","default"),onMouseEnter:()=>P("close-users"),onMouseLeave:()=>P(null),onClick:()=>{Qe(!1),qe(null),Et([]),R([])},children:[n.jsx(dn,{size:16}),"Close"]})})]})})]})},AQ=()=>{var Te,Ne;const[i,e]=f.useState(null),[t,r]=f.useState(!1),[a,A]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[c,u]=f.useState(null),[p,m]=f.useState(!0),[h,y]=f.useState(()=>{const G=window.location.pathname.split("/"),W=G[G.length-1];return W&&!isNaN(W)?parseInt(W):null}),[b,L]=f.useState("structure"),[S,U]=f.useState([]),[E,P]=f.useState([]),[O,ve]=f.useState(0),[ce,Q]=f.useState({assignedProject:"",projectType:"",role:"",startDate:"",endDate:""}),[V,Z]=f.useState([]),[le,$]=f.useState([]),[ue,we]=f.useState(""),ge=42.5,te=G=>{if(!G)return"";const W=new Date(G);return isNaN(W.getTime())?G:W.toISOString().split("T")[0]},Me=G=>G?/^\d{4}-\d{2}-\d{2}/.test(G)?G.split("T")[0]:G:null;f.useEffect(()=>{(async()=>{try{const W=await ke("/user/profile",{method:"GET",credentials:"include"});if(!W.ok)throw new Error("Failed to fetch user profile");const j=await W.json();u(j)}catch(W){console.error("Error fetching user profile:",W)}})()},[]),f.useEffect(()=>{const G=document.createElement("style");return G.textContent=`
    body, html, #root, .app, .main-content, .page-container, .content-wrapper {
      background: ${a?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)"} !important;
      margin: 0 !important;
      padding: 0 !important;
      font-family: "Montserrat", sans-serif !important;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
  `,document.head.appendChild(G),()=>{document.head.removeChild(G)}},[a]),f.useEffect(()=>{c&&(async()=>{try{const W=await ke("/plan/individual",{method:"GET",credentials:"include"});if(W.ok){const F=await W.json();U(F)}const j=await ke("/plan/individual/supervised",{method:"GET",credentials:"include"});if(j.ok){const F=await j.json();P(F)}if(c!=null&&c.id){const F=await ke("/plan/master",{method:"GET",credentials:"include"});if(F.ok){const ee=(await F.json()).filter(Pe=>Pe.createdBy===c.id).filter(Pe=>Pe.approvalStatus==="Pending Approval").length;ve(ee)}}}catch(W){console.error("Error fetching plans:",W)}})()},[c]),f.useEffect(()=>{(async()=>{if(!h){alert("No plan ID provided"),window.location.href="/adminindividualplan";return}try{m(!0);const W=await ke("/plan/individual",{method:"GET",credentials:"include"});if(!W.ok)throw new Error("Failed to fetch plans");const F=(await W.json()).find(Pe=>Pe.Id===h);if(!F){alert("Plan not found");return}const Xe=typeof F.Fields=="string"?JSON.parse(F.Fields):F.Fields;Q({assignedProject:F.Project,projectType:F.ProjectType||"custom",role:F.Role||"",startDate:te(F.StartDate),endDate:te(F.EndDate)});const B=[];let ee=1;Object.entries(Xe).forEach(([Pe,$e])=>{Pe==="title"||Pe==="status"||typeof $e=="object"&&$e!==null&&B.push({id:ee++,name:Pe,type:"Date Range",status:$e.status||"Ongoing",startDate:te($e.startDate),endDate:te($e.endDate)})}),Z(B),await ie(h),m(!1)}catch(W){console.error("Error fetching plan:",W),alert("Failed to load plan")}})()},[h]);const ie=async G=>{try{const W=await ke("/weekly-allocations/all",{method:"GET",credentials:"include"});if(!W.ok)throw new Error("Failed to fetch weekly allocations");const F=(await W.json()).filter(Xe=>Xe.IndividualPlanId===G).map(Xe=>({id:Xe.Id,weekStart:te(Xe.WeekStart),weekEnd:te(Xe.WeekEnd),plannedHours:parseFloat(Xe.PlannedHours)||0,tasks:JSON.parse(Xe.Tasks||"[]").join(`
`),notes:Xe.Notes||"",status:Xe.Status||"Planned"}));$(F)}catch(W){console.error("Error fetching weekly allocations:",W)}},me=()=>{const G=!a;A(G);try{localStorage.setItem("darkMode",G.toString())}catch{console.log("LocalStorage not available")}r(!1)},N=()=>window.location.href="/adminindividualplan",be=()=>{ue.trim()&&(Z([...V,{id:Date.now(),name:ue.trim(),type:"Date Range",status:"Ongoing",startDate:"",endDate:""}]),we(""))},H=G=>{Z(V.filter(W=>W.id!==G))},M=(G,W,j)=>{Z(V.map(F=>F.id===G?{...F,[W]:j}:F))},I=()=>{$([...le,{id:Date.now(),weekStart:"",weekEnd:"",plannedHours:0,tasks:"",notes:"",status:"Planned"}])},_=G=>{$(le.filter(W=>W.id!==G))},Fe=(G,W,j)=>{$(le.map(F=>F.id===G?{...F,[W]:j}:F))},Y=(G,W)=>{Fe(G,"weekStart",W);const j=new Date(W);if(j.getDay()===1){const F=le.find(Xe=>Xe.id===G);if(!(F!=null&&F.weekEnd)){const Xe=new Date(j);Xe.setDate(j.getDate()+4),Fe(G,"weekEnd",Xe.toISOString().split("T")[0])}}},D=async()=>{try{console.log("Saving individual plan changes...");const G={};V.forEach(F=>{G[F.name]={status:F.status||"Ongoing",startDate:Me(F.startDate),endDate:Me(F.endDate)}});const W={project:ce.assignedProject,projectType:ce.projectType,role:ce.role,startDate:Me(ce.startDate),endDate:Me(ce.endDate),fields:G};if(!(await ke(`/plan/individual/${h}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)})).ok)throw new Error("Failed to update plan structure");for(const F of le){const Xe={individualPlanId:h,projectName:ce.assignedProject,projectType:ce.projectType,weekStart:Me(F.weekStart),weekEnd:Me(F.weekEnd),plannedHours:F.plannedHours,tasks:F.tasks.split(`
`).filter(B=>B.trim()),notes:F.notes,aiGenerated:!1};await ke("/weekly-allocations",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xe)})}console.log("Plan updated successfully"),alert(" Individual plan and weekly allocations saved successfully!"),window.location.href="/adminindividualplan"}catch(G){console.error("Error saving plan:",G),alert(` Failed to save plan: ${G.message}`)}},K={page:{minHeight:"100vh",padding:"30px",background:a?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',animation:"slideIn 0.3s ease-out"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"32px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},title:{fontSize:"28px",fontWeight:"700",color:a?"#f1f5f9":"#1e293b",margin:0},button:G=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:G?"rgba(59,130,246,0.1)":a?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:G?"#3b82f6":a?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:G?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:G?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",position:"relative"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:a?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:a?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:9999,animation:"slideIn 0.2s ease-out"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:a?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:a?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:a?"#e2e8f0":"#1e293b",marginBottom:"2px"},userRole:{fontSize:"12px",color:a?"#94a3b8":"#64748b"},userStats:{borderTop:a?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between"},statItem:{textAlign:"center"},statNumber:{fontSize:"14px",fontWeight:"700",color:a?"#e2e8f0":"#1e293b"},statLabel:{fontSize:"10px",color:a?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px",width:"100%",textAlign:"center"},modeToggle:{display:"flex",gap:"8px",marginBottom:"24px",backgroundColor:a?"rgba(51,65,85,0.3)":"rgba(241,245,249,0.8)",padding:"6px",borderRadius:"14px",width:"fit-content",backdropFilter:"blur(10px)",border:a?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},modeButton:G=>({padding:"10px 18px",borderRadius:"10px",border:"none",backgroundColor:G?"#3b82f6":"transparent",color:G?"#fff":a?"#e2e8f0":"#64748b",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"6px"}),formCard:{backgroundColor:a?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"32px",boxShadow:a?"0 12px 30px rgba(0,0,0,0.35)":"0 12px 30px rgba(0,0,0,0.12)",backdropFilter:"blur(20px)",marginBottom:"24px",animation:"slideIn 0.25s ease-out",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},sectionTitle:{fontSize:"20px",fontWeight:"800",letterSpacing:"-0.3px",color:a?"#e2e8f0":"#1e293b",marginBottom:"24px"},fieldGroup:{marginBottom:"20px"},label:{fontSize:"14px",fontWeight:"600",color:a?"#d1d5db":"#374151",marginBottom:"8px",display:"block"},input:{width:"100%",padding:"12px 16px",borderRadius:"12px",border:a?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:a?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:a?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",backdropFilter:"blur(10px)",transition:"all 0.3s ease",outline:"none",boxSizing:"border-box"},customFieldCard:{backgroundColor:a?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",padding:"16px",marginBottom:"12px"},customFieldHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},deleteButton:G=>({padding:"4px",borderRadius:"6px",border:"none",backgroundColor:G?"rgba(239,68,68,0.1)":"transparent",color:G?"#ef4444":a?"#94a3b8":"#64748b",cursor:"pointer"}),addButton:G=>({padding:"12px 20px",borderRadius:"12px",border:"none",backgroundColor:G?"#2563eb":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transform:G?"translateY(-2px) scale(1.05)":"translateY(0)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:G?"0 8px 25px rgba(37,99,235,0.25)":"0 4px 12px rgba(0,0,0,0.08)"}),saveButton:G=>({width:"100%",padding:"16px 24px",borderRadius:"12px",border:"none",backgroundColor:G?"#059669":"#10b981",color:"#fff",fontSize:"16px",fontWeight:"700",cursor:"pointer",marginTop:"32px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transform:G?"translateY(-2px) scale(1.05)":"translateY(0)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:G?"0 10px 30px rgba(16,185,129,0.35)":"0 6px 18px rgba(0,0,0,0.15)"}),infoBox:{marginTop:"20px",padding:"12px 16px",borderRadius:"8px",backgroundColor:a?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)",fontSize:"13px",color:a?"#93c5fd":"#3b82f6"}};return p?n.jsx("div",{style:K.page,children:n.jsx("div",{style:{textAlign:"center",padding:"60px",color:a?"#94a3b8":"#64748b"},children:"Loading plan data..."})}):n.jsxs("div",{style:K.page,children:[n.jsxs("div",{style:K.header,children:[n.jsxs("div",{style:K.headerLeft,children:[n.jsx("button",{style:K.button(i==="back"),onMouseEnter:()=>e("back"),onMouseLeave:()=>e(null),onClick:N,children:n.jsx(Pi,{size:20})}),n.jsx("h1",{style:K.title,children:"Edit Individual Plan"})]}),n.jsxs("div",{style:K.headerRight,children:[n.jsxs("button",{style:K.button(i==="alerts"),onMouseEnter:()=>e("alerts"),onMouseLeave:()=>e(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(lr,{size:20}),n.jsx("div",{style:K.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:K.button(i==="profile"),onMouseEnter:()=>{e("profile"),r(!0)},onMouseLeave:()=>e(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Yt,{size:20})}),t&&c&&n.jsxs("div",{style:K.profileTooltip,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[n.jsx("div",{style:K.tooltipArrow}),n.jsxs("div",{style:K.userInfo,children:[n.jsx("div",{style:K.avatar,children:`${((Te=c.firstName)==null?void 0:Te[0])||""}${((Ne=c.lastName)==null?void 0:Ne[0])||""}`.toUpperCase()}),n.jsxs("div",{style:K.userDetails,children:[n.jsxs("div",{style:K.userName,children:[c.firstName||"Unknown"," ",c.lastName||"User"]}),n.jsxs("div",{style:K.userRole,children:[c.role==="admin"?"Admin":"Member"," ",c.department||"N/A"]})]})]}),n.jsxs("div",{style:K.userStats,children:[n.jsxs("div",{style:K.statItem,children:[n.jsx("div",{style:K.statNumber,children:S.length}),n.jsx("div",{style:K.statLabel,children:"Plans"})]}),n.jsxs("div",{style:K.statItem,children:[n.jsx("div",{style:K.statNumber,children:S.filter(G=>G.status==="Ongoing").length}),n.jsx("div",{style:K.statLabel,children:"Ongoing"})]}),n.jsxs("div",{style:K.statItem,children:[n.jsx("div",{style:K.statNumber,children:S.filter(G=>G.status==="Completed").length}),n.jsx("div",{style:K.statLabel,children:"Completed"})]})]}),n.jsx("button",{style:K.themeToggle,onClick:me,children:a?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsxs("div",{style:K.modeToggle,children:[n.jsxs("button",{style:K.modeButton(b==="structure"),onClick:()=>L("structure"),children:[n.jsx(uo,{size:16}),"Structure (Timeline)"]}),n.jsxs("button",{style:K.modeButton(b==="weekly"),onClick:()=>L("weekly"),children:[n.jsx(Mi,{size:16}),"Weekly Execution"]})]}),b==="structure"&&n.jsxs("div",{style:K.formCard,children:[n.jsx("h3",{style:K.sectionTitle,children:"Edit Plan Structure"}),n.jsxs("div",{style:K.fieldGroup,children:[n.jsx("label",{style:K.label,children:"Project"}),n.jsx("input",{type:"text",style:{...K.input,opacity:.7,cursor:"not-allowed"},value:ce.assignedProject,disabled:!0})]}),n.jsx("div",{style:K.fieldGroup,children:n.jsx(Vt,{label:"Your Role",value:ce.role,onChange:G=>Q({...ce,role:G}),options:["Frontend Developer","Backend Developer","Full Stack Developer","QA Engineer","Project Manager","Designer"],allowCustom:!0,searchable:!0,isDarkMode:a,compact:!0})}),n.jsxs("div",{style:K.fieldGroup,children:[n.jsx("label",{style:K.label,children:"Start Date"}),n.jsx(en,{value:ce.startDate,onChange:G=>Q({...ce,startDate:G}),isDarkMode:a,compact:!0})]}),n.jsxs("div",{style:K.fieldGroup,children:[n.jsx("label",{style:K.label,children:"End Date"}),n.jsx(en,{value:ce.endDate,onChange:G=>Q({...ce,endDate:G}),isDarkMode:a,compact:!0})]}),n.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",color:a?"#d1d5db":"#374151",marginTop:"32px",marginBottom:"16px"},children:"Milestones"}),V.map(G=>n.jsxs("div",{style:K.customFieldCard,children:[n.jsxs("div",{style:K.customFieldHeader,children:[n.jsx("div",{style:{fontWeight:"600",color:a?"#e2e8f0":"#374151"},children:G.name}),n.jsx("button",{style:K.deleteButton(i===`remove-${G.id}`),onMouseEnter:()=>e(`remove-${G.id}`),onMouseLeave:()=>e(null),onClick:()=>H(G.id),children:n.jsx(Pr,{size:16})})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[n.jsx(en,{value:G.startDate,onChange:W=>M(G.id,"startDate",W),isDarkMode:a,compact:!0}),n.jsx(en,{value:G.endDate,onChange:W=>M(G.id,"endDate",W),isDarkMode:a,compact:!0})]})]},G.id)),n.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"16px"},children:[n.jsx("input",{type:"text",style:K.input,value:ue,onChange:G=>we(G.target.value),placeholder:"New milestone name"}),n.jsxs("button",{style:K.addButton(i==="add-field"),onMouseEnter:()=>e("add-field"),onMouseLeave:()=>e(null),onClick:be,children:[n.jsx(yn,{size:16}),"Add"]})]})]}),b==="weekly"&&n.jsxs("div",{style:K.formCard,children:[n.jsx("h3",{style:K.sectionTitle,children:"Edit Weekly Allocations"}),n.jsxs("p",{style:{fontSize:"14px",color:a?"#94a3b8":"#64748b",marginBottom:"24px"},children:["Manage your weekly time allocations for this project. Recommended: ",ge,"h per week."]}),le.map((G,W)=>n.jsxs("div",{style:{...K.customFieldCard,padding:"20px",marginBottom:"16px"},children:[n.jsxs("div",{style:K.customFieldHeader,children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontWeight:"600",color:a?"#e2e8f0":"#374151",fontSize:"15px"},children:["Week ",W+1]}),n.jsx("div",{style:{fontSize:"12px",color:a?"#94a3b8":"#64748b",marginTop:"2px"},children:G.weekStart&&G.weekEnd?`${new Date(G.weekStart).toLocaleDateString()} - ${new Date(G.weekEnd).toLocaleDateString()}`:"Dates not set"})]}),n.jsx("button",{style:K.deleteButton(i===`remove-week-${G.id}`),onMouseEnter:()=>e(`remove-week-${G.id}`),onMouseLeave:()=>e(null),onClick:()=>_(G.id),children:n.jsx(Pr,{size:16})})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{...K.label,fontSize:"12px",marginBottom:"6px"},children:"Start Date"}),n.jsx(en,{value:G.weekStart,onChange:j=>Y(G.id,j),isDarkMode:a,compact:!0})]}),n.jsxs("div",{children:[n.jsx("label",{style:{...K.label,fontSize:"12px",marginBottom:"6px"},children:"End Date"}),n.jsx(en,{value:G.weekEnd,onChange:j=>Fe(G.id,"weekEnd",j),isDarkMode:a,compact:!0})]})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{...K.label,fontSize:"12px",marginBottom:"6px"},children:"Allocated Hours"}),n.jsx("input",{type:"number",style:{...K.input,fontWeight:"600",fontSize:"16px"},value:G.plannedHours,onChange:j=>Fe(G.id,"plannedHours",parseFloat(j.target.value)||0),placeholder:"0.0",min:"0",max:"80",step:"0.5"})]}),n.jsxs("div",{style:{marginBottom:"12px"},children:[n.jsx("label",{style:{...K.label,fontSize:"12px",marginBottom:"6px"},children:"Tasks"}),G.tasks.split(`
`).filter(j=>j.trim()).map((j,F)=>n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"6px",alignItems:"center"},children:[n.jsx("input",{type:"text",value:j,onChange:Xe=>{const B=G.tasks.split(`
`).filter(ee=>ee.trim());B[F]=Xe.target.value,Fe(G.id,"tasks",B.join(`
`))},style:{flex:1,padding:"8px 12px",borderRadius:"8px",border:a?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:a?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.8)",color:a?"#e2e8f0":"#1e293b",fontSize:"13px",outline:"none"}}),n.jsx("button",{style:{padding:"6px",borderRadius:"6px",border:"none",backgroundColor:i===`remove-task-${G.id}-${F}`?"rgba(239,68,68,0.1)":"transparent",color:i===`remove-task-${G.id}-${F}`?"#ef4444":a?"#94a3b8":"#64748b",cursor:"pointer",display:"flex",alignItems:"center"},onMouseEnter:()=>e(`remove-task-${G.id}-${F}`),onMouseLeave:()=>e(null),onClick:()=>{const Xe=G.tasks.split(`
`).filter(B=>B.trim());Xe.splice(F,1),Fe(G.id,"tasks",Xe.join(`
`))},children:n.jsx(X,{size:14})})]},F)),n.jsxs("button",{style:{...K.addButton(i===`add-task-${G.id}`),padding:"8px 14px",fontSize:"12px",marginTop:"8px"},onMouseEnter:()=>e(`add-task-${G.id}`),onMouseLeave:()=>e(null),onClick:()=>{const j=G.tasks?G.tasks.trim():"",F=j?`${j}
New task`:"New task";Fe(G.id,"tasks",F)},children:[n.jsx(yn,{size:12}),"Add Task"]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{...K.label,fontSize:"12px",marginBottom:"6px"},children:"Additional Notes (Optional)"}),n.jsx("textarea",{style:{...K.input,minHeight:"60px",resize:"vertical",fontStyle:"italic"},value:G.notes,onChange:j=>Fe(G.id,"notes",j.target.value),placeholder:"Any additional context or notes..."})]})]},G.id)),le.length>0&&n.jsxs("div",{style:{marginTop:"20px",marginBottom:"20px",padding:"16px",borderRadius:"12px",backgroundColor:(()=>{const W=le.reduce((j,F)=>j+(F.plannedHours||0),0)/le.length;return W>ge?"rgba(239,68,68,0.1)":Math.abs(W-ge)<1?"rgba(16,185,129,0.1)":a?"rgba(59,130,246,0.1)":"rgba(59,130,246,0.05)"})(),border:(()=>{const W=le.reduce((j,F)=>j+(F.plannedHours||0),0)/le.length;return W>ge?"1px solid rgba(239,68,68,0.3)":Math.abs(W-ge)<1?"1px solid rgba(16,185,129,0.3)":a?"1px solid rgba(59,130,246,0.3)":"1px solid rgba(59,130,246,0.2)"})()},children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:a?"#93c5fd":"#3b82f6",marginBottom:"8px"},children:"Summary"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:a?"#e2e8f0":"#1e293b"},children:[le.reduce((G,W)=>G+(W.plannedHours||0),0).toFixed(1),"h"]}),n.jsx("div",{style:{fontSize:"11px",color:a?"#94a3b8":"#64748b"},children:"Total Hours"})]}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:a?"#e2e8f0":"#1e293b"},children:[(le.reduce((G,W)=>G+(W.plannedHours||0),0)/le.length).toFixed(1),"h"]}),n.jsx("div",{style:{fontSize:"11px",color:a?"#94a3b8":"#64748b"},children:"Average per Week"})]})]})]}),n.jsxs("button",{style:K.addButton(i==="add-week"),onMouseEnter:()=>e("add-week"),onMouseLeave:()=>e(null),onClick:I,children:[n.jsx(yn,{size:16}),"Add Weekly Allocation"]}),n.jsxs("button",{style:K.addButton(i==="add-week"),onMouseEnter:()=>e("add-week"),onMouseLeave:()=>e(null),onClick:I,children:[n.jsx(yn,{size:16}),"Add Weekly Allocation"]}),n.jsxs("div",{style:K.infoBox,children:[" ",n.jsx("strong",{children:"Tip:"})," Plan Monday-Friday (",ge,"h) for standard work weeks, but you can use custom periods as needed."]})]}),n.jsxs("button",{style:K.saveButton(i==="save"),onMouseEnter:()=>e("save"),onMouseLeave:()=>e(null),onClick:D,children:[n.jsx(bi,{size:20}),"Save Changes"]})]})},lQ=()=>{const[i,e]=f.useState(null),[t,r]=f.useState(null),[a,A]=f.useState(!1),[c,u]=f.useState(!1),[p,m]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[h,y]=f.useState("Last 30 Days"),[b,L]=f.useState("All Projects"),[S,U]=f.useState(!1),[E,P]=f.useState(null),[O,ve]=f.useState(!1),[ce,Q]=f.useState(null),[V,Z]=f.useState(""),[le,$]=f.useState(""),[ue,we]=f.useState({firstName:"User",lastName:"Name",role:"member",department:"Department"}),[ge,te]=f.useState(["All Projects"]),[Me,ie]=f.useState("reports"),[me,N]=f.useState(!1),[be,H]=f.useState(!1),M=f.useRef(null),[I,_]=f.useState({top:64,left:0}),Fe=["Today","Last 7 Days","Last 30 Days","Last 3 Months","Last 6 Months","This Year","Custom"],Y=()=>{m(!p);try{localStorage.setItem("darkMode",(!p).toString())}catch{console.log("LocalStorage not available")}A(!1)},D=B=>B>=95&&B<=105?"#10b981":B>=90&&B<95?"#f59e0b":B>105?"#8b5cf6":"#ef4444",K=B=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:B?"rgba(59,130,246,0.1)":p?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:B?"#3b82f6":p?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:B?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:B?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}),Te=B=>({backgroundColor:p?"#374151":"#fff",borderRadius:"20px",padding:"24px",boxShadow:B?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:B?"translateY(-8px) scale(1.02)":"translateY(0) scale(1)",border:p?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),Ne=B=>{const ee=new Date;ee.setHours(0,0,0,0);let Pe,$e;switch(B){case"Today":Pe=$e=new Date(ee);break;case"Last 7 Days":Pe=new Date(ee),Pe.setDate(ee.getDate()-7),$e=new Date(ee);break;case"Last 30 Days":Pe=new Date(ee),Pe.setDate(ee.getDate()-30),$e=new Date(ee);break;case"Last 3 Months":Pe=new Date(ee),Pe.setMonth(ee.getMonth()-3),$e=new Date(ee);break;case"Last 6 Months":Pe=new Date(ee),Pe.setMonth(ee.getMonth()-6),$e=new Date(ee);break;case"This Year":Pe=new Date(ee.getFullYear(),0,1),$e=new Date(ee);break;default:Pe=$e=new Date(ee)}return{from:Pe.toISOString().split("T")[0],to:$e.toISOString().split("T")[0]}},G=async()=>{ve(!0),Q(null);try{const B=h==="Custom"?{from:V,to:le}:Ne(h);if(h==="Custom"&&(!V||!le)){Q("Please select both start and end dates for custom range"),ve(!1);return}const ee=new URLSearchParams({fromDate:B.from,toDate:B.to});b&&b!=="All Projects"&&ee.append("projectFilter",b),console.log("Fetching report with params:",ee.toString());const Pe=await ke(`/api/reports?${ee.toString()}`,{credentials:"include"});if(!Pe.ok)throw new Error("Failed to fetch report data");const $e=await Pe.json();console.log("Report data received:",$e),P($e),$e.availableProjects&&te($e.availableProjects)}catch(B){console.error("Error fetching report:",B),Q(B.message)}finally{ve(!1)}},W=()=>{U(!0),G(),setTimeout(()=>{U(!1)},1e3)},j=B=>{ie(B),N(!1),B==="team"?window.location.href="/adminteamcapacity":B==="utilization"&&(window.location.href="/adminutilization")},F=()=>{switch(Me){case"reports":return"Personal Reports";case"team":return"Team Capacity Summary";case"utilization":return"Utilization Overview";default:return"Personal Reports"}};f.useEffect(()=>{if(M.current&&me){const B=M.current.getBoundingClientRect();_({top:B.bottom+4,left:B.left})}},[me]),f.useEffect(()=>{const B=ee=>{M.current&&!M.current.contains(ee.target)&&N(!1)};return me&&document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[me]),f.useEffect(()=>{(async()=>{try{const ee=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ee.ok){const Pe=await ee.json();we(Pe)}}catch(ee){console.error("Error fetching user profile:",ee)}})()},[]),f.useEffect(()=>{G()},[]),f.useEffect(()=>{h!=="Custom"&&G()},[h,b]),f.useEffect(()=>{const B=document.createElement("style");return B.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.8; }
      }
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      .floating {
        animation: float 3s ease-in-out infinite;
      }
    `,document.head.appendChild(B),()=>document.head.removeChild(B)},[]);const Xe=(B,ee)=>B?!ee||ee.trim()===""?B[0].toUpperCase():`${B[0]}${ee[0]}`.toUpperCase():"?";return n.jsxs("div",{style:{minHeight:"100vh",padding:"30px",background:p?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"32px",position:"relative"},children:[n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:n.jsxs("div",{ref:M,style:{fontSize:"18px",fontWeight:"700",cursor:(ue==null?void 0:ue.role)==="admin"?"pointer":"default",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",userSelect:"none",padding:"8px 0",color:p?"#e2e8f0":"#1e293b"},onClick:()=>(ue==null?void 0:ue.role)==="admin"&&N(B=>!B),onMouseEnter:()=>(ue==null?void 0:ue.role)==="admin"&&H(!0),onMouseLeave:()=>H(!1),className:(ue==null?void 0:ue.role)==="admin"?"floating":"",children:[n.jsx("span",{style:{fontSize:"28px",fontWeight:"700",color:p?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:F()}),(ue==null?void 0:ue.role)==="admin"&&n.jsx(ko,{size:20,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:me||be?"rotate(-90deg) scale(1.1)":"rotate(0deg) scale(1)",color:me||be?"#3b82f6":p?"#94a3b8":"#64748b"}})]})}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[n.jsxs("button",{style:K(t==="alerts"),onMouseEnter:()=>r("alerts"),onMouseLeave:()=>r(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(lr,{size:20}),n.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"}})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:K(t==="profile"),onMouseEnter:()=>{r("profile"),A(!0)},onMouseLeave:()=>r(null),onClick:()=>window.location.href="/adminprofile",children:n.jsx(Yt,{size:20})}),a&&ue&&n.jsxs("div",{style:{position:"absolute",top:"60px",right:"0",backgroundColor:p?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:p?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out"},onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[n.jsx("div",{style:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:p?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:p?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"}}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[n.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},children:Xe(ue.firstName,ue.lastName)}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:p?"#e2e8f0":"#1e293b"},children:[ue.firstName," ",ue.lastName||""]}),n.jsxs("div",{style:{fontSize:"12px",color:p?"#94a3b8":"#64748b"},children:[ue.role==="admin"?"Admin":"Member","  ",ue.department]})]})]}),n.jsx("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",width:"100%"},onClick:Y,children:p?" Light Mode":" Dark Mode"})]})]})]})]}),(ue==null?void 0:ue.role)==="admin"&&me&&n.jsx("div",{style:{position:"fixed",top:I.top,left:I.left,zIndex:999,backgroundColor:p?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0,0,0,0.15)",padding:"12px 0",minWidth:"220px",border:p?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",animation:"slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transition:"all 0.3s ease"},onMouseDown:B=>B.stopPropagation(),onClick:B=>B.stopPropagation(),children:n.jsx("div",{children:["reports","team","utilization"].map((B,ee)=>n.jsx("div",{style:{backgroundColor:t===`section-${ee}`?"rgba(59,130,246,0.1)":"transparent",padding:"14px 20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",whiteSpace:"nowrap",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:"8px",margin:"0 8px",color:p?"#e2e8f0":"#374151",transform:t===`section-${ee}`?"translateX(4px)":"translateX(0)",borderLeft:t===`section-${ee}`?"3px solid #3b82f6":"3px solid transparent",pointerEvents:"auto",userSelect:"none"},onClick:Pe=>{Pe.preventDefault(),Pe.stopPropagation(),j(B)},onMouseDown:Pe=>{Pe.preventDefault(),Pe.stopPropagation()},onMouseEnter:()=>r(`section-${ee}`),onMouseLeave:()=>r(null),children:B==="reports"?"Personal Reports":B==="team"?"Team Capacity":"Utilization Overview"},B))})}),ce&&n.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(239,68,68,0.1)",border:"1px solid rgba(239,68,68,0.3)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",color:"#ef4444"},children:[n.jsx(lo,{size:20}),n.jsx("span",{children:ce})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",marginBottom:"32px",flexWrap:"wrap"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(uo,{size:20,style:{color:p?"#94a3b8":"#64748b"}}),n.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:p?"#e2e8f0":"#1e293b"},children:"Date Range:"}),n.jsx(Vt,{value:h,onChange:B=>y(B),options:Fe,placeholder:"Select date range...",isDarkMode:p,compact:!0})]}),h==="Custom"&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"date",value:V,onChange:B=>Z(B.target.value),style:{padding:"12px 16px",borderRadius:"12px",border:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:p?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:p?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none"}}),n.jsx("span",{style:{color:p?"#94a3b8":"#64748b"},children:"to"}),n.jsx("input",{type:"date",value:le,onChange:B=>$(B.target.value),style:{padding:"12px 16px",borderRadius:"12px",border:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",backgroundColor:p?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",color:p?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",outline:"none"}})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(Xh,{size:20,style:{color:p?"#94a3b8":"#64748b"}}),n.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:p?"#e2e8f0":"#1e293b"},children:"Project:"}),n.jsx(Vt,{value:b,onChange:B=>L(B),options:ge,placeholder:"Select project...",isDarkMode:p,searchable:ge.length>5,compact:!0})]}),n.jsxs("button",{style:{padding:"12px 24px",borderRadius:"12px",border:"none",backgroundColor:S?"#6b7280":i==="generate"?"#2563eb":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:S?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",transform:i==="generate"&&!S?"translateY(-2px)":"translateY(0)",boxShadow:i==="generate"&&!S?"0 8px 25px rgba(59,130,246,0.3)":"0 4px 12px rgba(59,130,246,0.2)"},onMouseEnter:()=>!S&&e("generate"),onMouseLeave:()=>e(null),onClick:W,disabled:S,children:[n.jsx(ki,{size:16,style:{animation:S?"spin 1s linear infinite":"none"}}),S?"Generating...":"Generate"]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px",marginBottom:"32px"},children:[n.jsxs("div",{style:Te(t==="stat1"),onMouseEnter:()=>r("stat1"),onMouseLeave:()=>r(null),children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[n.jsxs("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(16,185,129,0.1)",color:"#10b981",position:"relative"},children:[n.jsx(sb,{size:24}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx(rb,{size:14,style:{position:"absolute",top:"-30px",right:"-8px",cursor:"pointer",opacity:.6},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)}),c&&n.jsxs("div",{style:{position:"absolute",bottom:"40px",right:"-50px",backgroundColor:p?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"8px",boxShadow:"0 8px 16px rgba(0,0,0,0.15)",padding:"12px",minWidth:"200px",border:p?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out"},children:[n.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:p?"#e2e8f0":"#1e293b",marginBottom:"6px"},children:"Accuracy Formula:"}),n.jsx("div",{style:{fontSize:"11px",color:p?"#94a3b8":"#64748b",fontFamily:"monospace"},children:"(Actuals / Planned)  100"}),n.jsx("div",{style:{fontSize:"10px",color:p?"#94a3b8":"#64748b",marginTop:"6px",fontStyle:"italic"},children:"Optimal: 95-105%"})]})]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:"800",color:p?"#e2e8f0":"#1e293b"},children:E?`${E.summary.accuracy}%`:O?"...":"N/A"}),n.jsx("div",{style:{fontSize:"14px",color:p?"#94a3b8":"#64748b"},children:"Actuals vs Planned"})]})]}),n.jsx("div",{style:{width:"100%",height:"6px",backgroundColor:p?"#4b5563":"#f1f5f9",borderRadius:"3px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${E?Math.min(parseFloat(E.summary.accuracy),100):0}%`,height:"100%",backgroundColor:D(E?parseFloat(E.summary.accuracy):0),borderRadius:"3px",transition:"width 0.8s ease"}})})]}),n.jsx("div",{style:Te(t==="stat2"),onMouseEnter:()=>r("stat2"),onMouseLeave:()=>r(null),children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[n.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6"},children:n.jsx(Mi,{size:24})}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:"800",color:p?"#e2e8f0":"#1e293b"},children:E?`${E.individualPlans.total}h`:O?"...":"N/A"}),n.jsx("div",{style:{fontSize:"14px",color:p?"#94a3b8":"#64748b"},children:"Total Planned Hours"})]})]})}),n.jsx("div",{style:Te(t==="stat3"),onMouseEnter:()=>r("stat3"),onMouseLeave:()=>r(null),children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[n.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(245,158,11,0.1)",color:"#f59e0b"},children:n.jsx(DA,{size:24})}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:"800",color:p?"#e2e8f0":"#1e293b"},children:E?`${E.actuals.total}h`:O?"...":"N/A"}),n.jsx("div",{style:{fontSize:"14px",color:p?"#94a3b8":"#64748b"},children:"Total Actual Hours"})]})]})}),n.jsx("div",{style:Te(t==="stat4"),onMouseEnter:()=>r("stat4"),onMouseLeave:()=>r(null),children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[n.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(139,92,246,0.1)",color:"#8b5cf6"},children:n.jsx(Er,{size:24})}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"24px",fontWeight:"800",color:(E==null?void 0:E.summary.difference)>=0?"#10b981":"#ef4444"},children:E?`${E.summary.difference>=0?"+":""}${E.summary.difference}h`:O?"...":"N/A"}),n.jsx("div",{style:{fontSize:"14px",color:p?"#94a3b8":"#64748b"},children:"Difference"})]})]})})]}),n.jsx("div",{style:{marginBottom:"32px"},children:n.jsxs("div",{style:Te(t==="chart"),onMouseEnter:()=>r("chart"),onMouseLeave:()=>r(null),children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[n.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:p?"#e2e8f0":"#1e293b",margin:0},children:"Capacity Utilization Overview"}),n.jsx(pd,{size:20,style:{color:"#10b981"}})]}),O?n.jsx("div",{style:{height:"400px",display:"flex",alignItems:"center",justifyContent:"center",color:p?"#94a3b8":"#64748b"},children:n.jsx(ki,{size:32,style:{animation:"spin 1s linear infinite"}})}):!E||!E.capacityByMonth||E.capacityByMonth.length===0?n.jsxs("div",{style:{height:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:p?"#94a3b8":"#64748b",gap:"12px"},children:[n.jsx(lo,{size:48,style:{opacity:.5}}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"600"},children:"No data available"}),n.jsx("div",{style:{fontSize:"14px",opacity:.7},children:"Try adjusting your date range or project filter"})]}):n.jsxs("div",{style:{height:"400px",position:"relative"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"end",justifyContent:"space-between",height:"320px",padding:"0 40px 20px 40px",borderBottom:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)",position:"relative"},children:[n.jsxs("div",{style:{position:"absolute",left:"0",top:"0",height:"300px",display:"flex",flexDirection:"column",justifyContent:"space-between",fontSize:"12px",color:p?"#94a3b8":"#64748b"},children:[n.jsx("span",{children:"200h"}),n.jsx("span",{children:"150h"}),n.jsx("span",{children:"100h"}),n.jsx("span",{children:"50h"}),n.jsx("span",{children:"0h"})]}),E.capacityByMonth.map((B,ee)=>n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",flex:1,position:"relative"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"end",gap:"6px",height:"280px",position:"relative"},children:[n.jsx("div",{style:{width:"24px",height:`${B.planned/200*260}px`,backgroundColor:"#3b82f6",borderRadius:"6px 6px 0 0",transition:"all 0.5s ease",transform:t==="chart"?"scaleY(1.02)":"scaleY(1)",opacity:t==="chart"?.9:.8,position:"relative"},title:`Planned: ${B.planned}h`,children:n.jsxs("div",{style:{position:"absolute",top:"-25px",left:"50%",transform:"translateX(-50%)",fontSize:"10px",color:"#3b82f6",fontWeight:"600",whiteSpace:"nowrap"},children:[B.planned,"h"]})}),n.jsx("div",{style:{width:"24px",height:`${B.actual/200*260}px`,backgroundColor:D(B.efficiency),borderRadius:"6px 6px 0 0",transition:"all 0.5s ease",transform:t==="chart"?"scaleY(1.02)":"scaleY(1)",position:"relative"},title:`Actual: ${B.actual}h`,children:n.jsxs("div",{style:{position:"absolute",top:"-25px",left:"50%",transform:"translateX(-50%)",fontSize:"10px",color:D(B.efficiency),fontWeight:"600",whiteSpace:"nowrap"},children:[B.actual,"h"]})})]}),n.jsxs("div",{style:{position:"absolute",bottom:"30px",left:"50%",transform:"translateX(-50%)",fontSize:"11px",fontWeight:"700",color:D(B.efficiency),backgroundColor:p?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",padding:"4px 8px",borderRadius:"12px",border:`1px solid ${D(B.efficiency)}20`},children:[B.efficiency,"%"]}),n.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:p?"#94a3b8":"#64748b"},children:B.month})]},`${B.month}-${B.year}`))]}),n.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"32px",marginTop:"20px",padding:"16px",backgroundColor:p?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.5)",borderRadius:"12px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:"#3b82f6",borderRadius:"4px"}}),n.jsx("span",{style:{fontSize:"13px",color:p?"#94a3b8":"#64748b",fontWeight:"500"},children:"Planned Hours"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:"16px",height:"16px",background:"linear-gradient(90deg, #10b981 0%, #f59e0b 50%, #ef4444 100%)",borderRadius:"4px"}}),n.jsx("span",{style:{fontSize:"13px",color:p?"#94a3b8":"#64748b",fontWeight:"500"},children:"Actual Hours (Color = Efficiency)"})]})]})]})]})}),n.jsxs("div",{style:Te(t==="table"),onMouseEnter:()=>r("table"),onMouseLeave:()=>r(null),children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[n.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:p?"#e2e8f0":"#1e293b",margin:0},children:"Project Performance"}),n.jsxs("button",{style:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:i==="download"?"#2563eb":"#3b82f6",color:"#fff",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease"},onMouseEnter:()=>e("download"),onMouseLeave:()=>e(null),children:[n.jsx(tb,{size:14}),"Export"]})]}),O?n.jsx("div",{style:{padding:"60px",display:"flex",alignItems:"center",justifyContent:"center",color:p?"#94a3b8":"#64748b"},children:n.jsx(ki,{size:32,style:{animation:"spin 1s linear infinite"}})}):!E||!E.projectPerformance||E.projectPerformance.length===0?n.jsxs("div",{style:{padding:"60px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:p?"#94a3b8":"#64748b",gap:"12px"},children:[n.jsx(lo,{size:48,style:{opacity:.5}}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"600"},children:"No project data available"}),n.jsx("div",{style:{fontSize:"14px",opacity:.7},children:b!=="All Projects"?"No data found for the selected project":"No master plans found in this date range"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{overflowX:"auto",borderRadius:"12px",border:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{backgroundColor:p?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)"},children:[n.jsx("th",{style:{padding:"16px",textAlign:"left",fontSize:"14px",fontWeight:"700",color:p?"#e2e8f0":"#374151",borderBottom:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Project"}),n.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:p?"#e2e8f0":"#374151",borderBottom:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Activity Type"}),n.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:p?"#e2e8f0":"#374151",borderBottom:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Planned Hours"}),n.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:p?"#e2e8f0":"#374151",borderBottom:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Spent Hours"}),n.jsx("th",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:p?"#e2e8f0":"#374151",borderBottom:p?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},children:"Efficiency"})]})}),n.jsx("tbody",{children:E.projectPerformance.map((B,ee)=>n.jsxs("tr",{style:{backgroundColor:i===`row-${ee}`?p?"rgba(59,130,246,0.05)":"rgba(59,130,246,0.02)":"transparent",transition:"all 0.2s ease"},onMouseEnter:()=>e(`row-${ee}`),onMouseLeave:()=>e(null),children:[n.jsx("td",{style:{padding:"16px",fontSize:"14px",fontWeight:"600",color:p?"#e2e8f0":"#374151",borderBottom:p?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:B.project}),n.jsx("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",color:p?"#94a3b8":"#64748b",borderBottom:p?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:n.jsx("span",{style:{padding:"4px 8px",borderRadius:"6px",backgroundColor:p?"rgba(75,85,99,0.3)":"rgba(226,232,240,0.3)",fontSize:"12px",fontWeight:"500"},children:B.activityType})}),n.jsxs("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"600",color:"#3b82f6",borderBottom:p?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:[B.plannedHours,"h"]}),n.jsxs("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"600",color:D(B.efficiency),borderBottom:p?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:[B.spentHours,"h"]}),n.jsx("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",fontWeight:"700",color:D(B.efficiency),borderBottom:p?"1px solid rgba(75,85,99,0.1)":"1px solid rgba(226,232,240,0.3)"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[B.efficiency,"%",n.jsx("div",{style:{width:"40px",height:"4px",backgroundColor:p?"#4b5563":"#f1f5f9",borderRadius:"2px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${Math.min(B.efficiency,100)}%`,height:"100%",backgroundColor:D(B.efficiency),borderRadius:"2px",transition:"width 0.5s ease"}})})]})})]},ee))})]})}),n.jsxs("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:p?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.8)",borderRadius:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{fontSize:"14px",color:p?"#94a3b8":"#64748b"},children:["Showing ",E.projectPerformance.length," of ",E.projectPerformance.length," projects"]}),n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"16px",fontSize:"14px",fontWeight:"600"},children:n.jsxs("span",{style:{color:p?"#e2e8f0":"#374151"},children:["Total: ",E.projectPerformance.reduce((B,ee)=>B+ee.plannedHours,0).toFixed(1),"h planned, ",E.projectPerformance.reduce((B,ee)=>B+ee.spentHours,0).toFixed(1),"h spent"]})})]})]})]})]})},cQ=()=>{var qt,He,bn,at;const[i,e]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[t,r]=f.useState(""),[a,A]=f.useState("All Roles"),[c,u]=f.useState("All Departments"),[p,m]=f.useState("table"),[h,y]=f.useState(!1),[b,L]=f.useState([]),[S,U]=f.useState(!1),[E,P]=f.useState(!1),[O,ve]=f.useState(null),[ce,Q]=f.useState(null),[V,Z]=f.useState({}),[le,$]=f.useState(null),[ue,we]=f.useState(null),[ge,te]=f.useState(!1),[Me,ie]=f.useState(!1),[me,N]=f.useState([]),[be,H]=f.useState(""),[M,I]=f.useState(""),[_,Fe]=f.useState({}),[Y,D]=f.useState([]),[K,Te]=f.useState([]),[Ne,G]=f.useState(!1),[W,j]=f.useState({x:0,y:0}),[F,Xe]=f.useState(null),B=f.useRef(null),[ee,Pe]=f.useState([]),[$e,kt]=f.useState(!1),[pt,Ut]=f.useState(null),Lt=(k,v)=>k?!v||v.trim()===""?k[0].toUpperCase():`${k[0]}${v[0]}`.toUpperCase():"?",se=["DTO","P&A","PPC","Finance","A&I","Marketing"],[Tt,ne]=f.useState(!0);f.useEffect(()=>{(async()=>{try{const v=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(v.ok){const Ae=await v.json();if(Ae.role!=="admin"){window.location.href="/admindashboard";return}Ut(Ae)}else{window.location.href="/";return}}catch(v){console.error("Failed to verify access",v),window.location.href="/";return}finally{ne(!1)}})()},[]);const fe=async()=>{te(!0),H("");try{const k=await ke("/users",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(k.ok){const v=await k.json();N(v),console.log("Users fetched successfully:",v)}else if(k.status===401)H("Authentication required. Please log in.");else{const v=await k.json();H(v.message||"Failed to fetch users")}}catch(k){console.error("Error fetching users:",k),H("Network error. Please check your connection.")}finally{te(!1)}};f.useEffect(()=>{(async()=>{kt(!0);try{const v=await ke("/api/manictime-admin/subscriptions",{credentials:"include"});if(v.ok){const Ae=await v.json();Pe(Ae)}}catch(v){console.error("Error fetching subscriptions:",v)}finally{kt(!1)}})()},[]),f.useEffect(()=>{fe()},[]),f.useEffect(()=>{if(!E||!V.department){D([]);return}G(!0),ke("/api/ai/admin/structure",{credentials:"include"}).then(k=>k.json()).then(k=>{var Ue;const v=k.domains.find(et=>et.name===V.department),Ae=v?v.contexts:[];if(D(Ae),(Ue=ce==null?void 0:ce.projects)!=null&&Ue.length){const et=ce.projects.map(Ke=>Ke.id);Te(Ae.filter(Ke=>et.includes(Ke.id)).map(Ke=>Ke.id))}else Te([])}).finally(()=>G(!1))},[E,V.department]);const Qe=k=>{ve(k),U(!0)},w=k=>{var v;Q(k),Z({...k}),(v=k.projects)!=null&&v.length?Te(k.projects.map(Ae=>Ae.id)):Te([]),Fe({}),P(!0)},qe=()=>{var v,Ae;const k={};return(v=V.firstName)!=null&&v.trim()||(k.firstName="First name is required"),(Ae=V.email)!=null&&Ae.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(V.email)||(k.email="Please enter a valid email"):k.email="Email is required",V.department||(k.department="Department is required"),V.phoneNumber&&!/^[689]\d{7}$/.test(V.phoneNumber)&&(k.phoneNumber="Phone number must start with 6, 8, or 9 and be 8 digits long"),Fe(k),Object.keys(k).length===0},ft=async()=>{try{const k=await ke(`/users/${O}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(k.ok){const v=await k.json();N(Ae=>Ae.filter(Ue=>Ue.id!==O)),I("User deleted successfully"),setTimeout(()=>I(""),3e3),console.log("User deleted successfully:",v)}else{const v=await k.json();H(v.message||"Failed to delete user"),setTimeout(()=>H(""),5e3)}}catch(k){console.error("Error deleting user:",k),H("Network error. Please try again."),setTimeout(()=>H(""),5e3)}finally{U(!1),ve(null)}},Et=async()=>{if(qe())try{const k=await ke(`/users/${ce.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(k.ok){await ke(`/api/ai/context-clear/${ce.id}`,{method:"DELETE",credentials:"include"});for(const v of K)await ke("/api/ai/context-assign",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:ce.id,contextId:v})});await fe(),I("User updated successfully"),setTimeout(()=>I(""),3e3),P(!1),Q(null),Z({}),Fe({})}else{const v=await k.json();H(v.message||"Failed to update user"),setTimeout(()=>H(""),5e3)}}catch{H("Network error. Please try again."),setTimeout(()=>H(""),5e3)}},pe=(k,v)=>{Z(Ae=>({...Ae,[k]:v})),_[k]&&Fe(Ae=>({...Ae,[k]:""}))},R=()=>{window.location.href="/addusers"},Ce=me.filter(k=>{const v=`${k.firstName} ${k.lastName}`.toLowerCase().includes(t.toLowerCase())||k.email.toLowerCase().includes(t.toLowerCase())||k.department.toLowerCase().includes(t.toLowerCase()),Ae=a==="All Roles"||k.role===a,Ue=c==="All Departments"||k.department;return v&&Ae&&Ue}),re=(pt==null?void 0:pt.role)==="admin"?[{label:"Users",value:me.length},{label:"Admins",value:me.filter(k=>k.role==="admin").length},{label:"Approvers",value:me.filter(k=>k.isApprover).length}]:[{label:"Projects",value:pt!=null&&pt.project?1:0},{label:"Hours",value:(pt==null?void 0:pt.totalHours)??""},{label:"Capacity",value:pt!=null&&pt.capacity?`${pt.capacity}%`:""}],xe=[...new Set(me.map(k=>k.department))],Ze=[{label:"Total Users",value:me.length,icon:Er,color:"#3b82f6",gradient:"from-blue-500 to-blue-600"},{label:"Admins",value:me.filter(k=>k.role==="admin").length,icon:hs,color:"#8b5cf6",gradient:"from-purple-500 to-purple-600"},{label:"Members",value:me.filter(k=>k.role==="member").length,icon:Yt,color:"#10b981",gradient:"from-emerald-500 to-emerald-600"},{label:"Departments",value:xe.length,icon:cs,color:"#f59e0b",gradient:"from-amber-500 to-amber-600"}],J={page:{minHeight:"100vh",padding:"30px",background:i?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"36px"},title:{fontSize:"32px",fontWeight:"700",color:i?"#f1f5f9":"#1e293b",letterSpacing:"-0.5px"},headerActions:{display:"flex",gap:"12px",alignItems:"center"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"20px",marginBottom:"32px"},statCard:(k,v)=>({position:"relative",background:i?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.8)",borderRadius:"20px",padding:"28px",border:`2px solid ${k?v.color:"transparent"}`,boxShadow:k?`0 20px 40px ${v.color}30, 0 0 0 1px ${v.color}20`:"0 4px 20px rgba(0,0,0,0.08)",backdropFilter:"blur(20px)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:k?"translateY(-8px)":"translateY(0)",cursor:"pointer",overflow:"hidden"}),statIconContainer:k=>({width:"56px",height:"56px",borderRadius:"16px",background:`linear-gradient(135deg, ${k.color} 0%, ${k.color}dd 100%)`,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px",boxShadow:`0 8px 24px ${k.color}40`}),statContent:{position:"relative",zIndex:1},statNumber:{fontSize:"40px",fontWeight:"800",color:i?"#f1f5f9":"#1e293b",lineHeight:1,marginBottom:"8px",letterSpacing:"-1px"},statLabel:{fontSize:"13px",fontWeight:"600",color:i?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},statDecoration:(k,v)=>({position:"absolute",top:"-20px",right:"-20px",width:"120px",height:"120px",borderRadius:"50%",background:`radial-gradient(circle, ${k.color}15 0%, transparent 70%)`,opacity:v?1:.5,transition:"opacity 0.4s ease"}),controlsCard:{position:"relative",background:i?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.8)",borderRadius:"20px",padding:"28px",marginBottom:"28px",border:i?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.6)",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",backdropFilter:"blur(20px)",transition:"all 0.3s ease"},controlsTop:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},searchContainer:{position:"relative",flex:1,minWidth:"320px"},searchInput:{width:"100%",padding:"16px 20px 16px 52px",borderRadius:"14px",border:i?"2px solid rgba(75,85,99,0.3)":"2px solid rgba(226,232,240,0.5)",backgroundColor:i?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#1e293b",fontSize:"15px",fontWeight:"500",outline:"none",transition:"all 0.3s ease",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},searchIcon:{position:"absolute",left:"18px",top:"50%",transform:"translateY(-50%)",color:i?"#94a3b8":"#64748b"},filterButton:k=>({padding:"16px 24px",borderRadius:"14px",border:"none",background:k?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":i?"rgba(51,65,85,0.6)":"rgba(255,255,255,0.9)",color:k?"#fff":i?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"10px",fontWeight:"600",fontSize:"14px",boxShadow:k?"0 4px 16px rgba(59,130,246,0.3)":"0 2px 8px rgba(0,0,0,0.04)"}),tableCard:k=>({position:"relative",background:i?"rgba(55,65,81,0.6)":"rgba(255,255,255,0.8)",borderRadius:"20px",overflow:"hidden",border:i?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.6)",boxShadow:k?"0 20px 40px rgba(0,0,0,0.12)":"0 8px 32px rgba(0,0,0,0.08)",backdropFilter:"blur(20px)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:k?"translateY(-4px)":"translateY(0)"}),table:{width:"100%",borderCollapse:"collapse"},th:{textAlign:"left",background:i?"linear-gradient(to bottom, rgba(75,85,99,0.4), rgba(55,65,81,0.6))":"linear-gradient(to bottom, rgba(248,250,252,0.9), rgba(241,245,249,0.9))",padding:"20px 28px",fontSize:"12px",fontWeight:"700",color:i?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"1px",borderBottom:i?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},td:{padding:"20px 28px",fontSize:"15px",fontWeight:"500",color:i?"#e2e8f0":"#1f2937",borderBottom:i?"1px solid rgba(75,85,99,0.2)":"1px solid rgba(241,245,249,0.8)"},tableRow:k=>({transition:"all 0.2s ease",cursor:"pointer",background:k?i?"rgba(59,130,246,0.08)":"rgba(59,130,246,0.04)":"transparent"}),avatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},userName:{fontSize:"14px",fontWeight:"600",marginBottom:"4px",color:i?"#f1f5f9":"#1e293b"},userEmail:{fontSize:"13px",fontWeight:"500",color:i?"#94a3b8":"#64748b"},roleChip:k=>({padding:"6px 16px",borderRadius:"10px",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.3px",display:"inline-block",...k==="admin"&&{background:i?"linear-gradient(135deg, rgba(139,92,246,0.2) 0%, rgba(139,92,246,0.3) 100%)":"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",color:i?"#c4b5fd":"#92400e",boxShadow:i?"0 2px 8px rgba(139,92,246,0.3)":"0 2px 8px rgba(251,191,36,0.2)",border:i?"1px solid rgba(139,92,246,0.4)":"none"},...k==="member"&&{background:i?"linear-gradient(135deg, rgba(59,130,246,0.2) 0%, rgba(59,130,246,0.3) 100%)":"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",color:i?"#93c5fd":"#1e40af",boxShadow:i?"0 2px 8px rgba(59,130,246,0.3)":"0 2px 8px rgba(59,130,246,0.2)",border:i?"1px solid rgba(59,130,246,0.4)":"none"}}),iconButton:(k,v)=>({padding:"11px",borderRadius:"12px",border:"none",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",transform:v?"scale(1.1)":"scale(1)",...k==="edit"&&{backgroundColor:v?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.08)",color:"#3b82f6",boxShadow:v?"0 4px 12px rgba(59,130,246,0.25)":"none"},...k==="delete"&&{backgroundColor:v?"rgba(239,68,68,0.15)":"rgba(239,68,68,0.08)",color:"#ef4444",boxShadow:v?"0 4px 12px rgba(239,68,68,0.25)":"none"}}),actionButtons:{display:"flex",gap:"10px"},topButton:k=>({padding:"14px",borderRadius:"14px",border:"none",backgroundColor:k?"rgba(59,130,246,0.12)":i?"rgba(51,65,85,0.6)":"rgba(255,255,255,0.9)",color:k?"#3b82f6":i?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s ease",boxShadow:k?"0 8px 24px rgba(59,130,246,0.15)":"0 2px 8px rgba(0,0,0,0.04)",transform:k?"translateY(-2px)":"translateY(0)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}),notificationBadge:{position:"absolute",top:"10px",right:"10px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:i?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:i?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:i?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:i?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userDetails:{flex:1},userRole:{fontSize:"12px",color:i?"#94a3b8":"#64748b"},userStats:{borderTop:i?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"16px",marginTop:"12px",display:"flex",justifyContent:"space-between"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:i?"#e2e8f0":"#1e293b"},tooltipStatLabel:{fontSize:"10px",color:i?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},floatingAddButton:k=>({position:"fixed",bottom:"32px",right:"32px",width:"68px",height:"68px",borderRadius:"50%",border:"none",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",cursor:"pointer",boxShadow:k?"0 24px 48px rgba(59,130,246,0.4)":"0 12px 32px rgba(59,130,246,0.3)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:k?"translateY(-6px) scale(1.1) rotate(90deg)":"translateY(0) scale(1)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}),actionButton:(k,v)=>({padding:"14px 28px",borderRadius:"12px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"10px",transform:v?"translateY(-2px)":"translateY(0)",...k==="primary"&&{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",boxShadow:v?"0 12px 24px rgba(59,130,246,0.3)":"0 4px 12px rgba(59,130,246,0.2)"},...k==="secondary"&&{backgroundColor:i?"rgba(51,65,85,0.6)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#64748b",boxShadow:v?"0 8px 20px rgba(0,0,0,0.12)":"0 4px 12px rgba(0,0,0,0.06)"}}),modal:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,backdropFilter:"blur(8px)",animation:"fadeIn 0.3s ease-out"},modalContent:{backgroundColor:i?"#374151":"#fff",borderRadius:"24px",padding:"36px",maxWidth:"400px",width:"90%",boxShadow:"0 25px 50px rgba(0,0,0,0.3)",border:i?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(20px)",animation:"modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1)"},modalHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},modalTitle:{fontSize:"22px",fontWeight:"700",color:i?"#f1f5f9":"#1e293b"},modalText:{color:i?"#94a3b8":"#64748b",marginBottom:"28px",lineHeight:"1.6",fontSize:"15px"},modalActions:{display:"flex",gap:"12px",justifyContent:"flex-end"},select:{padding:"12px 16px",borderRadius:"10px",border:i?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:i?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",cursor:"pointer",transition:"all 0.3s ease"},editModalGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px",marginBottom:"28px"},editInput:{width:"100%",padding:"14px 16px",borderRadius:"10px",border:i?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:i?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",transition:"all 0.3s ease",fontFamily:'"Montserrat", sans-serif'},editLabel:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",marginBottom:"6px",display:"block",textTransform:"uppercase",letterSpacing:"0.5px"},errorMessage:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"#fff",padding:"18px 26px",borderRadius:"14px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"600",boxShadow:"0 12px 28px rgba(239,68,68,0.4)",zIndex:3e3,animation:"slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1)",maxWidth:"400px"},successMessage:{position:"fixed",top:"20px",right:"20px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",padding:"18px 26px",borderRadius:"14px",display:"flex",alignItems:"center",gap:"10px",fontWeight:"600",boxShadow:"0 12px 28px rgba(16,185,129,0.4)",zIndex:3e3,animation:"slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px",color:i?"#94a3b8":"#64748b",gap:"16px"},emptyState:{textAlign:"center",padding:"60px",color:i?"#94a3b8":"#64748b"},editErrorText:{color:"#ef4444",fontSize:"12px",marginTop:"6px",display:"flex",alignItems:"center",gap:"4px",fontWeight:"600"},commandBar:{display:"flex",alignItems:"center",gap:"12px",background:i?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.9)",borderRadius:"16px",padding:"10px 14px",border:i?"1px solid rgba(75,85,99,0.4)":"1px solid rgba(226,232,240,0.6)",boxShadow:"0 8px 24px rgba(0,0,0,0.06)",transition:"all 0.3s ease",marginBottom:"24px"},commandInput:{flex:1,border:"none",outline:"none",background:"transparent",fontSize:"15px",color:i?"#e2e8f0":"#1e293b",fontWeight:"500"},commandIcon:{color:i?"#94a3b8":"#64748b"},commandDivider:{width:"1px",height:"24px",background:i?"rgba(75,85,99,0.5)":"rgba(226,232,240,0.8)"},inlineSelect:{border:"none",background:"transparent",color:i?"#e2e8f0":"#1e293b",fontSize:"14px",fontWeight:"500",cursor:"pointer",outline:"none"},projectsTooltip:{backgroundColor:i?"rgba(30,41,59,0.98)":"rgba(255,255,255,0.98)",borderRadius:"12px",padding:"16px",boxShadow:"0 12px 32px rgba(0,0,0,0.25)",border:i?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",minWidth:"240px",maxWidth:"320px",backdropFilter:"blur(20px)",animation:"fadeIn 0.2s ease-out"},projectsTooltipHeader:{fontSize:"11px",fontWeight:"700",color:i?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"12px",paddingBottom:"10px",borderBottom:i?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.5)"},projectItem:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 0",fontSize:"13px",color:i?"#e2e8f0":"#1e293b"},projectBullet:{color:"#6366f1",fontWeight:"700",fontSize:"18px",lineHeight:1,minWidth:"12px"},projectName:{flex:1,fontWeight:"500",lineHeight:1.3},projectType:{fontSize:"10px",padding:"3px 10px",borderRadius:"6px",backgroundColor:i?"rgba(99,102,241,0.2)":"rgba(99,102,241,0.1)",color:"#6366f1",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px",whiteSpace:"nowrap"}};return f.useEffect(()=>{const k=document.createElement("style");return k.textContent=`
      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-30px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      .profile-tooltip-animated {
        animation: slideIn 0.2s ease-out;
      }
    `,document.head.appendChild(k),()=>document.head.removeChild(k)},[]),Tt?n.jsx("div",{style:{...J.page,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:n.jsxs("div",{style:J.loadingContainer,children:[n.jsx(ki,{size:32,style:{animation:"spin 1s linear infinite"}}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"600"},children:"Verifying access..."})]})}):n.jsxs("div",{style:J.page,children:[M&&n.jsxs("div",{style:J.successMessage,children:[n.jsx(po,{size:20}),M]}),be&&n.jsxs("div",{style:J.errorMessage,children:[n.jsx(Mn,{size:20}),be]}),n.jsxs("div",{style:J.header,children:[n.jsx("h1",{style:J.title,children:"Users Management"}),n.jsxs("div",{style:J.headerActions,children:[n.jsxs("button",{style:J.actionButton("secondary",ue==="refresh"),onMouseEnter:()=>we("refresh"),onMouseLeave:()=>we(null),onClick:fe,disabled:ge,children:[n.jsx(ki,{size:16,style:{animation:ge?"spin 1s linear infinite":"none"}}),"Refresh"]}),n.jsxs("button",{style:J.topButton(ue==="alerts"),onMouseEnter:()=>we("alerts"),onMouseLeave:()=>we(null),onClick:()=>window.location.href="/adminalerts",children:[n.jsx(lr,{size:20}),n.jsx("div",{style:J.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:J.topButton(ue==="profile"),onMouseEnter:()=>{we("profile"),ie(!0)},onMouseLeave:()=>{we(null),setTimeout(()=>{Me||ie(!1)},100)},onClick:()=>window.location.href="/adminprofile",children:n.jsx(Yt,{size:20})}),Me&&pt&&n.jsxs("div",{style:J.profileTooltip,onMouseEnter:()=>ie(!0),onMouseLeave:()=>ie(!1),children:[n.jsx("div",{style:J.tooltipArrow}),n.jsxs("div",{style:J.userInfo,children:[n.jsx("div",{style:J.avatar,children:Lt(pt.firstName,pt.lastName)}),n.jsxs("div",{style:J.userDetails,children:[n.jsxs("div",{style:J.userName,children:[pt.firstName," ",pt.lastName||""]}),n.jsxs("div",{style:J.userRole,children:[pt.role==="admin"?"Admin":"Member","  ",pt.department]})]})]}),n.jsx("div",{style:J.userStats,children:re.map(k=>n.jsxs("div",{style:J.tooltipStatItem,children:[n.jsx("div",{style:J.tooltipStatNumber,children:k.value}),n.jsx("div",{style:J.tooltipStatLabel,children:k.label})]},k.label))}),n.jsx("button",{style:J.themeToggle,onClick:()=>e(!i),children:i?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("div",{style:J.statsGrid,children:Ze.map((k,v)=>{const Ae=k.icon;return n.jsxs("div",{style:J.statCard(le===`stat${v}`,k),onMouseEnter:()=>$(`stat${v}`),onMouseLeave:()=>$(null),children:[n.jsx("div",{style:J.statDecoration(k,le===`stat${v}`)}),n.jsxs("div",{style:J.statContent,children:[n.jsx("div",{style:J.statIconContainer(k),children:n.jsx(Ae,{size:28,color:"#fff",strokeWidth:2.5})}),n.jsx("div",{style:J.statNumber,children:k.value}),n.jsx("div",{style:J.statLabel,children:k.label})]})]},v)})}),n.jsxs("div",{style:J.commandBar,children:[n.jsx(PA,{size:18,style:J.commandIcon}),n.jsx("input",{style:J.commandInput,placeholder:"Search users by name, email, or department",value:t,onChange:k=>r(k.target.value)}),n.jsx("div",{style:J.commandDivider}),n.jsx(Xh,{size:16,style:J.commandIcon}),n.jsx("div",{style:{width:"140px"},children:n.jsx(Vt,{value:a,onChange:k=>A(k),options:["All Roles","admin","member"],placeholder:"All Roles",isDarkMode:i,compact:!0})}),n.jsx("div",{style:{width:"160px"},children:n.jsx(Vt,{value:c,onChange:k=>u(k),options:["All Departments",...xe],placeholder:"All Departments",isDarkMode:i,compact:!0})})]}),ge?n.jsx("div",{style:J.tableCard(!1),children:n.jsxs("div",{style:J.loadingContainer,children:[n.jsx(ki,{size:32,style:{animation:"spin 1s linear infinite"}}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"600"},children:"Loading users..."})]})}):Ce.length===0?n.jsx("div",{style:J.tableCard(!1),children:n.jsxs("div",{style:J.emptyState,children:[n.jsx(Er,{size:64,style:{marginBottom:"20px",opacity:.4}}),n.jsx("div",{style:{fontSize:"20px",fontWeight:"700",marginBottom:"10px"},children:me.length===0?"No users found":"No users match your filters"}),n.jsx("div",{style:{fontSize:"15px",opacity:.7},children:me.length===0?"Start by adding your first user":"Try adjusting your search or filter criteria"})]})}):n.jsx("div",{style:J.tableCard(le==="table"),onMouseEnter:()=>$("table"),onMouseLeave:()=>$(null),children:n.jsxs("table",{style:J.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{style:J.th,children:"User"}),n.jsx("th",{style:J.th,children:"Role"}),n.jsx("th",{style:J.th,children:"Department"}),n.jsx("th",{style:J.th,children:"Supervisor"}),n.jsx("th",{style:J.th,children:"Project"}),n.jsx("th",{style:J.th,children:"Actions"})]})}),n.jsx("tbody",{children:Ce.map(k=>n.jsxs("tr",{style:J.tableRow(le===`user-${k.id}`),onMouseEnter:()=>$(`user-${k.id}`),onMouseLeave:()=>$(null),children:[n.jsx("td",{style:J.td,children:n.jsxs("div",{style:J.userInfo,children:[n.jsx("div",{style:J.avatar,children:Lt(k.firstName,k.lastName)}),n.jsxs("div",{children:[n.jsxs("div",{style:J.userName,children:[k.firstName," ",k.lastName||""]}),n.jsx("div",{style:J.userEmail,children:k.email})]})]})}),n.jsx("td",{style:J.td,children:n.jsx("span",{style:J.roleChip(k.role),children:k.role})}),n.jsx("td",{style:J.td,children:k.department}),n.jsx("td",{style:J.td,children:me.find(v=>v.id===k.assignedUnder)?(()=>{const v=me.find(Ae=>Ae.id===k.assignedUnder);return`${v.firstName} ${v.lastName||""}`.trim()})():""}),n.jsx("td",{style:J.td,children:k.projects&&k.projects.length>0?k.projects.length===1?n.jsx("span",{children:k.projects[0].name}):n.jsxs("div",{onMouseEnter:v=>{console.log("Badge hovered for user:",k.id),B.current&&clearTimeout(B.current);const Ae=v.currentTarget.getBoundingClientRect(),Ue={x:Ae.left+Ae.width/2,y:Ae.bottom-32};console.log("Setting tooltip position:",Ue),j(Ue),Xe(k.id)},onMouseLeave:()=>{console.log("Badge mouse leave"),B.current=setTimeout(()=>{console.log("Hiding tooltip after delay"),Xe(null)},200)},style:{cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",borderRadius:"8px",backgroundColor:i?"rgba(99,102,241,0.1)":"rgba(99,102,241,0.08)",color:"#6366f1",fontWeight:"600",fontSize:"13px",transition:"all 0.2s ease"},children:[n.jsx(Er,{size:14}),n.jsxs("span",{children:[k.projects.length," projects"]})]}):n.jsx("span",{style:{color:i?"#64748b":"#94a3b8",fontStyle:"italic"},children:"Not assigned"})}),n.jsx("td",{style:J.td,children:n.jsxs("div",{style:J.actionButtons,children:[n.jsx("button",{style:J.iconButton("edit",ue===`edit-${k.id}`),onMouseEnter:()=>we(`edit-${k.id}`),onMouseLeave:()=>we(null),onClick:()=>w(k),children:n.jsx(Ym,{size:16})}),n.jsx("button",{style:J.iconButton("delete",ue===`delete-${k.id}`),onMouseEnter:()=>we(`delete-${k.id}`),onMouseLeave:()=>we(null),onClick:()=>Qe(k.id),children:n.jsx(Pr,{size:16})})]})})]},k.id))})]})}),n.jsx("button",{style:J.floatingAddButton(ue==="add"),onMouseEnter:()=>we("add"),onMouseLeave:()=>we(null),onClick:R,children:n.jsx(yn,{size:30})}),F&&n.jsx("div",{style:{position:"fixed",left:`${W.x}px`,top:`${W.y}px`,transform:"translate(-50%, -100%)",zIndex:9999},onMouseEnter:()=>{B.current&&clearTimeout(B.current)},onMouseLeave:()=>{Xe(null)},children:n.jsxs("div",{style:J.projectsTooltip,children:[n.jsxs("div",{style:J.projectsTooltipHeader,children:["Assigned Projects (",((He=(qt=me.find(k=>k.id===F))==null?void 0:qt.projects)==null?void 0:He.length)||0,")"]}),(at=(bn=me.find(k=>k.id===F))==null?void 0:bn.projects)==null?void 0:at.map((k,v)=>n.jsxs("div",{style:J.projectItem,children:[n.jsx("div",{style:J.projectBullet,children:""}),n.jsx("div",{style:J.projectName,children:k.name}),k.projectType&&n.jsx("div",{style:J.projectType,children:k.projectType})]},v))]})}),E&&ce&&n.jsx("div",{style:J.modal,onClick:()=>P(!1),children:n.jsxs("div",{style:{...J.modalContent,maxWidth:"700px"},onClick:k=>k.stopPropagation(),children:[n.jsxs("div",{style:J.modalHeader,children:[n.jsx(Ym,{size:26,color:"#3b82f6"}),n.jsx("div",{style:J.modalTitle,children:"Edit User"})]}),n.jsxs("div",{style:J.editModalGrid,children:[n.jsxs("div",{children:[n.jsx("label",{style:J.editLabel,children:"First Name *"}),n.jsx("input",{style:J.editInput,value:V.firstName||"",onChange:k=>pe("firstName",k.target.value),placeholder:"First name"}),_.firstName&&n.jsxs("div",{style:J.editErrorText,children:[n.jsx(Mn,{size:12}),_.firstName]})]}),n.jsxs("div",{children:[n.jsx("label",{style:J.editLabel,children:"Last Name"}),n.jsx("input",{style:J.editInput,value:V.lastName||"",onChange:k=>pe("lastName",k.target.value),placeholder:"Last name (optional)"})]}),n.jsxs("div",{children:[n.jsx("label",{style:J.editLabel,children:"Email *"}),n.jsx("input",{style:J.editInput,type:"email",value:V.email||"",onChange:k=>pe("email",k.target.value),placeholder:"Email address"}),_.email&&n.jsxs("div",{style:J.editErrorText,children:[n.jsx(Mn,{size:12}),_.email]})]}),n.jsxs("div",{children:[n.jsx("label",{style:J.editLabel,children:"Phone"}),n.jsx("input",{style:J.editInput,type:"tel",value:V.phoneNumber||"",onChange:k=>pe("phoneNumber",k.target.value),placeholder:"e.g. 81234567"}),_.phoneNumber&&n.jsxs("div",{style:J.editErrorText,children:[n.jsx(Mn,{size:12}),_.phoneNumber]})]}),n.jsxs("div",{children:[n.jsx("label",{style:J.editLabel,children:"Department *"}),n.jsxs("select",{style:J.editInput,value:V.department||"",onChange:k=>pe("department",k.target.value),children:[n.jsx("option",{value:"",children:"Select Department"}),se.map(k=>n.jsx("option",{value:k,children:k},k))]}),_.department&&n.jsxs("div",{style:J.editErrorText,children:[n.jsx(Mn,{size:12}),_.department]})]}),n.jsxs("div",{children:[n.jsx("label",{style:J.editLabel,children:"Role *"}),n.jsxs("select",{style:J.editInput,value:V.role||"",onChange:k=>pe("role",k.target.value),children:[n.jsx("option",{value:"member",children:"Member"}),n.jsx("option",{value:"admin",children:"Admin"})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:J.editLabel,children:"Can Approve Plans"}),n.jsxs("select",{style:J.editInput,value:String(V.isApprover),onChange:k=>pe("isApprover",k.target.value==="true"),children:[n.jsx("option",{value:"false",children:"No"}),n.jsx("option",{value:"true",children:"Yes"})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:J.editLabel,children:"Projects"}),!V.department&&n.jsx("div",{style:{fontSize:"13px",color:i?"#94a3b8":"#64748b",marginTop:"8px"},children:"Select a department to see projects"}),Ne&&n.jsx("div",{style:{fontSize:"13px",color:i?"#94a3b8":"#64748b",marginTop:"8px"},children:"Loading projects"}),Y.map(k=>n.jsxs("label",{style:{display:"block",fontSize:13,marginBottom:6,color:i?"#e2e8f0":"#1e293b"},children:[n.jsx("input",{type:"checkbox",checked:K.includes(k.id),onChange:()=>Te(v=>v.includes(k.id)?v.filter(Ae=>Ae!==k.id):[...v,k.id])})," ",k.name]},k.id))]}),n.jsxs("div",{children:[n.jsx("label",{style:J.editLabel,children:"Team"}),n.jsx("input",{style:J.editInput,value:V.team||"",onChange:k=>pe("team",k.target.value),placeholder:"Team"})]}),n.jsxs("div",{children:[n.jsx("label",{style:J.editLabel,children:"Assigned Under"}),n.jsxs("select",{style:J.editInput,value:V.assignedUnder||"",onChange:k=>pe("assignedUnder",k.target.value?Number(k.target.value):null),children:[n.jsx("option",{value:"",children:"No Supervisor"}),me.filter(k=>k.id!==ce.id).map(k=>n.jsxs("option",{value:k.id,children:[k.firstName," ",k.lastName||""," (",k.department,")"]},k.id))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:J.editLabel,children:"Device Name"}),n.jsx("input",{style:J.editInput,value:V.deviceName||"",onChange:k=>pe("deviceName",k.target.value),placeholder:"IHRP-WLT-XXX"})]}),n.jsxs("div",{children:[n.jsx("label",{style:J.editLabel,children:"ManicTime Subscription"}),n.jsxs("select",{style:J.editInput,value:V.subscriptionId||"",onChange:k=>pe("subscriptionId",k.target.value?Number(k.target.value):null),disabled:$e,children:[n.jsx("option",{value:"",children:$e?"Loading...":"No subscription"}),ee.map(k=>n.jsx("option",{value:k.Id,children:k.SubscriptionName},k.Id))]})]}),n.jsxs("div",{children:[n.jsx("label",{style:J.editLabel,children:"Timeline Key"}),n.jsx("input",{style:J.editInput,value:V.timelineKey||"",onChange:k=>pe("timelineKey",k.target.value),placeholder:"abc-123-timeline-key"})]}),n.jsxs("div",{style:J.modalActions,children:[n.jsx("button",{style:J.actionButton("secondary",ue==="cancelEdit"),onMouseEnter:()=>we("cancelEdit"),onMouseLeave:()=>we(null),onClick:()=>{P(!1),Fe({})},children:"Cancel"}),n.jsxs("button",{style:J.actionButton("primary",ue==="saveEdit"),onMouseEnter:()=>we("saveEdit"),onMouseLeave:()=>we(null),onClick:Et,children:[n.jsx(bi,{size:16}),"Save Changes"]})]})]})}),S&&n.jsx("div",{style:J.modal,onClick:()=>U(!1),children:n.jsxs("div",{style:J.modalContent,onClick:k=>k.stopPropagation(),children:[n.jsxs("div",{style:J.modalHeader,children:[n.jsx(Mn,{size:26,color:"#ef4444"}),n.jsx("div",{style:J.modalTitle,children:"Delete User"})]}),n.jsx("div",{style:J.modalText,children:"Are you sure you want to delete this user? This action cannot be undone and will permanently remove their account and all associated data."}),n.jsxs("div",{style:J.modalActions,children:[n.jsx("button",{style:J.actionButton("secondary",ue==="cancel"),onMouseEnter:()=>we("cancel"),onMouseLeave:()=>we(null),onClick:()=>U(!1),children:"Cancel"}),n.jsxs("button",{style:{...J.actionButton("primary",ue==="confirm"),background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)"},onMouseEnter:()=>we("confirm"),onMouseLeave:()=>we(null),onClick:ft,children:[n.jsx(Pr,{size:16}),"Delete User"]})]})]})})]})},dQ=()=>{var Xe;ps.useRef(null);const[i,e]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[t,r]=f.useState({firstName:"",lastName:"",email:"",dateOfBirth:"",phoneNumber:"",department:"",team:"",password:"",confirmPassword:"",role:"member",isApprover:!1,deviceName:"",timelineKey:"",subscriptionId:null,assignedUnder:""}),[a,A]=f.useState({}),[c,u]=f.useState(!1),[p,m]=f.useState(!1),[h,y]=f.useState(!1),[b,L]=f.useState(""),[S,U]=f.useState(""),[E,P]=f.useState(null),[O,ve]=f.useState(!1),[ce,Q]=f.useState({firstName:"Admin",lastName:"User",role:"admin",email:"admin@example.com",department:"Engineering"}),[V,Z]=f.useState([]),[le,$]=f.useState([]),[ue,we]=f.useState([]),[ge,te]=f.useState([]),[Me,ie]=f.useState(!1),[me,N]=f.useState(null),be=["DTO","P&A","PPC","Finance","A&I","Marketing"],H=["admin","member"],M=(ce==null?void 0:ce.role)==="admin"?[{label:"Users",value:ue.length},{label:"Admins",value:ue.filter(B=>B.role==="admin").length},{label:"Approvers",value:ue.filter(B=>B.isApprover).length}]:[{label:"Projects",value:ce!=null&&ce.project?1:0},{label:"Hours",value:(ce==null?void 0:ce.totalHours)??""},{label:"Capacity",value:ce!=null&&ce.capacity?`${ce.capacity}%`:""}],[I,_]=f.useState(!1),[Fe,Y]=f.useState(!0),D=(B,ee)=>B?!ee||ee.trim()===""?B[0].toUpperCase():`${B[0]}${ee[0]}`.toUpperCase():"?";f.useEffect(()=>{(async()=>{try{const ee=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ee.ok){const Pe=await ee.json();if(Pe.role!=="admin"){window.location.href="/admindashboard";return}Q(Pe)}else{window.location.href="/";return}}catch(ee){console.error("Error verifying access:",ee),window.location.href="/";return}finally{Y(!1)}})()},[]);const[K,Te]=f.useState([]);f.useEffect(()=>{(async()=>{ie(!0);try{const ee=await ke("/api/manictime-admin/subscriptions",{credentials:"include"});if(ee.ok){const Pe=await ee.json();te(Pe)}}catch(ee){console.error("Error fetching subscriptions:",ee)}finally{ie(!1)}})()},[]),f.useEffect(()=>{(async()=>{try{const ee=await ke("/users",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(ee.ok){const Pe=await ee.json();we(Pe)}}catch(ee){console.error("Error fetching users:",ee)}})()},[]),f.useEffect(()=>{(async()=>{try{const Pe=await(await ke("/user/list",{credentials:"include"})).json();Te(Pe.users||[])}catch(ee){console.error("Failed to fetch assignable users",ee)}})()},[]),f.useEffect(()=>{if(!t.department){Z([]),$([]);return}ke("/api/ai/admin/structure",{credentials:"include"}).then(B=>B.json()).then(B=>{const ee=B.domains.find(Pe=>Pe.name===t.department);Z(ee?ee.contexts:[]),$([])})},[t.department]);const Ne=()=>{const B={};return t.firstName.trim()||(B.firstName="First name is required"),t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(B.email="Please enter a valid email address"):B.email="Email is required",t.dateOfBirth?/^\d{4}-\d{2}-\d{2}$/.test(t.dateOfBirth)||(B.dateOfBirth="Invalid date format (YYYY-MM-DD)"):B.dateOfBirth="Date of birth is required",t.phoneNumber.trim()?/^[689]\d{7}$/.test(t.phoneNumber)||(B.phoneNumber="Phone number must start with 6, 8, or 9 and be 8 digits long"):B.phoneNumber="Phone number is required",t.department||(B.department="Department is required"),le.length===0&&(B.projects="At least one project must be selected"),t.team.trim()||(B.team="Team is required"),t.password?t.password.length<8&&(B.password="Password must be at least 8 characters long"):B.password="Password is required",t.confirmPassword?t.password!==t.confirmPassword&&(B.confirmPassword="Passwords do not match"):B.confirmPassword="Please confirm your password",A(B),Object.keys(B).length===0},G=(B,ee)=>{B==="role"&&(ee=ee.toLowerCase()),r(Pe=>({...Pe,[B]:ee})),a[B]&&A(Pe=>({...Pe,[B]:""}))},W=async B=>{if(B.preventDefault(),!Ne()){L("Please fix the errors in the form"),setTimeout(()=>L(""),5e3);return}u(!0),L(""),U("");try{const{confirmPassword:ee,...Pe}=t,$e=await ke("/signup",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Pe)}),kt=await $e.json();if($e.ok){const pt=kt.user.id;for(const Ut of le)await ke("/api/ai/context-assign",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:pt,contextId:Ut})});U("User created successfully! Redirecting..."),console.log("User created successfully:",kt),setTimeout(()=>{window.location.href="/users"},2e3)}else L(kt.message||"Failed to create user"),setTimeout(()=>L(""),5e3)}catch(ee){console.error("Error creating user:",ee),L("Network error. Please check your connection."),setTimeout(()=>L(""),5e3)}finally{u(!1)}},j=()=>{window.location.href="/users"},F={page:{minHeight:"100vh",padding:"30px",background:i?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},backButton:B=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:B?"rgba(59,130,246,0.1)":i?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:B?"#3b82f6":i?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:B?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:B?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),title:{fontSize:"32px",fontWeight:"700",color:i?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},topButton:B=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:B?"rgba(59,130,246,0.1)":i?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:B?"#3b82f6":i?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:B?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:B?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:i?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:i?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:i?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:i?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center"},userAvatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"14px",marginRight:"12px"},userDetails:{flex:1},userName:{fontWeight:"600",marginBottom:"2px",color:i?"#e2e8f0":"#1e293b"},userRole:{fontSize:"12px",color:i?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:i?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",marginTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:i?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:i?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},formCard:{backgroundColor:i?"#374151":"#fff",borderRadius:"20px",padding:"32px",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:i?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(20px)",transition:"all 0.3s ease",marginBottom:"24px"},formGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",marginBottom:"24px"},formGroup:{display:"flex",flexDirection:"column"},label:{fontSize:"12px",fontWeight:"600",color:i?"#94a3b8":"#64748b",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px",textTransform:"uppercase",letterSpacing:"0.5px"},required:{color:"#ef4444",fontSize:"14px"},inputWrapper:{position:"relative",display:"flex",alignItems:"center"},input:B=>({width:"100%",padding:"12px 16px",paddingLeft:"44px",borderRadius:"10px",border:B?"2px solid #ef4444":i?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:i?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#1e293b",fontSize:"14px",letterSpacing:"0.1px",fontFamily:"Montserrat",outline:"none",transition:"all 0.3s ease",backdropFilter:"blur(10px)"}),passwordInput:{fontFamily:"Montserrat",fontSize:"14px",letterSpacing:"0.1px"},inputIcon:{position:"absolute",left:"14px",color:i?"#94a3b8":"#64748b",pointerEvents:"none",zIndex:5},select:B=>({width:"100%",padding:"12px 16px",paddingLeft:"44px",borderRadius:"10px",border:B?"2px solid #ef4444":i?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:i?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(10px)",appearance:"none",backgroundImage:`url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='${i?"%2394a3b8":"%2364748b"}' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"20px",paddingRight:"44px"}),passwordToggle:{position:"absolute",right:"14px",cursor:"pointer",color:i?"#94a3b8":"#64748b",transition:"color 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",padding:"4px"},errorText:{color:"#ef4444",fontSize:"12px",marginTop:"4px",display:"flex",alignItems:"center",gap:"4px",fontWeight:"500"},helperText:{color:i?"#94a3b8":"#64748b",fontSize:"12px",marginTop:"4px",fontStyle:"italic"},section:{marginTop:"32px",paddingTop:"32px",borderTop:i?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)"},sectionTitle:{fontSize:"18px",fontWeight:"700",color:i?"#e2e8f0":"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},buttonGroup:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"32px"},button:(B,ee,Pe)=>({padding:"12px 24px",borderRadius:"10px",border:"none",fontSize:"14px",fontWeight:"600",cursor:Pe?"not-allowed":"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"8px",transform:ee&&!Pe?"translateY(-2px) scale(1.02)":"translateY(0) scale(1)",opacity:Pe?.6:1,...B==="primary"&&{background:Pe?i?"#4b5563":"#cbd5e1":"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"#fff",boxShadow:ee&&!Pe?"0 12px 24px rgba(59,130,246,0.4)":"0 4px 12px rgba(59,130,246,0.2)"},...B==="secondary"&&{backgroundColor:i?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#64748b",boxShadow:ee?"0 8px 20px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",backdropFilter:"blur(10px)"}}),successMessage:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#10b981",color:"#fff",padding:"16px 24px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",boxShadow:"0 8px 25px rgba(16,185,129,0.3)",zIndex:1e3,animation:"slideIn 0.5s ease-out"},errorMessage:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#ef4444",color:"#fff",padding:"16px 24px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600",boxShadow:"0 8px 25px rgba(239,68,68,0.3)",zIndex:1e3,animation:"slideIn 0.5s ease-out",maxWidth:"400px"},closeButton:{background:"none",border:"none",color:"#fff",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"auto"},infoIcon:{marginLeft:"6px",fontSize:"12px",cursor:"help",color:"#3b82f6",fontWeight:"700"},infoTooltip:{marginTop:"6px",padding:"10px 12px",backgroundColor:"rgba(59,130,246,0.08)",borderLeft:"3px solid #3b82f6",borderRadius:"6px",fontSize:"12px",color:i?"#e2e8f0":"#1e293b",lineHeight:"1.4"},dropdownStyle:{width:"100%",padding:"12px 16px",paddingLeft:"44px",borderRadius:"10px",border:i?"2px solid rgba(75,85,99,0.5)":"2px solid rgba(226,232,240,0.8)",backgroundColor:i?"rgba(30,41,59,0.8)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#1e293b",fontSize:"14px",letterSpacing:"0.1px",fontFamily:"Montserrat",outline:"none",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},projectCheckboxContainer:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"12px"},checkboxLabel:(B,ee)=>({display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"10px",backgroundColor:B?i?"rgba(59,130,246,0.15)":"rgba(59,130,246,0.08)":i?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.6)",border:B?"2px solid #3b82f6":i?"2px solid rgba(75,85,99,0.4)":"2px solid rgba(226,232,240,0.6)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:ee?"translateX(4px)":"translateX(0)",boxShadow:B?"0 4px 12px rgba(59,130,246,0.15)":ee?"0 4px 12px rgba(0,0,0,0.08)":"none"}),customCheckbox:B=>({width:"22px",height:"22px",minWidth:"22px",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:B?"#3b82f6":"transparent",border:B?"2px solid #3b82f6":i?"2px solid rgba(148,163,184,0.5)":"2px solid rgba(100,116,139,0.4)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"}),checkboxText:B=>({fontSize:"14px",fontWeight:B?"600":"500",color:B?i?"#e2e8f0":"#1e293b":i?"#94a3b8":"#64748b",transition:"all 0.3s ease",flex:1}),checkIcon:{color:"#ffffff",strokeWidth:3},projectCount:{fontSize:"11px",fontWeight:"600",padding:"4px 8px",borderRadius:"6px",backgroundColor:i?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.15)",color:"#3b82f6"}};return f.useEffect(()=>{const B=document.createElement("style");return B.textContent=`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      input:focus, select:focus {
        border-color: #3b82f6 !important;
        box-shadow: 0 0 0 3px rgba(59,130,246,0.1) !important;
      }

      input[type="date"]::-webkit-calendar-picker-indicator {
        opacity: 0;
        display: none;
      }

      input[type="date"]::-webkit-inner-spin-button,
      input[type="date"]::-webkit-clear-button {
        display: none;
      }
    `,document.head.appendChild(B),()=>document.head.removeChild(B)},[]),Fe?n.jsx("div",{style:{...F.page,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px",color:i?"#94a3b8":"#64748b",gap:"16px"},children:[n.jsx("div",{style:{animation:"spin 1s linear infinite"},children:n.jsx(Yt,{size:32})}),n.jsx("div",{style:{fontSize:"16px",fontWeight:"600"},children:"Verifying access..."})]})}):n.jsxs("div",{style:F.page,children:[S&&n.jsxs("div",{style:F.successMessage,children:[n.jsx(po,{size:20}),S]}),b&&n.jsxs("div",{style:F.errorMessage,children:[n.jsx(Mn,{size:20}),b,n.jsx("button",{style:F.closeButton,onClick:()=>L(""),children:n.jsx(dn,{size:16})})]}),n.jsxs("div",{style:F.header,children:[n.jsxs("div",{style:F.headerLeft,children:[n.jsx("button",{style:F.backButton(E==="back"),onMouseEnter:()=>P("back"),onMouseLeave:()=>P(null),onClick:j,children:n.jsx(Pi,{size:20})}),n.jsx("h1",{style:F.title,className:"floating",children:"Add New User"})]}),n.jsxs("div",{style:F.headerRight,children:[n.jsxs("button",{style:F.topButton(E==="alerts"),onMouseEnter:()=>P("alerts"),onMouseLeave:()=>P(null),onClick:()=>{window.location.href="/adminalerts"},children:[n.jsx(lr,{size:20}),n.jsx("div",{style:F.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:F.topButton(E==="profile"),onMouseEnter:()=>{P("profile"),ve(!0)},onMouseLeave:()=>{P(null)},onClick:()=>{window.location.href="/adminprofile"},children:n.jsx(Yt,{size:20})}),O&&ce&&n.jsxs("div",{style:F.profileTooltip,onMouseEnter:()=>ve(!0),onMouseLeave:()=>ve(!1),children:[n.jsx("div",{style:F.tooltipArrow}),n.jsxs("div",{style:F.userInfo,children:[n.jsx("div",{style:F.userAvatar,children:D(ce.firstName,ce.lastName)}),n.jsxs("div",{style:F.userDetails,children:[n.jsxs("div",{style:F.userName,children:[ce.firstName," ",ce.lastName||""]}),n.jsxs("div",{style:F.userRole,children:[ce.role==="admin"?"Admin":"Member","  ",ce.department]})]})]}),n.jsx("div",{style:F.userStats,children:M.map(B=>n.jsxs("div",{style:F.tooltipStatItem,children:[n.jsx("div",{style:F.tooltipStatNumber,children:B.value}),n.jsx("div",{style:F.tooltipStatLabel,children:B.label})]},B.label))}),n.jsx("button",{style:F.themeToggle,onClick:()=>{e(!i);try{localStorage.setItem("darkMode",(!i).toString())}catch{console.log("LocalStorage not available")}},children:i?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsx("form",{onSubmit:W,children:n.jsxs("div",{style:F.formCard,children:[n.jsxs("div",{children:[n.jsxs("div",{style:F.sectionTitle,children:[n.jsx(Yt,{size:20}),"Personal Information"]}),n.jsxs("div",{style:F.formGrid,children:[n.jsxs("div",{style:F.formGroup,children:[n.jsxs("label",{style:F.label,children:["First Name ",n.jsx("span",{style:F.required,children:"*"})]}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(Yt,{size:18,style:F.inputIcon}),n.jsx("input",{style:F.input(a.firstName),type:"text",placeholder:"Enter first name",value:t.firstName,onChange:B=>G("firstName",B.target.value)})]}),a.firstName&&n.jsxs("div",{style:F.errorText,children:[n.jsx(Mn,{size:12}),a.firstName]})]}),n.jsxs("div",{style:F.formGroup,children:[n.jsx("label",{style:F.label,children:"Last Name "}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(Yt,{size:18,style:F.inputIcon}),n.jsx("input",{style:F.input(a.lastName),type:"text",placeholder:"Enter last name (optional)",value:t.lastName,onChange:B=>G("lastName",B.target.value)})]}),a.lastName&&n.jsxs("div",{style:F.errorText,children:[n.jsx(Mn,{size:12}),a.lastName]}),!a.lastName&&n.jsx("div",{style:F.helperText,children:"Optional - leave blank if not applicable"})]}),n.jsxs("div",{style:F.formGroup,children:[n.jsxs("label",{style:F.label,children:["Email ",n.jsx("span",{style:F.required,children:"*"})]}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(Qc,{size:18,style:F.inputIcon}),n.jsx("input",{style:F.input(a.email),type:"email",placeholder:"user@example.com",value:t.email,onChange:B=>G("email",B.target.value)})]}),a.email&&n.jsxs("div",{style:F.errorText,children:[n.jsx(Mn,{size:12}),a.email]})]}),n.jsxs("div",{style:F.formGroup,children:[n.jsxs("label",{style:F.label,children:["Phone Number ",n.jsx("span",{style:F.required,children:"*"})]}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(ib,{size:18,style:F.inputIcon}),n.jsx("input",{style:F.input(a.phoneNumber),type:"tel",placeholder:"81234567",value:t.phoneNumber,onChange:B=>G("phoneNumber",B.target.value)})]}),a.phoneNumber&&n.jsxs("div",{style:F.errorText,children:[n.jsx(Mn,{size:12}),a.phoneNumber]}),!a.phoneNumber&&n.jsx("div",{style:F.helperText,children:"Must start with 6, 8, or 9 and be 8 digits long"})]}),n.jsxs("div",{style:F.formGroup,children:[n.jsxs("label",{style:F.label,children:["Date of Birth ",n.jsx("span",{style:F.required,children:"*"})]}),n.jsx(en,{value:t.dateOfBirth,onChange:B=>G("dateOfBirth",B),isDarkMode:i,placeholder:"Select date of birth",compact:!0}),a.dateOfBirth&&n.jsxs("div",{style:F.errorText,children:[n.jsx(Mn,{size:12}),a.dateOfBirth]})]})]})]}),n.jsxs("div",{style:F.section,children:[n.jsxs("div",{style:F.sectionTitle,children:[n.jsx(cs,{size:20}),"Work Information"]}),n.jsxs("div",{style:F.formGrid,children:[n.jsxs("div",{style:F.formGroup,children:[n.jsxs("label",{style:F.label,children:["Department ",n.jsx("span",{style:F.required,children:"*"})]}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(cs,{size:18,style:F.inputIcon}),n.jsx(Vt,{value:t.department,onChange:B=>G("department",B),options:["",...be],placeholder:"Select Department",isDarkMode:i,hasIcon:!0,compact:!0,customStyles:{select:F.dropdownStyle}})]}),a.department&&n.jsxs("div",{style:F.errorText,children:[n.jsx(Mn,{size:12}),a.department]})]}),n.jsxs("div",{style:F.formGroup,children:[n.jsxs("label",{style:F.label,children:["Projects ",n.jsx("span",{style:F.required,children:"*"}),le.length>0&&n.jsxs("span",{style:F.projectCount,children:[le.length," selected"]})]}),V.length===0&&n.jsx("div",{style:F.helperText,children:"Select a department to see projects"}),V.length>0&&n.jsx("div",{style:F.projectCheckboxContainer,children:V.map(B=>{const ee=le.includes(B.id),Pe=me===B.id;return n.jsxs("label",{style:F.checkboxLabel(ee,Pe),onMouseEnter:()=>N(B.id),onMouseLeave:()=>N(null),children:[n.jsx("input",{type:"checkbox",checked:ee,onChange:()=>$($e=>$e.includes(B.id)?$e.filter(kt=>kt!==B.id):[...$e,B.id]),style:{display:"none"}}),n.jsx("div",{style:F.customCheckbox(ee),children:ee&&n.jsx(po,{size:16,style:F.checkIcon})}),n.jsx("span",{style:F.checkboxText(ee),children:B.name})]},B.id||B.contextId||B.name)})}),a.projects&&n.jsxs("div",{style:F.errorText,children:[n.jsx(Mn,{size:12}),a.projects]})]}),n.jsxs("div",{style:F.formGroup,children:[n.jsxs("label",{style:F.label,children:["Team ",n.jsx("span",{style:F.required,children:"*"})]}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(Er,{size:18,style:F.inputIcon}),n.jsx("input",{style:F.input(a.team),type:"text",placeholder:"Enter team name",value:t.team,onChange:B=>G("team",B.target.value)})]}),a.team&&n.jsxs("div",{style:F.errorText,children:[n.jsx(Mn,{size:12}),a.team]})]}),n.jsxs("div",{style:F.formGroup,children:[n.jsxs("label",{style:F.label,children:["Role ",n.jsx("span",{style:F.required,children:"*"})]}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(vc,{size:18,style:F.inputIcon}),n.jsx(Vt,{value:t.role,onChange:B=>G("role",B),options:H.map(B=>B.charAt(0).toUpperCase()+B.slice(1)),placeholder:"Select Role",isDarkMode:i,hasIcon:!0,compact:!0,customStyles:{select:F.dropdownStyle}})]}),a.role&&n.jsxs("div",{style:F.errorText,children:[n.jsx(Mn,{size:12}),a.role]})]}),n.jsxs("div",{style:F.formGroup,children:[n.jsxs("label",{style:F.label,children:["Can Approve Master Plans",n.jsx("span",{style:F.infoIcon,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:""})]}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(vc,{size:18,style:F.inputIcon}),n.jsx(Vt,{value:t.isApprover?"Yes":"No",onChange:B=>G("isApprover",B==="Yes"),options:["No","Yes"],placeholder:"Can approve?",isDarkMode:i,hasIcon:!0,compact:!0,customStyles:{select:F.dropdownStyle}})]}),I&&n.jsxs("div",{style:F.infoTooltip,children:["Users marked as approvers can approve or reject master plans within their department.",n.jsx("br",{}),n.jsx("strong",{children:"This does not make them an admin."})]}),n.jsx("div",{style:F.helperText,children:"Allows user to approve or reject plans"})]}),n.jsxs("div",{style:F.formGroup,children:[n.jsx("label",{style:F.label,children:"Assigned Under"}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(vc,{size:18,style:F.inputIcon}),n.jsx(Vt,{value:t.assignedUnder?(()=>{const B=K.find(ee=>ee.id===Number(t.assignedUnder));return B?`${B.firstName} ${B.lastName||""} (${B.role})`:""})():"",onChange:B=>{if(B==="None"||B==="")G("assignedUnder","");else{const ee=K.find(Pe=>`${Pe.firstName} ${Pe.lastName||""} (${Pe.role})`===B);G("assignedUnder",ee?ee.id:"")}},options:["None",...K.map(B=>`${B.firstName} ${B.lastName||""} (${B.role})`)],placeholder:"None",isDarkMode:i,searchable:K.length>5,hasIcon:!0,compact:!0,customStyles:{select:F.dropdownStyle}})]}),n.jsx("div",{style:F.helperText,children:"Optional: Assign reporting / approval line"})]}),n.jsxs("div",{style:F.formGroup,children:[n.jsx("label",{style:F.label,children:"Device Name"}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(ua,{size:18,style:F.inputIcon}),n.jsx("input",{style:F.input(a.deviceName),type:"text",placeholder:"IHRP-WLT-XXX",value:t.deviceName,onChange:B=>G("deviceName",B.target.value)})]}),!a.deviceName&&n.jsx("div",{style:F.helperText,children:"Optional: Assign a device to this user"})]}),n.jsxs("div",{style:F.formGroup,children:[n.jsx("label",{style:F.label,children:"ManicTime Subscription"}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(cs,{size:18,style:F.inputIcon}),n.jsx(Vt,{value:t.subscriptionId&&((Xe=ge.find(B=>B.Id===t.subscriptionId))==null?void 0:Xe.SubscriptionName)||"",onChange:B=>{if(B==="No subscription"||B==="")G("subscriptionId",null);else{const ee=ge.find(Pe=>Pe.SubscriptionName===B);G("subscriptionId",ee?ee.Id:null)}},options:[Me?"Loading...":"No subscription",...ge.map(B=>B.SubscriptionName)],placeholder:"No subscription",isDarkMode:i,disabled:Me,hasIcon:!0,compact:!0,customStyles:{select:F.dropdownStyle}})]}),n.jsx("div",{style:F.helperText,children:"Optional: Link device to a ManicTime workspace"})]}),n.jsxs("div",{style:F.formGroup,children:[n.jsx("label",{style:F.label,children:"Timeline Key"}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(ua,{size:18,style:F.inputIcon}),n.jsx("input",{style:F.input(a.timelineKey),type:"text",placeholder:"abc-123-timeline-key",value:t.timelineKey,onChange:B=>G("timelineKey",B.target.value)})]}),n.jsx("div",{style:F.helperText,children:"Optional: Timeline key for tracking activities"})]})]})]}),n.jsxs("div",{style:F.section,children:[n.jsxs("div",{style:F.sectionTitle,children:[n.jsx(Ei,{size:20}),"Security"]}),n.jsxs("div",{style:F.formGrid,children:[n.jsxs("div",{style:F.formGroup,children:[n.jsxs("label",{style:F.label,children:["Password ",n.jsx("span",{style:F.required,children:"*"})]}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(Ei,{size:18,style:F.inputIcon}),n.jsx("input",{style:{...F.input(a.confirmPassword),...F.passwordInput},type:p?"text":"password",placeholder:"Enter password",value:t.password,onChange:B=>G("password",B.target.value)}),n.jsx("div",{style:F.passwordToggle,onClick:()=>m(!p),children:p?n.jsx(ch,{size:18}):n.jsx($o,{size:18})})]}),a.password&&n.jsxs("div",{style:F.errorText,children:[n.jsx(Mn,{size:12}),a.password]}),!a.password&&n.jsx("div",{style:F.helperText,children:"Must be at least 8 characters long"})]}),n.jsxs("div",{style:F.formGroup,children:[n.jsxs("label",{style:F.label,children:["Confirm Password ",n.jsx("span",{style:F.required,children:"*"})]}),n.jsxs("div",{style:F.inputWrapper,children:[n.jsx(Ei,{size:18,style:F.inputIcon}),n.jsx("input",{style:F.input(a.confirmPassword),type:h?"text":"password",placeholder:"Confirm password",value:t.confirmPassword,onChange:B=>G("confirmPassword",B.target.value)}),n.jsx("div",{style:F.passwordToggle,onClick:()=>y(!h),children:h?n.jsx(ch,{size:18}):n.jsx($o,{size:18})})]}),a.confirmPassword&&n.jsxs("div",{style:F.errorText,children:[n.jsx(Mn,{size:12}),a.confirmPassword]})]})]})]}),n.jsxs("div",{style:F.buttonGroup,children:[n.jsx("button",{type:"button",style:F.button("secondary",E==="cancel",!1),onMouseEnter:()=>P("cancel"),onMouseLeave:()=>P(null),onClick:j,children:"Cancel"}),n.jsxs("button",{type:"submit",style:F.button("primary",E==="submit",c),onMouseEnter:()=>P("submit"),onMouseLeave:()=>P(null),disabled:c,children:[n.jsx(bi,{size:18}),c?"Creating User...":"Create User"]})]})]})})]})},uQ=()=>{var N,be;const[i,e]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[t,r]=f.useState(null),[a,A]=f.useState(!1),[c,u]=f.useState(null),[p,m]=f.useState(null),[h,y]=f.useState(!1),b=f.useRef(null),L=f.useRef(null),[S,U]=f.useState(null),[E,P]=f.useState([]),[O,ve]=f.useState([]),[ce,Q]=f.useState({capacityUtilization:0}),[V,Z]=f.useState(!0),[le,$]=f.useState(null);f.useEffect(()=>{(async()=>{try{const M=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!M.ok){if(M.status===401){window.location.href="/login";return}throw new Error("Failed to fetch user profile")}const I=await M.json(),_=await ke(`/users/${I.id}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(_.ok){const Fe=await _.json();U(Fe)}else{const Fe={firstName:I.firstName,lastName:I.lastName,email:I.email,role:I.role,department:I.department};U(Fe)}}catch(M){console.error("Error fetching profile:",M)}})()},[]),f.useEffect(()=>{S&&(async()=>{try{const M=await ke("/actuals",{credentials:"include"});if(M.ok){const I=await M.json();ve(I)}}catch(M){console.error("Error fetching actuals:",M)}})()},[S]),f.useEffect(()=>{S&&(async()=>{try{const M=await ke("/actuals/stats?period=week",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(M.ok){const I=await M.json();Q(I)}}catch(M){console.error("Error fetching stats:",M)}})()},[S]);const ue=async()=>{try{const H=await ke("/api/notifications",{credentials:"include"});if(!H.ok)throw new Error("Failed to fetch notifications");const I=(await H.json()).map(_=>({id:_.Id,subject:_.Subject,content:_.Content,sentDate:_.CreatedAt,status:_.Status}));P(I)}catch(H){console.error("Error fetching notifications:",H),$("Failed to load notifications")}finally{Z(!1)}};f.useEffect(()=>{ue()},[]),f.useEffect(()=>{L.current||(L.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),b.current&&document.head.removeChild(b.current);const H=document.createElement("style");H.setAttribute("data-component","admin-alerts-background");const M=i?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return H.textContent=`
      /* More specific targeting to avoid conflicts */
      .admin-alerts-page {
        min-height: 100vh;
        background: ${M};
      }
      
      /* Target common parent containers more carefully */
      body {
        background: ${M} !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      /* Only target direct children of common containers */
      #root > div:first-child,
      .app > div:first-child,
      .main-content,
      .page-container {
        background: transparent !important;
        min-height: 100vh;
      }
      
      /* Fallback for nested containers */
      div[style*="background: white"],
      div[style*="background-color: white"],
      div[style*="background: #fff"],
      div[style*="background-color: #fff"] {
        background: transparent !important;
      }
      
      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-20px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      
      @keyframes float {
        0%, 100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-6px);
        }
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      /* Smooth transitions for theme changes */
      * {
        transition: background-color 0.3s ease, background 0.3s ease;
      }
    `,document.head.appendChild(H),b.current=H,()=>{b.current&&document.head.contains(b.current)&&(document.head.removeChild(b.current),b.current=null),L.current&&document.querySelectorAll('[data-component="admin-alerts-background"]').length===0&&Object.assign(document.body.style,L.current)}},[i]);const we=H=>{r(H),A(!0)},ge=async H=>{try{await ke(`/api/notifications/${H}`,{method:"DELETE",credentials:"include"}),P(M=>M.filter(I=>I.id!==H))}catch(M){console.error("Failed to delete alert:",M)}},te=H=>{switch(H){case"delivered":return"#10b981";case"pending":return"#f59e0b";case"failed":return"#ef4444";default:return"#6b7280"}},Me=H=>{switch(H){case"delivered":return po;case"pending":return Mn;case"failed":return v2;default:return rb}},ie=H=>new Date(H).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),me={page:{minHeight:"100vh",padding:"0",margin:"0",background:i?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease"},contentContainer:{padding:"30px",minHeight:"100vh",background:"inherit"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},backButton:{padding:"12px",borderRadius:"12px",border:"none",backgroundColor:i?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:i?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0,0,0,0.08)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"},title:{fontSize:"32px",fontWeight:"700",color:i?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},topButton:H=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:H?"rgba(59,130,246,0.1)":i?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:H?"#3b82f6":i?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:H?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:H?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:i?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:i?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:i?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:i?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},userAvatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:i?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:i?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:i?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:i?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:i?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},infoCard:{backgroundColor:i?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:i?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",gap:"16px"},infoIcon:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6"},infoContent:{flex:1},infoTitle:{fontSize:"18px",fontWeight:"600",color:i?"#e2e8f0":"#1e293b",marginBottom:"4px"},infoText:{fontSize:"14px",color:i?"#94a3b8":"#64748b"},alertsContainer:{backgroundColor:i?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",overflow:"hidden",boxShadow:"0 8px 25px rgba(0,0,0,0.08)",border:i?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(20px)"},alertItem:H=>({padding:"20px 24px",borderBottom:i?"1px solid #4b5563":"1px solid #f1f5f9",transition:"all 0.2s ease",cursor:"pointer",backgroundColor:H?"rgba(59,130,246,0.05)":"transparent",display:"flex",alignItems:"center",gap:"16px"}),alertIcon:H=>({padding:"12px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:`${te(H)}20`}),alertContent:{flex:1},alertSubject:{fontSize:"16px",fontWeight:"600",color:i?"#e2e8f0":"#1e293b",marginBottom:"4px"},alertDetails:{fontSize:"14px",color:i?"#94a3b8":"#64748b",marginBottom:"8px"},alertMeta:{display:"flex",gap:"16px",alignItems:"center",fontSize:"12px",color:i?"#94a3b8":"#64748b"},statusChip:H=>({padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",backgroundColor:`${te(H)}20`,color:te(H),display:"flex",alignItems:"center",gap:"4px"}),alertActions:{display:"flex",gap:"8px"},actionButton:(H,M)=>({padding:"8px",borderRadius:"8px",border:"none",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",transform:M?"scale(1.1)":"scale(1)",...H==="view"&&{backgroundColor:M?"rgba(59,130,246,0.1)":"transparent",color:"#3b82f6"},...H==="delete"&&{backgroundColor:M?"rgba(239,68,68,0.1)":"transparent",color:"#ef4444"}}),modal:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,backdropFilter:"blur(4px)"},modalContent:{backgroundColor:i?"rgba(55,65,81,0.95)":"rgba(255,255,255,0.95)",borderRadius:"20px",padding:"32px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",border:i?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(20px)",animation:"modalSlideIn 0.3s ease-out"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:i?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)"},modalTitle:{fontSize:"20px",fontWeight:"700",color:i?"#f1f5f9":"#1e293b"},modalBody:{lineHeight:"1.6",color:i?"#e2e8f0":"#374151"},closeButton:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"transparent",color:i?"#94a3b8":"#64748b",cursor:"pointer",transition:"all 0.2s ease"}};return n.jsx("div",{className:"admin-alerts-page",style:me.page,children:n.jsxs("div",{style:me.contentContainer,children:[n.jsxs("div",{style:me.header,children:[n.jsxs("div",{style:me.headerLeft,children:[n.jsx("button",{style:me.backButton,onClick:()=>window.history.back(),className:"floating",children:n.jsx(Pi,{size:20})}),n.jsx("h1",{style:me.title,children:"My Notifications"})]}),n.jsx("div",{style:me.headerRight,children:n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:me.topButton(p==="profile"),onMouseEnter:()=>{m("profile"),y(!0)},onMouseLeave:()=>{m(null)},onClick:()=>{window.location.href="/adminprofile"},children:n.jsx(Yt,{size:20})}),h&&S&&n.jsxs("div",{style:me.profileTooltip,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[n.jsx("div",{style:me.tooltipArrow}),n.jsxs("div",{style:me.userInfo,children:[n.jsxs("div",{style:me.userAvatar,children:[(N=S.firstName)==null?void 0:N[0],(be=S.lastName)==null?void 0:be[0]]}),n.jsxs("div",{style:me.userDetails,children:[n.jsxs("div",{style:me.userName,children:[S.firstName," ",S.lastName]}),n.jsxs("div",{style:me.userRole,children:[S.role==="admin"?"Admin":"Member","  ",S.department]})]})]}),n.jsxs("div",{style:me.userStats,children:[n.jsxs("div",{style:me.tooltipStatItem,children:[n.jsx("div",{style:me.tooltipStatNumber,children:O.reduce((H,M)=>H+parseFloat(M.Hours||0),0).toFixed(1)}),n.jsx("div",{style:me.tooltipStatLabel,children:"Hours"})]}),n.jsxs("div",{style:me.tooltipStatItem,children:[n.jsx("div",{style:me.tooltipStatNumber,children:O.filter(H=>H.Category==="Project").length}),n.jsx("div",{style:me.tooltipStatLabel,children:"Projects"})]}),n.jsxs("div",{style:me.tooltipStatItem,children:[n.jsxs("div",{style:me.tooltipStatNumber,children:[ce.capacityUtilization,"%"]}),n.jsx("div",{style:me.tooltipStatLabel,children:"Capacity"})]})]}),n.jsx("button",{style:me.themeToggle,onClick:()=>e(!i),children:i?" Light Mode":" Dark Mode"})]})]})})]}),n.jsxs("div",{style:me.infoCard,children:[n.jsx("div",{style:me.infoIcon,children:n.jsx(Qc,{size:24})}),n.jsxs("div",{style:me.infoContent,children:[n.jsx("div",{style:me.infoTitle,children:"Your Notifications"}),n.jsx("div",{style:me.infoText,children:"Messages sent to you from the MaxCap system"})]})]}),n.jsxs("div",{style:me.alertsContainer,children:[V&&n.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#64748b"},children:"Loading notifications"}),le&&n.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#ef4444"},children:le}),!V&&!le&&E.length===0&&n.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#64748b"},children:"No notifications yet "}),!V&&!le&&E.map(H=>{const M=Me(H.status);return n.jsxs("div",{style:me.alertItem(c===`alert-${H.id}`),onMouseEnter:()=>u(`alert-${H.id}`),onMouseLeave:()=>u(null),children:[n.jsx("div",{style:me.alertIcon(H.status),children:n.jsx(Qc,{size:20,color:te(H.status)})}),n.jsxs("div",{style:me.alertContent,children:[n.jsx("div",{style:me.alertSubject,children:H.subject}),n.jsx("div",{style:me.alertDetails,children:"From: MaxCap System"}),n.jsxs("div",{style:me.alertMeta,children:[n.jsx("span",{children:ie(H.sentDate)}),n.jsxs("span",{style:me.statusChip(H.status),children:[n.jsx(M,{size:12}),H.status]})]})]}),n.jsxs("div",{style:me.alertActions,children:[n.jsx("button",{style:me.actionButton("view",p===`view-${H.id}`),onMouseEnter:()=>m(`view-${H.id}`),onMouseLeave:()=>m(null),onClick:()=>we(H),children:n.jsx($o,{size:16})}),n.jsx("button",{style:me.actionButton("delete",p===`delete-${H.id}`),onMouseEnter:()=>m(`delete-${H.id}`),onMouseLeave:()=>m(null),onClick:()=>ge(H.id),children:n.jsx(Pr,{size:16})})]})]},H.id)})]}),a&&t&&n.jsx("div",{style:me.modal,onClick:()=>A(!1),children:n.jsxs("div",{style:me.modalContent,onClick:H=>H.stopPropagation(),children:[n.jsxs("div",{style:me.modalHeader,children:[n.jsx("div",{style:me.modalTitle,children:t.subject}),n.jsx("button",{style:me.closeButton,onClick:()=>A(!1),children:""})]}),n.jsxs("div",{style:me.modalBody,children:[n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("strong",{children:"From:"})," MaxCap System"]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("strong",{children:"Sent:"})," ",ie(t.sentDate)]}),n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsx("strong",{children:"Status:"}),n.jsx("span",{style:{...me.statusChip(t.status),marginLeft:"8px"},children:t.status})]}),n.jsx("div",{style:{padding:"20px",backgroundColor:i?"rgba(30,41,59,0.5)":"rgba(248,250,252,0.8)",borderRadius:"12px",borderLeft:`4px solid ${te(t.status)}`},children:t.content})]})]})})]})})},pQ=()=>{var me,N,be,H;const{collapsed:i}=Qd(),[e,t]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}}),[r,a]=f.useState(null),[A,c]=f.useState(null),[u,p]=f.useState(null),[m,h]=f.useState(!1),[y,b]=f.useState(null),[L,S]=f.useState(!0),[U,E]=f.useState(null),[P,O]=f.useState(!1),[ve,ce]=f.useState({}),[Q,V]=f.useState([]),[Z,le]=f.useState("week"),[$,ue]=f.useState({weeklyHours:0,capacityUtilization:0,projectCount:0,totalHours:0}),we=f.useRef(null),ge=f.useRef(null);f.useEffect(()=>{y&&(async()=>{try{const I=await ke("/actuals",{credentials:"include"});if(I.ok){const _=await I.json();V(_)}}catch(I){console.error("Error fetching actuals:",I)}})()},[y]),f.useEffect(()=>{y&&(async()=>{try{console.log(` Fetching user stats for period: ${Z}`);const I=await ke(`/actuals/stats?period=${Z}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(I.ok){const _=await I.json();console.log(" Stats received:",_),ue(_)}else console.error(" Failed to fetch stats")}catch(I){console.error(" Error fetching stats:",I)}})()},[y,Z]),f.useEffect(()=>{(async()=>{try{const I=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!I.ok){if(I.status===401){window.location.href="/login";return}throw new Error("Failed to fetch user profile")}const _=await I.json(),Fe=await ke(`/users/${_.id}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(Fe.ok){const Y=await Fe.json();b(Y),ce(Y)}else{const Y={firstName:_.firstName,lastName:_.lastName,email:_.email,role:_.role,department:_.department,team:"Not specified",project:"Not specified",phoneNumber:"Not specified",dateOfBirth:null,dateJoined:null};b(Y),ce(Y)}S(!1)}catch(I){console.error("Error fetching profile:",I),E(I.message),S(!1)}})()},[]),f.useEffect(()=>{ge.current||(ge.current={background:document.body.style.background,margin:document.body.style.margin,padding:document.body.style.padding}),we.current&&document.head.removeChild(we.current);const M=document.createElement("style");M.setAttribute("data-component","admin-profile-background");const I=e?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)";return M.textContent=`
            @keyframes slideIn {
                from {
                    opacity: 0;
                    transform: translateY(-10px) scale(0.95);
                }
                to {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
            }
            
            @keyframes float {
                0%, 100% {
                    transform: translateY(0px);
                }
                50% {
                    transform: translateY(-6px);
                }
            }
            
            @keyframes pulse {
                0%, 100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.5;
                }
            }
            
            @keyframes shimmer {
                0% {
                    background-position: -1000px 0;
                }
                100% {
                    background-position: 1000px 0;
                }
            }
            
            .floating {
                animation: float 3s ease-in-out infinite;
            }
            
            .pulse {
                animation: pulse 2s ease-in-out infinite;
            }
            
            .shimmer {
                animation: shimmer 3s linear infinite;
                background: linear-gradient(
                    90deg,
                    transparent 0%,
                    rgba(59,130,246,0.1) 50%,
                    transparent 100%
                );
                background-size: 1000px 100%;
            }
            
            body {
                background: ${I} !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            * {
                transition: background-color 0.3s ease, background 0.3s ease;
            }
        `,document.head.appendChild(M),we.current=M,()=>{we.current&&document.head.contains(we.current)&&(document.head.removeChild(we.current),we.current=null)}},[e]);const te=M=>M?new Date(M).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}):"Not specified",Me=()=>{const M=!e;t(M),h(!1);try{localStorage.setItem("darkMode",M.toString())}catch{console.log("Dark mode preference cannot be saved in this environment")}},ie={page:{minHeight:"100vh",padding:"30px 40px",background:e?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease",position:"relative"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},headerLeft:{display:"flex",alignItems:"center",gap:"16px"},backButton:M=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:M?"rgba(59,130,246,0.1)":e?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:M?"#3b82f6":e?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:M?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:M?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),title:{fontSize:"32px",fontWeight:"700",color:e?"#f1f5f9":"#1e293b",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},headerRight:{display:"flex",alignItems:"center",gap:"16px"},topButton:M=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:M?"rgba(59,130,246,0.1)":e?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:M?"#3b82f6":e?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:M?"0 8px 25px rgba(59,130,246,0.15)":"0 4px 12px rgba(0,0,0,0.08)",transform:M?"translateY(-2px) scale(1.05)":"translateY(0) scale(1)",backdropFilter:"blur(10px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),notificationBadge:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",backgroundColor:"#ef4444",borderRadius:"50%",border:"2px solid #fff"},profileTooltip:{position:"absolute",top:"60px",right:"0",backgroundColor:e?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:e?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:1e3,animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:e?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:e?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none",transition:"all 0.3s ease"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},userAvatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px"},userDetails:{flex:1},userName:{fontSize:"14px",fontWeight:"600",color:e?"#e2e8f0":"#1e293b",marginBottom:"2px",transition:"all 0.3s ease"},userRole:{fontSize:"12px",color:e?"#94a3b8":"#64748b",transition:"all 0.3s ease"},userStats:{borderTop:e?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between",transition:"all 0.3s ease"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:e?"#e2e8f0":"#1e293b",transition:"all 0.3s ease"},tooltipStatLabel:{fontSize:"10px",color:e?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",transition:"all 0.3s ease"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",marginTop:"8px",width:"100%",textAlign:"center"},container:{width:"100%",maxWidth:"2000px",margin:"0 auto"},card:M=>({backgroundColor:e?"rgba(55,65,81,0.9)":"rgba(255,255,255,0.9)",borderRadius:"20px",padding:"40px",marginBottom:"28px",boxShadow:M?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(59,130,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:M?"translateY(-8px) scale(1.01)":"translateY(0) scale(1)",border:e?"1px solid rgba(75,85,99,0.8)":"1px solid rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden"}),cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.03) 0%, transparent 70%)",opacity:0,transition:"opacity 0.4s ease",pointerEvents:"none"},floatingIcon:(M="#3b82f6")=>({position:"absolute",top:"20px",right:"20px",opacity:.1,fontSize:"48px",color:M}),profileHeader:{display:"flex",alignItems:"center",gap:"32px",marginBottom:"32px",paddingBottom:"32px",borderBottom:e?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.5)",position:"relative"},largeAvatar:{width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"700",fontSize:"42px",boxShadow:"0 12px 35px rgba(59,130,246,0.4)",border:"4px solid rgba(255,255,255,0.2)",position:"relative"},avatarRing:{position:"absolute",inset:"-8px",borderRadius:"50%",border:"2px solid rgba(59,130,246,0.2)",animation:"pulse 3s ease-in-out infinite"},profileInfo:{flex:1},profileName:{fontSize:"36px",fontWeight:"700",color:e?"#f1f5f9":"#1e293b",marginBottom:"8px",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},profileEmail:{fontSize:"16px",color:e?"#94a3b8":"#64748b",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},roleChip:{padding:"8px 20px",borderRadius:"24px",fontSize:"14px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",backgroundColor:(y==null?void 0:y.role)==="admin"?"#fef3c7":"#dbeafe",color:(y==null?void 0:y.role)==="admin"?"#92400e":"#1e40af",display:"inline-flex",alignItems:"center",gap:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px",marginBottom:"28px"},statBox:M=>({backgroundColor:e?"rgba(30,41,59,0.5)":"rgba(248,250,252,0.8)",borderRadius:"16px",padding:"32px",textAlign:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",transform:M?"translateY(-4px) scale(1.03)":"translateY(0) scale(1)",boxShadow:M?"0 12px 24px rgba(0,0,0,0.15)":"0 4px 12px rgba(0,0,0,0.08)",border:e?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",position:"relative",overflow:"hidden"}),statIcon:{width:"48px",height:"48px",margin:"0 auto 12px",borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:"#3b82f6"},statValue:{fontSize:"32px",fontWeight:"800",color:e?"#e2e8f0":"#1e293b",marginBottom:"4px"},statLabel:{fontSize:"13px",fontWeight:"600",color:e?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},detailsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"24px"},detailItem:M=>({display:"flex",alignItems:"center",gap:"16px",padding:"20px",borderRadius:"16px",backgroundColor:e?"rgba(30,41,59,0.5)":"rgba(248,250,252,0.8)",border:e?"1px solid rgba(75,85,99,0.3)":"1px solid rgba(226,232,240,0.3)",transition:"all 0.3s ease",transform:M?"translateX(4px)":"translateX(0)",boxShadow:M?"0 4px 12px rgba(59,130,246,0.1)":"none"}),detailIcon:{padding:"14px",borderRadius:"12px",backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"48px",minHeight:"48px"},detailContent:{flex:1},detailLabel:{fontSize:"12px",fontWeight:"600",color:e?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"6px"},detailValue:{fontSize:"16px",fontWeight:"600",color:e?"#e2e8f0":"#1e293b"},sectionTitle:{fontSize:"20px",fontWeight:"700",color:e?"#e2e8f0":"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px"},editButton:M=>({padding:"10px 20px",borderRadius:"10px",border:"none",backgroundColor:M?"#ef4444":"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",position:"absolute",top:"28px",right:"28px"}),loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",fontSize:"18px",color:e?"#e2e8f0":"#64748b"},errorContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"60vh",gap:"16px"},errorText:{fontSize:"18px",color:"#ef4444",textAlign:"center"},retryButton:{padding:"12px 24px",borderRadius:"8px",border:"none",backgroundColor:"#3b82f6",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},periodToggleStyles:{container:{display:"flex",gap:"8px",padding:"4px",backgroundColor:e?"rgba(51,65,85,0.5)":"rgba(255,255,255,0.9)",borderRadius:"12px",border:e?"1px solid rgba(75,85,99,0.5)":"1px solid rgba(226,232,240,0.8)",backdropFilter:"blur(10px)",marginBottom:"20px",width:"fit-content"},button:(M,I)=>({padding:"10px 20px",borderRadius:"8px",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:M?"#3b82f6":I?"rgba(59,130,246,0.1)":"transparent",color:M?"#fff":e?"#e2e8f0":"#64748b",boxShadow:M?"0 2px 8px rgba(59,130,246,0.3)":"none",transform:I&&!M?"scale(1.05)":"scale(1)"})}};return L?n.jsx("div",{style:ie.page,children:n.jsx("div",{style:ie.loadingContainer,children:n.jsx("div",{className:"pulse",children:"Loading profile..."})})}):U?n.jsx("div",{style:ie.page,children:n.jsxs("div",{style:ie.errorContainer,children:[n.jsxs("div",{style:ie.errorText,children:["Failed to load profile: ",U]}),n.jsx("button",{style:ie.retryButton,onClick:()=>window.location.reload(),children:"Retry"})]})}):y?n.jsx("div",{style:ie.page,children:n.jsxs("div",{style:ie.container,children:[n.jsxs("div",{style:ie.header,children:[n.jsxs("div",{style:ie.headerLeft,children:[n.jsx("button",{style:ie.backButton(r==="back"),onClick:()=>window.history.back(),onMouseEnter:()=>a("back"),onMouseLeave:()=>a(null),className:"floating",children:n.jsx(Pi,{size:20})}),n.jsx("h1",{style:ie.title,children:"My Profile"})]}),n.jsxs("div",{style:ie.headerRight,children:[n.jsxs("button",{style:ie.topButton(r==="alerts"),onMouseEnter:()=>a("alerts"),onMouseLeave:()=>a(null),onClick:()=>{window.location.href="/adminalerts"},children:[n.jsx(lr,{size:20}),n.jsx("div",{style:ie.notificationBadge})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{style:{...ie.topButton(!0),backgroundColor:"rgba(59,130,246,0.1)",color:"#3b82f6"},onMouseEnter:()=>h(!0),onMouseLeave:()=>{},children:n.jsx(Yt,{size:20})}),m&&y&&n.jsxs("div",{style:ie.profileTooltip,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[n.jsx("div",{style:ie.tooltipArrow}),n.jsxs("div",{style:ie.userInfo,children:[n.jsxs("div",{style:ie.userAvatar,children:[(me=y.firstName)==null?void 0:me[0],(N=y.lastName)==null?void 0:N[0]]}),n.jsxs("div",{style:ie.userDetails,children:[n.jsxs("div",{style:ie.userName,children:[y.firstName," ",y.lastName]}),n.jsxs("div",{style:ie.userRole,children:[y.role==="admin"?"Admin":"Member","  ",y.department]})]})]}),n.jsxs("div",{style:ie.userStats,children:[n.jsxs("div",{style:ie.tooltipStatItem,children:[n.jsx("div",{style:ie.tooltipStatNumber,children:Q.reduce((M,I)=>M+parseFloat(I.Hours||0),0).toFixed(1)}),n.jsx("div",{style:ie.tooltipStatLabel,children:"Hours"})]}),n.jsxs("div",{style:ie.tooltipStatItem,children:[n.jsx("div",{style:ie.tooltipStatNumber,children:Q.filter(M=>M.Category==="Project").length}),n.jsx("div",{style:ie.tooltipStatLabel,children:"Projects"})]}),n.jsxs("div",{style:ie.tooltipStatItem,children:[n.jsxs("div",{style:ie.tooltipStatNumber,children:[$.capacityUtilization,"%"]}),n.jsx("div",{style:ie.tooltipStatLabel,children:"Capacity"})]})]}),n.jsx("button",{style:ie.themeToggle,onClick:Me,children:e?" Light Mode":" Dark Mode"})]})]})]})]}),n.jsxs("div",{style:ie.card(A==="main"),onMouseEnter:()=>c("main"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:ie.cardGlow}),n.jsx("div",{style:ie.floatingIcon(),children:n.jsx(Yt,{})}),n.jsxs("div",{style:ie.profileHeader,children:[n.jsxs("div",{style:ie.largeAvatar,className:"floating",children:[n.jsx("div",{style:ie.avatarRing}),(be=y.firstName)==null?void 0:be[0],(H=y.lastName)==null?void 0:H[0]]}),n.jsxs("div",{style:ie.profileInfo,children:[n.jsxs("div",{style:ie.profileName,children:[y.firstName," ",y.lastName]}),n.jsxs("div",{style:ie.profileEmail,children:[n.jsx(Qc,{size:16}),y.email]}),n.jsxs("div",{style:ie.roleChip,children:[n.jsx(hs,{size:16}),y.role==="admin"?"Administrator":"Member"]})]})]}),n.jsxs("div",{style:ie.statsGrid,children:[n.jsxs("div",{style:ie.statBox(A==="stat-1"),onMouseEnter:()=>c("stat-1"),onMouseLeave:()=>c(null),children:[n.jsx("div",{className:"shimmer",style:{position:"absolute",inset:0,opacity:A==="stat-1"?1:0}}),n.jsx("div",{style:ie.statIcon,children:n.jsx(Mi,{size:24})}),n.jsxs("div",{style:ie.statValue,children:[$.totalHours||0,"h"]}),n.jsxs("div",{style:ie.statLabel,children:["Hours ",Z==="week"?"This Week":"This Month"]})]}),n.jsxs("div",{style:ie.statBox(A==="stat-2"),onMouseEnter:()=>c("stat-2"),onMouseLeave:()=>c(null),children:[n.jsx("div",{className:"shimmer",style:{position:"absolute",inset:0,opacity:A==="stat-2"?1:0}}),n.jsx("div",{style:ie.statIcon,children:n.jsx(ua,{size:24})}),n.jsx("div",{style:ie.statValue,children:$.projectHours>0?Math.ceil($.projectHours/40):0}),n.jsx("div",{style:ie.statLabel,children:"Active Projects"})]}),n.jsxs("div",{style:ie.statBox(A==="stat-3"),onMouseEnter:()=>c("stat-3"),onMouseLeave:()=>c(null),children:[n.jsx("div",{className:"shimmer",style:{position:"absolute",inset:0,opacity:A==="stat-3"?1:0}}),n.jsx("div",{style:ie.statIcon,children:n.jsx(DA,{size:24})}),n.jsxs("div",{style:ie.statValue,children:[$.capacityUtilization,"%"]}),n.jsx("div",{style:ie.statLabel,children:"Capacity Usage"})]})]})]}),n.jsxs("div",{style:ie.periodToggleStyles.container,children:[n.jsx("button",{style:ie.periodToggleStyles.button(Z==="week",u==="week"),onClick:()=>le("week"),onMouseEnter:()=>p("week"),onMouseLeave:()=>p(null),children:"This Week"}),n.jsx("button",{style:ie.periodToggleStyles.button(Z==="month",u==="month"),onClick:()=>le("month"),onMouseEnter:()=>p("month"),onMouseLeave:()=>p(null),children:"This Month"})]}),n.jsxs("div",{style:ie.card(A==="info"),onMouseEnter:()=>c("info"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:ie.cardGlow}),n.jsx("div",{style:ie.floatingIcon("#10b981"),children:n.jsx(cs,{})}),n.jsxs("div",{style:ie.sectionTitle,children:[n.jsx(cs,{size:24}),"Personal Information"]}),n.jsxs("div",{style:ie.detailsGrid,children:[n.jsxs("div",{style:ie.detailItem(A==="detail-1"),onMouseEnter:()=>c("detail-1"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:ie.detailIcon,children:n.jsx(cs,{size:20})}),n.jsxs("div",{style:ie.detailContent,children:[n.jsx("div",{style:ie.detailLabel,children:"Department"}),n.jsx("div",{style:ie.detailValue,children:y.department||"Not specified"})]})]}),n.jsxs("div",{style:ie.detailItem(A==="detail-2"),onMouseEnter:()=>c("detail-2"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:ie.detailIcon,children:n.jsx(Yt,{size:20})}),n.jsxs("div",{style:ie.detailContent,children:[n.jsx("div",{style:ie.detailLabel,children:"Team"}),n.jsx("div",{style:ie.detailValue,children:y.team||"Not specified"})]})]}),n.jsxs("div",{style:ie.detailItem(A==="detail-3"),onMouseEnter:()=>c("detail-3"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:ie.detailIcon,children:n.jsx(ib,{size:20})}),n.jsxs("div",{style:ie.detailContent,children:[n.jsx("div",{style:ie.detailLabel,children:"Phone Number"}),n.jsx("div",{style:ie.detailValue,children:y.phoneNumber||"Not specified"})]})]}),n.jsxs("div",{style:ie.detailItem(A==="detail-4"),onMouseEnter:()=>c("detail-4"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:ie.detailIcon,children:n.jsx(uo,{size:20})}),n.jsxs("div",{style:ie.detailContent,children:[n.jsx("div",{style:ie.detailLabel,children:"Date Joined"}),n.jsx("div",{style:ie.detailValue,children:te(y.dateJoined)})]})]}),n.jsxs("div",{style:ie.detailItem(A==="detail-5"),onMouseEnter:()=>c("detail-5"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:ie.detailIcon,children:n.jsx(ua,{size:20})}),n.jsxs("div",{style:ie.detailContent,children:[n.jsx("div",{style:ie.detailLabel,children:"Current Project"}),n.jsx("div",{style:ie.detailValue,children:y.project||"Not specified"})]})]}),n.jsxs("div",{style:ie.detailItem(A==="detail-6"),onMouseEnter:()=>c("detail-6"),onMouseLeave:()=>c(null),children:[n.jsx("div",{style:ie.detailIcon,children:n.jsx(ob,{size:20})}),n.jsxs("div",{style:ie.detailContent,children:[n.jsx("div",{style:ie.detailLabel,children:"Location"}),n.jsx("div",{style:ie.detailValue,children:"Singapore"})]})]})]})]})]})}):null};function hQ(){const{instance:i,accounts:e}=pw(),t=f.useRef(!1),[r,a]=f.useState("checking"),[A,c]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!1}});f.useEffect(()=>{if(t.current){console.log(" Already processed");return}console.log(" AuthRedirect mounted"),console.log(" Current URL:",window.location.href),console.log(" Has hash:",window.location.hash?"YES":"NO"),console.log(" Hash value:",window.location.hash),console.log(" Accounts:",(e==null?void 0:e.length)||0),(async()=>{try{if(a("processing"),console.log(" Calling handleRedirectPromise()..."),t.current)return;t.current=!0;const L=await i.handleRedirectPromise();if(L){console.log(" Got response from Microsoft!"),console.log(" Email:",L.account.username),console.log(" Access token:",L.accessToken?"YES":"NO"),await u(L.account,L.accessToken);return}if(e&&e.length>0){console.log(" Using cached account");const S=e[0];i.setActiveAccount(S);try{const U=await i.acquireTokenSilent({scopes:["openid","profile","email","User.Read"],account:S});console.log(" Token acquired from cache"),await u(S,U.accessToken);return}catch(U){console.error(" Token acquisition error:",U),console.log(" Redirecting to Microsoft for fresh login..."),await i.loginRedirect({scopes:["openid","profile","email","User.Read"]});return}}console.warn(" No response and no accounts - redirecting to login"),setTimeout(()=>{window.location.href="/"},2e3)}catch(L){console.error(" Error in handleAuth:",L),setTimeout(()=>{window.location.href="/"},2e3)}})()},[i,e]);const u=async(b,L)=>{try{a("authenticating"),console.log(" Sending to backend..."),console.log(" User:",b.username);const S=await ke("/login/microsoft",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`}});if(console.log(" Backend response:",S.status),!S.ok){const O=await S.text();console.error(" Backend error:",O),alert(`Backend login failed: ${S.status}`),window.location.href="/";return}const U=await S.json();console.log(" Backend login successful!"),console.log(" User role:",U.role),a("verifying"),console.log(" Waiting 1.5s for cookie to be set...");let E=!1;for(let O=0;O<3;O++){if((await ke("/user/profile",{credentials:"include"})).ok){E=!0;break}await new Promise(ce=>setTimeout(ce,500))}if(!E)throw new Error("Cookie not ready");console.log(" Testing authentication...");const P=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});console.log(" Authentication verified!"),a("redirecting"),window.location.replace("/admindashboard")}catch(S){if(S.name==="AbortError"){console.warn(" Fetch aborted due to redirect");return}console.error(" Error in processLogin:",S),alert("Login failed. Please try again.")}},p=()=>r==="redirecting"?n.jsx("span",{style:{lineHeight:0,display:"block"},children:n.jsx(po,{size:64,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"success-icon"})}):n.jsx("span",{style:{lineHeight:0,display:"block"},children:n.jsx(F2,{size:64,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"floating-icon"})}),m=()=>{switch(r){case"checking":return"Authenticating...";case"processing":return"Processing...";case"authenticating":return"Securing Session...";case"verifying":return"Verifying...";case"redirecting":return"Success!";default:return"Loading..."}},h=()=>{switch(r){case"redirecting":return"Redirecting to your dashboard";default:return"Please wait while we log you in"}},y={page:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:A?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",fontFamily:'"Montserrat", sans-serif',position:"relative",overflow:"hidden",transition:"all 0.3s ease"},backgroundOrbs:{position:"absolute",width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"},orb:(b,L,S,U)=>({position:"absolute",top:b,left:L,width:S,height:S,borderRadius:"50%",background:A?"radial-gradient(circle, rgba(59,130,246,0.15) 0%, transparent 70%)":"radial-gradient(circle, rgba(59,130,246,0.1) 0%, transparent 70%)",animation:`float ${6+U}s ease-in-out infinite`,animationDelay:`${U}s`,filter:"blur(40px)"}),container:{position:"relative",zIndex:10,textAlign:"center",maxWidth:"600px",padding:"0 20px"},card:{paddingTop:"100px"},cardGlow:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(59,130,246,0.05) 0%, transparent 70%)",pointerEvents:"none"},iconContainer:{display:"flex",justifyContent:"center",marginBottom:"-40px",position:"relative",zIndex:20},iconWrapper:{width:"160px",height:"160px",borderRadius:"50%",background:A?"linear-gradient(135deg, rgba(59,130,246,0.2) 0%, rgba(37,99,235,0.2) 100%)":"linear-gradient(135deg, rgba(59,130,246,0.15) 0%, rgba(37,99,235,0.15) 100%)",display:"flex",justifyContent:"center",alignItems:"center",color:"#3b82f6",border:A?"3px solid rgba(59,130,246,0.3)":"3px solid rgba(59,130,246,0.2)",position:"relative",overflow:"hidden",animation:"glow 2s ease-in-out infinite",isolation:"isolate"},iconGlow:{position:"absolute",inset:"-30px",borderRadius:"50%",background:A?"radial-gradient(circle, rgba(59,130,246,0.45), transparent 70%)":"radial-gradient(circle, rgba(59,130,246,0.35), transparent 70%)",filter:"blur(30px)",zIndex:0,pointerEvents:"none"},iconRing:{position:"absolute",inset:"-8px",borderRadius:"50%",border:"2px solid rgba(59,130,246,0.2)",animation:"pulse-ring 2s ease-in-out infinite"},title:{fontSize:"36px",fontWeight:"700",color:A?"#f1f5f9":"#1e293b",marginBottom:"16px",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},subtitle:{fontSize:"20px",fontWeight:"600",color:"#3b82f6",marginBottom:"12px"},description:{fontSize:"15px",color:A?"#94a3b8":"#64748b",marginBottom:"50px",lineHeight:"1.6"},loadingDots:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"40px"},dot:b=>({width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#3b82f6",animation:`bounce 1.4s ease-in-out ${b}s infinite`,boxShadow:"0 4px 12px rgba(59,130,246,0.4)"}),consoleNote:{fontSize:"12px",color:A?"#64748b":"#94a3b8",fontStyle:"italic"}};return n.jsxs("div",{style:y.page,children:[n.jsxs("div",{style:y.backgroundOrbs,children:[n.jsx("div",{style:y.orb("10%","10%","400px",0)}),n.jsx("div",{style:y.orb("60%","70%","350px",1)}),n.jsx("div",{style:y.orb("30%","80%","300px",2)})]}),n.jsxs("div",{style:y.container,children:[n.jsx("div",{style:y.iconContainer,children:n.jsxs("div",{style:y.iconWrapper,className:"floating",children:[n.jsx("div",{style:y.iconGlow}),n.jsx("div",{style:y.iconRing}),p()]})}),n.jsxs("div",{style:y.card,children:[n.jsx("div",{style:y.cardGlow}),n.jsx("div",{style:y.title,children:"Processing Microsoft Login"}),n.jsx("div",{style:y.subtitle,children:m()}),n.jsx("div",{style:y.description,children:h()}),n.jsxs("div",{style:y.loadingDots,children:[n.jsx("div",{style:y.dot(0)}),n.jsx("div",{style:y.dot(.2)}),n.jsx("div",{style:y.dot(.4)})]}),n.jsx("div",{style:y.consoleNote,children:"Press F12 to view detailed authentication logs"})]})]}),n.jsx("style",{children:`
        @keyframes float {
          0%, 100% {
            transform: translateY(0px) translateX(0px) rotate(0deg);
          }
          33% {
            transform: translateY(-20px) translateX(10px) rotate(5deg);
          }
          66% {
            transform: translateY(10px) translateX(-10px) rotate(-5deg);
          }
        }
        
        @keyframes pulse-ring {
          0%, 100% {
            opacity: 0.3;
            transform: scale(1);
          }
          50% {
            opacity: 0.6;
            transform: scale(1.15);
          }
        }
        
        @keyframes scale-up {
          0% {
            transform: scale(0.5);
            opacity: 0;
          }
          50% {
            transform: scale(1.1);
          }
          100% {
            transform: scale(1);
            opacity: 1;
          }
        }
        
        @keyframes bounce {
          0%, 100% {
            transform: translateY(0px);
          }
          50% {
            transform: translateY(-20px);
          }
        }
        
        @keyframes glow {
          0%, 100% {
            box-shadow: 0 15px 40px rgba(59,130,246,0.4);
          }
          50% {
            box-shadow: 0 15px 60px rgba(59,130,246,0.7);
          }
        }
        
        .floating {
          animation: float 4s ease-in-out infinite;
        }
        
        .floating-icon {
          animation: float 3s ease-in-out infinite, glow 2s ease-in-out infinite;
        }
        
        .success-icon {
          animation: scale-up 0.6s ease-out;
          color: #10b981 !important;
        }
        
        * {
          transition: background-color 0.3s ease, background 0.3s ease;
        }

        .floating-icon svg,
.success-icon svg,
.floating-icon,
.success-icon {
  background: none !important;
  background-color: transparent !important;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

/* Target the SVG elements directly */
svg {
  background: transparent !important;
  border: none !important;
}

/* Remove any rect elements that might be creating the square */
svg rect {
  display: none !important;
}

.floating-icon,
.success-icon {
  line-height: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  z-index: 10;
}
      `})]})}const gQ=()=>{var pe;const i=["muhammad.hasan@ihrp.sg","jumana.haseen@ihrp.sg"],[e,t]=f.useState(null),[r,a]=f.useState(!0),[A,c]=f.useState(null),[u,p]=f.useState(null),[m,h]=f.useState("contexts"),[y,b]=f.useState([]),[L,S]=f.useState(!1),[U,E]=f.useState(!1),[P,O]=f.useState(null),[ve,ce]=f.useState({}),[Q,V]=f.useState({subscriptionName:"",workspaceId:"",clientId:"",clientSecret:"",baseUrl:"https://cloud.manictime.com"}),[Z,le]=f.useState(!1),[$,ue]=f.useState(null),[we,ge]=f.useState(null),[te,Me]=f.useState(null),[ie,me]=f.useState(!1),[N,be]=f.useState(null),[H,M]=f.useState(null),[I,_]=f.useState(""),[Fe,Y]=f.useState({aiContext:!0,websites:!0}),[D,K]=f.useState({domainId:"",name:"",purpose:"",aiContext:"",projectType:"Project"}),[Te,Ne]=f.useState(!1),[G,W]=f.useState([{value:"",description:"",type:"website"}]),[j,F]=f.useState(()=>{try{return localStorage.getItem("darkMode")==="true"}catch{return!0}});f.useEffect(()=>{B(),Xe(),ee()},[]),f.useEffect(()=>{Ne(!1),W([{value:"",description:"",type:"website"}])},[$==null?void 0:$.id]);const Xe=async()=>{try{const R=await ke("/user/profile",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(R.ok){const Ce=await R.json();p(Ce)}}catch(R){console.error("Failed to fetch user data:",R)}},B=async()=>{try{const R=await ke("/api/ai/admin/structure",{credentials:"include"});if(!R.ok)throw new Error("Failed to load admin AI structure");const Ce=await R.json();t(Ce.domains||[])}catch(R){c(R.message)}finally{a(!1)}},ee=async()=>{S(!0);try{const R=await ke("/api/manictime-admin/subscriptions",{credentials:"include"});if(R.ok){const Ce=await R.json();b(Ce)}}catch(R){console.error("Failed to fetch subscriptions:",R)}finally{S(!1)}},Pe=async()=>{if(!D.domainId){alert("Please select a department");return}if(!D.name.trim()){alert("Please enter a context name");return}try{await ke("/api/ai/contexts",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)}),le(!1),K({domainId:"",name:"",purpose:"",aiContext:"",projectType:"Project"}),B()}catch(R){console.error("Failed to create context:",R),alert("Failed to create context. Please try again.")}},$e=()=>{W([...G,{value:"",description:"",type:"website"}])},kt=(R,Ce,re)=>{const xe=[...G];xe[R][Ce]=re,W(xe)},pt=async()=>{if(!$)return;const R=($.resources||[]).map(re=>re.value),Ce=G.filter(re=>re.value.trim()&&!R.includes(re.value.trim()));if(Ce.length===0){alert("Add at least one resource");return}try{for(const re of Ce)await ke("/api/ai/context-resources",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({contextId:$.id,resourceType:re.type,identifier:re.value,description:re.description})});W([{value:"",description:"",type:"website"}]),Ne(!1),B()}catch(re){console.error("Failed to save resources:",re),alert("Failed to save resources. Please try again.")}},Ut=async R=>{try{(await ke(`/api/ai/context-resources/${R}`,{method:"DELETE",credentials:"include"})).ok&&(ue(re=>({...re,resources:re.resources.filter(xe=>xe.id!==R)})),B())}catch(Ce){console.error("Failed to delete resource:",Ce),alert("Failed to delete resource. Please try again.")}},Lt=()=>{const R=!j;F(R),me(!1);try{localStorage.setItem("darkMode",R)}catch(Ce){console.error("Failed to save theme preference:",Ce)}},se=R=>{Y(Ce=>({...Ce,[R]:!Ce[R]}))},Tt=async()=>{if(!Q.subscriptionName||!Q.workspaceId||!Q.clientId||!Q.clientSecret){alert("Please fill in all required fields");return}try{(await ke("/api/manictime-admin/subscriptions",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)})).ok&&(E(!1),V({subscriptionName:"",workspaceId:"",clientId:"",clientSecret:"",baseUrl:"https://cloud.manictime.com"}),ee())}catch(R){console.error("Failed to create subscription:",R),alert("Failed to create subscription")}},ne=async()=>{if(P)try{(await ke(`/api/manictime-admin/subscriptions/${P.Id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)})).ok&&(O(null),ee())}catch(R){console.error("Failed to update subscription:",R),alert("Failed to update subscription")}},fe=async R=>{if(confirm("Are you sure? This will affect all users using this subscription."))try{(await ke(`/api/manictime-admin/subscriptions/${R}`,{method:"DELETE",credentials:"include"})).ok&&ee()}catch(Ce){console.error("Failed to delete subscription:",Ce),alert("Failed to delete subscription")}},Qe=R=>{ce(Ce=>({...Ce,[R]:!Ce[R]})),ve[R]||setTimeout(()=>{ce(Ce=>({...Ce,[R]:!1}))},1e4)},w={page:{minHeight:"100vh",padding:"32px",background:j?"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #f1f5f9 100%)",fontFamily:'"Montserrat", sans-serif',transition:"all 0.3s ease",position:"relative",overflow:"hidden"},pageGlow:{position:"fixed",top:0,left:0,right:0,bottom:0,background:j?"radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.08) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.08) 0%, transparent 50%)":"radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.03) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.03) 0%, transparent 50%)",pointerEvents:"none",zIndex:0},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"32px",position:"relative",zIndex:10},header:{fontSize:"28px",fontWeight:"700",background:j?"linear-gradient(135deg, #a78bfa 0%, #6366f1 100%)":"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",display:"flex",alignItems:"center",gap:"12px"},headerIcon:{animation:"pulse 2s ease-in-out infinite",filter:"drop-shadow(0 0 8px rgba(139, 92, 246, 0.6))"},subtitle:{fontSize:"14px",color:j?"#94a3b8":"#64748b",marginTop:"8px",fontWeight:"500",letterSpacing:"0.5px"},headerRight:{display:"flex",alignItems:"center",gap:"16px",position:"relative"},addButton:R=>({padding:"12px 24px",borderRadius:"12px",border:"none",background:R?"linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%)":"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",color:"#fff",cursor:"pointer",transition:"all 0.3s ease",boxShadow:R?"0 8px 25px rgba(139,92,246,0.3)":"0 4px 12px rgba(139,92,246,0.2)",transform:R?"translateY(-2px) scale(1.05)":"translateY(0)",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"}),profileButton:R=>({padding:"12px",borderRadius:"12px",border:"none",backgroundColor:R?"rgba(139,92,246,0.15)":j?"rgba(51,65,85,0.9)":"rgba(255,255,255,0.9)",color:R?"#8b5cf6":j?"#e2e8f0":"#64748b",cursor:"pointer",transition:"all 0.3s ease",boxShadow:R?"0 8px 25px rgba(139,92,246,0.2)":"0 4px 12px rgba(0,0,0,0.08)",transform:R?"translateY(-2px) scale(1.05)":"translateY(0)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"}),profileTooltip:{position:"fixed",top:"80px",right:"32px",backgroundColor:j?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"12px",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",padding:"16px",minWidth:"250px",border:j?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",zIndex:999999,pointerEvents:"auto",animation:"slideIn 0.2s ease-out",transition:"all 0.3s ease"},tooltipArrow:{position:"absolute",top:"-6px",right:"16px",width:"12px",height:"12px",backgroundColor:j?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",transform:"rotate(45deg)",border:j?"1px solid rgba(51,65,85,0.8)":"1px solid rgba(255,255,255,0.8)",borderBottom:"none",borderRight:"none"},userInfo:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},avatar:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"600",fontSize:"16px",boxShadow:"0 4px 12px rgba(139,92,246,0.3)"},userName:{fontSize:"14px",fontWeight:"600",color:j?"#e2e8f0":"#1e293b",marginBottom:"2px"},userRole:{fontSize:"12px",color:j?"#94a3b8":"#64748b"},userStats:{borderTop:j?"1px solid rgba(51,65,85,0.5)":"1px solid rgba(226,232,240,0.5)",paddingTop:"12px",display:"flex",justifyContent:"space-between"},tooltipStatItem:{textAlign:"center"},tooltipStatNumber:{fontSize:"14px",fontWeight:"700",color:j?"#e2e8f0":"#1e293b"},tooltipStatLabel:{fontSize:"10px",color:j?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"0.5px"},themeToggle:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:"rgba(139,92,246,0.1)",color:"#8b5cf6",fontSize:"12px",fontWeight:"600",cursor:"pointer",marginTop:"8px",width:"100%",transition:"all 0.2s ease"},contentContainer:{display:"grid",gridTemplateColumns:"320px 1fr",gap:"28px",position:"relative",zIndex:10},panel:R=>({background:j?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.7)",backdropFilter:"blur(20px)",borderRadius:"20px",padding:"28px",border:j?"1px solid rgba(139,92,246,0.2)":"1px solid rgba(139,92,246,0.1)",boxShadow:R?"0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(139,92,246,0.1)":"0 8px 25px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:R?"translateY(-4px)":"translateY(0)",position:"relative",overflow:"visible"}),panelGlow:{position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, transparent, rgba(139,92,246,0.5), transparent)",opacity:.5},panelTitle:{display:"flex",alignItems:"center",gap:"10px",fontSize:"18px",fontWeight:"700",color:j?"#e2e8f0":"#1e293b",marginBottom:"20px",paddingBottom:"16px",borderBottom:j?"2px solid rgba(139,92,246,0.2)":"2px solid rgba(139,92,246,0.1)"},typeHeader:{fontSize:"13px",fontWeight:"700",color:j?"#94a3b8":"#64748b",textTransform:"uppercase",letterSpacing:"1px",marginTop:"16px",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},contextCard:(R,Ce)=>({background:R?j?"rgba(139,92,246,0.15)":"rgba(139,92,246,0.08)":Ce?j?"rgba(51,65,85,0.5)":"rgba(248,250,252,0.8)":"transparent",borderRadius:"12px",padding:"16px",marginBottom:"10px",border:R?j?"1px solid rgba(139,92,246,0.4)":"1px solid rgba(139,92,246,0.3)":j?"1px solid rgba(51,65,85,0.3)":"1px solid rgba(226,232,240,0.5)",cursor:"pointer",transition:"all 0.3s ease",transform:Ce?"translateX(4px)":"translateX(0)",boxShadow:R?"0 4px 12px rgba(139,92,246,0.2)":"none"}),contextTitle:{fontWeight:"600",fontSize:"14px",color:j?"#e2e8f0":"#1e293b",marginBottom:"4px",display:"flex",alignItems:"center",gap:"6px"},contextSubtitle:{fontSize:"11px",color:j?"#94a3b8":"#64748b",display:"flex",alignItems:"center",gap:"4px",marginTop:"4px"},muted:{fontSize:"12px",color:j?"#94a3b8":"#64748b",lineHeight:"1.4"},sectionHeader:(R,Ce)=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",marginTop:"16px",marginBottom:"12px",background:Ce?j?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)":j?"rgba(51,65,85,0.3)":"rgba(248,250,252,0.5)",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",border:j?"1px solid rgba(139,92,246,0.2)":"1px solid rgba(139,92,246,0.1)"}),sectionTitle:{fontSize:"16px",fontWeight:"700",color:j?"#e2e8f0":"#1e293b",display:"flex",alignItems:"center",gap:"8px"},sectionContent:R=>({maxHeight:R?"2000px":"0",overflow:"hidden",transition:"max-height 0.3s ease",paddingTop:R?"8px":"0"}),button:(R,Ce="primary")=>({marginTop:"12px",padding:"12px 20px",...{primary:{background:R?"linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%)":"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",color:"#fff"},secondary:{background:R?j?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.15)":j?"rgba(51,65,85,0.6)":"rgba(248,250,252,0.7)",color:j?"#e2e8f0":"#1e293b"}}[Ce],border:"none",borderRadius:"10px",cursor:"pointer",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",transition:"all 0.3s ease",transform:R?"translateY(-2px)":"translateY(0)",boxShadow:R?"0 8px 20px rgba(139,92,246,0.3)":"0 4px 12px rgba(139,92,246,0.2)",width:"100%"}),input:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:j?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",background:j?"rgba(30,41,59,0.5)":"rgba(255,255,255,0.8)",color:j?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",transition:"all 0.2s ease",marginBottom:"12px",fontFamily:'"Montserrat", sans-serif'},select:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:j?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",background:j?"rgba(30,41,59,0.5)":"rgba(255,255,255,0.8)",color:j?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",transition:"all 0.2s ease",marginBottom:"12px",fontFamily:'"Montserrat", sans-serif',cursor:"pointer"},textarea:{width:"100%",padding:"12px 16px",borderRadius:"10px",border:j?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",background:j?"rgba(30,41,59,0.5)":"rgba(255,255,255,0.8)",color:j?"#e2e8f0":"#1e293b",fontSize:"14px",outline:"none",transition:"all 0.2s ease",marginBottom:"12px",fontFamily:'"Montserrat", sans-serif',resize:"vertical",minHeight:"80px"},tag:R=>({background:j?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.1)",padding:"8px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",color:"#8b5cf6",marginRight:"8px",marginBottom:"8px",display:"inline-flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",transform:R?"scale(1.05)":"scale(1)",border:j?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)"}),deleteButton:R=>({background:"transparent",border:"none",color:R?"#dc2626":"#ef4444",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"all 0.2s ease",display:"flex",alignItems:"center",transform:R?"scale(1.1)":"scale(1)"}),websiteInput:{display:"flex",gap:"8px",marginBottom:"8px",alignItems:"center"},websiteAddButton:R=>({padding:"12px",background:R?j?"rgba(139,92,246,0.3)":"rgba(139,92,246,0.2)":j?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.1)",border:"none",borderRadius:"8px",color:"#8b5cf6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",transform:R?"scale(1.05)":"scale(1)"}),modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,animation:"fadeIn 0.2s ease"},modalContent:{background:j?"rgba(30,41,59,0.95)":"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",borderRadius:"20px",padding:"32px",maxWidth:"500px",width:"90%",border:j?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",animation:"slideUp 0.3s ease",position:"relative"},modalTitle:{fontSize:"24px",fontWeight:"700",color:j?"#e2e8f0":"#1e293b",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px"},modalClose:R=>({position:"absolute",top:"20px",right:"20px",background:"transparent",border:"none",color:R?"#ef4444":j?"#94a3b8":"#64748b",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"}),label:{fontSize:"12px",fontWeight:"600",color:j?"#94a3b8":"#64748b",marginBottom:"6px",display:"block"},emptyState:{textAlign:"center",padding:"40px 20px",color:j?"#94a3b8":"#64748b"},loadingState:{textAlign:"center",padding:"60px 20px",color:j?"#94a3b8":"#64748b",fontSize:"16px"},tabSwitcher:{display:"flex",gap:"8px",padding:"4px",background:j?"rgba(30,41,59,0.6)":"rgba(255,255,255,0.6)",borderRadius:"12px",backdropFilter:"blur(10px)",border:j?"1px solid rgba(139,92,246,0.2)":"1px solid rgba(139,92,246,0.1)"},tab:(R,Ce)=>({padding:"10px 20px",borderRadius:"8px",border:"none",background:R?"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)":Ce?j?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.1)":"transparent",color:R?"#fff":j?"#e2e8f0":"#1e293b",cursor:"pointer",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease",transform:Ce?"scale(1.05)":"scale(1)"})};if(typeof document<"u"&&!document.getElementById("secret-animations")){const R=document.createElement("style");R.id="secret-animations",R.innerHTML=`
            @keyframes pulse {
                0%, 100% { opacity: 1; transform: scale(1); }
                50% { opacity: 0.8; transform: scale(1.05); }
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            @keyframes slideUp {
                from { 
                    opacity: 0; 
                    transform: translateY(20px);
                }
                to { 
                    opacity: 1; 
                    transform: translateY(0);
                }
            }
            .input-focus:focus, select:focus {
    border-color: ${j?"rgba(139,92,246,0.6)":"rgba(139,92,246,0.4)"} !important;
    box-shadow: 0 0 0 3px rgba(139,92,246,0.1) !important;
}
        `,document.head.appendChild(R)}if(r)return n.jsxs("div",{style:w.page,children:[n.jsx("div",{style:w.pageGlow}),n.jsxs("div",{style:w.loadingState,children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600"},children:"Accessing Secret Departments..."})]})]});if(!(u&&i.includes(u.email)))return n.jsxs("div",{style:w.page,children:[n.jsx("div",{style:w.pageGlow}),n.jsxs("div",{style:w.emptyState,children:[n.jsx("div",{style:{fontSize:"64px",marginBottom:"24px"},children:""}),n.jsx("div",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"12px",color:j?"#e2e8f0":"#1e293b"},children:"Private Access Only"}),n.jsxs("p",{style:{...w.muted,maxWidth:"400px",margin:"0 auto"},children:["This department is restricted to authorized personnel only. Your email (",n.jsx("strong",{children:(u==null?void 0:u.email)||"Unknown"}),") does not have permission to view this page."]}),n.jsx("button",{onClick:()=>window.location.href="/admindashboard",style:{...w.button(we==="back"),width:"auto",marginTop:"24px",padding:"12px 32px"},onMouseEnter:()=>ge("back"),onMouseLeave:()=>ge(null),children:"Return to Dashboard"})]})]});if(A)return n.jsxs("div",{style:w.page,children:[n.jsx("div",{style:w.pageGlow}),n.jsxs("div",{style:w.emptyState,children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Access Denied"}),n.jsxs("div",{children:["Error: ",A]})]})]});const ft={};e==null||e.forEach(R=>{var Ce;ft[R.name]||(ft[R.name]={id:R.id,name:R.name,projects:[],operations:[]}),(Ce=R.contexts)==null||Ce.forEach(re=>{const xe={...re,domainName:R.name,domainId:R.id};re.projectType==="Operations"?ft[R.name].operations.push(xe):ft[R.name].projects.push(xe)})});const Et=(e==null?void 0:e.reduce((R,Ce)=>{var re;return R+(((re=Ce.contexts)==null?void 0:re.length)||0)},0))||0;return n.jsxs("div",{style:w.page,children:[n.jsx("div",{style:w.pageGlow}),n.jsxs("div",{style:w.headerRow,children:[n.jsxs("div",{children:[n.jsxs("h1",{style:w.header,children:[n.jsx("span",{style:w.headerIcon,children:""}),m==="contexts"?"Contextual Resources":"ManicTime Subscriptions"]}),n.jsxs("div",{style:w.subtitle,children:[n.jsx(co,{size:14,style:{display:"inline",marginRight:"6px"}}),m==="contexts"?"AI Context Management System":"Workspace Credential Management"]})]}),n.jsxs("div",{style:w.tabSwitcher,children:[n.jsxs("button",{style:w.tab(m==="contexts",we==="tab-contexts"),onMouseEnter:()=>ge("tab-contexts"),onMouseLeave:()=>ge(null),onClick:()=>h("contexts"),children:[n.jsx($m,{size:16}),"Contexts"]}),n.jsxs("button",{style:w.tab(m==="subscriptions",we==="tab-subs"),onMouseEnter:()=>ge("tab-subs"),onMouseLeave:()=>ge(null),onClick:()=>h("subscriptions"),children:[n.jsx(Ko,{size:16}),"ManicTime"]})]}),n.jsxs("div",{style:w.headerRight,children:[m==="contexts"?n.jsxs("button",{style:w.addButton(we==="add-context"),onMouseEnter:()=>ge("add-context"),onMouseLeave:()=>ge(null),onClick:()=>le(!0),children:[n.jsx(yn,{size:18}),"New Context"]}):n.jsxs("button",{style:w.addButton(we==="add-subscription"),onMouseEnter:()=>ge("add-subscription"),onMouseLeave:()=>ge(null),onClick:()=>E(!0),children:[n.jsx(yn,{size:18}),"New Subscription"]}),n.jsx("div",{style:{position:"relative",zIndex:1e5},children:n.jsx("button",{style:w.profileButton(te==="profile"),onMouseEnter:R=>{Me("profile");const Ce=R.currentTarget.getBoundingClientRect();be({top:Ce.bottom+12,right:window.innerWidth-Ce.right}),me(!0)},onMouseLeave:()=>Me(null),children:n.jsx(Yt,{size:20})})})]})]}),m==="contexts"?n.jsxs("div",{style:w.contentContainer,children:[n.jsxs("div",{style:w.panel(te==="left"),onMouseEnter:()=>Me("left"),onMouseLeave:()=>Me(null),children:[n.jsx("div",{style:w.panelGlow}),n.jsxs("h3",{style:w.panelTitle,children:[n.jsx($m,{size:20}),"All Contexts (",Et,")"]}),Et===0&&n.jsxs("div",{style:w.emptyState,children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),n.jsx("p",{style:w.muted,children:"No contexts created yet"}),n.jsx("p",{style:{...w.muted,marginTop:"8px"},children:'Click "New Context" to get started'})]}),Object.values(ft).map(R=>n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("div",{style:{fontSize:"14px",fontWeight:"700",color:j?"#e2e8f0":"#1e293b",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx(hs,{size:16,style:{color:"#8b5cf6"}}),R.name]}),R.projects.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:w.typeHeader,children:[n.jsx(ua,{size:12}),"Projects"]}),R.projects.map(Ce=>n.jsxs("div",{style:w.contextCard(($==null?void 0:$.id)===Ce.id,we===`ctx-${Ce.id}`),onClick:()=>ue(Ce),onMouseEnter:()=>ge(`ctx-${Ce.id}`),onMouseLeave:()=>ge(null),children:[n.jsxs("div",{style:w.contextTitle,children:[n.jsx(Ko,{size:14}),Ce.name]}),n.jsx("div",{style:w.muted,children:Ce.purpose})]},`ctx-${Ce.id}`))]}),R.operations.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:w.typeHeader,children:[n.jsx(Vm,{size:12}),"Operations"]}),R.operations.map(Ce=>n.jsxs("div",{style:w.contextCard(($==null?void 0:$.id)===Ce.id,we===`ctx-${Ce.id}`),onClick:()=>ue(Ce),onMouseEnter:()=>ge(`ctx-${Ce.id}`),onMouseLeave:()=>ge(null),children:[n.jsxs("div",{style:w.contextTitle,children:[n.jsx(Ko,{size:14}),Ce.name]}),n.jsx("div",{style:w.muted,children:Ce.purpose})]},`ctx-${Ce.id}`))]})]},`domain-${R.id}`))]}),n.jsxs("div",{style:w.panel(te==="right"),onMouseEnter:()=>Me("right"),onMouseLeave:()=>Me(null),children:[n.jsx("div",{style:w.panelGlow}),!$&&n.jsxs("div",{style:w.emptyState,children:[n.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Select a context to view details"}),n.jsx("p",{style:w.muted,children:"Choose a project context from the left panel to manage its settings"})]}),$&&n.jsxs(n.Fragment,{children:[n.jsxs("h2",{style:{fontSize:"24px",fontWeight:"700",color:j?"#e2e8f0":"#1e293b",marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(co,{size:24,style:{color:"#8b5cf6"}}),$.name]}),n.jsx("p",{style:{...w.muted,marginBottom:"8px"},children:$.purpose}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",backgroundColor:j?"rgba(139,92,246,0.2)":"rgba(139,92,246,0.1)",border:j?"1px solid rgba(139,92,246,0.3)":"1px solid rgba(139,92,246,0.2)",fontSize:"11px",fontWeight:"600",color:"#8b5cf6"},children:[n.jsx(hs,{size:10}),$.domainName]}),n.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",backgroundColor:$.projectType==="Operations"?j?"rgba(245,158,11,0.2)":"rgba(245,158,11,0.1)":j?"rgba(16,185,129,0.2)":"rgba(16,185,129,0.1)",border:$.projectType==="Operations"?"1px solid rgba(245,158,11,0.3)":"1px solid rgba(16,185,129,0.3)",fontSize:"11px",fontWeight:"600",color:$.projectType==="Operations"?"#f59e0b":"#10b981"},children:[$.projectType==="Operations"?n.jsx(Vm,{size:10}):n.jsx(ua,{size:10}),$.projectType||"Project"]})]}),n.jsxs("div",{style:w.sectionHeader(Fe.aiContext,we==="section-ai"),onClick:()=>se("aiContext"),onMouseEnter:()=>ge("section-ai"),onMouseLeave:()=>ge(null),children:[n.jsxs("div",{style:w.sectionTitle,children:[n.jsx(Ei,{size:16}),"AI Context"]}),Fe.aiContext?n.jsx(ko,{size:20}):n.jsx(Uc,{size:20})]}),n.jsx("div",{style:w.sectionContent(Fe.aiContext),children:H===$.id?n.jsxs(n.Fragment,{children:[n.jsx("textarea",{className:"input-focus",style:w.textarea,value:I,onChange:R=>_(R.target.value),placeholder:"Provide AI context and instructions..."}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[n.jsxs("button",{style:w.button(we==="save-ai-context"),onMouseEnter:()=>ge("save-ai-context"),onMouseLeave:()=>ge(null),onClick:async()=>{try{await ke(`/api/ai/contexts/${$.id}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({aiContext:I})}),M(null),B()}catch(R){console.error("Failed to update AI context:",R),alert("Failed to update AI context. Please try again.")}},children:[n.jsx(bi,{size:16}),"Save"]}),n.jsx("button",{style:w.button(we==="cancel-ai-context","secondary"),onMouseEnter:()=>ge("cancel-ai-context"),onMouseLeave:()=>ge(null),onClick:()=>{M(null),_("")},children:"Cancel"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{style:{...w.muted,padding:"16px",background:j?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)",borderRadius:"10px",border:j?"1px solid rgba(139,92,246,0.2)":"1px solid rgba(139,92,246,0.1)",lineHeight:"1.6",minHeight:$.aiContext?"auto":"60px",color:$.aiContext?"inherit":j?"#94a3b8":"#64748b",fontStyle:$.aiContext?"normal":"italic"},children:$.aiContext||"No AI context provided yet. Click edit to add instructions."}),n.jsxs("button",{style:w.button(we==="edit-ai-context","secondary"),onMouseEnter:()=>ge("edit-ai-context"),onMouseLeave:()=>ge(null),onClick:()=>{M($.id),_($.aiContext||"")},children:[n.jsx(oa,{size:16}),"Edit AI Context"]})]})}),n.jsxs("div",{style:w.sectionHeader(Fe.websites,we==="section-web"),onClick:()=>se("websites"),onMouseEnter:()=>ge("section-web"),onMouseLeave:()=>ge(null),children:[n.jsxs("div",{style:w.sectionTitle,children:[n.jsx(jp,{size:16}),"Linked Websites (",($.resources||[]).length,")"]}),Fe.websites?n.jsx(ko,{size:20}):n.jsx(Uc,{size:20})]}),n.jsxs("div",{style:w.sectionContent(Fe.websites),children:[!Te&&n.jsxs("button",{style:w.button(we==="add-website","secondary"),onMouseEnter:()=>ge("add-website"),onMouseLeave:()=>ge(null),onClick:()=>Ne(!0),children:[n.jsx(yn,{size:16}),"Add Website"]}),Te&&n.jsxs("div",{style:{marginTop:"12px",marginBottom:"16px"},children:[G.map((R,Ce)=>n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:w.label,children:"Resource Type"}),n.jsx(Vt,{value:R.type==="website"?"Website / URL":R.type==="application"?"Application / Software":R.type==="file_pattern"?"File / Project Pattern":R.type,onChange:re=>{kt(Ce,"type",{"Website / URL":"website","Application / Software":"application","File / Project Pattern":"file_pattern"}[re]||re)},options:["Website / URL","Application / Software","File / Project Pattern"],placeholder:"Select resource type...",isDarkMode:j,variant:"purple",compact:!0}),n.jsxs("div",{style:{...w.muted,marginTop:"8px",marginBottom:"12px",padding:"8px 12px",background:j?"rgba(139,92,246,0.1)":"rgba(139,92,246,0.05)",borderRadius:"8px",fontSize:"11px"},children:[R.type==="website"&&' Example: "Vite + React - Google Chrome" or "localhost:3000"',R.type==="application"&&' Example: "Visual Studio Code" or "Code" or "Code.exe"',R.type==="file_pattern"&&' Example: "MP" or "MaxCap" (matches anywhere in activity)']}),n.jsxs("div",{style:w.websiteInput,children:[n.jsx("input",{className:"input-focus",style:{...w.input,flex:2,marginBottom:0},placeholder:R.type==="website"?"Website title or URL":R.type==="application"?"Application name":"File or project pattern",value:R.value,onChange:re=>kt(Ce,"value",re.target.value)}),n.jsx("input",{className:"input-focus",style:{...w.input,flex:2,marginBottom:0},placeholder:"Description (optional)",value:R.description,onChange:re=>kt(Ce,"description",re.target.value)}),n.jsx("button",{style:w.websiteAddButton(we===`add-row-${Ce}`),onMouseEnter:()=>ge(`add-row-${Ce}`),onMouseLeave:()=>ge(null),onClick:$e,children:n.jsx(yn,{size:16})})]})]},`resource-input-${Ce}`)),n.jsxs("button",{style:w.button(we==="save-resources"),onMouseEnter:()=>ge("save-resources"),onMouseLeave:()=>ge(null),onClick:pt,children:[n.jsx(bi,{size:16}),"Save Resources"]})]}),n.jsxs("div",{style:{marginTop:"16px"},children:[($.resources||[]).length===0&&n.jsx("p",{style:w.muted,children:"No websites linked yet"}),($.resources||[]).map(R=>n.jsxs("div",{style:w.tag(we===`tag-${R.id}`),onMouseEnter:()=>ge(`tag-${R.id}`),onMouseLeave:()=>ge(null),children:[R.type==="website"&&n.jsx(jp,{size:12}),R.type==="application"&&n.jsx(Ko,{size:12}),R.type==="file_pattern"&&n.jsx($o,{size:12}),n.jsx("span",{children:R.value}),R.description&&n.jsxs("span",{style:{fontSize:"10px",opacity:.7,marginLeft:"4px"},children:["(",R.description,")"]}),n.jsx("button",{onClick:()=>Ut(R.id),style:w.deleteButton(we===`delete-${R.id}`),onMouseEnter:()=>ge(`delete-${R.id}`),onMouseLeave:()=>ge(null),title:"Remove resource",children:n.jsx(Pr,{size:12})})]},`resource-${R.id}`))]})]})]})]})]}):n.jsxs("div",{style:w.contentContainer,children:[n.jsxs("div",{style:w.panel(te==="sub-left"),onMouseEnter:()=>Me("sub-left"),onMouseLeave:()=>Me(null),children:[n.jsx("div",{style:w.panelGlow}),n.jsxs("h3",{style:w.panelTitle,children:[n.jsx(Ko,{size:20}),"All Subscriptions (",y.length,")"]}),L?n.jsxs("div",{style:w.emptyState,children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),n.jsx("p",{style:w.muted,children:"Loading subscriptions..."})]}):y.length===0?n.jsxs("div",{style:w.emptyState,children:[n.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),n.jsx("p",{style:w.muted,children:"No subscriptions configured"}),n.jsx("p",{style:{...w.muted,marginTop:"8px"},children:'Click "New Subscription" to get started'})]}):y.map(R=>n.jsxs("div",{style:w.contextCard((P==null?void 0:P.Id)===R.Id,we===`sub-${R.Id}`),onClick:()=>O(R),onMouseEnter:()=>ge(`sub-${R.Id}`),onMouseLeave:()=>ge(null),children:[n.jsxs("div",{style:w.contextTitle,children:[n.jsx(Ko,{size:14,style:{color:R.IsActive?"#10b981":"#94a3b8"}}),R.SubscriptionName]}),n.jsxs("div",{style:w.contextSubtitle,children:[n.jsx(jp,{size:10}),"WS: ",R.WorkspaceId]}),!R.IsActive&&n.jsx("div",{style:{fontSize:"10px",color:"#ef4444",marginTop:"4px",fontWeight:"600"},children:" INACTIVE"})]},R.Id))]}),n.jsxs("div",{style:w.panel(te==="sub-right"),onMouseEnter:()=>Me("sub-right"),onMouseLeave:()=>Me(null),children:[n.jsx("div",{style:w.panelGlow}),P?n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{marginBottom:"24px"},children:[n.jsxs("h2",{style:{fontSize:"24px",fontWeight:"700",color:j?"#e2e8f0":"#1e293b",marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx(Ko,{size:24,style:{color:"#8b5cf6"}}),P.SubscriptionName]}),n.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",backgroundColor:P.IsActive?j?"rgba(16,185,129,0.2)":"rgba(16,185,129,0.1)":j?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",border:P.IsActive?"1px solid rgba(16,185,129,0.3)":"1px solid rgba(239,68,68,0.3)",fontSize:"11px",fontWeight:"600",color:P.IsActive?"#10b981":"#ef4444"},children:P.IsActive?" Active":" Inactive"})]}),n.jsx("div",{style:w.sectionHeader(!0,we==="section-config"),onMouseEnter:()=>ge("section-config"),onMouseLeave:()=>ge(null),children:n.jsxs("div",{style:w.sectionTitle,children:[n.jsx(Ei,{size:16}),"Configuration"]})}),n.jsxs("div",{style:{marginTop:"16px"},children:[n.jsx("label",{style:w.label,children:"Subscription Name"}),n.jsx("input",{className:"input-focus",style:w.input,value:P.SubscriptionName,onChange:R=>O({...P,SubscriptionName:R.target.value}),placeholder:"Main Workspace"}),n.jsx("label",{style:w.label,children:"Workspace ID"}),n.jsx("input",{className:"input-focus",style:{...w.input,fontFamily:"monospace",fontSize:"13px"},value:P.WorkspaceId,onChange:R=>O({...P,WorkspaceId:R.target.value}),placeholder:"0yd5t2"}),n.jsx("label",{style:w.label,children:"Client ID"}),n.jsx("input",{className:"input-focus",style:{...w.input,fontFamily:"monospace",fontSize:"13px"},value:P.ClientId,onChange:R=>O({...P,ClientId:R.target.value}),placeholder:"sKPuHCvF263IgHs84ZZPHVokj7mVHzBk"}),n.jsxs("label",{style:w.label,children:["Client Secret",n.jsx("span",{style:{marginLeft:"8px",fontSize:"10px",color:"#ef4444",fontWeight:"700"},children:" SENSITIVE"})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("input",{className:"input-focus",style:{...w.input,fontFamily:"monospace",fontSize:ve[P.Id]?"13px":"20px",letterSpacing:ve[P.Id]?"0":"4px",paddingRight:"48px"},type:ve[P.Id]?"text":"password",value:P.ClientSecret,onChange:R=>O({...P,ClientSecret:R.target.value}),placeholder:""}),n.jsx("button",{type:"button",onClick:()=>Qe(P.Id),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",color:j?"#94a3b8":"#64748b",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.2s ease"},onMouseEnter:R=>R.currentTarget.style.color="#8b5cf6",onMouseLeave:R=>R.currentTarget.style.color=j?"#94a3b8":"#64748b",children:ve[P.Id]?n.jsx($o,{size:18}):n.jsx(Ei,{size:18})})]}),ve[P.Id]&&n.jsx("div",{style:{fontSize:"11px",color:"#f59e0b",marginTop:"-8px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"4px"},children:" Secret visible (auto-hiding in 10s)"}),n.jsx("label",{style:w.label,children:"Base URL"}),n.jsx("input",{className:"input-focus",style:{...w.input,fontFamily:"monospace",fontSize:"13px"},value:P.BaseUrl,onChange:R=>O({...P,BaseUrl:R.target.value}),placeholder:"https://cloud.manictime.com"}),n.jsx("label",{style:w.label,children:"Status"}),n.jsx(Vt,{value:P.IsActive?" Active":" Inactive",onChange:R=>O({...P,IsActive:R===" Active"}),options:[" Active"," Inactive"],placeholder:"Select status...",isDarkMode:j,variant:"purple",compact:!0}),n.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px"},children:[n.jsxs("button",{style:w.button(we==="save-sub"),onMouseEnter:()=>ge("save-sub"),onMouseLeave:()=>ge(null),onClick:ne,children:[n.jsx(bi,{size:16}),"Save Changes"]}),n.jsxs("button",{style:{...w.button(we==="delete-sub","secondary"),background:we==="delete-sub"?"linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)":j?"rgba(239,68,68,0.2)":"rgba(239,68,68,0.1)",color:we==="delete-sub"?"#fff":"#ef4444",border:"1px solid rgba(239,68,68,0.3)"},onMouseEnter:()=>ge("delete-sub"),onMouseLeave:()=>ge(null),onClick:()=>fe(P.Id),children:[n.jsx(Pr,{size:16}),"Delete"]})]})]})]}):n.jsxs("div",{style:w.emptyState,children:[n.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:""}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"Select a subscription to view details"}),n.jsx("p",{style:w.muted,children:"Choose a subscription from the left panel to manage its configuration"})]})]})]}),Z&&n.jsx("div",{style:w.modal,onClick:()=>le(!1),children:n.jsxs("div",{style:w.modalContent,onClick:R=>R.stopPropagation(),children:[n.jsx("button",{style:w.modalClose(we==="close"),onMouseEnter:()=>ge("close"),onMouseLeave:()=>ge(null),onClick:()=>le(!1),children:n.jsx(dn,{size:20})}),n.jsxs("h3",{style:w.modalTitle,children:[n.jsx(co,{size:24}),"Create New Context"]}),n.jsx("label",{style:w.label,children:"Department *"}),n.jsx("div",{style:{marginBottom:"12px"},children:n.jsx(Vt,{value:D.domainId&&((pe=e==null?void 0:e.find(R=>R.id===Number(D.domainId)))==null?void 0:pe.name)||"",onChange:R=>{const Ce=e==null?void 0:e.find(re=>re.name===R);K({...D,domainId:Ce?String(Ce.id):""})},options:["Select a department...",...(e==null?void 0:e.map(R=>R.name))||[]],placeholder:"Select a department...",isDarkMode:j,variant:"purple",compact:!0})}),n.jsx("label",{style:w.label,children:"Project Type *"}),n.jsx("div",{style:{marginBottom:"12px"},children:n.jsx(Vt,{value:D.projectType,onChange:R=>K({...D,projectType:R}),options:["Project","Operations"],placeholder:"Select project type...",isDarkMode:j,variant:"purple",compact:!0})}),n.jsx("label",{style:w.label,children:"Context Name *"}),n.jsx("input",{className:"input-focus",style:w.input,placeholder:"e.g., Project Alpha, Marketing Campaign",value:D.name,onChange:R=>K({...D,name:R.target.value})}),n.jsx("label",{style:w.label,children:"Purpose"}),n.jsx("textarea",{className:"input-focus",style:w.textarea,placeholder:"Brief description of this context",value:D.purpose,onChange:R=>K({...D,purpose:R.target.value})}),n.jsx("label",{style:w.label,children:"AI Context / Instructions"}),n.jsx("textarea",{className:"input-focus",style:w.textarea,placeholder:"Provide context and instructions for AI",value:D.aiContext,onChange:R=>K({...D,aiContext:R.target.value})}),n.jsxs("div",{style:{display:"flex",gap:"12px"},children:[n.jsx("button",{style:w.button(we==="cancel","secondary"),onMouseEnter:()=>ge("cancel"),onMouseLeave:()=>ge(null),onClick:()=>le(!1),children:"Cancel"}),n.jsxs("button",{style:w.button(we==="create"),onMouseEnter:()=>ge("create"),onMouseLeave:()=>ge(null),onClick:Pe,children:[n.jsx(bi,{size:16}),"Create Context"]})]})]})}),U&&n.jsx("div",{style:w.modal,onClick:()=>E(!1),children:n.jsxs("div",{style:w.modalContent,onClick:R=>R.stopPropagation(),children:[n.jsx("button",{style:w.modalClose(we==="close-sub"),onMouseEnter:()=>ge("close-sub"),onMouseLeave:()=>ge(null),onClick:()=>E(!1),children:n.jsx(dn,{size:20})}),n.jsxs("h3",{style:w.modalTitle,children:[n.jsx(Ko,{size:24}),"Add New Subscription"]}),n.jsx("label",{style:w.label,children:"Subscription Name *"}),n.jsx("input",{className:"input-focus",style:w.input,placeholder:"Main Workspace",value:Q.subscriptionName,onChange:R=>V({...Q,subscriptionName:R.target.value})}),n.jsx("label",{style:w.label,children:"Workspace ID *"}),n.jsx("input",{className:"input-focus",style:{...w.input,fontFamily:"monospace",fontSize:"13px"},placeholder:"0yd5t2",value:Q.workspaceId,onChange:R=>V({...Q,workspaceId:R.target.value})}),n.jsx("label",{style:w.label,children:"Client ID *"}),n.jsx("input",{className:"input-focus",style:{...w.input,fontFamily:"monospace",fontSize:"13px"},placeholder:"sKPuHCvF263IgHs84ZZPHVokj7mVHzBk",value:Q.clientId,onChange:R=>V({...Q,clientId:R.target.value})}),n.jsxs("label",{style:w.label,children:["Client Secret *",n.jsx("span",{style:{marginLeft:"8px",fontSize:"10px",color:"#ef4444"},children:" SENSITIVE"})]}),n.jsx("input",{className:"input-focus",style:{...w.input,fontFamily:"monospace",fontSize:"13px"},type:"password",placeholder:"",value:Q.clientSecret,onChange:R=>V({...Q,clientSecret:R.target.value})}),n.jsx("label",{style:w.label,children:"Base URL *"}),n.jsx("input",{className:"input-focus",style:{...w.input,fontFamily:"monospace",fontSize:"13px"},placeholder:"https://cloud.manictime.com",value:Q.baseUrl,onChange:R=>V({...Q,baseUrl:R.target.value})}),n.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[n.jsx("button",{style:w.button(we==="cancel-sub","secondary"),onMouseEnter:()=>ge("cancel-sub"),onMouseLeave:()=>ge(null),onClick:()=>E(!1),children:"Cancel"}),n.jsxs("button",{style:w.button(we==="create-sub"),onMouseEnter:()=>ge("create-sub"),onMouseLeave:()=>ge(null),onClick:Tt,children:[n.jsx(bi,{size:16}),"Create Subscription"]})]})]})}),ie&&N&&n.jsxs("div",{style:{...w.profileTooltip,top:N.top,right:N.right,zIndex:2147483647},onMouseEnter:()=>me(!0),onMouseLeave:()=>me(!1),children:[n.jsx("div",{style:w.tooltipArrow}),n.jsxs("div",{style:w.userInfo,children:[n.jsx("div",{style:w.avatar,children:u?`${u.firstName[0]}${u.lastName[0]}`:"U"}),n.jsxs("div",{children:[n.jsx("div",{style:w.userName,children:u?`${u.firstName} ${u.lastName}`:"Loading..."}),n.jsx("div",{style:w.userRole,children:u?`${u.role}  ${u.department}`:"Loading..."})]})]}),n.jsxs("div",{style:w.userStats,children:[n.jsxs("div",{style:w.tooltipStatItem,children:[n.jsx("div",{style:w.tooltipStatNumber,children:(e==null?void 0:e.length)||0}),n.jsx("div",{style:w.tooltipStatLabel,children:"Domains"})]}),n.jsxs("div",{style:w.tooltipStatItem,children:[n.jsx("div",{style:w.tooltipStatNumber,children:Et}),n.jsx("div",{style:w.tooltipStatLabel,children:"Contexts"})]}),n.jsxs("div",{style:w.tooltipStatItem,children:[n.jsx("div",{style:w.tooltipStatNumber,children:Object.values(ft).reduce((R,Ce)=>R+Ce.projects.length,0)}),n.jsx("div",{style:w.tooltipStatLabel,children:"Projects"})]})]}),n.jsx("button",{style:w.themeToggle,onClick:Lt,children:j?" Light Mode":" Dark Mode"})]})]})},fQ=()=>n.jsx("div",{children:n.jsx(xE,{children:n.jsxs(JB,{children:[n.jsx(xn,{path:"/",element:n.jsx(gE,{})}),n.jsx(xn,{path:"/forgot-password",element:n.jsx(fE,{})}),n.jsx(xn,{path:"/auth",element:n.jsx(hQ,{})}),n.jsx(xn,{path:"/admindashboard",element:n.jsx(Kn,{children:n.jsx(CE,{})})}),n.jsx(xn,{path:"/adminteamcapacity",element:n.jsx(Kn,{children:n.jsx(BE,{})})}),n.jsx(xn,{path:"/adminutilization",element:n.jsx(Kn,{children:n.jsx(SE,{})})}),n.jsx(xn,{path:"/adminactuals",element:n.jsx(Kn,{children:n.jsx(kE,{})})}),n.jsx(xn,{path:"/adminviewlogs",element:n.jsx(Kn,{children:n.jsx(jE,{})})}),n.jsx(xn,{path:"/adminviewplan",element:n.jsx(Kn,{children:n.jsx(nQ,{})})}),n.jsx(xn,{path:"/adminindividualplan",element:n.jsx(Kn,{children:n.jsx(rQ,{})})}),n.jsx(xn,{path:"/adminapprovals",element:n.jsx(Kn,{children:n.jsx(oQ,{})})}),n.jsx(xn,{path:"/adminaddplan",element:n.jsx(Kn,{children:n.jsx(iQ,{})})}),n.jsx(xn,{path:"/adminaddindividualplan",element:n.jsx(Kn,{children:n.jsx(sQ,{})})}),n.jsx(xn,{path:"/admineditplan",element:n.jsx(Kn,{children:n.jsx(aQ,{})})}),n.jsx(xn,{path:"/admineditindividualplan/:id",element:n.jsx(Kn,{children:n.jsx(AQ,{})})}),n.jsx(xn,{path:"/adminreports",element:n.jsx(Kn,{children:n.jsx(lQ,{})})}),n.jsx(xn,{path:"/users",element:n.jsx(Kn,{children:n.jsx(cQ,{})})}),n.jsx(xn,{path:"/addusers",element:n.jsx(Kn,{children:n.jsx(dQ,{})})}),n.jsx(xn,{path:"/adminalerts",element:n.jsx(Kn,{children:n.jsx(uQ,{})})}),n.jsx(xn,{path:"/adminprofile",element:n.jsx(Kn,{children:n.jsx(pQ,{})})}),n.jsx(xn,{path:"/secret",element:n.jsx(Kn,{children:n.jsx(gQ,{})})})]})})}),xv="https://maxcap.azurewebsites.net/auth",mQ={auth:{clientId:"2f33b445-b2d8-42fd-a207-cb167a23bc98",authority:"https://login.microsoftonline.com/7dae6b7e-a024-4264-bf0b-f8cc2bc79204",redirectUri:xv,navigateToLoginRequestUrl:!1},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},Hy=new sf(mQ);function xQ(){const[i,e]=f.useState(!1);return f.useEffect(()=>{console.log(" Clearing old MSAL cache..."),Object.keys(localStorage).forEach(t=>{t.includes("msal")&&!t.includes("sidebar")&&localStorage.removeItem(t)}),Hy.initialize().then(()=>{console.log(" MSAL fully initialized"),console.log(" Redirect URI:",xv),e(!0)}).catch(t=>{console.error(" MSAL initialization failed:",t)})},[]),i?n.jsx(f.StrictMode,{children:n.jsx(hE,{instance:Hy,children:n.jsx(ZB,{children:n.jsx(fQ,{})})})}):n.jsx("div",{children:"Loading authentication"})}oB.createRoot(document.getElementById("root")).render(n.jsx(xQ,{}));
